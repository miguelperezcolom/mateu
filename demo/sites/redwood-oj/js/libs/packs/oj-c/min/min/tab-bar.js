/**
 * @license
 * Copyright (c) %FIRSTYEAR% %CURRENTYEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,a,r){const n=[...r];return e.forEach(((e,r)=>{const o={data:t[r],key:a[r]?.key,metadata:a[r]};e>=0?n.splice(e,0,o):n.push(o)})),n}async function a(e,t){const a=[],r=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(r.has(e)){const t=r.get(e);a.push({...t,key:e})}return a}function r(e,t){return e.has(t)?e.get(t):-1}function n(e,t){const a=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<a.length&&a.splice(e,1)})),a}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=async function(e,o,i){const{add:s,remove:l,update:c}=e??{},u=new Map;for(const[e,t]of o.entries())u.set(t.key,e);let d=[...o];l&&(d=function(e,t,a){const{indexes:o,keys:i}=e;let s=[...t];o?.length?s=n(o,s):i?.size&&(s=function(e,t,a){const o=[];return e.forEach((e=>{const t=r(a,e);-1!==t&&o.push(t)})),n(o,t)}(i,s,a));return s}(l,d,u));s&&(d=await async function(e,n,o,i){const{addBeforeKeys:s,data:l,indexes:c,keys:u,metadata:d}=e;let m=[...n],b=l||[],y=d||[];if(0===b.length&&u?.size){const e=await a(i,u)??[];b=e.map((e=>e.data)),y=e.map((e=>e.metadata))}0===y.length&&u?.size&&(y=[...u].map((e=>({key:e}))));b.length&&(m=c?.length?t(c,b,y,m):s?.length?function(e,a,n,o){const i=[],s=[];return e.forEach((e=>{i.push(r(o,e)),s.push({key:e})})),t(i,a,s,n)}(s,b,m,o):function(e,a,r){return t(new Array(e.length).fill(-1),e,a,r)}(b,y,m));return m}(s,d,u,i));c&&(d=await async function(e,t,n,o){const{data:i,indexes:s,keys:l,metadata:c}=e;let u=[...t],d=i||[],m=c||[];if(0===d.length&&l?.size){const e=await a(o,l)??[];d=e.map((e=>e.data)),m=e.map((e=>e.metadata))}0===m.length&&l?.size&&(m=[...l].map((e=>({key:e}))));d.length&&(s?.length?u=function(e,t,a,r){const n=[...r];return e.forEach(((e,r)=>{if(n[e]){const o={data:t[r],key:a[r]?.key,metadata:a[r]};n.splice(e,1,o)}})),n}(s,d,m,u):l?.size&&(u=function(e,t,a,n,o){const i=[...n];return e.forEach((e=>{const n=r(o,e),s={data:t[n],key:a[n]?.key,metadata:a[n]};n>=0&&i.splice(n,1,s)})),i}(l,d,m,u,n)));return u}(c,d,u,i));return d}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,a,r){this.handleMutateEvent=async e=>{const{detail:a}=e,r=this.addBusyState("updating data from mutation event"),n=await(0,t.getUpdatedItemsFromMutationDetail)(a,this.currentData,this.dataProvider);r?.(),this.currentData=n,this.callback?.onDataUpdated?.(n)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=a,this.callback=r,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const a of t){const t=a.data.map(((e,t)=>({data:e,key:a.metadata[t].key,metadata:a.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=function({addBusyState:e,data:r}){const[n,o]=(0,t.useState)([]),i=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==r&&(i.current=new a.DataProviderHandler(r,e,{onDataUpdated:o})),()=>{i.current?.destroy(),i.current=void 0})),[r,e]),{data:n}}})),define("oj-c/tab-bar/DataTabBarIcon",["require","exports","preact/jsx-runtime"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTabBarIcon=function(e){const{icon:a}=e;if(!a)return null;if("class"===a.type)return(0,t.jsx)("span",{class:a.class});return null}})),define("oj-c/tab-bar/ContentRenderer",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/UNSAFE_TabBar","@oracle/oraclejet-preact/UNSAFE_OverflowTabBar","./DataTabBarIcon","@oracle/oraclejet-preact/UNSAFE_ReorderableTabBar"],(function(require,e,t,a,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabBarRenderer=function(e,r,n){const{data:i,truncation:u,...d}=e,m=d.display,{maxWidths:b}=(0,a.useProgressiveTruncation)({rootRef:n,isDisabled:!(u&&"progressive"===u)}),y="progressive"===u?i.map((e=>({...e,labelMaxWidth:b?.get(e.itemKey)}))):i,f=e=>"href"in e;return"enabled"===d.reorderable?(0,t.jsx)(o.ReorderableTabBar,{...d,onSelect:r,children:y.map((e=>null!=e&&(f(e)?c(e,m):e.isRemovable?l(e,m):s(e,m))))}):(0,t.jsx)(a.TabBar,{onSelect:r,ref:n,...d,children:y.map((e=>f(e)?c(e,m):e.isRemovable?l(e,m):s(e,m)))})},e.OverflowTabBarRenderer=function(e,a){const{data:n,truncation:o,...i}=e;return(0,t.jsx)(r.OverflowTabBar,{items:n,onSelect:a,truncation:o,...i})};const i=(e,t)=>{if(null!=e){let a="";return a="stacked"===t||"icons"===t?e>99?"99+":e.toString():e>999?"999+":e.toString(),a}},s=(e,r)=>(0,t.jsx)(a.TabBarItem,{icon:e.icon?(0,t.jsx)(n.DataTabBarIcon,{icon:e.icon}):void 0,badge:i(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity,"aria-controls":e.tabPanelId,labelMaxWidth:e.labelMaxWidth}),l=(e,r)=>(0,t.jsx)(a.RemovableTabBarItem,{icon:e.icon?(0,t.jsx)(n.DataTabBarIcon,{icon:e.icon}):void 0,"aria-controls":e.tabPanelId,badge:i(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity}),c=(e,r)=>(0,t.jsx)(a.TabBarLinkItem,{icon:e.icon?(0,t.jsx)(n.DataTabBarIcon,{icon:e.icon}):void 0,"aria-controls":e.tabPanelId,badge:i(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity,href:e.href})})),define("oj-c/tab-bar/DataTabBar",["require","exports","preact/jsx-runtime","preact","@oracle/oraclejet-preact/UNSAFE_ConveyorBelt","./ContentRenderer"],(function(require,e,t,a,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTabBar=function(e){const{onRemove:o,onReorder:i,onSelect:s,selection:l,data:c=[],display:u,layout:d,edge:m,overflow:b,reorderable:y,truncation:f,"aria-label":p,"aria-labelledby":v,contextMenuConfig:h}=e,j=(0,a.createRef)(),g=e=>{e.value&&s&&s(e)};return"popup"===b?(0,n.OverflowTabBarRenderer)({selection:l,onRemove:o,data:c,layout:d,display:u,edge:m,truncation:f,contextMenuConfig:h,"aria-label":p,"aria-labelledby":v},g):"conveyor"===b?(0,t.jsx)(r.ConveyorBelt,{children:(0,n.TabBarRenderer)({onRemove:o,selection:l,layout:d,display:u,edge:m,"aria-label":p,"aria-labelledby":v,data:c,reorderable:y,truncation:f,onReorder:i,contextMenuConfig:h},g,j)}):(0,n.TabBarRenderer)({onRemove:o,selection:l,layout:d,display:u,edge:m,"aria-label":p,"aria-labelledby":v,data:c,reorderable:y,truncation:f,onReorder:i,contextMenuConfig:h},g,j)}})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-item-icon",["require","exports","preact/jsx-runtime"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuItemIcon=function(e){return"img"===e.icon.type?(0,t.jsx)("img",{src:e.icon.src}):(0,t.jsx)("span",{class:e.icon.class})}})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-select-items",["require","exports","preact/jsx-runtime","./menu-item-icon","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuSelectItems=function(e){return(0,t.jsx)(t.Fragment,{children:e.items.map((e=>e&&(0,t.jsx)(r.SelectMenuItem,{label:e.label,isDisabled:e.disabled,endIcon:e.endIcon?(0,t.jsx)(a.MenuItemIcon,{icon:e.endIcon}):void 0,value:e.value})))})}})),define("oj-c/utils/PRIVATE_ItemsMenu/items-menu",["require","exports","preact/jsx-runtime","./menu-item-icon","./menu-select-items","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,a,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemsMenu=void 0;e.ItemsMenu=({items:o=[],selection:i={},onSelectionChanged:s,defaultItemsRenderer:l,onOjMenuAction:c,isSplitMenu:u=!1,onOjMenuSelection:d})=>{const m=e=>{const t=i[e];return t&&"string"==typeof t?t:void 0},b=e=>{const t=i[e];return Array.isArray(t)?t:[]};function y(e,t,a){return r=>{a?.({value:r.value,menuSelectionGroupKey:e}),d?.({value:r.value,menuSelectionGroupKey:e}),s?.(((e,t,a)=>{const r={...e};return Array.isArray(a)&&0===a.length?delete r[t]:r[t]=a,r})(t,e,r.value))}}return(0,t.jsx)(t.Fragment,{children:o.map((o=>{if("string"==typeof o){const e=l?.[o]?.();return null!=e?e:(0,t.jsx)(t.Fragment,{})}switch(o.type){case"divider":case"separator":return(0,t.jsx)(n.MenuSeparator,{});case"submenu":return o.items&&o.label&&!u?(0,t.jsx)(n.Submenu,{label:o.label,itemKey:o.key,children:(0,t.jsx)(e.ItemsMenu,{items:o.items,selection:i,onSelectionChanged:s,onOjMenuSelection:d,onOjMenuAction:c,defaultItemsRenderer:l})}):void 0;case"selectsingle":return o.items&&o.key&&!u?(0,t.jsx)(n.SelectSingleMenuGroup,{groupKey:o.key,value:o.selection||m(o.key),onCommit:y(o.key,i,o.onSelection),children:(0,t.jsx)(r.MenuSelectItems,{items:o.items})}):void 0;case"selectmultiple":return o.items&&o.key&&!u?(0,t.jsx)(n.SelectMultipleMenuGroup,{groupKey:o.key,value:o.selection||b(o.key),onCommit:y(o.key,i,o.onSelection),children:(0,t.jsx)(r.MenuSelectItems,{items:o.items})}):void 0;case void 0:case"item":return o.label?(0,t.jsx)(n.MenuItem,{itemKey:o.key,label:o.label,isDisabled:o.disabled,variant:u?void 0:o.variant,startIcon:!u&&o.startIcon&&(0,t.jsx)(a.MenuItemIcon,{icon:o.startIcon}),endIcon:!u&&o.endIcon&&(0,t.jsx)(a.MenuItemIcon,{icon:o.endIcon}),onAction:(f=o.key,p=o.onAction,()=>{p?.(),c?.({key:f})})}):void 0;default:return}var f,p}))})}})),define("oj-c/tab-bar/tab-bar",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent","oj-c/hooks/UNSAFE_useDataProvider/useDataProvider","ojs/ojcontext","./DataTabBar","preact/hooks","preact/compat","@oracle/oraclejet-preact/utils/UNSAFE_clientUtils","../utils/PRIVATE_ItemsMenu/items-menu"],(function(require,e,t,a,r,n,o,i,s,l,c,u){"use strict";function d(e){return e&&"fetchFirst"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.TabBar=void 0;e.TabBar=(0,r.registerCustomElement)("oj-c-tab-bar",(0,l.forwardRef)((({data:e=[],onOjBeforeSelect:a,onOjRemove:l,onOjReorder:m,onOjSelectionAction:b,onSelectionChanged:y,reorderable:f="disabled",overflow:p="hidden",truncation:v="none",selection:h,contextMenuConfig:j,display:g="standard",layout:x="stretch",edge:M="top","aria-label":I,"aria-labelledby":R,id:S},_)=>{const k=(0,s.useRef)(null),B=(0,s.useCallback)(((e="MessageBanner: busyState")=>k.current?o.getContext(k.current).getBusyContext().addBusyState({description:e}):()=>{}),[]),{data:P}=(0,n.useDataProvider)({data:!Array.isArray(e)&&d(e)?e:void 0,addBusyState:B}),D=(0,s.useMemo)((()=>{let t=[];return Array.isArray(e)?t=e:d(e)&&(t=P.map((e=>({...e.data})))),t}),[e,P]);(0,s.useImperativeHandle)(_,(()=>({_doReorderHelper:e=>(m&&m({reorderedKeys:e}),Promise.resolve())})));const A=(0,c.isMobile)(),E=(0,s.useMemo)((()=>({itemsRenderer:e=>{if(e){const a=e.defaultMenuItems,r=D.find((t=>t.itemKey===e.itemKey)),n=(e=>"isRemovable"in e)(r)&&!0===r.isRemovable;if((n||"enabled"===f)&&A&&null!=a)return(0,t.jsx)(t.Fragment,{children:a})}return null}})),[]),T=(0,s.useCallback)((e=>{const a={itemKey:e.itemKey,hasDefaultMenuItems:null!=e.defaultMenuItems},r=j?.items(a);if(null!=r&&null!=e){const a={defaultMenuItems:()=>e.defaultMenuItems,remove:()=>e.allMenuItems?.remove,reorder:()=>e.allMenuItems?.reorder};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(u.ItemsMenu,{items:r,defaultItemsRenderer:a})})}}),[j?.items]),O=(0,s.useMemo)((()=>({itemsRenderer:T,accessibleLabel:j?.accessibleLabel})),[j?.accessibleLabel,T]),w=null!=j?O:A?E:void 0;return(0,t.jsx)(r.Root,{id:S,ref:k,children:(0,t.jsx)(i.DataTabBar,{"aria-label":I,"aria-labelledby":R,data:D,onRemove:e=>{l&&l({key:e.value})},onReorder:e=>{m&&m({reorderedKeys:e.reorderedKeys})},onSelect:e=>{(async()=>{e:{if(a)try{await a({key:e.value})}catch{break e}if(b&&b({previousValue:h||"",value:e.value}),h===e.value)return;y&&y(e.value)}})()},reorderable:f,selection:h,display:g,edge:M,layout:x,overflow:p,truncation:v,contextMenuConfig:w})})})),"TabBar",{properties:{data:{type:"Array<object>|DataProvider"},selection:{type:"string|number",writeback:!0},reorderable:{type:"string",enumValues:["disabled","enabled"]},overflow:{type:"string",enumValues:["hidden","popup","conveyor"]},display:{type:"string",enumValues:["standard","icons","stacked"]},layout:{type:"string",enumValues:["stretch","condense"]},edge:{type:"string",enumValues:["top","bottom"]},truncation:{type:"string",enumValues:["none","progressive"]},contextMenuConfig:{type:"object",properties:{items:{type:"function"},accessibleLabel:{type:"string"}}}},events:{ojBeforeSelect:{cancelable:!0},ojRemove:{},ojReorder:{},ojSelectionAction:{}},extension:{_WRITEBACK_PROPS:["selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","id","aria-labelledby"]},methods:{_doReorderHelper:{}}},{data:[],reorderable:"disabled",overflow:"hidden",truncation:"none",display:"standard",layout:"stretch",edge:"top"},{"@oracle/oraclejet-preact":a.default})})),define("oj-c/tab-bar",["require","exports","oj-c/tab-bar/tab-bar"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabBar=void 0,Object.defineProperty(e,"TabBar",{enumerable:!0,get:function(){return t.TabBar}})}));
//# sourceMappingURL=tab-bar.js.map