define(['exports', 'preact/jsx-runtime', './Flex-4bc3a394', './HighlightText-ace1b6c4', './Grid-2ddec30a', 'css!./ListItemLayoutStyles.styles.css', './ListItemText-80a9cab7', './Skeleton-a7e166a0', 'preact/hooks', './logger-0f873e29', './PRIVATE_SelectCommon/themes/dropdownStyles.css', './List-5b5b3bd7', './usePress-949a0d03', './CaretDown-59d569a3', './classNames-08d99695', './useComponentTheme-5aa41a8f', './UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutTheme', './useTestId-a2e433c2', './UNSAFE_BaseButton/themes/redwood/BaseButtonTheme', './CollectionInteractionContext-0b4ed98b', './useTranslationBundle-27bf6340', './clientHints-6d361eaa', 'preact/compat', './keyboardUtils-fb6219eb', './tabbableUtils-9101c0e5'], (function(e,t,n,a,o,s,r,l,i,c,d,u,p,m,h,y,b,w,f,C,S,x,v,g,T){"use strict";function D(e,t){if("string"!=typeof t)return t(e);if(e.data?.hasOwnProperty(t)){const n=e.data[t];return String(n)}c.error("SelectMultiple: itemText specifies field that does not exist: "+t)}const k=()=>{};const K=t.jsx(u.SkeletonContainer,{minimumCount:3,children:()=>t.jsx(n.Flex,{height:"12x",align:"center",children:t.jsx(l.Skeleton,{height:"4x"})})}),I=e=>0===e.button&&!e.ctrlKey,R=e=>{e.currentTarget===e.target&&e.preventDefault()},E=()=>{};e.DefaultList=function({"aria-label":e,currentItemVariant:o,currentKey:s,data:l,itemRenderer:c,itemText:p,onCurrentKeyChange:m,onItemAction:h,onLoadRange:y=k,onSelectionChange:b,searchText:w,selectedKeys:f,selectionMode:C}){const S=i.useCallback((e=>{const o={data:e.data,index:e.index,metadata:e.metadata,selector:e.selector,searchText:w,selectedKeys:f,onSelectionChange:({value:e})=>{b?.({value:e})}},s={data:e.data,key:e.metadata.key,metadata:e.metadata};return c?c(o):t.jsxs(n.Flex,{align:"center",children:[e.selector&&t.jsx("div",{class:d.dropdownStyles.selectorWrapper,children:e.selector()}),t.jsx("div",{class:"single"===C?d.dropdownStyles.singleSelectItem:d.dropdownStyles.multiSelectItem,children:t.jsx(r.ListItemText,{variant:"primary",children:t.jsx(a.HighlightText,{matchText:w,children:D(s,p)})})})]})}),[c,p,b,w,f,C]),x=i.useMemo((()=>({all:!1,keys:f??new Set})),[f]),v=i.useMemo((()=>void 0!==s?{rowKey:s}:void 0),[s]),g=i.useCallback((({context:{data:e,metadata:t}})=>{h?.({context:{data:e,key:t.key,metadata:t}})}),[h]),T=i.useCallback((({value:e})=>{b?.({value:new Set(e.keys?.values())})}),[b]);return t.jsx(u.List,{"aria-label":e,allowTabbableMode:!1,currentItemVariant:o,currentItemOverride:v,data:l??null,loadingIndicator:K,onPersistCurrentItem:m,onItemAction:g,onLoadRange:y,onSelectionChange:T,role:"listbox",selectedKeys:x,selectionMode:C,children:e=>S(e)})},e.DropdownArrow=function({isDisabled:e=!1,onClick:n,testId:a}){const{classes:o}=y.useComponentTheme(b.ButtonLabelLayoutRedwoodTheme,{size:"sm"}),{baseTheme:s}=y.useComponentTheme(f.BaseButtonRedwoodTheme),r=i.useCallback((e=>{e.preventDefault()}),[]),{pressProps:l}=p.usePress(n??E,{isDisabled:e}),c=h.classNames([o,s,d.dropdownStyles.arrow.base,e?d.dropdownStyles.arrow.disabled:d.dropdownStyles.arrow.enabled]),u=w.useTestId(a);return t.jsx("span",{"aria-hidden":"true",class:c,tabIndex:-1,onMouseDown:r,...u,...l,children:t.jsx(m.SvgCaretDown,{})})},e.DropdownList=function({children:e,id:n,dropdownListRef:a,hasTopGap:o=!0,hasBottomGap:s=!0,isLoading:r=!1,onKeyDown:l}){const i=h.classNames([d.dropdownStyles.list.base,o&&d.dropdownStyles.list.topGap,s&&d.dropdownStyles.list.bottomGap,r&&d.dropdownStyles.list.loading]);return t.jsx(C.CollectionInteractionContext.Provider,{value:"embedded",children:t.jsx("div",{ref:a,class:i,id:n,onMouseDown:R,onKeyDown:l,children:e})})},e.EmptyResults=function(){const e=S.useTranslationBundle("@oracle/oraclejet-preact");return t.jsx("div",{class:d.dropdownStyles.results.extraItem,onMouseDown:R,children:e.select_noMatchesFound()})},e.createKeysFromValueItems=function(e){const t=e?.reduce(((e,t)=>(e.add(t.key),e)),new Set);return t},e.isBeforeDataFetch=function(e){return"atLeast"===e.sizePrecision&&0===e.totalSize},e.isMobile=function(){const e=x.getClientHints().deviceType;return"phone"===e||"tablet"===e},e.isPhone=function(){return"phone"===x.getClientHints().deviceType},e.isSearchTextEmptyOrUndefined=function(e){return void 0===e||0===e.length},e.isSimpleClick=I,e.isTablet=function(){return"tablet"===x.getClientHints().deviceType},e.preventDefault=e=>{e.preventDefault()},e.preventDefaultForCurrentTarget=R,e.renderItemText=D,e.useCollectionRenderer=function({currentKey:e,onCurrentKeyChange:t,onItemAction:n,onSelectedKeysChange:a,searchText:o,selectedKeys:s,selectedOnlyData:r}){return v.useMemo((()=>{const l={searchText:o,currentRowKeyOverride:e,onPersistCurrentRowKey:t,selected:s};return void 0!==n?{...l,onRowAction:n}:{...l,onSelectedChange:a,selectedOnlyData:r}}),[e,t,n,a,o,s,r])},e.useSelectCommon=function({data:e,inputRef:t,isFocused:n,onFilter:a}){const o=i.useRef(null),s=i.useRef(null),[r,l]=i.useState(!1),[c,d]=i.useState(!1),[u,p]=i.useState({rowKey:void 0}),m=i.useRef(),h=i.useCallback((e=>{m.current=e.rowKey,p(e)}),[]),[y,b]=i.useState(!1),[w,f]=i.useState(),[C,S]=i.useState(),[x,v]=i.useState(r),[D,k]=i.useState(n),[K,R]=i.useState(y),E=i.useCallback((e=>{!e.defaultPrevented&&I(e)&&(r||l(!0),setTimeout((function(){t.current?.focus()}),0))}),[t,r]),F=i.useCallback((()=>{l(!r),t.current?.focus()}),[t,r]),L=i.useCallback((e=>{if(r)switch(l(!1),e?.type){case"keydown":if(e.code===g.KEYS.ESC)t.current?.focus();break;case"mousedown":s.current?.contains(document.activeElement)&&t.current?.focus()}}),[t,r]),P=i.useCallback((e=>{d(e.placement.startsWith("top"))}),[]),j=i.useCallback((()=>r&&s.current?T.allTabbableElements(s.current):void 0),[r]),M=i.useCallback((t=>{if(r){if(null!=e){const t=j();t?.[0]?.focus(),void 0===u.rowKey&&h({rowKey:e.data[0]?.metadata?.key})}}else l(!0);t.preventDefault()}),[u,e,j,r,h]),O=i.useCallback((e=>{if(!g.isControlOrFunctionKey(e))switch(e.code){case g.KEYS.PAGE_UP:case g.KEYS.PAGE_DOWN:return void e.preventDefault();case g.KEYS.UP:case g.KEYS.DOWN:e.preventDefault();break;case g.KEYS.ESC:r&&(l(!1),e.preventDefault(),e.stopPropagation())}}),[r]),A=i.useCallback((e=>{if(!g.isControlOrFunctionKey(e))switch(e.code){case g.KEYS.UP:case g.KEYS.DOWN:M(e)}}),[M]),B=i.useCallback((e=>{r||l(!0),b(!0),f(e.value);const t=e.value;S(t),a?.({searchText:t})}),[r,a]),U=i.useCallback((e=>{m.current=e.value}),[]),N=i.useCallback((()=>{b(!1),f(""),S("")}),[]),Y=i.useCallback((e=>{b(!0),f(e),S(e)}),[]);return x===r&&D===n&&K===y||r||n||!y||N(),i.useEffect((()=>{r&&!y&&a?.({searchText:void 0})}),[r,y,a]),x!==r&&(r||d(!1),v(r)),D!==n&&k(n),K!==y&&R(y),{currentRowKeyRef:m,currentRowOverride:u,dropdownRef:s,getDropdownTabbableElems:j,handleDropdownArrowClick:F,handleDropdownAutoDismiss:L,handleDropdownPosition:P,handleInput:B,handleMainFieldKeyDown:O,handleMainFieldKeyUp:A,handleUpDownArrowKeys:M,isDropdownAbove:c,isDropdownOpen:r,isFocused:n||r,isUserFiltering:y,mainFieldRef:o,onCurrentKeyChange:U,onMouseDown:E,searchText:C,setCurrentRowOverride:h,setDropdownOpen:l,setUserInput:f,stopFiltering:N,updateFiltering:Y,userInput:w}}}));
//# sourceMappingURL=useSelectCommon-f04454d2.js.map
