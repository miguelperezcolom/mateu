{"version":3,"file":"Axis-3b37075a.js","sources":["../../src/PRIVATE_Axis/ChartAxisText.tsx","../../src/PRIVATE_Axis/Axis.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { JSXInternal } from 'preact/src/jsx';\nimport { styles } from './themes/AxisStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { TextProps } from '#PRIVATE_VisSVGText/text.types';\nimport { getClientHints } from '#utils/PRIVATE_clientHints';\nimport { MultilineText, SinglelineText } from '#PRIVATE_VisSVGText';\n\ntype SVGTextAttrs = JSXInternal.HTMLAttributes<SVGTextElement>;\n\ntype ChartText = {\n  id?: string;\n  isTitle: boolean;\n  textProps: TextProps;\n  isRotated: boolean;\n  isRtl: boolean;\n  isInteractive: boolean;\n  style?: SVGTextAttrs['style'];\n  dataProps?: Record<`data-oj-private-${string}`, string | undefined>;\n  axisPosition?: 'left' | 'right' | 'top' | 'bottom';\n};\n\n/**\n * Renders the svg text with given style and svg attributes.\n */\nexport function ChartAxisText({\n  style,\n  textProps,\n  isTitle,\n  isInteractive,\n  id,\n  isRotated,\n  isRtl,\n  dataProps,\n  axisPosition\n}: ChartText) {\n  const browser = getClientHints().browser;\n  const className = classNames([\n    isInteractive ? styles.isInteractive : '',\n    isTitle ? styles.axisTitle : '',\n    !isTitle && browser === 'safari' ? styles.middleBaseline : '',\n    !isTitle || !isRotated ? styles.centralBaseline : '',\n    isTitle && (axisPosition === 'left' || axisPosition === 'right')\n      ? styles.textAfterEdgeBaseline\n      : ''\n  ]);\n\n  const isMultiline = textProps.lines.length > 1;\n\n  return isMultiline ? (\n    <MultilineText\n      class={className}\n      text={textProps.text}\n      dataProps={dataProps}\n      isRtl={isRtl}\n      isRotated={isRotated}\n      lines={textProps.lines}\n      lineProps={textProps.lineProps}\n      textStyle={style}\n      isTruncated={textProps.isTruncated}\n      id={id}\n    />\n  ) : (\n    <SinglelineText\n      style={style}\n      isRtl={isRtl}\n      isRotated={isRotated}\n      dataProps={dataProps}\n      text={textProps.lines[0]}\n      props={textProps.lineProps[0]}\n      isTruncated={textProps.isTruncated}\n      id={id}\n      class={className}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { JSXInternal } from 'preact/src/jsx';\nimport { ChartAxisText } from './ChartAxisText';\nimport { getEnclosingRectDims } from './utils/labelUtils';\nimport { TextProps } from '#PRIVATE_VisSVGText/text.types';\nimport { AxisStyles, styles } from './themes/AxisStyles.css';\nimport { AxisRedwoodTheme } from './themes/redwood/AxisTheme';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport { updateVisTextStyleProperties } from '#utils/UNSAFE_visUtils/textUtils';\nimport { Dimension, VisTextStyle } from '#utils/UNSAFE_visTypes/common';\nimport { styles as VisStyles } from '#hooks/PRIVATE_useVisDnd/themes/VisDndStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { ColorProps } from '#utils/UNSAFE_interpolations/colors';\n\ntype SVGTextAttrs = JSXInternal.HTMLAttributes<SVGTextElement>;\n\ntype Props = {\n  paths?: [number, number, number, number][];\n  isRtl: boolean;\n  title?: string;\n  activeId?: string;\n  titleProps?: TextProps;\n  focusedGroupIndex?: number;\n  focusedGroupLevelIndex?: number;\n  titleStyle: VisTextStyle;\n  tickLabelStyle?: SVGTextAttrs['style'];\n  tickLabels: (TextProps & { index: number })[];\n  isTextInteractive?: (index: number) => boolean;\n  axisPosition: 'left' | 'right' | 'top' | 'bottom';\n  cursor?: string;\n  availSpace?: Dimension;\n  dragOverStyle: 'accept' | 'reject' | 'none';\n  separators?: [number, number, number, number][];\n  separatorColor: ColorProps['color'];\n};\n\n/**\n * Renders the chart axis.\n */\nexport function Axis({\n  title,\n  titleStyle,\n  titleProps,\n  tickLabels,\n  tickLabelStyle,\n  focusedGroupIndex,\n  focusedGroupLevelIndex,\n  axisPosition,\n  isRtl,\n  activeId,\n  isTextInteractive,\n  cursor,\n  availSpace,\n  dragOverStyle,\n  separators,\n  separatorColor\n}: Props) {\n  const { classes } = useComponentTheme<AxisStyles>(AxisRedwoodTheme);\n  const axisClass = [classes];\n  switch (dragOverStyle) {\n    case 'accept':\n      axisClass.push(VisStyles.dndDragOverSvgStyle);\n      break;\n    case 'reject':\n      axisClass.push(VisStyles.dndRejectedStyle);\n      axisClass.push(styles.axisBackground);\n      break;\n    case 'none':\n      axisClass.push(styles.axisBackground);\n  }\n  return (\n    <>\n      <g class={classNames(axisClass)} style={{ cursor }}>\n        <rect {...availSpace}></rect>\n        {title && titleProps && (\n          <ChartAxisText\n            textProps={titleProps}\n            isRtl={isRtl}\n            isRotated={!!titleProps.isRotated}\n            style={updateVisTextStyleProperties(titleStyle)}\n            isTitle\n            isInteractive={false}\n            axisPosition={axisPosition}\n          />\n        )}\n        {tickLabels.length > 0 && (\n          <g style={tickLabelStyle} class={classNames([styles.axisLabel])}>\n            {tickLabels.map(({ index, ...textProps }: Props['tickLabels'][0]) => {\n              const level = parseInt(textProps.dataProps?.['data-oj-private-level-index']!);\n              const group = parseInt(textProps.dataProps?.['data-oj-private-group-index']!);\n              const isFocused = focusedGroupIndex === group && focusedGroupLevelIndex === level;\n              return (\n                <>\n                  {isFocused\n                    ? textProps.text &&\n                      textProps.dims && (\n                        <rect\n                          rx=\"2\"\n                          ry=\"2\"\n                          {...getEnclosingRectDims(textProps.dims, axisPosition, isRtl)}\n                          class={styles.outlineRing}></rect>\n                      )\n                    : ''}\n                  {textProps.text && (\n                    <ChartAxisText\n                      textProps={textProps}\n                      isTitle={false}\n                      isRotated={!!textProps.isRotated}\n                      isRtl={isRtl}\n                      dataProps={textProps.dataProps}\n                      isInteractive={!!isTextInteractive?.(index)}\n                      id={isFocused ? activeId : ''}\n                    />\n                  )}\n                </>\n              );\n            })}\n          </g>\n        )}\n      </g>\n      {separators?.map((path) => {\n        return (\n          <line\n            style={{ stroke: separatorColor }}\n            x1={path[0]}\n            y1={path[1]}\n            x2={path[2]}\n            y2={path[3]}\n            className={styles.groupSeparatorLine}></line>\n        );\n      })}\n    </>\n  );\n}\n"],"names":["ChartAxisText","style","textProps","isTitle","isInteractive","id","isRotated","isRtl","dataProps","axisPosition","browser","getClientHints","className","classNames","styles","axisTitle","middleBaseline","centralBaseline","textAfterEdgeBaseline","lines","length","_jsx","MultilineText","class","text","lineProps","textStyle","isTruncated","SinglelineText","props","title","titleStyle","titleProps","tickLabels","tickLabelStyle","focusedGroupIndex","focusedGroupLevelIndex","activeId","isTextInteractive","cursor","availSpace","dragOverStyle","separators","separatorColor","classes","useComponentTheme","AxisRedwoodTheme","axisClass","push","VisStyles","dndDragOverSvgStyle","dndRejectedStyle","axisBackground","_jsxs","children","jsx","updateVisTextStyleProperties","axisLabel","map","index","level","parseInt","group","isFocused","dims","rx","ry","getEnclosingRectDims","outlineRing","path","stroke","x1","y1","x2","y2","groupSeparatorLine"],"mappings":"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"}