define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useId-c9578d26', 'preact', './classNames-08d99695', './useComponentTheme-5aa41a8f', './TabbableModeContext-a9c97640', './useTabbableMode-df433329', './Flex-4bc3a394', './Separator-181f7541', './ChevronDown-1d01f028', './CollapseIcon-8d26ba2a', './ChevronUp-fd41f17e', './UNSAFE_Collapsible/themes/redwood/CollapsibleTheme', './useAnimation-5a74955f', './useTestId-a2e433c2'], (function(e,n,a,s,i,o,t,l,d,r,c,u,b,p,h,x,m){"use strict";const g=({isExpanded:e,isDisabled:a,iconPosition:s})=>{const i=a?"disabled":"primary",o="start"===s&&e?u.SvgChevronDown:b.CollapseIcon,t="end"===s&&e?p.SvgChevronUp:u.SvgChevronDown,l="start"===s?o:t;return n.jsx(l,{size:"6x",color:i})},v={isDisabled:!1};const C=({children:e,id:s,contentId:l,isDisabled:u,isExpanded:b,iconPosition:p,variant:x="basic",toggleHandler:m,accessibleLabel:C,accessibleLabelId:f})=>{const[S,E]=a.useState(!1),j=a.useRef(!1),{isTabbable:y}=d.useTabbableMode(),{classes:D,styles:T}=t.useComponentTheme(h.CollapsibleRedwoodTheme,{disabled:u?"isDisabled":"notDisabled",divider:"horizontal-rule"===x?"hasDivider":"noDivider",focused:S?"isFocused":"notFocused"}),w=o.classNames([T.headerChildrenStyle,"end"===p&&T.iconEndStyle,"start"===p&&T.iconStartStyle]),I=a.useCallback((e=>{if(m(e.target),S){(window&&"PointerEvent"in window&&e instanceof PointerEvent||e instanceof MouseEvent)&&E(!1)}}),[m,S]),{pressProps:H}=function(e,n=v){const[s,i]=a.useState(!1),o=a.useMemo((()=>({...v,...n})),[n]),t=a.useCallback((e=>{"Space"!==e.code&&"Enter"!==e.code||i(!0)}),[i]),l=a.useCallback((n=>{"Space"!==n.code&&"Enter"!==n.code||(i(!1),n.preventDefault(),e(n))}),[e,i]),d=a.useCallback((()=>{i(!1)}),[i]),r=a.useCallback((n=>{n.stopPropagation(),s||e(n)}),[e,s]);return{pressProps:o.isDisabled?{}:{onKeyDown:t,onKeyUp:l,onBlur:d,onClick:r}}}(I,{isDisabled:u}),k=a.useCallback((e=>{"focusin"!==e.type||j.current?E(!1):E(!0)}),[]),P=()=>{j.current=!0},N=()=>{j.current=!1},F=C?{"aria-label":C}:f?{"aria-labelledby":f}:{"aria-labelledby":s};return n.jsxs(n.Fragment,{children:[n.jsx("div",{id:s,className:D,...H,children:n.jsx(r.Flex,{align:"center",justify:"start"===p?"start":"between",children:n.jsxs(i.Fragment,{children:["end"===p&&n.jsx("div",{className:w,children:e}),n.jsx("div",{tabIndex:y&&!u?0:-1,role:"button","aria-controls":l,"aria-expanded":b,onFocus:k,onBlur:k,onMouseDown:P,onMouseUp:N,className:T.chevronStyle,...F,children:n.jsx(g,{iconPosition:p,isExpanded:b,isDisabled:u})}),"start"===p&&n.jsx("div",{className:w,children:e})]})})}),"horizontal-rule"===x&&n.jsx(c.Separator,{})]})},f=({children:e,id:s,isExpanded:i,onTransitionEnd:l})=>{const[d,r]=a.useState(i?"expanding":"unmounted"),{styles:c}=t.useComponentTheme(h.CollapsibleRedwoodTheme),u=a.useRef({overflowY:"hidden",maxHeight:i?"none":"0"}),b=o.classNames([c.contentChildrenStyle,"unmounted"===d&&c.contentHiddenStyle]);a.useEffect((()=>{("unmounted"!==d||i)&&r(i?"expanding":"collapsing")}),[i,d]);const{nodeRef:p}=x.useAnimation(d,{animationStates:S,onAnimationEnd:({animationState:e})=>{"collapsing"===e&&r("unmounted"),l?.()}});return n.jsx("div",{className:b,ref:p,id:s,tabIndex:-1,style:u.current,"aria-hidden":!i||void 0,children:e})},S={expanding:e=>({to:{maxHeight:`${e.scrollHeight}px`},options:{duration:400},end:{maxHeight:"none"}}),collapsing:e=>({..."none"===e.style.maxHeight&&{from:{maxHeight:`${e.scrollHeight}px`}},to:{maxHeight:"0"},options:{duration:400}})};e.Collapsible=({header:e,children:i,isDisabled:o=!1,isExpanded:t=!1,iconPosition:l="start",variant:d="basic",onToggle:r,onTransitionEnd:c,"aria-label":u,"aria-labelledby":b,testId:p})=>{const h=s.useId(),x=`oj-collapsible-header-${h}`,g=`oj-collapsible-content-${h}`,v=m.useTestId(p),S=a.useCallback((e=>{o||r?.({value:!t,target:e})}),[o,r,t]),E=a.useCallback((()=>{c?.({value:t})}),[c,t]);return n.jsxs("div",{...v,children:[n.jsx(C,{id:x,contentId:g,toggleHandler:S,isDisabled:o,isExpanded:t,iconPosition:l,variant:d,accessibleLabel:u,accessibleLabelId:b,children:e}),n.jsx(f,{id:g,isExpanded:t,onTransitionEnd:E,children:i})]})}}));
//# sourceMappingURL=Collapsible-bf6945f6.js.map
