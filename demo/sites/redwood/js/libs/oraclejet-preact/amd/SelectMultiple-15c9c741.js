define(['exports', 'preact/jsx-runtime', './Label-46fd3625', 'preact/hooks', './keyboardUtils-fb6219eb', 'preact/compat', './TextFieldInput-eb40adaa', 'css!./ObfuscatedTextFieldInputStyles.styles.css', './ReadonlyTextFieldInput-e5723c48', './StyledTextField-5e554e5b', './LayerHost-7d4aa6d3', './FormContext-6b0879a0', './useFormContext-b8cbbb21', './FormFieldContext-a024b891', 'css!./LabelValueLayoutStyles.styles.css', './logger-0f873e29', './UNSAFE_TextField/themes/TextFieldStyles.css', 'css!./SkeletonStyles.styles.css', 'css!./TextFieldLoadingStyles.styles.css', 'css!./TextFieldStyles.styles.css', 'module', './UNSAFE_TextField/themes/redwood/TextFieldVariants.css', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './UNSAFE_TextField/themes/FormLayoutStyles.css', 'module', './Flex-4bc3a394', 'css!./LayoutStyles.styles.css', './InputGroupContext-372087af', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', './formControlUtils-de035f75', './useTranslationBundle-27bf6340', 'css!./LiveRegionStyles.styles.css', './TabbableModeContext-a9c97640', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-b485c235', './CompactUserAssistance-e2f42bce', 'preact', 'css!./IconStyle.styles.css', './Popup-062b66ff', 'css!./HiddenAccessibleStyles.styles.css', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './useFocusableTextField-8b755b15', './useLoadingIndicatorTimer-20a3bf5f', './useTextField-3ab0a23b', './Separator-181f7541', './SelectMobileFieldInput-094c2a5e', './useSelectCommon-f04454d2', './useAccessibleContext-23e8a333', './useFormFieldContext-9260f081', './textAlign-ef924afd', 'css!./FormControlUtilsStyles.styles.css', 'css!./ReadonlyTextFieldInputStyles.styles.css', './UNSAFE_TextField/themes/redwood/ReadonlyTextFieldInputVariants.css', './TextField-51b63f5f', './UNSAFE_SelectMultiple/themes/SelectedValuesCountStyles.css', './Chip-b62a8126', './IconButton-b4b83d00', './NavLeft-14fe560c', './useFocusWithin-5a504fca', './useUser-988f7da2', './classNames-08d99695', './dimensions-f24f9a2b', './mergeInterpolations-9ede4cf7', './HiddenAccessible-037ef42d', './Text-9e32c423', './Close-7a1f81d8', './useId-c9578d26', './UNSAFE_SelectMultiple/themes/TextTagStyles.css', './UNSAFE_SelectMultiple/themes/TextTagListStyles.css', './LiveRegion-4b9317e5', './View-5520bcf5', './Button-29507a64', './UNSAFE_SelectMultiple/themes/MobileDropdownFooterStyles.css', './useEffectEvent-66da1357', './equals-e73adbe3', './mergeProps-bcfa6a92', './stringUtils-4ffd9d59', './useHiddenTestMethod-2f1d2e7e'], (function(e,t,s,n,o,l,i,a,r,d,c,u,p,h,b,y,m,x,f,v,S,T,w,g,F,C,D,A,I,R,L,E,k,K,V,j,U,P,B,M,O,N,_,H,z,q,Y,W,$,G,Z,J,Q,X,ee,te,se,ne,oe,le,ie,ae,re,de,ce,ue,pe,he,be,ye,me,xe,fe,ve,Se,Te,we,ge,Fe,Ce,De,Ae,Ie,Re,Le,Ee){"use strict";function ke({assistiveText:e,collectionRenderer:s,collectionRendererContext:n,data:o,dropdownId:l,dropdownRef:i,helpSourceLink:a,helpSourceText:r,isAddToListShown:d,isDisabled:c,isDropdownAbove:u,isEmptyResults:p,isOpen:h,isReadonly:b,label:y,mainFieldRef:m,userAssistanceDensity:x,onAddToListAction:f,onAutoDismiss:v,onPosition:S}){const T=j.useTranslationBundle("@oracle/oraclejet-preact"),w=!h||u||c||b||!e&&!a||"efficient"!==x&&"reflow"!==x?void 0:t.jsx(P.TabbableModeContext.Provider,{value:{isTabbable:!1},children:t.jsx(X.DropdownUserAssistance,{assistiveText:e,fieldLabel:y,helpSourceLink:a,helpSourceText:r,userAssistanceDensity:x})}),g=p?d?void 0:t.jsx(ee.EmptyResults,{}):s(n),F=d?t.jsxs(t.Fragment,{children:[!p&&t.jsx("div",{onMouseDown:ee.preventDefault,children:t.jsx(Q.Separator,{})}),t.jsx(X.LinkItem,{isHighlighted:p,onAction:f,children:T.select_addToList()})]}):void 0;return t.jsxs(X.Dropdown,{dropdownRef:i,id:l,isOpen:h,anchorRef:m,onAutoDismiss:v,onPosition:S,children:[t.jsxs(ee.DropdownList,{hasBottomGap:void 0===w,isLoading:null===o,children:[g,F]}),w]})}function Ke({"aria-label":e,count:s=0,onKeyDown:n,onKeyUp:o,onMouseDown:l,...i}){const a=j.useTranslationBundle("@oracle/oraclejet-preact"),r=a.selectMultiple_showSelectedValues(),d=e?`${e}. `:"",c=a.selectMultiple_countPlus({COUNT:"99"}),u=s>99?`${c}`:`${s}`,p=`${d}${a.selectMultiple_valuesSelected({VALUE_COUNT:`${s}`})} ${r}`;return t.jsx("div",{class:re.selectedValueCountStyles.base,onKeyDown:n,onKeyUp:o,onMouseDown:l,children:t.jsx(de.Chip,{"aria-label":p,...i,children:u})})}function Ve({children:e,columnSpan:s,fieldLabel:n,hasInsideLabel:o,isBackButtonShown:l,isClearButtonShown:i,isDropdownArrowShown:a,isDropdownSelectedOnlyView:r,isSelectedValuesCountShown:d,selectedValuesCount:c,onBackButtonClick:u,onClearButtonClick:p,onDropdownArrowClick:h,onSelectedValuesCountKeyDown:b,onSelectedValuesCountKeyUp:y,onSelectedValuesCountMouseDown:m,onSelectedValuesCountToggle:x,...f}){const{isDisabled:v,isLoading:S}=se.useFormFieldContext(),T=j.useTranslationBundle("@oracle/oraclejet-preact"),w=l?t.jsx(ce.IconButton,{"aria-label":T.selectMultiple_back(),size:"xs",variant:"ghost",onAction:u,children:t.jsx(ue.SvgNavLeft,{})}):null,g=i?t.jsx(ce.IconButton,{"aria-label":T.formControl_clear(),size:"sm",variant:"ghost",onAction:p,children:t.jsx(ue.SvgCancelS,{})}):null,F=a?t.jsx(ee.DropdownArrow,{isDisabled:v,onClick:h,testId:`${f.testId}_dropdownarrow`}):null,C=S?void 0:d?t.jsxs(A.Flex,{align:"center",justify:"center",gap:[0,"1x"],children:[t.jsx(Ke,{"aria-label":n,count:c,isDisabled:v,isSelected:r,onKeyDown:b,onKeyUp:y,onMouseDown:m,onToggle:x}),i&&g,a&&F]}):t.jsxs(t.Fragment,{children:[i&&g,a&&F]});return t.jsx(ae.TextField,{columnSpan:s,startContent:l&&w,mainContent:e,endContent:C,...f})}function je({children:e,removeIcon:s="never",isSelected:l=!1,onRemoveAction:i,onSelect:a,onRemoveIconClick:r,isFocused:d,value:c}){const u=j.useTranslationBundle("@oracle/oraclejet-preact"),p=n.useRef(null),h=Se.useId(),b=be.classNames([Te.textTagStyles.base,l&&Te.textTagStyles.selected]),y=n.useCallback((()=>{i?.(c)}),[c,i]),m=n.useCallback((()=>{a?.(c)}),[c,a]),x=n.useCallback((()=>{r?.(c)}),[c,r]),f=n.useCallback((e=>{o.isBackspaceOrDelete(e)&&y()}),[y]);return n.useEffect((()=>{d&&l&&(p.current?.focus(),p.current?.scrollIntoView({block:"nearest"}))}),[d,l]),t.jsxs(t.Fragment,{children:[t.jsxs("span",{ref:p,class:b,tabIndex:-1,onClick:m,onKeyUp:f,onMouseDown:ee.preventDefault,role:"option","aria-describedby":h,"aria-selected":l?"true":"false",children:[t.jsx(fe.Text,{size:"md",variant:"inherit",children:e}),"always"===s&&t.jsx(P.TabbableModeContext.Provider,{value:{isTabbable:!1},children:t.jsx(ce.IconButton,{size:"xs",variant:"ghost",onAction:x,children:t.jsx(ve.SvgClose,{})})})]}),t.jsx(xe.HiddenAccessible,{id:h,children:u.selectMultiple_removeSelectedTagInstructionText()})]})}const Ue=Array.from(["maxWidth"],(e=>ye.dimensionInterpolations[e])),Pe=me.mergeInterpolations(Ue);const Be=l.forwardRef((function(e,s=()=>{}){const{"aria-label":l,data:i,hasInsideLabel:a=!1,removeIcon:r="never",onExitNavigation:d,onRemove:c}=e,u=n.useRef(null),[p,h]=n.useState([]),{direction:b}=he.useUser(),y=n.useRef(-1),m=i.at(-1)?.value,x=n.useRef({value:m,index:i.length-1});x.current={value:m,index:i.length-1};const f=n.useCallback((e=>{const t=i.at(e)?.value;null!=t&&h([t])}),[i]),v=n.useCallback((()=>{h((e=>(y.current=-1,e.length?[]:e)))}),[]),S=n.useCallback((e=>{c?.([e]),d?.(),v()}),[v,d,c]),T=n.useCallback((e=>{const t=[...p];p.includes(e)||t.push(e),c?.(t),d?.(),v()}),[p,v,d,c]),w=n.useCallback((e=>{h([e]),y.current=i.findIndex((t=>t.value===e))}),[i,h]),g=n.useCallback((e=>{if(0!==i.length){if("ltr"===b&&"ArrowLeft"===e.code||"rtl"===b&&"ArrowRight"===e.code){if(0===y.current)return;return y.current-=1,void f(y.current)}return"ltr"===b&&"ArrowRight"===e.code||"rtl"===b&&"ArrowLeft"===e.code?y.current===i.length-1?void d?.():(y.current+=1,void f(y.current)):"Home"===e.code?(y.current=0,void f(y.current)):"End"===e.code?(y.current=i.length-1,void f(y.current)):o.isSelectAll(e)?(h(i.map((e=>e.value))),void e.preventDefault()):void 0}}),[i,b,d,f,h]),F=n.useCallback((()=>{h((e=>e.length||void 0===x.current.value?e:(y.current=x.current.index,[x.current.value])))}),[]),C=n.useCallback((()=>{v()}),[v]),{focusProps:D}=pe.useFocusWithin({onBlurWithin:C});n.useImperativeHandle(s,(()=>({blur:C,focus:F})),[C,F]),n.useEffect((()=>{u.current?.scrollTo({left:u.current.scrollWidth*("ltr"===b?1:-1)})}),[i,b]);const A=Pe(e),I=be.classNames([we.textTagListStyles.textTagListBase,a&&we.textTagListStyles.textTagListInsideLabel]);return t.jsx("div",{class:I,ref:u,tabIndex:-1,onKeyDown:g,role:"listbox","aria-label":l,"aria-multiselectable":"true",style:A,...D,children:i.map(((e,s)=>t.jsx(je,{isFocused:y.current===s,isSelected:p.includes(e.value),onRemoveAction:T,onSelect:w,onRemoveIconClick:S,removeIcon:r,value:e.value,children:e.label},e.value)))})}));function Me({displayValue:e,isAddToListShown:s,isKeyboardNavigable:o,isTextTagListShown:l,isUserFiltering:a,liveRegionText:r,onExitNavigation:d,onRemove:c,removeIcon:u,selectedValuesDescriptionId:p,selectedValuesKeyboardNavDescriptionId:h,textTagListData:b,textTagListRef:y,userInput:m,virtualKeyboard:x,...f}){const v=j.useTranslationBundle("@oracle/oraclejet-preact"),S=s?v.select_addToListAvailable():void 0,T=o&&e&&e.length>0?v.selectMultiple_highlightSelectedTagsInstructionText():void 0,{isInputFocused:w}=se.useFormFieldContext(),[g,F]=n.useState(T),[C,D]=n.useState(!1);return w&&l&&!g&&T&&!C?D(!0):w||!C||D(!1),g!==T&&F(T),t.jsxs(t.Fragment,{children:[l&&t.jsx(Be,{"aria-label":v.selectMultiple_selectedValues(),data:b,hasInsideLabel:f.hasInsideLabel,maxWidth:"50%",onExitNavigation:d,onRemove:c,ref:y,removeIcon:u}),t.jsx(A.Flex,{flex:1,children:t.jsx(i.TextFieldInput,{"aria-autocomplete":"list",autoComplete:"off",hasPrefix:l,role:"combobox",hasEndContent:!0,spellcheck:!1,type:"auto"===x?"search":x,value:a||l?m:e,...f})}),l&&t.jsx(xe.HiddenAccessible,{id:p,isHidden:!0,children:e}),l&&T&&!C&&t.jsx(xe.HiddenAccessible,{id:h,isHidden:!0,children:T}),t.jsx(ge.LiveRegion,{children:r}),l&&t.jsx(ge.LiveRegion,{children:C?T:void 0}),s?t.jsx(ge.LiveRegion,{children:S}):void 0]})}function Oe({onApply:e}){const s=j.useTranslationBundle("@oracle/oraclejet-preact");return t.jsx("div",{class:De.mobileDropdownFooterStyles.base,children:t.jsx(Ce.Button,{display:"label",edge:"bottom",label:s.selectMultiple_apply(),size:"sm",variant:"callToAction",onAction:e})})}function Ne(e,t){const s=j.useTranslationBundle("@oracle/oraclejet-preact").plural_separator();return{displayValue:n.useMemo((()=>{if(void 0===t)return"";const n=function(e,t){const s=t?[...t?.values()]:[],n=t=>ee.renderItemText(t,e),o=s.map(n);return new Set(o)}(e,t),o=function(e,t){return Array.from(e.values()).join(t)}(n,s);return o}),[e,s,t]),textTags:n.useMemo((()=>void 0===t?[]:function(e,t=[]){return t.map((t=>({label:ee.renderItemText(t,e)??"",value:t.key})))}(e,t)),[e,t])}}function _e({isDropdownSelectedOnlyView:e=!1,valueItems:t}){const s=Ae.useEffectEvent((e=>e&&t&&0!==t.length?{offset:0,totalSize:t.length,sizePrecision:"exact",data:t.map((e=>({data:e.data,metadata:e.metadata??{key:e.key}})))}:void 0));return{data:n.useMemo((()=>s(e)),[s,e]),onLoadRange:void 0}}const He=(e,t,s)=>t.data.forEach((t=>{s.has(t.metadata.key)&&e.set(t.metadata.key,{data:t.data,key:t.metadata.key,metadata:t.metadata})}));function ze({"aria-describedby":e,"aria-label":o,assistiveText:l,collectionRenderer:i,data:a,dropdownId:r,enabledElementRef:d,helpSourceLink:c,helpSourceText:u,isAddToListShown:p,isDisabled:b,isEmptyResults:y,isFocused:m,isLoading:x,isOpen:f,isReadonly:v,isRequired:S,isSelectedOnlyView:T,itemText:w,label:g,liveRegionText:F,placeholder:C,propIsLoading:D,selectedValuesDescriptionId:A,setDropdownOpen:I,setUserInput:R,stopFiltering:L,textAlign:E,textTagListRef:k,userAssistanceDensity:K,userInput:V,valueItems:U,virtualKeyboard:P,onAddToListAction:B,onCommit:M,onFieldBlur:O,onFieldFocus:N,onFieldInput:_,onFieldKeyDown:H,onFieldKeyUp:z}){const q=j.useTranslationBundle("@oracle/oraclejet-preact"),{collectionRendererContext:Y,footerProps:W,selectMultipleFieldInputProps:$,selectMultipleFieldProps:G,selectedValuesCountProps:Z}=function({data:e,inputRef:t,isDropdownOpen:s,isDropdownSelectedOnlyView:o,itemText:l,textTagListRef:i,userInput:a,valueItems:r,onCommit:d,setDropdownOpen:c,setUserInput:u,stopFiltering:p}){const[h,b]=n.useState({rowKey:void 0}),[y,m]=n.useState(ee.createKeysFromValueItems(r)),[x,f]=n.useState(o),v=n.useRef(new Map),S=n.useMemo((()=>{const e=[];return y?.forEach((t=>{const s=r?.find((e=>e.key===t));s?e.push(s):v.current.has(t)&&e.push(v.current.get(t))})),e}),[y,r]),{textTags:T,displayValue:w}=Ne(l,S),g=n.useRef(null),{data:F}=_e({isDropdownSelectedOnlyView:x,valueItems:S}),C=n.useCallback((e=>{b({rowKey:e.value})}),[b]),D=n.useCallback((t=>{m(t.value),u(""),e&&He(v.current,e,t.value)}),[e,m,u]),A=n.useCallback((({value:e=!1})=>{f((t=>(t!==e&&p(),e)))}),[f,p]),I=n.useCallback((()=>{m(ee.createKeysFromValueItems(r)),v.current.clear(),c(!1),p(),t.current?.focus()}),[t,c,p,r]),R=n.useCallback((()=>{d({previousValue:ee.createKeysFromValueItems(r),value:y}),I()}),[y,r,I,d]),L=n.useCallback((()=>{I()}),[I]),E=n.useCallback((()=>{m(new Set),p()}),[p]),k=n.useCallback((e=>{const t=new Set(y);e.forEach((e=>t.delete(e))),m(t)}),[y]),K=n.useCallback((()=>{setTimeout((()=>g.current?.focus()),0)}),[]);n.useEffect((()=>{s&&setTimeout((()=>g.current?.focus()),0)}),[s]);const[V,j]=n.useState(r);return V!==r&&(s||m((e=>{const t=ee.createKeysFromValueItems(r);return Ie.equals(e,t)?e:t})),j(r)),{collectionRendererContext:ee.useCollectionRenderer({currentKey:h.rowKey,onCurrentKeyChange:C,onSelectedKeysChange:D,searchText:a,selectedKeys:y,selectedOnlyData:F}),footerProps:{onApply:R},selectMultipleFieldInputProps:{displayValue:w,hasEmptyLabel:!1,hasInsideLabel:!0,inputRef:g,isTextTagListShown:T.length>0,isUserFiltering:!0,removeIcon:"always",userInput:a,textTagListData:T,textTagListRef:i,onExitNavigation:K,onRemove:k},selectMultipleFieldProps:{hasInsideLabel:!0,isBackButtonShown:!0,isClearButtonShown:!ee.isSearchTextEmptyOrUndefined(a)||0!==T.length,isDropdownArrowShown:!1,isDropdownSelectedOnlyView:x,isSelectedValuesCountShown:(y?.size??0)>0||x,selectedValuesCount:y?.size??0,styleVariant:"embedded",onBackButtonClick:L,onClearButtonClick:E},selectedValuesCountProps:{onSelectedValuesCountToggle:A},isDropdownSelectedOnlyView:x}}({data:a,inputRef:d,isDropdownOpen:f,isDropdownSelectedOnlyView:T,itemText:w,textTagListRef:k,userInput:V,valueItems:U,onCommit:M,setDropdownOpen:I,setUserInput:R,stopFiltering:L}),{formFieldContext:te,inputProps:se,labelProps:ne,textFieldProps:oe,userAssistanceProps:le}=J.useTextField({ariaDescribedBy:e,helpSourceLink:c,helpSourceText:u,isDisabled:!1,isFocused:m,isLoading:x,isReadonly:!1,isRequiredShown:!1,labelEdge:"inside",styleVariant:"default",value:G.selectedValuesCount>0||void 0});te.hasValue=D||te.hasValue;const ie={label:t.jsx(s.Label,{...ne,children:g}),labelEdge:"inside"},ae=!f||b||v||!l&&!c||"efficient"!==K&&"reflow"!==K?void 0:t.jsx(X.DropdownUserAssistance,{assistiveText:l,fieldLabel:g,helpSourceLink:c,helpSourceText:u,userAssistanceDensity:K,...le}),re=y?p?void 0:t.jsx(ee.EmptyResults,{}):i(Y),de=p?t.jsxs(t.Fragment,{children:[t.jsx("div",{onMouseDown:ee.preventDefault,children:t.jsx(Q.Separator,{})}),t.jsx(X.LinkItem,{onAction:B,children:q.select_addToList()})]}):void 0;return t.jsx(X.SelectMobileDropdown,{header:t.jsxs(h.FormFieldContext.Provider,{value:te,children:[t.jsx(Fe.View,{children:t.jsx(Ve,{fieldLabel:g,onBlur:O,onFocus:N,...ie,...oe,...G,...Z,children:t.jsx(Me,{"aria-controls":r,"aria-expanded":f,"aria-label":o,isAddToListShown:p,isRequired:S,liveRegionText:F,placeholder:C,selectedValuesDescriptionId:A,textAlign:E,virtualKeyboard:P,onInput:_,onKeyDown:H,onKeyUp:z,...se,...$})})}),ae,de]}),footer:t.jsx(Oe,{...W}),id:r,isOpen:f,labelId:ne.id,children:t.jsx(ee.DropdownList,{hasTopGap:!de,hasBottomGap:!0,isLoading:null===a,children:re})})}const qe=l.forwardRef((({addToList:e="off","aria-describedby":i,assistiveText:a,collectionRenderer:c,columnSpan:u,data:b,helpSourceLink:y,helpSourceText:m,isDisabled:x,isLoading:f,isReadonly:v,isRequired:S,isRequiredShown:T,itemRenderer:w,itemText:g,label:F,labelEdge:C,labelStartWidth:D,messages:A,onAddToListAction:I,onCommit:R,onFilter:L,onLoadRange:E,placeholder:k,testId:K,textAlign:U,userAssistanceDensity:P,valueItems:B,variant:M="default",virtualKeyboard:O},z)=>{const{isDisabled:q,isReadonly:Y,labelEdge:W,labelStartWidth:$,textAlign:Q,userAssistanceDensity:te}=p.useFormContext(),se=x??q,ne=v??Y,oe=C??W,le=D??$,ie=U??Q??V.defaultTextAlignForVariant(M),ae=P??te,re=l.useRef(null),de=l.useRef(null),{focusProps:ce,isFocused:ue,methods:pe}=G.useFocusableTextField({isDisabled:se,isReadonly:ne,enabledElementRef:re,readonlyElementRef:de});l.useImperativeHandle(z,(()=>pe),[pe]);const{addToListEventHandlers:be,ariaProps:ye,collectionRendererContext:me,data:xe,dropdownArrowEventHandlers:fe,dropdownEventHandlers:ve,dropdownRef:Te,hasSelectedValuesCount:we,inputEventHandlers:ge,isAddToListShown:Fe,isDataFetched:Ce,isDropdownAbove:De,isDropdownOpen:Ae,isDropdownSelectedOnlyView:Ie,isEmptyResults:Ke,isFocused:je,isUserFiltering:Ue,mainFieldRef:Pe,mouseProps:Be,selectedValuesCountProps:Oe,selectedValuesDescriptionId:He,selectedValuesKeyboardNavDescriptionId:qe,setDropdownOpen:Ye,setUserInput:We,stopFiltering:$e,textFieldRef:Ge,textTagListProps:Ze,userInput:Je}=function({addToList:e,ariaDescribedBy:t,data:s,inputRef:l,isDisabled:i,isFocused:a,isReadonly:r,onAddToListAction:d,onCommit:c,onFilter:u,valueItems:p}){const[h,b]=n.useState(!1),y=p?.length,m=void 0!==y&&y>0||h,x=_e({isDropdownSelectedOnlyView:h,valueItems:p}),f=h?x.data:s,v=n.useCallback((e=>{ee.isSearchTextEmptyOrUndefined(e.searchText)||b(!1),u?.(e)}),[u]),{currentRowKeyRef:S,currentRowOverride:T,dropdownRef:w,getDropdownTabbableElems:g,handleDropdownArrowClick:F,handleDropdownAutoDismiss:C,handleDropdownPosition:D,handleInput:A,handleMainFieldKeyDown:I,handleMainFieldKeyUp:R,handleUpDownArrowKeys:L,isDropdownAbove:E,isDropdownOpen:k,isFocused:K,isUserFiltering:V,mainFieldRef:j,onCurrentKeyChange:U,onMouseDown:P,searchText:B,setCurrentRowOverride:M,setDropdownOpen:O,setUserInput:N,stopFiltering:_,userInput:H}=ee.useSelectCommon({data:f,inputRef:l,isFocused:a,onFilter:v}),[z,q]=n.useState(k),[Y,W]=n.useState(p),[$,G]=n.useState(ee.createKeysFromValueItems(p)),Z=null!=f&&!ee.isBeforeDataFetch(f),J=Z&&0===f?.totalSize,Q="on"===e&&V&&null!=B&&B.length>0,X=n.useCallback((()=>{O(!1),_(),d?.({searchText:V?B:void 0})}),[V,d,B,O,_]),te=n.useRef(null),{direction:se}=he.useUser(),ne=Se.useId(),oe=Se.useId(),le=Le.l([K&&oe,K&&ne,t]),ie=n.useCallback((()=>{w.current?.parentElement?.removeChild(w.current)}),[w]),ae=n.useCallback((e=>V&&k&&!ee.isSearchTextEmptyOrUndefined(H)&&(f?.data.length??0)>0&&void 0!==e),[f,k,V,H]),re=n.useCallback((e=>{if($?.has(e))return;const t=void 0===$?new Set([e]):new Set([...$.values(),e]);c({previousValue:$,value:t}),G(t)}),[c,$,G]),de=n.useRef(null),ce=n.useCallback((e=>r||i?Promise.reject("Component is readonly or disabled"):(c({value:e,previousValue:$}),Promise.resolve())),[i,r,c,$]);Ee.useHiddenTestMethod({elementRef:r?j:de,method:ce,name:"_changeValue"});const ue=n.useCallback((e=>{if(k&&"keydown"===e?.type){const t=e;switch(t.code){case o.KEYS.TAB:{const e=t.shiftKey,s=g();if(s&&s.length>1){const t=s[0],n=s[s.length-1];if(!e&&document.activeElement!==n||e&&document.activeElement!==t)return void O(!0)}t.shiftKey||!m?l.current?.focus():be.current?.focus(),ie();break}}}}),[g,m,l,k,ie,O]),pe=n.useCallback((e=>{if(!o.isControlOrFunctionKey(e))switch(e.code){case o.KEYS.TAB:k&&(e.shiftKey||!m&&!e.shiftKey)&&(ie(),O(!1)),m&&!e.shiftKey&&e.stopPropagation();break;case o.KEYS.LEFT:"ltr"===se&&l.current instanceof HTMLInputElement&&0===l.current?.selectionStart&&0===l.current?.selectionEnd&&te.current?.focus();break;case o.KEYS.RIGHT:"rtl"===se&&l.current instanceof HTMLInputElement&&0===l.current?.selectionStart&&0===l.current?.selectionEnd&&te.current?.focus();break;case o.KEYS.ENTER:case o.KEYS.NUMPAD_ENTER:if(ee.isPhone())return;if(Q&&J)return void X();ae(S.current)&&(O(!1),_(),re(S.current))}}),[S,se,X,m,l,Q,k,J,ie,re,O,ae,_]);if(Y!==p){const e=ee.createKeysFromValueItems(p);G(e)}const be=n.useRef(null);n.useEffect((()=>{be.current=m&&j.current?.querySelector?j.current.querySelector('[role="switch"]'):null}),[m,i,r,j]);const ye=n.useCallback((e=>{switch(e.code){case o.KEYS.TAB:k&&!e.shiftKey&&(ie(),O(!1)),e.shiftKey&&e.stopPropagation();break;case o.KEYS.UP:case o.KEYS.DOWN:e.preventDefault();break;case o.KEYS.ESC:k&&(O(!1),e.preventDefault(),e.stopPropagation());break;case o.KEYS.ENTER:e.stopPropagation()}}),[k,ie,O]),me=n.useCallback((e=>{switch(e.code){case o.KEYS.UP:case o.KEYS.DOWN:L(e)}}),[L]),xe=n.useCallback((e=>{e.preventDefault(),l.current?.focus()}),[l]),fe=n.useCallback((e=>{k||O(!0);const t=e.value??!1;t!==h&&(b(t),t&&_())}),[k,h,O,_]);!k&&h&&b(!1);const ve=n.useCallback((e=>{G(e.value),N(""),c?.({value:e.value,previousValue:$})}),[c,$,G,N]),Te=n.useCallback((()=>{setTimeout((()=>l.current?.focus()),0)}),[l]),we=n.useCallback((e=>{const t=$,s=new Set($);e.forEach((e=>s.delete(e))),c?.({previousValue:t,value:s})}),[c,$]),ge=n.useMemo((()=>Re.mergeProps({onAutoDismiss:C,onPosition:D},{onAutoDismiss:ue})),[C,D,ue]),Fe=n.useMemo((()=>Re.mergeProps({onInput:A,onKeyDown:I,onKeyUp:R},{onKeyDown:pe})),[I,A,R,pe]),Ce=n.useMemo((()=>({textTagListRef:te,onExitNavigation:Te,onRemove:we})),[Te,we]),De=ee.useCollectionRenderer({currentKey:T.rowKey,onCurrentKeyChange:U,onSelectedKeysChange:ve,searchText:B,selectedKeys:$,selectedOnlyData:x.data});k&&!z&&M({rowKey:void 0}),z&&!k&&!H&&_();const Ae=n.useRef(f);if(Ae.current!==f){const e=f?.data[0]?.metadata.key;k&&V&&null!=e&&0===f?.offset&&M({rowKey:ee.isSearchTextEmptyOrUndefined(B)?void 0:e}),Ae.current=f}return z!==k&&q(k),Y!==p&&W(p),{addToListEventHandlers:{onAction:X},ariaProps:{ariaDescribedBy:le},collectionRendererContext:De,data:f,dropdownArrowEventHandlers:{onClick:F},dropdownEventHandlers:ge,dropdownRef:w,hasSelectedValuesCount:m,inputEventHandlers:Fe,inputRef:l,isAddToListShown:Q,isDataFetched:Z,isDropdownAbove:E,isDropdownOpen:k,isDropdownSelectedOnlyView:h,isEmptyResults:J,isFocused:K,isUserFiltering:V,mainFieldRef:j,mouseProps:i||r?{}:{onMouseDown:P},searchText:B,selectedValuesCountProps:{onKeyDown:ye,onKeyUp:me,onMouseDown:xe,onToggle:fe},selectedValuesDescriptionId:ne,selectedValuesKeyboardNavDescriptionId:oe,setDropdownOpen:O,setUserInput:N,stopFiltering:_,textFieldRef:de,textTagListProps:Ce,userInput:H}}({addToList:e,ariaDescribedBy:i,data:b,inputRef:re,isDisabled:se,isFocused:ue,isReadonly:ne,onAddToListAction:I,onCommit:R,onFilter:L,valueItems:B}),Qe=Z.useLoadingIndicatorTimer(f??!1),{baseId:Xe,formFieldContext:et,inputProps:tt,labelProps:st,textFieldProps:nt,userAssistanceProps:ot}=J.useTextField({ariaDescribedBy:ye.ariaDescribedBy,helpSourceLink:y,helpSourceText:m,isDisabled:se,isFocused:je,isLoading:Qe,isReadonly:ne,isRequiredShown:T,labelEdge:oe,messages:A,styleVariant:M,userAssistanceDensity:ae,value:void 0!==B&&B.length>0||void 0});et.hasValue=f||et.hasValue;const lt=`${Xe}-dropdown`,{displayValue:it,textTags:at}=Ne(g,B),rt="none"!==oe?t.jsx(s.Label,{...st,...ee.isPhone()?{forId:void 0}:{},children:F}):void 0,dt={label:"none"!==oe?rt:void 0,labelEdge:"none"!==oe?oe:void 0,labelStartWidth:"none"!==oe?le:void 0,labelText:"inside"!==oe||se?void 0:F},ct="none"===oe?F:void 0,ut="efficient"===ae||"reflow"===ae?se?"efficient"!==ae?void 0:t.jsx(N.InlineUserAssistance,{userAssistanceDensity:ae,...ot}):ne?t.jsx(N.InlineUserAssistance,{fieldLabel:F,messages:A,userAssistanceDensity:ae,...ot}):t.jsx(N.InlineUserAssistance,{assistiveText:a,fieldLabel:F,helpSourceLink:y,helpSourceText:m,messages:A,isRequiredShown:T,userAssistanceDensity:ae,...ot}):void 0,pt="compact"===ae?t.jsx(_.CompactUserAssistance,{anchorRef:Pe,messages:A,assistiveText:a,...ot}):void 0,ht=j.useTranslationBundle("@oracle/oraclejet-preact"),bt=l.useCallback((({currentRowKeyOverride:e,onPersistCurrentRowKey:s,onSelectedChange:n,searchText:o,selected:l,selectedOnlyData:i})=>t.jsx(ee.DefaultList,{"aria-label":F??"",currentItemVariant:"highlight",currentKey:e,data:i??b,itemRenderer:w,itemText:g,searchText:i?void 0:Ue?o:void 0,selectedKeys:l,selectionMode:"multiple",onCurrentKeyChange:s,onLoadRange:i?void 0:E,onSelectionChange:n})),[Ue,w,g,F,E,b]);if(ne){const e=t.jsx(r.ReadonlyTextFieldInput,{"aria-describedby":tt["aria-describedby"],"aria-label":ct,"aria-labelledby":st.id,as:"div",elementRef:de,formVariant:M,hasEmptyLabel:""===F&&"none"===oe,hasInsideLabel:void 0!==F&&"inside"===oe,onBlur:tt.onBlur,onFocus:tt.onFocus,textAlign:ie,value:it});return t.jsx(h.FormFieldContext.Provider,{value:et,children:t.jsx(d.ReadonlyTextField,{role:"presentation",columnSpan:u,compactUserAssistance:pt,inlineUserAssistance:ut,onBlur:ce.onFocusOut,onFocus:ce.onFocusIn,ref:Pe,mainContent:e,testId:K,...dt})})}const yt="inside"===oe,mt=Ae&&Ce?0===xe?.totalSize?ht.select_noMatchesFound():1===xe?.totalSize?ht.select_oneMatchFound():"exact"===xe?.sizePrecision?ht.select_sizeMatchesFound({TOTAL_SIZE:`${xe?.totalSize}`}):ht.select_sizeOrMoreMatchesFound({TOTAL_SIZE:`${xe?.totalSize}`}):"",xt=Ae&&void 0!==xe&&(null===xe||xe.totalSize>0||ee.isBeforeDataFetch(xe)||Ke),ft=""===F&&"none"===oe,vt=ee.isPhone()&&!se?t.jsx(X.SelectMobileFieldInput,{"aria-controls":lt,"aria-describedby":tt["aria-describedby"],"aria-expanded":Ae,"aria-invalid":tt["aria-invalid"],"aria-label":ct,"aria-labelledby":st.id,displayValue:it,hasEmptyLabel:ft,hasInsideLabel:yt,isRequired:S,onBlur:tt.onBlur,onFocus:tt.onFocus,placeholder:k,ref:re,textAlign:ie,variant:tt.variant}):t.jsx(Me,{"aria-controls":lt,"aria-expanded":Ae,"aria-label":ct,displayValue:it,hasEmptyLabel:ft,hasInsideLabel:yt,inputRef:re,isAddToListShown:Fe,isKeyboardNavigable:!se&&!ee.isMobile(),isRequired:S,isTextTagListShown:je&&0!==at.length,isUserFiltering:Ue,liveRegionText:mt,placeholder:k,removeIcon:ee.isTablet()?"always":"never",selectedValuesDescriptionId:He,selectedValuesKeyboardNavDescriptionId:qe,textAlign:ie,textTagListData:at,userInput:Je,virtualKeyboard:ee.isTablet()?O:void 0,...ge,...tt,...Ze}),St=xt?ee.isPhone()?t.jsx(ze,{"aria-describedby":ye.ariaDescribedBy,"aria-label":ct,assistiveText:a,collectionRenderer:c??bt,data:b,dropdownId:lt,enabledElementRef:re,helpSourceLink:y,helpSourceText:m,isAddToListShown:Fe,isDisabled:se,isEmptyResults:Ke,isFocused:je,isLoading:Qe,isOpen:xt,isReadonly:ne,isRequired:S,isSelectedOnlyView:Ie,itemText:g,label:F,liveRegionText:mt,placeholder:k,propIsLoading:f,selectedValuesDescriptionId:He,setDropdownOpen:Ye,setUserInput:We,stopFiltering:$e,textAlign:ie,textTagListRef:Ze.textTagListRef,userAssistanceDensity:ae,userInput:Je,valueItems:B,virtualKeyboard:O,onAddToListAction:be.onAction,onCommit:R,onFieldBlur:ce.onFocusOut,onFieldFocus:ce.onFocusIn,onFieldInput:ge.onInput,onFieldKeyDown:ge.onKeyDown,onFieldKeyUp:ge.onKeyUp}):t.jsx(ke,{...ve,assistiveText:a,collectionRenderer:c??bt,collectionRendererContext:me,dropdownId:lt,dropdownRef:Te,helpSourceLink:y,helpSourceText:m,isAddToListShown:Fe,isDisabled:se,isDropdownAbove:De,isEmptyResults:Ke,isOpen:xt,isReadonly:ne,label:F,mainFieldRef:Pe,onAddToListAction:be.onAction,userAssistanceDensity:ae}):null;return t.jsxs(H.Fragment,{children:[t.jsx(h.FormFieldContext.Provider,{value:et,children:t.jsx(Ve,{columnSpan:u,compactUserAssistance:pt,fieldLabel:F,hasInsideLabel:yt,inlineUserAssistance:ut,isDropdownArrowShown:!0,isDropdownSelectedOnlyView:Ie,isSelectedValuesCountShown:we,mainFieldRef:Pe,onBlur:ce.onFocusOut,onFocus:ce.onFocusIn,onDropdownArrowClick:fe.onClick,onSelectedValuesCountKeyDown:Oe.onKeyDown,onSelectedValuesCountKeyUp:Oe.onKeyUp,onSelectedValuesCountMouseDown:Oe.onMouseDown,onSelectedValuesCountToggle:Oe.onToggle,rootRef:Ge,selectedValuesCount:B?.length,testId:K,...dt,...Be,...nt,children:vt})}),St]})}));e.SelectMultiple=qe}));
//# sourceMappingURL=SelectMultiple-15c9c741.js.map
