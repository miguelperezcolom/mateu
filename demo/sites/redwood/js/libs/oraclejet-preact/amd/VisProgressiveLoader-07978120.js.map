{"version":3,"file":"VisProgressiveLoader-07978120.js","sources":["../../src/UNSAFE_VisProgressiveLoader/ProgressiveLoader.tsx","../../src/UNSAFE_VisProgressiveLoader/VisSkeleton.tsx","../../src/UNSAFE_VisProgressiveLoader/VisProgressiveLoader.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { ComponentChildren, JSX } from 'preact';\nimport { useLoadingIndicatorTimer } from '#hooks/UNSAFE_useLoadingIndicatorTimer';\nimport { LiveRegion } from '#UNSAFE_LiveRegion';\nimport { HiddenAccessible } from '#UNSAFE_HiddenAccessible';\nimport { useId } from '#hooks/UNSAFE_useId';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { baseStyles, loadingContainerStyles } from './themes/ProgressiveLoaderStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { Size, sizeToCSS } from '#utils/UNSAFE_size';\n\ntype Props = {\n  /**\n   * Specifies whether the main content is currently loading.\n   * The fallback content will be shown if the main content is taking too long to load.\n   */\n  isLoading: boolean;\n\n  /**\n   * The content to be shown when loading.\n   */\n  fallback: ComponentChildren;\n\n  /**\n   * The main content to be shown when not loading.\n   */\n  children: ComponentChildren;\n\n  /**\n   * The role.\n   */\n  role?: UnpackSignals<JSX.HTMLAttributes['role']>;\n\n  /**\n   * The tabIndex.\n   */\n  tabIndex?: UnpackSignals<JSX.HTMLAttributes['tabIndex']>;\n\n  /**\n   * The width of the component.\n   */\n  width?: Size;\n\n  /**\n   * The height of the component.\n   */\n  height?: Size;\n\n  /**\n   * The aria-label of the component.\n   * This will be used for the aria-label of the DOM element.\n   */\n  'aria-label'?: UnpackSignals<JSX.AriaAttributes>['aria-label'];\n\n  /**\n   * One or more ids (separated by spaces) of elements that describe the component.\n   * This will be used for the aria-describedby of the DOM element.\n   */\n  'aria-describedby'?: UnpackSignals<JSX.AriaAttributes>['aria-describedby'];\n\n  /**\n   * One or more ids (separated by spaces) of elements that label the component.\n   * This will be used for the aria-labelledby of the DOM element.\n   */\n  'aria-labelledby'?: UnpackSignals<JSX.AriaAttributes>['aria-labelledby'];\n};\n\n/**\n * Displays the specified fallback content during progressive loading of the main content.\n */\nexport function ProgressiveLoader({\n  isLoading,\n  fallback,\n  children,\n  role,\n  tabIndex,\n  width,\n  height,\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledBy,\n  'aria-describedby': ariaDescribedBy\n}: Props) {\n  const showLoadingIndicator = useLoadingIndicatorTimer(isLoading);\n  const { vis_stateLoading, vis_stateLoaded } = useTranslationBundle<BundleType>(\n    '@oracle/oraclejet-preact'\n  );\n  const descId = useId();\n\n  return isLoading && showLoadingIndicator ? (\n    <div\n      role={role}\n      tabIndex={tabIndex}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      aria-describedby={\n        ariaDescribedBy\n          ? [...new Set(ariaDescribedBy.split(/\\s+/).concat(descId))].join(' ')\n          : descId\n      }\n      class={classNames([baseStyles, loadingContainerStyles])}\n      style={{\n        width: width && sizeToCSS(width),\n        height: height && sizeToCSS(height)\n      }}>\n      {fallback}\n      <HiddenAccessible id={descId}>{vis_stateLoading()}</HiddenAccessible>\n      <LiveRegion type=\"polite\">{vis_stateLoading()}</LiveRegion>\n    </div>\n  ) : (\n    <div\n      class={baseStyles}\n      style={{\n        width: width && sizeToCSS(width),\n        height: height && sizeToCSS(height)\n      }}>\n      {children}\n      <LiveRegion type=\"polite\">\n        {ariaLabel ? `${ariaLabel}, ${vis_stateLoaded()}` : vis_stateLoaded()}\n      </LiveRegion>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { Skeleton } from '#UNSAFE_Skeleton';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { Size, sizeToCSS } from '#utils/UNSAFE_size';\nimport {\n  baseSkeletonContainerStyles,\n  baseStyles,\n  skeletonContainerStyles\n} from './themes/VisSkeletonStyles.css';\n\ntype Props = {\n  /**\n   * The visualization type.\n   */\n  type: 'bar' | 'area' | 'line' | 'combo' | 'pie';\n\n  /**\n   * The width of the skeleton.\n   */\n  width?: Size;\n\n  /**\n   * The height of the skeleton.\n   */\n  height?: Size;\n};\n\n/**\n * Skeleton loading for visualizations.\n */\nexport function VisSkeleton({ type, width, height }: Props) {\n  return (\n    <div\n      class={baseStyles}\n      style={{\n        width: width && sizeToCSS(width),\n        height: height && sizeToCSS(height)\n      }}>\n      <div class={classNames([baseSkeletonContainerStyles, skeletonContainerStyles[type]])}>\n        <Skeleton width=\"100%\" height=\"100%\" />\n      </div>\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentProps } from 'preact';\nimport { ProgressiveLoader } from './ProgressiveLoader';\nimport { VisSkeleton } from './VisSkeleton';\n\ntype Props = Omit<ComponentProps<typeof ProgressiveLoader>, 'fallback' | 'tabIndex'> & {\n  /**\n   * The visualization type.\n   * This is used to determine the loading indicator to be used.\n   */\n  type: ComponentProps<typeof VisSkeleton>['type'];\n};\n\n/**\n * Displays the specified fallback content during progressive loading of the visualization.\n */\nexport function VisProgressiveLoader({ type, role = 'application', children, ...props }: Props) {\n  const fallback = <VisSkeleton type={type} />;\n  return (\n    <ProgressiveLoader role={role} tabIndex={0} fallback={fallback} {...props}>\n      {children}\n    </ProgressiveLoader>\n  );\n}\n"],"names":["ProgressiveLoader","isLoading","fallback","children","role","tabIndex","width","height","ariaLabel","ariaLabelledBy","ariaDescribedBy","showLoadingIndicator","useLoadingIndicatorTimer","vis_stateLoading","vis_stateLoaded","useTranslationBundle","descId","useId","_jsxs","Set","split","concat","join","class","classNames","baseStyles","loadingContainerStyles","style","sizeToCSS","_jsx","HiddenAccessible","id","LiveRegion","type","jsx","VisSkeleton","baseSkeletonContainerStyles","skeletonContainerStyles","Skeleton","props"],"mappings":"yaA8EgB,SAAAA,GAAkBC,UAChCA,EAASC,SACTA,EAAQC,SACRA,EAAQC,KACRA,EAAIC,SACJA,EAAQC,MACRA,EAAKC,OACLA,EACA,aAAcC,EACd,kBAAmBC,EACnB,mBAAoBC,IAEpB,MAAMC,EAAuBC,2BAAyBX,IAChDY,iBAAEA,EAAgBC,gBAAEA,GAAoBC,EAAoBA,qBAChE,4BAEIC,EAASC,EAAAA,QAEf,OAAOhB,GAAaU,EAClBO,EAAAA,YACEd,KAAMA,EACNC,SAAUA,EAAQ,aACNG,EACK,kBAAAC,qBAEfC,EACI,IAAI,IAAIS,IAAIT,EAAgBU,MAAM,OAAOC,OAAOL,KAAUM,KAAK,KAC/DN,EAENO,MAAOC,aAAW,CAACC,EAAUA,WAAEC,EAAsBA,yBACrDC,MAAO,CACLrB,MAAOA,GAASsB,EAASA,UAACtB,GAC1BC,OAAQA,GAAUqB,EAASA,UAACrB,IAC7BJ,SAAA,CACAD,EACD2B,EAAAA,IAACC,EAAAA,kBAAiBC,GAAIf,EAAMb,SAAGU,MAC/BgB,EAAAA,IAACG,EAAAA,WAAW,CAAAC,KAAK,kBAAUpB,SAG7BK,EAAAA,YACEK,MAAOE,EAAAA,WACPE,MAAO,CACLrB,MAAOA,GAASsB,EAASA,UAACtB,GAC1BC,OAAQA,GAAUqB,EAASA,UAACrB,IAE7BJ,SAAA,CAAAA,EACD0B,EAAAK,IAACF,EAAUA,WAAA,CAACC,KAAK,SAAQ9B,SACtBK,EAAY,GAAGA,MAAcM,MAAsBA,QAI5D,CC7FM,SAAUqB,GAAYF,KAAEA,EAAI3B,MAAEA,EAAKC,OAAEA,IACzC,OACEsB,EACEK,IAAA,MAAA,CAAAX,MAAOE,EAAAA,WACPE,MAAO,CACLrB,MAAOA,GAASsB,EAASA,UAACtB,GAC1BC,OAAQA,GAAUqB,EAASA,UAACrB,IAC7BJ,SACD0B,MAAK,MAAA,CAAAN,MAAOC,EAAUA,WAAC,CAACY,EAA2BA,4BAAEC,0BAAwBJ,KAC3E9B,SAAA0B,EAAAK,IAACI,WAAQ,CAAChC,MAAM,OAAOC,OAAO,YAItC,wBC3BgB,UAAqB0B,KAAEA,EAAI7B,KAAEA,EAAO,cAAaD,SAAEA,KAAaoC,IAC9E,MAAMrC,EAAW2B,EAAAA,IAACM,GAAYF,KAAMA,IACpC,OACEJ,MAAC7B,EAAiB,CAACI,KAAMA,EAAMC,SAAU,EAAGH,SAAUA,KAAcqC,EACjEpC,SAAAA,GAGP"}