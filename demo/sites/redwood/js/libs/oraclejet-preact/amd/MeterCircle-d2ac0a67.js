define(['exports', 'preact/jsx-runtime', './useUser-988f7da2', 'preact/hooks', './mergeProps-bcfa6a92', './classNames-08d99695', './meterUtils-ec7ab29c', './circleUtils-1886e5b4', './utils-f5afce68', './UNSAFE_MeterCircle/themes/MeterCircleStyles.css', './UNSAFE_MeterCircle/themes/MeterCircleContract.css', './themeContract.css-2e4b066d', './utils-ad4761c9', './TrackResizeContainer-a4999df9', './useMeterDatatip-b7dc96a3', './useKeyboardEvents-a684ba76', './TabbableModeContext-a9c97640', './useTabbableMode-df433329', './useComponentTheme-5aa41a8f', './UNSAFE_MeterCircle/themes/redwood/MeterCircleTheme', './useTestId-a2e433c2', './useCssVars-d782da3d', './useTextDimensions-f254e8f5', './CircularMeter-b754580a'], (function(e,t,n,s,i,r,a,l,o,c,h,u,d,f,m,g,x,p,$,b,C,y,R,M){"use strict";function S(e,t){if(!e)return{width:0,height:0,innerRadius:0,outerRadius:0};const n=e.children[0],s=n.getBoundingClientRect();return{width:Math.round(s.width),height:Math.round(s.height),...v(n,s,t)}}function v(e,t,n){const s=e.clientWidth,i=e.clientHeight;return"bottom"===n||"top"===n?{outerRadius:t.width/2,innerRadius:i}:"left"===n||"right"===n?{outerRadius:t.height/2,innerRadius:s}:{innerRadius:s/2,outerRadius:t.width/2}}function z(e,t,n,s,i,r,a,o,c){const h=i.current;if(!h)return;const u=l.getCenterCoord(o),{angle:d}=l.convertToPolar(h.width*u.x,h.height*u.y,e.offsetX,e.offsetY),f=l.getPositiveAngle(d);let m;if(c&&r+a>f&&(m=l.getPositiveAngle(d-r)/a*(n-t)),!c){const e=l.getPositiveAngle(r-f);e<=a&&(m=e*(n-t)/a)}return null!=m&&(m=Math.round(m/s)*s,m=Math.max(Math.min(n,m),t)),m}function P(e,t,n,s){return e*s/(n-t)}function T(e,t,n,s,i,r){return s+(r?1:-1)*P(e-t,t,n,i)}function I(e,t){const n=e.current;if(!n)return;const s=l.getCenterCoord(t),i=s.x*n.width,r=s.y*n.height;let a,o,c,h,u,d,f,m;return"top"===t||"bottom"===t||"full"===t?(f=2*n.innerRadius,m="full"===t?2*n.innerRadius:n.innerRadius,u=i-n.innerRadius,d="bottom"===t?0:r-n.innerRadius,c=Math.sqrt(2)*n.innerRadius,h="full"===t?c:n.innerRadius/Math.sqrt(2),a=i-n.innerRadius/Math.sqrt(2),o="bottom"===t?0:r-n.innerRadius/Math.sqrt(2)):(m=2*n.innerRadius,f=n.innerRadius,u="left"===t?i-n.innerRadius:0,d=r-n.innerRadius,h=Math.sqrt(2)*n.innerRadius,c=n.innerRadius/Math.sqrt(2),a="left"===t?i-n.innerRadius/Math.sqrt(2):0,o=r-n.innerRadius/Math.sqrt(2)),{outerBounds:{x:u,y:d,width:f,height:m},innerBounds:{x:a,y:o,width:c,height:h}}}const k=d.xUnits(2),w=d.xUnits(7.5);function A(e,t){return e?"fit"===e?`${t}px`:h.meterCircleVars.sizes[e]:h.meterCircleVars.size}function L(e){return e?h.meterCircleVars.trackSizes[e]:h.meterCircleVars.trackSize}function V(e,t,n){return null!=t?`(${A(e,n)} * ${t/2})`:`(${A(e,n)} * 0.5 - ${L(e)})`}function j(e,t,n){return null!=t?`(${A(e,n)} * ${1-t} / 2)`:L(e)}function D(e,t,n,s,i,r){const{min:a,max:c,startAngle:h,angleExtent:u,size:d,section:f,isRtl:m,innerRadius:g}=e,x=`calc(${j(d,i,r)})`,p=[],$=t.filter((e=>e.max>a&&e.max<=c)).sort(((e,t)=>e.max-t.max)),b=$.length;for(let e=0;e<b;e++){const t=$[e],i=0===e?a:$[e-1].max,r=0===e?t.max:t.max-$[e-1].max;let d=T(i,a,c,h,u,m),C=P(r,a,c,u);const{startOffset:y,extentOffset:R}=N(g,u,0===e,t.max===c,m),M=l.getClipPath(d+y,C+R,m,f);if(p.push({clipPath:M,color:o.getVisThresholdColor(t.color),size:x,section:f}),e===b-1&&t.max<c&&n){d+=(m?1:-1)*C,C=P(c-t.max,a,c,u);const{startOffset:e,extentOffset:n}=N(g,u,!1,!0,m);p.push({clipPath:l.getClipPath(d+e,C+n,m,f),color:s,size:x,section:f})}}return p}function E(e,t,n,s,i,r,a){const{startAngle:o,angleExtent:c,size:h,section:d,isRtl:f}=e;return{section:d,color:t?"all"===n&&r?`${u.colorSchemeVars.dvt.contrastLine}`:s:"transparent",clipPath:l.getClipPath(o,c,f,d),size:`calc(${j(h,i,a)})`}}function O(e,t,n,s){const{value:i,min:r,max:a,startAngle:o,angleExtent:c,size:h,section:u,isRtl:d}=e,f=(i-r)*c/(a-r),m=Math.min(Math.max(0,t),1),g="left"===u||"right"===u,x="top"===u||"bottom"===u,p=`calc(${j(h,n,s)} * ${m})`,$=`${A(h,s)} - ((1 - ${m}) * ${j(h,n,s)})`,b=`(${$}) / 2`;return{section:u,width:g?`calc(${b})`:`calc(${$})`,height:x?`calc(${b})`:`calc(${$})`,size:p,clipPath:l.getClipPath(o,f,d,u)}}function N(e,t,n,s,i){if(!e)return{startOffset:0,extentOffset:0};const r=360/(2*Math.PI*e);let a=r/2*(i?1:-1),l=-1*r;return n&&t<360&&(a=0,l=-.5*r),s&&t<360&&(l=-.5*r),{startOffset:a,extentOffset:l}}function F(e,t,n){return"top"===n||"bottom"===n?{height:Math.min(t,e/2),width:2*Math.min(t,e/2)}:"left"===n||"right"===n?{width:Math.min(e,t/2),height:2*Math.min(e,t/2)}:{width:Math.min(e,t),height:Math.min(e,t)}}function U(e,t,n){const s=`calc(${100*e.y}% - ((${Math.sin(2*t*Math.PI/360)} * ${n} )))`;return{xOffset:`calc(${100*e.x}%  + ((${Math.cos(2*t*Math.PI/360)} * ${n} )))`,yOffset:s}}function B(e,t,n){let s="-50%";const i=l.getPositiveAngle(e);return 90!==i&&270!==i||(n="string"==typeof n?n:`${Math.abs(n)}px`,"left"===t?s=`min(-50%, calc(-100% + ${n}))`:"right"===t&&(s=`max(-50%, calc(-1 *  ${n}))`)),i<=72||i>=288?"0 -50%":i>=108&&i<=252?"-100% -50%":i<=108&&i>=72?`${s} -100%`:`${s} 0`}function H(e,t,n){return(t=l.getPositiveAngle(t))<108&&t>72||t<288&&t>252?`calc(${e} * 1.4)`:`calc( (${e} * 0.7 ) - (${Math.abs(Math.cos(2*t*Math.PI/360))} * ${n} ))`}function W(e,t,n,s,i){let r="";return n||n?(s?r=`calc(${h.meterCircleVars.size} / ${"lg"===e||"md"===e?3:2} )`:n&&("sm"===e?r=d.xUnits(4):"md"===e?r=d.xUnits(3):"lg"===e&&(r=d.xUnits(2))),"bottom"===t?`${i.height/2}px ${r} ${r} ${r}`:"top"===t?`${r} ${r} ${i.height/2}px ${r}`:"left"===t?`${r} ${w} ${r} ${r}`:"right"===t?`${r} ${r} ${r} ${w}`:r):""}function q(e,t,n){const s="full"===e?t/2:t;return"top"===e?n?"50% -50%":"-50%, -50%":n?`calc(50% + ${s}px), calc(-50% - ${s}px)`:`calc(-50% - ${s}px), calc(-50% - ${s}px)`}function K(e,t,n,s){return(e-t)/2+16*(!s&&"right"===n||s&&"left"===n?-.5:.5)}function _({color:e,angle:n,radius:s,length:i,section:a="full",label:h,labelMaxWidth:u,labelOffset:d,labelStyle:f,halfMeterOffset:m}){const g=l.getCenterCoord(a),{xOffset:x,yOffset:p}=U(g,n,s),{xOffset:$,yOffset:b}=U(g,n,`calc(${i} + ${s} + ${d}px)`);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:r.classNames([c.styles.referenceBaseLineStyle,e?void 0:c.styles.referenceBorderStyle]),style:{left:x,top:p,width:`calc(${i})`,transform:`translate(0, -1px) rotate(${360-n}deg)`,backgroundColor:e?o.getVisThresholdColor(e):void 0}}),h&&t.jsx("div",{className:c.styles.referenceLineLabelContainerStyle,style:{left:$,top:b,maxWidth:u,translate:B(n,a,m),...f},children:h})]})}function X(e,t,n,s){return`${j(e,t,s)} +  ${d.xUnits("fit"!==e||n?2:4)}`}function Y(e,t,n,s,i){const{min:r,max:a,startAngle:l,angleExtent:o,size:c,isRtl:h}=e;return{radius:V(c,n,i),length:X(c,n,s,i),angle:T(t.value,r,a,l,o,h),color:t.color}}function G(e,t,n,s,i,r){if(!n)return{width:e,height:t,overHang:0};const a=function(e){return"min"===e||"xs"===e?8:16}(s),l=J(s);return{width:e*(i?.6:1)-2*a,height:t-2*a-2*(r.height+l),overHang:a}}function J(e,t){const n="min"===e||"xs"===e;return null!=t&&(t<108&&t>72||t<288&&t>252)?n?0:4:null==t||t<108&&t>72&&!(t<288&&t>252)?n?2:4:6}function Q({max:e=100,min:o=0,value:c=0,step:h=1,size:d="fit",startAngle:x=90,angleExtent:v=360,isTrackRendered:P=!0,thresholdDisplay:T="all",indicatorSize:w=1,testId:A,isReadonly:L,...V}){const j=C.useTestId(A);a.validateRange(o,e,c,h,L);const N=V.onCommit||V.onInput,{classes:U,styles:B}=$.useComponentTheme(b.MeterCircleRedwoodTheme,{size:d,interaction:N?"isInteractive":void 0});return t.jsx(f.TrackResizeContainer,{class:r.classNames([U,B.textAlignCenter]),width:"100%",height:"100%",children:function(f,$){f-=8,$-=8;const b=a.hasLabelledReferenceLine(V.referenceLines),{textMeasureContent:C,getTextDimensions:A}=R.useTextDimensions(),{direction:H}=n.useUser(),W="rtl"===H;let X=x;W&&(X=l.getPositiveAngle(180-X));const Q=l.getCircleSection(X,v,W),{width:Z,height:ee}=F(f,$,Q),te=function(e){return e<200?"min":e<320?"xs":e<360?"sm":"md"}(Math.max(Z,ee)),ne=a.getDefaultReferenceLineLabelFontSize(te),se=s.useMemo((()=>[{tokenVar:ne,key:"labelFontSize",cssProp:"font-size"},{tokenVar:u.typographyVars.body.md.lineHeight,key:"lineHeight",cssProp:"line-height"}]),[ne]),{resolvedVars:ie,cssContent:re}=y.useCssVars(se),{maxRefLabelDims:ae}=a.getMaxRefLabelDims(ie.fontSize,ie.lineHeight,V.referenceLines,A),le="xs"===te||"min"===te,oe=V.innerRadius??.8,{width:ce,height:he,overHang:ue}=G(f,$,!!V.referenceLines?.length,te,b,ae),{width:de,height:fe}=F(ce,he,Q),me="full"===Q?Math.min(de,fe)/2:Math.min(de,fe),ge=2*me,xe=s.useRef(),pe=s.useRef(S(null,Q)),$e=s.useRef(null),[be,Ce]=s.useState(!1);s.useEffect((()=>{(V.onCommit||V.onInput||V.children)&&(pe.current=S($e.current,Q),Ce(!0))}),[Q]);const ye=s.useRef(!1),Re=m.usePointerEvents(c,(t=>{const n=$e.current;if(t.target==n)return z(t,o,e,h,pe,X,v,Q,W)}),$e,xe,ye,V.onCommit,V.onInput),Me=g.useKeyboardEvents(c,o,e,h,xe,V.onCommit,V.onInput),{datatipContent:Se,datatipProps:ve}=m.useMeterDatatip(c,ye,V.datatip,V["aria-describedby"]),ze=a.getMeterAriaProps(c,o,e,V["aria-label"],V["aria-labelledby"],V.thresholds,L),Pe=i.mergeProps(Re,Me,ve,ze),{trackColor:Te,indicatorColor:Ie}=a.getTrackAndIndicatorColor(c,T,V.trackColor,V.indicatorColor,V.thresholds),ke={min:o,max:e,value:c,startAngle:X,angleExtent:v,size:d,section:Q,isRtl:W,innerRadius:pe.current.innerRadius},{isTabbable:we}=p.useTabbableMode(),Ae=I(pe,Q);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:r.classNames([U,"full"===Q?B.meterCircleFullSizeStyle:"",B.textAlignInitial]),style:{width:f,height:$},tabIndex:we?0:-1,...j,...Pe,children:t.jsxs(M.CircleWrapper,{wrapperRef:$e,class:r.classNames([B.circleWrapperBaseStyle,N?B.interactiveStyle:"",V.referenceLines&&V.referenceLines.length>0?d&&B[`${Q}Fit${le?"Sm":"Lg"}Style`]:"",W?B.centerDivRtl:B.centerDivLtr]),style:{width:`${de}px`,height:`${fe}px`,transform:`translate(${q(Q,ue,W)})`},children:[t.jsx(M.CircleInner,{width:`${de}px`,height:`${fe}px`,class:r.classNames([B.circleTrackBaseStyle,B[`${Q}Style`]]),...E(ke,P,T,Te,oe,V.thresholds,ge)}),"all"===T&&V.thresholds&&D(ke,V.thresholds,P,Te,oe,ge).map((e=>t.jsx(M.CircleInner,{class:r.classNames([B.circleTrackBaseStyle,B[`${Q}Style`]]),...e,width:`${de}px`,height:`${fe}px`}))),t.jsx(M.CircleInner,{color:Ie,class:r.classNames([B.circleValueBaseStyle,B[`circleValue${Q}Style`],B[`${Q}Style`]]),...O(ke,w,oe,2*me)}),V.referenceLines?.map((e=>{const{radius:n,length:s,angle:i,color:r}=Y(ke,e,oe,le,ge),a=function(e,t,n,s){return n=l.getPositiveAngle(n),"full"===e||"bottom"===e||"top"===e?n<108&&n>72||n<288&&n>252?`calc(${t}px - ${k})`:`calc(${t/2-Math.abs(Math.cos(2*n*Math.PI/360))*s}px - ${k})`:90===n||270===n?`calc(${t}px - ${k})`:`calc(${t/2+s/2-s*Math.abs(Math.cos(2*n*Math.PI/360))}px - ${k})`}(Q,f,i,ge/2+ue+J(te,i));return t.jsx(_,{label:e.label,labelStyle:{fontSize:ie.labelFontSize,lineHeight:u.typographyVars.body.md.lineHeight,...e.labelStyle},labelMaxWidth:a,radius:n,length:s,angle:i,labelOffset:J(te,i),color:r,section:Q,halfMeterOffset:K(f,ge/2,Q,W)})})),be&&V.children&&Ae&&t.jsx("div",{class:r.classNames([B.meterCircleCenterContent]),children:V.children(Ae)})]})}),Se,C,re]})}})}function Z({max:e=100,min:o=0,value:c=0,step:d=1,size:f="lg",startAngle:x=90,angleExtent:v=360,isTrackRendered:P=!0,thresholdDisplay:T="all",indicatorSize:k=1,testId:A,isReadonly:L,...V}){const j=C.useTestId(A);a.validateRange(o,e,c,d,L);const N=s.useRef(),{direction:F}=n.useUser(),U="rtl"===F;let B=x;U&&(B=l.getPositiveAngle(180-B));const q=l.getCircleSection(B,v,U),K=s.useRef(S(null,q)),X=s.useRef(null),[G,Q]=s.useState(!1);s.useEffect((()=>{(V.onCommit||V.onInput||V.children)&&(K.current=S(X.current,q),Q(!0))}),[f,q,V.onCommit,V.onInput,V.children]);const{textMeasureContent:Z,getTextDimensions:ee}=R.useTextDimensions(),te=s.useRef(!1),ne=m.usePointerEvents(c,(t=>{const n=X.current;if(t.target==n)return z(t,o,e,d,K,B,v,q,U)}),X,N,te,V.onCommit,V.onInput),se=g.useKeyboardEvents(c,o,e,d,N,V.onCommit,V.onInput),{datatipContent:ie,datatipProps:re}=m.useMeterDatatip(c,te,V.datatip,V["aria-describedby"]),ae=a.getMeterAriaProps(c,o,e,V["aria-label"],V["aria-labelledby"],V.thresholds,L),le=i.mergeProps(ne,se,re,ae),{trackColor:oe,indicatorColor:ce}=a.getTrackAndIndicatorColor(c,T,V.trackColor,V.indicatorColor,V.thresholds),he="bottom"===q||"top"===q?"Horizontal":"left"===q||"right"===q?"Vertical":"Full",ue={min:o,max:e,value:c,startAngle:B,angleExtent:v,size:f,section:q,isRtl:U,innerRadius:K.current.innerRadius},de=V.onCommit||V.onInput,{classes:fe,styles:me}=$.useComponentTheme(b.MeterCircleRedwoodTheme,{size:f,interaction:de?"isInteractive":void 0}),{isTabbable:ge}=p.useTabbableMode(),xe=I(K,q),pe=O(ue,k,V.innerRadius),$e=a.hasLabelledReferenceLine(V.referenceLines),be="lg"===f?"sm":"min",Ce=a.getDefaultReferenceLineLabelFontSize(be),ye=s.useMemo((()=>[{tokenVar:Ce,key:"labelFontSize",cssProp:"font-size"},{tokenVar:u.typographyVars.body.md.lineHeight,key:"lineHeight",cssProp:"line-height"}]),[Ce]),{resolvedVars:Re,cssContent:Me}=y.useCssVars(ye),{maxRefLabelDims:Se}=a.getMaxRefLabelDims(Re.fontSize,Re.lineHeight,V.referenceLines,ee),ve=E(ue,P,T,oe,V.innerRadius,V.thresholds);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:r.classNames([fe]),tabIndex:ge?0:-1,...j,...le,children:t.jsxs(M.CircleWrapper,{wrapperRef:X,class:r.classNames([me.circleWrapperBaseStyle,de?me.interactiveStyle:"",me[`meterCircle${he}SizeStyle`]]),style:{margin:W(f,q,!!V.referenceLines?.length,$e,Se)},children:[t.jsx(M.CircleInner,{class:r.classNames([me.circleTrackBaseStyle,me[`${q}Style`]]),...ve}),"all"===T&&V.thresholds&&D(ue,V.thresholds,P,oe,V.innerRadius).map((e=>t.jsx(M.CircleInner,{class:r.classNames([me.circleTrackBaseStyle,me[`${q}Style`]]),...e}))),t.jsx(M.CircleInner,{color:ce,class:r.classNames([me.circleValueBaseStyle,me[`circleValue${q}Style`],me[`${q}Style`]]),...pe}),V.referenceLines?.map((e=>{const{radius:n,length:s,angle:i,color:r}=Y(ue,e,V.innerRadius);return t.jsx(_,{label:e.label,labelStyle:{fontSize:Re.labelFontSize,...e.labelStyle},labelMaxWidth:H(h.meterCircleVars.size,i,`calc( ${n} + ${s} - ${ve.size} + ${J(be,i)}px)`),radius:n,labelOffset:J(be,i),length:s,angle:i,color:r,halfMeterOffset:w,section:q})})),G&&V.children&&xe&&t.jsx("div",{class:r.classNames([me.meterCircleCenterContent]),children:V.children(xe)})]})}),ie,Z,Me]})}e.MeterCircle=function({size:e,max:n=100,min:s=0,value:i=0,step:r=1,startAngle:a=90,angleExtent:l=360,isTrackRendered:o=!0,thresholdDisplay:c="all",indicatorSize:h=1,isReadonly:u,...d}){return"fit"===e?t.jsx(Q,{isReadonly:u,min:s,value:i,max:n,step:r,startAngle:a,angleExtent:l,isTrackRendered:o,thresholdDisplay:c,indicatorSize:h,...d}):t.jsx(Z,{isReadonly:u,size:e||"lg",min:s,value:i,max:n,step:r,startAngle:a,angleExtent:l,isTrackRendered:o,thresholdDisplay:c,indicatorSize:h,...d})}}));
//# sourceMappingURL=MeterCircle-d2ac0a67.js.map
