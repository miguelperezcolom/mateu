{"version":3,"file":"useSingleSelection-c1bd8b03.js","sources":["../../src/hooks/PRIVATE_useSingleSelection/useSingleSelection.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { useCallback } from 'preact/hooks';\nimport { SingleSelectionDetail } from '../../UNSAFE_Collection';\n\nexport function useSingleSelection<K>(\n  keyExtractor: (element: HTMLElement) => K | null,\n  selected?: K,\n  onChange?: (detail: SingleSelectionDetail<K>) => void\n) {\n  const onClick = useCallback(\n    (event: MouseEvent) => {\n      handleSelect(event, keyExtractor, selected, onChange);\n    },\n    [keyExtractor, selected, onChange]\n  );\n\n  const onKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        handleSelect(event, keyExtractor, selected, onChange);\n      }\n    },\n    [keyExtractor, selected, onChange]\n  );\n\n  const selectionProps = onChange ? { onClick, onKeyDown, onKeyUp } : {};\n  return { selectionProps };\n}\n\n// prevent default (propagation) for keyDown to prevent arrow keys from scrolling the container\nconst onKeyDown = (event: KeyboardEvent) => {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n  }\n};\n\nconst handleSelect = <K>(\n  event: Event,\n  keyExtractor: (element: HTMLElement) => K | null,\n  selected?: K,\n  onChange?: (detail: SingleSelectionDetail<K>) => void\n) => {\n  const itemKey = keyExtractor(event.target as HTMLElement);\n  if (onChange && itemKey && selected !== itemKey) {\n    onChange({ value: itemKey });\n    if (event.type === 'click') {\n      event.stopPropagation();\n    }\n  }\n};\n"],"names":["onKeyDown","event","key","preventDefault","handleSelect","keyExtractor","selected","onChange","itemKey","target","value","type","stopPropagation","onClick","useCallback","onKeyUp","selectionProps"],"mappings":"8DAoCA,MAAMA,EAAaC,IACC,UAAdA,EAAMC,KACRD,EAAME,gBACP,EAGGC,EAAe,CACnBH,EACAI,EACAC,EACAC,KAEA,MAAMC,EAAUH,EAAaJ,EAAMQ,QAC/BF,GAAYC,GAAWF,IAAaE,IACtCD,EAAS,CAAEG,MAAOF,IACC,UAAfP,EAAMU,MACRV,EAAMW,kBAET,gCA3CDP,EACAC,EACAC,GAEA,MAAMM,EAAUC,eACbb,IACCG,EAAaH,EAAOI,EAAcC,EAAUC,EAAS,GAEvD,CAACF,EAAcC,EAAUC,IAGrBQ,EAAUD,eACbb,IACmB,UAAdA,EAAMC,KACRE,EAAaH,EAAOI,EAAcC,EAAUC,EAC7C,GAEH,CAACF,EAAcC,EAAUC,IAI3B,MAAO,CAAES,eADcT,EAAW,CAAEM,UAASb,YAAWe,WAAY,GAEtE"}