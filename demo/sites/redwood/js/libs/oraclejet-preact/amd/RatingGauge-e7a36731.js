define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', './classNames-08d99695', './UNSAFE_RatingGauge/themes/RatingGaugeContract.css', './useComponentTheme-5aa41a8f', './useUser-988f7da2', './vanilla-extract-dynamic.esm-6065bbd7', './UNSAFE_RatingGauge/themes/redwood/RatingGaugeTheme', './useKeyboardEvents-a684ba76', 'preact/compat', './LayerHost-7d4aa6d3', 'css!./LayerStyles.styles.css', './Floating-366a30f8', 'css!./useDatatip.styles.css', './datatipUtils-6846028e', './meterUtils-ec7ab29c', './useDatatip-36aa820b', './useTooltip-e14d62f1', './logger-0f873e29', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', './mergeProps-bcfa6a92', './TabbableModeContext-a9c97640', './useTabbableMode-df433329', './useTestId-a2e433c2'], (function(e,t,s,a,o,i,n,l,r,d,c,u,h,p,b,y,g,m,R,S,x,f,C,v,T,w,D,j,P){"use strict";function U(e,t,s,a,o){const i=a.current;if(!i||0===i.width)return-1;const n=e-i.x,l=t*(o?i.width-n:n)/i.width/s;return l<.5?0:Math.min(t,Math.ceil(l)*s)}function N(e){if(!e)return{width:0,x:0};const t=e.getBoundingClientRect();return{width:t.width,x:t.x+window.scrollX}}const M=({isSelected:e,isDisabled:s,isReadOnly:a,color:c="neutral"})=>{const{forcedColors:u}=l.useUser(),h="active"===u,p=h&&s,b=function(e){return"neutral"===e||"gold"===e||"danger"===e||"warning"===e||"success"===e?e:void 0}(c),y=r.assignInlineVars({[i.ratingGaugeVars.colorSelected]:c,[i.ratingGaugeVars.borderColorSelected]:c,[i.ratingGaugeVars.colorSelectedReadonly]:c}),{variantClasses:g,styles:{ratingStarBaseStyle:m,innerRatingStarColor:R,outerRatingStarColor:S,outerDisabledHighContrastBaseStyle:x,outerDisabledHighContrastSelectedStyle:f,outerDisabledHighContrastUnselectedStyle:C}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme,{color:b,selectionState:e?"isSelected":"isNotSelected",disabledState:s?"isDisabled":"isNotDisabled",readonlyState:a?"isReadonly":"isNotReadonly",highContrastState:h?"isHighContrast":"isNotHighContrast"});return t.jsx("svg",{viewBox:"0 0 36 36",height:"100%",width:"100%",style:b?void 0:y,class:o.classNames([m,b?g:""]),children:t.jsxs("g",{children:[t.jsx("path",{class:R,d:"m18 1 5.0061 11.9524 12.9939 1.0344-9.9 8.4215 3.0246 12.5917-11.1246-6.7476-11.12461 6.7476 3.02461-12.5917-9.9-8.4215 12.9939-1.0344z"}),t.jsx("path",{class:o.classNames([S,p?x:"",p?e?f:C:""]),d:"m23.0061 12.9524-5.0061-11.9524-5.0061 11.9524-12.9939 1.0344 9.9 8.4215-3.02461 12.5917 11.12461-6.7476 11.1246 6.7476-3.0246-12.5917 9.9-8.4215zm10.5043 1.8394-8.5262 7.2528 2.6077 10.8562-9.5919-5.818-9.59192 5.818 2.60772-10.8562-8.52615-7.2528 11.19115-.891 4.3192-10.31227 4.3192 10.31227z"})]})})},G=({fillRatio:e,isDisabled:a,isReadonly:o,color:i})=>{const{direction:r}=l.useUser(),c="rtl"===r,{styles:{fractionalStarBaseStyle:u}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme);return 1===e||0===e?t.jsx(M,{isSelected:1===e,isDisabled:a,isReadOnly:o,color:i}):t.jsxs(s.Fragment,{children:[t.jsx("div",{class:u,style:{clipPath:`inset(0% ${c?100*(1-e):0}% 0% ${c?0:100*e}%)`},children:t.jsx(M,{isSelected:!1,isDisabled:a,isReadOnly:o,color:i})}),t.jsx("div",{class:u,style:{clipPath:`inset(0% ${c?0:100*(1-e)}% 0% ${c?100*(1-e):0}%)`},children:t.jsx(M,{isSelected:!0,isDisabled:a,isReadOnly:o,color:i})})]})};e.RatingGauge=function({max:e=5,value:i=0,size:r,color:u="neutral",step:h=1,isReadonly:p,isDisabled:b,testId:y,...g}){const x=P.useTestId(y);m.validateRange(0,e,i,h);const f=a.useRef(null),C=a.useRef(N(null)),v=!p&&!b;a.useEffect((()=>{C.current=N(f.current)}),[r,e]);const T=((e,t,s,o,i,n,r,d)=>{const u=a.useRef(),{direction:h}=l.useUser(),p="rtl"===h,b=e=>{d?.({value:e}),u.current=e},y=c.useKeyboardEvents(s,0,e,t,u,r,d);return n?{onPointerUp:s=>{const a=U(s.pageX,e,t,i,p);-1!==a&&r?.({value:a})},onBlur:()=>{r?.({value:s})},onPointerMove:s=>{const a=U(s.pageX,e,t,i,p);-1!==a&&a!=u.current&&b(a)},onKeyUp:y.onKeyUp,onKeyDown:y.onKeyDown,onPointerLeave:()=>{b(void 0)},onPointerEnter:()=>{i.current=N(o.current)}}:{}})(e,h,i,f,C,v,g.onCommit,g.onInput),{datatipContent:D,datatipProps:M}=function({max:e,value:t,isDisabled:s,isReadonly:a,datatip:o,thresholds:i,width:n}){const l=(Math.max(1,Math.ceil(t))-Math.ceil(e/2))*n/e,r=o||!i||s?o:m.findThreshold(t,i)?.accessibleLabel,{datatipContent:d,datatipProps:c}=R.useDatatip({content:s||a?null:r,anchor:"element",offset:{mainAxis:8,crossAxis:l},placement:"bottom",touchResponse:"touchStart"});return{datatipContent:d,datatipProps:a&&!s?{"aria-describedby":void 0}:c}}({max:e,value:i,isDisabled:b,isReadonly:p,datatip:g.datatip,thresholds:g.thresholds,width:C.current.width}),{tooltipContent:A,tooltipProps:B}=function({isReadonly:e,isDisabled:t,tooltip:s}){const a=e&&!t?s:"",{tooltipContent:o,tooltipProps:i}=S.useTooltip({text:a,isDisabled:t});return{tooltipContent:o,tooltipProps:!t&&e?i:{"aria-describedby":void 0}}}({isReadonly:p,isDisabled:b,tooltip:g.tooltip}),E=m.getMeterAriaProps(i,0,e,g["aria-label"],g["aria-labelledby"],g.thresholds,p,b,g.tooltip),{"aria-describedby":F,...z}=M,{"aria-describedby":H,...I}=B,K=w.mergeProps(T,z,I),V=[F,H,g["aria-describedby"]].filter(Boolean).join(" ")||void 0,L=m.getThresholdColorFromValue(i,u,g.thresholds),{isTabbable:O}=j.useTabbableMode(),{classes:$,styles:{baseStyle:_,interactiveStyle:k,itemStyle:X,sizeStyle:q}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme,{size:r});return t.jsxs(s.Fragment,{children:[t.jsx("div",{...x,...E,ref:f,class:o.classNames([$,_,v?k:void 0]),tabIndex:O&&!b?0:-1,...K,"aria-describedby":V,children:[...Array(e)].map(((e,s)=>{const a=Math.min(Math.max(0,i-s),1);return t.jsx("div",{className:o.classNames([q,X]),children:t.jsx(G,{fillRatio:a,isDisabled:b,isReadonly:p,color:L})})}))}),D,A]})}}));
//# sourceMappingURL=RatingGauge-e7a36731.js.map
