define(['exports', 'preact/jsx-runtime', 'preact/hooks', './Text-9e32c423', './classNames-08d99695', './useId-c9578d26', './mergeProps-bcfa6a92', './usePress-949a0d03', './useUser-988f7da2', './useComponentTheme-5aa41a8f', './mergeInterpolations-9ede4cf7', './flexitem-5db48325', './useInteractionStyle-15a2bdd0', 'preact', 'preact/compat', './clientHints-6d361eaa', './useToggle-a29f97af', './UNSAFE_Menu/themes/redwood/MenuItemTheme'], (function(e,n,t,o,r,s,a,u,i,l,c,d,m,p,f,g,h,y){"use strict";const C=e=>e.dataset.ojMenuItemKey,v=e=>{const n=e.closest("[data-oj-menu-item-key]");if(n){const e=C(n);return void 0===e?null:{key:e,elem:n}}return null},M=(e,n)=>{if(!n)return{};return{onKeyDown:t=>{"ltr"===e?"ArrowRight"===t.key&&n?.():"ArrowLeft"===t.key&&n?.()}}},b=p.createContext({isMobile:!1,onClose:()=>null,testId:""});function x(){return t.useContext(b)}const I=p.createContext({menuContainerRef:{current:null},currentKey:void 0,showFocusRing:!1,changeKey:()=>{},isContainerFocused:!1,menuContainerGeneralInformation:{current:{wasMouseMoved:!1,lastMouseLeaveMenuItemdRelatedTarget:null}}});function k(){return t.useContext(I)}const w=f.forwardRef((({id:e,label:s,onAction:p,startIcon:f,endIcon:g,role:C,isChecked:v,isDisabled:b=!1,variant:I="standard",type:w,hoverInfo:j,openSubmenu:S,menuItemLabelWeight:T="normal",isSubmenuOpen:P,submenuId:R,submenuRef:F,itemKey:A,keyboardShortcut:E},L)=>{const{onClose:K}=x(),{currentKey:D,changeKey:N,showFocusRing:U,menuContainerRef:O,menuContainerGeneralInformation:q,isContainerFocused:H}=k(),z=t.useRef(null);t.useImperativeHandle(L,(()=>z.current),[]);const{direction:B}=i.useUser(),G=D===e,V=t.useCallback((e=>{"submenu"!==w&&K?.({reason:"itemAction"}),p?.(e)}),[w,K,p]),{hoverProps:W}=function(e){const{bool:n,setTrue:t,setFalse:o}=h.useToggle(!1);return{hoverProps:{ontouchend:t,onMouseEnter:t=>{n?o():e.onMouseEnter(t)},onMouseLeave:n=>{e.onMouseLeave(n)}}}}({onMouseEnter:n=>{j?.hoverStatus.current.recentClose||j?.hoverStatus.current.pendingUnhover||(j&&q.current.wasMouseMoved&&(j.hoverStatus.current.pendingUnhover=!0),q.current.wasMouseMoved&&(j?.hoverProps.onMouseEnter(n),N({key:e,reason:"mouseEnter"})))},onMouseLeave:e=>{j&&(j.hoverStatus.current.pendingUnhover=!1),(O.current?.contains(e.relatedTarget)||F?.current?.parentElement?.contains(e.relatedTarget))&&(q.current.lastMouseLeaveMenuItemdRelatedTarget=e.relatedTarget)}}),{pressProps:$}=u.usePress(b?()=>{}:V);t.useLayoutEffect((()=>{G&&z.current?.focus()}),[G]);const{interactionProps:_}=m.useInteractionStyle({isDisabled:b}),{classes:J,styles:{iconLabelContainer:Q,iconContainer:X,startIconContainer:Y,labelContainer:Z,endIconContainer:ee}}=l.useComponentTheme(y.MenuItemRedwoodTheme,{current:G?"isCurrent":"notCurrent",focusRing:U?"isFocusRing":"notFocusRing",variant:b?"disabled":I,containerFocused:H?"isContainerFocused":"notContainerFocused",submenuOpen:P?"isSubmenuOpen":"notSubmenuOpen"}),ne=c.mergeInterpolations([...Object.values(d.flexitemInterpolations)]),{class:te,...oe}=ne({flex:"1 1 auto",alignSelf:"center"}),{class:re,...se}=ne({flex:"0 0 auto",alignSelf:"center"}),ae=r.classNames([re,Q,X,Y]),ue=r.classNames([te,Q,Z]),ie=r.classNames([re,Q,X,ee]);return n.jsx("div",{role:"presentation",children:n.jsxs("a",{...void 0!==R&&"submenu"===w&&{"aria-owns":R},ref:z,"data-oj-label":s,"data-oj-key":A,class:J,...a.mergeProps(_,W,$,M(B,S),(le=e,ce=N,{onClick:()=>{ce({key:le,reason:"click"})}})),role:C,"data-oj-menu-item-key":e,..."submenu"===w&&{"aria-haspopup":!0,"aria-expanded":"bold"===T||!!P},...b&&{"aria-disabled":!0},..."select"===w&&{"aria-checked":!!v},tabIndex:G?0:-1,children:[f&&n.jsx("span",{style:se,class:ae,children:f}),n.jsx("span",{style:oe,class:ue,children:n.jsx(o.Text,{variant:"inherit",size:"md",weight:T,children:s})}),(g||E)&&n.jsx("span",{style:se,class:ie,children:g||n.jsx(o.Text,{variant:"inherit",size:"md",weight:"normal",children:E})})]})});var le,ce}));e.BaseMenuItem=w,e.MenuContainerContext=I,e.MenuContext=b,e.MenuItem=function(e){const o=s.useId(),r=t.useMemo((()=>`oj-menu-item-${o}`),[o]);return n.jsx(w,{...e,role:"menuitem",type:"simple",id:r})},e.getCloseSubmenuEvent=(e,n)=>{if(!n)return{};return{onKeyDown:t=>{("Escape"===t.key||"ltr"===e&&"ArrowLeft"===t.key||"rtl"===e&&"ArrowRight"===t.key)&&(t.stopPropagation(),n?.())}}},e.getIsMobile=()=>{const{deviceType:e}=g.getClientHints();return"phone"===e},e.getKeyboardCloseProps=(e,n)=>({onKeyDown:t=>{"Tab"===t.key?(t.stopPropagation(),e?.({reason:"dismissed"}),t.preventDefault()):"Escape"===t.key&&"main"===n&&(t.stopPropagation(),e?.({reason:"dismissed"}))}}),e.getLastVisible=e=>{if(e){const n=e.querySelectorAll("[data-oj-menu-item-key]"),t=n[n.length-1];if(t){const e=C(t);if(e)return e}}return null},e.getMenuContainerFocusMethods=(e,n)=>({onBlur:()=>{setTimeout((()=>{e()}),100)},onFocus:()=>{n()}}),e.getMenuContainerMouseLeave=e=>({onMouseLeave:n=>{e(n)}}),e.getMenuPointerDown=()=>({onPointerDown:e=>{const n=v(e.target);n?.key||e.preventDefault()}}),e.getNVisible=(e,n)=>{if(e){const t=e.querySelectorAll("[data-oj-menu-item-key]")[n];if(t){const e=C(t);if(e)return e}}return null},e.getPrevNext=(e,n,t)=>()=>{if(e){const o=Array.from(e.querySelectorAll("[data-oj-menu-item-key]"));let r=o.findIndex((e=>C(e)===t))+(n?-1:1);const s=o.length-1;r<0&&(r=s),r>s&&(r=0);const a=C(o[r]);return a||null}return null},e.isMenuChildrenFalsy=e=>!e||Array.isArray(e)&&!e.length,e.keyElemExtractor=v,e.useMenuContainerContext=k,e.useMenuContext=x}));
//# sourceMappingURL=MenuItem-ff1cd14d.js.map
