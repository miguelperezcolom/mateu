define(['exports', 'preact/jsx-runtime', './TrackResizeContainer-a4999df9', './classNames-08d99695', './mergeProps-bcfa6a92', 'preact/hooks', './useUser-988f7da2', './useMeterDatatip-b7dc96a3', './useKeyboardEvents-a684ba76', './meterUtils-ec7ab29c', './utils-ad4761c9', './UNSAFE_MeterBar/themes/MeterBarContract.css', './size-0127b66b', './UNSAFE_MeterBar/themes/MeterBarStyles.css', './utils-f5afce68', './TabbableModeContext-a9c97640', './useTabbableMode-df433329', './useComponentTheme-5aa41a8f', './UNSAFE_MeterBar/themes/redwood/MeterBarTheme', './useTestId-a2e433c2', './useTextDimensions-f254e8f5', './useCssVars-d782da3d', './themeContract.css-2e4b066d', './LinearMeter-d1e744c1'], (function(e,t,r,a,i,n,s,o,l,c,h,d,u,m,x,f,p,b,g,S,y,$,z,v){"use strict";function T(e){if(!e)return{width:0,height:0};const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}const k=function(e,t,r,a,i,n){const s=[];return e.start&&s.push(t?r:a),e.end&&s.push(t?i:n),s},C=function(e,t,r){const a=`${h.xUnits(4)} + 4px`;return r?`calc(${a} + ${t}px) 0 calc(${a} + ${t}px) 0`:`0 calc(${a} + ${e}px) 0 calc(${a} + ${e}px)`};function M(e,t,r,a,i,n,s){const o=n||h.xUnits(5),l=`calc(${o} - ${s||d.meterBarVars.size})`;return r?i?`${e?"-50%":"50%"} calc(-100% - ${l} - 4px)`:`${e?"-50%":"50%"} calc(${o} + 4px)`:a?i?`calc(100% + ${l} + 4px) ${t?"50%":"-50%"}`:`calc(0px - ${o} - 4px) ${t?"50%":"-50%"}`:i?`calc(-100% - ${l} - 4px) ${t?"50%":"-50%"}`:`calc(${o} + 4px) ${t?"50%":"-50%"}`}function B(e,t,r,a,i){const n=`calc(${h.xUnits(5)} - ${d.meterBarVars.size})`,s=e.start&&e.end;if(a)return t?`calc(${i.height+4}px + ${n}) 0 calc(${i.height+4}px + ${n}) 0`:`0 calc(${i.width+4}px + ${n}) 0 calc(${i.width+4}px + ${n})`;if(r){if(s)return t?`${n} 0 ${n}`:`0 ${n} 0 ${n}`;if(e.start&&!e.end)return t?`${n} 0 0 0`:`0 ${n} 0 0`;if(!e.start&&e.end)return t?`0 0 ${n} 0`:`0 0 0 ${n}`}}function L(e,t,r,a,i,n){return{width:e?n:t?u.sizeToCSS(r):void 0,height:e?i:t?void 0:u.sizeToCSS(r),margin:e?C(a.width,a.height,t):void 0}}function V(e,t,r,a){return{left:e?`max(${r}px, ${t?100-a:a}%)`:void 0,right:e?void 0:`max(${r}px, ${t?a:100-a}%)`}}function w(e,t,r){if(0!==r||t)return 100===r?t?e?"3px":"0 3px":e?"-2px":"0 2px":e?t?"1px 0":"-1px 0":t?"0 -1px":"0 1px"}function R(e,t,r,a,i,n,s){return{...e?V(t,a,n/2,i):{},bottom:e?void 0:r?`max(${s/2-4}px, ${i}%)`:void 0,top:e||r?void 0:`max(${s/2-4}px, ${100-i}%)`,maxWidth:e?void 0:h.xUnits(15)}}function j({orientation:e,percent:r,color:i,position:n,length:o,label:l,maxLabelWidth:c,maxLabelHeight:h,trackSize:d,labelStyle:u}){const f="horizontal"===e,{direction:p}=s.useUser(),b="rtl"===p,g="start"===n,S=`${r}%`,y=f?void 0:o,$=f?o:void 0,z=r<50&&!b||r>50&&b,v=r<50;return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:a.classNames([m.styles.referenceLinesBaseStyle,f?m.styles.referenceLinesHorizontalStyle:m.styles.referenceLinesVerticalStyle,g?f?m.styles.referenceLinesHoriontalStartStyle:b?m.styles.referenceLinesVerticalStartRtlStyle:m.styles.referenceLinesVerticalStartLtrStyle:""]),style:{left:f&&!b?S:void 0,right:f&&b?S:void 0,bottom:f?void 0:S,backgroundColor:x.getVisThresholdColor(i),width:y,height:$,translate:w(f,b,r)}}),l&&t.jsx("div",{className:m.styles.labelDivStyle,style:{...R(f,z,v,b,r,c,h),translate:M(z,v,f,b,g,o,d),...u},children:l})]})}function F({color:e,length:r,orientation:i,...n}){const{direction:o}=s.useUser(),l="horizontal"===i,c="rtl"===o;return t.jsx("div",{class:a.classNames([m.styles.thresholdBarBaseStyle,l?c?m.styles.thresholdBarHorizontalBarTrackSectionRtlStyle:m.styles.thresholdBarHorizontalBarTrackSectionLtrStyle:m.styles.thresholdBarVerticalBarTrackSectionStyle,n.class]),style:{width:l?r:"100%",height:l?"100%":r,backgroundColor:x.getVisThresholdColor(e)}})}function H({max:e=100,min:r=0,value:u=0,step:m=1,length:x="100%",width:f,height:C,size:M,orientation:V="horizontal",isTrackRendered:w=!0,thresholdDisplay:R="all",indicatorSize:H=1,testId:U,baseline:D,isReadonly:I,...N}){const E=S.useTestId(U);c.validateRange(r,e,u,m,I,D);const P=n.useRef(),A="horizontal"===V,W=n.useRef(null),_=n.useRef(T(null)),{direction:K,forcedColors:X}=s.useUser(),Y="rtl"===K;n.useEffect((()=>{(N.onCommit||N.onInput)&&(_.current=T(W.current))}),[M,x,V,N.onCommit,N.onInput]);const{textMeasureContent:q,getTextDimensions:G}=y.useTextDimensions(),J=n.useRef(!1),O=o.usePointerEvents(u,(t=>{if(t.target==W.current)return function(e,t,r,a,i,n,s){const o=t.current;if(!o||0===o.width)return;let l;if("horizontal"===n){const t=e.offsetX;l=r+(a-r)*(s?o.width-t:t)/o.width}else l=r+(a-r)*(o.height-e.offsetY)/o.height;return l=Math.round(l/i)*i,Math.max(r,Math.min(a,l))}(t,_,r,e,m,V,Y)}),W,P,J,N.onCommit,N.onInput),Q=l.useKeyboardEvents(u,r,e,m,P,N.onCommit,N.onInput),{datatipContent:Z,datatipProps:ee}=o.useMeterDatatip(u,J,N.datatip,N["aria-describedby"]),te=c.getMeterAriaProps(u,r,e,N["aria-label"],N["aria-labelledby"],N.thresholds,I),re=i.mergeProps(O,Q,ee,te),ae=100*((void 0!==D?Math.max(r,Math.min(D,e)):r)-r)/(e-r),ie=100*(u-r)/(e-r),ne=Math.min(ae,ie),se=`${Math.abs(ae-ie)}%`,oe=100*Math.max(0,Math.min(1,H))+"%",{trackColor:le,indicatorColor:ce}=c.getTrackAndIndicatorColor(u,R,N.trackColor,N.indicatorColor,N.thresholds),he=function(e){let t={start:!1,end:!1};return e&&(t=e.reduce(((e,t)=>(e.start=e.start||"start"===t.position,e.end=e.end||"end"===t.position||null==t.position,e)),t)),t}(N.referenceLines),de=N.onCommit||N.onInput,{isTabbable:ue}=p.useTabbableMode(),{classes:me,styles:{interactiveStyle:xe,barValueBaseStyle:fe,barValueVerticalStyle:pe,barValueHorizontalStyle:be,barValueHighContrastStyle:ge,barTrackBaseStyle:Se,barTrackHorizontalSizeStyle:ye,barTrackVerticalSizeStyle:$e,barTrackBorderStyle:ze,barTrackMarginTopFitStyle:ve,barTrackMarginStartFitStyle:Te,barTrackMarginBottomFitStyle:ke,barTrackMarginEndFitStyle:Ce,trackSectionHorizontalFirstStyle:Me,trackSectionHorizontalLastStyle:Be,trackSectionVerticalFirstStyle:Le,trackSectionVerticalLastStyle:Ve,trackSectionRoundedCornersStyle:we}}=b.useComponentTheme(g.MeterBarRedwoodTheme,{size:M,orientation:V}),Re="fit"===M,je=c.hasLabelledReferenceLine(N.referenceLines),Fe=c.getDefaultReferenceLineLabelFontSize("sm"),He=n.useMemo((()=>[{tokenVar:Fe,key:"labelFontSize",cssProp:"font-size"},{tokenVar:z.typographyVars.body.md.lineHeight,key:"lineHeight",cssProp:"line-height"}]),[Fe]),{resolvedVars:Ue,cssContent:De}=$.useCssVars(He),{dims:Ie,maxRefLabelDims:Ne}=c.getMaxRefLabelDims(Ue.fontSize,Ue.lineHeight,N.referenceLines,G),Ee=function(e,t,r,a){return r&&(e.start&&!a&&(r-=16),e.end&&!a&&(r-=16)),t&&r&&(r-=2*t+8),r}(he,Ne.width,f,A),Pe=function(e,t,r,a){return r&&(e.start&&a&&(r-=16),e.end&&a&&(r-=16)),t&&r&&(r-=2*t+8),r}(he,Ne.height,C,A),Ae=A?Pe:Ee;return t.jsxs(t.Fragment,{children:[t.jsx("div",{tabIndex:ue?0:-1,...E,...re,style:L(Re,A,x,Ne,Pe,Ee),class:a.classNames([me,...Re?k(he,A,ve,Te,ke,Ce):[]]),children:t.jsxs(v.BarTrack,{ref:W,orientation:V,color:!w||"all"===R&&N.thresholds?"transparent":le,class:a.classNames([Se,de?xe:"",A?ye:$e,!w||"all"===R&&N.thresholds?void 0:ze]),style:{margin:Re?void 0:B(he,A,!!N.referenceLines?.length,je,Ne)},children:["all"===R&&N.thresholds?.filter((t=>t.max>r&&t.max<=e)).sort(((e,t)=>e.max-t.max)).map(((a,i,n)=>{const s=0===i?a.max-r:a.max-n[i-1].max,o=A?Be:Ve;let l=0===i?A?Me:Le:"";return a.max===e&&(l=0===i?we:o),t.jsxs(t.Fragment,{children:[t.jsx(F,{class:l,orientation:V,length:100*s/(e-r)+"%",color:a.color}),w&&i===n.length-1&&a.max<e?t.jsx(F,{class:o,color:le,orientation:V,length:100*(e-n[i].max)/(e-r)+"%"}):""]})})),t.jsx(v.BarValue,{left:A&&!Y?`${ne}%`:void 0,bottom:A?void 0:`${ne}%`,right:A&&Y?`${ne}%`:void 0,width:A?se:"100%",height:A?"100%":se,length:se,size:oe,orientation:V,class:a.classNames([fe,A?be:pe,"active"===X?ge:""]),color:ce}),N.referenceLines?.map(((a,i)=>t.jsx(j,{label:a.label,labelStyle:{fontSize:Ue.labelFontSize,...a.labelStyle},color:a.color,maxLabelWidth:Ie[i]?.width,maxLabelHeight:Ie[i]?.height,orientation:V,percent:100*(a.value-r)/(e-r),position:a.position,trackSize:Re?`${Ae}px`:d.meterBarVars.size,length:Re?`calc(${h.xUnits(4)} + ${Ae}px)`:void 0})))]})}),De,Z,q]})}e.MeterBar=function({orientation:e,length:a,size:i,...n}){return t.jsx(t.Fragment,{children:"fit"===i?t.jsx(r.TrackResizeContainer,{width:"100%",height:"100%",children:(r,a)=>t.jsx(H,{width:r,height:a,orientation:e,size:i,...n})}):t.jsx(H,{size:i,length:a,orientation:e,...n})})}}));
//# sourceMappingURL=MeterBar-e417440c.js.map
