define(['exports', 'preact/jsx-runtime', 'preact/compat', 'preact/hooks', './LayerHost-7d4aa6d3', 'css!./DragAndDropStyles.styles.css', 'css!./ReorderableItemStyles.styles.css', './ReorderableContext-6d10a1b7', './HiddenAccessible-037ef42d', './collectionUtils-26e6c87c', './useReorderableItem-013ac2e8', './classNames-08d99695', './UNSAFE_ListView/themes/ListViewStyles.css', './keys-4755c121', './mergeProps-bcfa6a92', './useNavigation-a6a2218f', './Menu-45a26116', './MenuItem-ff1cd14d', 'preact', './logger-0f873e29', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Menu/themes/MenuItemStyles.css', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', 'css!./MenuStyles.styles.css', './useItemAction-cb69dd7f', './useContextMenuGesture-69b54d61', './LoadMoreCollection-3ac9e69e', './List-5b5b3bd7'], (function(e,r,t,o,n,s,l,i,c,a,u,d,f,m,y,g,p,I,C,x,R,h,S,v,M,b,E,P,k,O,T,K,L,w,j,A){"use strict";const D=(e,r)=>{if(null!=e){const t=e.querySelectorAll("[role='row']");if(t.length>r)return a.getKey(t[r])}return null};function F(e,r){const t=Math.abs(null==r?e.scrollTop:r),o={y:t,key:void 0,offsetY:void 0};let n=0;const s=e.querySelectorAll("[role='row']");if(s.length>0&&0===t)return o.key=D(e,0),o.offsetY=0,o;for(let r=0;r<s.length;r++){const l=s[r].getBoundingClientRect().height;if(n+=l,t<n){o.key=D(e,r),o.offsetY=l+t-n;break}}return o}function _(e,r){const t=function(e,r){if(null!=r){let t,o=!1;if(null!=r.key?(o=!0,t=r.key):null!=r.offsetY&&null==r.y&&(o=!0,t=F(e).key),o){if(null!=t){let o=0;const n=e.querySelectorAll("[role ='row']");for(let e=0;e<n.length;e++){if(t===a.getKey(n[e]))return o+(null!=r.offsetY?r.offsetY:0);o+=n[e].getBoundingClientRect().height}}}else if(null!=r.y)return r.y}return}(e,r);e.scrollTop=null!=t?t:0}const N=t.memo((function({children:e,dragKey:t,setDragKey:n,onReorder:s,rootRef:l,itemKey:i}){const c=o.useRef(null),y={itemOverlayFront:f.styles.reorderableItemOverlayFront,itemOverlayRear:f.styles.reorderableItemOverlayRear,itemDragger:f.styles.reorderableItemDragger},g=o.useCallback((e=>{e.dataTransfer?.setData("text/listview-items-key",JSON.stringify(i))}),[i]),{rootProps:p,isDragged:I,overlayZoneBeforeProps:C,overlayZoneAfterProps:x}=u.useReorderableItem({isDisabled:!s,dragKey:t,setDragKey:n,onReorder:s,rootRef:l,ref:c,getItem:()=>c?.current?.closest(a.ITEM_SELECTOR),setTransferData:g,itemStyles:y,itemSelector:a.ITEM_SELECTOR,isVertical:!0}),R=d.classNames([p?.class,f.styles.reorderableItemDnd]);return r.jsxs("div",{...p,class:R,children:[e,!I&&m.isKeyDefined(t)&&r.jsxs(r.Fragment,{children:[r.jsx("div",{...C}),r.jsx("div",{...x})]})]})}),((e,r)=>!(!e||!r)&&(e?.children===r?.children&&e?.dragKey===r?.dragKey)));function V({contextMenuConfig:e,testId:t,contextMenuContext:o,...n}){const s=e.accessibleLabel;return r.jsx(r.Fragment,{children:r.jsx(p.Menu,{...n,...s&&{"aria-label":s},testId:t,children:n.isOpen&&e.itemsRenderer(o)})})}const U={mouse:{initialFocus:"menu",placement:"bottom-start",offsetValue:0},keyboard:{initialFocus:"firstItem",placement:"bottom-start",offsetValue:0},touch:{initialFocus:"menu",placement:"end",offsetValue:40}},B={isOpen:!1,initialFocus:"menu",placement:"bottom-start",offsetValue:0,anchorRef:{current:null}},Y=t.forwardRef(((e,t)=>{const{contextMenuConfig:n}=e,s=o.useRef(),l=o.useRef(null),{currentItemOverride:d,updateCurrentItemOverride:f}=(e=>{const r=o.useRef(),t=o.useRef();t.current!==e&&(t.current=e,r.current=e);const n=o.useCallback((e=>{r.current={rowKey:e}}),[]);return{currentItemOverride:r.current,updateCurrentItemOverride:n}})(e.currentItemOverride),m=e.data?e.data.map((r=>({data:r,metadata:{key:e.getRowKey(r)}}))):null,p=e.onLoadMore?e.onLoadMore:()=>{},I=m?{offset:0,data:m,sizePrecision:e.hasMore?"atLeast":"exact",totalSize:m.length}:null;o.useImperativeHandle(t,(()=>({getScrollPosition:()=>l.current?F(l.current):{y:0},focus:()=>{l.current&&l.current.focus()}}))),o.useLayoutEffect((()=>{l.current&&s.current!==e.scrollPositionOverride&&(_(l.current,e.scrollPositionOverride),s.current=e.scrollPositionOverride)}),[e.scrollPositionOverride]);const C=null!=e.onReorder,{reorderProps:x,reorderItemProps:R,reorderContext:h,reorderInstructionsId:S,reorderInstructions:v}=(({onReorder:e,rootRef:r,viewportConfig:t})=>{const n=null!=e,[s,l]=o.useState(void 0),{reorderProps:i,reorderContext:c,reorderInstructionsId:d,reorderInstructions:f}=u.useReorderable({onReorder:e,rootRef:r,itemSelector:a.ITEM_SELECTOR,isDisabled:!n,columns:1}),m=o.useRef(!1);return o.useEffect((()=>{if(n&&m.current){const e=r.current,o=a.findElementByKey(e,c.currentItemKey.current,a.ITEM_SELECTOR);if(o){const r=t?.scroller()||e;g.scrollToVisible(o,r,0),m.current=!1}}})),n?{reorderProps:y.mergeProps({onKeyDown:e=>{n&&("ArrowUp"===e.key||"ArrowDown"===e.key)&&(e.metaKey||e.ctrlKey)&&e.shiftKey&&(m.current=!0,i.onKeyDown?.(e))},onDragOver:e=>{void 0!==s&&(m.current=!1,a.dragToScroll(e,void 0!==s,r.current))}}),reorderItemProps:{dragKey:s,setDragKey:l,onReorder:e,rootRef:r},reorderContext:c,reorderInstructionsId:d,reorderInstructions:f}:{reorderProps:i,reorderContext:c,reorderInstructionsId:d,reorderInstructions:f}})({onReorder:e.onReorder,rootRef:l,viewportConfig:e.viewportConfig}),{triggerProps:M,menuProps:b,contextMenuContext:E,notifyCurrentKeyChanged:P}=((e,r,t,n)=>{const[s,l]=o.useState(),[i,c]=o.useState(B),u=o.useRef(),{triggerProps:d}=w.useContextMenuGesture((({gesture:r,anchor:o,target:s})=>{let i=o;if("keyboard"===r){i=a.findElementByKey(t.current,u.current,a.ITEM_SELECTOR)||o;const r=L.findItemContext(u.current,e);l(r)}else{const r=a.keyExtractor(s,a.ITEM_SELECTOR),t=L.findItemContext(r,e);l(t),n(r)}c({...U[r],anchorRef:{current:i},isOpen:!0})}),{isDisabled:!r}),f=o.useCallback((e=>{"dismissed"!==e.reason&&"itemAction"!==e.reason||t.current?.focus({preventScroll:!0}),c({...B})}),[t]);return{menuProps:{...i,onClose:f},onClose:f,contextMenuContext:s,triggerProps:d,notifyCurrentKeyChanged:e=>{u.current=e.value}}})(I,n,l,f),k=r=>{e.onPersistCurrentItem?.(r),P(r)};if(C&&R)return r.jsxs(r.Fragment,{children:[r.jsxs(i.ReorderableContext.Provider,{value:h,children:[r.jsx(A.List,{...e,"aria-describedby":S,contextMenuTriggerProps:M,reorderProps:x,onLoadRange:p,scrollerRef:l,data:I,currentItemOverride:d,onPersistCurrentItem:k,children:t=>r.jsx(N,{...R,itemKey:t.metadata.key,children:e.children(t)})}),r.jsx("span",{id:S,children:r.jsx(c.HiddenAccessible,{children:v})})]}),n&&r.jsx(V,{...b,testId:e.testId?e.testId+"-menu":void 0,contextMenuConfig:n,contextMenuContext:E})]});return r.jsxs(r.Fragment,{children:[r.jsx(A.List,{...e,loadingIndicator:e.skeletonRenderer?(O=e.skeletonRenderer,r.jsx(A.SkeletonContainer,{minimumCount:25,children:e=>O({loadingStatus:"initial",index:e})})):void 0,loadMoreIndicator:e.skeletonRenderer?(e=>r.jsx("div",{class:j.LOADMORE_STYLE_CLASS,children:r.jsx(A.SkeletonContainer,{minimumCount:3,children:r=>e({loadingStatus:"loadMore",index:r})})}))(e.skeletonRenderer):void 0,onLoadRange:p,scrollerRef:l,data:I,contextMenuTriggerProps:M,currentItemOverride:d,onPersistCurrentItem:k,children:e.children}),n&&r.jsx(V,{...b,contextMenuConfig:n,contextMenuContext:E,testId:e.testId?e.testId+"-menu":void 0})]});var O}));e.ListView=Y}));
//# sourceMappingURL=ListView-02b5ba6d.js.map
