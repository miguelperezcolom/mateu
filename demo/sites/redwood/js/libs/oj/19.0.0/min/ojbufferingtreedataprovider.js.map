{"version":3,"names":["define","oj","ojdataprovider","ojeventtarget","ojMap","ojSet","ojbufferingutils","ojbufferingdataproviderevents","ojmutablearraytreedataprovider","Logger","Object","prototype","hasOwnProperty","call","BufferingTreeDataProvider","constructor","_dataProvider","_options","_rootBufferingDataProvider","_parentKey","_a","this","TreeAsyncIterable","_parent","_asyncIterator","Symbol","asyncIterator","TreeAsyncIterator","_baseIterator","_params","mergedAddKeySet","mergedItemArray","nextOffset","next","BufferingDataProviderUtils","fetchNext","lastSortCriteria","getTreeEditBuffer","lastIteratorMap","customKeyGenerator","keyGenerator","generatedKeyMap","totalFilteredRowCount","dataBeforeUpdated","Map","dataProvider","options","rootBufferingDataProvider","editBuffer","parentKey","convertKeyToKeyPath","EditBuffer","_addEventListeners","keyPathCapability","getPathCapability","Error","TreeEditBuffer","getChildDataProvider","childDp","keyPath","hasBufferedChildren","MutableArrayTreeDataProvider","useKeyPaths","treeEditBuffer","editBufferUnsubmittedItems","getUnsubmittedItems","getSubmittingItems","size","containsKeys","params","fetchByKeys","removeItem","item","metadata","key","getParentKey","mutationEvent","getIteratorByParentKey","getSubmittableItems","forEach","editItem","isKeyPathDescendant","resetUnsubmittedItem","dispatchEvent","dispatchSubmittableChangeEvent","updateItem","slice","length","parentKeyPath","i","addItem","addDetail","assign","nullParentKey","generatedKey","generateKey","data","convertKeyPathToKey","error","isNewParent","addDetails","addBeforeKey","addBeforeParentKey","KeyUtils","equals","parentIterator","parentKeys","detail","add","addBeforeKeys","undefined","DataProviderRefreshEvent","keys","get","pathInfo","JSON","parse","stringify","treeDataProvider","getCapability","structure","fetchByOffset","fetchFirst","sortCriteria","baseIterator","iterator","set","capabilityName","getTotalSize","isEmpty","resetAllUnsubmittedItems","unsubmittedItems","keySet","Set","delete","then","setItemStatus","newStatus","newKey","submittable","event","BufferingDataProviderSubmittableChangeEvent","addEventListener","_REFRESH","async","refreshEvent","handleRefreshEvent","_MUTATE","handleMutateEvent","update","child","operation","cleanUpSubmittedItem","createOptimizedKeySet","initialSet","createOptimizedKeyMap","initialMap","EventTargetMixin","applyMixin","_registerLegacyNamespaceProp"],"sources":["../debug/ojbufferingtreedataprovider.js"],"mappings":"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"}