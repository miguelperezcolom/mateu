/* Copyright Â© 2024, Oracle and/or its affiliates */

define("text!oj-sp/summarizing-collection/component.json",[],(function(){return'{"name":"summarizing-collection","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Summarizing Collection","description":"Summarizing Collection is used to handle geometry management for the sections, so it will not overflow.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-list-section":"2404.0.0"},"properties":{"overflowActionLabel":{"displayName":"Overflow Action","propertyGroup":"common","description":"Overflow Action label","type":"string","translatable":true,"required":true},"overflowActionHref":{"displayName":"Overflow Action Link Href","propertyGroup":"common","description":"Specify a location for the overflow action link. User could navigate to this link in a new tab via the \'Open Link in New Tab\' option in browser\'s right-click context menu of overflow action.","type":"string","required":false}},"methods":{},"events":{"spOverflowAction":{"displayName":"Overflow Action Event","description":"Dispatched when the overflow action is triggered.","bubbles":true,"cancelable":true},"spShowEmptyState":{"displayName":"Show Empty State Event","description":"Dispatched when the summarizing collection requests the empty state to be displayed.","bubbles":true,"cancelable":true,"visible":false,"status":[{"type":"deprecated","since":"2310.0.0","description":"spShowEmptyState event has been deprecated and will be removed shortly."}]}},"slots":{"":{"displayName":"Summarizing Collection Default Slot","description":"List Section Components.","minItems":1,"maxItems":5,"preferredContent":["SpListSectionElement"],"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}}},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-foldout-panel.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Summarizing%20Collection%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrasummarizingcollection.html"}},"icon":{"iconPath":"extension/catalog/images/ico-foldout-panel.svg"}}'})),define("text!oj-sp/summarizing-collection/summarizing-collection-view.html",[],(function(){return'<html><head></head><body><div class="oj-flex oj-sm-flex-direction-column oj-sp-summarizing-collection-container"><div :class="[[\'oj-flex-item oj-sp-summarizing-collection-content\' + (hasOverflowAction() ? \' oj-sp-summarizing-collection-overflow\' : \'\')]]"><oj-bind-slot></oj-bind-slot></div><oj-bind-if test="[[ hasOverflowAction() ]]"><div class="oj-sp-summarizing-collection-link-gradient"></div><div class="oj-flex-item oj-sp-summarizing-collection-overflow-link oj-sp-summarizing-collection-truncate-1"><a :id="[[ uid + \'_of_action\']]"class="oj-sp-summarizing-collection-link oj-link-standalone oj-sp-helper-truncate":href="[[$properties.overflowActionHref ? $properties.overflowActionHref : \'#\']]"on-click="[[overflowActionHandler]]":title="[[$properties.overflowActionLabel]]"><oj-bind-text value="[[$properties.overflowActionLabel]]"></oj-bind-text></a></div></oj-bind-if></div></body></html>'})),define("oj-sp/common/EventDispatcher",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;class i{static dispatch(e,t,i,o){t.dispatchEvent(new CustomEvent(e,{bubbles:void 0===o||o,cancelable:!1,detail:i}))}}i.EXPORT_ACTION_EVENT_NAME="spExport",i.CUSTOM_ACTION_EVENT_NAME="spAction",i.PRIMARY_ACTION_EVENT_NAME="spPrimaryAction",i.SECONDARY_ACTION_EVENT_NAME="spSecondaryAction",i.BEFORE_DETAIL_EXPAND_EVENT_NAME="spBeforeDetailExpand",i.BEFORE_DETAIL_COLLAPSE_EVENT_NAME="spBeforeDetailCollapse",i.CARD_ACTION_EVENT_NAME="spCardAction",i.DETAIL_ACTION_EVENT_NAME="spDetailAction",i.NAVIGATION_ACTION_EVENT_NAME="spNavigationAction",i.EDIT_ACTION_EVENT_NAME="spEdit",i.SHARE_ACTION_EVENT_NAME="spShare",i.EXPAND_ACTION_EVENT_NAME="spExpand",i.COLLAPSE_ACTION_EVENT_NAME="spCollapse",i.DOWNLOAD_ACTION_EVENT_NAME="spDownload",i.REMOVE_ACTION_EVENT_NAME="spRemove",i.CANCEL_ACTION_EVENT_NAME="spCancel",i.PREVIEW_ACTION_EVENT_NAME="spPreview",i.VIEW_BACK_ACTION_EVENT_NAME="spContentCollapse",i.SHOW_DETAILS_ACTION_EVENT_NAME="spShowDetails",i.OVERFLOW_ACTION_EVENT_NAME="spOverflowAction",i.APPLICATION_ACTION_EVENT_NAME="spApplicationAction",i.SELECTION_ACTION_EVENT_NAME="spSelectionAction",i.SELECTION_CHANGED_EVENT_NAME="spSelectionChanged",i.ATTACHMENT_ACTION_EVENT_NAME="spAttachmentAction",i.ATTACHMENT_COMPLETION_ACTION_EVENT_NAME="spAttachmentCompletion",i.DATA_CHANGE_ACTION_EVENT_NAME="spDataChangeAction",i.FOCUS_ACTION_EVENT_NAME="spFocusAction",i.CHILD_VIEW_CHANGE_EVENT_NAME="spChildViewChange",i.CHANGE_FOCUS_ACTION_EVENT_NAME="spChangeFocusAction",i.SEARCH_ITEM_SELECT_EVENT_NAME="spSearchItemSelected",i.READ_ONLY_ACTION_EVENT_NAME="spReadonlyAction",i.UPDATE_MEDIA_ACTION_EVENT_NAME="spUpdateMedia",i.ADD_ACTION_EVENT_NAME="spAdd",i.DELETE_ACTION_EVENT_NAME="spDelete",i.MANAGE_COLUMNS_ACTION_EVENT_NAME="spManageColumns",i.OVERRIDE_THEME_CONFIG="ojSpOverrideThemeConfiguration",i.SMART_FILTER_CHANGED="smartFiltersChanged",i.NEXT_ACTION_EVENT_NAME="spNext",i.PREVIOUS_ACTION_EVENT_NAME="spPrevious",i.CLOSE_ACTION_EVENT_NAME="spClose",i.DISCARD_CHANGES_EVENT_NAME="ojSpDiscardChanges",i.MESSAGE_UNSAVED_CANCEL_EVENT_NAME="ojSpCancel",i.MESSAGE_DESTRUCTIVE_DELETE_CONFIRM_ACTION_EVENT_NAME="ojSpDeleteConfirm",i.OVERRIDE_SHELL_BOTTOM_SPACING_EVENT_NANE="ojSpOverrideShellBottomSpacing",i.SHOW_EMPTY_STATE_EVENT_NAME="spShowEmptyState",i.PRIMARY_ACTION_AND_NEXT_EVENT_NAME="spPrimaryActionAndNext",i.PRIMARY_ACTION_AND_CLOSE_EVENT_NAME="spPrimaryActionAndClose",i.UNSAVED_CHANGES_CANCEL="spUnsavedChangesCancel",i.UNSAVED_CHANGES_DISCARD="spUnsavedChangesDiscard",i.CONNECTED_EVENT_NAME="spConnected",i.DISCONNECTED_EVENT_NAME="spDisconnected",t.EventDispatcher=i})),define("oj-sp/common-util/common-util",["require","exports","ojs/ojcontext","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopPageLoadAnimation=t.dynamicImportPath=t.classnames=t.getHomePageUrl=t.updateShellFixedBottomCssVariable=t.isInAppNavExistsInDOM=t.debounce=t.getLogoDimenPerAspectRatio=t.isHeroAnimationEnabledInAppearance=t.isEmoButtonEnabledInUserProfile=t.isEmoButtonEnabledInAppearance=t.isClsTraceEnabled=t.removeOverflowFocusSM=t.removeOverflowFocus=t.isResizeObserverSupported=t.setBusyResolve=t.throttle=t.isAndroidPhone=t.isTabletDevice=t.isMobilePhoneDevice=t.isSmallScreenOrMobile=t.getCachedJWTToken=t.getADFDetailPageUrl=t.computedStyleOnElement=t.isMobileDevice=t.isAndroid=t.isIphone=t.findAllFocusableElements=t.getBaseSeededTheme=t.isAskOracleEnabled=t.getBusyContext=t.disableInputTextElemAutoCapitalization=t.dataProviderToArray=t.isElementBoundariesWithinContainerElementBoundaries=t.escapeStringFoRegExp=t.toFixed=t.isElementVisibleInContainerElement=t.pickBoundaries=t.isElementVisibleInViewport=t.isFunction=t.hashCode=t.uid=t.getTimeZone=t.getTimeFormatPattern=t.getDateFormatPattern=t.getGroupingSeparator=t.getDecimalSeparator=t.getNumberFormatPattern=t.isEmpty=t.isEmptyArray=t.isEmptyString=t.isString=t.toBooleanString=t.isNullOrUndefined=t.pRequestAnimationFrame=t.pDelay=t.cloneDeep=t.applyAnimation=t.executeCssAnimation=t.isObject=t.getTerritory=t.extend=t.getDirectionality=t.getOjFndshellPath=t.getOjSpPath=t.objectKeysToUpperCase=t.getExternalEndPoints=t.getCurrentBrowserLocale=t.getCurrentLocale=t.getCurrencyCode=t.checkImpersonate=t.getDeviceOrientation=t.isHoverSupported=t.isTouchSupported=t.checkMobile=t.ORIENTATION=t.AO_VIEW_OPTIONS=t.AO_PAGES=t.AO_PAGE_SLOTS=t.LOGO_ASPECT_TYPE=t.SORT_DIRECTION=t.SCREEN_RANGE=t.UPDATED_FROM=t.POPUP_ANIMATION_ACTION=t.MUTATION_TYPE=t.KEY_NAME=t.DIRECTIONALITY=void 0;var r;t.DIRECTIONALITY={LEFT_TO_RIGHT:"ltr",RIGHT_TO_LEFT:"rtl"},t.KEY_NAME={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F6:"F6",F10:"F10",HOME:"Home",LEFT:"Left",RIGHT:"Right",SPACE:" ",TAB:"Tab",SHIFT:"Shift"},t.MUTATION_TYPE={ATTRIBUTES:"attributes",CHARACTER_DATA:"characterData",CHILD_LIST:"childList"},t.POPUP_ANIMATION_ACTION={CLOSE:"close",OPEN:"open"},t.UPDATED_FROM={EXTERNAL:"external",INTERNAL:"internal"},t.SCREEN_RANGE={EXTRA_EXTRA_LARGE:"xxl",EXTRA_LARGE:"xl",LARGE:"lg",MEDIUM:"md",SMALL:"sm"},t.SORT_DIRECTION={ASCENDING:"ascending",DESCENDING:"descending"},function(e){e.SQUARE="SQUARE",e.SQUARE_X2="SQUARE_X2",e.RECTANGLE="RECTANGLE",e.DEFAULT="DEFAULT",e.DEFAULT_X2="DEFAULT_X2",e.RECTANGLE_X2="RECTANGLE_X2",e.RECTANGLE_X3="RECTANGLE_X3"}(r=t.LOGO_ASPECT_TYPE||(t.LOGO_ASPECT_TYPE={})),function(e){e.NOTIFICATION="askOracleNotification",e.NAVIGATION="askOracleNavigation",e.CUSTOM="askOracleCustom"}(t.AO_PAGE_SLOTS||(t.AO_PAGE_SLOTS={})),function(e){e.productmap="ao_productmap",e.suggestions="ao_suggestions"}(t.AO_PAGES||(t.AO_PAGES={})),function(e){e.default="default",e.custom="custom"}(t.AO_VIEW_OPTIONS||(t.AO_VIEW_OPTIONS={}));const l={containerWidth:"48px",containerHeight:"48px",type:"SQUARE_X2"},d={containerWidth:"40px",containerHeight:"40px",type:"RECTANGLE"},c={containerWidth:"128px",containerHeight:"32px",type:"DEFAULT"},p={containerWidth:"128px",containerHeight:"32px",type:"DEFAULT_X2"},u={containerWidth:"144px",containerHeight:"32px",type:"RECTANGLE_X2"},h={containerWidth:"160px",containerHeight:"32px",type:"RECTANGLE_X3"};t.ORIENTATION={LANDSCAPE:"landscape",PORTRAIT:"portrait"};t.checkMobile=()=>(0,t.isSmallScreenOrMobile)();t.isTouchSupported=()=>"ontouchstart"in window||navigator.maxTouchPoints>0;t.isHoverSupported=()=>window.matchMedia("(any-hover: hover)").matches;t.getDeviceOrientation=()=>{const e=navigator.userAgent,i=e.match(/Android/),o=e.match(/BlackBerry/),s=(e.match(/ipad/),e.match(/(iPhone|iPod)/)),a=e.match(/IEMobile/);if(!(i||s||o||a))return null;return window.matchMedia("(orientation:portrait)").matches?t.ORIENTATION.PORTRAIT:t.ORIENTATION.LANDSCAPE};t.checkImpersonate=()=>!(!window.faConfig||!window.faConfig.PROXY_USER);t.getCurrencyCode=()=>{var e;return(null===(e=window.userPreferences)||void 0===e?void 0:e.currencyCode)||"USD"};t.getCurrentLocale=()=>{let e=document.documentElement.lang;return e="\x3c!-- locale --\x3e"===e?"en":e,e};t.getCurrentBrowserLocale=()=>"undefined"!=typeof Intl?Intl.NumberFormat().resolvedOptions().locale:void 0;t.getExternalEndPoints=()=>{const e={ORA_CRM_REST:"",ORA_CRM_UI:"",ORA_FSCM_REST:"",ORA_FSCM_UI:"",ORA_HCM_REST:"",ORA_HCM_UI:""};return window.FAEndPoints&&window.FAEndPoints.ORA_FSCM_UI?(e.ORA_FSCM_UI=window.FAEndPoints.ORA_FSCM_UI,e.ORA_CRM_UI=window.FAEndPoints.ORA_CRM_UI,e.ORA_HCM_UI=window.FAEndPoints.ORA_HCM_UI,e.ORA_FSCM_REST=window.FAEndPoints.ORA_FSCM_REST,e.ORA_CRM_REST=window.FAEndPoints.ORA_CRM_REST,e.ORA_HCM_REST=window.FAEndPoints.ORA_HCM_REST):(e.ORA_FSCM_UI="https://cptabrmqy-test.fusionapps.ocs.oc-test.com/fscmUI/",e.ORA_CRM_UI="https://cptabrmqy-test.fusionapps.ocs.oc-test.com/crmUI/",e.ORA_HCM_UI="https://cptabrmqy-test.fusionapps.ocs.oc-test.com/hcmUI/",e.ORA_FSCM_REST="https://cptabrmqy-test.fusionapps.ocs.oc-test.com/fscmRestApi/",e.ORA_CRM_REST="https://cptabrmqy-test.fusionapps.ocs.oc-test.com/crmRestApi/",e.ORA_HCM_REST="https://cptabrmqy-test.fusionapps.ocs.oc-test.com/hcmRestApi/"),e};t.objectKeysToUpperCase=e=>{let i,o;const s=Object.keys(e),a=s.length-1,n={};if(!e||!(0,t.isObject)(e))throw new TypeError('Expected "input" to be an object');for(i=a+1;i--;)o=s[a-i],n[m(o)]=e[o];return n};t.getOjSpPath=()=>e.toUrl("oj-sp");t.getOjFndshellPath=()=>{const t=e.toUrl("oj-fndshell");return t.endsWith("/min")?t.replace("/min",""):t};t.getDirectionality=()=>{let e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),e===t.DIRECTIONALITY.RIGHT_TO_LEFT?t.DIRECTIONALITY.RIGHT_TO_LEFT:t.DIRECTIONALITY.LEFT_TO_RIGHT};t.extend=(e,t)=>{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};t.getTerritory=()=>{var e;return(null===(e=window.userPreferences)||void 0===e?void 0:e.territory)||"US"};t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e);t.executeCssAnimation=(e,t)=>new Promise(i=>{if(e){const o=e.classList;let s;e.addEventListener("animationend",s=a=>{e===a.target&&(e.removeEventListener("animationend",s),o.remove(t),i())}),o.add(t)}});t.applyAnimation=(e,t,i)=>new Promise(o=>{e||o(),i&&(i.fill="both");const a=e.animate(t,i);a.addEventListener("finish",()=>{try{a.commitStyles(),a.cancel(),o()}catch(e){s.info(e.message),a.cancel(),o()}})});t.cloneDeep=e=>Array.isArray(e)?e.map(t.cloneDeep):(0,t.isObject)(e)?Object.keys(e).reduce((i,o)=>(i[o]=(0,t.cloneDeep)(e[o]),i),{}):e;t.pDelay=e=>new Promise(t=>{const i=window.setTimeout(()=>{window.clearTimeout(i),t()},e)});t.pRequestAnimationFrame=()=>new Promise(e=>{window.requestAnimationFrame(()=>{e()})});t.isNullOrUndefined=e=>null==e;t.toBooleanString=e=>e?"true":"false";t.isString=e=>"string"==typeof e;t.isEmptyString=e=>(0,t.isString)(e)&&0===e.length;t.isEmptyArray=e=>Array.isArray(e)&&0===e.length;t.isEmpty=e=>(0,t.isNullOrUndefined)(e)||(0,t.isEmptyString)(e)||(0,t.isEmptyArray)(e);t.getNumberFormatPattern=()=>{var e;return null===(e=window.userPreferences)||void 0===e?void 0:e.numberFormatPattern};t.getDecimalSeparator=()=>{var e;return null===(e=window.userPreferences)||void 0===e?void 0:e.decimalSeparator};t.getGroupingSeparator=()=>{var e;return null===(e=window.userPreferences)||void 0===e?void 0:e.groupingSeparator};t.getDateFormatPattern=()=>{var e;return null===(e=window.userPreferences)||void 0===e?void 0:e.dateFormatPattern};t.getTimeFormatPattern=()=>{var e;return null===(e=window.userPreferences)||void 0===e?void 0:e.timeFormatPattern};t.getTimeZone=()=>{let e;return window.userPreferences&&(void 0===window.userPreferences.timezone&&(window.userPreferences.timezone={timezone:"UTC"}),e="UTC"===window.userPreferences.timezone.timezone?"Etc/"+window.userPreferences.timezone.timezone:window.userPreferences.timezone.timezone),e};t.uid=(e=6)=>(crypto.getRandomValues(new Uint32Array(1))[0]/2**32).toString(36).slice(-1*e);t.hashCode=e=>{let t=0;if(!e.length)return t;for(let i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return t};t.isFunction=e=>"function"==typeof e;t.isElementVisibleInViewport=e=>{const t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=t&&o.right<=i};t.pickBoundaries=e=>({bottom:e.bottom,left:e.left,right:e.right,top:e.top});t.isElementVisibleInContainerElement=(e,i)=>(0,t.isElementBoundariesWithinContainerElementBoundaries)((0,t.pickBoundaries)(e.getBoundingClientRect()),(0,t.pickBoundaries)(i.getBoundingClientRect()));t.toFixed=(e,t=2)=>{const i=Math.pow(10,t);return Math.round(e*i)/i};t.escapeStringFoRegExp=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t.isElementBoundariesWithinContainerElementBoundaries=(e,i)=>{const o=(0,t.toFixed)(e.top)>=(0,t.toFixed)(i.top)&&(0,t.toFixed)(e.bottom)<=(0,t.toFixed)(i.bottom),s=(0,t.toFixed)(e.left)>=(0,t.toFixed)(i.left)&&(0,t.toFixed)(e.right)<=(0,t.toFixed)(i.right);return o&&s};t.dataProviderToArray=async(e,t)=>{const i=[],o=e.fetchFirst(t)[Symbol.asyncIterator]();let s=!1;do{const e=await o.next(),{data:t}=e.value;Array.isArray(t)&&i.push(...t),s=e.done}while(!s);return i};t.disableInputTextElemAutoCapitalization=e=>{e&&e.setAttribute("autocapitalize","none")};t.getBusyContext=e=>(0,o.getContext)(e).getBusyContext();t.isAskOracleEnabled=()=>{var e,t;return null!==(t=null===(e=window.faConfig)||void 0===e?void 0:e.ASK_ORACLE_ENABLED)&&void 0!==t&&t};t.getBaseSeededTheme=()=>{var e,t,i;return null!==(i=null===(t=null===(e=window.faConfig)||void 0===e?void 0:e.THEME)||void 0===t?void 0:t.BASE_SEEDED_THEME)&&void 0!==i?i:"Redwood"};t.findAllFocusableElements=e=>{const i=[];if(!e)return[];return e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').forEach(e=>{e.hasAttribute("disabled")||-1===e.tabIndex||("fixed"===(0,t.computedStyleOnElement)(e,"position")&&"none"!==(0,t.computedStyleOnElement)(e,"display")||e.offsetParent)&&i.push(e)}),i};t.isIphone=()=>!!navigator.userAgent.match(/(iPhone|iPod)/);t.isAndroid=()=>!!navigator.userAgent.match(/Android/);t.isMobileDevice=()=>(0,t.isMobilePhoneDevice)();t.computedStyleOnElement=(e,t)=>{let i="";return e&&t&&(i=getComputedStyle(e).getPropertyValue(t)),i};t.getADFDetailPageUrl=(e,i,o,s,a,n,r,l,d,c,p,u,h,m)=>{let g,y;const f=(0,t.getExternalEndPoints)();if(e&&e.length>0&&void 0!==o&&f){g=f[e],y=o}if(g&&y){if(g=`${g}faces${y}`,"/FndOverview"!==o&&"/FuseOverview"!==o&&"/FndMobileOverview"!==o||(i&&i.length>1?g+="?fndGlobalItemNodeId="+i:g+="?fndDetailsMode=true"),void 0!==s){let e;e=encodeURIComponent(s)+";",void 0!==a&&(e+=encodeURIComponent(a)),e+=";",e+=";",null!=n&&(e+=encodeURIComponent(n)),e+=";",(0,t.isNullOrUndefined)(r)||(e+=r),e+=";",(0,t.isNullOrUndefined)(l)||(e+=l),e+=";",(0,t.isNullOrUndefined)(d)||(e+=encodeURIComponent(d)),e+=";",(0,t.isNullOrUndefined)(c)||(e+=encodeURIComponent(c)),e+=";",(0,t.isNullOrUndefined)(p)||(e+=encodeURIComponent(p)),g+="&fnd="+encodeURIComponent(e)}let e="";if(h){let t="",i=0;for(const[o,s]of Object.entries(h))i++,t+=`&${o}=`+encodeURIComponent(s),i>1&&(e+="%3B"),e+=o+"%3D"+encodeURIComponent(s);t.length>0&&(g+=t)}if(g.indexOf("fndDetailsMode")>-1||m){g+="&pageParams=returnFndUrl%3D"+encodeURIComponent(u),g.indexOf("fndDetailsMode")>-1&&(g+="%3BfndDetailsMode%3Dtrue")}else e.length>0&&(g+="%3B"+e)}return g};t.getCachedJWTToken=()=>{let e;const i=window.faConfig&&window.faConfig.APPL_SESSION_ID?window.faConfig.APPL_SESSION_ID:"",o=`${window.location.host}_${i}_FND-userInfo`,s=JSON.parse(localStorage.getItem(o)||JSON.stringify({})).cachedTokens,a=(0,t.getExternalEndPoints)(),n=a.ORA_FSCM_REST.indexOf(":443");let r=a.ORA_FSCM_REST;n>-1&&(r=a.ORA_FSCM_REST.substring(0,n)+"/fscmRestApi/");return s&&(e=s[r+"tokenrelay"]),e};const m=e=>{let t="";if(e!==e.toLowerCase()){for(const i of e)g(i)?t=`${t}_${i}`:t+=i;return t.toUpperCase()}return e.toUpperCase()},g=e=>e&&e===e.toUpperCase();t.isSmallScreenOrMobile=()=>{const e=navigator.userAgent,t=a.createScreenRangeObservable(),i=e.match(/Android/),o=e.match(/BlackBerry/),s=(e.match(/ipad/),e.match(/(iPhone|iPod)/)),r=e.match(/IEMobile/);let l;return l=!(!(i||s||o||r)||t()!==n.SCREEN_RANGE.SM),l};t.isMobilePhoneDevice=()=>(0,t.isIphone)()||(0,t.isAndroidPhone)();t.isTabletDevice=()=>{const e=navigator.userAgent,t=e.match(/(macintosh|ipad)/i)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,i=/(android(?!.*mobile))/i.test(e);return t||i};t.isAndroidPhone=()=>{const e=navigator.userAgent;return/(android(?=.*mobile))/i.test(e)};t.throttle=(e,t,i)=>{let o,s;return(...a)=>{s?(window.clearTimeout(o),o=window.setTimeout(()=>{Date.now()-s>=i&&(t.apply(e,a),s=Date.now())},i-(Date.now()-s))):(t.apply(e,a),s=Date.now())}};t.setBusyResolve=(e,t)=>i.getContext(e).getBusyContext().addBusyState(t);t.isResizeObserverSupported=()=>"ResizeObserver"in window;t.removeOverflowFocus=(e,t)=>{const i=t.querySelectorAll("[tabindex],a");for(let t=0;t<i.length;t++){const o=i[t],s=o.getAttribute("tabindex");o.getBoundingClientRect().left>e.getBoundingClientRect().width+e.getBoundingClientRect().left?(o.hasAttribute("data-originaltabindex")||o.setAttribute("data-originaltabindex",s),o.setAttribute("tabindex","-1")):o.hasAttribute("data-originaltabindex")&&(o.setAttribute("tabindex",o.getAttribute("data-originaltabindex")),o.removeAttribute("data-originaltabindex"))}};t.removeOverflowFocusSM=(e,t)=>{const i=t.querySelectorAll("[tabindex],a");for(let t=0;t<i.length;t++){const o=i[t],s=o.getAttribute("tabindex");o.getBoundingClientRect().bottom>e.getBoundingClientRect().bottom?(o.hasAttribute("data-originaltabindex")||o.setAttribute("data-originaltabindex",s),o.setAttribute("tabindex","-1")):o.hasAttribute("data-originaltabindex")&&(o.setAttribute("tabindex",o.getAttribute("data-originaltabindex")),o.removeAttribute("data-originaltabindex"))}};t.isClsTraceEnabled=()=>{var e,t;return"Y"===(null===(t=null===(e=window.faConfig)||void 0===e?void 0:e.PROFILE)||void 0===t?void 0:t.ORA_CLS_TRACE_ENABLED)};t.isEmoButtonEnabledInAppearance=()=>{var e,t;return"Y"===(null===(t=null===(e=window.faConfig)||void 0===e?void 0:e.THEME)||void 0===t?void 0:t.EMO_BUTTON_ENABLED)};t.isEmoButtonEnabledInUserProfile=()=>{var e,t;return"Y"===(null===(t=null===(e=window.faConfig)||void 0===e?void 0:e.PROFILE)||void 0===t?void 0:t.ORA_EMOBUTTON_ENABLED)};t.isHeroAnimationEnabledInAppearance=()=>{var e,t;const i=null===(t=null===(e=window.faConfig)||void 0===e?void 0:e.THEME)||void 0===t?void 0:t.ORA_HERO_ANIMATION_ENABLED;return!i||"Y"===i};t.getLogoDimenPerAspectRatio=(e,t,i)=>{if(!t&&!i&&!e)return{};let o;const s=e?e.naturalWidth:parseInt(t,10),a=e?e.naturalHeight:parseInt(i,10),n=s/a;switch(!0){case n<.75:o=l;break;case n>=.75&&n<1:o=d;break;case n>=1&&n<4:o=c;break;case n>=4&&n<=8:o=p;break;case n>8&&n<=10:o=u;break;case n>10:o=h}let m,g;const y=parseInt(o.containerHeight,10),f=parseInt(o.containerWidth,10);return o.type==r.SQUARE_X2||o.type==r.RECTANGLE||o.type==r.DEFAULT?(g=y<a?y:a,m=f<s?n*y:s):(m=f<s?f:s,g=y<a?f/n:a),o.type==r.DEFAULT&&(o.containerWidth=m+"px"),o=Object.assign(Object.assign({},o),{logoWidth:m+"px",logoHeight:g+"px"}),o};t.debounce=(e,t)=>{let i;return(...o)=>{window.clearTimeout(i),i=window.setTimeout(()=>{window.clearTimeout(i),e(o)},t)}};t.isInAppNavExistsInDOM=()=>{const e=document.documentElement,t=getComputedStyle(e).getPropertyValue("--oj-sp-shell-fixed-bottom"),i=t?parseFloat(t):0;return Boolean(i)};t.updateShellFixedBottomCssVariable=e=>{const t=document.documentElement,i=parseFloat(getComputedStyle(t).getPropertyValue("--oj-sp-shell-fixed-bottom")),o=(isNaN(i)?0:i)+e;null==t||t.style.setProperty("--oj-sp-shell-fixed-bottom",o+"px")};t.getHomePageUrl=e=>{const t=y(e);let i,o=-1;return t.indexOf("/crmUI/")>-1?(o=t.indexOf("/crmUI/"),i=t.substring(0,o+6)):t.indexOf("/fscmUI/")>-1?(o=t.indexOf("/fscmUI/"),i=t.substring(0,o+7)):t.indexOf("/hcmUI/")>-1&&(o=t.indexOf("/hcmUI/"),i=t.substring(0,o+6)),i+="/faces/FuseWelcome",i};const y=e=>{let t="";return/^(?:(?:(?:f|ht)tps?):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i.test(e)&&(t=e),t};t.classnames=(...e)=>{const t=[];return e.forEach(e=>{const i=typeof e;(e&&"object"===i||"string"===i)&&("string"==typeof e?t.push(e):Object.entries(e).forEach(([e,i])=>{i&&t.push(e)}))}),t.join(" ")};t.dynamicImportPath=async(t,o)=>{const a=i.getContext(o).getBusyContext().addBusyState({description:"oj-sp-header-general-overview - Importing oj-sp-smart-filters module"});try{await new Promise((i,o)=>{e([t],i,o)})}catch(e){s.info(e.message)}finally{a()}};t.stopPageLoadAnimation=()=>{var e;const t=new CustomEvent("ojSpStopLoadingAnimation",{detail:{isAnimationStop:!0},bubbles:!0,cancelable:!0});null===(e=document.getElementById("loading-animation-overview"))||void 0===e||e.dispatchEvent(t)}})),define("oj-sp/common/snapping",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Snapping=void 0;t.Snapping=class{constructor(e,t){this.easeOutCubic=e=>(1-e)*(1-e)*(1-e),this.getInertiaCoefficient=(e,t)=>{let i=0,o=0;for(;i<=1;){o+=1e3*t(i),i+=e}return 1e3/o},this.getSnapToEdgeCoefficient=(e,t,i,o)=>{const s=i+e/t;return(this.getNextSnappingEdge(e,s,o)-i)/(s-i)},this.getNextSnappingEdge=(e,t,i)=>{const o=i/10;return(e>0?Math.ceil((t-o)/i):Math.floor((t+o)/i))*i},this.interruptSnapping=()=>{this.snapDurationId&&(clearInterval(this.snapDurationId),this.snapDurationId=0)},this.snapToEdgeWithEasing=(e,t,i,o)=>{0===e&&(e=-1*Math.sign(t/i-Math.round(t/i)));const s=1/(this.totalSnappingTime/this.snappingStepTimeout);let a=0;const n=1e3*this.getInertiaCoefficient(s,this.easeOutCubic)/this.snappingStepTimeout,r=this.getSnapToEdgeCoefficient(e,n,t,i),l=e*this.snappingStepTimeout/1e3*r;this.snapDurationId=setInterval(()=>{const e=this.easeOutCubic(a)*l;a<1?(o(e,!1),a+=s):(this.interruptSnapping(),o(e,!0))},this.snappingStepTimeout)},this.snappingStepTimeout=e,this.totalSnappingTime=t,this.snapDurationId=0}}})),define("oj-sp/common/touch-velocity",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchVelocity=void 0;t.TouchVelocity=class{constructor(){this.reset=()=>{this.positionQueue.splice(0),this.timeQueue.splice(0)},this.pruneQueue=(e,t)=>{for(;this.timeQueue.length&&this.timeQueue[0]<e-t;)this.timeQueue.shift(),this.positionQueue.shift()},this.updatePosition=(e,t)=>{this.timeQueue.push(e),this.positionQueue.push(t),this.pruneQueue(e,100)},this.getVelocity=e=>{this.pruneQueue(e,1e3);const t=this.timeQueue.length;if(t<2)return 0;let i=Math.max(this.timeQueue.length-10,0);for(;i<this.timeQueue.length;)i++;return(this.positionQueue[t-1]-this.positionQueue[0])/((this.timeQueue[t-1]-this.timeQueue[0])/1e3)},this.positionQueue=[],this.timeQueue=[]}}})),define("oj-sp/foldout-layout/components/FoldoutLayoutUtils",["require","exports","oj-sp/common-util/common-util","ojs/ojresponsiveutils","oj-sp/common/snapping","oj-sp/common/touch-velocity"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyDownValidateEdges=t.getDynamicContainer=t.hasDynamicContainer=t.keyDownToNextPanel=t.FoldoutStaticPanelAnimation=t.FoldoutTouchInteraction=t.getTouchXDirectionCoefficient=t.isDiagonalGesture=t.setFoldableHeight=t.scrollPanelIntoViewWithDelta=t.updateVerticalScrollPosition=t.updateHorizontalScrollPosition=t.isRtl=t.getDeltaInfoFromTouch=t.getWheelInfo=t.isScaleThreshold=t.isStickyScreen=t.isSmallLandscapeScreen=t.isSmallScreen=t.getPanelContainer=t.getPanels=t.isLandscape=t.isPortrait=t.SCROLL_DIR=t.CONTAINER_TOUCH_ACTION_CSS_CLASS=t.SCROLL_INTO_VIEW_DURATION=t.FOLDOUT_KEY_EVENT_DEBOUNCE_THRESHOLD=t.FOLDOUT_EVENT_DEBOUNCE_THRESHOLD=t.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH=t.FOLDOUT_PANEL_ANIMATION_DELAY=t.KEY_SCROLL_DELTA=t.FOLDOUT_PANEL_COMP=t.FOLDOUT_STATIC_PANEL_INNER=t.FOLDOUT_STATIC_PANEL_WRAPPER=t.FOLDOUT_LAST_PANEL=t.FOLDOUT_PANEL_EMPTY=t.FOLDOUT_PANEL_WRAPPER=t.FOLDOUT_ANIMATION_CONTAINER=t.STATIC_PANEL_OFFSET_INITIAL_WIDTH=void 0;const n=o.getFrameworkQuery(o.FRAMEWORK_QUERY_KEY.SM_ONLY),r="--oj-sp-foldout-layout-static-panel-offset-width";var l;t.STATIC_PANEL_OFFSET_INITIAL_WIDTH="--oj-sp-foldout-layout-static-panel-offset-initial-width",t.FOLDOUT_ANIMATION_CONTAINER="oj-sp-foldout-animation-container",t.FOLDOUT_PANEL_WRAPPER="oj-sp-foldout-layout-panel-wrapper",t.FOLDOUT_PANEL_EMPTY="oj-sp-foldout-layout-panel-empty",t.FOLDOUT_LAST_PANEL="oj-sp-foldout-layout-last-panel",t.FOLDOUT_STATIC_PANEL_WRAPPER="oj-sp-foldout-layout-static-panel-wrapper",t.FOLDOUT_STATIC_PANEL_INNER="oj-sp-foldout-layout-static-panel",t.FOLDOUT_PANEL_COMP="oj-sp-foldout-panel",t.KEY_SCROLL_DELTA=120,t.FOLDOUT_PANEL_ANIMATION_DELAY=300,t.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH=348,t.FOLDOUT_EVENT_DEBOUNCE_THRESHOLD=300,t.FOLDOUT_KEY_EVENT_DEBOUNCE_THRESHOLD=150,t.SCROLL_INTO_VIEW_DURATION=.5,t.CONTAINER_TOUCH_ACTION_CSS_CLASS="oj-sp-foldout-layout-touching",function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(l=t.SCROLL_DIR||(t.SCROLL_DIR={}));t.isPortrait=()=>(0,i.isMobilePhoneDevice)()&&(0,i.getDeviceOrientation)()===i.ORIENTATION.PORTRAIT;t.isLandscape=()=>(0,i.isMobilePhoneDevice)()&&(0,t.isSmallLandscapeScreen)();t.getPanels=e=>{const i=(0,t.getPanelContainer)(e);if(i){const e=[];return Array.from(i.querySelectorAll(t.FOLDOUT_PANEL_COMP+", .oj-sp-foldout-layout-panel")).reduce((e,t)=>(!t.classList.contains("oj-sp-foldout-layout-panel")&&t.closest(".oj-sp-foldout-layout-panel")||e.push(t),e),e),e}return[]};t.getPanelContainer=e=>{if(e)return e.classList.contains("oj-sp-foldout-layout-panel-container")?e:e.querySelector(".oj-sp-foldout-layout-panel-container")};t.isSmallScreen=()=>window.matchMedia(n).matches;t.isSmallLandscapeScreen=()=>window.matchMedia("(max-width: 844px)").matches&&(0,i.getDeviceOrientation)()===i.ORIENTATION.LANDSCAPE;t.isStickyScreen=()=>window.matchMedia("(min-width: 806px)").matches;t.isScaleThreshold=()=>window.matchMedia("(max-height: 720px)").matches;t.getWheelInfo=e=>{let t=0,i=null;if(e.deltaX||e.deltaY){Math.abs(e.deltaY)>Math.abs(e.deltaX)?(t=-e.deltaY,i="y"):(t=-e.deltaX,i="x")}return e.deltaMode===WheelEvent.DOM_DELTA_LINE&&(t*=32),{axis:i,delta:t}};t.getDeltaInfoFromTouch=(e,i)=>{const o=i?i.x:0,s=i?i.y:0,a=(e?e.x:o)-o,n=(e?e.y:s)-s;return Object.assign(Object.assign({},(0,t.getWheelInfo)({deltaX:a,deltaY:n})),{deltaX:a,deltaY:n})};t.isRtl=()=>(0,i.getDirectionality)()===i.DIRECTIONALITY.RIGHT_TO_LEFT;t.updateHorizontalScrollPosition=(e,i)=>{if(!i)return;const o=i.scrollLeft,s=0===o&&e>0,a=o+i.clientWidth>=i.scrollWidth&&e<0;s||a||(i.scrollLeft-=(0,t.isRtl)()?-e:e)};t.updateVerticalScrollPosition=(e,t)=>{if(!t)return;const i=t.scrollTop,o=0===i&&e>0,s=i+window.innerHeight>=t.scrollHeight&&e<0;o||s||(t.scrollTop-=e)};let d=null;t.scrollPanelIntoViewWithDelta=(e,i,o,s,a,n=!0)=>{if(!i)return;if("function"!=typeof e)return;let r=o?o.getBoundingClientRect():null;if(null===r&&(r=DOMRect.fromRect({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})),a&&Object.keys(a).length>0){const e=a.top?a.top:0,t=a.bottom?a.bottom:0,i=a.left?a.left:0,o=a.right?a.right:0;r={top:r.top+e,left:r.left+i,right:r.right-o,bottom:r.bottom-t}}if("x"===s&&i.left>=r.left&&i.right<=r.right)return;if("y"===s&&i.top>=r.top&&i.bottom<=r.bottom)return;let l=null;l="x"===s?i.left>r.left?"right":"left":i.top>r.top?"bottom":"top";const c=r[l],p=Math.round(c-i[l]),u=Math.abs(p);let g=null;if(!n||!(u>10))return g=(0,t.isRtl)()?-p:p,e(g,!0);g=(0,t.isRtl)()?p<0?1:-1:p<0?-1:1,null!==d&&(m(),cancelAnimationFrame(d)),d=requestAnimationFrame(()=>{h(g,u,e)})};let c=0,p=0;const u=60*t.SCROLL_INTO_VIEW_DURATION,h=(e,i,o)=>{if(c>=.49)return cancelAnimationFrame(d),o(e,!0),void m();o(e,!1);const s=t.SCROLL_INTO_VIEW_DURATION/u;c+=s;const a=g(e,i);d=requestAnimationFrame(()=>h(a,i,o))},m=()=>{d=null,c=0,p=0},g=(e,i)=>{const o=y(c,0,i,t.SCROLL_INTO_VIEW_DURATION),s=Math.round(o),a=Math.abs(s-p);return p=s,e<0?-a:a},y=(e,t,i,o)=>i*e/o+t;let f=null;t.setFoldableHeight=(e,o)=>{if(e)return!(0,t.isSmallScreen)()||o?(null!==f&&cancelAnimationFrame(f),void(f=requestAnimationFrame(()=>{const t=(e=>{const t=e.getBoundingClientRect();if(0===t.height&&0===t.width)return null;const o=(0,i.isMobilePhoneDevice)()?"100dvh":"100vh",s=window.scrollY;return`calc(${o} - calc(${Math.round(t.top)+s}px + var(--oj-sp-shell-fixed-bottom, 0px)))`})(e);null!==t&&e.style.setProperty("--oj-sp-foldout-layout-foldable-height",t),f=null}))):void((0,t.isSmallScreen)()&&e.style.setProperty("--oj-sp-foldout-layout-foldable-height","100%"))};t.isDiagonalGesture=(e,t)=>("y"===e?t.x/t.y:t.y/t.x)>.5;t.getTouchXDirectionCoefficient=e=>e<0?-1:1;t.FoldoutTouchInteraction=class{constructor(e){this.startPosition={x:0,y:0,timeStamp:0},this.endPosition={x:0,y:0,timeStamp:0},this.coefficient=null,this.container=null,this.containerPosition=null,this.startInteraction=e=>{this.snappingInstance.interruptSnapping();e.touches[0]&&(this.startPosition={x:e.touches[0].clientX,y:e.touches[0].clientY,timeStamp:e.timeStamp})},this.updateInteraction=(e,i,o=!1)=>{const s=e.touches[0];if(!s)return;const a="x"===i?s.clientX:s.clientY;void 0!==this.container&&null===this.containerPosition&&(this.containerPosition="x"===i?this.container.scrollLeft:this.container.scrollTop),this.snappingInstance.interruptSnapping(),this.touchVelocityInstance.updatePosition(e.timeStamp,a);const n=o&&-1===this.coefficient&&this.endPosition[i]<s.clientX,r=o&&1===this.coefficient&&this.endPosition[i]>s.clientX;this.endPosition={x:s.clientX,y:s.clientY,timeStamp:e.timeStamp};const l=this.getInteraction();return null===this.coefficient&&(this.coefficient=(0,t.getTouchXDirectionCoefficient)(l.deltaX),l.coefficient=this.coefficient),null===l.axis&&(l.axis=i),(n||r)&&(this.startPosition={x:s.clientX,y:s.clientY,timeStamp:e.timeStamp},this.coefficient=null,this.containerPosition="x"===i?this.container.scrollLeft:this.container.scrollTop),l},this.getInteraction=()=>{const e=(0,t.getDeltaInfoFromTouch)(this.endPosition,this.startPosition);return Object.assign(Object.assign({},e),{coefficient:this.coefficient,containerPosition:this.containerPosition})},this.endInteraction=(e,t,i)=>{const o=e.changedTouches[0],s="x"===this.getInteraction().axis?o.clientX:o.clientY;if(this.touchVelocityInstance.updatePosition(e.timeStamp,s),void 0===i)null==t||t();else{const o=this.touchVelocityInstance.getVelocity(e.timeStamp),s=0!==o?-o/Math.abs(o):o;this.snappingInstance.interruptSnapping(),this.touchVelocityInstance.reset(),this.snappingInstance.snapToEdgeWithEasing(s,i.distance,i.dimension,(e,i)=>{null==t||t(e,i)})}this.resetInteraction()},this.setContainerPosition=e=>{this.containerPosition=e},this.resetInteraction=()=>{this.endPosition=null,this.startPosition=null,this.coefficient=null,this.containerPosition=null},this.snappingInstance=new s.Snapping(20,250),this.touchVelocityInstance=new a.TouchVelocity,this.container=e}};t.FoldoutStaticPanelAnimation=class{constructor(e){this.container=null,this.staticPanelRef=null,this.currentWidth=null,this.initialWidth=null,this.direction=null,this.lastTouchPosition=0,this.currentTouchPosition=0,this.getCurrentWidth=()=>this.currentWidth,this.getInitialWidth=()=>this.initialWidth,this.getLastTouchPosition=()=>Math.abs(this.lastTouchPosition),this.getCurrentTouchPosition=()=>Math.abs(this.currentTouchPosition),this.setLastTouchPosition=e=>{this.lastTouchPosition=Math.round(e)},this.setCurrentTouchPosition=e=>{this.currentTouchPosition=Math.round(e)},this.getDiffTouchPosition=()=>{const e=Math.abs(this.getLastTouchPosition()-this.getCurrentTouchPosition());return Math.floor(e)},this.startOnTouch=(e,t)=>{this.start(e,t)},this.start=(e,t)=>{var i;this.staticPanelRef=this.getInnerStaticPanel(t),this.initialWidth=null===(i=this.staticPanelRef)||void 0===i?void 0:i.clientWidth,e>this.currentWidth&&(this.currentWidth=e)},this.moveOnTouch=(e,t)=>{if(!e||"y"===e.axis)return void this.endOnTouch();if(!this.container)return void this.endOnTouch();this.direction=e.deltaX<0?l.LEFT:l.RIGHT,this.setCurrentTouchPosition(e.deltaX);this.getCurrentTouchPosition()/this.getLastTouchPosition()<=.5&&(this.setLastTouchPosition(0),this.setCurrentTouchPosition(1)),this.throttleGetDeltaDiff(e,t)},this.move=(e,t)=>{e&&"y"!==e.axis&&this.container?0!==e.delta&&(this.direction=e.delta<0?l.LEFT:l.RIGHT,this.currentWidth=this.getNewStaticPanelWidth(e.delta),null==t||t(this.direction,this.currentWidth),this.container.style.setProperty(r,this.currentWidth+"px")):this.end()},this.endOnTouch=()=>{this.end()},this.end=()=>{this.lastTouchPosition=null,this.currentTouchPosition=null,this.direction=null},this.reset=e=>{this.currentWidth=e,this.container.style.setProperty(r,this.currentWidth+"px")},this.clear=()=>{this.currentWidth=null,this.container.style.removeProperty(r)},this.getInnerStaticPanel=e=>e?e.querySelector("."+t.FOLDOUT_STATIC_PANEL_INNER):null,this.throttleGetDeltaDiff=(0,i.throttle)(this,(e,i)=>{const o=this.getDiffTouchPosition(),s=this.direction===l.LEFT?(0,t.isRtl)()?o:-o:(0,t.isRtl)()?-o:o;this.setLastTouchPosition(this.currentTouchPosition),this.move({delta:s,axis:e.axis},i)},50),this.getNewStaticPanelWidth=e=>{const i=0===this.container.scrollLeft&&e>0;let o=this.currentWidth;switch(this.direction){case l.LEFT:this.currentWidth>t.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH?(o+=e,o<t.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH&&(o=t.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH)):o=t.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH;break;case l.RIGHT:this.currentWidth<this.initialWidth&&i&&(o+=e,o>this.initialWidth&&(o=this.initialWidth))}return o},this.container=e}};const b=(0,i.debounce)(e=>{const[t,i]=e;null==t||t(i)},t.FOLDOUT_KEY_EVENT_DEBOUNCE_THRESHOLD);t.keyDownToNextPanel=(e,i,o,s)=>{if(0===e)return;let a=-1;switch(o.key){case"ArrowRight":case"ArrowDown":a=i+((0,t.isRtl)()?-1:1);break;case"ArrowLeft":case"ArrowUp":a=i+((0,t.isRtl)()?1:-1)}a>=0&&a<e&&(o.preventDefault(),b(s,a))};t.hasDynamicContainer=e=>!!(0,t.getDynamicContainer)(e);t.getDynamicContainer=e=>{const t=Array.from(null==e?void 0:e.querySelectorAll("oj-dynamic-container")).filter(e=>!e.closest("oj-sp-foldout-panel-overflow, oj-sp-foldout-panel-summarizing, oj-sp-foldout-panel"));return 1===t.length?t[0]:null};t.keyDownValidateEdges=(e,i,o)=>{const s=0===e,a=e===i-1,n=["ArrowLeft","ArrowUp"].includes(o),r=["ArrowRight","ArrowDown"].includes(o);return(0,t.isRtl)()?r&&s||n&&a:r&&a||n&&s}})),define("oj-sp/summarizing-collection/summarizing-collection-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/common/EventDispatcher","oj-sp/foldout-layout/components/FoldoutLayoutUtils","ojs/ojknockout"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummarizingCollectionViewModel=void 0;class d{constructor(e){this.skipResize=!1,this.SM_ONLY=a.createMediaQueryObservable(n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.SM_ONLY)),this.overflowActionHandler=e=>{r.EventDispatcher.dispatch(r.EventDispatcher.OVERFLOW_ACTION_EVENT_NAME,this.composite,void 0),e.preventDefault()},this.handleTransitionEnd=e=>{s.log("oj-sp-summarizing-collection the transition end handler is called"),e.target.classList.contains(l.FOLDOUT_ANIMATION_CONTAINER)&&(s.log("oj-sp-summarizing-collection is going to update the layout"),this.updateLayout(),this.composite.classList.contains("__oj-sp-summarizing-collection-ut-transitionend-helper")&&this.composite.classList.add("__oj-sp-summarizing-collection-ut-transitionend-called"))};const t=o.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.properties=e.properties,this.uid=e.uniqueId,this.hasOverflowAction=i.observable(!!this.properties.overflowActionLabel),this.busyResolve()}activated(e){s.log(`oj-sp-summarizing-collection ${this.uid} activated`)}connected(e){s.log(`oj-sp-summarizing-collection ${this.uid} connected`),this.connectAnimationSupport()}bindingsApplied(e){s.log(`oj-sp-summarizing-collection ${this.uid} bindingsApplied`),this.initializeResizeObservers()}propertyChanged(e){s.log(`oj-sp-summarizing-collection ${this.uid} propertyChanged`),"overflowActionLabel"===e.property&&this.hasOverflowAction(!!e.value)}disconnected(e){s.log(`oj-sp-summarizing-collection ${this.uid} disconnected`),this.disconnectAnimationSupport()}getContainer(){return this.composite.querySelector(".oj-sp-summarizing-collection-content")}getSections(){return Array.from(this.composite.querySelectorAll("oj-sp-list-section"))}getGradientContainer(){return this.composite.querySelector(".oj-sp-summarizing-collection-link-gradient")}initializeResizeObservers(){const e=[];this.getSections().forEach(t=>{e.push(t),e.push(t.querySelector(".oj-sp-list-section-list-view"))}),e.push(this.getContainer()),this.observeElements(()=>this.updateLayout(),e),o.getContext(this.composite).getBusyContext().isReady()||this.getSections().forEach(e=>{o.getContext(e).getBusyContext().whenReady().then(()=>this.updateLayout(),()=>this.updateLayout())});const t=e=>{e?this.composite.classList.add("oj-sp-summarizing-collection-sm-screen"):this.composite.classList.remove("oj-sp-summarizing-collection-sm-screen")};t(this.SM_ONLY()),this.SM_ONLY.subscribe(t)}connectAnimationSupport(){const e=this.composite.closest("."+l.FOLDOUT_ANIMATION_CONTAINER);e&&e.addEventListener("transitionend",this.handleTransitionEnd)}disconnectAnimationSupport(){const e=this.composite.closest("."+l.FOLDOUT_ANIMATION_CONTAINER);e&&e.removeEventListener("transitionend",this.handleTransitionEnd)}updateLayout(){const e=this.getContainer();e&&(e.style.removeProperty("height"),e.style.removeProperty("maxHeight"),e.style.removeProperty("overflow")),this.SM_ONLY()&&this.updateSMLayout();const t=this.getContainer().getBoundingClientRect().height,i=this.getSectionMetaData();let o=this.removeListSectionItemsToFitHeight(i,t);o>t&&(o=this.setSectionsToShowTitlesOnly(i,o,t)),this.updateSectionsCSS(i),this.hideSectionsTitleIfNecessary(i,o,t),this.SM_ONLY()||this.showAtLeastOneItem()}updateSMLayout(){const e=this.getContainer();e.style.height="auto",e.style.maxHeight="var(--oj-foldout-panel-max-sm-content-height)";for(const e of this.getSections())this.resetSectionSM(e)}resetSectionSM(e){e.style.height="auto",e.classList.remove(d.CSS_NO_ITEMS),e.classList.remove(d.CSS_LAST_ITEM);const t=e.querySelectorAll(".oj-sp-list-section-list-item");for(let e=0;e<t.length;++e){t.item(e).classList.remove(d.CSS_HIDDEN_ITEM)}}getSectionMetaData(){const e=[];return this.getSections().forEach((t,i)=>{if(t.getBoundingBox){const i=t.getBoundingBox();if(i){let o=i.titleHeight;const s=i.items?i.items.length:0;for(let e=0;e<s;e++)o+=i.items[e].height;e.push({boundingBox:i,element:t,numItems:s,sectionHeight:o})}}}),e}getTotalSectionHeight(e){let t=0;return e.forEach(e=>{t+=e.sectionHeight}),t}removeListSectionItemsToFitHeight(e,t){let i=this.getTotalSectionHeight(e),o=!0;for(;o&&i>t;){o=!1;for(let s=e.length-1;i>t&&s>=0;s--)if(e[s].numItems>1){e[s].numItems--;const t=e[s].boundingBox.items[e[s].numItems].height;e[s].sectionHeight-=t,i-=t,o=!0}}return i}setSectionsToShowTitlesOnly(e,t,i){let o=t;for(let t=e.length-1;o>i&&t>=0;t--)if(e[t].numItems>0){e[t].numItems=0;const s=e[t].boundingBox.items[e[t].numItems].height;if(e[t].sectionHeight=e[t].boundingBox.titleHeight,o-=s,o<=i)break}return o}updateSectionsCSS(e){e.forEach((t,i)=>{t.element.style.height=t.sectionHeight+"px",this.updateSectionItemsCSS(t),0===t.numItems?t.element.classList.add(d.CSS_NO_ITEMS):t.element.classList.remove(d.CSS_NO_ITEMS),i===e.length-1?t.element.classList.add(d.CSS_LAST_ITEM):t.element.classList.remove(d.CSS_LAST_ITEM)})}updateSectionItemsCSS(e){const t=e.element.querySelectorAll(".oj-sp-list-section-list-item");for(let i=0;i<t.length;++i){const o=t.item(i);i>=e.numItems?o.classList.add(d.CSS_HIDDEN_ITEM):o.classList.remove(d.CSS_HIDDEN_ITEM)}}hideSectionsTitleIfNecessary(e,t,i){let o=t;for(let t=e.length-1;t>=0;t--){const s=e[t].element.querySelector(".oj-sp-list-section-title");s&&(s.classList.remove(d.CSS_HIDDEN_ITEM),o>i&&(o-=e[t].boundingBox.titleHeight,s.classList.add(d.CSS_HIDDEN_ITEM)))}}showAtLeastOneItem(){let e=!0;for(const t of this.getSectionMetaData()){if(!t.element)continue;const i=t.element.querySelector(".oj-sp-list-section-title");if(i&&!i.classList.contains(d.CSS_HIDDEN_ITEM)){e=!1;break}if(t.numItems>0){const i=t.element.querySelectorAll(".oj-sp-list-section-list-item");for(let o=0;o<t.numItems;++o){const t=i.item(o);if(t&&!t.classList.contains(d.CSS_HIDDEN_ITEM)){e=!1;break}}}}const t=this.getContainer();if(t.style.minHeight="unset",e){t.style.overflow="visible";const e=this.getGradientContainer();if(e&&(!e.style.backgroundColor||-1!==e.style.backgroundColor.indexOf("0, 0, 0, 0"))){const t=this.getParentFoldoutPanel();if(t){const i=getComputedStyle(t);e.style.backgroundColor=i.backgroundColor,e.style.backgroundImage=i.backgroundImage}}for(const e of this.getSectionMetaData()){const i=e.element.querySelector(".oj-sp-list-section-title");if(i){t.style.minHeight="0px",i.classList.remove(d.CSS_HIDDEN_ITEM);break}if(e.numItems>0){const i=e.element.querySelectorAll(".oj-sp-list-section-list-item");for(let o=0;o<e.numItems;++o){const s=i.item(o);if(s&&e.element){e.sectionHeight=s.offsetHeight,e.element.style.height=s.offsetHeight+"px",e.element.classList.remove(d.CSS_NO_ITEMS),s.classList.remove(d.CSS_HIDDEN_ITEM),t.style.minHeight="0px";break}}}}}}getParentFoldoutPanel(){if(!this.parentFoldoutPanel){let e=this.composite.parentElement;for(;e&&"oj-sp-foldout-panel"!==e.tagName.toLowerCase();)e=e.parentElement;this.parentFoldoutPanel=e}return this.parentFoldoutPanel}observeElements(e,t){if("undefined"==typeof ResizeObserver||this.composite.classList.contains("__oj-sp-summarizing-collection-disable-resize-observer"))for(const i of t){i.classList.add("oj-sp-foldout-panel-resize-observed");const t=document.createElement("iframe");t.onload=()=>{t.contentWindow.onresize=()=>{this.skipResize||(this.skipResize=!0,requestAnimationFrame(()=>{e.call(this),setTimeout(()=>this.skipResize=!1,100)}))}},t.src="about:blank",t.classList.add("oj-sp-foldout-panel-resize-helper"),i.appendChild(t)}else{const i=new ResizeObserver(()=>requestAnimationFrame(e));for(const e of t)i.observe(e)}}}d.CSS_NO_ITEMS="oj-sp-list-section-no-items",d.CSS_LAST_ITEM="oj-sp-list-section-last",d.CSS_HIDDEN_ITEM="oj-sp-list-section-hidden-item",t.SummarizingCollectionViewModel=d})),define("css!oj-sp/summarizing-collection/summarizing-collection-styles",[],(function(){})),define("oj-sp/summarizing-collection/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./summarizing-collection-view.html","./summarizing-collection-viewModel","css!./summarizing-collection-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-summarizing-collection",{metadata:JSON.parse(o),view:s,viewModel:a.SummarizingCollectionViewModel})})),define("text!oj-sp/advanced-create-edit/advanced-create-edit-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-advanced-create-edit"><oj-sp-header-create-edit data-otel-hero="advancedCreateEditPageHeader":id="[[uid+\'_h\']]"page-title="[[properties.pageTitle]]"page-subtitle="[[properties.pageSubtitle]]"avatar="[[headerAvatar]]"contextual-info="[[ contextualInfo ]]"contextual-info-sticky="[[properties.displayOptions.contextualInfoSticky]]"primary-action.disabled="[[properties.primaryAction.disabled]]"primary-action.label="[[properties.primaryAction.label]]"display-options.contextual-info-label="[[properties.displayOptions.contextualInfoLabel]]"display-options.go-to-parent="[[properties.displayOptions.goToParent]]"display-options.next="[[properties.displayOptions.next]]"display-options.save="[[properties.displayOptions.save]]"secondary-actions="[[properties.secondaryActions]]"translations="[[headerTranslations]]"badge.text="[[properties.badge?.text]]"badge.status="[[properties.badge?.status]]"display-mode="[[properties.displayMode]]"timestamp="[[properties.timestamp]]"data-oj-context=""></oj-sp-header-create-edit><div class="oj-sp-public-primary-content-container"><div id="main-detail-slots"><div data-otel-hero="oj-sp-advanced-create-edit.main"id="main-slot-wrapper":class="[[ {\'oj-sm-padding-9x-vertical\' : respPadding() === \'off\'}]]"data-oj-context=""><div :class="[[ {\'oj-sm-only-padding-4x-horizontal oj-md-only-padding-6x-horizontal oj-lg-padding-12x-horizontal\' : respPadding() === \'off\'}]]"><oj-bind-slot name="main"></oj-bind-slot></div></div><oj-bind-if test="[[ slotCounts &amp;&amp; slotCounts[\'detail\'] > 0 ]]"><div data-otel-hero="oj-sp-advanced-create-edit.detail"id="detail-slot-wrapper":class="[[ {\'oj-sm-padding-9x-vertical\' : respPadding() === \'off\'}]]"data-oj-context=""><div :class="[[ {\'oj-sm-only-padding-4x-horizontal oj-md-only-padding-6x-horizontal oj-lg-padding-12x-horizontal\' : respPadding() === \'off\'} ]]"><oj-bind-slot name="detail"></oj-bind-slot></div></div></oj-bind-if></div><oj-bind-if test="[[ properties.displayOptions?.bottomActions === \'on\']]"><div class="oj-sp-advanced-create-edit-mobile-bottom-container oj-md-hide oj-flex oj-sm-flex-direction-column"><oj-bind-if test="[[ saveIsOn() ]]"><oj-button :id="[[ uid + \'_saveMobile\' ]]"chroming="solid"class="oj-button-sm oj-flex-item oj-sm-margin-4x-horizontal oj-sm-margin-4x-top"disabled="[[ saveDisabled ]]"on-oj-action="[[ saveHandler ]]"><span><oj-bind-text value="[[ res().save ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ !saveIsOn() ]]"><oj-button :id="[[ uid + \'_cancelMobile\' ]]"chroming="solid"class="oj-button-sm oj-flex-item oj-sm-margin-4x-horizontal oj-sm-margin-4x-top"on-oj-action="[[ cancelHandler ]]"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-button :id="[[ uid + \'_primaryActionMobile\' ]]"class="oj-button-sm oj-flex-item oj-sm-margin-4x-horizontal oj-sm-margin-4x-vertical"disabled="[[ primaryActionDisabled ]]"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></div></oj-bind-if></div></div></body></html>'})),define("text!oj-sp/advanced-create-edit/component.json",[],(function(){return'{"name":"advanced-create-edit","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Advanced Create and Edit Page Template","description":"Manage complex business objects with many attributes and multiple levels of information.","type":"composite","subcomponentType":"patternImpl","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-header-create-edit":"2404.0.0"},"icon":{"iconPath":"extension/catalog/images/ico-advanced-create-and-edit-48.svg"},"properties":{"pageTitle":{"displayName":"Page Title","type":"string","description":"A translatable title for component","propertyGroup":"common","required":true,"translatable":true,"extension":{"vbdt":{"placeholderValue":"New Page"}}},"pageSubtitle":{"displayName":"Page Subtitle","type":"string","description":"A translatable sub title for component","translatable":true,"propertyGroup":"common","required":false},"avatar":{"displayName":"Avatar Image","description":"The avatar of the person who is required in the context of the page","propertyGroup":"common","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","propertyGroup":"common","type":"object","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info are visible","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go to Parent action is visible","type":"boolean","value":false},"next":{"description":"Defines whether Next action is on, off or unconfigured.","type":"string","value":"unconfigured","enumValues":["on","off","unconfigured"],"propertyEditorValues":{"on":{"displayName":"On","description":"Next sequence is rendered."},"off":{"displayName":"Off","description":"Next sequence is configured but not rendered."},"unconfigured":{"displayName":"Unconfigured","description":"Next sequence is not configured."}}},"save":{"description":"Defines whether Save action is visible","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Save button is visible and enabled"},"off":{"displayName":"Off","description":"Save button is not visible"},"disabled":{"displayName":"Disabled","description":"Save button is visible and disabled"}}},"contextualInfoSticky":{"description":"Defines whether contextual information is visible in the sticky header","type":"boolean","value":false},"responsivePadding":{"type":"string","description":"Specify if dynamic paddings should be on or off","displayName":"Dynamic Paddings","enumValues":["on","off"],"status":[{"target":"propertyValue","type":"deprecated","since":"2304.0.0","description":"Enum value \'off\' is deprecated. Use \'on\' instead.","value":["off"]}],"propertyEditorValues":{"on":{"displayName":"On","description":"Dynamic paddings are on."},"off":{"displayName":"Off","description":"Dynamic paddings are off."}}},"bottomActions":{"description":"Defines whether primary action and save/cancel buttons are displayed in small or mobile view?","type":"string","value":"off","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Primary action and save/cancel buttons are displayed in small view or mobile view"},"off":{"displayName":"Off","description":"Primary action and save/cancel buttons are not displayed in small view or mobile view"}}}},"required":false},"primaryAction":{"displayName":"Primary Action ","description":"The primary action object of the page. Default value { label : \'Submit\' , disabled : false }","type":"object","propertyGroup":"common","required":false,"properties":{"label":{"displayName":"Primary Action Label","description":"The label of primary action of the page. Default is Submit.","type":"string"},"disabled":{"displayName":"Primary Action Disabled Status","description":"The disabled state of the primary action of the page.","type":"boolean","value":false}}},"secondaryActions":{"displayName":"Secondary Actions array","description":"A list of secondary actions of the page. This supports upto 4 actions. If there are more than 4, only render the first 4. Each action has [label, id, icon, display].","type":"Array<object>|null","propertyGroup":"common","required":false,"extension":{"vbdt":{"itemProperties":{"label":{"type":"string","displayName":"Label","description":"Label of the secondary item"},"id":{"type":"string","displayName":"ID","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"icon":{"type":"string","displayName":"Icon","description":"Icon for the secondary item"},"display":{"type":"string","displayName":"Display option for the secondary action","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled"},"off":{"displayName":"Off","description":"The secondary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled"}}}}}}},"contextualInfo":{"displayName":"Contextual Info","description":"A list of contextual informations for the page. This supports up to 4 contextual information items.","type":"Array<object>|null","propertyGroup":"data","extension":{"vbdt":{"itemProperties":{"label":{"displayName":"Label","description":"Contextual Info Label","type":"string"},"value":{"displayName":"Value","description":"Contextual Info Value","type":"string"}}}},"required":false},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"avatarHint":{"type":"string"},"goToParent":{"type":"string"},"next":{"type":"string"}}},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}}}},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp"}},"methods":{},"events":{"spPrimaryAction":{"displayName":"spectraPrimaryAction event","description":"Triggered when the primary action is clicked","bubbles":true,"cancelable":false},"spCancel":{"displayName":"Cancel Event","description":"This event is triggered when Cancel button is clicked.","bubbles":true,"cancelable":false},"spSave":{"displayName":"spSave event","description":"Triggered when the save action is clicked","bubbles":true,"cancelable":false},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked","bubbles":true,"cancelable":false},"spNext":{"displayName":"spNext event","description":"Triggered when the next action is clicked","bubbles":true,"cancelable":false},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when a secondary action is clicked","bubbles":true,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the selected secondary action","type":"string"}}}},"slots":{"main":{"description":"This is the slot for main content","displayName":"main slot","implicitBusyContext":true,"preferredContent":["FormLayoutElement","DynamicFormElement","SpVerticalAnchorNavigatorElement","SpMessagesBannerElement"]},"detail":{"description":"This is the slot for detail content","displayName":"Detail slot","implicitBusyContext":true,"preferredContent":["SpCollectionContainerElement","ListViewElement","DynamicTableElement","TableElement","SpCollectionContainerAdvancedElement","SpAttachmentsElement"]}},"extension":{"catalog":{"category":"Redwood Page Templates","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Advanced%20Create%20Edit%20Page%20Template&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraadvancedcreateedit.html","coverImage":"extension/catalog/images/ico-advanced-create-and-edit-48.svg","screenshots":{},"tags":["Redwood"]},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"data":{"customizers":[]},"general":{"customizers":[{"propertyName":"pageTitle"},{"propertyName":"pageSubtitle"},{"propertyName":"displayMode"},{"type":"heading","displayName":"Display Options"},{"propertyName":"displayOptions.goToParent","displayName":"Show Go to Parent"},{"propertyName":"displayOptions.contextualInfoLabel","displayName":"Show Contextual Info Label"},{"propertyName":"displayOptions.save","displayName":"Save Button Visible","type":"enumeration"},{"propertyName":"displayOptions.next","displayName":"Next Button Visible","type":"enumeration"},{"propertyName":"displayOptions.contextualInfoSticky","displayName":"Contextual Info Sticky"},{"propertyName":"displayOptions.bottomActions","displayName":"Bottom Actions Visible","type":"enumeration"},{"type":"heading","displayName":"Actions"},{"propertyName":"primaryAction.label","displayName":"Primary action label"},{"propertyName":"primaryAction.disabled","displayName":"Primary action disabled"},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Secondary Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"actions"}}]},"actions":{"customizers":[{"propertyName":"secondaryActions.id","displayName":"Id"},{"propertyName":"secondaryActions.label","displayName":"Label"},{"propertyName":"secondaryActions.icon","displayName":"Icon"},{"propertyName":"secondaryActions.display","displayName":"Display Option","type":"enumeration"},{"type":"delete","propertyName":"secondaryActions","delete":"arrayIndex"}]}},"events":{"suggestions":[{"name":"spPrimaryAction","type":"component"},{"name":"spSecondaryAction","type":"component","mappings":[{"variableName":"actionId","expression":"{{$event.detail.value.id}}","type":"string"}]},{"name":"spSave","type":"component"},{"name":"spCancel","type":"component"},{"name":"spGoToParent","type":"component"},{"name":"spNext","type":"component"}]}}}}}'})),define("oj-sp/common-strings/resources/nls/common-component-strings",{ar:!0,"ar-XB":!0,cs:!0,da:!0,de:!0,el:!0,"en-XA":!0,"en-XC":!0,es:!0,et:!0,fi:!0,fr:!0,"fr-CA":!0,he:!0,hr:!0,hu:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nl:!0,no:!0,pl:!0,pt:!0,"pt-PT":!0,ro:!0,root:!0,ru:!0,sk:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-Hans":!0,"zh-Hant":!0}),define("text!oj-sp/header-create-edit/component.json",[],(function(){return'{"name":"header-create-edit","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Create and Edit Page Header","description":"Page header is the area on the top of the page, separated from content, which provides users with general information about the page as well as page level actions.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-fa-css":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-timestamp":"2404.0.0","oj-sp-primary-action-feedback":"2404.0.0"},"properties":{"pageTitle":{"displayName":"Page Title","description":"The title of the page.","type":"string","translatable":true,"required":true},"pageTitlePlaceholder":{"displayName":"Page Title Placeholder","description":"The placeholder that will be displayed if page title is blank.","required":false,"type":"string","value":"New Page"},"pageSubtitle":{"displayName":"Page Subtitle","description":"Additional supporting information to the page subtitle.","type":"string","translatable":true,"required":false},"avatar":{"displayName":"Avatar Image","description":"The avatar of the person who is required in the context of the page.","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component.","type":"object","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info are visible.","type":"boolean","value":false},"goToParent":{"description":"Defines whether the Go to Parent action is visible.","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether the In-Flow Back action is visible.","type":"boolean","value":false},"next":{"description":"Defines whether the Next action is on, off or unconfigured.","type":"string","value":"unconfigured","enumValues":["on","off","unconfigured"],"propertyEditorValues":{"on":{"displayName":"On","description":"Next sequence is rendered."},"off":{"displayName":"Off","description":"Next sequence is configured but not rendered."},"unconfigured":{"displayName":"Unconfigured","description":"Next sequence is not configured."}}},"save":{"description":"Defines whether the Save action is on, off or disabled.","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Save button is visible and enabled."},"off":{"displayName":"Off","description":"Save button is not visible."},"disabled":{"displayName":"Disabled","description":"Save button is visible and disabled."}}},"feedback":{"description":"Defines whether the emobutton with feedback will be turned on or off in page header. Once feedback data submitted it will be turned off by default. To enable back on same page feedback-version value should be updated","type":"string","value":"off","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"Feedback On","description":"Emobutton will be turned on to collect feedback."},"off":{"displayName":"Feedback Off","description":"Emobutton will be turned off, and call to action button will be displayed."}}}}},"primaryAction":{"displayName":"Primary Action","description":"The primary action button.","type":"object","properties":{"label":{"description":"The label for the primary action button of the page.","type":"string"},"disabled":{"description":"The disabled state of the primary action button.","type":"boolean","value":true}},"required":false},"contextualInfo":{"displayName":"Contextual Info","description":"The contextual information to be displayed.","type":"Array<object>","properties":{"label":{"description":"Contextual Info Label.","type":"string"},"value":{"description":"Contextual Info Value.","type":"string"}},"required":false},"contextualInfoSticky":{"displayName":"Sticky Contextual Info","description":"Defines whether contextual information is visible in the sticky header.","type":"boolean","required":false,"value":false},"secondaryActions":{"displayName":"Secondary Actions","description":"A list of secondary actions of the page. This supports up to 10 actions. If there are more than 10, it will only render the first 10. Each action has [label, id, icon, display].","type":"Array<object>","required":false,"properties":{"label":{"type":"string","displayName":"Secondary Action label."},"id":{"type":"string","displayName":"Secondary Action ID.","description":"This is a unique ID associated with the secondary action. When the user clicks on the secondary action, this ID is passed as a payload with the spSecondaryAction event."},"icon":{"type":"string","displayName":"Secondary Action icon."},"display":{"type":"string","displayName":"Display option for the secondary item.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled."},"off":{"displayName":"Off","description":"The secondary Action is not visible."},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled."}}}}},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}}}},"feedback":{"displayName":"Feedback","description":"Optional property which defines the properties of emobutton. Applicable only if displayOptions feedback property is ON","type":"object","required":false,"properties":{"customFeedback":{"displayName":"Custom Feedback","description":"Custom feedback questions for responses 4 and 5.","type":"Array<object>","status":[{"type":"deprecated","since":"2304.0.0","description":"customFeedback has been deprecated as there is no feedback drawer anymore."}],"properties":{"value":{"type":"string","displayName":"Value of custom feedback option."},"label":{"type":"string","displayName":"Secondary Action ID.","description":"Label for custom feedback option."}}},"acknowledgmentMessage":{"displayName":"Acknowledgment Message","description":"Acknowledgment message to be displayed on additional feedback dialog. This should match the acknowledgment message that is displayed when a user completes a task.","type":"string","status":[{"type":"deprecated","since":"2304.0.0","description":"acknowledgmentMessage has been deprecated as there is no feedback drawer anymore."}]},"pageVersion":{"displayName":"Feedback Page Version","description":"This property value is used only when \'displayOptions.feedback\' is set to \'on\' and it is optional. Only set/update this property value if collecting feedback for each page version is needed. The use case is, when there\'s major UI changes in the page, then update pageVersion property value to display emobutton again to collect feedback.","type":"string"}}},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp"},"translations":{"description":"Instance Overrides of Strings.","type":"object","properties":{"actions":{"type":"string"},"avatarHint":{"type":"string"},"goToParent":{"type":"string"},"inFlowBack":{"type":"string"},"next":{"type":"string"}}},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content."},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}}},"methods":{"openFeedback":{"displayName":"Open feedback","description":"Function to open emoji dialog to provide additional feedback.","status":[{"type":"deprecated","since":"2304.0.0","description":"openFeedback method has been deprecated."}]}},"events":{"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Triggered when the primary action is clicked.","bubbles":true,"cancelable":false,"detail":{"feedbackEnabled":{"description":"Whether or not feedback (EmoButton) was enabled when primary action was fired.","type":"boolean"}}},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when the secondary action is clicked.","bubbles":true,"cancelable":false,"status":[{"type":"deprecated","since":"2304.0.0","description":"spFeedbackAction event has been deprecated."}],"detail":{"secondaryItem":{"description":"The ID of the secondary item clicked.","type":"string"}}},"spFeedbackAction":{"displayName":"spFeedbackAction event","description":"Triggered when the feedback has been submitted.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The ID of the element that was clicked.","type":"string"},"target":{"description":"The target element that was clicked.","type":"HTMLElement"}}},"spCancel":{"displayName":"spCancel event","description":"Triggered when the cancel action is clicked.","bubbles":true,"cancelable":false},"spSave":{"displayName":"spSave event","description":"Triggered when the save action is clicked.","bubbles":true,"cancelable":false},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked.","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked.","bubbles":true,"cancelable":false},"spNext":{"displayName":"spNext event","description":"Triggered when the next action is clicked.","bubbles":true,"cancelable":false}},"slots":{},"extension":{"catalog":{"status":"Pre-production","tags":["oj-sp","Redwood","Early-Adopter","header-create-edit"],"docUrl":"http://design.oraclecorp.com/page-header-create-edit"},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/header-create-edit/header-create-edit-view.html",[],(function(){return'<html><head></head><body><header :id="[[uid + \'_headerContainer\']]"class="oj-sp-header-create-edit-header"data-oj-context="":aria-labelledby="[[ uid + \'_pageTitle\' ]]"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-flex-start"><div :id="[[uid + \'_headerContent\']]"class="oj-sp-header-container":class="[[{\n    \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n    \'oj-sp-header-create-edit-bg-light\': background() === \'light\',\n    \'oj-sp-header-create-edit-sticky-container\': true\n  }]]"><oj-bind-if test="[[ colorStripOnTop() ]]"><div class="oj-sp-header-create-edit-header-strip"></div></oj-bind-if><div class="oj-sp-header-create-edit-spacing-container oj-md-padding-6x-top oj-sm-only-padding-4x-horizontal oj-xl-padding-12x-horizontal oj-md-padding-6x-horizontal oj-md-padding-6x-bottom oj-sp-template-wrapper"><div :class="[[{\n        \'oj-sp-header-create-edit-navigation-title-buttons-container\' : ( (!goToParentVisible() &amp;&amp; !inFlowBackVisible()) &amp;&amp; ( isMediumScreen() &amp;&amp; showButtonsOnTop())) || (goToParentVisible() || inFlowBackVisible()),\n        \'oj-flex oj-sm-flex-wrap-nowrap oj-sp-header-create-edit-sticky-hide\': true,\n        \'oj-sp-header-create-edit-container\': true,\n        \'oj-md-padding-4x-bottom\' : contextualInfoVisible() &amp;&amp; isMediumScreenAndAbove()\n      }]]"><oj-bind-if test="[[ goToParentVisible() || inFlowBackVisible() ]]"><div :class="[[{ \'oj-sp-header-create-edit-header-navigation-inflowback\' : inFlowBackVisible(),\n           \'oj-sp-header-create-edit-header-navigation\': !inFlowBackVisible() }]]"><oj-bind-if test="[[ goToParentVisible() &amp;&amp; !inFlowBackVisible() ]]"><a :id="[[ uid + \'_goToParent_md\' ]]"class="oj-sp-header-create-edit-go-to-parent-link oj-sp-helper-truncate oj-typography-body-md oj-typography-semi-bold"href="#"on-click="[[ goToParentHandler ]]"target="_self"><oj-bind-text value="[[ res().goToParent ]]"></oj-bind-text></a></oj-bind-if><oj-bind-if test="[[ inFlowBackVisible ]]"><oj-button :id="[[ uid + \'_inFlowBack_md\' ]]"class="oj-button-sm oj-sp-header-create-edit-inflowback-btn"chroming="borderless"display="icons"on-oj-action="[[ inFlowBackHandler ]]"><span slot="startIcon"class="oj-ux-ico-nav-left"></span><span><oj-bind-text value="[[inFlowBackTranslationsString()]]"></oj-bind-text></span></oj-button></oj-bind-if></div></oj-bind-if><div :class="[[{\'oj-lg-align-self-center\' : (properties.pageSubtitle === \'\' &amp;&amp; (!goToParentVisible() &amp;&amp; !inFlowBackVisible()) &amp;&amp; isLargeScreenAndAbove()) ,\n        \'oj-sm-align-self-flex-start\' : properties.pageSubtitle === \'\' &amp;&amp; (goToParentVisible() || inFlowBackVisible()),\n        \'oj-lg-padding-3x-top\': updateTime()==\'\' &amp;&amp; (goToParentVisible() || inFlowBackVisible()) &amp;&amp; isLargeScreenAndAbove(),\n        \'oj-sp-header-create-edit-title-avatar-container-sm\': !goToParentVisible() &amp;&amp; !inFlowBackVisible() &amp;&amp; isSmallScreen()\n        }]]"class="oj-sp-header-create-edit-avatar-container oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-self-flex-start oj-sp-helper-truncate"><oj-bind-if test="[[ avatarVisible ]]"><oj-avatar :id="[[ uid + \'_avatar\' ]]":aria-label="[[ ojTranslate.applyParameters(res().avatarHint, {pageTitle: actualPageTitle()}) ]]":title="[[ ojTranslate.applyParameters(res().avatarHint, {pageTitle: actualPageTitle()}) ]]"role="img"size="[[ isSmallScreen() ?  \'xs\' : \'sm\' ]]"initials="[[ avatarInitials ]]"src="[[ avatarSrc ]]"class="oj-sm-align-self-flex-start":class="[[{ \'oj-sm-margin-2x-end\': isSmallScreen(), \'oj-md-margin-4x-end\' : isMediumScreenAndAbove() }]]"></oj-avatar></oj-bind-if><div class="oj-sp-header-create-edit-title oj-flex oj-sm-flex-direction-column oj-sp-helper-truncate"id="title"><div id="oj-sp-header-create-edit-title-badge-container oj-flex"class="oj-sp-header-create-edit-title-badge-container"><h1 :id="[[ uid + \'_pageTitle\' ]]"class="oj-sp-header-create-edit-page-title oj-typography-subheading-lg oj-sm-padding-2x-end oj-sm-margin-1x-bottom"><oj-bind-text value="[[ actualPageTitle ]]"></oj-bind-text></h1><oj-bind-if test="[[badgeVisible()]]"><span :id="[[ uid + \'_badgeContainer\' ]]"class="oj-sp-header-create-edit-badge"><span class="oj-sp-header-create-edit-badge-text":id="[[ uid + \'_badge\' ]]":class="[[badgeClass]]":title="[[ properties.badge.text ]]"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></span></span></oj-bind-if></div><oj-bind-if test="[[ properties.pageSubtitle ]]"><div :id="[[ uid + \'_pageSubtitle\' ]]"class="oj-sp-header-create-edit-page-subtitle oj-typography-body-sm oj-typography-semi-bold oj-sm-margin-1x-top oj-sp-helper-truncate":title="[[ properties.pageSubtitle ]]"><oj-bind-text value="[[ properties.pageSubtitle ]]"></oj-bind-text></div></oj-bind-if></div></div><div :class="[[{\'oj-sp-header-create-edit-button-group oj-sp-transactional-page-actions\': true, \'oj-sm-align-self-flex-end\': (goToParentVisible() || inFlowBackVisible()) }]]"class="oj-md-padding-0-start oj-lg-margin-0-start oj-sm-padding-4x-start"><oj-toolbar :id="[[ uid + \'_headerToolbar\' ]]"aria-label="Header Toolbar"aria-controls=""class="oj-sm-padding-0-vertical oj-sm-flex-wrap-nowrap":class="[[{ \'oj-md-margin-4x-bottom\' : isMediumScreen(), \'oj-sm-margin-2x-bottom\' : isSmallScreen() }]]"><oj-button :id="[[ uid + \'_cancel\' ]]"chroming="solid":class="[[{\'oj-helper-hidden\' : ((goToParentVisible() || inFlowBackVisible()) &amp;&amp; isMediumScreen()) || isSmallScreen(), \'oj-button-sm\': true}]]"on-oj-action="[[ cancelHandler ]]"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-button><oj-bind-if test="[[ saveIsOn ]]"><oj-button :id="[[ uid + \'_save\' ]]"chroming="solid"disabled="[[ saveDisabled ]]":class="[[{\'oj-helper-hidden\' : ((goToParentVisible() || inFlowBackVisible()) &amp;&amp; isMediumScreen()) || isSmallScreen(), \'oj-button-sm\': true}]]"on-oj-action="[[ saveHandler ]]"><span><oj-bind-text value="[[ res().save ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length > 1 ]]"><oj-menu-button :id="[[ uid + \'_secondaryActionSet\' ]]"chroming="outlined":class="[[{\'oj-helper-hidden\' : ((goToParentVisible() || inFlowBackVisible()) &amp;&amp; isMediumScreen()) || isSmallScreen(), \'oj-button-sm\' : true}]]"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetMenu\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-create-edit-secondary-option":id="[[ uid + $current.data.id ]]"value="[[ secondaryActionEvent() +  uid + $current.data.id ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ (secondaryActionsSet().length === 1 &amp;&amp; secondaryActionsSet()[0].display !== \'off\') ]]"><oj-button class="oj-button-sm":id="[[ uid + \'_secondaryAction_\' + secondaryActionsSet()[0].id ]]":class="[[{ \'oj-helper-hidden\' : ((goToParentVisible() || inFlowBackVisible()) &amp;&amp; isMediumScreen()) || isSmallScreen() }]]":data-secondary-action-id="[[ secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-menu-button :id="[[ uid + \'_borderlessMenuWithoutStartIcon\' ]]"display="icons":class="[[{\n                \'oj-helper-hidden\' : (!goToParentVisible() &amp;&amp; !inFlowBackVisible() &amp;&amp; isMediumScreen()) || isLargeScreenAndAbove(),\n                \'oj-button-sm\' : true\n              }]]"><span><oj-bind-text value="[[ res().moreActions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_menuOverflow\' ]]"class="oj-sp-header-create-edit-menuoverflow"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-option :id="[[ uid + \'_cancelOption\' ]]"value="spCancel"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-option><oj-bind-if test="[[ saveIsOn ]]"><oj-option :id="[[ uid + \'_saveOption\' ]]"disabled="[[ saveDisabled ]]"value="spSave"><span><oj-bind-text value="[[ res().save ]]"></oj-bind-text></span></oj-option></oj-bind-if><oj-bind-if test="[[ (secondaryActionsSet().length === 1 &amp;&amp; secondaryActionsSet()[0].display !== \'off\') ]]"><oj-option :id="[[ uid + secondaryActionsSet()[0].id ]]"value="[[ secondaryActionEvent() +  uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; !mobileDevice() ) ]]"><oj-option :id="[[ uid + \'_secondaryActionSetOption\' ]]"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetSubMenu\' ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-create-edit-secondary-option":id="[[ uid + $current.data.id + \'_overflow\' ]]"value="[[ secondaryActionEvent() +  uid + $current.data.id ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; mobileDevice() ) ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-create-edit-secondary-option":id="[[ uid + $current.data.id + \'_overflow\' ]]"value="[[ secondaryActionEvent() + uid + $current.data.id ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-bind-if><oj-option :id="[[ uid + \'_primaryActionFromOverflowMenu\' ]]"value="[[ primaryActionEvent() ]]":class="[[{ \'oj-helper-hidden\' : isMediumScreenAndAbove() }]]"disabled="[[ primaryActionDisabled ]]"><oj-sp-primary-action-feedback :id="[[ uid + \'_primaryActionOverflowMenu\' ]]"class="oj-sp-header-create-edit-emo-button oj-sm-padding-1x-end oj-sp-header-create-edit-emo-button-width"emo-display="[[ emobuttonEnabled ]]"label="[[ primaryActionLabel ]]"display-option="text"feedback.acknowledgment-message="[[ acknowledgmentMessage ]]"feedback.custom-feedback="[[ customFeedback ]]"feedback.assistive-position="end"page-version="[[ pageVersion ]]"disabled="[[ primaryActionDisabled ]]"on-sp-action="[[ primaryActionHandler ]]"on-sp-feedback-action="[[ feedbackActionHandler ]]"></oj-sp-primary-action-feedback></oj-option></oj-menu><span slot="endIcon"class="oj-ux-ico-overflow-horiz"></span></oj-menu-button><oj-sp-primary-action-feedback :id="[[ uid + \'_primaryActionFromHeader\' ]]":class="[[ { \'oj-sp-header-create-edit-emo-button\' : true, \'oj-sp-header-create-edit-emo-button-next\' : nextIsOn(), \'oj-helper-hidden\' : isSmallScreen() } ]]"emo-display="[[ emobuttonEnabled ]]"label="[[ primaryActionLabel ]]"feedback.acknowledgment-message="[[ acknowledgmentMessage ]]"feedback.custom-feedback="[[ customFeedback ]]"feedback.assistive-position="end"page-version="[[ pageVersion ]]"disabled="[[ primaryActionDisabled ]]"on-sp-action="[[ primaryActionHandler ]]"on-sp-feedback-action="[[ feedbackActionHandler ]]"></oj-sp-primary-action-feedback><oj-bind-if test="[[ nextIsOn ]]"><oj-button :id="[[ uid + \'_next\' ]]"chroming="outlined"class="oj-button-sm":aria-label="[[ res().next ]]"on-oj-action="[[ nextHandler ]]"><div slot="endIcon"class="oj-ux-ico-arrow-right"></div></oj-button></oj-bind-if></oj-toolbar><oj-bind-if test="[[updateTime]]"><div :class="[[{ \'oj-sp-header-create-edit-timestamp-spacing oj-text-color-secondary oj-typography-body-sm\' : true, \'oj-helper-hidden\' : isSmallScreen() || isMediumScreen(), \'oj-lg-padding-1x-top\' : isLargeScreenAndAbove() ,\'oj-lg-padding-2x-bottom\': (goToParentVisible() || inFlowBackVisible()) &amp;&amp; isLargeScreenAndAbove() }]]"><div class="oj-flex-bar"><div class="oj-flex-bar-end"><oj-sp-timestamp value="[[updateTime]]"interval="60"></oj-sp-timestamp></div></div></div></oj-bind-if></div></div><oj-bind-if test="[[ badgeVisible() || contextualInfoVisible() ]]"><div :id="[[ uid + \'_badgeCtxInfoContainer\' ]]"class="oj-flex-bar"><oj-bind-if test="[[ contextualInfoVisible ]]"><div :id="[[ uid + \'_contextualInfo\' ]]":class="[[{ \'oj-sm-padding-2x-top\' :  isSmallScreen() }]]"class="oj-flex-bar-middle"><oj-conveyor-belt tabindex="0"class="oj-sp-header-create-edit-contextual-conveyor"data-oj-binding-provider="none"><div class="oj-flex oj-sm-flex-items-initial"><oj-bind-for-each data="[[ properties.contextualInfo ]]"><template><oj-bind-if test="[[ $current.index < 4 ]]"><div :class="[[ {\'oj-flex oj-flex-item\' : true, \'oj-sm-padding-4x-end\' : isSmallScreen(), \'oj-md-padding-6x-end\' : isMediumScreenAndAbove() } ]]"><oj-bind-if test="[[ contextualInfoLabelVisible() ]]"><div :id="[[ uid + \'_contextualInfo\' + $current.index + \'-labelled-by\' ]]"class="oj-typography-body-sm oj-sm-padding-2x-end"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></div></oj-bind-if><div :id="[[ uid + \'_contextualInfo\' + $current.index ]]"class="oj-typography-body-sm oj-typography-semi-bold"><oj-bind-text value="[[ $current.data.value ]]"></oj-bind-text></div></div></oj-bind-if></template></oj-bind-for-each></div></oj-conveyor-belt></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[updateTime]]"><div :class="[[{\'oj-sp-header-create-edit-timestamp-spacing oj-text-color-secondary oj-typography-body-sm\': true, \'oj-helper-hidden\' : isLargeScreenAndAbove(), \'oj-sm-padding-2x-top\' : isSmallScreen() || isMediumScreen() }]]"><div class="oj-flex-bar"><div class="oj-flex-bar-start"><oj-sp-timestamp value="[[updateTime]]"interval="60"></oj-sp-timestamp></div></div></div></oj-bind-if></div><oj-bind-if test="[[ !colorStripOnTop() ]]"><div class="oj-sp-header-create-edit-header-strip"></div></oj-bind-if></div><div class="oj-sp-header-create-edit-hidden-space-holder oj-flex-item oj-sm-flex-0"></div></div></header></body></html>'})),define("oj-sp/common-util/mobileVerticalSwipeHandler",["require","exports","./common-util","ojs/ojlogger"],(function(e,t,i,o){"use strict";var s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.MobileVerticalSwipeHandler=t.SWIPE_TYPE=void 0,function(e){e.SWIPE_DOWN="swipedown",e.SWIPE_LEFT="swipeleft",e.SWIPE_RIGHT="swiperight",e.SWIPE_UP="swipeup",e.TAP="tap"}(s=t.SWIPE_TYPE||(t.SWIPE_TYPE={})),function(e){e.READY="ready",e.PROCESSING="processing"}(a||(a={}));const n=(e,t=null,i=!1,o=250)=>{let s,a;return a=i?(...i)=>{s?(clearTimeout(s),s=window.setTimeout(()=>{s=null},o)):(s=window.setTimeout(()=>{s=null},o),e.apply(t,i))}:(...i)=>{clearTimeout(s),s=window.setTimeout(()=>{e.apply(t,i),clearTimeout(s),s=null},o)},a},r={callbackList:[],executionPromise:null};class l{constructor(){this.enableHandler=()=>{this.previousWindowHeight=window.innerHeight,this.previousScrollPosition=document.documentElement.scrollTop,r.callbackList.push({id:this.id,callbacks:this.events}),r.callbackList.length>1||(this.isIphone||this.isAndroidPhone)&&(window.addEventListener("resize",this.handleOrientationChange,{passive:!0}),this.isIphone&&!this.isPwa?window.addEventListener("resize",this.handleResizeEndIphone,{passive:!0}):window.addEventListener("scroll",this.handleScrollEventAndroid,{passive:!0}))},this.removeHandler=()=>{r.callbackList=r.callbackList.filter(e=>e.id!==this.id),this.events.clear(),this.previousWindowHeight=null,this.previousScrollPosition=null,r.callbackList.length>0||(window.removeEventListener("resize",this.handleOrientationChange),window.removeEventListener("resize",this.handleResizeEndIphone),window.removeEventListener("scroll",this.handleScrollEventAndroid))},this.addEventListener=(e,t,i)=>"function"!=typeof t?(o.error("The listener callback must be a function, the given type is "+typeof t),!1):"string"!=typeof e?(o.error("The event name must be a string, the given type is "+typeof e),!1):(e===s.SWIPE_UP||e===s.SWIPE_DOWN)&&void 0===this.events.get(e)&&(this.events.set(e,{listeners:t,params:i,isSuspended:!1}),!0),this.removeEventListener=e=>{void 0!==this.events.get(e)&&this.events.delete(e)},this.promisifiedDispatch=e=>{r.executionPromise?r.executionPromise.then(()=>this.dispatch(e)):this.dispatch(e)},this.dispatch=e=>{const t=[];for(const{callbacks:i}of r.callbackList){const s=i.get(e);if(s)try{const e=s.listeners,i=s.params;s.isSuspended||t.push(e(i))}catch(t){o.warn(`Callback for event: ${e} was not triggered for id: ${this.id}`)}else o.warn(`This event: ${e} does not exist for id: ${this.id}`)}return r.executionPromise=Promise.all(t).then(()=>r.executionPromise=null).catch(()=>r.executionPromise=null),!0},this.handleScrollEventAndroid=e=>{if(this.orientation===(0,i.getDeviceOrientation)()){const e=document.documentElement.scrollTop;this.state===a.READY&&(this.state=a.PROCESSING,Promise.resolve().then(()=>{const t=e-this.previousScrollPosition>5,i=this.previousScrollPosition-e>5,o=e<=0,n=Math.abs(e-(document.documentElement.scrollHeight-window.visualViewport.height))<5;t&&this.swipeState!==s.SWIPE_UP&&!o?(this.swipeState=s.SWIPE_UP,this.promisifiedDispatch(s.SWIPE_UP)):(i&&this.swipeState!==s.SWIPE_DOWN&&!n||n&&this.swipeState!==s.SWIPE_DOWN&&!this.hasPageEndBeenReached)&&(this.swipeState=s.SWIPE_DOWN,this.promisifiedDispatch(s.SWIPE_DOWN)),this.previousScrollPosition=e,this.hasPageEndBeenReached=n,this.state=a.READY}).catch(e=>o.warn(e)))}},this.handleResizeEndIphone=n(e=>{if(this.orientation===(0,i.getDeviceOrientation)()){const e=window.innerHeight;e-this.previousWindowHeight>15&&this.swipeState!==s.SWIPE_UP&&document.documentElement.scrollTop>0?(this.swipeState=s.SWIPE_UP,this.promisifiedDispatch(s.SWIPE_UP),this.previousWindowHeight=window.innerHeight,this.previousScrollPosition=document.documentElement.scrollTop):this.previousWindowHeight-e>15&&this.swipeState!==s.SWIPE_DOWN&&(this.swipeState=s.SWIPE_DOWN,this.promisifiedDispatch(s.SWIPE_DOWN),this.previousWindowHeight=window.innerHeight,this.previousScrollPosition=document.documentElement.scrollTop)}},this),this.handleOrientationChange=n(e=>{const t=(0,i.getDeviceOrientation)();this.orientation!==t&&(this.swipeState=null,this.orientation=t,this.previousWindowHeight=window.innerHeight,this.previousScrollPosition=document.documentElement.scrollTop,this.isIphone&&!this.isPwa&&(t==i.ORIENTATION.PORTRAIT?(this.swipeState=s.SWIPE_DOWN,this.promisifiedDispatch(s.SWIPE_DOWN)):t==i.ORIENTATION.LANDSCAPE&&window.innerHeight===window.outerHeight?(this.swipeState=s.SWIPE_UP,this.promisifiedDispatch(s.SWIPE_UP)):(this.swipeState=s.SWIPE_DOWN,this.promisifiedDispatch(s.SWIPE_DOWN))))},this),this.id=l.UNIQ_PREFIX+l.UNIQ_INCR++,this.events=new Map,this.previousWindowHeight=null,this.previousScrollPosition=null,this.hasPageEndBeenReached=!1,this.isPwa=window.matchMedia("(display-mode: standalone)").matches,this.isIphone=(0,i.isIphone)(),this.isAndroidPhone=(0,i.isAndroidPhone)(),this.state=a.READY,this.swipeState=null,this.orientation=(0,i.getDeviceOrientation)()}updateAskOracleExpandedState(e){for(const{callbacks:t}of r.callbackList)for(const[,i]of t)i.isSuspended=e}}l.UNIQ_PREFIX="MVSHandler_",l.UNIQ_INCR=0,t.MobileVerticalSwipeHandler=l})),define("oj-sp/common-util/enums",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROFILE_OPTION_GP_VALUE=t.TIME_MS=t.TOOL_ICON_MAP=t.BACKGROUND_MODE=t.TAB_INDEX=void 0,function(e){e.MINUS_ONE="-1",e.ZERO="0"}(t.TAB_INDEX||(t.TAB_INDEX={})),function(e){e.LIGHT="light",e.MIXED="mixed"}(t.BACKGROUND_MODE||(t.BACKGROUND_MODE={})),function(e){e["images/qual_newpage_16.png"]="oj-ux-ico-add-create-page",e["images/qual_formwrench_16.png"]="oj-ux-ico-wrench",e["images/qual_layout_16.png"]="oj-ux-ico-dynamic-layout",e["images/qual_webpagesearch_16.png"]="oj-ux-ico-smart-filter",e["images/qual_paintbrush_16.png"]="oj-ux-ico-pen",e["images/qual_matrix_16.png"]="oj-ux-ico-divider-grid",e["images/qual_form_16.png"]="oj-ux-ico-th-list",e["images/qual_gears_16.png"]="oj-ux-ico-settings",e["images/qual_wrenchregion_16.png"]="oj-ux-ico-marquee",e["images/qual_configure_16.png"]="oj-ux-ico-dynamic-config",e["images/qual_shieldlock_16.png"]="oj-ux-ico-shield-trusted",e["images/qual_search_16.png"]="oj-ux-ico-search",e["images/qual_message_16.png"]="oj-ux-ico-message",e["images/qual_inputfieldpencil_16.png"]="oj-ux-ico-edit-box",e.others="oj-ux-ico-configurator"}(t.TOOL_ICON_MAP||(t.TOOL_ICON_MAP={})),function(e){e[e.sec=1e3]="sec",e[e.min=6e4]="min",e[e.hour=36e5]="hour",e[e.day=864e5]="day",e[e.week=6048e5]="week"}(t.TIME_MS||(t.TIME_MS={})),function(e){e.ENABLED="Y",e.DISABLED="N"}(t.PROFILE_OPTION_GP_VALUE||(t.PROFILE_OPTION_GP_VALUE={}))})),define("oj-sp/common/headerCommonAPI",["require","exports","oj-sp/common-util/common-util","oj-sp/common-util/enums","oj-sp/common/EventDispatcher","ojs/ojcontext"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialMode=t.evaluateHeaderSplitBackground=t.evaluateHeaderBackgroundMode=void 0;t.evaluateHeaderBackgroundMode=async(e,t)=>{var a,n;const r=document.querySelector("oj-sp-pillar-theme");await Promise.all([null==r?void 0:r.getPillarThemePromise(),null===(n=null===(a=window.faConfig)||void 0===a?void 0:a.THEME)||void 0===n?void 0:n._done]),t="Redwood"!==(0,i.getBaseSeededTheme)()?o.BACKGROUND_MODE.MIXED:t||(null==r?void 0:r.appMode)||o.BACKGROUND_MODE.LIGHT;const l={bubbles:!0};return l.detail={mode:t},s.EventDispatcher.dispatch(s.EventDispatcher.OVERRIDE_THEME_CONFIG,e,l.detail,l.bubbles),t};t.evaluateHeaderSplitBackground=(e,t)=>{n(e).then(()=>{const e={bubbles:!0,detail:{globalSplitBackgroundPosition:64}};s.EventDispatcher.dispatch(s.EventDispatcher.OVERRIDE_THEME_CONFIG,t,e.detail,e.bubbles)})};const n=async e=>{const t=a.getContext(e).getBusyContext();await t.whenReady()};t.getInitialMode=e=>{const t=document.querySelector("oj-sp-pillar-theme");return"Redwood"!==(0,i.getBaseSeededTheme)()?o.BACKGROUND_MODE.MIXED:e||(null==t?void 0:t.appMode)||o.BACKGROUND_MODE.LIGHT}})),define("oj-sp/common/private/positionUtilityEnums",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLUMN_MAP=t.SCROLL_DIRECTION=t.LEVEL_MAP=t.EVENT_LISTENER_TYPES=void 0,function(e){e.change="change",e.scroll="scroll"}(t.EVENT_LISTENER_TYPES||(t.EVENT_LISTENER_TYPES={})),function(e){e[e.header=10]="header",e[e.overview=13]="overview",e[e.banner=20]="banner",e[e.headerNavigation=25]="headerNavigation",e[e.panel=27]="panel",e[e.toolbar=30]="toolbar",e[e.content=40]="content",e[e.footerNavigation=10]="footerNavigation",e[e.CTAButtons=20]="CTAButtons",e[e.toast=30]="toast",e[e[void 0]=30]="undefined"}(t.LEVEL_MAP||(t.LEVEL_MAP={})),function(e){e.UP="UP",e.DOWN="DOWN"}(t.SCROLL_DIRECTION||(t.SCROLL_DIRECTION={})),function(e){e[e.sticky=10]="sticky",e[e.nonSticky=20]="nonSticky"}(t.COLUMN_MAP||(t.COLUMN_MAP={}))})),define("oj-sp/common/private/positionUtilityControl",["require","exports","ojs/ojlogger","oj-sp/common-util/common-util","./positionUtilityEnums"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionUtilityControl=void 0;t.PositionUtilityControl=class{constructor(e){this.LEVEL_MAP=s.LEVEL_MAP,this.COLUMN_MAP=s.COLUMN_MAP,this.STICKY_BEHAVIOR_MAX_VIEWPORT_HEIGHT=800,this.EVENT_LISTENER_TYPES=s.EVENT_LISTENER_TYPES,this.registeredComponents=new Map,this.componentPositions={top:[],bottom:[]},this.isScrollEventListenerInitialized=!1,this.lastScrollPosition=0,this.stickinessChangeSubscriptions=new Set,this.scrollChangeSubscriptions=new Set,this.scrollDirectionChangeSubscriptions=new Set,this.hasExceededThreshold=!1,this.scrollThreshold=20,this.lastScrollDirection=null,this.scrollableContainerElement=null,this.scrollableContainerElement=e}subscribe(e){try{return this.preSubscriptionChecks(e),this.registeredComponents.set(e.componentName,{componentName:e.componentName,component:e.component}),e.stickinessSubscription&&this.handleStickinessSubscription(e.componentName,e.stickinessSubscription),e.offsetCalculationSubscription&&this.handleOffsetCalculationSubscription(e.componentName,e.offsetCalculationSubscription),e.scrollSubscription&&this.handlesScrollSubscription(e.componentName,e.scrollSubscription),e.scrollDirectionSubscription&&this.handlesScrollDirectionSubscription(e.componentName,e.scrollDirectionSubscription),this.notifyStickinessChangeSubscriptions(!0),!0}catch(e){i.error(e)}return!1}unsubscribe({componentName:e}){try{if(!this.registeredComponents.has(e))throw new Error(`No active subscription found for ${e}.`);const t=this.registeredComponents.get(e);if(t.onStickinessChangeCallback&&this.stickinessChangeSubscriptions.delete(e),t.onScrollChangeCallback&&this.scrollChangeSubscriptions.delete(e),t.onScrollDirectionChangeCallback&&this.scrollDirectionChangeSubscriptions.delete(e),t.onOffsetChangeCallback){t.resizeObserver.disconnect();const i=t.offsetOptions,o=void 0===i.column?this.componentPositions[i.position][i.level].stack:this.componentPositions[i.position][i.level].columns[i.column];o.splice(o.indexOf(e),1),this.calculateOffset(i.position)}return t.overflowObserver&&t.overflowObserver.disconnect(),this.hasExceededThreshold=!1,this.registeredComponents.delete(e),this.notifyStickinessChangeSubscriptions(),!0}catch(e){i.error(e)}return!1}isComponentSubscribed(e){return this.registeredComponents.has(e)}getNumberOfRegisteredComponents(){return this.registeredComponents}preSubscriptionChecks(e){if("undefined"==typeof window)throw new Error("window is undefined");if(!e.componentName)throw new Error("key componentName is undefined");if(!e.component)throw new Error("key component is undefined");if(this.registeredComponents.has(e.componentName))throw new Error(`subscription for ${e.componentName} already exists`);if(!e.offsetCalculationSubscription&&!e.stickinessSubscription)throw new Error("both offsetCalculationSubscription and stickinessSubscription cannot be undefined");if(e.stickinessSubscription&&!e.stickinessSubscription.onStickinessChange)throw new Error("key stickinessSubscription/onStickinessChange is undefined");if(e.offsetCalculationSubscription){if(!e.offsetCalculationSubscription.offsetOptions)throw new Error("key offsetCalculationSubscription/offsetOptions is undefined");if(!e.offsetCalculationSubscription.offsetOptions.position||!Object.keys(this.componentPositions).includes(e.offsetCalculationSubscription.offsetOptions.position))throw new Error("invalid value provided for key offsetCalculationSubscription/offsetOptions/position");if(!e.offsetCalculationSubscription.onOffsetChange)throw new Error("key offsetCalculationSubscription/onOffsetChange is undefined")}if(e.scrollSubscription&&!e.scrollSubscription.onScrollChange)throw new Error("key scrollSubscription/onScrollChange is undefined");if(e.scrollDirectionSubscription&&!e.scrollDirectionSubscription.onScrollDirectionChange)throw new Error("key scrollDirectionSubscription/onScrollDirectionChange is undefined")}getScrollableContainerHeight(){return this.scrollableContainerElement instanceof Window?document.documentElement.clientHeight:this.scrollableContainerElement.clientHeight}handleStickinessSubscription(e,t){if(this.stickinessChangeSubscriptions.add(e),this.registeredComponents.set(e,Object.assign(Object.assign({},this.registeredComponents.get(e)),{onStickinessChangeCallback:t.onStickinessChange,stickinessOptions:t.stickinessOptions})),this.scrollableContainerElement instanceof Window)this.scrollableContainerElement.onresize=this.notifyStickinessChangeSubscriptions.bind(this,!0);else{new ResizeObserver(e=>{for(const t of e)t.target===this.scrollableContainerElement&&this.notifyStickinessChangeSubscriptions(!0)}).observe(this.scrollableContainerElement)}this.initializeScrollEventListener()}notifyStickinessChangeSubscriptions(e=!1){var t;const i=new Set(this.stickinessChangeSubscriptions),o=this.getScrollableContainerHeight();let a=0;const n=Math.round(.4*o),r=()=>a>=n;let l=!1;for(const e of i){const i=this.registeredComponents.get(e),{component:o,stickinessOptions:n}=i,d=((null==n?void 0:n.expandedComponent)||o).getBoundingClientRect().height;if((null===(t=i.stickinessOptions)||void 0===t?void 0:t.isStandaloneComponent)||((null==i?void 0:i.offsetOptions.level)===s.LEVEL_MAP.headerNavigation?l||(a+=d,l=!0):a+=d),r())break}(e||this.hasExceededThreshold!==r())&&(this.hasExceededThreshold=r(),o<=this.STICKY_BEHAVIOR_MAX_VIEWPORT_HEIGHT?this.handleBelowVerticalScrollHide(this.lastScrollDirection,i):this.handleAboveVerticalScrollHide(i))}handlesScrollSubscription(e,t){this.registeredComponents.set(e,Object.assign(Object.assign({},this.registeredComponents.get(e)),{onScrollChangeCallback:t.onScrollChange})),this.scrollChangeSubscriptions.add(e),this.initializeScrollEventListener()}initializeScrollEventListener(){this.isScrollEventListenerInitialized||(this.scrollableContainerElement.addEventListener(this.EVENT_LISTENER_TYPES.scroll,(0,o.throttle)(this,this.notifyScrollChangeSubscriptions,100)),this.isScrollEventListenerInitialized=!0)}notifyScrollChangeSubscriptions(){const e=new Set(this.stickinessChangeSubscriptions),t=this.scrollableContainerElement instanceof Window?window.scrollY||document.documentElement.scrollTop||0:this.scrollableContainerElement.scrollTop,i=new Set(this.scrollChangeSubscriptions),o=this.getScrollableContainerHeight()<=this.STICKY_BEHAVIOR_MAX_VIEWPORT_HEIGHT;if(Math.abs(t-this.lastScrollPosition)>this.scrollThreshold){const a=this.lastScrollPosition>=t||this.lastScrollPosition<0?s.SCROLL_DIRECTION.UP:s.SCROLL_DIRECTION.DOWN;this.lastScrollPosition=t,this.lastScrollDirection!==a&&(o?(this.notifyComponentsOnScrollChange(a),this.handleBelowVerticalScrollHide(a,e)):(this.handleAboveVerticalScrollHide(e),i.forEach(e=>{this.registeredComponents.get(e).onScrollChangeCallback({isElementVisible:!0})}))),this.notifyComponentsOnScrollDirectionChange(a),this.lastScrollDirection=a}}handleBelowVerticalScrollHide(e,t){const i=e===s.SCROLL_DIRECTION.DOWN||this.hasExceededThreshold;this.notifyComponentsOnStickinessChange(!i,t)}handleAboveVerticalScrollHide(e){this.notifyComponentsOnStickinessChange(!this.hasExceededThreshold,e)}notifyComponentsOnStickinessChange(e,t){t.forEach(t=>{var i,o;null===(o=(i=this.registeredComponents.get(t)).onStickinessChangeCallback)||void 0===o||o.call(i,{isSticky:e})})}notifyComponentsOnScrollDirectionChange(e){new Set(this.scrollDirectionChangeSubscriptions).forEach(t=>{this.registeredComponents.get(t).onScrollDirectionChangeCallback({scrollDirection:e})})}notifyComponentsOnScrollChange(e){const t=e===s.SCROLL_DIRECTION.UP;this.scrollChangeSubscriptions.forEach(e=>{this.registeredComponents.get(e).onScrollChangeCallback({isElementVisible:t})})}handlesScrollDirectionSubscription(e,t){this.registeredComponents.set(e,Object.assign(Object.assign({},this.registeredComponents.get(e)),{onScrollDirectionChangeCallback:t.onScrollDirectionChange})),this.scrollDirectionChangeSubscriptions.add(e),this.initializeScrollEventListener()}handleOffsetCalculationSubscription(e,t){const i=Object.assign(Object.assign({},t.offsetOptions),{column:this.getColumn(),level:this.getLevel(t)});this.registeredComponents.set(e,Object.assign(Object.assign({},this.registeredComponents.get(e)),{height:0,offsetOptions:i,onOffsetChangeCallback:e=>t.onOffsetChange(e),resizeObserver:new ResizeObserver(([t])=>{this.onHeightChanged({componentName:e,height:t.contentRect.height}),this.notifyStickinessChangeSubscriptions()})})),this.registeredComponents.get(e).resizeObserver.observe(this.registeredComponents.get(e).component),void 0===this.componentPositions[i.position][i.level]&&(this.componentPositions[i.position][i.level]={columns:[]}),-1!==i.column&&(void 0===this.componentPositions[i.position][i.level].columns[i.column]&&(this.componentPositions[i.position][i.level].columns[i.column]=[]),this.componentPositions[i.position][i.level].columns[i.column].push(e))}getColumn(){return this.COLUMN_MAP.sticky}getLevel(e){return"number"!=typeof e.offsetOptions.level?this.LEVEL_MAP[e.offsetOptions.level]:e.offsetOptions.level}onHeightChanged({componentName:e,height:t}){this.registeredComponents.set(e,Object.assign(Object.assign({},this.registeredComponents.get(e)),{height:t})),new Map(this.registeredComponents).forEach(e=>{var t;e.onOffsetChangeCallback&&!(null===(t=e.offsetOptions)||void 0===t?void 0:t.isStandaloneComponent)&&this.calculateOffset(e.offsetOptions.position)})}calculateOffset(e){let t=0;this.componentPositions[e].forEach(i=>{let o=0;i.columns[this.COLUMN_MAP.sticky].forEach((i,a,n)=>{let r=0,l=!1;l=n.length>1,n.forEach(i=>{var o;const a=this.registeredComponents.get(i),n=l&&(a.offsetOptions.level===s.LEVEL_MAP.headerNavigation||a.offsetOptions.level===s.LEVEL_MAP.overview||a.offsetOptions.level===s.LEVEL_MAP.toolbar)?t:r+t;a.onOffsetChangeCallback({[e]:n}),(null===(o=a.offsetOptions)||void 0===o?void 0:o.isStandaloneComponent)||(r=Math.max(r,a.height))}),o=Math.max(o,r)}),t+=o})}}})),define("oj-sp/common/private/positionUtilityPrivate",["require","exports","./positionUtilityEnums","./positionUtilityControl"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionUtility=void 0;class s{static subscribe(e){let t,i;const s=this.getOverflowParent(e.component);s?(i=s,t=s):(i=window,t=this.ROOT_KEY);let a=this.scrollableContainers.get(t);return a||(a=new o.PositionUtilityControl(i),this.scrollableContainers.set(t,a)),this.componentNameScrollingElementKeyMap.set(e.componentName,t),a.subscribe(e),!!t}static isComponentSubscribed(e){const t=this.componentNameScrollingElementKeyMap.get(e),i=this.scrollableContainers.get(t);return null==i?void 0:i.isComponentSubscribed(e)}static unsubscribe({componentName:e}){const t=this.componentNameScrollingElementKeyMap.get(e),i=this.scrollableContainers.get(t);if(i){i.unsubscribe({componentName:e});i.getNumberOfRegisteredComponents().size||(this.scrollableContainers.delete(t),this.componentNameScrollingElementKeyMap.delete(e))}}static scrollToTopWithAnimationDisabled(e=0,t="smooth"){const i=document.body,o=()=>{Math.round(window.scrollY)===Math.round(e)&&(i.classList.contains("oj-sp-private-disable-animations-transitions")&&i.classList.remove("oj-sp-private-disable-animations-transitions"),window.removeEventListener("scroll",o))};i.classList.add("oj-sp-private-disable-animations-transitions"),window.addEventListener("scroll",o),window.scrollTo({top:e,behavior:t})}static hasOverfowDefined(e){if(!e)return!1;if("body"===e.tagName.toLowerCase())return!1;const t=getComputedStyle(e);return["hidden","scroll","auto"].some(e=>t.overflow===e||t.overflowX===e||t.overflowY===e)}static getOverflowParent(e,t=new Set){if(e&&!t.has(e))return t.add(e),this.hasOverfowDefined(e)?e:this.getOverflowParent(e.parentElement,t)}}s.LEVEL_MAP=i.LEVEL_MAP,s.scrollableContainers=new Map,s.componentNameScrollingElementKeyMap=new Map,s.ROOT_KEY="_root_element_",t.PositionUtility=s})),define("oj-sp/common/positionUtility",["require","exports","./private/positionUtilityPrivate"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionUtility=void 0,Object.defineProperty(t,"PositionUtility",{enumerable:!0,get:function(){return i.PositionUtility}})})),define("oj-sp/primary-action-feedback/components/assistive-text/assistive-text",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssistiveText=void 0;t.AssistiveText=e=>{const{assistivePosition:t,emoIconEventActionObj:a}=e,{experienceTooltipPrefix:n,experienceStyling:r,experience:l,experienceTooltipPostfix:d}=a,c=((0,o.useMemo)(()=>Object.assign(Object.assign({},s),e.translations),[e.translations]),(0,o.useMemo)(()=>e.id,[e.id]));return(0,i.h)("div",{id:c+"_emo_assistive_popup",class:(()=>{let e="oj-sp-emobtn-assistive-popup";return e+="end"===t?" oj-sp-emobtn-assistive-popup-end":" oj-sp-emobtn-assistive-popup-start",e+=a.isEmoIconFoucsOrHover?" oj-sp-emojibtn-popup-show":"",e})()},(0,i.h)("span",{class:"oj-typography-body-xs"},n,(0,i.h)("span",{class:r},l),d))}})),define("oj-sp/primary-action-feedback/components/emo-button/emo-button",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","../assistive-text/assistive-text","preact/compat","oj-sp/common-util/common-util"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmoButton=void 0;const d="okay",c=[{id:"emo_btnicon_bad",value:"bad",class:"oj-ux-comp-emobutton-unhappy"},{id:"emo_btnicon_okay",value:"okay",class:"oj-ux-comp-emobutton-okay"},{id:"emo_btnicon_good",value:"good",class:"oj-ux-comp-emobutton-happy"}];t.EmoButton=(0,r.memo)(e=>{const{label:t,isSmallScreen:r,openEmoDialog:p,primaryAction:u,emitTelemetryData:h,assistivePosition:m,displayOption:g}=e,y=(0,o.useMemo)(()=>Object.assign({},s),[]),f=(0,o.useMemo)(()=>e.id,[e.id]),[b,v]=(0,o.useState)({experienceTooltipPrefix:null,experience:null,experienceStyling:null,experienceTooltipPostfix:null,isEmoIconFoucsOrHover:null,hoverStartTime:null}),j=[{id:"emo_btn_bad",value:"bad",ariaLabel:y.emoUnhappy},{id:"emo_btn_okay",value:"okay",ariaLabel:y.emoNeutral},{id:"emo_btn_good",value:"good",ariaLabel:y.emoHappy}],A=(0,o.useCallback)(e=>{const t=e.currentTarget.getAttribute("data-value"),i=t===d?y.emobuttonAssistiveNeutralText:y.emobuttonAssistiveText;v({experienceTooltipPrefix:E(i).assistivePrefix,experience:t,experienceStyling:"oj-sp-emojibtn-assistive-text-"+t,experienceTooltipPostfix:E(i).assistivePostfix,isEmoIconFoucsOrHover:!0,hoverStartTime:+new Date})},[b]),C=(0,o.useCallback)(e=>{v({experienceTooltipPrefix:null,experience:null,experienceStyling:null,experienceTooltipPostfix:null,isEmoIconFoucsOrHover:null,hoverStartTime:null})},[b]),E=e=>{const t=e.split("{mood}"),i=t.shift();return{assistivePostfix:t.pop(),assistivePrefix:i}},T=e=>{const t=e.currentTarget.getAttribute("data-value");u(e,t),h(t,b.hoverStartTime)};return(0,i.h)("div",{id:f+"_emo-buttons-container",class:"oj-sp-emojibtn-container"},(0,l.isTouchSupported)()||r?["text"===g?(0,i.h)("div",{id:f+"_primaryActionEmoButton_sm",class:"oj-flex-item oj-flex oj-sm-align-items-center",onClick:()=>p(),"aria-haspopup":"dialog"},t):(0,i.h)("oj-button",{id:f+"_primaryActionEmoButton_sm",chroming:"callToAction",onojAction:()=>p(),class:"oj-button-sm oj-flex-item oj-sp-emobtn-enabled","aria-haspopup":"dialog",label:t})]:[(0,i.h)("div",{class:"oj-sp-emojibtn-dummy-cta"},(0,i.h)("span",{class:"oj-sp-dummy-btn-txt"},t)),(0,i.h)("div",{class:"oj-sp-emojibtn-many oj-sp-emobtn-enabled",id:f+"_oj-sp-emo-btn-set"},j.map((e,o)=>{return(0,i.h)("oj-button",{id:`${f}_${e.id}`,class:"oj-sp-emo-icon-btn",key:o,"aria-label":`${t} ${s=e.ariaLabel,a.applyParameters(y.emobuttonAssistiveText,{mood:s})}`,onMouseEnter:()=>{A(event)},onMouseLeave:()=>{C(event)},onfocusin:()=>{A(event)},onfocusout:()=>{C(event)},onojAction:T,"data-value":e.value});var s})),(0,i.h)("div",{class:"oj-sp-emoji-icon-container"},c.map((e,t)=>(0,i.h)("span",{id:`${f}_${e.id}`,key:t,class:`oj-sp-emoji-icon ${e.class} ${b.experience===e.value?"oj-sp-emojibtn-animate-full":""}`})))],r?null:(0,i.h)(n.AssistiveText,{id:f+"_emo-assistive-text",assistivePosition:m,emoIconEventActionObj:b}))})})),define("oj-sp/primary-action-feedback/components/emo-dialog/emo-dialog",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmoDialog=void 0;t.EmoDialog=e=>{const{emoDialogRef:t,primaryAction:a,emitTelemetryData:n}=e,r=(0,o.useMemo)(()=>Object.assign(Object.assign({},s),e.translations),[e.translations]),l=(0,o.useMemo)(()=>e.id,[e.id]),d=[{value:"bad",label:r.emoUnhappyLabel,class:"oj-ux-comp-emobutton-unhappy"},{value:"okay",label:r.emoNeutralLabel,class:"oj-ux-comp-emobutton-okay"},{value:"good",label:r.emoHappyLabel,class:"oj-ux-comp-emobutton-happy"}];return(0,i.h)("oj-dialog",{id:l+"_emo_feedbackDialog_smscreen",class:"oj-sp-primary-action-feedback-dialog oj-sp-emojibtn-sm-dialog",ref:t},(0,i.h)("div",{slot:"header"},(0,i.h)("h1",{id:l+"_emo_dialog_title",class:"oj-dialog-title"},r.emoMobileDrawerTitle)),(0,i.h)("div",{slot:"body"},(0,i.h)("div",{class:"oj-typography-body-md oj-sm-margin-4x-bottom"},r.selectToFinish),d.map((e,t)=>(0,i.h)("oj-button",{id:`${l}_emo_iconbtn_smscreen_${e.value}`,key:t,onojAction:()=>(e=>{const t=e.currentTarget.getAttribute("data-value");a(e,t),n(t)})(event),class:"oj-button-lg oj-sp-dialog-btn",display:"icons",label:e.label,"data-value":e.value},(0,i.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-dialog "+e.class})))))}})),define("css!oj-sp/primary-action-feedback/primary-action-feedback-styles",[],(function(){}));var __decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/primary-action-feedback/primary-action-feedback",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojresponsiveknockoututils","./components/emo-button/emo-button","oj-sp/common-util/common-util","ojs/ojvcomponent","preact","ojs/ojtracer","./components/emo-dialog/emo-dialog","css!./primary-action-feedback-styles","ojs/ojbutton","ojs/ojvcomponent"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryActionFeedback=void 0;const c={label:i.submit,emoDisplay:"off",pageVersion:null,feedback:{acknowledgmentMessage:null,assistivePosition:null,customFeedback:null},displayOption:"button"},p={emoButtonEnabledState:!1,screenRange:"lg"},u=Symbol.for("trigger");let h=class extends r.Component{constructor(e){var t;super(e),this.state=Object.assign({},p),this._primaryAction=(e,t)=>{var i,o;e.target.getAttribute("disabled")||null===(o=(i=this.props).onSpAction)||void 0===o||o.call(i,{actionId:null!=t?t:e.target.value,feedbackEnabled:this.state.emoButtonEnabledState,target:e.target})},this._triggerTelemetry=(e,t)=>{var i,o,s,a;const n=event.target.id,r=+new Date-("sm"===this.state.screenRange?this.submitStartTimeSmScreen:t);this.telemetryComponentEvent("onSpAction",t=>{t.setAttribute("ojsp_emojibutton_feedback",e),t.setAttribute("ojsp_emojibutton_submitTiming",r),t.setAttribute("ojsp_emojibutton_id",""+n),t.end()}),(null===(o=null===(i=this.emoDialog)||void 0===i?void 0:i.isOpen)||void 0===o?void 0:o.call(i))&&(null===(a=null===(s=this.emoDialog)||void 0===s?void 0:s.close)||void 0===a||a.call(s)),window.localStorage.setItem(this._createLocalStorageKey(),this.versionKey)},this.emoDialogRef=e=>{this.emoDialog=e},this.openEmoDialog=()=>{var e,t;this.submitStartTimeSmScreen=+new Date,null===(t=null===(e=this.emoDialog)||void 0===e?void 0:e.open)||void 0===t||t.call(e)},this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,n.getUniqueId)(),this.emoDialog=null,this.screenRange=o.createScreenRangeObservable(),this.tracer=(0,l.getTracerProvider)().getTracer("ojsp_emojibutton");const i=new Map;this.oTelcontext={getValue:e=>i.get(e),setValue(e,t){return i.set(e,t),this},deleteValue(e){return i.delete(e),this}},this.state={emoButtonEnabledState:this.isEmoButtonEnabled(),screenRange:this.screenRange()}}isEmoButtonEnabled(){var e,t,i;return this.versionKey=null!==(e=this.props.pageVersion)&&void 0!==e?e:"Y",this.localKey=window.localStorage.getItem(this._createLocalStorageKey()),!!(0,a.isClsTraceEnabled)()&&(!!(0,a.isEmoButtonEnabledInUserProfile)()&&(!!(null===(i=null===(t=window.faConfig)||void 0===t?void 0:t.interface)||void 0===i?void 0:i.FEEDBACK_BUTTON_ENABLED)&&("on"===this.props.emoDisplay&&(!this.props.disabled&&this.localKey!==this.versionKey))))}render(e,t){const i=this.state.emoButtonEnabledState,o="sm"===this.state.screenRange;return(0,r.h)("div",{id:this.uniqueId+"_primaryActionContainer",class:o?"oj-sp-paf-sm-screen":"","data-emoButtonEnabledState":i?"true":"false","data-isEmoButtonEnabledInSmallScreen":i&&o?"true":"false"},i?this.renderEmobutton(o):this.renderCtabutton(o))}renderEmobutton(e){const{label:t,feedback:i,displayOption:o}=this.props;return(0,r.h)(r.Fragment,null,(0,r.h)(s.EmoButton,{id:this.uniqueId+"_emobutton",label:t,isSmallScreen:e,primaryAction:this._primaryAction,openEmoDialog:this.openEmoDialog,emitTelemetryData:this._triggerTelemetry,assistivePosition:i.assistivePosition,displayOption:o}),a.isTouchSupported||e?(0,r.h)("div",null,(0,r.h)(d.EmoDialog,{id:this.uniqueId+"_emodialog",emoDialogRef:this.emoDialogRef,primaryAction:this._primaryAction,emitTelemetryData:this._triggerTelemetry})):null)}getClassNames(){return(0,a.classnames)("oj-sp-paf-cta-text-width")}renderCtabutton(e){const{label:t,disabled:i,displayOption:o}=this.props;return(0,r.h)("div",{class:e?"oj-flex":""},"text"===o?(0,r.h)("div",{id:this.uniqueId+"_primaryActionCta",onClick:this._primaryAction,disabled:i,class:this.getClassNames()},t):(0,r.h)("oj-button",{id:this.uniqueId+"_primaryActionCta",class:e?"oj-button-sm oj-flex-item oj-sm-padding-4x-horizontal oj-sm-margin-4x-bottom oj-sp-emobtn-disabled":"oj-sp-emobtn-disabled oj-button-sm",chroming:"callToAction",onojAction:this._primaryAction,disabled:i},t))}openFeedback(){}componentDidUpdate(e,t){this.props.emoDisplay===e.emoDisplay&&this.props.disabled===e.disabled||this.setState({emoButtonEnabledState:this.isEmoButtonEnabled()})}componentDidMount(){this.screenRange.subscribe(e=>{this.setState({screenRange:e})})}_createLocalStorageKey(){const e=window.faConfig&&window.faConfig.APPL_SESSION_ID?window.faConfig.APPL_SESSION_ID:"",t=`${window.location.host}_${e}_FND-userInfo`,i=JSON.parse(localStorage.getItem(t)||JSON.stringify({}));return`_${(null==i?void 0:i.userName)?i.userName:""}_${window.location.hostname}_${window.location.pathname}`}telemetryComponentEvent(e,t){return this.oTelcontext.setValue(u,e),this.tracer.startActiveSpan("onSpAction",{},this.oTelcontext,t)}};h.defaultProps=Object.assign({},c),h._metadata={properties:{label:{type:"string"},emoDisplay:{type:"string",enumValues:["on","off"]},disabled:{type:"boolean"},pageVersion:{type:"string"},feedback:{type:"object",properties:{assistivePosition:{type:"string",enumValues:["start","end"]},acknowledgmentMessage:{type:"string"},customFeedback:{type:"Array<object>"}}},displayOption:{type:"string",enumValues:["button","text"]}},events:{spAction:{},spFeedbackAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]},methods:{openFeedback:{}}},h=__decorate([(0,n.customElement)("oj-sp-primary-action-feedback"),__metadata("design:paramtypes",[Object])],h),t.PrimaryActionFeedback=h})),define("oj-sp/primary-action-feedback/loader",["require","exports","./primary-action-feedback"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryActionFeedback=void 0,Object.defineProperty(t,"PrimaryActionFeedback",{enumerable:!0,get:function(){return i.PrimaryActionFeedback}})})),define("text!oj-sp/timestamp/component.json",[],(function(){return'{"name":"timestamp","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","subcomponentType":"packPrivate","displayName":"Provides interval between the actions","description":"Provides time interval between the actions","dependencies":{"oj-sp-common-util":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"properties":{"value":{"type":"string","displayName":"Timestamp Value","description":"The date and time will be displayed"},"options":{"displayName":"Timestamp Options","description":"The callback function for the date and time will be captured","type":"function | null"},"interval":{"displayName":"Time Interval","description":"Sets interval between the display relative time","type":"string"}},"methods":{},"events":{},"slots":{},"extension":{"catalog":{"status":"Pre-production","tags":["oj-sp","Redwood","Early-Adopter","timestamp"],"docUrl":"http://design.oraclecorp.com/time-stamp"},"vbdt":{}}}'})),define("text!oj-sp/timestamp/timestamp-view.html",[],(function(){return'<html><head></head><body><span :id="[[ uid + \'_timestamp\' ]]"><oj-bind-text value="[[timeStamp()]]"></oj-bind-text></span></body></html>'})),define("oj-sp/timestamp/timestamp-callbackhelper",[],(function(e,t){const i="relative",o="absolute",s="auto",a="long";return class{constructor(){this._locales=e,this._options=t,this._DAY_COUNTS=[31,28,31,30,31,30,31,31,30,31,30,31],this._RECENT_ABSOLUTE_OPTS={weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},this._FULL_ABSOLUTE_OPTS={year:"numeric",weekday:"short",month:"short",day:"numeric",hour:"numeric",hour12:!1},this._DISTANT_ABSOLUTE_OPTS={year:"numeric",month:"short",day:"numeric"}}format(e,t){const o=this.checkFormat(e,t);return o.type===i&&Intl.RelativeTimeFormat?{type:o.type,value:new Intl.RelativeTimeFormat(this._locales,o.options).format(o.value,o.unit)}:{type:o.type,value:new Intl.DateTimeFormat(this._locales,o.options).format(e)}}checkFormat(e,t){t=t||new Date;const i=this._getOffsets(e,t),o=this._getDefaultComputedOptions(e,t,i);return this._options&&"function"==typeof this._options?this._options(e,t,o,i):o}_getDefaultComputedOptions(e,t,n){if(Math.abs(n.days)>2||!Intl.RelativeTimeFormat){let e;switch(Math.abs(n.years)){case 0:e=this._RECENT_ABSOLUTE_OPTS;break;case 1:e=this._FULL_ABSOLUTE_OPTS;break;default:e=this._DISTANT_ABSOLUTE_OPTS}return{type:o,options:e}}let r,l;const d={style:a,numeric:s};return 0===n.minutes?(r=n.seconds,l="seconds"):0===n.hours?(r=n.minutes,l="minutes"):Math.abs(n.hours)<24?(r=n.hours,l="hours"):(r=n.days,l="days"),{type:i,value:r,unit:l,options:d}}_getOffsets(e,t){const i=Math.trunc((e.getTime()-t.getTime())/1e3),o=Math.trunc(i/60),s=Math.trunc(o/60),a=this.getDays(e,t),n=Math.trunc(a/7),r=this._getMonths(t.getFullYear(),t.getMonth(),t.getDate(),e.getFullYear(),e.getMonth(),e.getDate());return{seconds:i,minutes:o,hours:s,days:a,weeks:n,months:r,years:Math.trunc(r/12)}}isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}dayOfYear(e){const t=new Date(e.getFullYear(),0,0),i=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}totalDays(e){const t=e.getFullYear()-1;return t*(this.isLeapYear(t)?366:365)+this.dayOfYear(e)}getDays(e,t){return this.totalDays(e)-this.totalDays(t)}_getMonths(e,t,i,o,s,a){let n=12*(o-e)+s-t;return n>0&&a<i?this._isLastDayOfMonth(a,s,o)||(n-=1):n<0&&a>i&&(this._isLastDayOfMonth(i,t,e)||(n+=1)),n}_isLastDayOfMonth(e,t,i){return e===this._DAY_COUNTS[t]+(1===t&&this.isLeapYear(i)?1:0)}}})),define("oj-sp/timestamp/timestamp-viewModel",["require","exports","knockout","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","./timestamp-callbackhelper","ojs/ojknockout","ojs/ojmenu"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampModel=void 0;t.TimestampModel=class{constructor(e){this.calculateDate=()=>new Date(this.val()),this.title=()=>{const e=o.getCurrentLocale&&(0,o.getCurrentLocale)()?(0,o.getCurrentLocale)():void 0;return new Intl.DateTimeFormat(e,this.fullOptions).format(new Date(this.val()))},this.timeoutFunction=()=>{Math.floor(Math.abs(Date.now()-this.valDate())/36e5)<24&&setTimeout(()=>{this.val.valueHasMutated(),this.timeoutFunction()},1e3*this.interval())},this.formatLastUpdated=()=>{let e;const t=o.getCurrentLocale&&(0,o.getCurrentLocale)()?(0,o.getCurrentLocale)():void 0,i=new n(t,this.options()).format(new Date(this.val())),s=i.type,r=i.value;return"absolute"===s?e=a.applyParameters(this.res().lastUpdateDate,{date:r}):"relative"===s&&(e="now"===i.value?this.res().updatedJustNow:a.applyParameters(this.res().lastUpdateRelativeDate,{date:r})),e},this.uid=e.uniqueId,this.res=i.observable(Object.assign(Object.assign({},s),e.properties.translations)),this.val=i.observable(e.properties.value),this.ojTranslate=a,this.options=i.observable(e.properties.options),this.interval=i.observable(e.properties.interval),this.valDate=i.computed(this.calculateDate),this.ojTranslate=a,this.timeStamp=i.computed(this.formatLastUpdated),this.tsTitle=i.computed(this.title),this.fullOptions={day:"numeric",hour:"numeric",minute:"numeric",month:"long",second:"numeric",timeZoneName:"short",weekday:"long",year:"numeric"}}connected(e){this.timeoutFunction()}propertyChanged(e){"value"===e.property?this.val(e.value):"options"===e.property?this.options(e.value):"interval"===e.property&&this.interval(e.value)}}})),define("oj-sp/timestamp/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./timestamp-view.html","./timestamp-viewModel"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-timestamp",{metadata:JSON.parse(o),view:s,viewModel:a.TimestampModel})})),define("css!oj-sp/css-additions/css-additions",[],(function(){})),define("css!oj-sp/css-additions/public-css-additions",[],(function(){})),define("css!oj-sp/css-additions/shell-additions",[],(function(){})),define("oj-sp/css-additions/loader",["css!./css-additions","css!./public-css-additions","css!./shell-additions"],(function(){return new function(){}}));var __rest=this&&this.__rest||function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};define("oj-sp/header-create-edit/header-create-edit-viewModel",["require","exports","knockout","oj-sp/common-util/common-util","oj-sp/common-util/mobileVerticalSwipeHandler","oj-sp/common/EventDispatcher","oj-sp/common/headerCommonAPI","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojanimation","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojcontext","ojs/ojlogger","ojs/ojtranslation","oj-sp/common/positionUtility","oj-sp/common/private/positionUtilityEnums","ojs/ojresponsiveutils","oj-sp/primary-action-feedback/loader","oj-sp/timestamp/loader","ojs/ojavatar","ojs/ojconveyorbelt","ojs/ojknockout","ojs/ojmenu","ojs/ojtoolbar","oj-sp/css-additions/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreateEditViewModel=void 0;const f=600,b=1024,v=1440;var j;!function(e){e.ALL="all",e.NONE="none"}(j||(j={}));t.HeaderCreateEditViewModel=class{constructor(e){var t;this.parent=!0,this.next=!1,this.inFlow=!1,this.primaryActionHandler=e=>{a.EventDispatcher.dispatch("spPrimaryAction",this.composite,e.detail)},this.feedbackActionHandler=e=>{a.EventDispatcher.dispatch("spFeedbackAction",this.composite,e.detail)},this.cancelHandler=e=>{a.EventDispatcher.dispatch("spCancel",this.composite,void 0)},this.goToParentHandler=e=>{e.preventDefault(),a.EventDispatcher.dispatch("spGoToParent",this.composite,void 0)},this.inFlowBackHandler=e=>{a.EventDispatcher.dispatch("spInFlowBack",this.composite,void 0)},this.nextHandler=e=>{a.EventDispatcher.dispatch("spNext",this.composite,void 0)},this.saveHandler=e=>{a.EventDispatcher.dispatch("spSave",this.composite,void 0)},this.menuHandler=e=>{var t,i,o;const s=null===(t=e.detail)||void 0===t?void 0:t.selectedValue,n=null==s?void 0:s.split(this.uid)[0],r=n===a.EventDispatcher.SECONDARY_ACTION_EVENT_NAME?{secondaryItem:null==s?void 0:s.split(this.uid)[1]}:void 0;"spPrimaryAction"===n&&"click"===(null===(o=null===(i=e.detail)||void 0===i?void 0:i.originalEvent)||void 0===o?void 0:o.type)?e.preventDefault():a.EventDispatcher.dispatch(n,this.composite,r)},this.secondaryActionHandler=e=>{const t={secondaryItem:e.target.dataset.secondaryActionId};a.EventDispatcher.dispatch(a.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,t)},this.processDisplayOptions=e=>{e?("on"===e.save?(this.saveIsOn(!0),this.saveDisabled(!1)):"off"===e.save?(this.saveIsOn(!1),this.saveDisabled(!0)):(this.saveIsOn(!0),this.saveDisabled(!0)),"on"===e.next?(this.nextIsOn(!0),this.next=!0,this.nextConfigured(!0)):"off"===e.next?(this.nextIsOn(!1),this.next=!1,this.nextConfigured(!0)):(this.nextIsOn(!1),this.next=!1,this.nextConfigured(!1)),e.feedback&&"on"===e.feedback?this.emobuttonEnabled(e.feedback):e.feedback&&"off"!==e.feedback||this.emobuttonEnabled(null),!0===e.goToParent?this.parent=!0:this.parent=!1,!0===e.inFlowBack?this.inFlow=!0:this.inFlow=!1,this.inFlowBackVisible(e.inFlowBack),this.goToParentVisible(e.goToParent),this.contextualInfoLabelVisible(e.contextualInfoLabel)):(this.parent=!0,this.next=!1,this.saveIsOn(!1),this.nextIsOn(!1),this.goToParentVisible(!0),this.inFlowBackVisible(!1),this.contextualInfoLabelVisible(!1))},this.processAvatar=e=>{e?(this.avatarInitials(e.initials),this.avatarSrc(e.src),this.avatarVisible(!(!e.initials&&!e.src))):(this.avatarInitials(null),this.avatarSrc(null),this.avatarVisible(!1))},this.processFeedback=e=>{const t=this.setBusyResolve({description:"header-create-edit: propertyChanged - feedback"});"on"===this.emobuttonEnabled()&&(this.customFeedback(null==e?void 0:e.customFeedback),this.acknowledgmentMessage(null==e?void 0:e.acknowledgmentMessage),this.pageVersion(null==e?void 0:e.pageVersion)),t()},this.processPageTitle=()=>{this.actualPageTitle(this.pageTitle()?this.pageTitle():this.pageTitlePlaceholder())},this.processPrimaryAction=e=>{e?(this.primaryActionDisabled(e.disabled),this.primaryActionLabel(e.label?e.label:this.res().submit)):(this.primaryActionDisabled(!0),this.primaryActionLabel(this.res().submit))},this.processSecondaryActions=e=>{if(this.secondaryActionsSet.removeAll(),e&&Object.keys(e).length>0)for(let t=0;t<e.length&&t<10;t++)"disabled"===e[t].display?e[t].disabled=!0:e[t].disabled=!1,"off"!==e[t].display&&this.secondaryActionsSet.push(e[t])},this.didHeaderResize=()=>{this.initHeaderBadge(this.properties.badge);const e=window.innerWidth,t=this.screenRange();if(e!==this.widthBeforeResize&&t!==c.SCREEN_RANGE.XL&&t!==c.SCREEN_RANGE.XXL){this.composite.querySelector(`#${this.uid}_headerToolbar`).refresh()}this.widthBeforeResize=e;const i=this.setBusyResolve({description:"Web Component Resizing"}),o=document.querySelector(`#${this.uid}_menuOverflow`),s=document.querySelector(`#${this.uid}_secondaryActionSetMenu`),a=document.querySelector(`#${this.uid}_secondaryActionSetSubMenu`);o&&o.close(),s&&s.close(),a&&a.close(),i()},this.headerSticky=e=>{var t,i;e?this.contextualInfoVisible(!(!(null===(t=this.properties.contextualInfo)||void 0===t?void 0:t.length)||!this.properties.contextualInfoSticky)):(this.contextualInfoVisible(!!(null===(i=this.properties.contextualInfo)||void 0===i?void 0:i.length)),this.fullHeaderHeight=this.spHeaderContainer.getBoundingClientRect().height+"px",this.hiddenSpaceHolder.style.height=this.fullHeaderHeight)},this.setBusyResolve=e=>p.getContext(this.composite).getBusyContext().addBusyState(e),this.getMobileButtonsContainer=()=>this.composite.querySelector(".oj-sp-header-create-edit-mobile-buttons-container"),this.handleHceMobileActionsVisibility=async e=>{const t=this.getMobileButtonsContainer();if(!t)return;const i={duration:"300ms",offsetY:"150px",persist:j.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},o={duration:"300ms",offsetY:"150px",persist:j.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},s={duration:"300ms",offsetX:"rtl"===document.dir?"-150px":"150px",persist:j.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},a=window.getComputedStyle(t,null).getPropertyValue("bottom");if(e){if(t&&t.classList.contains("oj-helper-hidden"))return;t&&await l.slideOut(t,i),t.classList.add("oj-helper-hidden")}else{if(t&&!t.classList.contains("oj-helper-hidden"))return;t.classList.remove("oj-helper-hidden"),"0px"===a?this.tagsSlideInAnimation(t,o):this.tagsSlideInAnimation(t,s)}},this.tagsSlideInAnimation=async(e,t)=>{await l.slideIn(e,t)},this.addSwipeHandlerForMobile=()=>{this.mobileNavigationBarHandler=new s.MobileVerticalSwipeHandler,this.mobileNavigationBarHandler.enableHandler(),this.mobileNavigationBarHandler.addEventListener(s.SWIPE_TYPE.SWIPE_UP,this.handleHceMobileActionsVisibility,!0),this.mobileNavigationBarHandler.addEventListener(s.SWIPE_TYPE.SWIPE_DOWN,this.handleHceMobileActionsVisibility,!1)},this.setHeaderBackgroundMode=async()=>{const e=await(0,n.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.background(e)},this.setHeaderSplitBackground=()=>{if(this.colorStripOnTop()){const e={bubbles:!0,detail:{globalSplitBackgroundPosition:0}};a.EventDispatcher.dispatch(a.EventDispatcher.OVERRIDE_THEME_CONFIG,document.getElementById(this.uid+"_headerContainer"),e.detail,e.bubbles)}else(0,n.evaluateHeaderSplitBackground)(this.composite,document.getElementById(this.uid+"_headerContainer"))},this.getHeaderContainerWidthRange=e=>{const t=e.scrollWidth;return t<f?y.SCREEN_RANGE.SM:t<b&&t>=f?y.SCREEN_RANGE.MD:t<v&&t>=b?y.SCREEN_RANGE.LG:t>=v?y.SCREEN_RANGE.XL:void 0};p.getContext(e.element);const u=this.setBusyResolve({description:"Web Component Startup - Waiting for data"});this.ojTranslate=h,this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties;const m=this.properties.translations||{},{inFlowBack:g=""}=m,A=__rest(m,["inFlowBack"]);this.res=i.observable(Object.assign(Object.assign({},r),A)),this.inFlowBackTranslationsString=i.observable(g||this.res().inFlowBack),this.uniqueComponentName=this.uid+"_header-create-edit",this.isInAppNavVisible=i.observable(!1),this.primaryActionEvent=i.observable(a.EventDispatcher.PRIMARY_ACTION_EVENT_NAME),this.saveIsOn=i.observable(!1),this.saveDisabled=i.observable(!1),this.nextIsOn=i.observable(!1),this.nextConfigured=i.observable(!1),this.goToParentVisible=i.observable(!0),this.inFlowBackVisible=i.observable(!1),this.contextualInfoLabelVisible=i.observable(!1),this.emobuttonEnabled=i.observable(),this.pageVersion=i.observable(),this.showButtonsOnTop=i.observable(),this.processDisplayOptions(this.properties.displayOptions),this.avatarInitials=i.observable(null),this.avatarSrc=i.observable(null),this.avatarVisible=i.observable(!1),this.processAvatar(this.properties.avatar),this.properties.timestamp?this.updateTime=i.observable(new Date(this.properties.timestamp).toISOString()):this.updateTime=i.observable(""),this.headerContainerWidthRange=i.observable(d.createScreenRangeObservable()()),this.contextualInfoVisible=i.observable((null===(t=this.properties.contextualInfo)||void 0===t?void 0:t.length)>0),this.actualPageTitle=i.observable(""),this.pageTitle=i.observable(e.properties.pageTitle),this.pageTitlePlaceholder=i.observable(e.properties.pageTitlePlaceholder),this.processPageTitle(),this.primaryActionLabel=i.observable(),this.primaryActionDisabled=i.observable(),this.processPrimaryAction(this.properties.primaryAction),this.customFeedback=i.observableArray(),this.acknowledgmentMessage=i.observable(),this.processFeedback(this.properties.feedback),this.isSticky=i.observable(!1),this.screenRange=d.createScreenRangeObservable(),this.isSmallScreen=i.pureComputed(()=>c.compare(this.headerContainerWidthRange(),y.SCREEN_RANGE.SM)<=0,this),this.isMediumScreen=i.pureComputed(()=>this.headerContainerWidthRange()===y.SCREEN_RANGE.MD,this),this.isMediumScreenAndAbove=i.pureComputed(()=>c.compare(this.headerContainerWidthRange(),y.SCREEN_RANGE.MD)>=0,this),this.isLargeScreenAndAbove=i.pureComputed(()=>c.compare(this.headerContainerWidthRange(),y.SCREEN_RANGE.LG)>=0,this),this.secondaryActionsSet=i.observableArray(),this.secondaryActionEvent=i.observable(a.EventDispatcher.SECONDARY_ACTION_EVENT_NAME),this.processSecondaryActions(this.properties.secondaryActions),this.badgeVisible=i.observable(!1),this.badgeClass=i.observable(""),this.initHeaderBadge(this.properties.badge),this.mobileDevice=i.observable((0,o.checkMobile)()),this.isSticky.subscribe(this.headerSticky),this.background=i.observable((0,n.getInitialMode)(this.properties.displayMode)),this.colorStripOnTop=i.observable(this.composite.classList.contains("oj-sp-internal-color-strip-on-top")),this.askOracleIsVisible=i.observable();document.querySelector("oj-sp-ask-oracle")?this.askOracleIsVisible(!0):this.askOracleIsVisible(!1),this.isHeaderInitialized=!1,this.createResizeObserver(),u()}handleResponsiveState(){const e=this.getHeaderContainerWidthRange(this.spHeader);this.headerContainerWidthRange(e)}activated(e){u.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){u.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55"),this.isInAppNavVisible((0,o.isInAppNavExistsInDOM)()),this.isHeaderInitialized&&this.setHeaderSplitBackground(),this.initHeader(),this.showButtonsOnTop(this.getButtonsAlignment()),this.addSwipeHandlerForMobile(),this.intializeObserver()}bindingsApplied(e){u.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.isHeaderInitialized=!0),this.initHeader(),this.showButtonsOnTop(this.getButtonsAlignment())}propertyChanged(e){u.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55");const t=this.setBusyResolve({description:"header-create-edit: propertyChanged"});if("feedback"===e.property&&e.value&&this.processFeedback(e.value),"displayOptions"===e.property&&e.value&&this.processDisplayOptions(e.value),"avatar"===e.property&&e.value&&this.processAvatar(e.value),"pageTitle"===e.property&&(this.pageTitle(e.value),this.processPageTitle()),"pageTitlePlaceholder"===e.property&&(this.pageTitlePlaceholder(e.value?e.value:"New Page"),this.processPageTitle()),"primaryAction"===e.property&&this.processPrimaryAction(e.value),"contextualInfo"===e.property&&this.contextualInfoVisible(e.value&&e.value.length>0),"secondaryActions"===e.property&&this.processSecondaryActions(e.value),"translations"===e.property){const t=e.value||{},{inFlowBack:i=""}=t,o=__rest(t,["inFlowBack"]);this.inFlowBackTranslationsString(i||this.res().inFlowBack),this.res(Object.assign(Object.assign({},r),o))}"badge"===e.property&&this.initHeaderBadge(e.value),"timestamp"===e.property&&(e.value?this.updateTime(new Date(e.value).toISOString()):this.updateTime("")),"displayMode"===e.property&&this.setHeaderBackgroundMode(),this.showButtonsOnTop(this.getButtonsAlignment()),t()}disconnected(e){var t;u.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),m.PositionUtility.unsubscribe({componentName:this.uniqueComponentName}),window.removeEventListener("resize",this.didHeaderResize),null===(t=this.mobileNavigationBarHandler)||void 0===t||t.removeHandler(),this.resizeHeaderObserver.disconnect()}openFeedback(){const e=this.setBusyResolve({description:"header-create-edit: openFeedback"});if(this.properties.displayOptions.feedback){this.composite.querySelector("oj-sp-primary-action-feedback").openFeedback()}e()}createResizeObserver(){this.resizeHeaderObserver=new ResizeObserver(e=>requestAnimationFrame(()=>{for(const t of e)if(t.target===this.spHeaderContainer){this.isSticky()||this.headerSticky(this.isSticky());if(t.contentRect.width>0){(0,o.throttle)(this,this.handleResponsiveState,100)()}}}))}intializeObserver(){this.resizeHeaderObserver.observe(this.spHeaderContainer)}initHeader(){var e,t,i;if(this.hiddenSpaceHolder=null!==(e=this.hiddenSpaceHolder)&&void 0!==e?e:this.composite.querySelector(".oj-sp-header-create-edit-hidden-space-holder"),this.spHeader=null!==(t=this.spHeader)&&void 0!==t?t:this.composite.querySelector(".oj-sp-header-create-edit-header"),this.spHeaderContainer=this.composite.querySelector(".oj-sp-header-container"),this.spHeader&&!m.PositionUtility.isComponentSubscribed(this.uniqueComponentName)){const e={componentName:this.uniqueComponentName,component:this.spHeader,offsetCalculationSubscription:{offsetOptions:{position:"top",level:m.PositionUtility.LEVEL_MAP.header},onOffsetChange:e=>{this.spHeader.style.top=e.top+"px"}},stickinessSubscription:{onStickinessChange:e=>{const t=e.isSticky;this.spHeader.style.position=t?"sticky":"relative"}},scrollDirectionSubscription:{onScrollDirectionChange:e=>{const t=this.isSticky();!t&&e.scrollDirection===g.SCROLL_DIRECTION.DOWN&&document.documentElement.scrollTop>=this.spHeaderContainer.getBoundingClientRect().height&&this.composite.getBoundingClientRect().top<=0?this.isSticky(!0):t&&e.scrollDirection===g.SCROLL_DIRECTION.UP&&this.isSticky(!1)}}};m.PositionUtility.subscribe(e)}this.paddingStyle=null!==(i=this.paddingStyle)&&void 0!==i?i:getComputedStyle(this.composite.querySelector(".oj-sp-header-create-edit-spacing-container")),this.widthBeforeResize=window.innerWidth,window.addEventListener("resize",this.didHeaderResize)}initHeaderBadge(e){if(this.badgeVisible(e&&e.text&&e.status),this.badgeVisible()){let t="oj-badge";["danger","warning","success","info"].indexOf(e.status)>-1&&(t+=" oj-badge-"+e.status),this.badgeClass(t)}else this.badgeClass("")}getButtonsAlignment(){let e=2;return this.saveIsOn()&&e++,this.nextIsOn()&&e++,this.avatarVisible()&&e++,this.secondaryActionsSet().length&&e++,e>=4}}})),define("css!oj-sp/header-create-edit/header-create-edit-styles",[],(function(){})),define("css!oj-sp/fa-css/fa-css-additions",[],(function(){})),define("oj-sp/header-create-edit/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./header-create-edit-view.html","./header-create-edit-viewModel","css!./header-create-edit-styles","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-header-create-edit",{metadata:JSON.parse(o),view:s,viewModel:a.HeaderCreateEditViewModel})})),define("oj-sp/advanced-create-edit/advanced-create-edit-viewModel",["require","exports","knockout","oj-sp/common/EventDispatcher","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","oj-sp/header-create-edit/loader","ojs/ojknockout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;const r="background: #222; color: #bada55";t.ViewModel=class{constructor(e){var t;this.primaryActionHandler=e=>{o.EventDispatcher.dispatch("spPrimaryAction",this.composite,e.detail)},this.saveHandler=e=>{o.EventDispatcher.dispatch("spSave",this.composite,void 0)},this.cancelHandler=e=>{o.EventDispatcher.dispatch("spCancel",this.composite,void 0)},this.onContextualInfoChanged=e=>{this.contextualInfo(e&&e.length>4?e.slice(0,4):e)},this.onScroll=e=>{this.destroyMutationObserver(),this.updateMainContentHeight()},this.updateMainContentHeight=()=>{window.requestAnimationFrame(()=>{const e=this.composite.querySelector("#main-detail-slots"),t=this.composite.querySelector(".oj-sp-header-create-edit-header-strip"),i=this.composite.querySelector(".oj-sp-advanced-create-edit-mobile-bottom-container"),o=i?i.getBoundingClientRect().height:0,s=t&&t.getBoundingClientRect().bottom>0?t.getBoundingClientRect().bottom:0,a=window.innerHeight-s-o;e.style.minHeight=a+"px"})},this.responsivePaddingHandler=()=>{this.composite&&("on"===this.respPadding()?this.composite.classList.add("oj-sp-responsive-paddings-on"):this.composite.classList.remove("oj-sp-responsive-paddings-on"))},this.processPrimaryAction=e=>{e?(this.primaryActionDisabled(e.disabled),this.primaryActionLabel(e.label?e.label:this.res().submit)):(this.primaryActionDisabled(!0),this.primaryActionLabel(this.res().submit))},this.processSaveOptions=e=>{e?"on"===e.save?(this.saveIsOn(!0),this.saveDisabled(!1)):"off"===e.save?(this.saveIsOn(!1),this.saveDisabled(!0)):(this.saveIsOn(!0),this.saveDisabled(!0)):this.saveIsOn(!1)};const n=a.getContext(e.element).getBusyContext();this.busyResolve=n.addBusyState({description:"Web Component Startup - Waiting for data"}),this.slotCounts=e.slotCounts,this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=i.observable(Object.assign(Object.assign({},s),this.properties.translations)),this.contextualInfo=i.observableArray(),this.onContextualInfoChanged(this.properties.contextualInfo),this.primaryActionLabel=i.observable(),this.primaryActionDisabled=i.observable(),this.processPrimaryAction(this.properties.primaryAction),this.saveIsOn=i.observable(),this.saveDisabled=i.observable(!1),this.processSaveOptions(this.properties.displayOptions),this.headerAvatar=i.computed(()=>this.properties.avatar?Object.assign({},this.properties.avatar):void 0),this.headerTranslations=i.computed(()=>Object.assign({},this.properties.translations)),this.respPadding=i.observable((null===(t=this.properties)||void 0===t?void 0:t.displayOptions)&&"on"===this.properties.displayOptions.responsivePadding?"on":"off"),this.busyResolve()}activated(e){n.log(`%c CCA ${this.uid} activated`,r)}connected(e){n.log(`%c CCA ${this.uid} connected`,r),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onScroll)}bindingsApplied(e){n.log(`%c CCA ${this.uid} bindingsApplied`,r),this.responsivePaddingHandler(),this.initMutationObserver()}propertyChanged(e){n.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,r),"contextualInfo"===e.property&&e.value&&this.onContextualInfoChanged(e.value),"displayOptions"===e.property&&e.value&&(e.value.responsivePadding&&(this.respPadding("on"===e.value.responsivePadding?"on":"off"),this.responsivePaddingHandler()),e.value.save&&this.processSaveOptions(e.value)),"primaryAction"===e.property&&e.value&&this.processPrimaryAction(e.value)}disconnected(e){n.log(`%c CCA ${this.uid} disconnected`,r),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll),this.destroyMutationObserver()}initMutationObserver(){this.destroyMutationObserver();const e=this.composite.querySelector("oj-sp-header-create-edit");this.mutationObserver=new MutationObserver(()=>this.updateMainContentHeight()),this.mutationObserver.observe(e,{attributes:!0,childList:!0,subtree:!0})}destroyMutationObserver(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}}})),define("css!oj-sp/advanced-create-edit/advanced-create-edit-styles",[],(function(){})),define("oj-sp/advanced-create-edit/loader",["require","exports","ojs/ojcomposite","text!./advanced-create-edit-view.html","text!./component.json","./advanced-create-edit-viewModel","css!./advanced-create-edit-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-advanced-create-edit",{metadata:JSON.parse(s),view:o,viewModel:a.ViewModel})})),define("text!oj-sp/analytics-canvas/analytics-canvas-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-analytics-canvas-panel oj-flex"role="group"data-oj-context=""><oj-bind-if test="[[!oacReady()]]"><div class="oj-sp-analytics-canvas-designtime-marker"><p><oj-bind-text value="Config Placeholder"></oj-bind-text></p></div></oj-bind-if><oj-bind-if test="[[oacReady()]]"><oracle-dv class="oj-flex-item"project-path="[[$properties.projectPath]]"active-page="[[$properties.activePage]]"active-tab-id="[[$properties.activeTabId]]"project-options="[[oacProjectOptions()]]"compatibility-mode="[[oacCompatibilityMode()]]"filters="[[oacFilters]]"></oracle-dv></oj-bind-if></div></body></html>'})),define("text!oj-sp/analytics-canvas/component.json",[],(function(){return'{"name":"analytics-canvas","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","dependencies":{"oj-sp-common":"2404.0.0"},"implements":["SpAnalyticsCanvasElement"],"displayName":"Analytics Canvas","description":"The Analytics Canvas lets you embed content created in Oracle Analytic Cloud in the Dashboard Landing Page template.","type":"composite","properties":{"host":{"type":"string","displayName":"Oracle Analytics Host","description":"The host URL for the analytics embedding script.","propertyGroup":"common","required":true},"projectPath":{"type":"string","displayName":"Project Path","description":"The repository path of the project that you want to render.","propertyGroup":"common","required":true},"activePage":{"type":"string","displayName":"Display Page","description":"Specifies whether a canvas or insight other than the default is rendered.","propertyGroup":"common","value":"canvas","enumValues":["canvas","insight"],"propertyEditorValues":{"canvas":{"displayName":"Canvas","description":"canvas"},"insight":{"displayName":"Insight","description":"insight"}}},"activeTabId":{"type":"string","displayName":"Display Tab","description":"The ID of the canvas or the story page that youâre showing.","propertyGroup":"common","value":"1"},"compatibilityMode":{"type":"string","displayName":"Compatibility Mode","description":"Configuration to handle Jet version compatibility with embedded OAC content. In yes and auto mode, If a difference in major version of JET is detected then an iframe will be created to sandbox the embedded OAC content.","propertyGroup":"common","value":"no","enumValues":["no","yes","auto"],"propertyEditorValues":{"no":{"displayName":"No","description":"This is the default, don\'t create an iframe."},"yes":{"displayName":"Yes","description":"This will always create an iframe to sandbox the embedded OAC canvas."},"auto":{"displayName":"Auto","description":"Create an iframe if a different major version of JET is detected between Visual Builder and OAC."}}},"displayOptions":{"displayName":"Display Options","description":"Configure display options of analytics canvas.","type":"object|null","properties":{"showFilterBar":{"type":"boolean","displayName":"Show filter bar","propertyGroup":"common","value":false},"disableMobileLayout":{"type":"boolean","displayName":"Disable mobile layout","propertyGroup":"common","value":false}}},"attributeDefinitions":{"displayName":"Attribute Definitions","description":"Array of data columns from OAC","type":"Array<object>","propertyGroup":"data","extension":{"vbdt":{"itemProperties":{"attribute":{"type":"string","displayName":"Attribute Name","description":"Specifies the name of the column to filter."},"columnFormula":{"type":"string","displayName":"Column Formula","description":"Specifies the three-part formula of the column to filter."},"attributeType":{"type":"string","displayName":"Attribute Type","description":"Specifies the type of the column to filter.","enumValues":["date","double","number","string"],"propertyEditorValues":{"date":{"displayName":"Date","description":"Date column."},"double":{"displayName":"Double","description":"Double column."},"number":{"displayName":"Number","description":"Numeric column."},"string":{"displayName":"String","description":"String column."}}}}}}},"filters":{"displayName":"Filters","description":"Allows the programmatic passing of filter values.","type":"Array<object>","propertyGroup":"data","extension":{"vbdt":{"itemProperties":{"attribute":{"type":"string","displayName":"Attribute Name","description":"Specifies attribute name to filter."},"op":{"type":"string","displayName":"Operator","description":"Specifies filter operator.","enumValues":["$and","$or","$lt","$le","$gt","$ge","$eq","$ne"],"propertyEditorValues":{"and":{"displayName":"And","description":"is only a match if both expressions evaluate to true"},"or":{"displayName":"Or","description":"is a match if either expression evaluates to true"},"lt":{"displayName":"Less than","description":"is less than a number"},"le":{"displayName":"Less Than Or Equal To","description":"is less than or equal to a number"},"gt":{"displayName":"Greater than","description":"is greater than a number"},"ge":{"displayName":"Greater Than Or Equal To","description":"is greater than or equal to a number"},"eq":{"displayName":"Equal","description":"attribute and operator values must be identical for a match"},"ne":{"displayName":"Not Equal","description":"attribute and operator values are not identical."}}},"criteria":{"type":"any[]","displayName":"Filter criteria","description":"Array of filters on which to apply the operator."},"value":{"type":"any","displayName":"Value","description":"Specifies the value to filter for."}}}}}},"methods":{},"events":{"spDataAction":{"displayName":"Data action event","description":"Generic DV Event published from an embedded data visualization.","cancelable":false,"eventGroup":"common","detail":{"eventName":{"description":"The name of the published BI Event","type":"string"},"payload":{"description":"The payload contains context and related information to the event published","type":"object"}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Analytics","tags":["Redwood","Early-Adopter"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Analytics%20Canvas%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectraanalyticscanvas.html","coverImage":"extension/catalog/images/dashboard-landing-page-template.svg"}},"icon":{"iconPath":"extension/catalog/images/dashboard-landing-page-template.svg"}}'})),define("oj-sp/analytics-canvas/analytics-canvas-viewModel",["require","exports","oj-sp/common/EventDispatcher","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojbutton","ojs/ojcomposite","ojs/ojcore","ojs/ojformlayout","ojs/ojknockout","ojs/ojselector"],(function(e,t,i,o,s,a,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsCanvasViewModel=void 0,define("promise",[],()=>({})),function(e){e.NUMBER="number",e.STRING="string",e.DOUBLE="double",e.DATE="date"}(r||(r={}));const l="background: #222; color: #bada55";class d{constructor(t){this.getOACApplication=e=>new Promise(t=>{this.loadResolver=t;const i=document.getElementById(d.OAC_SCRIPT_ID);if(i)i.addEventListener("load",this.loadCallback);else{const t=document.createElement("script");t.addEventListener("load",this.loadCallback),t.id=d.OAC_SCRIPT_ID,t.src=e+"/public/dv/v1/embedding/jet/embedding.js?IDCS_OAUTH3LEGGED=true",document.body.append(t)}}),this.loadCallback=()=>{e(["obitech-application/application","ojs/ojcore","ojs/ojknockout","ojs/ojcomposite","jet-composites/oracle-dv/loader"],e=>{this.busyResolve(),this.loadResolver(e),delete this.loadResolver;const t=document.getElementById(d.OAC_SCRIPT_ID);t&&document.body.removeChild(t)})},this.processDisplayOptions=e=>{e&&this.oacProjectOptions({bDisableMobileLayout:!!e.disableMobileLayout,bShowFilterBar:!!e.showFilterBar})},this.processCompatibilityMode=e=>{if(e){if("yes"===e||"auto"===e||"no"===e)return void this.oacCompatibilityMode(e);a.error(`compatibilityMode accepted value is yes, no, auto; ${e} not allowed.`)}this.oacCompatibilityMode("no")},this.simpleFilterValidator=e=>this.properties.attributeDefinitions.find(t=>t.attribute===e.attribute)?void 0!==e.value&&null!==e.value||(a.error(`Invalid value found for attribute ${e.attribute}. Filter not applied.`),!1):(a.error(`Could not find a definition for the filter attribute ${e.attribute}. Filter not applied.`),!1),this.compoundFilterValidator=e=>{const t=e.criteria,i=t.map(e=>e.attribute).every(e=>e===t[0].attribute),o=this.properties.attributeDefinitions.find(e=>e.attribute===t[0].attribute),s=t.find(e=>void 0===e.value||null===e.value);return i?o?!s||(a.error(`Undefined value found for attribute ${s.attribute} in filter criteria. Filter not applied.`),!1):(a.error(`Could not find a definition for the filter attribute ${t[0].attribute}. Filter not applied.`),!1):(a.error("Invalid set of attributes specified in filter criteria. Filter not applied."),!1)},this.parseCompoundFilter=e=>e.includes("$ge")&&e.includes("$le")&&2===e.length?{value:"between"}:e.filter(e=>"$ne"===e).length>0&&e.every(t=>t===e[0])?{value:"notIn"}:null,this.processCompoundOperator=e=>{const t=e.criteria,i=e.criteria.map(e=>e.op),o=this.properties.attributeDefinitions.find(e=>e.attribute===t[0].attribute),s={$and:this.parseCompoundFilter(i),$or:i.filter(e=>"$eq"===e).length>0&&i.every(e=>e===i[0])?{value:"in"}:null};if(!(e.op in s)||!s[e.op])return void a.error("There was a problem with the specified operators, please check your filter definition. Filter not applied.");return{aCodeValues:o.attributeType===r.DOUBLE?t.map(e=>e.value):[],aDisplayValues:o.attributeType!==r.DOUBLE?t.map(e=>e.value):[],bIsDoubleColumn:o.attributeType===r.DOUBLE,isDateCol:o.attributeType===r.DATE,isNumericCol:o.attributeType===r.NUMBER,sColFormula:o.columnFormula,sColName:t[0].attribute,sOperator:s[e.op].value}},this.processSimpleOperator=e=>{const t=this.properties.attributeDefinitions.find(t=>t.attribute===e.attribute),i={$ge:{value:"greaterOrEqual"},$gt:{value:"greater"},$lt:{value:"less"},$le:{value:"lessOrEqual"},$eq:{value:"in"},$ne:{value:"notIn"},$co:null,$ew:null,$pr:null,$regex:null,$sw:null};if(!(e.op in i)||!i[e.op])return void a.error(`The operator specified '${e.op}' is invalid. Filter not applied.`);return{aCodeValues:t.attributeType===r.DOUBLE?[e.value]:[],aDisplayValues:t.attributeType!==r.DOUBLE?[e.value]:[],bIsDoubleColumn:t.attributeType===r.DOUBLE,isDateCol:t.attributeType===r.DATE,isNumericCol:t.attributeType===r.NUMBER,sColFormula:t.columnFormula,sColName:e.attribute,sOperator:i[e.op].value}},this.isCompoundFilter=e=>void 0!==e.op&&"criteria"in e&&e.criteria.length>0,this.isSimpleFilter=e=>void 0!==e.op&&void 0!==e.attribute,this.processFilters=e=>{if(!e)return;if(!this.properties.attributeDefinitions||0===this.properties.attributeDefinitions.length)return void a.error("Could not find a value for attributeDefinitions property. Filters not applied.");const t=[];for(let i=0;i<e.length;++i)if(this.isCompoundFilter(e[i])){if(this.compoundFilterValidator(e[i])){const o=this.processCompoundOperator(e[i]);o&&t.push(o)}}else if(this.isSimpleFilter(e[i])){if(this.simpleFilterValidator(e[i])){const o=this.processSimpleOperator(e[i]);o&&t.push(o)}}else a.error("Filter format not supported. Please check your definition.");this.oacFilters.removeAll(),this.oacFilters(t)},this.dataActionHandler=e=>{i.EventDispatcher.dispatch("spDataAction",this.composite,e.detail),e.preventDefault()},this.properties=t.properties;const l=s.getContext(t.element).getBusyContext();this.busyResolve=l.addBusyState({description:"Web Component Startup - Waiting for data"}),this.screenRange=n.createScreenRangeObservable(),this.screenRange.subscribe(e=>{this.isSmallScreen("sm"===e)}),this.isSmallScreen=o.observable("sm"===this.screenRange()),this.composite=t.element,this.uid=t.uniqueId,this.oacProjectOptions=o.observable({bDisableMobileLayout:!1,bShowFilterBar:!1}),this.oacFilters=o.observableArray(),this.properties&&this.processDisplayOptions(this.properties.displayOptions),this.properties.filters&&this.processFilters(this.properties.filters),o.bindingHandlers.ojComponent||(o.bindingHandlers.ojComponent=o.bindingHandlers.__ojComponentPrivate),this.oacApplicationReady=o.observable(!1),this.oacProjectConfigured=o.observable(!1),this.oacReady=o.pureComputed(()=>this.oacApplicationReady()&&this.oacProjectConfigured(),this),this.oacCompatibilityMode=o.observable("no"),this.properties&&this.properties.compatibilityMode&&this.processCompatibilityMode(this.properties.compatibilityMode)}activated(e){if(a.log(`%c CCA ${this.uid} activated`,l),e.properties.host&&e.properties.host.length>0)return this.oacAppPromise=this.getOACApplication(e.properties.host),this.oacAppPromise}connected(e){a.log(`%c CCA ${this.uid} connected`,l),this.composite.addEventListener("oracle.bitech.dataaction",this.dataActionHandler)}bindingsApplied(e){a.log(`%c CCA ${this.uid} bindingsApplied`,l),this.oacAppPromise&&this.oacAppPromise.then(e=>{e.setSecurityConfig(d.OAC_AUTH_CONFIG),this.oacApplicationReady(!0)}).catch(e=>{a.error(e)}),this.properties.projectPath&&this.properties.projectPath.length>0&&this.oacProjectConfigured(!0)}async propertyChanged(e){if("external"===e.updatedFrom)switch(e.property){case"host":void 0===e.previousValue&&this.getOACApplication(e.value).then(e=>{e.setSecurityConfig(d.OAC_AUTH_CONFIG),this.oacApplicationReady(!0)}).catch(e=>{a.error(e)});break;case"projectPath":e.value&&e.value.length>0?this.oacProjectConfigured(!0):this.oacProjectConfigured(!1);break;case"displayOptions":this.processDisplayOptions(e.value);break;case"filters":this.processFilters(e.value);break;case"compatibilityMode":this.processCompatibilityMode(e.value)}}disconnected(e){a.log(`%c CCA ${this.uid} disconnectd`,l),this.composite.removeEventListener("oracle.bitech.dataaction",this.dataActionHandler,!0)}}d.OAC_SCRIPT_ID="oj-oa-project-script",d.OAC_AUTH_CONFIG="oauth_3legged",t.AnalyticsCanvasViewModel=d})),define("css!oj-sp/analytics-canvas/analytics-canvas-styles",[],(function(){})),define("css!oj-sp/common/common-style",[],(function(){})),define("oj-sp/analytics-canvas/loader",["require","exports","ojs/ojcomposite","text!./analytics-canvas-view.html","text!./component.json","./analytics-canvas-viewModel","css!./analytics-canvas-styles","css!oj-sp/common/common-style.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-analytics-canvas",{metadata:JSON.parse(s),view:o,viewModel:a.AnalyticsCanvasViewModel})})),define("oj-sp/attachments-common/private/EndpointUtils",["require","exports","vb/helpers/rest"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointUtils=void 0;class o{static callEndpoint(e,t,i,s,a,n,r){let l=o.getEndpoint(e);const d={};Object.assign(d,t),a&&(s?d[s]=a:d[o.defaultEndpointAttachmentParamName]=a),0!==Object.keys(d).length&&(l=l.parameters(d)),i&&(l=l.initConfiguration(i)),n&&(l=l.body(n)),r&&(l=l.responseBodyFormat(r));return l.fetch()}static getEndpointUrl(e,t,i,s){let a=o.getEndpoint(e);const n={};Object.assign(n,t),i&&s&&(n[i]=s),a=a.parameters(n);return a.toUrl()}static getEndpointHeaders(e){let t={};return e&&(t=e.headers),t}static getEndpoint(e){let t=null,o=e;const s=e.indexOf(":");s>=0&&(t=e.substring(0,s),o=e.substring(s+1));let a=null;return a=t?i.get(o,{extensionId:t}):i.get(o),a}}o.defaultEndpointAttachmentParamName="AttachedDocumentId",t.EndpointUtils=o})),define("text!oj-sp/attachments-common/private/worker/AttachmentWorker.txt",[],(function(){return"/*\n** Copyright (c) 2018, 2019, Oracle and/or its affiliates. All rights reserved.\n**\n**34567890123456789012345678901234567890123456789012345678901234567890123456789\n**\n** Applcore Javascript Background Worker - Internal.\n** This worker is responsible for the upload of the file to the \n** Application Server.\n** NOTE: These API's are internal ApplCore use only.\n*/\n\"use strict\";\n\nconst MAX_CHUNK_RETRIES = 3;\n\n/**\n * Inbound communications channel event into the worker.\n * @param msgEvent the message sent to the worker.\n */\nself.onmessage = function (msgEvent)\n{\n  if (msgEvent && msgEvent.data)\n  {\n    if (msgEvent.data.action == \"stopUpload\")\n    {\n      this._stopUpload(msgEvent.data.id);\n    }\n    else if (msgEvent.data.action == \"uploadFile\") \n    {\n      if ((!!msgEvent.data.fileInfo.chunkSize) && (msgEvent.data.fileInfo.file.size > msgEvent.data.fileInfo.chunkSize))\n      {\n        this._performChunkedUpload(msgEvent.data.fileInfo);\n      }\n      else\n      {\n        this._performUpload(msgEvent.data.fileInfo);\n      }\n    }\n  }\n}\n\n/**\n * The handler to perform the file upload.\n */\nself._performUpload = function(fileInfo)\n{\n  this._log('Uploading ' + fileInfo.file.name + ' (' + fileInfo.id + ')');\n\n  var payloadData = null;\n  var contentType = null;\n  if (fileInfo.createMode === 'SPECTRA') {\n    payloadData = fileInfo.file;\n  } else {\n    if (typeof FormData == \"undefined\") {\n        var customData = _fileInfoToCustomData(fileInfo);\n        payloadData = customData[0];\n        contentType = customData[1];\n    } else {\n        payloadData = _fileInfoToFormData(fileInfo);\n    }\n  }\n\n  var worker = this;\n  var xhr = new XMLHttpRequest();\n  worker._xhr = xhr;\n  worker._fileInfo = fileInfo;\n  \n  xhr.onerror = function (evt)\n  {\n    worker._log(\"failed: An error occurred while transferring the file.\");\n    worker.postMessage({ 'type' : 'error', 'id' : fileInfo.id});\n    worker._xhr = null;\n    worker._fileInfo = null;\n  };\n  \n  xhr.onabort = function (evt)\n  {\n    worker._log(\"canceled: The transfer has been canceled by the user.\");\n    worker.postMessage({ 'type' : 'abort', 'id' : fileInfo.id});\n    worker._xhr = null;\n    worker._fileInfo = null;\n  };         \n    \n  var progressFunction = function (evt) \n  {\n    if (evt.lengthComputable) \n    {\n      var percentComplete = evt.loaded / evt.total * 100;\n      worker._log(\"Progress: \" + fileInfo.file.name + \" \" + percentComplete + \"%\");\n    }\n    else\n    {\n      // Unable to compute progress information since the total size is unknown\n      worker._log(\"progress : \" + fileInfo.file.name + \" : unable to calculate size\");\n    }\n    worker.postMessage({ 'type' : 'progress', 'id' : fileInfo.id, 'lengthComputable': evt.lengthComputable, 'loaded': evt.loaded, 'total':  evt.total});\n  };\n  try\n  {\n    xhr.upload.addEventListener(\"progress\", progressFunction);\n  }\n  catch(e)\n  {\n    xhr.addEventListener(\"progress\", progressFunction);\n  }\n  \n  xhr.onreadystatechange = function () \n  {\n    if (xhr.readyState == 0)\n    {\n      worker._log(\"onreadystatechange: unsent\");\n      worker.postMessage({ 'type' : 'unsent', 'id' : fileInfo.id});\n    }\n    else if (xhr.readyState == 1)\n    {\n      worker._log(\"onreadystatechange: opened\");\n      worker.postMessage({ 'type' : 'opened', 'id' : fileInfo.id});\n    }\n    else if (xhr.readyState == 2)\n    {\n      worker._log(\"onreadystatechange: headers received\");\n      worker.postMessage({ 'type' : 'headersReceived', 'id' : fileInfo.id, 'status': xhr.status });\n    }\n    else if (xhr.readyState == 3)\n    {\n      worker._log(\"onreadystatechange: loading: \" + xhr.responseText);   \n      worker.postMessage({ 'type' : 'loading', 'id' : fileInfo.id});\n    }\n    else if (xhr.readyState == 4)\n    {\n      worker._log(\"onreadystatechange: upload complete : \" + fileInfo.file.name + \" : \" + xhr.responseText);\n      // on abort the response will be empty.\n      if (!!this.responseText)\n      {      \n        var response = JSON.parse(this.responseText);\n        if (xhr.status == 200)\n        {\n          var data = {'downloadUrl' : response.downloadUrl};\n          worker.postMessage({ 'type' : 'uploadComplete', 'id' : fileInfo.id, 'data': data});\n        }\n        else\n        {\n          var message = null;\n          if(!!response.errorDetails && !!response.errorDetails.detail) \n          {\n            message = response.errorDetails.detail;\n          }\n          worker.postMessage({ 'type' : 'error', 'id' : fileInfo.id, 'message': message});\n        }\n        worker._xhr = null;\n        worker._fileInfo = null;\n      } else {\n          worker.postMessage({ 'type' : 'error', 'id' : fileInfo.id, 'message': 'No response text'});      \n      }\n    }\n  }\n  \n  // make the call.\n  try {\n    var endpoint = _getEndpoint(fileInfo.endpoint);\n    if (fileInfo.createMode === 'SPECTRA') {\n      xhr.open('PUT', endpoint, true);\n    } else {\n      xhr.open('POST', endpoint, true);\n    }\n    //TODO: Fix authentication\n    if (fileInfo.token) {\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + fileInfo.token);\n    }\n    if (contentType != null) {\n          xhr.setRequestHeader(\"Content-Type\", contentType);\n    }\n    // custom headers\n    if (fileInfo.headers) {\n      const headerNames = Object.getOwnPropertyNames(fileInfo.headers);\n      for (var headerIndex = 0; headerIndex < headerNames.length; headerIndex++) {\n        var headerName = headerNames[headerIndex];\n        xhr.setRequestHeader(headerName, fileInfo.headers[headerName])\n      }\n    }\n    xhr.send(payloadData);\n  } catch(e) {\n    worker._log(\"failed: An error occurred while opening the request to transfer the file. \" + e.message);\n    worker.postMessage({ 'type' : 'error', 'id' : fileInfo.id});\n    worker._xhr = null;\n    worker._fileInfo = null;    \n  }\n}\n\n/**\n * Create a FormData object and populate it with the data from fileInfo.\n * @param fileInfo object the information about the file to send to Attachments.\n * @return the populated FormData.\n */\nself._fileInfoToFormData = function(fileInfo) \n{\n  var formData = new FormData();\n  formData.append('file', fileInfo.file);\n  formData.append('filename', fileInfo.file.name);\n  formData.append('size', fileInfo.file.size);\n  formData.append('mimetype', fileInfo.mimetype);\n  formData.append('tracker', fileInfo.id);\n  formData.append('user', fileInfo.user);\n  return formData;\n}\n\n/**\n * Create a Blob populated with the data from fileInfo.\n * @param fileInfo object the information about the file to send to Attachments.\n * @return an array with the upload Blob and the content type.\n */\nself._fileInfoToCustomData = function(fileInfo) \n{\n  var boundary = \"----FndAttachBoundary\" + Date.now().toString(16);\n  var contentType = \"multipart/form-data; boundary=\" + boundary;\n  \n  boundary = \"--\" + boundary;\n  var customData = [];\n  // write the file\n  _appendResponseLine(customData, boundary);\n  _appendResponseLine(customData, \"Content-Disposition: form-data; name=\\\"file\\\"; filename=\\\"\" + fileInfo.file.name + \"\\\"\");\n  _appendResponseLine(customData, \"Content-Type: \" + fileInfo.mimetype);\n  _appendResponseLine(customData);\n  customData.push(fileInfo.file); \n  _appendResponseLine(customData);\n  \n  // write the remaining values\n  _appendFormDataValue(customData, boundary, \"filename\", fileInfo.file.name);\n  _appendFormDataValue(customData, boundary, \"size\", fileInfo.file.size);\n  _appendFormDataValue(customData, boundary, \"mimetype\", fileInfo.mimetype);\n  _appendFormDataValue(customData, boundary, \"tracker\", fileInfo.id);\n  _appendFormDataValue(customData, boundary, \"user\"  , fileInfo.user);\n  _appendResponseLine(customData, boundary + \"--\");  \n  \n  return [new Blob(customData), contentType];\n}\n\n/**\n * Add a new form data section into the body for the name/value pair.\n * @param customData array the collection to store the form data lines in.\n * @param boundary String the boundary delimiter for the form data sections.\n * @param name String the name of the form entry value.\n * @param value Object the data to embed into the form data section.\n */\nself._appendFormDataValue = function(customData, boundary, name, value) {\n    _appendResponseLine(customData, boundary);\n    _appendResponseLine(customData, \"Content-Disposition: form-data; name=\\\"\" + name + \"\\\"\");\n    _appendResponseLine(customData);\n    _appendResponseLine(customData, value);\n}\n\n/**\n * Write a line into a form data section.\n * @param customData array the collection to store the form data lines in.\n * @param value Object the contents of the line entry.\n */\nself._appendResponseLine = function(customData, value) {\n    var entry = \"\";\n    if (!!value) {\n        entry = entry + value;\n    }\n    entry = entry + '\\r\\n';\n    customData.push(entry)\n}\n\n/**\n * determine the path to the REST service.\n * @param endpoint String for the attachUpload endpoint to use.  Will check it is using attachUpload service.\n */\nself._getEndpoint = function(endpoint)\n{\n  var returnEndpoint = \"\";\n  // Example Endpoint: 'http://host:port/ContextRoot/applcoreApi/v1/attachUpload';\n  // Example Endpoint (Spectra): 'http://host:port/ContextRoot/resources/11.13.18.05/FndSimpleDocService/054af4af8ac245519a6147f78a21ba58/enclosure/FileContent'\n  if (!!endpoint && (endpoint.indexOf('applcoreApi/v1/attachUpload') > 0 || endpoint.indexOf('FndSimpleDocService/') > 0))\n  {\n    returnEndpoint = endpoint;\n  }\n  return returnEndpoint;\n}\n\n/**\n * determine the path to the REST service.\n * @param endpoint String for the attachUpload endpoint to use.  Will check it is using attachUpload service.\n */\nself._getEndpointForIndex = function(endpoints, chunkIndex)\n{\n  var returnEndpoint = \"\";\n  var endpoint = null;\n  // Example Endpoint: 'http://host:port/ContextRoot/applcoreApi/v1/attachUpload';\n  // Example Endpoint (Spectra): 'http://host:port/ContextRoot/resources/11.13.18.05/FndSimpleDocService/054af4af8ac245519a6147f78a21ba58/enclosure/FileContent'\n  if (endpoints && Array.isArray(endpoints) && chunkIndex < endpoints.length) {\n    endpoint = endpoints[chunkIndex];\n  }\n  if (!!endpoint && (endpoint.indexOf('applcoreApi/v1/attachUpload') > 0 || endpoint.indexOf('FndSimpleDocService/') > 0))\n  {\n    returnEndpoint = endpoint;\n  }\n  return returnEndpoint;\n}\n\nself._stopUpload = function (id)\n{\n  if (!!this._xhr && !!this._fileInfo && this._fileInfo.id === id) \n  {\n    this._xhr.abort();\n  }\n}\n\n/**\n * Write a log message back through the communications channel to the caller.\n */\nself._log = function(message)\n{\n  postMessage({'type':'log','logMsg':'AttachWorker:' + message});\n}\n\n/*\n * Chunked Upload Methods\n */\n\n/**\n * The handler to perform the file upload as chunks.\n */\nself._performChunkedUpload = function(fileInfo)\n{\n  this._log('Entering chunked uploading for ' + fileInfo.file.name + ' (' + fileInfo.id + ')');\n \n  var uploadInfo = this._generateChunkUploadInfoFromFileInfo(fileInfo);\n  var nextChunkPart = this._findNextChunkPartToUpload(uploadInfo);\n  this._performSingleChunkUpload(uploadInfo, nextChunkPart);\n  \n  this._log('Exiting chunked uploading ' + fileInfo.file.name + ' (' + fileInfo.id + ')');\n}\n\n/**\n * Extract the information about the file info and determine the size of the  \n * chunks and generate a structure per expected chunk.\n */\nself._generateChunkUploadInfoFromFileInfo = function(fileInfo)\n{\n  this._log('Entering generateUploadInfoFromFileInfo');\n  \n  // figure out the number of parts and the remainder size of the last chunk.\n  var partCount = fileInfo.chunkCount;\n  var lastPartSize = fileInfo.lastChunkSize;\n\n  // running totals and status\n  var currentPartStart = 0;\n  var currentPartEnd = 0;\n  var currentPartSize = 0;\n  var currentIsLast = false;\n\n  // generate the parts. \n  var parts = [];\n  for(var i=0; i < partCount; i++)\n  {\n    currentPartStart = currentPartEnd;\n    if (i == (partCount - 1))\n    {\n      // for the last part use the remainder of the size and the total file size\n      currentPartSize = lastPartSize;\n      currentPartEnd = fileInfo.file.size;\n      currentIsLast = true;\n    }\n    else\n    {\n      currentPartSize = fileInfo.chunkSize;\n      currentPartEnd = currentPartStart + currentPartSize;\n      currentIsLast = false;\n    }  \n  \n    parts.push({\n      'idx': i,\n      'start': currentPartStart,\n      'end': currentPartEnd,\n      'size': currentPartSize,\n      'last': currentIsLast,\n      'status': 'pending',\n      'uplCount': 0,\n      'tryCount': 0,\n      'errors': []\n    });\n  }\n  \n  // initialize the upload object.\n  var uploadInfo = \n  {\n    'fileInfo': fileInfo,\n    'parts': parts,\n    '_fineProgress': true\n  };  \n  \n  this._log('Exiting generateUploadInfoFromFileInfo: ' + parts.length);\n  return uploadInfo;\n}\n\n/**\n * Parse through the parts and determine what is the next one to attempt to \n * upload.\n */\nself._findNextChunkPartToUpload = function(uploadInfo)\n{\n  var nextChunk = null;\n  for (var i=0; i < uploadInfo.parts.length; i++)\n  {\n    if (uploadInfo.parts[i].status == 'pending' ||\n        uploadInfo.parts[i].status == 'error')\n    {\n      nextChunk = uploadInfo.parts[i];\n      break;\n    } \n  }\n  return nextChunk;\n}\n\n/**\n * Iterate through the parts and sum up the bytes which have been uploaded for\n * each part.\n */\nself._sumPartsUploaded = function(uploadInfo)\n{\n  var overallBytesUploaded = 0;\n  for (var i=0; i < uploadInfo.parts.length; i++)\n  {\n    overallBytesUploaded += uploadInfo.parts[i].uplCount;\n  }\n  return overallBytesUploaded;\n}\n\n/**\n * Iteratre through the parts and determine if all parts have a status\n * of complete.\n */\nself._areAllChunksComplete = function(uploadInfo)\n{\n  var allComplete = true;\n  for (var i=0; i < uploadInfo.parts.length; i++)\n  {\n    if (uploadInfo.parts[i].status != \"complete\")\n    {\n      allComplete = false;\n      break;\n    }\n  }\n  return allComplete;\n}\n\n/**\n * Convert the response into JSON.  If its not a JSON string already then it\n * will be converted into an error details JSON payload.\n */\nself._extractJsonResponse = function(responseText)\n{\n  var jsonResponse = null;\n  try\n  {\n    if (!!responseText)\n    {\n      jsonResponse = JSON.parse(this.responseText);  \n    }\n  }\n  catch(err)\n  {\n    jsonResponse = {'errorDetails': {'detail': responseText}};\n  }\n  return jsonResponse;\n}\n\n/**\n * Perform a XMLHttpRequest puload for a single chunk (currentChunk).  \n */\nself._performSingleChunkUpload = function(uploadInfo, currentChunk)\n{\n  // NOTE: the convention in this method is uploadInfo should \n  //       not be updated but the data in currentChunk object can be.\n\n  // update the chunk status to represent the start of a chunk upload.\n  currentChunk.uplCount = 0;\n  currentChunk.tryCount++;\n  currentChunk.status = 'uploading';\n\n  this._log('entering _performSingleChunkUpload ' + uploadInfo.fileInfo.file.name + ' (' + uploadInfo.fileInfo.id + ') ' + currentChunk.idx + \"/\" + (uploadInfo.parts.length - 1) + ' try:' + currentChunk.tryCount);\n\n  var chunkBytes = uploadInfo.fileInfo.file.slice(currentChunk.start, currentChunk.end);\n\n  // extract the data to send as the XMLHttpRequest payload.\n  var payloadData = null;\n  var contentType = null;\n  if (typeof FormData == \"undefined\") {\n      var customData = _chunkInfoToCustomData(uploadInfo.fileInfo, chunkBytes, currentChunk.size, currentChunk.start);\n      payloadData = customData[0];\n      contentType = customData[1];\n  } else {\n      payloadData = _chunkInfoToFormData(uploadInfo.fileInfo, chunkBytes, currentChunk.size, currentChunk.start);\n  }\n  \n  // setup the worker.\n  var worker = this;\n  var xhr = new XMLHttpRequest();\n  worker._xhr = xhr;\n  worker._uploadInfo = uploadInfo;\n  \n  xhr.onerror = function (evt)\n  {\n    worker._log(\"failed: An error occurred while transferring the chunk: \" + currentChunk.idx);\n    currentChunk.status = 'error';\n    currentChunk.errors.push(evt);\n    if (currentChunk.tryCount >= MAX_CHUNK_RETRIES)\n    {\n      worker.postMessage({ 'type' : 'error', 'id' : uploadInfo.fileInfo.id, 'errorcode':'AA_UPLOAD_CHUNK_SERVER_ERROR'});\n      worker._xhr = null;\n      worker._uploadInfo = null;\n    } \n    else\n    {\n      // not over the threshold yet so perform the upload.\n      var nextChunkPartAfterError = worker._findNextChunkPartToUpload(uploadInfo);\n      worker._performSingleChunkUpload(uploadInfo, nextChunkPartAfterError);\n    }    \n  };\n  \n  xhr.onabort = function (evt)\n  {\n    worker._log(\"canceled: The transfer has been canceled by the user: \" + currentChunk.idx);\n    worker.postMessage({ 'type' : 'abort', 'id' : uploadInfo.fileInfo.id});\n    worker._xhr = null;\n    worker._uploadInfo.fileInfo = null;\n    worker._uploadInfo.parts = null;\n  };         \n    \n  var progressFunction = function (evt) \n  {\n    // iterate through the parts and determine the amount uploaded.\n    var overallBytesUploaded = 0;\n    if (evt.lengthComputable) \n    {\n      // set the current upload parts current uploaded count based on the event\n      // and calculate the progress.\n      currentChunk.uplCount = evt.loaded;\n      overallBytesUploaded = worker._sumPartsUploaded(uploadInfo);\n      var chunkPercentComplete = evt.loaded / evt.total * 100;\n      var overallPercentComplete = overallBytesUploaded / uploadInfo.fileInfo.file.size * 100;\n      worker._log(\"Progress: \" + uploadInfo.fileInfo.file.name + \"(\" + currentChunk.idx + \"/\" + (uploadInfo.parts.length - 1) + \") \" + chunkPercentComplete + \"% - \" + overallPercentComplete + \"%\");\n    }\n    else\n    {\n      // Unable to compute progress information since the total size is unknown\n      worker._log(\"progress : \" + fileInfo.file.name + \" (\" + currentChunk.idx + \"/\" + (uploadInfo.parts.length - 1) + \"): unable to calculate size\");\n    }\n    \n    // send a message back to the UI with the percentage.\n    if (uploadInfo._fineProgress)\n    {\n      worker.postMessage({ 'type' : 'progress', 'id' : uploadInfo.fileInfo.id, 'lengthComputable': evt.lengthComputable, 'loaded': overallBytesUploaded, 'total':  uploadInfo.fileInfo.file.size});\n    }\n  };\n  try\n  {\n    xhr.upload.addEventListener(\"progress\", progressFunction);\n  }\n  catch(e)\n  {\n    xhr.addEventListener(\"progress\", progressFunction);\n  }\n  \n  xhr.onreadystatechange = function () \n  {\n    if (xhr.readyState == 0)\n    {\n      worker._log(\"onreadystatechange: unsent\");\n      worker.postMessage({ 'type' : 'unsent', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 1)\n    {\n      worker._log(\"onreadystatechange: opened\");\n      worker.postMessage({ 'type' : 'opened', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 2)\n    {\n      worker._log(\"onreadystatechange: headers received\");\n      worker.postMessage({ 'type' : 'headersReceived', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 3)\n    {\n      worker._log(\"onreadystatechange: loading: \" + xhr.responseText);   \n      worker.postMessage({ 'type' : 'loading', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 4)\n    {\n      worker._log(\"onreadystatechange: upload complete : \" + uploadInfo.fileInfo.file.name + \" (\" + currentChunk.idx + \"/\" + (uploadInfo.parts.length - 1) + \") : \" + xhr.responseText);\n      // on abort the response will be empty.\n      if (!!this.responseText)\n      {      \n        var response = worker._extractJsonResponse(this.responseText);\n        if (xhr.status == 200)\n        {\n          // update the progress indicator to state that it is 100% done.\n          currentChunk.uplCount = currentChunk.size;\n          currentChunk.status = \"complete\";\n          var overallBytesUploaded = worker._sumPartsUploaded(uploadInfo);\n          worker.postMessage({ 'type' : 'progress', 'id' : uploadInfo.fileInfo.id, 'lengthComputable': true, 'loaded': overallBytesUploaded, 'total':  uploadInfo.fileInfo.file.size});\n    \n          // when the last chunk has been successfully processed then make a call\n          // to re-assemble the chunks and push into the content server\n          if(worker._areAllChunksComplete(uploadInfo))\n          {\n            worker._resassembleChunks(uploadInfo);\n          }\n          else\n          {\n            // start the next upload.\n            var nextChunkPart = worker._findNextChunkPartToUpload(uploadInfo);\n            worker._performSingleChunkUpload(uploadInfo, nextChunkPart);\n          }\n        }\n        else\n        {\n          var message = null;\n          if(!!response.errorDetails && !!response.errorDetails.detail) \n          {\n            message = response.errorDetails.detail;\n          }\n\n          currentChunk.status = 'error';\n          currentChunk.errors.push(message);\n          if (currentChunk.tryCount >= MAX_CHUNK_RETRIES)\n          {\n            worker.postMessage({ 'type' : 'error', 'id' : uploadInfo.fileInfo.id, 'message': message, 'errorcode':'AA_UPLOAD_CHUNK_ERROR'});\n            worker._xhr = null;\n            worker._uploadInfo = null;\n          } \n          else\n          {\n            // not over the threshold yet so perform the upload.\n            var nextChunkPartAfterError = worker._findNextChunkPartToUpload(uploadInfo);\n            worker._performSingleChunkUpload(uploadInfo, nextChunkPartAfterError);\n          }\n        }\n      }\n    }\n  }\n  \n  // make the call.\n  var endpoint = _getEndpointForIndex(uploadInfo.fileInfo.chunkEndpoints, currentChunk.idx);\n  xhr.open('POST', endpoint, true);\n  //TODO: Fix authentication\n  if (uploadInfo.fileInfo.token) {\n    xhr.setRequestHeader(\"Authorization\", \"Bearer \" + uploadInfo.fileInfo.token);\n  }\n  if (contentType != null) {\n        xhr.setRequestHeader(\"Content-Type\", contentType);\n  }\n  // custom headers\n  if (uploadInfo.fileInfo.chunkEndpointsHeaders) {\n    const headerNames = Object.getOwnPropertyNames(uploadInfo.fileInfo.chunkEndpointsHeaders);\n    for (var headerIndex = 0; headerIndex < headerNames.length; headerIndex++) {\n      var headerName = headerNames[headerIndex];\n      xhr.setRequestHeader(headerName, uploadInfo.fileInfo.chunkEndpointsHeaders[headerName])\n    }\n  }\n  xhr.send(payloadData);\n  \n  this._log('exiting _performSingleChunkUpload ' + uploadInfo.fileInfo.file.name + ' (' + uploadInfo.fileInfo.id + ') ' + currentChunk.idx + \"/\" + (uploadInfo.parts.length - 1));\n}\n\n/**\n * Create a FormData object and populate it with the data from fileInfo.\n * @param fileInfo object the information about the file to send to Attachments.\n * @return the populated FormData.\n */\nself._chunkInfoToFormData = function(fileInfo, chunkBytes, partSize, partOffset) \n{\n  var formData = new FormData();\n  formData.append('chunk', chunkBytes);\n  formData.append('filename', fileInfo.file.name);\n  formData.append('totalsize', fileInfo.file.size);\n  formData.append('chunksize', partSize);\n  formData.append('chunkoffset', partOffset);\n  return formData;\n}\n\n/**\n * Create a Blob populated with the data from fileInfo.\n * @param fileInfo object the information about the file to send to Attachments.\n * @return an array with the upload Blob and the content type.\n */\nself._chunkInfoToCustomData = function(fileInfo, chunkBytes, partSize, partOffset) \n{\n  var boundary = \"----FndAttachBoundary\" + Date.now().toString(16);\n  var contentType = \"multipart/form-data; boundary=\" + boundary;\n\n  boundary = \"--\" + boundary;\n  var customData = [];\n  // write the file\n  _appendResponseLine(customData, boundary);\n  _appendResponseLine(customData, \"Content-Disposition: form-data; name=\\\"chunk\\\"; filename=\\\"\" + fileInfo.file.name + \"\\\"\");\n  _appendResponseLine(customData, \"Content-Type: application/octet-stream\");\n  _appendResponseLine(customData);\n  customData.push(fileInfo.file); \n  _appendResponseLine(customData);\n  \n  // write the remaining values\n  _appendFormDataValue(customData, boundary, \"filename\", fileInfo.file.name);\n  _appendFormDataValue(customData, boundary, \"totalsize\", fileInfo.file.size);\n  _appendFormDataValue(customData, boundary, \"chunksize\", partSize);\n  _appendFormDataValue(customData, boundary, \"chunkoffset\", partOffset);\n  _appendResponseLine(customData, boundary + \"--\");  \n  \n  return [new Blob(customData), contentType];\n}\n\n/**\n * After all the chunks have been uploaded to the server make a call to \n * re-assemble all the chunks back into a single file and finalize the attachment\n * creation.\n */\nself._resassembleChunks = function(uploadInfo)\n{\n  this._log('entering resassembleChunks ' + uploadInfo.fileInfo.file.name + ' (' + uploadInfo.fileInfo.id + ')');\n \n  var worker = this;\n  var xhr = new XMLHttpRequest();\n  worker._xhr = xhr;\n  \n  xhr.onerror = function (evt)\n  {\n    worker._log(\"failed: An error occurred while resassembling the file.\");\n    worker.postMessage({ 'type' : 'error', 'id' : uploadInfo.fileInfo.id, 'errorcode': 'AA_REBUILD_CHUNK_ERROR'});\n    worker._xhr = null;\n    worker._uploadInfo = null;\n  };\n  \n  xhr.onabort = function (evt)\n  {\n    worker._log(\"canceled: The transfer-resassembling has been canceled by the user.\");\n    worker.postMessage({ 'type' : 'abort', 'id' : uploadInfo.fileInfo.id});\n    worker._xhr = null;\n    worker._uploadInfo = null;\n  };         \n    \n  var progressFunction = function (evt) \n  {\n    if (evt.lengthComputable) \n    {\n      var percentComplete = evt.loaded / evt.total * 100;\n      worker._log(\"Progress: \" + uploadInfo.fileInfo.file.name + \" \" + percentComplete + \"%\");\n    }\n    else\n    {\n      // Unable to compute progress information since the total size is unknown\n      worker._log(\"progress : \" + uploadInfo.fileInfo.file.name + \" : unable to calculate size\");\n    }\n    worker.postMessage({ 'type' : 'progress', 'id' : uploadInfo.fileInfo.id, 'lengthComputable': evt.lengthComputable, 'loaded': evt.loaded, 'total':  evt.total});\n  };\n  try\n  {\n    xhr.upload.addEventListener(\"progress\", progressFunction);\n  }\n  catch(e)\n  {\n    xhr.addEventListener(\"progress\", progressFunction);\n  }\n  \n  xhr.onreadystatechange = function () \n  {\n    if (xhr.readyState == 0)\n    {\n      worker._log(\"onreadystatechange-resassembling: unsent\");\n      worker.postMessage({ 'type' : 'unsent', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 1)\n    {\n      worker._log(\"onreadystatechange-resassembling: opened\");\n      worker.postMessage({ 'type' : 'opened', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 2)\n    {\n      worker._log(\"onreadystatechange-resassembling: headers received\");\n      worker.postMessage({ 'type' : 'headersReceived', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 3)\n    {\n      worker._log(\"onreadystatechange-resassembling: loading: \" + xhr.responseText);   \n      worker.postMessage({ 'type' : 'loading', 'id' : uploadInfo.fileInfo.id});\n    }\n    else if (xhr.readyState == 4)\n    {\n      worker._log(\"onreadystatechange-resassembling: upload complete : \" + uploadInfo.fileInfo.file.name + \" : \" + xhr.responseText);\n      // on abort the response will be empty.\n      if (!!this.responseText)\n      {      \n        var response = JSON.parse(this.responseText);\n        if (xhr.status == 200 && (response.virusScanDeferred != \"true\" || !!response.deferredMessage))\n        {\n          if (response.virusScanDeferred == \"true\")\n          {\n            // its a deferred upload so show the link as if it were errored since\n            // the attachment cannot be downloaded at this point in time. Upon\n            // as subsequent attachment component refresh when the virus scan is\n            // done the download link will be shown.\n            worker.postMessage({ 'type' : 'error', 'id' : uploadInfo.fileInfo.id, 'message': response.deferredMessage});\n          }\n          else\n          {\n            var data = {'downloadUrl' : response.downloadUrl};\n            worker.postMessage({ 'type' : 'uploadComplete', 'id' : uploadInfo.fileInfo.id, 'data': data});\n          }\n        }\n        else\n        {\n          var message = null;\n          if(!!response.errorDetails && !!response.errorDetails.detail) \n          {\n            message = response.errorDetails.detail;\n          }\n          worker.postMessage({ 'type' : 'error', 'id' : uploadInfo.fileInfo.id, 'message': message, 'errorcode': 'AA_REBUILD_CHUNK_ERROR'});\n        }\n        worker._xhr = null;\n        worker._uploadInfo = null;\n      }\n    }\n  }\n  \n  // make the call.\n  var endpoint = _getEndpoint(uploadInfo.fileInfo.reassembleEndpoint);\n  xhr.open('POST', endpoint, true);\n  //TODO: Fix authentication\n  if (uploadInfo.fileInfo.token) {\n    xhr.setRequestHeader(\"Authorization\", \"Bearer \" + uploadInfo.fileInfo.token);\n  }\n  // custom headers\n  if (uploadInfo.fileInfo.reassembleEndpointHeaders) {\n    const headerNames = Object.getOwnPropertyNames(uploadInfo.fileInfo.reassembleEndpointHeaders);\n    for (var headerIndex = 0; headerIndex < headerNames.length; headerIndex++) {\n      var headerName = headerNames[headerIndex];\n      xhr.setRequestHeader(headerName, uploadInfo.fileInfo.reassembleEndpointHeaders[headerName])\n    }\n  }\n  // TODO: Remove temporary workaround for bug 34864522\n  var dummyFormData = new FormData();\n  dummyFormData.append('a', 'b');  \n  xhr.send(dummyFormData);\n  // xhr.send();\n  \n  this._log('exiting resassembleChunks ' + uploadInfo.fileInfo.file.name + ' (' + uploadInfo.fileInfo.id + ')');\n}\n\n/**\n * Trigger an abort of the current upload.\n */\nself._stopChunkedUpload = function (id)\n{\n  if (!!this._xhr && !!this._uploadInfo && \n      !!this._uploadInfo.fileInfo && this._uploadInfo.fileInfo.id === id) \n  {\n    this._xhr.abort();\n  }\n}\n"})),define("oj-sp/attachments-common/private/BackgroundUploadManager",["require","exports","ojs/ojlogger","./EndpointUtils","text!./worker/AttachmentWorker.txt","./AttachmentManager"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundUploadManager=void 0;class n{constructor(){this.pendingQueue=[],this.activeQueue=[],this.activeTransfer=null,this.preQueueTime=null,this.uploadWorker=null,this.clientFileCounter=1,this.handleWorkerResponseMessage=function(e){if(e&&e.data&&e.data.type)if("log"==e.data.type)this.log(e.data.logMsg);else if(e.data.type==n.EVENT_TYPE_LOADED||e.data.type==n.EVENT_TYPE_ERROR||e.data.type==n.EVENT_TYPE_ABORT||e.data.type==n.EVENT_TYPE_PROGRESS||e.data.type==n.EVENT_TYPE_STATE_UNSENT||e.data.type==n.EVENT_TYPE_STATE_OPENED||e.data.type==n.EVENT_TYPE_STATE_HEADERS_RECEIVED||e.data.type==n.EVENT_TYPE_STATE_LOADING||e.data.type==n.EVENT_TYPE_STATE_COMPLETE){const t=this.activeTransfer;if(t&&t.uploadCallbacks){let o=null,s=null,r=100;if(e.data.type==n.EVENT_TYPE_PROGRESS){e.data.lengthComputable?(r=Math.round(e.data.loaded/e.data.total*1e4)/100,s={code:"AA_UPLOAD_PROG_PER",message:"Uploading '"+t.file.name+"': "+r+"%",tokens:[t.file.name,r]}):s={code:"AA_UPLOAD_PROG_NO_PER",message:"Uploading '"+t.file.name+"' to content server",tokens:[t.file.name]},100==r&&(s={code:"AA_UPLOAD_PROG_MOVE",message:"Moving '"+t.file.name+"' to content server",tokens:[t.file.name]});const i={attachment:t.attachment,createMode:t.createMode,data:o,deferredResponse:t.deferredResponse,file:t.file,id:e.data.id,message:s,percent:r,type:e.data.type,user:t.user,category:t.category};t.uploadCallbacks.uploadEventListener(i)}else if(e.data.type==n.EVENT_TYPE_STATE_OPENED)r=0;else if(e.data.type==n.EVENT_TYPE_ERROR)s={message:e.data.message},i.error(s),this.uploadViaRestHelper(t);else if(e.data.type==n.EVENT_TYPE_STATE_HEADERS_RECEIVED)e.data.status>=400?(i.error("Error uploading attachment - status: "+e.data.status),this.uploadViaRestHelper(t)):204==e.data.status&&(t.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND||a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED||a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE)&&(i.info("Spectra attachment upload complete"),e.data.type=n.EVENT_TYPE_STATE_COMPLETE);else if(e.data.type==n.EVENT_TYPE_STATE_COMPLETE&&(o=e.data.data,o&&o.downloadUrl&&o.downloadUrl.indexOf("{{contextRoot}}")>-1)){const e=document.location.pathname.split("/")[1];o.downloadUrl=o.downloadUrl.replace("{{contextRoot}}",e)}const l={attachment:t.attachment,createMode:t.createMode,data:o,deferredResponse:t.deferredResponse,file:t.file,id:e.data.id,message:s,percent:r,type:e.data.type,user:t.user,category:t.category};t.uploadCallbacks.uploadEventListener(l)}e.data.type==n.EVENT_TYPE_STATE_COMPLETE&&this.handleWorkerUploadComplete()}},this.resetBackgroundUploadAfterRefresh=function(){const e=this.currentTimeInMillis();if(this.log("FndAttachUploadManager.resetBackgroundUploadAfterRefresh: entering"),this.activeTransfer&&this.activeTransfer.uploadCallbacks){const e={attachment:null,createMode:this.activeTransfer.createMode,data:null,deferredResponse:null,file:this.activeTransfer.file,id:this.activeTransfer.id,message:null,percent:0,type:n.EVENT_TYPE_QUEUED,user:null,category:this.activeTransfer.category};this.activeTransfer.uploadCallbacks.uploadEventListener(e)}for(let e=0;e<this.activeQueue.length;e++){const t=this.activeQueue[e];if(t.uploadCallbacks){const e={attachment:null,createMode:t.createMode,data:null,deferredResponse:null,file:t.file,id:t.id,message:null,percent:0,type:n.EVENT_TYPE_QUEUED,user:null,category:t.category};t.uploadCallbacks.uploadEventListener(e)}}this.processWorkerQueue();const t=this.currentTimeInMillis();this.log("FndAttachUploadManager.resetBackgroundUploadAfterRefresh: exiting["+(t-e)+"]")},this.getWorker=function(){if(window.Worker&&!this.uploadWorker){this.log("Creating a new worker");const e=new Blob([s],{type:"text/javascript"}),t=window.URL.createObjectURL(e);this.uploadWorker=new Worker(t),this.uploadWorker.onmessage=e=>{this.handleWorkerResponseMessage(e)},this.log("Attach Worker created")}return this.uploadWorker},this.log=function(e){const t="FndAttachmentsConsoleLogEnabled";window.FndAttachmentsLogEnabled&&i.info(e),window[t]=!0;window[t]&&console.log(e)},this.init()}static getManager(){return this.manager||(this.manager=new n),this.manager}static isBackgroundAvailable(){let e=!1;const t=n.getManager();if(t){e=!!t.getWorker()}return e}addFilesToPendingQueue(e,t,i,s,r,l,d,c,p,u,h,m,g,y,f,b,v,j,A,C,E,T,_,S){const x=this.currentTimeInMillis();this.log("FndAttachUploadManager.addFilesToPendingQueue: entering");const O=[];if(e){for(let o=0;o<e.length;o++){const s=e[o];if(s){const e={filename:s.name,file:s,uploadCallbacks:_,token:S,entityName:d,createMode:i,backgroundUploadEndpoint:u,backgroundUploadEndpointTrackerParamName:h,backgroundUploadEndpointInitConfig:m,chunkifyCreateEndpoint:g,chunkifyCreateEndpointTrackerParamName:y,chunkifyCreateEndpointInitConfig:f,backgroundChunkUploadEndpoint:b,backgroundChunkUploadEndpointTrackerParamName:v,backgroundChunkUploadEndpointPartParamName:j,backgroundChunkUploadEndpointInitConfig:A,backgroundChunkReassembleEndpoint:C,backgroundChunkReassembleEndpointTrackerParamName:E,category:t,backgroundChunkReassembleEndpointInitConfig:T};if(this.pendingQueue.push(e),!i||i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&i!==a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED&&i!==a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE)if(!i||i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE)if(!i||i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND){const e={DatatypeCode:"FILE",FileName:s.name,Title:s.name,UploadedFileContentType:a.AttachmentManager.mimeTypeCalculator(s.name,s.type),UploadedFileLength:s.size,UploadedFileName:s.name};t&&(e.CategoryName=t),O.push(e)}else{const e={ContentType:a.AttachmentManager.mimeTypeCalculator(s.name,s.type),DatatypeCode:"FILE",FileName:s.name,FileSize:s.size,Title:s.name};t&&(e.CategoryName=t),O.push(e)}else{const t={EntityName:d,FileMimeType:a.AttachmentManager.mimeTypeCalculator(s.name,s.type),FileName:s.name,FileSize:s.size},i=this.calculateChunkingCount(e);this.isChunkingUpload(e,i)&&(t.ChunkCount=i.chunkcount,t.ChunkSize=i.chunksize),O.push(t)}else{const t={filename:s.name,mimetype:a.AttachmentManager.mimeTypeCalculator(s.name,s.type),size:s.size},i=this.currentTimeInMillis()+this.clientFileCounter;this.clientFileCounter++,t.clientfileid=i.toString(),e.clientFileId=i;const o=this.calculateChunkingCount(e);this.isChunkingUpload(e,o)&&(t.chunkcount=o.chunkcount,t.chunksize=o.chunksize),O.push(t)}this.log("FndAttachUploadManager.addFilesToPendingQueue: File in pending queue: "+s.name)}}if(this.preQueueTime=this.currentTimeInMillis(),!i||i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&i!==a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED&&i!==a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE)if(!i||i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE)if(!i||i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&i!==a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND)for(let e=0;e<O.length;e++){o.EndpointUtils.callEndpoint(s,r,l,null,null,O[e],null).then(t=>{if(t.response.ok){if(t.body.items)for(let e=0;e<t.body.items.length;e++){const o=t.body.items[e];_.uploadListener(o.AttachedDocumentId,o.FileName,o.UploadedFileContentType,o.UploadedFileLength,o.AsyncTrackerId,i,o,null)}else{const e=t.body;_.uploadListener(e.AttachedDocumentId,e.FileName,e.UploadedFileContentType,e.UploadedFileLength,e.AsyncTrackerId,i,e,null)}const e=[{attachment:t.body,filename:t.body.FileName,trackerId:t.body.AsyncTrackerId}];this.pushFilesToActiveQueue(null,e,t.body.CreatedBy)}else this.removeFileFromPendingQueue(O[e].FileName),_.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_REGISTRATION,null,null,null,t,_.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))}).catch(t=>{this.removeFileFromPendingQueue(O[e].FileName),_.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_REGISTRATION,null,null,t,null,_.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))})}else for(let e=0;e<O.length;e++){o.EndpointUtils.callEndpoint(s,r,l,null,null,O[e],null).then(t=>{if(t.response.ok){if(t.body.items)for(let e=0;e<t.body.items.length;e++){const o=t.body.items[e];_.uploadListener(o.AttachedDocumentId,o.FileName,o.FileMimeType,o.FileSize,o.TrackerId,i,o,null)}else{const e=t.body;_.uploadListener(e.AttachedDocumentId,e.FileName,e.FileMimeType,e.FileSize,e.TrackerId,i,e,null)}const e=[{attachment:t.body,filename:t.body.FileName,trackerId:t.body.TrackerId}];this.pushFilesToActiveQueue(null,e,t.body.CreatedBy)}else this.removeFileFromPendingQueue(O[e].FileName),_.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_SPECTRA_UPLOAD_REGISTRATION,null,null,null,t,_.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))}).catch(t=>{this.removeFileFromPendingQueue(O[e].FileName),_.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_SPECTRA_UPLOAD_REGISTRATION,null,null,t,null,_.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))})}else for(let e=0;e<O.length;e++){let t=c;c||(t=n.ATTACH_SPECTRA_DOC_TRACKER_ENDPOINT);o.EndpointUtils.callEndpoint(t,null,p,null,null,O[e],null).then(t=>{if(t.response.ok){const e=t.body.TrackerId,o=t.body.CreatedBy,s=t.body.FileName,a=[];for(let o=0;o<this.pendingQueue.length;o++)if(s==this.pendingQueue[o].filename){const s={};Object.assign(s,this.pendingQueue[o]),s.trackerId=e,s.createMode=i,s.fileSize=t.body.FileSize,s.contentType=t.body.FileMimeType,a.push(s),this.pendingQueue[o].deferredResponse=t.body;break}_.uploadDeferredListener(a);const n=[{filename:s,trackerId:e}];this.pushFilesToActiveQueue(null,n,o)}else this.removeFileFromPendingQueue(O[e].FileName),_.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_SPECTRA_UPLOAD_REGISTRATION,null,null,null,t,_.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))}).catch(t=>{this.removeFileFromPendingQueue(O[e].FileName),_.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_SPECTRA_UPLOAD_REGISTRATION,null,null,t,null,_.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))})}else this.handleBackgroundTrackerRegistration(c,p,O,i,_,t)}const w=this.currentTimeInMillis();this.log("FndAttachUploadManager.addFilesToPendingQueue: exiting["+(w-x)+" - o:"+(w-this.preQueueTime)+"]")}handleBackgroundTrackerRegistration(e,t,i,s,r,l){let d=e;e||(d=n.ATTACH_DOC_TRACKER_ENDPOINT);o.EndpointUtils.callEndpoint(d,null,t,null,null,i,null).then(o=>{if(o.response.ok){const e=[];for(let t=0;t<o.body.trackers.length;t++){const i=o.body.trackers[t];for(let t=0;t<this.pendingQueue.length;t++)if(i.filename==this.pendingQueue[t].filename||i.clientfileid&&this.pendingQueue[t].clientFileId&&i.clientfileid===this.pendingQueue[t].clientFileId.toString()){const o={};Object.assign(o,this.pendingQueue[t]),o.trackerId=i.trackerId,o.createMode=s,o.contentType=a.AttachmentManager.mimeTypeCalculator(o.file.name,o.file.type),o.categoryName=l,e.push(o),this.pendingQueue[t].deferredResponse=i;break}}r.uploadDeferredListener(e),this.pushFilesToActiveQueue(o.body.errors,o.body.trackers,o.body.username)}else{let d=!1;for(let e=0;e<i.length;e++){const t=i[e];this.isBackgroundDeferredFileCreatePayload(t)&&t.clientfileid&&(delete t.clientfileid,d=!0)}if(d)this.handleBackgroundTrackerRegistration(e,t,i,s,r,l);else{for(let e=0;e<i.length;e++)this.removeFileFromPendingQueue(i[e].filename);r.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_REGISTRATION,null,null,null,o,r.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))}}}).catch(o=>{let d=!1;for(let e=0;e<i.length;e++){const t=i[e];this.isBackgroundDeferredFileCreatePayload(t)&&t.clientfileid&&(delete t.clientfileid,d=!0)}if(d)this.handleBackgroundTrackerRegistration(e,t,i,s,r,l);else{for(let e=0;e<i.length;e++)this.removeFileFromPendingQueue(i[e].filename);r.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_REGISTRATION,null,null,o,null,r.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))}})}pushFilesToActiveQueue(e,t,i){const o=this.currentTimeInMillis();if(this.log("FndAttachUploadManager.pushFilesToActiveQueue: entering"),e){let t=null;this.pendingQueue.length>0&&(t=this.pendingQueue[this.pendingQueue.length-1]),t&&t.fileErrorListener&&t.fileErrorListener(e)}if(t){for(let e=0;e<t.length;e++){const s=t[e];let r=-1;for(let e=0;e<this.pendingQueue.length;e++)if(s.filename==this.pendingQueue[e].filename||s.clientfileid&&this.pendingQueue[e].clientFileId&&s.clientfileid===this.pendingQueue[e].clientFileId.toString()){r=e;break}if(r>-1){const e=this.pendingQueue.splice(r,1)[0];if(s.errors)e.uploadCallbacks&&e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_REGISTRATION_RESPONSE,null,s.trackerId,null,null,s.errors.title,s.errors.errorDetails);else if(e.id=s.trackerId,e.user=i,e.attachment=s.attachment,e.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND){if(this.isChunkingUpload(e)){this.handleChunkify(e).then(t=>{e.chunkingParams=t,this.activeQueue.push(e),this.resetBackgroundUploadAfterRefresh();const i=this.currentTimeInMillis();this.log("FndAttachUploadManager.pushFilesToActiveQueue: finished via Chunkify["+(i-o)+" - q:"+(this.preQueueTime-o)+", r:"+(i-this.preQueueTime)+"]")}).catch(t=>{e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_REGISTRATION,null,null,t,null,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION))})}else this.activeQueue.push(e)}else{const t={chunkCount:s.chunkcount,chunkSize:s.chunksize};e.chunkingParams=t,this.activeQueue.push(e)}}}this.resetBackgroundUploadAfterRefresh()}const s=this.currentTimeInMillis();this.log("FndAttachUploadManager.pushFilesToActiveQueue: exiting["+(s-o)+" - q:"+(this.preQueueTime-o)+", r:"+(s-this.preQueueTime)+"]")}init(){this.pendingQueue=[],this.activeQueue=[]}isBackgroundDeferredFileCreatePayload(e){return void 0!==e.size}removeFileFromPendingQueue(e){for(let t=this.pendingQueue.length-1;t>=0;t--)if(e==this.pendingQueue[t].filename){this.pendingQueue.splice(t,1);break}}processWorkerQueue(){if(!this.activeTransfer&&this.activeQueue&&this.activeQueue.length>0){const e=this.getWorker();this.processWorkerQueueActive(e)}}processWorkerQueueActive(e){if(e){this.activeTransfer=this.activeQueue.shift();const t={file:this.activeTransfer.file,id:this.activeTransfer.id,token:this.activeTransfer.token,user:this.activeTransfer.user,endpoint:null,mimetype:a.AttachmentManager.mimeTypeCalculator(this.activeTransfer.file.name,this.activeTransfer.file.type),headers:o.EndpointUtils.getEndpointHeaders(this.activeTransfer.backgroundUploadEndpointInitConfig)};let s=!1;if(this.activeTransfer.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND||this.activeTransfer.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||this.activeTransfer.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE||this.activeTransfer.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||this.activeTransfer.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||this.activeTransfer.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE?s=!1:(s=!0,t.createMode="SPECTRA"),this.activeTransfer.chunkingParams){const e={chunkcount:this.activeTransfer.chunkingParams.chunkCount,chunksize:this.activeTransfer.chunkingParams.chunkSize,size:this.activeTransfer.file.size};if(this.isChunkingUpload(this.activeTransfer,e)){t.chunkCount=this.activeTransfer.chunkingParams.chunkCount,t.chunkSize=this.activeTransfer.chunkingParams.chunkSize;let e=this.activeTransfer.file.size%t.chunkSize;0===e&&(e=t.chunkSize),t.lastChunkSize=e,t.chunkEndpointsHeaders=o.EndpointUtils.getEndpointHeaders(this.activeTransfer.backgroundChunkUploadEndpointInitConfig),t.reassembleEndpointHeaders=o.EndpointUtils.getEndpointHeaders(this.activeTransfer.backgroundChunkReassembleEndpointInitConfig)}}this.getBackgroundEndpointUrls(this.activeTransfer,s).then(i=>{t.endpoint=i.uploadUrl,t.chunkEndpoints=i.uploadChunkUrls,t.reassembleEndpoint=i.uploadChunkReassembleUrl,e.postMessage({action:"uploadFile",fileInfo:t})}).catch(e=>{i.error("Error retrieving url for background upload. Spectra Mode: "+s,e)})}}async getBackgroundEndpointUrls(e,t){let i=null;if(t){let t=this.activeTransfer.backgroundUploadEndpoint;t||(t=n.ATTACH_SPECTRA_BACKGROUND_UPLOAD_ENDPOINT);const s=o.EndpointUtils.getEndpoint(t);let a=this.activeTransfer.backgroundUploadEndpointTrackerParamName;a||(a=n.ATTACH_SPECTRA_BACKGROUND_UPLOAD_PARAM_NAME);const r={};r[a]=e.id,s.parameters(r),i=await s.toUrl()}else{let t=e.backgroundUploadEndpoint;t||(t=n.ATTACH_BACKGROUND_UPLOAD_ENDPOINT);const s=o.EndpointUtils.getEndpoint(t);i=await s.toUrl()}const s=await this.getBackgroundChunkingUrls(e,e.chunkingParams?e.chunkingParams.chunkCount:0);return{uploadChunkReassembleUrl:await this.getBackgroundChunkingReassembleUrl(e),uploadChunkUrls:s,uploadUrl:i}}async getBackgroundChunkingUrls(e,t){const i=[];if(e.backgroundChunkUploadEndpoint)for(let s=0;s<t;s++){const t={};t[e.backgroundChunkUploadEndpointTrackerParamName?e.backgroundChunkUploadEndpointTrackerParamName:n.ATTACH_BACKGROUND_CHUNK_UPLOAD_TRACKER_PARAM_NAME]=e.id,t[e.backgroundChunkUploadEndpointPartParamName?e.backgroundChunkUploadEndpointPartParamName:n.ATTACH_BACKGROUND_CHUNK_UPLOAD_PART_PARAM_NAME]=String(s);const a=o.EndpointUtils.getEndpoint(e.backgroundChunkUploadEndpoint).parameters(t),r=await a.toUrl();i.push(r)}return i}async getBackgroundChunkingReassembleUrl(e){let t=null;if(e.backgroundChunkReassembleEndpoint){const i={};i[e.backgroundChunkReassembleEndpointTrackerParamName?e.backgroundChunkReassembleEndpointTrackerParamName:n.ATTACH_BACKGROUND_CHUNK_REASSEMBLE_TRACKER_PARAM_NAME]=e.id;const s=o.EndpointUtils.getEndpoint(e.backgroundChunkReassembleEndpoint).parameters(i);t=await s.toUrl()}return t}isChunkingUpload(e,t){let i=!1;return e.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND?e.chunkifyCreateEndpoint&&e.backgroundChunkUploadEndpoint&&e.backgroundChunkReassembleEndpoint&&(i=!0):e.backgroundChunkUploadEndpoint&&e.backgroundChunkReassembleEndpoint&&(i=!0),i&&(e.chunkingParams&&e.chunkingParams.chunkCount<=1?i=!1:(t||(t=this.calculateChunkingCount(e)),t.chunkcount<=1&&(i=!1))),i}calculateChunkingCount(e){const t=e.file.size;return{chunkcount:Math.ceil(t/2097152),chunksize:2097152,size:t}}async handleChunkify(e){i.info("background chunkify upload via fetch API");let t=null,s=e.chunkifyCreateEndpointTrackerParamName;s||(s=n.ATTACH_CHUNKIFY_TRACKER_PARAM_NAME);const r={};r[s]=e.id;const l=this.calculateChunkingCount(e);if(l.chunkcount>1)try{const s={attachedDocumentId:e.attachment.AttachedDocumentId,size:l.size,chunkcount:l.chunkcount,chunksize:l.chunksize},d=await o.EndpointUtils.callEndpoint(e.chunkifyCreateEndpoint,r,e.chunkifyCreateEndpointInitConfig,null,null,s,null);if(!d.response.ok)throw i.error("Error occurred during background chunkify fetch upload."),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNKIFY,e.attachment?e.attachment.AttachedDocumentId:null,e.id,null,d,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNKIFY)),new Error("ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNKIFY");{const e=d.body.chunksize;t={chunkCount:d.body.chunkcount,chunkSize:e}}}catch(t){throw i.error("Error occurred during background chunkify fetch upload."),i.error(t),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNKIFY,e.attachment?e.attachment.AttachedDocumentId:null,e.id,t,null,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNKIFY)),new Error("ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNKIFY")}return t}async handleChunkUploads(e,t){i.error("background chunk uploads via fetch API"),i.info(t);let s=e.file.size%t.chunkSize;0===s&&(s=t.chunkSize);for(let r=0;r<t.chunkCount;r++){const l={};l[e.backgroundChunkUploadEndpointTrackerParamName?e.backgroundChunkUploadEndpointTrackerParamName:n.ATTACH_BACKGROUND_CHUNK_UPLOAD_TRACKER_PARAM_NAME]=e.id,l[e.backgroundChunkUploadEndpointPartParamName?e.backgroundChunkUploadEndpointPartParamName:n.ATTACH_BACKGROUND_CHUNK_UPLOAD_PART_PARAM_NAME]=String(r);const d=o.EndpointUtils.getEndpoint(e.backgroundChunkUploadEndpoint).parameters(l),c=new FormData;r===t.chunkCount-1?(c.append("chunksize",String(s)),c.append("chunk",e.file.slice(r*t.chunkSize))):(c.append("chunksize",String(t.chunkSize)),c.append("chunk",e.file.slice(r*t.chunkSize,(r+1)*t.chunkSize))),c.append("filename",e.file.name),c.append("totalsize",String(e.file.size)),c.append("chunkoffset",String(r)),d.body(c),e.backgroundChunkUploadEndpointInitConfig&&d.initConfiguration(e.backgroundChunkUploadEndpointInitConfig);try{const o=await d.fetch();let s=(r+1)/t.chunkCount*100;if(100===s&&(s=99),!o.response.ok)throw i.error("Error occurred during background chunk fetch upload."),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNK,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,null,o,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNK)),new Error("ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNK");{i.log("Upload via background chunk fetch completed successfully");const t={attachment:e.attachment,createMode:e.createMode,data:null,deferredResponse:e.deferredResponse,file:e.file,id:e.id,message:null,percent:s,type:n.EVENT_TYPE_PROGRESS,user:e.user,category:e.category};e.uploadCallbacks.uploadEventListener(t)}}catch(t){throw i.error("Error occurred during background chunk fetch upload."),i.error(t),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNK,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,t,null,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNK)),new Error("ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNK")}}return!0}async handleChunkReassemble(e){i.error("background chunk reassemble upload via fetch API");let t=!1;const s={};s[e.backgroundChunkReassembleEndpointTrackerParamName?e.backgroundChunkReassembleEndpointTrackerParamName:n.ATTACH_BACKGROUND_CHUNK_REASSEMBLE_TRACKER_PARAM_NAME]=e.id;let r=o.EndpointUtils.getEndpoint(e.backgroundChunkReassembleEndpoint).parameters(s);e.backgroundChunkReassembleEndpointInitConfig&&(r=r.initConfiguration(e.backgroundChunkReassembleEndpointInitConfig));const l=new FormData;l.append("a","b"),r.body(l);try{const o=await r.fetch();if(!o.response.ok)throw i.error("Error occurred during background chunk reassemble fetch upload."),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNK_REASSEMBLE,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,null,o,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNK_REASSEMBLE)),new Error("ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNK_REASSEMBLE");{i.log("Upload via background chunk fetch completed successfully");const o={attachment:e.attachment,createMode:e.createMode,data:null,deferredResponse:e.deferredResponse,file:e.file,id:e.id,message:null,percent:100,type:n.EVENT_TYPE_STATE_COMPLETE,user:e.user,category:e.category};e.uploadCallbacks.uploadEventListener(o),t=!0}}catch(t){throw i.error("Error occurred during background chunk reassemble fetch upload."),i.error(t),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNK_REASSEMBLE,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,t,null,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNK_REASSEMBLE)),new Error("ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNK_REASSEMBLE")}return t}handleWorkerUploadComplete(){this.activeTransfer=null,this.processWorkerQueue()}uploadViaRestHelper(e){i.error("Error occurred during background upload - revert to fetch API");if(this.isChunkingUpload(e)){this.handleChunkingBackgroundUpload(e).then(()=>{this.handleWorkerUploadComplete()}).catch(e=>{i.error("Error occurred during background fetch chunking upload."),i.error(e),this.handleWorkerUploadComplete()})}else this.handleSingleBackgroundUpload(e)}async handleChunkingBackgroundUpload(e){i.error("chunking background upload via fetch API"),await this.handleChunkUploads(e,e.chunkingParams),await this.handleChunkReassemble(e)}handleSingleBackgroundUpload(e){if(i.error("single background upload via fetch API"),e.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND||e.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||e.createMode===a.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||e.createMode===a.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE){let t=e.backgroundUploadEndpoint;t||(t=n.ATTACH_BACKGROUND_UPLOAD_ENDPOINT);const s=o.EndpointUtils.getEndpoint(t),r=new FormData;r.append("file",e.file),r.append("filename",e.file.name),r.append("size",String(e.file.size)),r.append("mimetype",a.AttachmentManager.mimeTypeCalculator(e.file.name,e.file.type)),r.append("tracker",e.id),r.append("user",e.user),s.body(r),e.backgroundUploadEndpointInitConfig&&s.initConfiguration(e.backgroundUploadEndpointInitConfig);s.fetch().then(t=>{if(t.response.ok){i.log("Upload via background fetch completed successfully");const t={attachment:e.attachment,createMode:e.createMode,data:null,deferredResponse:e.deferredResponse,file:e.file,id:e.id,message:null,percent:100,type:n.EVENT_TYPE_STATE_COMPLETE,user:e.user,category:e.category};e.uploadCallbacks.uploadEventListener(t),this.handleWorkerUploadComplete()}else i.error("Error occurred during background fetch upload."),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,null,t,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE)),this.handleWorkerUploadComplete()}).catch(t=>{i.error("Error occurred during background fetch upload."),i.error(t),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,t,null,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE)),this.handleWorkerUploadComplete()})}else{let t=e.backgroundUploadEndpoint;t||(t=n.ATTACH_SPECTRA_BACKGROUND_UPLOAD_ENDPOINT);const s=o.EndpointUtils.getEndpoint(t);let r=e.backgroundUploadEndpointTrackerParamName;r||(r=n.ATTACH_SPECTRA_BACKGROUND_UPLOAD_PARAM_NAME);const l={};l[r]=e.id,s.parameters(l),s.body(e.file),e.backgroundUploadEndpointInitConfig&&s.initConfiguration(e.backgroundUploadEndpointInitConfig);s.fetch().then(t=>{if(t.response.ok){i.log("Upload via spectra background fetch completed successfully");const t={attachment:e.attachment,createMode:e.createMode,data:null,deferredResponse:e.deferredResponse,file:e.file,id:e.id,message:null,percent:100,type:n.EVENT_TYPE_STATE_COMPLETE,user:e.user,category:e.category};e.uploadCallbacks.uploadEventListener(t),this.handleWorkerUploadComplete()}else i.error("Error occurred during specta background fetch upload."),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_SPECTRA_FETCH_UPLOAD_FILE,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,null,t,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE)),this.handleWorkerUploadComplete()}).catch(t=>{i.error("Error occurred during spectra background fetch upload."),i.error(t),e.uploadCallbacks.fileErrorListener(a.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_SPECTRA_FETCH_UPLOAD_FILE,e.attachment?e.attachment.AttachedDocumentId:a.AttachmentManager.getDeferredAttachmentId(e),e.id,t,null,e.uploadCallbacks.getTranslation(n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE)),this.handleWorkerUploadComplete()})}}currentTimeInMillis(){return(new Date).getTime()}}n.EVENT_TYPE_QUEUED="queued",n.EVENT_TYPE_LOADED="loaded",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_ABORT="abort",n.EVENT_TYPE_PROGRESS="progress",n.EVENT_TYPE_STATE_UNSENT="unsent",n.EVENT_TYPE_STATE_OPENED="opened",n.EVENT_TYPE_STATE_HEADERS_RECEIVED="headersReceived",n.EVENT_TYPE_STATE_LOADING="loading",n.EVENT_TYPE_STATE_COMPLETE="uploadComplete",n.ATTACH_DOC_TRACKER_ENDPOINT="attachments-tracker-service/DocTracker",n.ATTACH_BACKGROUND_UPLOAD_ENDPOINT="attachments-tracker-service/Upload",n.ATTACH_SPECTRA_DOC_TRACKER_ENDPOINT="attachments-spectra-tracker-service/DocTracker",n.ATTACH_SPECTRA_BACKGROUND_UPLOAD_ENDPOINT="attachments-spectra-tracker-service/Upload",n.ATTACH_SPECTRA_BACKGROUND_UPLOAD_PARAM_NAME="TrackerId",n.ATTACH_CHUNKIFY_TRACKER_PARAM_NAME="trackerId",n.ATTACH_BACKGROUND_CHUNK_UPLOAD_TRACKER_PARAM_NAME="trackerId",n.ATTACH_BACKGROUND_CHUNK_UPLOAD_PART_PARAM_NAME="chunkNum",n.ATTACH_BACKGROUND_CHUNK_REASSEMBLE_TRACKER_PARAM_NAME="trackerId",n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_REGISTRATION="errorAttachmentUploadRegistration",n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE="errorAttachmentUpload",n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNKIFY="errorAttachmentUpload",n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNK="errorAttachmentUpload",n.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_FILE_CHUNK_REASSEMBLE="errorAttachmentUpload",n.manager=null,t.BackgroundUploadManager=n})),define("oj-sp/attachments-common/private/AttachmentManager",["require","exports","ojs/ojlogger","./BackgroundUploadManager","./EndpointUtils"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentManager=void 0;class a{static uploadFile(e,t,i,s,n,r,l,d,c,p,u,h,m,g,y,f,b,v,j,A,C,E,T,_,S,x,O){if(!i||i!==a.CREATE_TYPE_BACKGROUND&&i!==a.CREATE_TYPE_BACKGROUND_DEFERRED&&i!==a.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE&&i!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&i!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&i!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&i!==a.CREATE_TYPE_SPECTRA_BACKGROUND&&i!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&i!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE)a._uploadFileDirect(e,t,s,n,l,d,c,i,O);else{o.BackgroundUploadManager.getManager().addFilesToPendingQueue(e,t,i,s,n,r,u,h,m,g,y,f,b,v,j,A,C,E,T,_,S,x,O,null)}}static uploadLink(e,t,o,n,r,l,d){const c={CategoryName:t,DatatypeCode:a.DATATYPE_CODE_LINK,Url:e};if(l!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&l!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&l!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&l!==a.CREATE_TYPE_SPECTRA_BACKGROUND&&l!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&l!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE||(c.Title=a.TITLE_LINK_DEFAULT),l===a.CREATE_TYPE_BACKGROUND_DEFERRED||l===a.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE||l===a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||l===a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||l===a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED||l===a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE){d.linkDeferredUploadListener(c);const i={AsyncTrackerId:l+Date.now(),AttachedDocumentId:l+Date.now(),CategoryName:t,DatatypeCode:a.DATATYPE_CODE_LINK,LastUpdateDate:(new Date).toISOString(),LastUpdatedByUserName:null,RestFrameworkVersion:null,Title:e?e.substring(0,30):"",Url:e,UserName:null};l!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&l!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&l!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&l!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE||(i.Title=a.TITLE_LINK_DEFAULT),d.linkUploadListener(i,l)}else{s.EndpointUtils.callEndpoint(o,n,r,null,null,c,null).then(e=>{if(e)if(e.response.ok){const t=e.body;a.setRestFrameworkVersion(e,t),d.linkUploadListener(t,l)}else i.error("Unable to upload attachments link. "+e.statusText),d.linkErrorListener(a.ATTACHMENT_ERROR_OPERATION_FAIL_CREATE_LINK,null,e,d.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_CREATE_LINK))}).catch(e=>{d.linkErrorListener(a.ATTACHMENT_ERROR_OPERATION_ERROR_CREATE_LINK,e,null,d.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_CREATE_LINK))})}}static downloadBlob(e,t,o,n,r,l){let d=Promise.resolve(null);const c=s.EndpointUtils.callEndpoint(t,o,n,r,e,null,"blob");return d=new Promise((function(e,t){c.then((function(t){let o=null;t&&(t.response.ok?o=t.body:(i.error("Unable to download attachments enclosure: "+t.response.status+" : "+t.response.statusText),l.downloadErrorListener(a.ATTACHMENT_ERROR_OPERATION_FAIL_DOWNLOAD,null,t,l.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_DOWNLOAD)))),e(o)})).catch((function(e){t(e),l.downloadErrorListener(a.ATTACHMENT_ERROR_OPERATION_ERROR_DOWNLOAD,e,null,l.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_DOWNLOAD))}))})),d}static deleteFile(e,t,i,o,a){let n=Promise.resolve(null);return n=s.EndpointUtils.callEndpoint(t,i,o,a,e,null,null),n}static editDetails(e,t,i,o,a,n,r,l,d){let c=Promise.resolve(null);const p={CategoryName:o,Description:a,Title:i};return c=s.EndpointUtils.callEndpoint(n,r,l,d,e,p,null),c}static getLinkHref(e,t){let i=null,o=e;if(e&&e["@context"]&&(o=e["@context"]),o&&o.links)for(let e=0;e<o.links.length;e++){const s=o.links[e];if(s.rel===t){i=s.href;break}}return i}static getLinkKey(e){let t=null;if(e&&e["@context"]&&e["@context"].key)t=e["@context"].key;else{let i=null;if(e&&e.links)for(let t=0;t<e.links.length;t++){const o=e.links[t];if("self"===o.rel){i=o.href;break}}if(i){const e=i.lastIndexOf("/");t=i.substring(e+1)}}return i.log("Attachment Key Found: "+t),t}static setRestFrameworkVersion(e,t){if(e.response.headers){const o=e.response.headers.get("REST-Framework-Version");i.log("REST Framework Version from Response: "+o),t.RestFrameworkVersion=o}}static createPayloadObject(e,t,i,o,s,n){const r={CategoryName:t,DatatypeCode:"FILE",FileName:o,Title:o};return!e||e!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&e!==a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&e!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&e!==a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE?(r.UploadedFileName=o,r.ContentRepositoryFileShared="false",r.AsyncTrackerId=i):(r.TrackerId=i,r.FileSize=s,r.ContentType=n),r}static isAttachmentFileMonolithDataType(e){return e.DatatypeCode===a.DATATYPE_CODE_FILE&&void 0!==e.UploadedFileContentType}static isAttachmentFileSpectraDataType(e){return e.DatatypeCode===a.DATATYPE_CODE_FILE&&void 0!==e.ContentType}static mimeTypeCalculator(e,t){return t&&""!=t?t:-1===e.indexOf(".")?"application/octet-stream":"application/"+e.substring(e.lastIndexOf(".")+1)}static getDeferredAttachmentId(e){return e.file&&e.file.name&&e.file.lastModified?e.file.name+e.file.lastModified:null}}a.UPLOAD_FILE_EVENT_TYPE_PROGRESS="progress",a.UPLOAD_FILE_EVENT_TYPE_STATE_COMPLETE="uploadComplete",a.CREATE_TYPE_DIRECT="DIRECT",a.CREATE_TYPE_BACKGROUND="BACKGROUND",a.CREATE_TYPE_BACKGROUND_DEFERRED="BACKGROUND_DEFERRED",a.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE="BACKGROUND_DEFERRED_COMPLETE",a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND="SPECTRA_HYBRID_BACKGROUND",a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED="SPECTRA_HYBRID_BACKGROUND_DEFERRED",a.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE="SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE",a.CREATE_TYPE_SPECTRA_BACKGROUND="SPECTRA_BACKGROUND",a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED="SPECTRA_BACKGROUND_DEFERRED",a.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE="SPECTRA_BACKGROUND_DEFERRED_COMPLETE",a.ATTACHMENT_ERROR_API_PARAMETER_CREATE_MODE="ATTACH-0110",a.ATTACHMENT_ERROR_API_PARAMETER_FILE="ATTACH-0111",a.ATTACHMENT_ERROR_API_PARAMETER_ENDPOINT="ATTACH-0112",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_REGISTRATION="ATTACH-0201",a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_REGISTRATION="ATTACH-0202",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_FILE="ATTACH-0203",a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_FILE="ATTACH-0204",a.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE="ATTACH-0205",a.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE="ATTACH-0206",a.ATTACHMENT_ERROR_OPERATION_FAIL_DOWNLOAD="ATTACH-0207",a.ATTACHMENT_ERROR_OPERATION_ERROR_DOWNLOAD="ATTACH-0208",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPDATE="ATTACH-0209",a.ATTACHMENT_ERROR_OPERATION_ERROR_UPDATE="ATTACH-0210",a.ATTACHMENT_ERROR_OPERATION_FAIL_DELETE="ATTACH-0211",a.ATTACHMENT_ERROR_OPERATION_ERROR_DELETE="ATTACH-0212",a.ATTACHMENT_ERROR_OPERATION_FAIL_WEB_IMAGE_DOWNLOAD="ATTACH-0213",a.ATTACHMENT_ERROR_OPERATION_ERROR_WEB_IMAGE_DOWNLOAD="ATTACH-0214",a.ATTACHMENT_ERROR_OPERATION_FAIL_CREATE_LINK="ATTACH-0215",a.ATTACHMENT_ERROR_OPERATION_ERROR_CREATE_LINK="ATTACH-0216",a.ATTACHMENT_ERROR_OPERATION_FAIL_SPECTRA_UPLOAD_REGISTRATION="ATTACH-0217",a.ATTACHMENT_ERROR_OPERATION_ERROR_SPECTRA_UPLOAD_REGISTRATION="ATTACH-0218",a.ATTACHMENT_ERROR_OPERATION_FAIL_SPECTRA_FETCH_UPLOAD_FILE="ATTACH-0219",a.ATTACHMENT_ERROR_OPERATION_ERROR_SPECTRA_FETCH_UPLOAD_FILE="ATTACH-0220",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_REGISTRATION_RESPONSE="ATTACH-0221",a.ATTACHMENT_ERROR_OPERATION_ERROR_GET_CATEGORIES="ATTACH-0222",a.ATTACHMENT_ERROR_OPERATION_FAIL_GET_CATEGORIES="ATTACH-0223",a.ATTACHMENT_ERROR_OPERATION_ERROR_RETRIEVE="ATTACH-0224",a.ATTACHMENT_ERROR_OPERATION_FAIL_RETRIEVE="ATTACH-0225",a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_FILE_DIRECT="ATTACH-0226",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_FILE_DIRECT="ATTACH-0227",a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_FILE_ENCLOSURE_DIRECT="ATTACH-0228",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_FILE_ENCLOSURE_DIRECT="ATTACH-0229",a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_DIRECT_REGISTRATION="ATTACH-0230",a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_DIRECT_REGISTRATION="ATTACH-0231",a.ATTACHMENT_ERROR_OPERATION_ERROR_GET_PREVIEW_PAGES="ATTACH-0232",a.ATTACHMENT_ERROR_OPERATION_FAIL_GET_PREVIEW_PAGES="ATTACH-0233",a.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNKIFY="ATTACH-0234",a.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNKIFY="ATTACH-0235",a.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNK="ATTACH-0236",a.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNK="ATTACH-0237",a.ATTACHMENT_ERROR_OPERATION_ERROR_FETCH_UPLOAD_FILE_CHUNK_REASSEMBLE="ATTACH-0238",a.ATTACHMENT_ERROR_OPERATION_FAIL_FETCH_UPLOAD_FILE_CHUNK_REASSEMBLE="ATTACH-0239",a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_CREATE_LINK="errorAttachmentUpload",a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_DOWNLOAD="errorAttachmentDownload",a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT_ENCLOSURE="errorAttachmentUpload",a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT="errorAttachmentUpload",a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT_REGISTRATION="errorAttachmentUploadRegistration",a.TRACKER_PREFIX_DIRECT_ENCLOSURE="DirectEnclosure-",a.DATATYPE_CODE_FILE="FILE",a.DATATYPE_CODE_LINK="WEB_PAGE",a.TITLE_LINK_DEFAULT="Attachment Link",a._uploadFileDirect=(e,t,o,n,r,l,d,c,p)=>{for(let u=0;u<e.length;u++){const h=e[u],m=h.name;h.lastModified;let g="UploadingTracker"+(h.name+h.lastModified);if(r){g=a.TRACKER_PREFIX_DIRECT_ENCLOSURE+g;const e={CategoryName:t,DatatypeCode:"FILE",FileName:m,Title:m};s.EndpointUtils.callEndpoint(o,n,null,null,null,e,null).then(e=>{if(e.response.ok){i.log("Attachment Record creation via fetch completed successfully");const o=a.getLinkKey(e.body),n=e.body.AttachedDocumentId;p.uploadListener(e.body.AttachedDocumentId,m,a.mimeTypeCalculator(h.name,h.type),h.size,g,a.CREATE_TYPE_DIRECT,e.body,null);s.EndpointUtils.callEndpoint(r,l,null,d,o,h,null).then(o=>{if(o.response.ok){i.log("Create Attachment Enclosure via fetch completed successfully");const s=e.body;a.isAttachmentFileMonolithDataType(s)?s.UploadedFileLength=h.size:a.isAttachmentFileSpectraDataType(s)&&(s.FileSize=h.size),a.setRestFrameworkVersion(o,s),p.uploadEventListener({attachment:s,createMode:c,data:null,deferredResponse:null,file:h,id:g,message:null,percent:null,type:a.UPLOAD_FILE_EVENT_TYPE_STATE_COMPLETE,user:null,category:t})}else i.error("Error response during create Attachment Enclosure."),p.fileErrorListener(a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_FILE_ENCLOSURE_DIRECT,n,g,null,o,p.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT_ENCLOSURE))}).catch(e=>{i.error("Error occurred during create Attachment Enclosure. "),i.error(e),p.fileErrorListener(a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_FILE_ENCLOSURE_DIRECT,n,g,e,null,p.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT_ENCLOSURE))})}else i.error("Error response during create Attachment Record."),p.fileErrorListener(a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_DIRECT_REGISTRATION,null,g,null,e,p.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT_REGISTRATION))}).catch(e=>{i.error("Error occurred during create Attachment Record."),i.error(e),p.fileErrorListener(a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_DIRECT_REGISTRATION,null,g,e,null,p.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT_REGISTRATION))})}else{const e=new FileReader;e.onload=e=>{const r=e.target.result,l={CategoryName:t,DatatypeCode:"FILE",FileContents:a._arrayBufferToBase64(r),FileName:m,Title:m};s.EndpointUtils.callEndpoint(o,n,null,null,null,l,null).then(e=>{if(e.response.ok){i.log("Create Attachment Enclosure via fetch completed successfully");const o=e.body;o.UploadedFileLength=h.size,p.uploadEventListener({attachment:o,createMode:c,data:null,deferredResponse:null,file:h,id:g,message:null,percent:null,type:a.UPLOAD_FILE_EVENT_TYPE_STATE_COMPLETE,user:null,category:t})}else i.error("Error occurred during create Attachment."),p.fileErrorListener(a.ATTACHMENT_ERROR_OPERATION_FAIL_UPLOAD_FILE_DIRECT,null,g,null,e,p.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT))}).catch(e=>{i.error("Error occurred during create Attachment. "),i.error(e),p.fileErrorListener(a.ATTACHMENT_ERROR_OPERATION_ERROR_UPLOAD_FILE_DIRECT,null,g,e,null,p.getTranslation(a.ATTACHMENT_TRANSLATION_KEY_ERROR_OPERATION_UPLOAD_DIRECT))})},e.readAsArrayBuffer(h)}}},a._arrayBufferToBase64=e=>{let t="";const i=new Uint8Array(e),o=i.byteLength;for(let e=0;e<o;e++)t+=String.fromCharCode(i[e]);return window.btoa(t)},t.AttachmentManager=a})),define("oj-sp/attachments-common/private/ComponentUtils",["require","exports","ojs/ojlogger"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentUtils=void 0;t.ComponentUtils=class{static formatSize(e){const t=["B","KB","MB","GB","TB"];let o,s=null;try{if("number"==typeof e&&isNaN(e)||null==e)return null;if("string"==typeof e){if(s=parseInt(e),isNaN(s))return null}else s=e}catch(e){i.error(e)}for(o=0;s>=1024&&o<4;o++)s/=1024;return null===s?null:s.toFixed(2)+" "+t[o]}}})),define("oj-sp/attachments-common/private/AttachmentUploadFileHelper",["require","exports","./AttachmentManager","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentUploadFileHelper=void 0;t.AttachmentUploadFileHelper=class{getTranslation(e){return o[e]}fileErrorListener(e,t,i,o,s,a,n){const r={detail:n,error:o,errorCode:e,response:s,summary:a};this.promiseReject(r)}uploadEventListener(e){if(e.type===i.AttachmentManager.UPLOAD_FILE_EVENT_TYPE_STATE_COMPLETE&&e.createMode&&(e.createMode===i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||e.createMode===i.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE||e.createMode===i.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE)){const t=i.AttachmentManager.createPayloadObject(e.createMode,this.defaultCategory,e.id,e.file.name,e.file.size,i.AttachmentManager.mimeTypeCalculator(e.file.name,e.file.type));this.promiseResolve(t)}}uploadDeferredListener(e){for(let t=0;t<e.length;t++){const o=e[t];if(o.createMode&&(o.createMode===i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||o.createMode===i.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED||o.createMode===i.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED)){const e=i.AttachmentManager.createPayloadObject(o.createMode,this.defaultCategory,o.trackerId,o.filename,o.fileSize,o.contentType);this.promiseResolve(e)}}}uploadListener(e,t,o,s,a,n,r,l){!n||n!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&n!==i.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND&&n!==i.AttachmentManager.CREATE_TYPE_BACKGROUND||this.promiseResolve(r)}stopUploadListener(e){this.promiseReject("Attachment File Upload has been stopped by external process")}addFile(e,t,o,s,a,n,r,l,d,c,p,u){this.defaultCategory=t;const h=this;return new Promise((m,g)=>{h.promiseResolve=m,h.promiseReject=g,i.AttachmentManager.uploadFile([e],t,o,s,a,n,null,null,null,null,r,l,d,c,p,u,null,null,null,null,null,null,null,null,null,null,h)})}}})),define("oj-sp/attachments-common/public/AttachmentPublic",["require","exports","oj-sp/attachments-common/private/AttachmentManager","oj-sp/attachments-common/private/AttachmentUploadFileHelper"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentPublic=void 0;t.AttachmentPublic=class{static attachFile(e,t,s,a,n,r,l,d,c){if(s&&s!==i.AttachmentManager.CREATE_TYPE_BACKGROUND&&s!==i.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED&&s!==i.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE&&s!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&s!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&s!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE){const e={detail:"Create Mode: "+s+" is not supported in this interface.",errorCode:i.AttachmentManager.ATTACHMENT_ERROR_API_PARAMETER_CREATE_MODE,summary:"Unsupported createMode for AttachmentPublic.addAttachmentFile"};return Promise.reject(e)}if(!e){const e={detail:"File parameter must be provided.",errorCode:i.AttachmentManager.ATTACHMENT_ERROR_API_PARAMETER_FILE,summary:"Invalid parameters"};return Promise.reject(e)}if(!(s!==i.AttachmentManager.CREATE_TYPE_BACKGROUND&&s!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||a&&d)){const e={detail:"createEndpoint and backgroundUploadEndpoint must be provided for BACKGROUND or SPECTRA_HYBRID_BACKGROUND createMode.",errorCode:i.AttachmentManager.ATTACHMENT_ERROR_API_PARAMETER_ENDPOINT,summary:"Invalid parameters"};return Promise.reject(e)}if(!(s!==i.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED&&s!==i.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE&&s!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&s!==i.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||l&&d)){const e={detail:"backgroundTrackerEndpoint and backgroundUploadEndpoint must be provided for BACKGROUND_DEFERRED or BACKGROUND_DEFERRED_COMPLETE or SPECTRA_HYBRID_BACKGROUND_DEFERRED or SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE createMode.",errorCode:i.AttachmentManager.ATTACHMENT_ERROR_API_PARAMETER_ENDPOINT,summary:"Invalid parameters"};return Promise.reject(e)}return(new o.AttachmentUploadFileHelper).addFile(e,t,s,a,n,null,r,l,null,d,c,null)}}})),define("text!oj-sp/attachments-simple/attachments-simple-view.html",[],(function(){return'<html><head></head><body><div :id="[[\'attachmentsContainer\' + $uniqueId]]"><oj-popup :id="[[\'fndAttachmentsMobileLinkPopup\' + $uniqueId]]"modality="modal"class="oj-sp-attachments-simple-popup"><div class="oj-flex oj-sm-margin-2x oj-sm-flex-items-initial oj-sm-justify-content-space-between"><div class="oj-flex-item"><oj-button :id="[[\'cancelMobileLinkButton\' + $uniqueId]]"on-oj-action="[[attachmentLinkCancel]]"><span><oj-bind-text value="[[res().cancel]]"></oj-bind-text></span></oj-button></div><div class="oj-flex-item"><oj-button :id="[[\'saveMobileLinkButton\' + $uniqueId]]"on-oj-action="[[attachmentLinkMobileSave]]"><span><oj-bind-text value="[[res().attach]]"></oj-bind-text></span></oj-button></div></div><div class="oj-flex"><div class="oj-flex-item"><h2 class="oj-header-border"><oj-bind-text value="[[res().AA_ATTACH_URL_HEADING]]"></oj-bind-text></h2></div></div><div class="oj-flex oj-sm-flex-direction-column"><div class="oj-flex-item"><oj-sp-input-url value="{{ attachmentLinkUrl }}"label-edge="inside"validators="[[ [ urlAsyncLengthValidator ] ]]"display-options.validator-hint="none":id="[[\'attachmentMobileLinkUrl\' + $uniqueId]]"></oj-sp-input-url></div></div></oj-popup><oj-dialog :id="[[\'fndAttachmentsDeleteConfirmDialog_\' + $uniqueId]]"dialog-title="[[res().removeDialogHeader]]"on-oj-close="[[deleteAttachmentCancel]]"class="oj-sp-attachments-simple-delete-confirm-dialog"><div slot="body"><oj-bind-text value="[[res().DELETE_CONFIRM]]"></oj-bind-text></div><div slot="footer"><oj-button on-oj-action="[[deleteAttachmentCancel]]"class="oj-sm-margin-2x"><span><oj-bind-text value="[[res().cancel]]"></oj-bind-text></span></oj-button><oj-button on-oj-action="[[deleteAttachmentConfirm]]"class="oj-sm-margin-2x"chroming="danger"><span><oj-bind-text value="[[res().attachmentsRemove]]"></oj-bind-text></span></oj-button></div></oj-dialog><div :id="[[\'attachments\' + $uniqueId]]"><oj-messages :id="[[\'attachmentsMessages_\' + $uniqueId]]"messages="[[uiMessagesDataProvider]]"display-options.category="none"></oj-messages><div class="oj-sm-only-hide":style.display="[[!$properties.readOnly &amp;&amp; uploadingFiles().length <= 0 ? \'\' : \'none\']]"><oj-file-picker :id="[[\'attachmentsFilePicker\' + $uniqueId]]"class="oj-sp-attachments-filepicker-desktop"accept="{{acceptArr}}"selection-mode="{{multipleStr}}"on-oj-select="[[selectListener]]"primary-text="[[res().addFilePrimaryText]]"secondary-text="[[res().addFileSecondaryText]]"disabled="[[$properties.disabled]]"></oj-file-picker><div :id="[[\'attachmentLinkDesktopContainer\' + $uniqueId]]"><div class="oj-flex-bar oj-sm-margin-2x-top"><oj-sp-input-url class="oj-sm-margin-2x-end oj-sp-attachments-link-desktop"auto-focus="false"value="{{ attachmentLinkUrl }}"label-edge="inside"disabled="[[$properties.disabled]]"validators="[[ [ urlAsyncLengthValidator ] ]]"display-options.validator-hint="none":id="[[\'attachmentLinkUrl\' + $uniqueId]]"></oj-sp-input-url><oj-button :id="[[\'saveLinkButton\' + $uniqueId]]"class="oj-flex-bar-end oj-button-lg"disabled="[[$properties.disabled]]"on-oj-action="[[attachmentLinkSave]]"><span><oj-bind-text value="[[res().addUrl]]"></oj-bind-text></span></oj-button></div></div></div><div class="oj-md-hide":style.display="[[!$properties.readOnly ? \'\' : \'none\']]"><div class="oj-flex oj-sm-flex-direction-column":style.display="[[uploadingFiles().length <= 0 ? \'\' : \'none\']]"><div class="oj-flex-item"><oj-file-picker :id="[[\'attachmentsMobileFilePicker\' + $uniqueId]]"accept="{{acceptArr}}"class="oj-sp-attachments-mobile-operation-button"select-on="click"selection-mode="{{multipleStr}}"on-oj-select="[[selectListener]]"><oj-button class="oj-sp-attachments-mobile-operation-button":id="[[\'attachmentsMobileFile\' + $uniqueId]]"disabled="[[$properties.disabled]]"slot="trigger"><span><oj-bind-text value="[[res().addFiles]]"></oj-bind-text></span></oj-button></oj-file-picker></div><div class="oj-flex-item oj-sm-padding-4x-top"><oj-button class="oj-sp-attachments-mobile-operation-button":id="[[\'attachmentsMobileLink\' + $uniqueId]]"on-oj-action="[[addMobileLink]]"disabled="[[$properties.disabled]]"><span><oj-bind-text value="[[res().addUrl]]"></oj-bind-text></span></oj-button></div></div></div><div :style.display="[[uploadingFiles().length > 0 ? \'\' : \'none\']]"><div class="oj-flex oj-sm-justify-content-flex-end oj-md-hide"></div><oj-list-view :id="[[\'uploadsList\' + $uniqueId]]"data="[[uploadsDataSource]]":aria-label="[[res().attachmentsList]]"><template slot="itemTemplate"data-oj-as="item"><div class="oj-flex oj-sm-margin-2x":aria-label="[[ item.data.Title ]]"><div class="oj-flex-item oj-sm-4 oj-md-2 oj-sp-attachments-upload-row-display-text"><span><oj-bind-text value="[[item.data.Title]]"></oj-bind-text></span></div><div class="oj-flex-item oj-sm-2 oj-md-1"><span><oj-bind-text value="[[getSizeInBKMGT(item.data.Size)]]"></oj-bind-text></span></div><div class="oj-flex-item oj-sm-1 oj-md-2"></div><div class="oj-flex-item oj-sm-3 oj-md-3"><oj-progress-bar value="{{item.data.progress}}"></oj-progress-bar></div><div class="oj-flex-item oj-sm-1 oj-md-2"></div><div class="oj-flex-item oj-sm-1 oj-md-2"><div class="oj-flex oj-sm-justify-content-flex-end"><div class="oj-flex-item oj-sm-only-hide"></div><div class="oj-flex-item oj-md-hide"></div></div></div></div></template></oj-list-view></div><div class="oj-sp-attachments-list-wrapper oj-sm-margin-4x-top"><oj-list-view :id="[[\'attachmentsList\' + $uniqueId]]"data="[[attachmentsUploadedDataSource]]"selection-mode="[[$properties.readOnly ? \'none\' : \'single\']]":aria-label="[[res().attachmentsList]]"gridlines.item="visible"><template slot="itemTemplate"data-oj-as="item"><div class="oj-flex oj-sm-flex-items-initial oj-sm-align-items-center":aria-label="[[ item.data.DatatypeCode === \'WEB_PAGE\' ? item.data.Url : item.data.Title ]]"><div class="oj-flex oj-sm-1 oj-md-hide"><div :class="[[decodeUploadFileImageSrc(item.data.DatatypeCode)]]"></div></div><div class="oj-flex oj-sm-8 oj-md-9 oj-lg-10 oj-sm-only-flex-direction-column"><div class="oj-flex-item oj-md-7 oj-sp-attachments-row-display-text oj-md-align-self-center oj-sm-justify-content-flex-start"><div :class="[[ `oj-sm-float-start ` + decodeUploadInlineFileImageSrc(item.data.DatatypeCode) ]]"></div><div :style.display="[[item.data.DatatypeCode === \'WEB_PAGE\' ? \'none\' : \'\']]"><oj-bind-text value="[[item.data.Title]]"></oj-bind-text></div><a target="_blank":style.display="[[item.data.DatatypeCode === \'WEB_PAGE\' ? \'\' : \'none\']]":href="[[item.data.Url]]"><oj-bind-text value="[[item.data.Url]]"></oj-bind-text></a></div><div class="oj-flex-item oj-md-5 oj-md-align-self-center"><div><oj-bind-text value="[[uploadedByDate(updatedByVisibility(), item.data.LastUpdatedBy, item.data.LastUpdateDate)]]"></oj-bind-text></div><div class="oj-typography-body-md oj-text-color-secondary":style.display="[[item.data.DatatypeCode === \'FILE\' ? \'\' : \'none\']]"><oj-bind-text value="[[(item.data.FileSize) ? getSizeInBKMGT(item.data.FileSize) : getSizeInBKMGT(item.data.UploadedFileLength)]]"></oj-bind-text></div></div></div><div class="oj-flex-item oj-sm-3 oj-md-3 oj-lg-2 oj-sm-align-self-center oj-sm-justify-content-flex-end"><div class="oj-flex-bar"><div class="oj-flex-bar-end"><oj-toolbar data-oj-clickthrough="disabled"><oj-button :id="[[\'attachmentsListDownload_\' + $uniqueId + \'_\' + item.data.AttachedDocumentId]]"on-oj-action="[[function() { downloadAttachment(item.data) }]]":style.visibility="[[downloadAttachmentAvailable(item.data) ? \'\' : \'hidden\']]"chroming="borderless"display="icons"disabled="[[$properties.disabled]]"><span><oj-bind-text value="[[ res().download ]]"></oj-bind-text></span><span :id="[[\'attachmentsListDownloadIcon_\' + $uniqueId + \'_\' + item.data.AttachedDocumentId]]"slot="startIcon"class="oj-ux-ico-download"></span></oj-button><oj-button :id="[[\'attachmentsListDelete_\' + $uniqueId + \'_\' + item.data.AttachedDocumentId]]"on-oj-action="[[function() { deleteAttachment(item.data) }]]":style.visibility="[[!$properties.readOnly ? \'\' : \'hidden\']]"chroming="borderless"display="icons"disabled="[[$properties.disabled]]"><span><oj-bind-text value="[[ res().attachmentsRemove ]]"></oj-bind-text></span><span slot="startIcon"class="oj-ux-ico-delete-circle"></span></oj-button></oj-toolbar></div></div></div></div></template></oj-list-view></div></div></div></body></html>'})),define("text!oj-sp/attachments-simple/component.json",[],(function(){return'{"name":"attachments-simple","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Simple Attachments","description":"Component to allow attachment of files and URLs to business objects","type":"composite","dependencies":{"oj-sp-attachments-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"properties":{"createMode":{"description":"The mode Attachments should operate in.","type":"string","value":"DIRECT","enumValues":["DIRECT","BACKGROUND","BACKGROUND_DEFERRED","BACKGROUND_DEFERRED_COMPLETE","SPECTRA_BACKGROUND","SPECTRA_BACKGROUND_DEFERRED","SPECTRA_BACKGROUND_DEFERRED_COMPLETE","SPECTRA_HYBRID_BACKGROUND","SPECTRA_HYBRID_BACKGROUND_DEFERRED","SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE"],"propertyEditorValues":{"DIRECT":{"displayName":"Direct"},"BACKGROUND":{"displayName":"Background"},"BACKGROUND_DEFERRED":{"displayName":"Background Deferred"},"BACKGROUND_DEFERRED_COMPLETE":{"displayName":"Background Deferred Complete"},"SPECTRA_BACKGROUND":{"displayName":"Spectra-Hybrid Background"},"SPECTRA_BACKGROUND_DEFERRED":{"displayName":"Spectra-Hybrid Background Deferred"},"SPECTRA_BACKGROUND_DEFERRED_COMPLETE":{"displayName":"Spectra-Hybrid Background Deferred Complete"}},"displayName":"Create Mode","propertyGroup":"common"},"createPayload":{"description":"The create payload is provided when createMode property is set to deferred.  The contents should be sent to the Attachments REST service once the parent business record has been created to allow deferred Attachments to be linked correctly to the business record.","type":"Array","writeback":true,"displayName":"Create Payload","propertyGroup":"common"},"category":{"description":"The default attachment category that items will be assigned.","type":"string","displayName":"Category","propertyGroup":"common"},"readOnly":{"description":"Set Attachments into read only view.","type":"boolean","displayName":"Read Only","propertyGroup":"common"},"disabled":{"description":"Set Attachments into disabled view.","type":"boolean","displayName":"Disabled","propertyGroup":"common"},"get":{"description":"The Attachments endpoint for retrieving data for attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for retrieving data for attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters required for the getEndpoint.  Default value is an empty object (no parameters).","type":"object"}},"displayName":"Get","propertyGroup":"data"},"create":{"description":"The Attachments endpoint for creating data for attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for creating data for attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters required for the createEndpoint.  Default value is an empty object (no parameters).","type":"object"}},"displayName":"Create","propertyGroup":"data"},"createEnclosure":{"description":"The Attachments endpoint for uploading attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for uploading attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the createEnclosureEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for create enclosure endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Create Enclosure","propertyGroup":"data"},"delete":{"description":"The Attachments endpoint for deleting attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for deleting attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the deleteEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for delete endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Delete","propertyGroup":"data"},"enclosure":{"description":"The Attachments endpoint for downloading attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for downloading attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the enclosureEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for enclosure endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Enclosure","propertyGroup":"data"},"backgroundTracker":{"description":"The Attachments endpoint for tracking background uploads.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for tracking background uploads.","type":"string"}},"displayName":"Background Tracker","propertyGroup":"data"},"backgroundUpload":{"description":"The Attachments endpoint for background uploads.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for background uploads.","type":"string"},"endpointTrackerParamName":{"description":"The name of the parameter required for background uploads endpoint (Spectra-Hybrid endpoints only).  Default value is TrackerId.","type":"string"}},"displayName":"Background Upload","propertyGroup":"data"},"entityName":{"description":"For use with createMode attribute set to SPECTRA_BACKGROUND_DEFERRED for spectra-hybrid version of attachments.  Entity attribute provides the document entity mapping name that is will be used to determine repository for storage of attachments objects.","type":"string","displayName":"Entity Name","propertyGroup":"data"},"translations":{"description":"Instance Overrides of Strings","writeback":false,"type":"object","properties":{}},"updatedByVisibility":{"description":"Hide the last updated name column","type":"string","value":"visible","enumValues":["visible","hidden"],"propertyEditorValues":{"visible":{"displayName":"Visible"},"hidden":{"displayName":"Hidden"}},"displayName":"UpdatedBy Visibility","propertyGroup":"common"}},"events":{"attachmentsOperation":{"description":"A signal event that fires whenever the CCA completes an attachment creation or deletion.  This event only fires when createMode is DIRECT, BACKGROUND or SPECTRA_BACKGROUND.","bubbles":true,"cancelable":true,"detail":{}}},"methods":{"refresh":{"description":"A function to re-load the attachments data.","internalName":"_refresh","params":[],"return":"boolean"}},"slots":{},"extension":{"catalog":{"category":"Redwood Controls & Navigation","status":"Pre-production","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Simple%20Attachments&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraattachmentssimple.html","coverImage":"extension/catalog/images/ico-attachments.svg"},"vbdt":{"componentPalette":{"visibility":"never"}}},"icon":{"iconPath":"extension/catalog/images/ico-attachments.svg"}}'})),define("css!oj-sp/input-url/input-url-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/input-url/input-url",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojasyncvalidator-regexp","ojs/ojvcomponent","ojs/ojvcomponent-binding","preact","css!./input-url-styles","ojs/ojinputtext"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputUrl=void 0;class r{format(e){return e}parse(e){return 0===e.trim().length||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("ssh://")||e.indexOf("://")>-1||(e="http://"+e),e}}let l=class extends n.Component{constructor(e){var t;let a;if(super(e),this.valueChangeHandler=e=>{var t,i;null===(i=(t=this.props).onValueChanged)||void 0===i||i.call(t,e.detail.value)},this.rawValueChangeHandler=e=>{var t,i;null===(i=(t=this.props).onRawValueChanged)||void 0===i||i.call(t,e.detail.value)},this.validChangedListener=e=>{var t,i;null===(i=(t=this.props).onValidChanged)||void 0===i||i.call(t,e.detail.value)},this.setInputElem=e=>{this.inputElem=e},this.setLinkElem=e=>{this.linkElem=e},this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:"input_url"+(0,s.getUniqueId)(),this.res=Object.assign({},i),this.urlConverter=new r,a=this.props.translations?this.props.translations.errorMessage:this.res.errorMessageUrl,this.urlPatternValidator=[new o({hint:"",messageDetail:a,pattern:"^((?:https?|ftp|ssh)://)(?:\\S+(?::\\S*)?@)?(?:(?!-)(?:[-a-z0-9\\u00a1-\\uffff]*(?!-|\\.).)\\.)+(?:(?:(?!-)[-a-z0-9\\u00a1-\\uffff]{1,5}(?!-|\\.|\\s|/).)|[0-9])(?::\\d{2,5})?(?:/\\S*)?$"})],this.props.validators){const e=this.props.validators.values();for(const t of e)this.urlPatternValidator.push(t)}}render(e){const t=e.displayOptions,i=e.labelHint?e.labelHint:this.res.url;if(e.readonly){let t;return"inside"===e.labelEdge&&(t=(0,n.h)("oj-label",{id:this.uniqueId+"_label",for:this.uniqueId+"_url",class:"oj-typography-body-xs oj-typography-semi-bold"},(0,n.h)("span",null,i))),(0,n.h)("div",null,t,(0,n.h)("div",{class:"oj-sp-input-url-field-readonly-div",key:this.uniqueId+"_link"},(0,n.h)("a",{id:this.uniqueId+"_url",title:e.value,href:encodeURI(e.value),target:"_blank",class:"oj-link oj-sp-input-url-link",ref:this.setLinkElem,rel:"noopener noreferrer"},(0,n.h)("span",null,e.value))))}return(0,n.h)("div",{class:"oj-sp-input-url-container"},(0,n.h)("oj-input-text",{ref:this.setInputElem,id:this.uniqueId+"_url",labelHint:i,labelEdge:e.labelEdge,labelledBy:e.labelledBy,class:"oj-sp-input-url-truncation",readonly:e.readonly,value:e.value,onvalueChanged:this.valueChangeHandler,placeholder:e.placeholder,disabled:e.disabled,required:e.required,help:e.help,helpHints:e.helpHints,converter:this.urlConverter,onvalidChanged:this.validChangedListener,autocomplete:"url",virtualKeyboard:"url",autofocus:e.autoFocus,validators:this.urlPatternValidator,onrawValueChanged:this.rawValueChangeHandler,userAssistanceDensity:e.userAssistanceDensity,displayOptions:t}))}focus(){this.props.readonly?this.linkElem.focus():this.inputElem.focus()}refresh(){this.inputElem&&this.inputElem.refresh()}reset(){this.inputElem&&this.inputElem.reset()}showMessages(){this.inputElem&&this.inputElem.showMessages()}validate(){if(this.inputElem)return this.inputElem.validate()}};l.defaultProps={autoFocus:!0,disabled:!1,labelEdge:"inside",readonly:!1,required:!1,userAssistanceDensity:"reflow"},l._metadata={properties:{autoFocus:{type:"boolean"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string"},validatorHint:{type:"string"}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"}}},labelEdge:{type:"string",enumValues:["none","inside","provided"],binding:{consume:{name:"labelEdge"},provide:[{name:"labelEdge",default:"inside",transform:{top:"provided",start:"provided"}}]}},labelHint:{type:"string"},labelledBy:{type:"string"},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},readonly:{type:"boolean",binding:{consume:{name:"readonly"},provide:[{name:"readonly",default:!1}]}},required:{type:"boolean"},translations:{type:"object",properties:{errorMessage:{type:"string"}}},userAssistanceDensity:{type:"string",enumValues:["reflow","compact","efficient"],binding:{consume:{name:"userAssistanceDensity"},provide:[{name:"userAssistanceDensity",default:"reflow"}]}},valid:{type:"string",enumValues:["invalidHidden","invalidShown","valid","pending"],readOnly:!0,writeback:!0},validators:{type:"Array<any>"},value:{type:"string",writeback:!0}},extension:{_WRITEBACK_PROPS:["rawValue","valid","value"],_READ_ONLY_PROPS:["rawValue","valid"],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{focus:{},refresh:{},reset:{},showMessages:{},validate:{}}},l=__decorate([(0,s.customElement)("oj-sp-input-url"),__metadata("design:paramtypes",[Object])],l),t.InputUrl=l})),define("oj-sp/input-url/loader",["require","exports","./input-url"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputUrl=void 0,Object.defineProperty(t,"InputUrl",{enumerable:!0,get:function(){return i.InputUrl}})})),define("oj-sp/attachments-simple/attachments-simple-viewModel",["require","exports","knockout","ojs/ojarraydataprovider","ojs/ojcontext","ojs/ojdeferreddataprovider","ojs/ojlogger","ojs/ojtranslation","ojs/ojresponsiveutils","ojs/ojresponsiveknockoututils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/attachments-common/private/AttachmentManager","oj-sp/attachments-common/private/ComponentUtils","oj-sp/attachments-common/private/EndpointUtils","ojs/ojasyncvalidator-length","ojs/ojknockout","ojs/ojarraydataprovider","ojs/ojarraytabledatasource","ojs/ojbutton","ojs/ojdialog","ojs/ojfilepicker","ojs/ojinputtext","ojs/ojlistview","ojs/ojpopup","ojs/ojprogress-bar","ojs/ojtimezonedata","oj-sp/input-url/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentsSimpleViewModel=void 0;t.AttachmentsSimpleViewModel=class{constructor(e){this.attachmentsUploadedDataSource=null,this.uploadingFiles=i.observableArray(),this.uploadsDataSource=new o(this.uploadingFiles,{idAttribute:"AttachedDocumentId"}),this.attachmentLinkInputVisible=i.observable(!1),this.attachmentLinkUrl=i.observable(),this.attachmentLinkUrlValid=i.observable(),this.attachmentMobileLinkUrlValid=i.observable(),this.updatedByVisibility=i.observable("visible"),this.attachmentLinkSaveEnabled=!0,this.acceptArr=i.pureComputed(()=>{const e=this.acceptStr();return e?e.split(","):[]},this),this.multipleStr=i.pureComputed(()=>this.multiple()?"multiple":"single",this),this.getEndpoint=null,this.getEndpointParams=null,this.createEndpoint=null,this.createEndpointParams=null,this.createEnclosureEndpoint=null,this.createEnclosureEndpointAttachmentParamName=null,this.createEnclosureEndpointParams=null,this.deleteEndpoint=null,this.deleteEndpointAttachmentParamName=null,this.deleteEndpointParams=null,this.enclosureEndpoint=null,this.enclosureEndpointAttachmentParamName=null,this.enclosureEndpointParams=null,this.createMode=null,this.createPayload=null,this.backgroundTrackerEndpoint=null,this.backgroundUploadEndpoint=null,this.backgroundUploadEndpointTrackerParamName=null,this.entityName=null,this.positionProperty="position",this.attachmentDefaultCategory=null,this.units=["B","KB","MB","GB","TB"],this.acceptStr=i.observable(""),this.multiple=i.observable(!0),this.uiMessagesArray=i.observableArray(),this.uiMessagesDataProvider=new o(this.uiMessagesArray),this.attachmentsUploadedArray=i.observableArray(),this.attachmentsUploadedArrayDataProvider=new o(this.attachmentsUploadedArray,{idAttribute:"AttachedDocumentId"}),this.mdQuery=l.getFrameworkQuery(l.FRAMEWORK_QUERY_KEY.MD_UP),this.mdUpScreen=d.createMediaQueryObservable(this.mdQuery),this.propertyChanged=e=>{if("external"===e.updatedFrom){const t=e.property;let i=null;e&&e.subproperty&&(i=e.subproperty.path),"category"===t?this.attachmentDefaultCategory=e.value:"createMode"===t?this.createMode=e.value:"createPayload"===t?this.createPayload=e.value?[...e.value]:[]:"entityName"===t?this.entityName=e.value:"get"===t?"get.endpoint"===i?this.getEndpoint=e.subproperty.value:"get.endpointParams"===i&&(this.getEndpointParams=e.subproperty.value):"create"===t?"create.endpoint"===i?this.createEndpoint=e.subproperty.value:"create.endpointParams"===i&&(this.createEndpointParams=e.subproperty.value):"createEnclosure"===t?"createEnclosure.endpoint"===i?this.createEnclosureEndpoint=e.subproperty.value:"createEnclosure.endpointAttachmentParamName"===i?this.createEnclosureEndpointAttachmentParamName=e.subproperty.value:"createEnclosure.endpointParams"===i&&(this.createEnclosureEndpointParams=e.subproperty.value):"delete"===t?"delete.endpoint"===i?this.deleteEndpoint=e.subproperty.value:"delete.endpointAttachmentParamName"===i?this.deleteEndpointAttachmentParamName=e.subproperty.value:"delete.endpointParams"===i&&(this.deleteEndpointParams=e.subproperty.value):"enclosure"===t?"enclosure.endpoint"===i?this.enclosureEndpoint=e.subproperty.value:"enclosure.endpointAttachmentParamName"===i?this.enclosureEndpointAttachmentParamName=e.subproperty.value:"enclosure.endpointParams"===i&&(this.enclosureEndpointParams=e.subproperty.value):"backgroundTracker"===t?"backgroundTracker.endpoint"===i&&(this.backgroundTrackerEndpoint=e.subproperty.value):"backgroundUpload"===t?"backgroundUpload.endpoint"===i?this.backgroundUploadEndpoint=e.subproperty.value:"backgroundUpload.endpointTrackerParamName"===i&&(this.backgroundUploadEndpointTrackerParamName=e.subproperty.value):"translations"===t?this.res(Object.assign(Object.assign({},c),e.value)):"updatedByVisibility"===t&&this.updatedByVisibility(e.value),this.initProvider(t,i,!1)}},this._refresh=()=>(n.info("Refresh requested for Attachments Simple CCA"),this.attachmentsUploadedArray.removeAll(),this.initProvider(null,null,!0),!0),this.uploadedByDate=(e,t,i)=>{let o="",s=i;try{if(i){s=new Date(i).toLocaleDateString()}}catch(e){n.warn("Error attempting to parse uploaded date for attachments implementation."),n.log(e)}return o=t&&e&&"visible"===e?r.applyParameters(this.res().lastUpdateByDate,{date:s,username:t}):r.applyParameters(this.res().lastUpdateDate,{date:s}),o},this.selectListener=e=>{const t=e.detail.files;this.busyStateUpload=this.openBusyState("Attachments CCA uploading attachments."),p.AttachmentManager.uploadFile(t,this.attachmentDefaultCategory,this.createMode,this.createEndpoint,this.createEndpointParams,null,this.createEnclosureEndpoint,this.createEnclosureEndpointParams,this.createEnclosureEndpointAttachmentParamName,null,this.entityName,this.backgroundTrackerEndpoint,null,this.backgroundUploadEndpoint,this.backgroundUploadEndpointTrackerParamName,null,null,null,null,null,null,null,null,null,null,null,this)},this.stopUploading=e=>{const t=this.uploadingFiles();for(let i=0;i<t.length;i++)if(t[i].AttachedDocumentId===e){this.uploadingFiles.remove(t[i]);break}},this.stopAllUploading=()=>{const e=[],t=[],i=[];for(let o=0;o<this.uploadingFiles().length;o++)t.push(this.uploadingFiles()[o].BackgroundTrackerId),i.push(this.uploadingFiles()[o].AttachedDocumentId),e.push(this.uploadingFiles()[o].xhr);this.uploadingFiles.removeAll()},this.downloadAttachmentAvailable=e=>{let t=!1;if("WEB_PAGE"===e.DatatypeCode)t=!1;else{p.AttachmentManager.getLinkKey(e)&&(t=!0)}return t},this.decodeUploadInlineFileImageSrc=e=>{let t=this.decodeUploadFileImageSrc(e);return t+=" oj-sm-only-hide",t},this.decodeUploadFileImageSrc=e=>{let t="oj-ux-ico-file";return"FILE"===e?t="oj-ux-ico-file-doc":"WEB_PAGE"===e?t="oj-ux-ico-link":"TEXT"===e?t="oj-ux-ico-text":"FOLDER"===e&&(t="oj-ux-ico-folder"),t+=" oj-sm-padding-2x-end oj-md-align-self-center",t},this.downloadAttachment=e=>{if("WEB_PAGE"===e.DatatypeCode)window.open(e.Url,"_blank");else{n.log("downloadAttachment");const t=p.AttachmentManager.getLinkKey(e);if(t){this.busyStateDownload=this.openBusyState("Attachments File Download "+e.FileName);const i=e.AttachedDocumentId;this.updateDownloadAttachmentIcon(i,!0);const o=this,s=p.AttachmentManager.downloadBlob(t,this.enclosureEndpoint,this.enclosureEndpointParams,null,this.enclosureEndpointAttachmentParamName,this),a=e.FileName;s.then((function(e){if(n.log(e),e){const t=a,i=document.createElement("a");document.body.appendChild(i);const o=window.URL.createObjectURL(e);i.setAttribute("aria-label",a),i.href=o,i.download=t,i.click()}o.updateDownloadAttachmentIcon(i,!1),o.closeBusyState(o.busyStateDownload)})).catch((function(e){n.error(e),o.updateDownloadAttachmentIcon(i,!1),o.closeBusyState(o.busyStateDownload)}))}}},this.deleteAttachment=e=>{this.attachmentDataPendingDeleteConfirmation=e;const t=document.getElementById("fndAttachmentsDeleteConfirmDialog_"+this.uniqueId),i={at:{horizontal:"start",vertical:"top"},my:{horizontal:"end",vertical:"top"},of:"#attachmentsListDelete_"+this.uniqueId+"_"+e.AttachedDocumentId};t.setProperty(this.positionProperty,i),t.open()},this.deleteAttachmentCancel=()=>{this.attachmentDataPendingDeleteConfirmation=null;document.getElementById("fndAttachmentsDeleteConfirmDialog_"+this.uniqueId).close()},this.deleteAttachmentConfirm=()=>{const e=this.attachmentDataPendingDeleteConfirmation,t=p.AttachmentManager.getLinkKey(e);if(t){this.busyStateDelete=this.openBusyState("Attachments CCA deleting attachment via link.");p.AttachmentManager.deleteFile(t,this.deleteEndpoint,this.deleteEndpointParams,null,this.deleteEndpointAttachmentParamName).then(t=>{if(t.response.ok){n.log("Attachment Deleted: ",t);const i=this.attachmentsUploadedArray();let o=-1;for(let t=0;t<i.length;t++)if(i[t]&&i[t].AttachedDocumentId===e.AttachedDocumentId){o=t;break}o>=0&&this.attachmentsUploadedArray.splice(o,1),this.fireAttachmentsOperation()}else n.error("Error deleting attachment: "+t.response.status+" : "+t.response.statusText),this.raiseOverviewErrorMessageFromResponse(null,this.res().errorAttachmentRemove,t,p.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_DELETE);this.closeBusyState(this.busyStateDelete)}).catch(e=>{n.error("Error deleting attachment: ",e),this.raiseOverviewErrorMessageFromError(null,this.res().errorAttachmentRemove,e,p.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_DELETE),this.closeBusyState(this.busyStateDelete)})}else{this.busyStateDelete=this.openBusyState("Attachments CCA deleting attachment via CreatePayload.");for(let t=0;t<this.createPayload.length;t++){const i=this.createPayload[t];if("FILE"===e.DatatypeCode&&(i.AsyncTrackerId===e.AsyncTrackerId||i.TrackerId===e.AsyncTrackerId)||"WEB_PAGE"===e.DatatypeCode&&i.Url===e.Url){this.createPayload.splice(t,1);break}}const t=this.attachmentsUploadedArray();let i=-1;for(let o=0;o<t.length;o++)if(t[o]&&t[o].AsyncTrackerId===e.AsyncTrackerId){i=o;break}i>=0&&this.attachmentsUploadedArray.splice(i,1),this.updateCreatePayloadProperty(),this.closeBusyState(this.busyStateDelete)}document.getElementById("fndAttachmentsDeleteConfirmDialog_"+this.uniqueId).close()},this.addMobileLink=()=>{this.addLink();document.getElementById("fndAttachmentsMobileLinkPopup"+this.uniqueId).open(null,{at:{horizontal:"start",vertical:"top"},of:"window"})},this.attachmentLinkMobileSave=()=>{n.log("attachmentLinkMobileSave");const e=this.getAttachmentsLinkInput("attachmentMobileLinkUrl"+this.uniqueId);this.executeUploadLink(e).then(t=>{t||e.showMessages()},t=>{n.warn("attachmentLinkMobileSave linkUploaded rejection"),n.warn(t),e.showMessages()})},this.attachmentLinkSave=()=>{n.log("attachmentLinkSave");const e=this.getAttachmentsLinkInput("attachmentLinkUrl"+this.uniqueId);this.executeUploadLink(e).then(t=>{t||e.showMessages()},t=>{n.warn("attachmentLinkSave linkUploaded rejection"),n.warn(t),e.showMessages()})},this.attachmentLinkCancel=()=>{this.attachmentLinkClose()},this.getSizeInBKMGT=e=>u.ComponentUtils.formatSize(e),this.addLink=()=>{this.attachmentLinkInputVisible(!0),this.attachmentLinkUrl(""),this.attachmentLinkSaveEnabled=!0},this.context=e,this.element=e.element,this.uniqueId=e.uniqueId,this.properties=e.properties,this.res=i.observable(Object.assign(Object.assign({},c),this.properties.translations)),this.attachmentDefaultCategory=e.properties.category,e.properties.get&&(this.getEndpoint=e.properties.get.endpoint,this.getEndpointParams=e.properties.get.endpointParams),e.properties.create&&(this.createEndpoint=e.properties.create.endpoint,this.createEndpointParams=e.properties.create.endpointParams),e.properties.createEnclosure&&(this.createEnclosureEndpoint=e.properties.createEnclosure.endpoint,this.createEnclosureEndpointAttachmentParamName=e.properties.createEnclosure.endpointAttachmentParamName,this.createEnclosureEndpointParams=e.properties.createEnclosure.endpointParams),e.properties.delete&&(this.deleteEndpoint=e.properties.delete.endpoint,this.deleteEndpointAttachmentParamName=e.properties.delete.endpointAttachmentParamName,this.deleteEndpointParams=e.properties.delete.endpointParams),e.properties.enclosure&&(this.enclosureEndpoint=e.properties.enclosure.endpoint,this.enclosureEndpointAttachmentParamName=e.properties.enclosure.endpointAttachmentParamName,this.enclosureEndpointParams=e.properties.enclosure.endpointParams),e.properties.backgroundTracker&&(this.backgroundTrackerEndpoint=e.properties.backgroundTracker.endpoint),e.properties.backgroundUpload&&(this.backgroundUploadEndpoint=e.properties.backgroundUpload.endpoint,this.backgroundUploadEndpointTrackerParamName=e.properties.backgroundUpload.endpointTrackerParamName),this.entityName=e.properties.entityName,this.createMode=e.properties.createMode,this.createPayload=e.properties.createPayload?[...e.properties.createPayload]:[],this.busyContext=s.getContext(this.element).getBusyContext(),this.urlAsyncLengthValidator=new m({max:4e3,messageDetail:{tooLong:this.res().urlLengthValidationMessage}}),e.properties.updatedByVisibility&&this.updatedByVisibility(e.properties.updatedByVisibility),this.initProvider(null,null,!0)}activated(e){n.log(`%c CCA ${this.uniqueId} activated`,"background: #222; color: #bada55")}connected(e){n.log(`%c CCA ${this.uniqueId} connected`,"background: #222; color: #bada55")}bindingsApplied(e){n.log(`%c CCA ${this.uniqueId} bindingsApplied`,"background: #222; color: #bada55")}getTranslation(e){return this.res()[e]}downloadErrorListener(e,t,i,o){n.error("Error occurred during file download process: "),n.error(t),t?this.raiseOverviewErrorMessageFromError(null,o,t,e):i?this.raiseOverviewErrorMessageFromResponse(null,o,i,e):this.raiseOverviewErrorMessageFromCode(null,o,e),this.closeBusyState(this.busyStateDownload)}fileErrorListener(e,t,i,o,s,a,r){n.error("Error occurred during file upload process: "),n.error(o),o?this.raiseOverviewErrorMessageFromError(t,a,o,e):s?this.raiseOverviewErrorMessageFromResponse(t,a,s,e):this.raiseOverviewErrorMessageFromCode(t,a,e);let l=null;for(let e=0;e<this.uploadingFiles().length;e++){const t=this.uploadingFiles()[e];if(t.BackgroundTrackerId===i){l=t,this.uploadingFiles.remove(t);break}}this.resetFocusOnFilePicker(),this.closeBusyState(this.busyStateUpload)}uploadEventListener(e){if(n.info("Attachments upload event listener: "),n.info(e),e&&e.type&&"progress"===e.type)for(let t=0;t<this.uploadingFiles().length;t++){const i=this.uploadingFiles()[t];if(i.BackgroundTrackerId===e.id){i.progress(e.percent);break}}else if(e&&e.type&&"uploadComplete"===e.type){let t=null;for(let i=0;i<this.uploadingFiles().length;i++){const o=this.uploadingFiles()[i];if(o.BackgroundTrackerId===e.id){t=o,this.uploadingFiles.remove(o);break}}if(e.createMode!==p.AttachmentManager.CREATE_TYPE_DIRECT&&e.createMode){if(e.createMode===p.AttachmentManager.CREATE_TYPE_BACKGROUND||e.createMode===p.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||e.createMode===p.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE){let t=e.attachment;if(e.createMode===p.AttachmentManager.CREATE_TYPE_BACKGROUND)t.UploadedFileLength=e.file.size,this.fireAttachmentsOperation();else if(t={AsyncTrackerId:e.id,AttachedDocumentId:"BACKGROUND_DEFERRED_"+e.id,CategoryName:null,DatatypeCode:"FILE",FileName:e.file.name,LastUpdateDate:(new Date).toISOString(),LastUpdatedByUserName:e.user,RestFrameworkVersion:null,Title:e.file.name,UploadedFileContentType:p.AttachmentManager.mimeTypeCalculator(e.file.name,e.file.type),UploadedFileLength:e.file.size,UserName:null},e.createMode===p.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE){const t={AsyncTrackerId:e.id,CategoryName:this.attachmentDefaultCategory,ContentRepositoryFileShared:"false",DatatypeCode:"FILE",FileName:e.file.name,Title:e.file.name,UploadedFileName:e.file.name};this.createPayload.push(t),this.updateCreatePayloadProperty()}this.attachmentsUploadedArray.unshift(t)}else if(e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE){let t=e.attachment;if(e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND)this.fireAttachmentsOperation();else if(t={AsyncTrackerId:e.id,AttachedDocumentId:"SPECTRA_BACKGROUND_DEFERRED_"+e.id,CategoryName:null,ContentType:p.AttachmentManager.mimeTypeCalculator(e.file.name,e.file.type),DatatypeCode:"FILE",FileName:e.file.name,FileSize:e.file.size,LastUpdateDate:(new Date).toISOString(),LastUpdatedByUserName:e.user,RestFrameworkVersion:null,Title:e.file.name,UserName:null},e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE||e.createMode===p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE){const t={CategoryName:this.attachmentDefaultCategory,ContentType:p.AttachmentManager.mimeTypeCalculator(e.file.name,e.file.type),DatatypeCode:"FILE",FileName:e.file.name,FileSize:e.file.size,Title:e.file.name,TrackerId:e.id};this.createPayload.push(t),this.updateCreatePayloadProperty()}this.attachmentsUploadedArray.unshift(t)}}else this.attachmentsUploadedArray.unshift(e.attachment),this.fireAttachmentsOperation();this.resetFocusOnFilePicker(),this.closeBusyState(this.busyStateUpload)}}uploadDeferredListener(e){if(n.info("Uploaded Deferred listener parameters: "),n.info(e),e){let t=!1;for(let i=0;i<e.length;i++){const o=e[i],s={CategoryName:this.attachmentDefaultCategory,DatatypeCode:"FILE",FileName:o.filename,Title:o.filename};!o.createMode||o.createMode!==p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&o.createMode!==p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE&&o.createMode!==p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&o.createMode!==p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE?(s.UploadedFileName=o.filename,s.ContentRepositoryFileShared="false",s.AsyncTrackerId=o.trackerId):(s.TrackerId=o.trackerId,s.FileSize=o.fileSize,s.ContentType=o.contentType),!o.createMode||o.createMode!==p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&o.createMode!==p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&o.createMode!==p.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||(this.createPayload.push(s),t=!0);const a=o.filename,n=o.file.name+o.file.lastModified,r=o.trackerId;this.uploadListener(n,a,p.AttachmentManager.mimeTypeCalculator(a,o.file.type),o.file.size,r,o.createMode,null,null)}t&&this.updateCreatePayloadProperty()}}uploadListener(e,t,o,s,a,r,l,d){n.info("Uploaded listener parameters %s : %s :%d : %s",e,t,s,a);const c={AttachedDocumentId:e,BackgroundTrackerId:a,DatatypeCode:"FILE",Size:s,Title:t,formattedUploadedDate:(new Date).toISOString(),progress:i.observable(-1)};this.uploadingFiles.push(c)}stopUploadListener(e){n.info("Stopping Upload for tracked upload: %s",e);for(let t=0;t<this.createPayload.length;t++){const i=this.createPayload[t];if(i.AsyncTrackerId===e||i.TrackerId===e){this.createPayload.splice(t,1);break}}for(let t=0;t<this.uploadingFiles().length;t++){const i=this.uploadingFiles()[t];if(i.BackgroundTrackerId===e){this.uploadingFiles.remove(i);break}}this.updateCreatePayloadProperty(),this.closeBusyState(this.busyStateUpload)}linkDeferredUploadListener(e){this.createPayload.push(e),this.updateCreatePayloadProperty()}linkUploadListener(e,t){this.attachmentLinkClose(),this.attachmentLinkSaveEnabled=!0,e&&(this.attachmentsUploadedArray.unshift(e),t!==p.AttachmentManager.CREATE_TYPE_DIRECT&&t&&t!==p.AttachmentManager.CREATE_TYPE_BACKGROUND&&t!==p.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&t!==p.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND||this.fireAttachmentsOperation(),this.attachmentLinkUrl("")),this.closeBusyState(this.busyStateUploadLink)}linkErrorListener(e,t,i,o){n.error("Unable to create attachments link."),n.error(t),t?this.raiseOverviewErrorMessageFromError(null,o,t,e):i?this.raiseOverviewErrorMessageFromResponse(null,o,i,e):this.raiseOverviewErrorMessageFromCode(null,o,e),this.attachmentLinkSaveEnabled=!0,this.closeBusyState(this.busyStateUploadLink)}isAttachmentsLinkInput(e){return void 0!==e.validate}getAttachmentsLinkInput(e){const t=document.getElementById(e);let i=null;return t&&this.isAttachmentsLinkInput(t)&&(i=t),i}executeUploadLink(e){let t=Promise.resolve(!0);if(this.attachmentLinkSaveEnabled){const i=this;t=new Promise((t,o)=>{i.attachmentLinkSaveEnabled?e.validate().then(e=>{i.attachmentLinkSaveEnabled?"valid"===e&&i.attachmentLinkUrl()&&i.attachmentLinkUrl().length>0?(i.attachmentLinkSaveEnabled=!1,i.busyStateUploadLink=i.openBusyState("Attachments CCA uploading attachment link."),p.AttachmentManager.uploadLink(i.attachmentLinkUrl(),i.properties.attachmentDefaultCategory,i.properties.create?i.properties.create.endpoint:null,i.properties.create?i.properties.create.endpointParams:null,null,i.properties.createMode?i.properties.createMode:p.AttachmentManager.CREATE_TYPE_BACKGROUND,i),t(!0)):t(!1):t(!0)},e=>{n.warn("executeUploadLink validate rejection"),n.warn(e),t(!1)}):t(!0)})}return t}updateDownloadAttachmentIcon(e,t){const i=document.getElementById("attachmentsListDownload_"+this.uniqueId+"_"+e),o=document.getElementById("attachmentsListDownloadIcon_"+this.uniqueId+"_"+e);i&&o&&(t?(i.disabled=!0,o.className="oj-ux-ico-circular-progress-2 oj-sp-attachments-download-animation"):(i.disabled=!1,o.className="oj-ux-ico-download"))}resetFocusOnFilePicker(){if(0===this.uploadingFiles().length){let e=null;e=this.mdUpScreen()?document.getElementById("attachmentsFilePicker"+this.uniqueId):document.getElementById("attachmentsMobileFilePicker"+this.uniqueId),e&&e.focus()}}openBusyState(e){const t={description:e};return this.busyContext.addBusyState(t)}closeBusyState(e){try{e&&e()}catch(e){n.log("Busy state is already closed."),n.log(e)}}initProvider(e,t,i){if(i||"get"===e)if(this.getEndpoint){n.log("Creating data provider based on endpoint provided.");const e=this.openBusyState("Attachments CCA retrieving attachments."),t=h.EndpointUtils.callEndpoint(this.getEndpoint,this.getEndpointParams,null,null,null,null,null),i=this,o=new Promise((o,s)=>{t.then(t=>{if(t&&t.response.ok){const e=t.body.items;i.attachmentsUploadedArray().length;i.attachmentsUploadedArray.splice(0);for(let o=0;o<e.length;o++){const s=e[o];p.AttachmentManager.setRestFrameworkVersion(t,s),i.attachmentsUploadedArray.push(e[o])}i.clearErrors()}i.closeBusyState(e),o(i.attachmentsUploadedArrayDataProvider)}).catch(t=>{n.error("Error retrieving attachments: "+t),i.raiseOverviewErrorMessageFromError(null,i.res().errorAttachmentRetrieve,t,p.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_RETRIEVE),i.closeBusyState(e),o(i.attachmentsUploadedArrayDataProvider)})});this.attachmentsUploadedDataSource=new a(o,null)}else this.attachmentsUploadedDataSource=this.attachmentsUploadedArrayDataProvider}fireAttachmentsOperation(){this.element.dispatchEvent(new CustomEvent("attachmentsOperation",{bubbles:!0,cancelable:!1,detail:{}}))}attachmentLinkClose(){this.attachmentLinkInputVisible(!1);const e=document.getElementById("fndAttachmentsMobileLinkPopup"+this.uniqueId);e&&e.isOpen()&&e.close()}raiseOverviewErrorMessageFromError(e,t,i,o){const s=r.applyParameters(this.res().errorAttachmentOverviewCodeDetail,{code:o});n.error(i.name+" ::: "+i.message),this.raiseOverviewErrorMessage(e,t,s)}raiseOverviewErrorMessageFromResponse(e,t,i,o){const s=r.applyParameters(this.res().errorAttachmentOverviewCodeDetail,{code:o});n.error(i.status+" ::: "+i.statusText),this.raiseOverviewErrorMessage(e,t,s)}raiseOverviewErrorMessageFromCode(e,t,i){const o=r.applyParameters(this.res().errorAttachmentOverviewCodeDetail,{code:i});this.raiseOverviewErrorMessage(e,t,o)}raiseOverviewErrorMessage(e,t,i){const o={detail:i,severity:"error",summary:t};this.uiMessagesArray.push(o)}clearErrors(){this.uiMessagesArray.removeAll()}updateCreatePayloadProperty(){this.properties.setProperty("createPayload",[...this.createPayload])}}})),define("css!oj-sp/attachments-simple/attachments-simple-styles",[],(function(){})),define("oj-sp/attachments-simple/loader",["require","exports","ojs/ojcomposite","text!./attachments-simple-view.html","text!./component.json","./attachments-simple-viewModel","css!./attachments-simple-styles.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-attachments-simple",{metadata:JSON.parse(s),parseFunction:void 0,view:o,viewModel:a.AttachmentsSimpleViewModel})})),define("text!oj-sp/attachments/attachments-view.html",[],(function(){return'<html><head></head><body><div :id="[[ \'attachmentsComponent_\' + $uniqueId ]]"><oj-bind-if test="[[ styleDisplayForAddFileButton() !== \'none\' || styleDisplayForAddUrlButton() !== \'none\' ]]"><div class="oj-flex oj-sm-flex-items-initial oj-sm-align-items-flex-start"><span :class="[[ (mdUpContainerSize() ? \'oj-typography-heading-md oj-sm-margin-1x-top\' : \'oj-typography-heading-xs\') + \' oj-flex-item oj-sm-margin-8x-bottom\']]":style.display="[[ (styleDisplayForAddFileButton() !== \'none\' || styleDisplayForAddUrlButton() !== \'none\') ? \'\' : \'none\' ]]"><oj-bind-text value="[[ res().attachmentsHeading ]]"></oj-bind-text></span><oj-toolbar :id="[[\'attachmentsButtonToolbar_\' + $uniqueId]]"class="oj-flex-item oj-helper-margin-start-auto"chroming="outlined"><oj-bind-if test="[[ attachmentsLinkInlineInputDisplayed() || $properties.displayOptions?.add ]]"><oj-button :id="[[\'attachmentsButtonFileDesktop_\' + $uniqueId]]"disabled="true"class="oj-button-sm":style.display="[[ mdUpContainerSize() ? styleDisplayForAddFileButton : \'none\' ]]"><span slot="startIcon"class="oj-ux-ico-attachment"></span><oj-bind-text value="[[ res().addFiles ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ !(attachmentsLinkInlineInputDisplayed() || $properties.displayOptions?.add) ]]"><oj-file-picker :id="[[\'attachmentsButtonFilePicker_\' + $uniqueId]]":style.display="[[ mdUpContainerSize() ? styleDisplayForAddFileButton : \'none\' ]]"select-on="click"accept="[[ attachmentsFileAcceptTypes ]]"selection-mode="[[ attachmentsFileSelectionMode ]]"on-oj-select="[[ handleAttachmentsFileSelect ]]"><oj-button :id="[[\'attachmentsButtonFile_\' + $uniqueId]]"class="oj-button-sm"slot="trigger"><span slot="startIcon"class="oj-ux-ico-attachment"></span><oj-bind-text value="[[ res().addFiles ]]"></oj-bind-text></oj-button></oj-file-picker></oj-bind-if><oj-button :id="[[\'attachmentsButtonLink_\' + $uniqueId]]":style.display="[[ mdUpContainerSize() ? styleDisplayForAddUrlButton : \'none\' ]]"disabled="[[ attachmentsLinkInlineInputDisplayed() || ($properties.displayOptions &amp;&amp; $properties.displayOptions.add) ]]"class="oj-button-sm"on-oj-action="[[ handleAttachmentsAddUrlSelect ]]"><span slot="startIcon"class="oj-ux-ico-link"></span><oj-bind-text value="[[ res().addUrl ]]"></oj-bind-text></oj-button></oj-toolbar></div></oj-bind-if><oj-bind-if test="[[ $properties.displayOptions &amp;&amp; $properties.displayOptions.addVisibility != \'hidden\' &amp;&amp; $properties.displayOptions.categoryForCreate === DISPLAY_OPTIONS_CATEGORY_FOR_CREATE_SELECT_REQUIRED ]]"><oj-select-single :id="[[ \'attachmentsCategoryForCreate_\' + $uniqueId ]]"label-hint="[[ res().categoryLabel ]]"class="oj-sm-margin-2x-bottom"value-item="{{ attachmentCategory }}"data="[[ categoriesDataProvider ]]"disabled="[[$properties.displayOptions &amp;&amp; $properties.displayOptions.add]]"item-text="[[ getCategoryDisplayName ]]"></oj-select-single></oj-bind-if><div><oj-bind-if test="[[ !($properties.displayOptions?.add) ]]"><oj-file-picker :id="[[\'attachmentsButtonFilePicker_mobile_\' + $uniqueId]]":style.display="[[ mdUpContainerSize() ? \'none\' : styleDisplayForAddFileButton ]]"class="oj-sm-margin-2x-bottom oj-sp-attachments-header-button-mobile"select-on="click"accept="[[ attachmentsFileAcceptTypes ]]"selection-mode="[[ attachmentsFileSelectionMode ]]"on-oj-select="[[ handleAttachmentsFileSelect ]]"><oj-button :id="[[\'attachmentsButtonFile_mobile_\' + $uniqueId]]"class="oj-sp-attachments-header-button-mobile"disabled="[[ $properties.displayOptions &amp;&amp; $properties.displayOptions.add ]]"slot="trigger"><span slot="startIcon"class="oj-ux-ico-attachment"></span><oj-bind-text value="[[ res().addFiles ]]"></oj-bind-text></oj-button></oj-file-picker></oj-bind-if><oj-bind-if test="[[ ($properties.displayOptions?.add) ]]"><oj-button :id="[[\'attachmentsButtonFile_mobile_\' + $uniqueId]]"disabled="true"class="oj-sm-margin-2x-bottom oj-sp-attachments-header-button-mobile":style.display="[[ mdUpContainerSize() ? \'none\' : styleDisplayForAddFileButton ]]"><span slot="startIcon"class="oj-ux-ico-attachment"></span><oj-bind-text value="[[ res().addFiles ]]"></oj-bind-text></oj-button></oj-bind-if></div><div><oj-button :id="[[\'attachmentsButtonLink_mobile_\' + $uniqueId]]":style.display="[[ mdUpContainerSize() ? \'none\' : styleDisplayForAddUrlButton ]]"class="oj-sm-margin-2x-bottom oj-sp-attachments-header-button-mobile"disabled="[[ $properties.displayOptions &amp;&amp; $properties.displayOptions.add ]]"on-oj-action="[[ handleAttachmentsAddUrlSelect ]]"><span slot="startIcon"class="oj-ux-ico-link"></span><oj-bind-text value="[[ res().addUrl ]]"></oj-bind-text></oj-button></div><div :id="[[\'attachmentsLinkInlineInput_\' + $uniqueId]]":style.display="[[ attachmentsLinkInlineInputDisplayed() ? styleDisplayForAddUrlButton : \'none\' ]]"class="oj-flex-bar"><oj-sp-input-url class="oj-sm-margin-2x-end"value="{{ attachmentsLinkInput }}"label-edge="inside"validators="[[ [ attachmentsLinkAsyncLengthValidator ] ]]"display-options.validator-hint="none":id="[[\'attachmentsLinkInlineInput_urlInput_\' + $uniqueId]]"></oj-sp-input-url><div class="oj-flex-bar-middle"><oj-button :id="[[\'attachmentsLinkInlineInput_addBtn_\' + $uniqueId]]"class="oj-sm-margin-2x-end oj-button-lg"display="icons"on-oj-action="[[ handleAttachmentsLinkInlineAttach ]]"><span slot="startIcon"class="oj-ux-ico-check"></span><oj-bind-text value="[[ res().addUrl ]]"></oj-bind-text></oj-button><oj-button :id="[[\'attachmentsLinkInlineInput_closeBtn_\' + $uniqueId]]"class="oj-button-lg"display="icons"on-oj-action="[[ handleAttachmentsLinkInlineClose ]]"><span slot="startIcon"class="oj-ux-ico-close"></span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></oj-button></div></div><oj-file-picker :id="[[\'attachmentsDropFilePicker_\' + $uniqueId]]":style.display="[[ isMobile() ? \'none\' : styleDisplayForAddFileDrop ]]"class="oj-sp-attachments-filepicker-desktop oj-sm-margin-2x-bottom"accept="[[ attachmentsFileAcceptTypes ]]"selection-mode="[[ attachmentsFileSelectionMode ]]"on-oj-select="[[ handleAttachmentsFileSelect ]]"disabled="[[ attachmentsLinkInlineInputDisplayed() || ($properties.displayOptions &amp;&amp; $properties.displayOptions.add) ]]"primary-text="[[res().addFilePrimaryText]]"secondary-text="[[res().addFileSecondaryText]]"></oj-file-picker><oj-bind-if test="[[ attachmentsLinkInlineInputDisplayed() || ($properties.displayOptions?.add) ]]"><oj-button :id="[[\'attachmentsButtonFile_mobile_\' + $uniqueId]]"disabled="true"class="oj-sp-attachments-filepicker-field-input-mobile oj-sp-attachments-filepicker-desktop oj-sm-margin-2x-bottom":style.display="[[ isMobile() ? styleDisplayForAddFileDrop : \'none\' ]]"><oj-bind-text value="[[ res().addFiles ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ !(attachmentsLinkInlineInputDisplayed() || $properties.displayOptions?.add) ]]"><oj-file-picker :id="[[\'attachmentsDropFilePicker_mobile\' + $uniqueId]]":style.display="[[ isMobile() ? styleDisplayForAddFileDrop : \'none\' ]]"class="oj-sp-attachments-filepicker-desktop oj-sp-attachments-filepicker-field-input-mobile oj-sm-margin-2x-bottom"select-on="click"accept="[[ attachmentsFileAcceptTypes ]]"selection-mode="[[ attachmentsFileSelectionMode ]]"on-oj-select="[[ handleAttachmentsFileSelect ]]"><oj-button :id="[[\'attachmentsDropFile_mobile\' + $uniqueId]]"class="oj-sp-attachments-filepicker-field-input-mobile oj-sm-margin-2x-bottom"slot="trigger"><oj-bind-text value="[[ res().addFiles ]]"></oj-bind-text></oj-button></oj-file-picker></oj-bind-if><div :id="[[\'attachmentsLinkFieldInput_\' + $uniqueId]]":style.display="[[ styleDisplayForAddUrlField ]]"class="oj-flex-bar oj-sm-margin-2x-bottom"><oj-sp-input-url class="oj-sm-margin-2x-end oj-sp-attachments-link-field-input"auto-focus="false"value="{{ attachmentsLinkInput }}"label-edge="inside"validators="[[ [ attachmentsLinkAsyncLengthValidator ] ]]"display-options.validator-hint="none":id="[[\'attachmentsLinkFieldInput_urlInput_\' + $uniqueId]]"></oj-sp-input-url><oj-button :id="[[\'attachmentsLinkFieldInput_addBtn_\' + $uniqueId]]"class="oj-flex-bar-end oj-button-lg"disabled="[[ attachmentsLinkInlineInputDisplayed() || ($properties.displayOptions &amp;&amp; $properties.displayOptions.add) ]]"on-oj-action="[[ handleAttachmentsLinkFieldAttach ]]"><oj-bind-text value="[[ res().addUrl ]]"></oj-bind-text></oj-button></div><oj-messages messages="[[ overviewErrorMessages ]]"on-oj-close="[[ handleOverviewErrorMessageClose ]]"display-options.category="none"></oj-messages><div :id="[[ \'attachments_ariaLive_\' + uid ]]"role="status"aria-live="polite"aria-atomic="true"class="oj-helper-hidden-accessible"><span><oj-bind-text value="[[ currentAttachmentsOperationMessage ]]"></oj-bind-text></span></div><oj-bind-if test="[[ fileUploadSummaryProgress() >= 0 &amp;&amp; $properties.displayOptions &amp;&amp; $properties.displayOptions.addFileProgress === \'all\' ]]"><div class="oj-flex-bar oj-sm-align-items-center oj-sm-margin-2x-bottom oj-sm-margin-4x-top"><div class="oj-flex-bar-start oj-sm-margin-4x-end"><span :id="[[ \'attachments_summaryProgressMsg_\' + uid ]]"class="oj-typography-body-md oj-typography-semi-bold"><oj-bind-text value="[[ fileUploadSummaryProgressMessage ]]"></oj-bind-text></span></div><div class="oj-flex-bar-middle"><oj-progress-bar :id="[[ \'attachments_summaryProgress_\' + uid ]]":style.display="[[ fileUploadSummaryProgress() === 100 ? \'none\' : \'\' ]]"value="[[ fileUploadSummaryProgress ]]"class="oj-sp-attachments-progress-bar"></oj-progress-bar></div></div></oj-bind-if><oj-bind-if test="[[ (attachmentsDataProvider.isEmpty() !== \'yes\') &amp;&amp; (!$properties.displayOptions || !$properties.displayOptions.type || $properties.displayOptions.type === \'list\' || ($properties.displayOptions.type === \'table\' &amp;&amp; !mdUpContainerSize()) ) ]]"><oj-list-view :id="[[ \'attachmentsList_\' + uid ]]"data="[[ attachmentsDataSource ]]"selection-mode="single"current-item="{{ currentSelectedAttachedDocumentId }}":aria-label="[[ res().attachmentsList ]]"gridlines.item="visible"><template slot="itemTemplate"data-oj-as="item"><div class="oj-flex oj-sm-align-items-center"><div :class="[[`oj-flex-item oj-sp-attachments-list-primary-col oj-md-order-2 ` + (mdUpContainerSize() ? \'oj-sp-attachments-list-md-col-half\' : \'\') ]]"><div :class="[[`oj-flex ` + (mdUpContainerSize() ? \'oj-md-flex-wrap-nowrap\' : \'\') + ` oj-sp-attachments-list-column-1`]]"><div :class="[[`oj-flex-item ` + (mdUpContainerSize() ? \'oj-md-flex-1\' : \'\') + ` oj-sp-attachments-list-flex-shrink ` + (mdUpContainerSize() ? \'\' : \'oj-sp-attachments-list-main-texts-container-sm\') ]]"><oj-list-item-layout><div slot="leading"><div :class="[[\'oj-sp-attachments-list-leading-visual oj-sm-margin-4x-end \']]"><oj-bind-if test="[[ getDisplayLeadingType(item.data.DatatypeCode) !== DISPLAY_LEADING_TYPE_THUMBNAIL &amp;&amp; getDisplayLeadingType(item.data.DatatypeCode) !== DISPLAY_LEADING_TYPE_PROGRESS  ]]"><span :class="[[`oj-ux-icon-size-6x oj-sp-attachments-list-inner-leading-visual oj-sp-attachments-list-leading-icon ${getMimeTypeIcon(item.data.DatatypeCode, item.data.UploadedFileContentType ? item.data.UploadedFileContentType : item.data.FileMimeType,\n                          item.data.FileName, item.data.FileProgress)}`]]"role="img":aria-label="[[ getMimeTypeIconAriaLabel(item.data.DatatypeCode, item.data.UploadedFileContentType ? item.data.UploadedFileContentType : item.data.FileMimeType, item.data.FileName, item.data.FileProgress) ]]"></span></oj-bind-if><oj-bind-if test="[[ getDisplayLeadingType(item.data.DatatypeCode) === DISPLAY_LEADING_TYPE_THUMBNAIL ]]"><oj-sp-thumbnail class="oj-sp-attachments-list-inner-leading-visual oj-sp-attachments-list-leading-icon"src=""icon-type="[[ item.data.UploadedFileContentType ? item.data.UploadedFileContentType : item.data.FileMimeType ]]"type="ICON"></oj-sp-thumbnail></oj-bind-if><oj-bind-if test="[[ getDisplayLeadingType(item.data.DatatypeCode) === DISPLAY_LEADING_TYPE_PROGRESS ]]"><oj-progress-circle size="sm"value="[[ item.data.FileProgress ]]"></oj-progress-circle></oj-bind-if></div></div><div class="oj-flex oj-sm-flex-direction-column"><div :id="[[uid + \'_overlineText_\' + item.key]]"class="oj-sp-attachments-list-overline-text oj-flex-item oj-typography-body-xs oj-text-color-secondary"><oj-bind-text value="[[ item.data.UserName ]]"></oj-bind-text></div><span :id="[[uid +\'_primaryText_\' + item.key]]":class="[[ `oj-sp-attachments-list-primary-text oj-flex-item oj-typography-body-md oj-text-color-primary oj-line-clamp-3` ]]"><oj-bind-if test="[[ (item.data.DatatypeCode === DATA_TYPE_CODE_WEB_PAGE) ]] "><a :id="[[uid +\'_primaryText_url_\' + item.index]]"target="_blank":href="[[ item.data.Url ]]"><oj-bind-text value="[[ getPrimaryText(item.data.DatatypeCode, item.data.FileName, item.data.Url, item.data.Title, item.data.UploadFiles) ]]"></oj-bind-text></a></oj-bind-if><oj-bind-if test="[[ (item.data.DatatypeCode !== DATA_TYPE_CODE_WEB_PAGE) &amp;&amp; ( !properties.displayOptions || !properties.displayOptions.displayNameAction || properties.displayOptions.displayNameAction === DISPLAY_NAME_ACTION_NONE ) ]]"><oj-bind-text value="[[ getPrimaryText(item.data.DatatypeCode, item.data.FileName, item.data.Url, item.data.Title, item.data.UploadFiles) ]]"></oj-bind-text></oj-bind-if><oj-bind-if test="[[ (item.data.DatatypeCode !== DATA_TYPE_CODE_WEB_PAGE) &amp;&amp; properties.displayOptions &amp;&amp; properties.displayOptions.displayNameAction &amp;&amp; properties.displayOptions.displayNameAction !== DISPLAY_NAME_ACTION_NONE ]] "><a :id="[[uid +\'_primaryText_file_link_\' + item.index]]"on-click="[[ handleFileTitleClick ]]"on-contextmenu="[[ handleFileTitleContextMenu ]]"tabindex="0"><oj-bind-text value="[[ getPrimaryText(item.data.DatatypeCode, item.data.FileName, item.data.Url, item.data.Title, item.data.UploadFiles) ]]"></oj-bind-text></a></oj-bind-if></span></div><oj-bind-if test="[[ item.data.UploadedFileLength ]]"><div slot="secondary":class="[[ `oj-sp-attachments-list-secondary-text oj-typography-body-sm oj-text-color-primary oj-sp-attachments-list-text-truncate`]]"><oj-bind-text value="[[ formatSize(item.data.UploadedFileLength) ]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[ item.data.Description ]]"><div slot="tertiary":class="[[`oj-sp-attachments-list-tertiary-text oj-typography-body-xs oj-text-color-secondary ` + (mdUpContainerSize() ? \'\' : \'oj-sp-attachments-hide\') +  ` oj-sm-only-hide oj-sp-attachments-list-text-truncate`]]"><oj-bind-text value="[[ item.data.Description ]]"></oj-bind-text></div></oj-bind-if></oj-list-item-layout></div></div></div><div :class="[[`oj-flex-item ` + (mdUpContainerSize() ? \'oj-sp-attachments-list-secondary-col-md oj-sm-only-padding-2x-top \' : \'oj-sp-attachments-list-secondary-col-sm \' ) + (mdUpContainerSize() ? \'\' : \'oj-sp-attachments-hide\') +  ` oj-md-order-3 ` + (mdUpContainerSize() ? \'oj-sp-attachments-list-md-col-half\' : \'\') + ` oj-md-margin-4x-start`]]"><div :class="[[`oj-flex ` + (mdUpContainerSize() ? \'oj-md-flex-wrap-nowrap\' : \'\') + ` oj-sp-attachments-list-column-2`]]"><div :class="[[`oj-flex-item ` + (mdUpContainerSize() ? \'oj-md-flex-1\' : \'\') + ` oj-sp-attachments-list-flex-shrink ` + (mdUpContainerSize() ? \'\' : \'oj-sp-attachments-list-main-texts-container-sm\') ]]"><oj-list-item-layout><div slot="secondary":class="[[ `oj-sp-attachments-list-secondary-text oj-typography-body-sm oj-text-color-primary oj-sp-attachments-list-text-truncate` ]]"><oj-bind-text value="[[ formatLastUpdated(item.data.DatatypeCode, item.data.LastUpdatedBy, item.data.LastUpdateDate) ]]"></oj-bind-text></div></oj-list-item-layout></div></div></div><div :class="[[`oj-flex-item oj-sp-attachments-list-toolbar oj-md-order-5 ` + (lgUpContainerSize() ? \'oj-sp-attachments-list-lg-order-6\' : \'\' ) + ` oj-sm-padding-4x-start`]]"><div :id="[[uid +\'_toolbar_container_\' + item.key]]"class="oj-flex-item":_overflow="[[ getHasOverflowMenu(item.data.DatatypeCode, item.data.Url, item.data.Title, item.data)() ]]"><oj-toolbar data-oj-clickthrough="disabled"><oj-bind-for-each data="[[ getInlineVisibleActions(item.data.DatatypeCode, item.data.Url, item.data.Title, item.data.DownloadProgress, item.data)() ]]"><template><oj-button :id="[[ uid + \'_\' + $current.data.id + \'_icon_\' + item.data.AttachedDocumentId + \'_\' + item.index ]]"display="icons"chroming="borderless"disabled="[[ $current.data.disabled ]]":class="[[ $current.data.class ]]"on-oj-action="[[ handleListAction ]]"><span slot="startIcon":class="[[ $current.data.icon ]]"></span><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-button></template></oj-bind-for-each><oj-bind-if test="[[ getHasOverflowMenu(item.data.DatatypeCode, item.data.Url, item.data.Title, item.data)() ]]"><oj-button :id="[[ uid + \'_overflow_\' + item.index + \'_\' + item.data.AttachedDocumentId  ]]"class="oj-sp-attachments-list-overflow-menu-button"display="icons"on-oj-action="[[ handleListOverflowOpenMenu ]]"><div slot="startIcon"class="oj-ux-ico-overflow-horiz"></div><oj-bind-text value="[[res().moreActions]]"></oj-bind-text></oj-button></oj-bind-if></oj-toolbar></div></div></div><oj-bind-if test="[[ getHasOverflowMenu(item.data.DatatypeCode, item.data.Url, item.data.Title, item.data)() ]]"><oj-menu :id="[[uid + \'_more-actions-menu_\' + item.index + \'_\' + item.data.AttachedDocumentId]]"class="oj-sp-attachments-list-overflow-menu":aria-label="[[res().actions]]"open-options.initial-focus="firstItem"on-oj-menu-action="[[ handleListOverflowAction ]]"><oj-bind-for-each data="[[ getOverflowVisibleActions(item.data.DatatypeCode, item.data.Url, item.data.Title, item.data.DownloadProgress, item.data)() ]]"><template><oj-option data-oj-clickthrough="disabled":id="[[ uid + \'_more-actions-menu_\' + $current.data.id + \'_\' + item.index + \'_\' + item.data.AttachedDocumentId ]]"value="[[$current.data.id]]":disabled="[[$current.data.disabled]]"><span :class="[[$current.data.icon]]"slot="startIcon"></span><span class="oj-sp-attachments-list-label"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></template></oj-bind-for-each></oj-menu></oj-bind-if></template></oj-list-view><oj-menu :id="[[ uid + \'_list_context-actions-menu\' ]]"class="oj-sp-attachments-list-overflow-menu":aria-label="[[ res().actions ]]"open-options.initial-focus="firstItem"on-oj-menu-action="[[ handleFileTitleContextAction ]]"><oj-option data-oj-clickthrough="disabled":id="[[ uid + \'_list_context-actions-menu_new-tab\' ]]"value="[[ ACTION_ID_NEW_TAB ]]"><span class="oj-sp-attachments-list-label"><oj-bind-text value="[[ res().previewNewTab ]]"></oj-bind-text></span></oj-option></oj-menu></oj-bind-if><oj-bind-if test="[[ (attachmentsDataProvider.isEmpty() !== \'yes\' &amp;&amp; attachmentsDataComplete()) &amp;&amp; ($properties.displayOptions &amp;&amp; $properties.displayOptions.type === \'filmstrip\') ]]"><div :id="[[ \'attachmentsFilmstripContainer_\' + uid ]]"><oj-film-strip :id="[[ \'attachmentsFilmstrip_\' + uid ]]"max-items-per-page="1"arrow-visibility="hidden":aria-label="[[ res().attachments ]]"data-oj-context=""><oj-bind-for-each data="[[ attachmentsDataProvider ]]"><template data-oj-as="item"><oj-defer class="oj-sp-attachments-preview-card-wrapper"><oj-sp-preview-card :id="[[ uid + \'_attachmentsFilmstripPreviewCard_\' + item.index + \'_\' + item.data.AttachedDocumentId]]"primary-text="[[ getPrimaryText(item.data.DatatypeCode, item.data.FileName, item.data.Url, item.data.Title, item.data.UploadFiles) ]]"image-src="[[ isFilmstripImageSource(item.data) ? item.data.PreviewFileUrl : null ]]"icon-class="[[ getMimeTypeIcon(item.data.DatatypeCode, item.data.UploadedFileContentType ? item.data.UploadedFileContentType : item.data.FileMimeType, item.data.FileProgress) ]]"alt-text="[[ getPrimaryText(item.data.DatatypeCode, item.data.FileName, item.data.Url, item.data.Title, item.data.UploadFiles) ]]"display-options.download="[[ (item.data.DownloadProgress)\n                    ? \'disabled\'\n                    : getPreviewCardButtonsDisplayOptionsValue(item.data.RowProperty_DownloadVisibility, item.data.RowProperty_DownloadEnabled,\n                        properties.displayOptions ? properties.displayOptions.downloadVisibility : null,\n                        properties.displayOptions ? properties.displayOptions.download : null) ]]"display-options.remove="[[ getPreviewCardButtonsDisplayOptionsValue(item.data.RowProperty_RemoveVisibility, item.data.RowProperty_RemoveEnabled,\n                    properties.displayOptions ? properties.displayOptions.removeVisibility : null,\n                    properties.displayOptions ? properties.displayOptions.remove : null) ]]"on-sp-download="[[ function() { handleFilmstripDownloadAction(item.data.AttachedDocumentId) } ]]"on-sp-remove="[[ function() { handleFilmstripRemoveAction(item.data.AttachedDocumentId) } ]]"class="oj-sp-attachments-preview-card":style.max-width="[[ previewCardMaxWidthStyle() ]]"></oj-sp-preview-card></oj-defer></template></oj-bind-for-each></oj-film-strip><div class="oj-sp-attachments-filmstrip-paging-control-container oj-sm-margin-2x-top"><div class="oj-sp-attachments-filmstrip-paging-control"><oj-paging-control :id="[[ \'attachmentsFilmstrip_pagingControl_\' + uid ]]":style.visibility="[[ attachmentsData().length > 1 ? \'\' : \'hidden\' ]]"data="[[ getFilmStripPagingModel() ]]"page-size="0"page-options=\'{ "type": "dots" }\'></oj-paging-control></div></div></div></oj-bind-if><oj-bind-if test="[[ (attachmentsDataProvider.isEmpty() !== \'yes\') &amp;&amp; ($properties.displayOptions &amp;&amp; $properties.displayOptions.type === \'table\' &amp;&amp; mdUpContainerSize()) ]]"><oj-table :id="[[ \'attachmentsTable_\' + uid ]]"data="[[ attachmentsDataSource ]]"class="oj-sp-attachments-table"columns="[[ getAttachmentsTableColumns(lgUpContainerSize()) ]]"accessibility.row-header="[[ \'attachmentsTable_titleColumn_\' + uid ]]":aria-label="[[ res().attachmentsTable ]]"><template slot="iconTemplate"data-oj-as="cell"><oj-bind-if test="[[ getDisplayLeadingType(cell.item.data.DatatypeCode) !== DISPLAY_LEADING_TYPE_THUMBNAIL &amp;&amp; getDisplayLeadingType(cell.item.data.DatatypeCode) !== DISPLAY_LEADING_TYPE_PROGRESS   ]]"><span :class="[[`oj-ux-icon-size-6x oj-sp-attachments-list-inner-leading-visual oj-sp-attachments-list-leading-icon ${getMimeTypeIcon(cell.item.data.DatatypeCode, cell.item.data.UploadedFileContentType ? cell.item.data.UploadedFileContentType : cell.item.data.FileMimeType, cell.item.data.FileProgress)}`]]"role="img":aria-label="[[ getMimeTypeIconAriaLabel(cell.item.data.DatatypeCode, cell.item.data.UploadedFileContentType ? cell.item.data.UploadedFileContentType : cell.item.data.FileMimeType, cell.item.data.FileProgress) ]]"></span></oj-bind-if><oj-bind-if test="[[ getDisplayLeadingType(cell.item.data.DatatypeCode) === DISPLAY_LEADING_TYPE_THUMBNAIL ]]"><oj-sp-thumbnail class="oj-sp-attachments-list-inner-leading-visual oj-sp-attachments-list-leading-icon"data-oj-clickthrough="disabled"src=""icon-type="[[ cell.item.data.UploadedFileContentType ? cell.item.data.UploadedFileContentType : cell.item.data.FileMimeType ]]"type="ICON"></oj-sp-thumbnail></oj-bind-if><oj-bind-if test="[[ getDisplayLeadingType(cell.item.data.DatatypeCode) === DISPLAY_LEADING_TYPE_PROGRESS ]]"><oj-progress-circle size="sm"value="[[ cell.item.data.FileProgress ]]"></oj-progress-circle></oj-bind-if></template><template slot="fileUrlTemplate"data-oj-as="cell"><oj-bind-if test="[[ (cell.item.data.DatatypeCode === DATA_TYPE_CODE_WEB_PAGE) ]] "><a :id="[[uid +\'_table_primaryText_url_\' + cell.item.index]]"target="_blank":href="[[ cell.item.data.Url ]]"><oj-bind-text value="[[ getPrimaryText(cell.item.data.DatatypeCode, cell.item.data.FileName, cell.item.data.Url, cell.item.data.Title, cell.item.data.UploadFiles) ]]"></oj-bind-text></a></oj-bind-if><oj-bind-if test="[[ (cell.item.data.DatatypeCode !== DATA_TYPE_CODE_WEB_PAGE) &amp;&amp; ( !properties.displayOptions || !properties.displayOptions.displayNameAction || properties.displayOptions.displayNameAction === DISPLAY_NAME_ACTION_NONE ) ]] "><oj-bind-text value="[[ getPrimaryText(cell.item.data.DatatypeCode, cell.item.data.FileName, cell.item.data.Url, cell.item.data.Title, cell.item.data.UploadFiles) ]]"></oj-bind-text></oj-bind-if><oj-bind-if test="[[ (cell.item.data.DatatypeCode !== DATA_TYPE_CODE_WEB_PAGE) &amp;&amp; properties.displayOptions &amp;&amp; properties.displayOptions.displayNameAction &amp;&amp; properties.displayOptions.displayNameAction !== DISPLAY_NAME_ACTION_NONE ]] "><a :id="[[uid +\'_table_primaryText_file_link_\' + cell.item.index]]"on-click="[[ handleTableFileTitleClick ]]"on-contextmenu="[[ handleTableFileTitleContextMenu ]]"tabindex="0"><oj-bind-text value="[[ getPrimaryText(cell.item.data.DatatypeCode, cell.item.data.FileName, cell.item.data.Url, cell.item.data.Title, cell.item.data.UploadFiles) ]]"></oj-bind-text></a></oj-bind-if></template><template slot="fileSizeTemplate"data-oj-as="cell"><oj-bind-text value="[[ formatSize(cell.item.data.UploadedFileLength) ]]"></oj-bind-text></template><template slot="lastUpdateDateTemplate"data-oj-as="cell"><oj-bind-text value="[[ formatLastUpdatedDate(cell.item.data.LastUpdateDate) ]]"></oj-bind-text></template><template slot="descriptionTemplate"data-oj-as="cell"><span :title="[[ cell.item.data.Description ]]"><oj-bind-text value="[[ cell.item.data.Description ]]"></oj-bind-text></span></template><template slot="actionsTemplate"data-oj-as="cell"><div :id="[[uid +\'_table_toolbar_container_\' + cell.item.index]]":_overflow="[[ getTableHasOverflowMenu(cell.item.data.DatatypeCode, cell.item.data.Url, cell.item.data.Title, cell.item.data)() ]]"><oj-toolbar data-oj-clickthrough="disabled"class="oj-sp-attachments-table-toolbar"><oj-bind-for-each data="[[ getTableInlineVisibleActions(cell.item.data.DatatypeCode, cell.item.data.Url, cell.item.data.Title, cell.item.data.DownloadProgress, cell.item.data)() ]]"><template><oj-button :id="[[ uid + \'_table_\' + $current.data.id + \'_icon_\' + cell.item.data.AttachedDocumentId + \'_\' + cell.item.index ]]"display="icons"chroming="borderless"disabled="[[ $current.data.disabled ]]":class="[[ $current.data.class ]]"on-oj-action="[[ handleTableAction ]]"><span slot="startIcon":class="[[ $current.data.icon ]]"></span><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-button></template></oj-bind-for-each><oj-bind-if test="[[ getTableHasOverflowMenu(cell.item.data.DatatypeCode, cell.item.data.Url, cell.item.data.Title, cell.item.data)() ]]"><oj-button :id="[[ uid + \'_table_overflow_\' + cell.item.index + \'_\' + cell.item.data.AttachedDocumentId  ]]"class="oj-sp-attachments-list-overflow-menu-button"chroming="borderless"display="icons"on-oj-action="[[ handleTableOverflowOpenMenu ]]"><div slot="startIcon"class="oj-ux-ico-overflow-horiz"></div><oj-bind-text value="[[res().moreActions]]"></oj-bind-text></oj-button></oj-bind-if></oj-toolbar></div><oj-bind-if test="[[ getTableHasOverflowMenu(cell.item.data.DatatypeCode, cell.item.data.Url, cell.item.data.Title, cell.item.data)() ]]"><oj-menu :id="[[uid + \'_table_more-actions-menu_\' + cell.item.index + \'_\' + cell.item.data.AttachedDocumentId]]"class="oj-sp-attachments-list-overflow-menu":aria-label="[[res().actions]]"open-options.initial-focus="firstItem"on-oj-menu-action="[[ handleTableOverflowAction ]]"><oj-bind-for-each data="[[ getTableOverflowVisibleActions(cell.item.data.DatatypeCode, cell.item.data.Url, cell.item.data.Title, cell.item.data.DownloadProgress, cell.item.data)() ]]"><template><oj-option data-oj-clickthrough="disabled":id="[[ uid + \'_table_more-actions-menu_\' + $current.data.id + \'_\' + cell.item.index + \'_\' + cell.item.data.AttachedDocumentId ]]"value="[[$current.data.id]]":disabled="[[$current.data.disabled]]"><span :class="[[$current.data.icon]]"slot="startIcon"></span><span class="oj-sp-attachments-list-label"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></template></oj-bind-for-each></oj-menu></oj-bind-if></template></oj-table><oj-menu :id="[[ uid + \'_table_context-actions-menu\' ]]"class="oj-sp-attachments-list-overflow-menu":aria-label="[[ res().actions ]]"open-options.initial-focus="firstItem"on-oj-menu-action="[[ handleFileTitleContextAction ]]"><oj-option data-oj-clickthrough="disabled":id="[[ uid + \'_table_context-actions-menu_new-tab\' ]]"value="[[ ACTION_ID_NEW_TAB ]]"><span class="oj-sp-attachments-table-label"><oj-bind-text value="[[ res().previewNewTab ]]"></oj-bind-text></span></oj-option></oj-menu></oj-bind-if><oj-dialog :id="[[ \'attachmentsLinkDialogInput_\' + $uniqueId ]]"dialog-title="[[ res().addUrlDialogHeader ]]"><div slot="body"><oj-sp-input-url class="oj-sm-margin-2x-end"value="{{ attachmentsLinkInput }}"label-edge="inside"validators="[[ [ attachmentsLinkAsyncLengthValidator ] ]]"display-options.validator-hint="none":id="[[\'attachmentsLinkDialogInput_urlInput_\' + $uniqueId]]"></oj-sp-input-url><div class="oj-flex oj-sm-flex-direction-column oj-sp-attachments-link-dialog-align-buttons"><oj-button :id="[[\'attachmentsLinkDialogInput_addBtn_\' + $uniqueId]]"class="oj-flex-item oj-sm-margin-2x"chroming="solid"on-oj-action="[[ handleAttachmentsLinkDialogAttach ]]"><oj-bind-text value="[[ res().addUrl ]]"></oj-bind-text></oj-button><oj-button :id="[[\'attachmentsLinkDialogInput_cancelBtn_\' + $uniqueId]]"class="oj-flex-item oj-sm-margin-2x"on-oj-action="[[ handleAttachmentsLinkDialogCancel ]]"><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></oj-button></div></div></oj-dialog><oj-dialog :id="[[ \'attachmentsRemoveDialog_\' + $uniqueId ]]"dialog-title="[[ res().removeDialogHeader ]]"><div slot="body"></div><div slot="footer"><oj-button :id="[[\'attachmentsRemoveDialog_cancelBtn_\' + $uniqueId]]"class="oj-sm-margin-2x"on-oj-action="[[ handleAttachmentsRemoveDialogCancel ]]"><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></oj-button><oj-button :id="[[\'attachmentsRemoveDialog_removeBtn_\' + $uniqueId]]"class="oj-sm-margin-2x"chroming="danger"on-oj-action="[[ handleAttachmentsRemoveDialogRemove ]]"><oj-bind-text value="[[ res().attachmentsRemove ]]"></oj-bind-text></oj-button></div></oj-dialog><oj-dialog :id="[[ \'attachmentsListEditDialog_\' + $uniqueId ]]"dialog-title="[[ res().editDialogHeader ]]":class="[[ mdUpContainerSize() ? \'oj-sp-attachments-md-up-edit-dialog-size\' : \'oj-sp-attachments-md-down-edit-dialog-size\' ]]"class="oj-sp-attachments-edit-dialog-size"><div slot="body"><oj-form-layout :id="[[ \'attachmentsListEditDialog_form_\' + $uniqueId ]]"label-edge="inside"max-columns="[[ editFormCols ]]"direction="row"colspan-wrap="wrap"><oj-label-value colspan="2"><oj-input-text :id="[[ \'attachmentsListEditDialog_form_title_\' + $uniqueId ]]"slot="value"label-hint="[[ res().displayNameLabel ]]"value="{{ editDialogTitle }}"></oj-input-text></oj-label-value><oj-input-text label-hint="[[ res().lastUpdatedByLabel ]]"value="{{ editDialogLastUpdatedBy }}"readonly="true"></oj-input-text><oj-input-date label-hint="[[ res().lastUpdatedOnLabel ]]"value="{{ editDialogLastUpdatedOn }}"readonly="true"></oj-input-date><oj-input-text label-hint="[[ res().fileSizeLabel ]]"value="{{ editDialogFileSize }}"readonly="true"></oj-input-text><oj-select-single :id="[[ \'attachmentsListEditDialog_form_category_\' + $uniqueId ]]"label-hint="[[ res().categoryLabel ]]"value-item="{{ editDialogCategoryItem }}"data="[[ categoriesDataProvider ]]"readonly="[[ editDialogCategoryReadonly ]]"item-text="[[ getCategoryDisplayName ]]"></oj-select-single><oj-label-value colspan="2"><oj-text-area label-hint="[[ res().descriptionLabel ]]"slot="value"value="{{ editDialogDescription }}"rows="1"></oj-text-area></oj-label-value></oj-form-layout></div><div slot="footer"><oj-button :id="[[\'attachmentsListEditDialog_cancelBtn_\' + $uniqueId]]"class="oj-sm-margin-2x":class="[[ mdUpContainerSize() ? \'oj-sp-attachments-md-up-oj-button-size\' : \'oj-sp-attachments-md-down-oj-button-size\' ]]"on-oj-action="[[ handleAttachmentsListEditDialogCancel ]]"><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></oj-button><oj-button :id="[[\'attachmentsListEditDialog_saveBtn_\' + $uniqueId]]"class="oj-sm-margin-2x":class="[[ mdUpContainerSize() ? \'oj-sp-attachments-md-up-oj-button-size\' : \'oj-sp-attachments-md-down-oj-button-size\' ]]"chroming="callToAction"on-oj-action="[[ handleAttachmentsListEditDialogSave ]]"><oj-bind-text value="[[ res().updateAttachment ]]"></oj-bind-text></oj-button></div></oj-dialog><oj-popup :id="[[ \'attachmentsPreviewDialog_\' + $uniqueId ]]"modality="modal"position.my.horizontal="center"position.my.vertical="top"position.at.horizontal="center"position.at.vertical="top"position.of="window"class="oj-sp-attachments-viewer-popup"><div class="oj-sp-attachments-viewer-header"><oj-defer><oj-sp-attachments-viewer :id="[[ \'attachmentsPreviewDialog_viewer_\' + $uniqueId ]]"attachments="[[ attachmentsPreviewDataProvider ]]"pages="[[ attachmentsPreviewPagesDataProvider ]]"selected="{{ previewSelectedAttachment }}"display-options.download="[[ (!properties.displayOptions || !properties.displayOptions.downloadVisibility || properties.displayOptions.downloadVisibility === \'visible\')\n            ? ((properties.displayOptions &amp;&amp; properties.displayOptions.download)\n              ? \'disabled\'\n              : \'on\')\n            : \'off\' ]]"display-options.remove="[[ (!properties.displayOptions || !properties.displayOptions.removeVisibility || properties.displayOptions.removeVisibility === \'visible\')\n            ? ((properties.displayOptions &amp;&amp; properties.displayOptions.remove)\n              ? \'disabled\'\n              : \'on\')\n            : \'off\' ]]"display-options.cancel="on"on-sp-attachments-viewer-action="[[ handleAttachmentsPreviewAction ]]"class="oj-sp-attachments-viewer-modal"></oj-sp-attachments-viewer></oj-defer></div></oj-popup></div></body></html>'})),define("text!oj-sp/attachments/component.json",[],(function(){return'{"name":"attachments","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Attachments","description":"Component to allow attachment of files and URLs to business objects","type":"composite","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-attachments-common":"2404.0.0","oj-sp-preview-card":"2404.0.0","oj-sp-thumbnail":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-list-item-template":"2404.0.0","oj-sp-attachments-viewer":"2404.0.0"},"implements":["SpAttachmentsElement"],"properties":{"displayOptions":{"displayName":"Display Options","description":"Provides options that affect how the component is displayed","type":"object|null","required":false,"properties":{"type":{"displayName":"Display Type","description":"Display option for attachments","type":"string","value":"list","enumValues":["list","filmstrip","table"],"propertyEditorValues":{"list":{"displayName":"List","description":"List view"},"filmstrip":{"displayName":"Filmstrip","description":"Filmstrip view"},"table":{"displayName":"Table","description":"Table view"}}},"addVisibility":{"displayName":"Add Visible","description":"Visibility of the add attachments action","type":"string","value":"visible","enumValues":["visible","hidden"],"propertyEditorValues":{"visible":{"displayName":"Visible","description":"Show action"},"hidden":{"displayName":"Hidden","description":"Hide action"}}},"add":{"displayName":"Disable Add","description":"Disable the add attachments action","type":"boolean","value":false},"addTypes":{"displayName":"Add Types","description":"Types of attachments that can be added","type":"string","value":"all","enumValues":["all","file","url"],"propertyEditorValues":{"all":{"displayName":"All","description":"File and URL Attachments"},"file":{"displayName":"File","description":"File Attachments"},"url":{"displayName":"URL","description":"URL Attachments"}}},"addFileProgress":{"displayName":"Add File Progress","description":"Progress display of add attachment files.","type":"string","value":"inline","enumValues":["all","inline"],"propertyEditorValues":{"all":{"displayName":"All","description":"Summary and inline add file progress indicators"},"inline":{"displayName":"Inline","description":"Inline add file progress indicators"}}},"removeVisibility":{"displayName":"Remove Visible","description":"Visibility of the remove attachments action","type":"string","value":"visible","enumValues":["visible","hidden"],"propertyEditorValues":{"visible":{"displayName":"Visible","description":"Show action"},"hidden":{"displayName":"Hidden","description":"Hide action"}}},"remove":{"displayName":"Disable Remove","description":"Disable the remove attachments action","type":"boolean","value":false},"updateVisibility":{"displayName":"Update Visible","description":"Visibility of the update attachments action","type":"string","value":"visible","enumValues":["visible","hidden"],"propertyEditorValues":{"visible":{"displayName":"Visible","description":"Show action"},"hidden":{"displayName":"Hidden","description":"Hide action"}}},"update":{"displayName":"Disable Update","description":"Disable the update attachments action","type":"boolean","value":false},"downloadVisibility":{"displayName":"Download Visible","description":"Visibility of the download attachments action","type":"string","value":"visible","enumValues":["visible","hidden"],"propertyEditorValues":{"visible":{"displayName":"Visible","description":"Show action"},"hidden":{"displayName":"Hidden","description":"Hide action"}}},"download":{"displayName":"Disable Download","description":"Disable the download attachments action","type":"boolean","value":false},"previewVisibility":{"displayName":"Preview Visible","description":"Visibility of the preview attachments action","type":"string","value":"visible","enumValues":["visible","hidden"],"propertyEditorValues":{"visible":{"displayName":"Visible","description":"Show action"},"hidden":{"displayName":"Hidden","description":"Hide action"}}},"preview":{"displayName":"Disable Preview","description":"Disable the preview attachments action","type":"boolean","value":false},"displayNameAction":{"displayName":"Display Name Action","description":"Sets the file display name link behaviour whether it launches modal preview (left-click) and additionally whether a new tab event is fired (right-click menu) for file based attachments.","type":"string","value":"none","enumValues":["none","modal","tab"],"propertyEditorValues":{"none":{"displayName":"None","description":"No link for display name for file based attachments"},"modal":{"displayName":"Modal","description":"Display Name link displayed with click action to display modal preview of file based attachments"},"tab":{"displayName":"Tab","description":"Display Name link displayed with click action to display modal preview of file based attachments and context-menu action to display context menu with option to fire new tab event."}}},"addRender":{"displayName":"Add Render","description":"Options for the desktop UI display of the add file and add URL actions","propertyGroup":"common","type":"string","value":"inline","enumValues":["inline","header"],"propertyEditorValues":{"inline":{"displayName":"Inline Fields","description":"Add files via drop zone and URL via input field"},"header":{"displayName":"Header Button","description":"Add files and URL via header buttons"}}},"categoryForCreate":{"description":"The mode that attachment category must be provided for attachment creation.  Default is to use the server-side default or default value provided in category property.","type":"string","value":"DEFAULT","enumValues":["DEFAULT","SELECT_REQUIRED"],"propertyEditorValues":{"DEFAULT":{"displayName":"Default","description":"Use the server-side default or default value provided in category property."},"SELECT_REQUIRED":{"displayName":"Select Required","description":"User needs to select a category for creating attachments."}},"displayName":"Category Mode","propertyGroup":"common"}}},"customRecordAction":{"description":"A custom action that is displayed in addition to the embedded attachment record actions","type":"object","properties":{"id":{"type":"string","description":"Identifier for the custom action."},"display":{"type":"string","displayName":"Display setting for the custom action","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The primary action is visible and enabled"},"off":{"displayName":"Off","description":"The primary action is not visible"},"disabled":{"displayName":"Disabled","description":"The primary action is visible and disabled"}}},"icon":{"type":"string","description":"Icon to display for the custom action."},"label":{"type":"string","description":"The label for the custom action."}},"displayName":"Custom Record Action","propertyGroup":"common"},"createMode":{"description":"The mode Attachments should use to create new records.","type":"string","value":"BACKGROUND","enumValues":["BACKGROUND","BACKGROUND_DEFERRED","BACKGROUND_DEFERRED_COMPLETE","SPECTRA_BACKGROUND","SPECTRA_BACKGROUND_DEFERRED","SPECTRA_BACKGROUND_DEFERRED_COMPLETE","SPECTRA_HYBRID_BACKGROUND","SPECTRA_HYBRID_BACKGROUND_DEFERRED","SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE"],"propertyEditorValues":{"BACKGROUND":{"displayName":"Background","description":"Upload files via background process."},"BACKGROUND_DEFERRED":{"displayName":"Background Deferred","description":"Create attachments for a record that does not exist yet via background process.  Attachment record data is provided in createPayload property. NB: Create payload and needs to be submitted to the server for record creation."},"BACKGROUND_DEFERRED_COMPLETE":{"displayName":"Background Deferred Complete","description":"Upload files for an attachment that does not exist yet via background process.  Attachment data is provided in createPayload property after upload has completed. NB: Create payload and needs to be submitted to the server for record creation."},"SPECTRA_BACKGROUND":{"displayName":"Spectra-Hybrid Background","description":"Upload files via spectra-hybrid background process."},"SPECTRA_BACKGROUND_DEFERRED":{"displayName":"Spectra-Hybrid Background Deferred","description":"Create attachments for a record that does not exist yet via spectra-hybrid background process.  Attachment record data is provided in createPayload property. NB: Create payload and needs to be submitted to the server for record creation."},"SPECTRA_BACKGROUND_DEFERRED_COMPLETE":{"displayName":"Spectra-Hybrid Background Deferred Complete","description":"Upload files for an attachment that does not exist yet via spectra-hybrid background process.  Attachment data is provided in createPayload property after upload has completed. NB: Create payload and needs to be submitted to the server for record creation."},"SPECTRA_HYBRID_BACKGROUND":{"displayName":"Spectra-Hybrid Background","description":"Upload files in spectra-hybrid background process."},"SPECTRA_HYBRID_BACKGROUND_DEFERRED":{"displayName":"Spectra-Hybrid Background Deferred","description":"Create attachments for a record that does not exist yet via spectra-hybrid background process.  Attachment record data is provided in createPayload property. NB: Create payload and needs to be submitted to the server for record creation."},"SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE":{"displayName":"Spectra-Hybrid Background Deferred Complete","description":"Upload files for an attachment that does not exist yet via spectra-hybrid background process.  Attachment data is provided in createPayload property after upload has completed. NB: Create payload and needs to be submitted to the server for record creation."}},"displayName":"Create Mode","propertyGroup":"common"},"createPayload":{"description":"The create payload is provided when createMode property is set to deferred.  The contents should be sent to the Attachments REST service once the parent business record has been created to allow deferred Attachments to be linked correctly to the business record.","type":"Array","readOnly":true,"writeback":true,"displayName":"Create Payload","propertyGroup":"common"},"category":{"description":"The default attachment category that items will be assigned.","type":"string","displayName":"Category","propertyGroup":"common"},"deferredOperationPayload":{"description":"An array of attachments record operations performed in the Attachments CCA when in a deferred create mode.  Follows the REST payload description for an ADFBC REST batch operation with path property relative to the Attachments endpoint.  Consumer will have to alter the path property to ensure it is relative to batch endpoint used.","type":"Array","readOnly":true,"writeback":true,"displayName":"Deferred Operation Payload","propertyGroup":"common"},"view":{"description":"The Attachments endpoint for retrieving data for attachments for the current business object.  Writeback only occurs for a data array value if and only if a data array value is provided as a component property.","type":"object","writeback":true,"properties":{"endpoint":{"description":"The Attachments endpoint for retrieving data for attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters required for the getEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the getEndpoint.  This may contain information such as custom headers.","type":"object"},"data":{"description":"A data provider or array for the view data.  If this value is supplied it will be used in preference to the endpoint and endpointParams sub-properties.  Writeback only occurs for a data array value.","type":"Array","writeback":true}},"displayName":"View","propertyGroup":"data"},"create":{"description":"The Attachments endpoint for creating data for attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for creating data for attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters required for the createEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the createEndpoint.  This may contain information such as custom headers.","type":"object"}},"displayName":"Create","propertyGroup":"data"},"delete":{"description":"The Attachments endpoint for deleting attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for deleting attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the deleteEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the delete endpoint.  This may contain information such as custom headers.","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for delete endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Delete","propertyGroup":"data"},"edit":{"description":"The Attachments endpoint for editing attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for editing attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the editEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the edit endpoint.  This may contain information such as custom headers.","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for edit endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Delete","propertyGroup":"data"},"download":{"description":"The Attachments endpoint for downloading attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for downloading attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the enclosureEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the enclosure endpoint.  This may contain information such as custom headers.","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for enclosure endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Enclosure","propertyGroup":"data"},"downloadService":{"description":"The Attachments endpoint for download service of attachments for the current business object.  This endpoint is designed to handle large file downloads.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for download service of attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the download service endpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the download service endpoint.  This may contain information such as custom headers.","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for download service endpoint.  Default value is attachedDocumentId.","type":"string"}},"displayName":"Download Service","propertyGroup":"data"},"preview":{"description":"The Attachments endpoint for previewing attachments for the current business object.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for previewing attachments for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the previewEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the preview endpoint.  This may contain information such as custom headers.","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for preview endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Preview","propertyGroup":"data"},"downloadWebImage":{"description":"The Attachments endpoint for downloading attachments WebImage display for the current business object.  This is used for filmstrip display type.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for downloading attachments WebImage display for the current business object.","type":"string"},"endpointParams":{"description":"An object containing the name/value pairs of parameters (excluding the Attachment parameter e.g. AttachedDocumentId) required for the enclosureEndpoint.  Default value is an empty object (no parameters).","type":"object"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the enclosure endpoint.  This may contain information such as custom headers.","type":"object"},"endpointAttachmentParamName":{"description":"The name of the AttachedDocumentId parameter required for enclosure endpoint.  Default value is AttachedDocumentId.","type":"string"}},"displayName":"Enclosure","propertyGroup":"data"},"categories":{"description":"The Attachments endpoint for category service.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for category service.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the categories endpoint.  This may contain information such as custom headers.","type":"object"},"endpointEntityNameParamName":{"description":"The name of the entityName parameter required for categories endpoint.  Default value is entityName.","type":"string"},"endpointActionParamName":{"description":"The name of the action parameter required for categories endpoint.  Default value is action.","type":"string"}},"displayName":"Categories","propertyGroup":"data"},"entityName":{"description":"The attachment entity name for document entity mapping.  For use in categories endpoint and Spectra-Hybrid background deferred create modes.","type":"string","displayName":"Entity Name","propertyGroup":"common"},"translations":{"description":"Instance Overrides of Strings","type":"object","displayName":"Translations","propertyGroup":"common","properties":{}},"backgroundTracker":{"description":"The Attachments endpoint for tracking background uploads.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for tracking background uploads.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the background tracker endpoint.  This may contain information such as custom headers.","type":"object"}},"displayName":"Background Tracker","propertyGroup":"data"},"backgroundUpload":{"description":"The Attachments endpoint for background uploads.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for background uploads.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the background uploads endpoint.  This may contain information such as custom headers.","type":"object"},"endpointTrackerParamName":{"description":"The name of the parameter required for background uploads endpoint (Spectra-Hybrid endpoints only).  Default value is TrackerId.","type":"string"}},"displayName":"Background Upload","propertyGroup":"data"},"backgroundDownload":{"description":"The Attachments endpoint for background downloads.  Can only be used in deferred modes when attachment record has not been created.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for background downloads.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the background downloads endpoint.  This may contain information such as custom headers.","type":"object"},"endpointTrackerParamName":{"description":"The name of the parameter required for background downloads endpoint.","type":"string"}},"displayName":"Background Download","propertyGroup":"data"},"backgroundDownloadWebImage":{"description":"The Attachments endpoint for background downloads WebImage display.  This is used for filmstrip display type.  Can only be used in deferred modes when attachment record has not been created.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for background downloads WebImage display.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the background downloads WebImage display endpoint.  This may contain information such as custom headers.","type":"object"},"endpointTrackerParamName":{"description":"The name of the parameter required for background downloads WebImage display endpoint.","type":"string"}},"displayName":"Background Download","propertyGroup":"data"},"chunkifyCreate":{"description":"The Attachments endpoint for registering a chunked uploads for attachments created in BACKGROUND create mode.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for creating a chunked upload.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the chunked upload endpoint.  This may contain information such as custom headers.","type":"object"},"endpointTrackerParamName":{"description":"The name of the parameter required for creating a chunked upload endpoint.","type":"string"}},"displayName":"Chunkify Create","propertyGroup":"data"},"backgroundChunkUpload":{"description":"The Attachments endpoint for sending a background chunked upload parts.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for creating a background chunked upload part.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the background chunked upload endpoint.  This may contain information such as custom headers.","type":"object"},"endpointTrackerParamName":{"description":"The name of the parameter required for tracking the attachment related to a background chunked upload part.","type":"string"},"endpointPartParamName":{"description":"The name of the parameter required for providing the part identifier for a background chunked upload part.","type":"string"}},"displayName":"Background Chunk Upload","propertyGroup":"data"},"backgroundChunkReassembleUpload":{"description":"The Attachments endpoint for completing a background chunked upload and reassemble the file.","type":"object","properties":{"endpoint":{"description":"The Attachments endpoint for completing a background chunked upload.","type":"string"},"endpointInitConfig":{"description":"An object containing the initial configuration settings for the background chunk upload reassemble endpoint.  This may contain information such as custom headers.","type":"object"},"endpointTrackerParamName":{"description":"The name of the parameter required for tracking the attachment related to a background chunked upload part.","type":"string"}},"displayName":"Background Chunk Upload","propertyGroup":"data"}},"events":{"spAttachmentAction":{"displayName":"Attachment Record Action","description":"Dispatched when custom record action is triggered.","bubbles":true,"cancelable":false},"spAttachmentCompletion":{"displayName":"Attachment Operation Completion","description":"A signal event that fires whenever the CCA completes an attachment creation, edit or deletion.  This event only fires when createMode is BACKGROUND or SPECTRA_HYBRID_BACKGROUND, or SPECTRA_BACKGROUND.","bubbles":true,"cancelable":false,"detail":{"action":{"description":"The attachment action completed - create, update or delete","type":"string"},"displayCount":{"description":"The current count of attachment records displayed in the component","type":"string"}}}},"methods":{"refresh":{"description":"A function to re-load the attachments data.","internalName":"_refresh","params":[],"return":"boolean"}},"extension":{"catalog":{"category":"Redwood Controls & Navigation","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Attachments&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraattachments.html","coverImage":"extension/catalog/images/ico-attachments.svg"},"vbdt":{"visibility":"oracleInternal"}},"icon":{"iconPath":"extension/catalog/images/ico-attachments.svg"}}'})),define("oj-sp/common/private/ThumbnailCommonPrivate",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ThumbnailCommonPrivate=t.ThumbnailIconType=void 0,function(e){e.Document="DOCUMENT",e.Image="IMAGE",e.Media="MEDIA",e.Audio="AUDIO",e.PDF="PDF",e.Presentation="PRESENTATION",e.Speadsheet="SPREADSHEET",e.Compressed="COMPRESSED",e.Code="CODE",e.Web="WEB",e.DefaultImage="DEFAULT_IMAGE",e.Unknown="UNKNOWN"}(i=t.ThumbnailIconType||(t.ThumbnailIconType={}));class o{static iconTypeForFileName(e){let t=i.Document;if(e&&e.lastIndexOf(".")>=0){const s=e.substring(e.lastIndexOf("."));this.arrayIncludes(o.ICON_DOCUMENT_SUFFIXES,s)?t=i.Document:this.arrayIncludes(o.ICON_IMAGE_SUFFIXES,s)?t=i.Image:this.arrayIncludes(o.ICON_MEDIA_SUFFIXES,s)?t=i.Media:this.arrayIncludes(o.ICON_AUDIO_SUFFIXES,s)?t=i.Audio:this.arrayIncludes(o.ICON_PDF_SUFFIXES,s)?t=i.PDF:this.arrayIncludes(o.ICON_CODE_SUFFIXES,s)?t=i.Code:this.arrayIncludes(o.ICON_PRESENTATION_SUFFIXES,s)?t=i.Presentation:this.arrayIncludes(o.ICON_SPREADSHEET_SUFFIXES,s)?t=i.Speadsheet:this.arrayIncludes(o.ICON_WEB_SUFFIXES,s)?t=i.Web:this.arrayIncludes(o.ICON_COMPRESSED_SUFFIXES,s)?t=i.Compressed:s&&(t=i.Unknown)}else t=e&&e.lastIndexOf(".")<0?i.Unknown:i.DefaultImage;return t}static iconTypeForMimeType(e){let t=i.Document;return t=this.arrayIncludes(o.ICON_DOCUMENT_CONTENT_TYPES,e)?i.Document:this.arrayIncludes(o.ICON_IMAGE_CONTENT_TYPES,e)?i.Image:this.arrayIncludes(o.ICON_MEDIA_CONTENT_TYPES,e)?i.Media:this.arrayIncludes(o.ICON_AUDIO_CONTENT_TYPES,e)?i.Audio:this.arrayIncludes(o.ICON_PDF_CONTENT_TYPES,e)?i.PDF:this.arrayIncludes(o.ICON_CODE_CONTENT_TYPES,e)?i.Code:this.arrayIncludes(o.ICON_PRESENTATION_CONTENT_TYPES,e)?i.Presentation:this.arrayIncludes(o.ICON_SPREADSHEET_CONTENT_TYPES,e)?i.Speadsheet:this.arrayIncludes(o.ICON_WEB_CONTENT_TYPES,e)?i.Web:this.arrayIncludes(o.ICON_COMPRESSED_CONTENT_TYPES,e)?i.Compressed:i.Unknown,t}static iconClassForIconType(e){let t=o.ICON_DOCUMENT_CLASS;return t=e===i.Document?o.ICON_DOCUMENT_CLASS:e===i.Image?o.ICON_IMAGE_CLASS:e===i.Media?o.ICON_MEDIA_CLASS:e===i.Audio?o.ICON_AUDIO_CLASS:e===i.PDF?o.ICON_PDF_CLASS:e===i.Code?o.ICON_CODE_CLASS:e===i.Presentation?o.ICON_PRESENTATION_CLASS:e===i.Speadsheet?o.ICON_SPREADSHEET_CLASS:e===i.Web?o.ICON_WEB_CLASS:e===i.Compressed?o.ICON_COMPRESSED_CLASS:e===i.DefaultImage?o.DEFAULT_IMAGE_CLASS:o.ICON_UNKNOWN_CLASS,t}static alternativeTextForIconType(e,t){let o=t.unknownFileTypeIcon;return o=e===i.Document?t.documentAlternativeText:e===i.Image?t.imageAlternativeText:e===i.Media?t.videoAlternativeText:e===i.Audio?t.audioAlternativeText:e===i.PDF?t.pdfAlternativeText:e===i.Code?t.codeAlternativeText:e===i.Presentation?t.presentationAlternativeText:e===i.Speadsheet?t.spreadsheetAlternativeText:e===i.Web?t.webAlternativeText:e===i.Compressed?t.compressedAlternativeText:t.unknownFileTypeIcon,o}static arrayIncludes(e,t){let i=!1;for(let o=0;o<e.length;o++)if(e[o]===t){i=!0;break}return i}}o.DEFAULT_IMAGE_CLASS="oj-ux-ico-file-image",o.ICON_DOCUMENT_SUFFIXES=[".doc",".pages",".txt",".odt",".docx",".rtf"],o.ICON_IMAGE_SUFFIXES=[".png",".gif",".jpg",".psd",".ai",".eps",".tiff",".exif",".bmp",".heif",".cgm",".svg",".jpeg"],o.ICON_MEDIA_SUFFIXES=[".mov",".vlc",".avi",".hdmov",".hdv",".hevc",".iva",".m1v",".m2a",".m2v",".m4v",".mp4",".mp4v",".mpeg",".qt",".swf",".wm",".wmv",".wpl"],o.ICON_AUDIO_SUFFIXES=[".mp3",".m4a",".mid",".midi",".mpa",".snd",".wav",".wma"],o.ICON_PDF_SUFFIXES=[".pdf"],o.ICON_PRESENTATION_SUFFIXES=[".keynote",".ppt"],o.ICON_SPREADSHEET_SUFFIXES=[".xls",".numbers",".csv",".xlsx",".ods"],o.ICON_COMPRESSED_SUFFIXES=[".zip",".rar",".sfx",".sit",".tz",".zipx"],o.ICON_CODE_SUFFIXES=[".css",".js",".xml",".jar",".cfm",".dhtml",".htc",".jsp",".php",".shtml",".xhtml"],o.ICON_WEB_SUFFIXES=[".html"],o.ICON_DOCUMENT_CONTENT_TYPES=["application/msword","application/vnd.apple.pages","text/plain","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","text/rtf"],o.ICON_IMAGE_CONTENT_TYPES=["image/png","image/gif","image/jpeg","image/vnd.adobe.photoshop","application/postscript","image/tiff","image/bmp","image/heif","image/cgm","image/svg+xml"],o.ICON_MEDIA_CONTENT_TYPES=["video/quicktime","video/x-msvideo","video/mpeg","video/x-m4v","video/mp4","video/mpeg","video/quicktime","application/x-shockwave-flash","video/x-ms-wm","video/x-ms-wmv","application/vnd.ms-wpl"],o.ICON_AUDIO_CONTENT_TYPES=["audio/mpeg","audio/m4a","audio/midi","audio/x-midi","audio/basic","audio/wav","audio/x-ms-wma"],o.ICON_PDF_CONTENT_TYPES=["application/pdf"],o.ICON_PRESENTATION_CONTENT_TYPES=["application/vnd.apple.keynote","application/vnd.ms-powerpoint"],o.ICON_SPREADSHEET_CONTENT_TYPES=["application/vnd.ms-excel","application/vnd.apple.numbers","text/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.spreadsheet"],o.ICON_COMPRESSED_CONTENT_TYPES=["application/zip","application/x-rar-compressed","application/x-sit","application/x-stuffit","application/gzip"],o.ICON_CODE_CONTENT_TYPES=["text/css","text/javascript","application/xml","text/xml","application/java-archive","text/x-component","application/php","application/xhtml+xml"],o.ICON_WEB_CONTENT_TYPES=["text/html"],o.ICON_DOCUMENT_CLASS="oj-ux-ico-file-doc",o.ICON_IMAGE_CLASS="oj-ux-ico-file-image",o.ICON_MEDIA_CLASS="oj-ux-ico-file-media",o.ICON_AUDIO_CLASS="oj-ux-ico-file-music",o.ICON_PDF_CLASS="oj-ux-ico-file-pdf",o.ICON_PRESENTATION_CLASS="oj-ux-ico-file-presentation",o.ICON_SPREADSHEET_CLASS="oj-ux-ico-file-spreadsheet",o.ICON_COMPRESSED_CLASS="oj-ux-ico-file-zip",o.ICON_CODE_CLASS="oj-ux-ico-file-code",o.ICON_WEB_CLASS="oj-ux-ico-file-web",o.ICON_UNKNOWN_CLASS="oj-ux-ico-file-unknown",t.ThumbnailCommonPrivate=o})),define("oj-sp/common/ThumbnailCommon",["require","exports","./private/ThumbnailCommonPrivate"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThumbnailCommon=void 0;t.ThumbnailCommon=class{static iconClassForFileName(e){const t=i.ThumbnailCommonPrivate.iconTypeForFileName(e);return i.ThumbnailCommonPrivate.iconClassForIconType(t)}static iconClassForMimeType(e){const t=i.ThumbnailCommonPrivate.iconTypeForMimeType(e);return i.ThumbnailCommonPrivate.iconClassForIconType(t)}}})),define("oj-sp/attachments/js/mime-type-helper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MimeTypeHelper=void 0;class i{static isFilmStripImageMimeType(e){return i.arrayIncludes(i.FILMSTRIP_IMAGE_CONTENT_TYPES,e)}static isFilmStripImageFileName(e){let t=!1;if(e&&e.lastIndexOf(".")>=0){const o=e.substring(e.lastIndexOf("."));t=i.arrayIncludes(i.FILMSTRIP_IMAGE_SUFFIXES,o)}return t}static arrayIncludes(e,t){let i=!1;for(let o=0;o<e.length;o++)if(e[o]===t){i=!0;break}return i}}i.FILMSTRIP_IMAGE_CONTENT_TYPES=["image/png","image/gif","image/jpeg","image/tiff","image/bmp","image/vnd.wap.wbmp"],i.FILMSTRIP_IMAGE_SUFFIXES=[".png",".gif",".jpg",".tiff",".bmp",".wbmp",".jpeg"],t.MimeTypeHelper=i})),define("text!oj-sp/attachments-viewer/attachments-viewer-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-attachments-viewer-container oj-panel oj-sm-padding-0"role="group"data-oj-context=""><div class="oj-sp-attachments-viewer-toolbar oj-sm-padding-2x-top oj-sm-padding-2x-bottom":class="[[{\n  \'oj-sm-padding-4x-end oj-sm-padding-4x-start\': screenRange() === \'sm\',\n  \'oj-md-padding-6x-end oj-md-padding-6x-start\': screenRange() === \'md\',\n  \'oj-lg-padding-12x-end oj-lg-padding-12x-start\': screenRange() === \'lg\' || screenRange() === \'xl\'\n  }]]"role="group"><div class="oj-flex-bar oj-color-invert oj-sm-flex-wrap-nowrap"role="group"><div class="oj-flex-item oj-flex-bar-start oj-sm-12 oj-md-5 oj-lg-5 oj-sm-flex-wrap-nowrap oj-sp-attachments-viewer-title"><oj-bind-if test="[[ cancelAction().display === \'on\' || cancelAction().display === \'disabled\' ]]"><oj-button :id="[[ uid + \'_cancel\' ]]"class="oj-sm-padding-1x-top oj-sp-attachments-viewer-cancel-button"display="icons"on-oj-action="[[ buttonActionHandler ]]"disabled="[[ cancelAction().display === \'disabled\' ]]"chroming="borderless"><span slot="startIcon"class="oj-ux-ico-arrow-left"></span><oj-bind-text value="[[ res.close ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ currentAttachment() != null ]]"><div class="oj-flex-item oj-sm-flex-initial oj-sm-padding-4x-top oj-sm-padding-2x-end oj-sp-attachments-viewer-fileIcon"><div :class="[[currentAttachment().iconClass]]"></div></div><div :class="[[\'oj-flex-item oj-sp-helper-truncate oj-sm-padding-4x-top\']]"><div class="oj-typography-body-sm oj-text-color-primary oj-typography-bold oj-sp-helper-truncate":id="[[ uid + \'_titleLabel\' ]]":title="[[currentAttachment().itemTitle]]"><oj-bind-text value="[[currentAttachment().itemTitle]]"></oj-bind-text></div></div></oj-bind-if></div><div class="oj-flex-bar-middle oj-lg-padding-1x-end oj-xl-padding-1x-end oj-md-padding-6x-start oj-lg-padding-6x-start oj-sp-attachments-viewer-center-toolbar"><oj-toolbar :id="[[ uid + \'_toolbar_magnification\' ]]"class="oj-sm-flex-wrap-nowrap":aria-label="[[res.magnificationControlGroup]]"aria-controls="controlled"><oj-bind-for-each data="[[magnificationActions]]"><template><oj-button display="icons":id="[[uid + \'_\' + $current.data.id]]":disabled="[[$current.data.display === \'none\']]"on-oj-action="[[buttonActionHandler]]"><div slot="startIcon":class="[[$current.data.icon]]"></div><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-button></template></oj-bind-for-each></oj-toolbar></div><div class="oj-flex-bar-end"><oj-toolbar :id="[[ uid + \'_toolbar_navigation\' ]]"class="oj-sm-flex-wrap-nowrap":aria-label="[[res.navigationControlGroup]]"aria-controls="controlled"><oj-bind-if test="[[ downloadAction().display === \'on\' || downloadAction().display === \'disabled\' ]]"><oj-button :id="[[ uid + \'_download\' ]]"class="oj-sp-attachments-viewer-toolbar-action"display="icons"on-oj-action="[[ buttonActionHandler ]]"disabled="[[ downloadAction().display === \'disabled\' ]]"chroming="borderless"><span slot="startIcon":class="[[ downloadAction().icon ]]"></span><oj-bind-text value="[[ downloadAction().label ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ deleteAction().display === \'on\' || deleteAction().display === \'disabled\' ]]"><oj-button :id="[[ uid + \'_remove\' ]]"class="oj-sp-attachments-viewer-toolbar-action"display="icons"on-oj-action="[[ buttonActionHandler ]]"disabled="[[ deleteAction().display === \'disabled\' ]]"chroming="borderless"><span slot="startIcon":class="[[ deleteAction().icon ]]"></span><oj-bind-text value="[[ deleteAction().label ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ attachmentsCount() > 1]]"><oj-button :id="[[ uid + \'_previousFile\' ]]"class="oj-sp-attachments-viewer-toolbar-action"display="icons"on-oj-action="[[ buttonActionHandler ]]"disabled="[[ previousAction().display === \'disabled\' ]]"chroming="borderless"on-disabled-changed="[[ refreshToolbar ]]"><span slot="startIcon":class="[[ previousAction().icon ]]"></span><oj-bind-text value="[[ previousAction().label ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ attachmentsCount() > 1]]"><oj-button :id="[[ uid + \'_nextFile\' ]]"class="oj-sp-attachments-viewer-toolbar-action"display="icons"on-oj-action="[[ buttonActionHandler ]]"disabled="[[ nextAction().display === \'disabled\' ]]"chroming="borderless"on-disabled-changed="[[ refreshToolbar ]]"><span slot="startIcon":class="[[ nextAction().icon ]]"></span><oj-bind-text value="[[ nextAction().label ]]"></oj-bind-text></oj-button></oj-bind-if><oj-menu-button :id="[[uid + \'_menuButton\']]"display="icons"class="oj-sp-attachments-viewer-toolbar-menuButton":title="[[ res.actions ]]":aria-label="[[ res.actions ]]"><oj-menu :id="[[uid + \'_menu\']]"slot="menu"on-oj-menu-action="[[ menuActionHandler ]]"open-options.display="sheet"><oj-bind-if test="[[ attachmentsCount() > 1]]"><oj-bind-for-each data="[[navigationActions]]"><template><oj-option :id="[[uid + \'_navAction_\' + $current.data.id]]"value="[[$current.data.label]]"disabled="[[$current.data.display === \'disabled\']]"><span slot="startIcon":class="[[$current.data.icon]]"></span><span><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></span></oj-option></template></oj-bind-for-each><oj-option>---</oj-option></oj-bind-if><oj-bind-for-each data="[[allActions]]"><template><oj-bind-if test="[[ $current.data.display === \'on\' || $current.data.display === \'disabled\' ]]"><oj-option :id="[[uid + \'_menuItem_\' + $current.data.id]]"value="[[$current.data.label]]"disabled="[[$current.data.display === \'disabled\']]"><span slot="startIcon":class="[[$current.data.icon]]"></span><span><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-toolbar></div></div></div><div :id="[[ uid + \'_attachments-viewer-content\' ]]":class="oj-sp-attachments-viewer-content"><oj-list-view :id="[[ uid + \'_listview\']]"data="[[ $properties.pages ]]":class="oj-sp-attachments-viewer-content-list":aria-label="[[ res.attachmentContent ]]"><template slot="itemTemplate"data-oj-as="item"><div class="oj-sp-attachments-viewer-page"><img :id="[[ uid + \'_img_\' + item.data.id ]]":class="[[ scale() == \'FitWidth\' || scale() == \'FitHeight\' ? \'oj-sp-attachments-viewer-image-\' + scale().toLowerCase() : \'oj-sp-attachments-viewer-image\' ]]":src="[[ require.toUrl(item.data.imageSource) ]]":label="[[ currentAttachment() &amp;&amp; currentAttachment().itemTitle + \' \' + item.data.pageNum]]":alt="[[ currentAttachment() &amp;&amp; currentAttachment().itemTitle + \' \' + item.data.pageNum]]"></div></template></oj-list-view></div></div></body></html>'})),define("text!oj-sp/attachments-viewer/component.json",[],(function(){return'{"name":"attachments-viewer","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Attachments Viewer","type":"composite","description":"Attachments Viewer presents the image(s) of the attachment file for taking actions of downloading, deleting or viewing.","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"properties":{"attachments":{"type":"oj.DataProvider","displayName":"Attachments","description":"Attachments data provider","required":true,"propertyGroup":"common"},"pages":{"type":"oj.DataProvider","displayName":"Pages","description":"Pages data provider","required":true,"propertyGroup":"common"},"selected":{"type":"string","displayName":"Selected","description":"Selected documents and pages","writeback":true,"propertyGroup":"common"},"scale":{"type":"string","displayName":"Scale","description":"Initial scale for displaying pages","writeback":true,"propertyGroup":"common","value":"100%","enumValues":["50","100","150","200","300","500","FitHeight","FitWidth"],"propertyEditorValues":{"50":{"displayName":"50%","description":"Scaled to 50% of container size."},"100":{"displayName":"100%","description":"Scaled to 100% of container size."},"150":{"displayName":"150%","description":"Scaled to 150% of container size."},"200":{"displayName":"200%","description":"Scaled to 200% of container size."},"300":{"displayName":"300%","description":"Scaled to 300% of container size."},"500":{"displayName":"500%","description":"Scaled to 500% of container size."},"FitHeight":{"displayName":"FitHeight","description":"Fits image to height of container."},"FitWidth":{"displayName":"FitWidth","description":"Fits Image to width of container."}}},"displayOptions":{"displayName":"Display Options","description":"Configure display options of built in actions of attachments viewer.","type":"object|null","propertyGroup":"common","properties":{"download":{"type":"string","displayName":"Download Action","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Download is visible and enabled."},"off":{"displayName":"Off","description":"Download is not visible."},"disabled":{"displayName":"Disabled","description":"Download is visible and disabled."}}},"cancel":{"type":"string","displayName":"Cancel Action","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled. \'on\' or \'disabled\' must be used if the component is used in a modal dialog.","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Cancel is visible and enabled."},"off":{"displayName":"Off","description":"Cancel is not visible."},"disabled":{"displayName":"Disabled","description":"cancel is visible and disabled."}}},"remove":{"type":"string","displayName":"Remove Action","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Remove is visible and enabled."},"off":{"displayName":"Off","description":"Remove is not visible."},"disabled":{"displayName":"Disabled","description":"Remove is visible and disabled."}}}}}},"methods":{"refresh":{}},"events":{"spAttachmentsViewerAction":{"bubbles":true,"description":"Dispatched when an attachments viewer action is triggered.","displayName":"Attachments Viewer Action Event","detail":{"eventType":{"description":"The type of action that was triggered - like \'cancel\', \'download\', \'remove\'.","type":"string"}},"eventGroup":"common"}},"slots":{},"extension":{"catalog":{"category":"Redwood Controls & Navigation","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Attachments%20Viewer&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraattachmentsviewer.html","coverImage":"extension/catalog/images/ico-file-view-details-48.svg"},"vbdt":{"pi":{"events":{"suggestions":[{"type":"component","name":"spAttachmentsViewerAction","mappings":[{"variableName":"eventType","expression":"{{$event.detail.type}}","type":"string"}]}]},"layouts":{"data":{"customizers":[{"propertyName":"value"}]},"general":{"customizers":[{"propertyName":"attachments","displayName":"Attachments"},{"propertyName":"pages","displayName":"Pages"},{"propertyName":"selected","displayName":"Selected"},{"propertyName":"scale","displayName":"Scale"},{"propertyName":"displayOptions.download","displayName":"Download Action"},{"propertyName":"displayOptions.cancel","displayName":"Cancel Action"},{"propertyName":"displayOptions.remove","displayName":"Remove Action"}]}}},"visibility":"oracleInternal"}},"icon":{"iconPath":"extension/catalog/images/ico-file-view-details-48.svg"}}'})),define("oj-sp/attachments-viewer/attachments-viewer-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common/EventDispatcher","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojknockout","ojs/ojlistview","ojs/ojtoolbar","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r){"use strict";var l,d;Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentsViewerViewModel=void 0,function(e){e.NEXT_FILE="nextFile",e.PREV_FILE="previousFile",e.ACTION="spAttachmentsViewerAction",e.ZOOM_IN="zoomIn",e.ZOOM_OUT="zoomOut",e.FIT_WIDTH="fitWidth"}(l||(l={})),function(e){e.X50="50",e.X100="100",e.X150="150",e.X200="200",e.X300="300",e.X500="500",e.FIT_WIDTH="FitWidth",e.FIT_HEIGHT="FitHeight"}(d||(d={}));t.AttachmentsViewerViewModel=class{constructor(e){this.context=e,this.buttonActionHandler=e=>{const t=e.target.id.lastIndexOf("_");if(-1===t)return;const i=e.target.id.substring(t+1);this.executeActionHandler(i)},this.menuActionHandler=e=>{let t=e.detail.selectedValue;t=t.replace(/\s/g,""),t=t.charAt(0).toLowerCase()+t.slice(1),this.executeActionHandler(t)},this.executeActionHandler=e=>{if(console.log(e),e===l.NEXT_FILE)this.nextFile();else if(e===l.PREV_FILE)this.prevFile();else if(e===l.ZOOM_IN){this.zoomLevel(1.1*this.zoomLevel());document.getElementById(this.uid+"_attachments-viewer-content").style.setProperty("--oj-sp-attachments-viewer-zoom",this.zoomLevel()+"%"),this.scale(this.zoomLevel()+"")}else if(e===l.ZOOM_OUT){this.zoomLevel(.9*this.zoomLevel());document.getElementById(this.uid+"_attachments-viewer-content").style.setProperty("--oj-sp-attachments-viewer-zoom",this.zoomLevel()+"%"),this.scale(this.zoomLevel()+"")}else if(e===l.FIT_WIDTH){this.zoomLevel(100);document.getElementById(this.uid+"_attachments-viewer-content").style.setProperty("--oj-sp-attachments-viewer-zoom",this.zoomLevel()+"%"),this.scale(d.FIT_WIDTH)}s.EventDispatcher.dispatch(l.ACTION,this.composite,{type:e,userData:this.currentAttachment()?this.currentAttachment().userData:void 0}),this.refreshNavToolbar()},this.refreshToolbar=e=>{this.refreshNavToolbar()},this.processMagnificationOptions=()=>{const e=[],t={display:"on",icon:"oj-ux-ico-zoom-out",id:"zoomOut",label:this.res.zoomOut};e.push(t);const i={display:"on",icon:"oj-ux-ico-zoom-in",id:"zoomIn",label:this.res.zoomIn};e.push(i);const o={display:"on",icon:"oj-ux-ico-maximize",id:"fitWidth",label:this.res.fitWidth};e.push(o),this.magnificationActions(e)},this.processAttachments=async e=>{if(null==e||"yes"===e.isEmpty())return this.attachmentsItems([]),this.selected(""),this.properties.setProperty("selected",this.selected()),this.attachmentsOffset=-1,this.currentAttachment(void 0),this.attachmentsCount(0),void(this.busyResolved||(this.busyResolve(),this.busyResolved=!0));const t=this.attachmentsOffset+1,i=await e.fetchByOffset({offset:t});if(null==i||null==i.results||i.results.length<1)this.attachmentsItems([]),this.selected(""),this.properties.setProperty("selected",this.selected()),this.attachmentsOffset=-1,this.currentAttachment(void 0),this.attachmentsCount(0);else{if(this.attachmentsItems(i.results),this.attachmentsCount(i.results.length),this.attachmentsOffset=t,this.selected()&&this.selected().length>0){const e=this.attachmentsItems().findIndex(e=>e.data.itemId===this.selected());-1!==e&&(this.attachmentsOffset=e),this.selected(i.results[this.attachmentsOffset].metadata.key)}else this.selected(i.results[this.attachmentsOffset].metadata.key);this.properties.setProperty("selected",this.selected()),this.currentAttachment(i.results[this.attachmentsOffset].data)}this.processDisplayAndNavOptions(),this.busyResolved||(this.busyResolve(),this.busyResolved=!0)},this.processDisplayAndNavOptions=()=>{const e=[],t=this.properties.displayOptions;if(t){if(t.cancel){const e={display:t.cancel,icon:"oj-ux-ico-print",id:"cancel",label:this.res.cancel};this.cancelAction(e)}if(t.download){const i={display:t.download,icon:"oj-ux-ico-download",id:"download",label:this.res.download};e.push(i),this.downloadAction(i)}if(t.remove){const i={display:t.remove,icon:"oj-ux-ico-trash",id:"remove",label:this.res.delete};e.push(i),this.deleteAction(i)}const i={display:this.attachmentsCount()>1&&this.attachmentsOffset>0?"on":"disabled",icon:"oj-ux-ico-chevron-left",id:l.PREV_FILE,label:this.res.previousFile};this.previousAction(i),e.push(i);const o={display:this.attachmentsCount()>1&&this.attachmentsOffset<this.attachmentsCount()-1?"on":"disabled",icon:"oj-ux-ico-chevron-right",id:l.NEXT_FILE,label:this.res.nextFile};this.nextAction(o),e.push(o)}this.allActions(e)},this.processSelectedChange=async e=>{if(e.value===this.selected())return;let t=this.attachmentsItems().findIndex(t=>t.data.itemId===e.value);if(-1===t){if(!this.properties.attachments)return;{this.attachmentsOffset=-1;const i=this.attachmentsOffset+1,o=await this.properties.attachments.fetchByOffset({offset:i});this.attachmentsItems(o.results),this.attachmentsCount(o.results.length),t=this.attachmentsItems().findIndex(t=>t.data.itemId===e.value)}}-1!==t&&(this.attachmentsOffset=t,this.selected(this.attachmentsItems()[this.attachmentsOffset].metadata.key),this.currentAttachment(this.attachmentsItems()[this.attachmentsOffset].data))};const t=a.getContext(e.element).getBusyContext();this.attachmentsOffset=-1,this.attachmentsItems=i.observableArray(),this.currentAttachment=i.observable(),this.attachmentsCount=i.observable(0),this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.scale=i.observable(e.properties&&e.properties.scale?e.properties.scale:d.FIT_WIDTH),this.zoomLevel=i.observable(100),this.selected=i.observable(e.properties&&e.properties.selected?e.properties.selected:""),this.cancelAction=i.observable(),this.downloadAction=i.observable(),this.deleteAction=i.observable(),this.nextAction=i.observable(),this.previousAction=i.observable(),this.allActions=i.observableArray(),this.magnificationActions=i.observableArray(),this.navigationActions=i.observableArray(),this.composite=e.element,this.uid=e.uniqueId,this.isSwiping=!1,this.screenRange=r.createScreenRangeObservable(),this.properties=e.properties,this.res=o,this.busyResolved=!1,this.processMagnificationOptions(),this.processDisplayAndNavOptions(),this.processAttachments(this.properties.attachments)}activated(e){n.log(`oj-sp-attachments-viewer ${this.uid} activated`)}connected(e){n.log(`oj-sp-attachments-viewer ${this.uid} connected`)}bindingsApplied(e){n.log(`oj-sp-attachments-viewer ${this.uid} bindingsApplied`)}propertyChanged(e){n.log(`oj-sp-attachments-viewer ${this.uid} propertyChanged`),"attachments"===e.property?(this.attachmentsOffset=-1,this.processAttachments(e.value)):"displayOptions"===e.property?this.processDisplayAndNavOptions():"scale"===e.property?this.processMagnificationOptions():"selected"===e.property&&this.processSelectedChange(e).then(e=>{this.processDisplayAndNavOptions(),this.refreshNavToolbar()}),"selected"!==e.property&&(this.processDisplayAndNavOptions(),this.refreshNavToolbar())}disconnected(e){n.log(`oj-sp-attachments-viewer ${this.uid} disconnected`)}refresh(){this.attachmentsOffset=-1;const e=a.getContext(this.composite).getBusyContext();this.busyResolved=!1,this.busyResolve=e.addBusyState({description:"Refresh - Waiting for data"}),this.processAttachments(this.properties.attachments),this.refreshNavToolbar()}refreshNavToolbar(){document.getElementById(this.uid+"_toolbar_navigation").refresh()}prevFile(){this.attachmentsOffset>0&&(this.attachmentsOffset-=1,this.selected(this.attachmentsItems()[this.attachmentsOffset].metadata.key),this.properties.setProperty("selected",this.selected()),this.currentAttachment(this.attachmentsItems()[this.attachmentsOffset].data)),this.processDisplayAndNavOptions()}nextFile(){this.attachmentsItems().length>this.attachmentsOffset+1&&(this.attachmentsOffset+=1,this.selected(this.attachmentsItems()[this.attachmentsOffset].metadata.key),this.properties.setProperty("selected",this.selected()),this.currentAttachment(this.attachmentsItems()[this.attachmentsOffset].data)),this.processDisplayAndNavOptions()}}})),define("css!oj-sp/attachments-viewer/attachments-viewer-styles",[],(function(){})),define("oj-sp/attachments-viewer/loader",["require","exports","ojs/ojcomposite","text!./attachments-viewer-view.html","text!./component.json","./attachments-viewer-viewModel","css!./attachments-viewer-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-attachments-viewer",{metadata:JSON.parse(s),parseFunction:void 0,view:o,viewModel:a.AttachmentsViewerViewModel})})),define("oj-sp/list-item-template/list-item-template-types",["require","exports","oj-c/avatar"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VISUAL_TYPE=t.COLUMN_LAYOUTS=t.COLUMN_TYPE=void 0,function(e){e.PRIMARY="primary",e.NON_ESSENTIAL="non-essential"}(t.COLUMN_TYPE||(t.COLUMN_TYPE={})),function(e){e.AUTO="auto",e.ONE="one",e.TWO_3_9="two-split3-9",e.TWO_9_3="two-split9-3",e.TWO_6_6="two-split6-6",e.THREE_3_3_6="three-split3-3-6",e.THREE_3_6_3="three-split3-6-3",e.THREE_6_3_3="three-split6-3-3",e.THREE_4_4_4="three-split4-4-4"}(t.COLUMN_LAYOUTS||(t.COLUMN_LAYOUTS={})),function(e){e.AVATAR="avatar",e.ICON="icon",e.ICON_CIRCLE="icon-circle"}(t.VISUAL_TYPE||(t.VISUAL_TYPE={}))})),define("oj-sp/list-item-template/list-item-template-util",["require","exports","preact","ojs/ojlogger","./list-item-template-types"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderSpacer=t.hasThreeColumns=t.hasTwoColumns=t.calculateColumnLayout=t.getNonEssentialIndex=t.getSecondaryIndex=t.getPrimaryIndex=void 0;t.getPrimaryIndex=e=>{let t=e.reduce((e,t,i)=>{if(t.columnType===s.COLUMN_TYPE.PRIMARY){if(void 0===e)return i;o.error(`Invalid type at column ${i}: column ${e} has already been marked as primary`)}return e},void 0);return t||(t=0),t};t.getSecondaryIndex=(e,i)=>{let o=0;return o=(0,t.hasThreeColumns)(e,i)?[0,1,2].filter(i=>i!==(0,t.getPrimaryIndex)(e)&&i!==(0,t.getNonEssentialIndex)(e))[0]:[0,1].filter(i=>i!==(0,t.getPrimaryIndex)(e))[0],o<e.length?o:e.length-1};t.getNonEssentialIndex=e=>{let i=e.reduce((e,t,i)=>{if(t.columnType===s.COLUMN_TYPE.NON_ESSENTIAL){if(void 0===e)return i;o.error(`Invalid type at column ${i}: column ${e} has already been marked as non essential`)}return e},void 0);const a=(0,t.getPrimaryIndex)(e);return i===a&&(i=void 0),void 0===i&&e.length>2&&(i=2===a?1:2),i<e.length?i:e.length-1};t.calculateColumnLayout=(e,t)=>{let i=s.COLUMN_LAYOUTS.AUTO;return t&&t.columnLayout&&(i=t.columnLayout),i===s.COLUMN_LAYOUTS.AUTO&&(i=1===e.length?s.COLUMN_LAYOUTS.ONE:2===e.length?s.COLUMN_LAYOUTS.TWO_6_6:s.COLUMN_LAYOUTS.THREE_4_4_4),i};t.hasTwoColumns=(e,i)=>{const o=(0,t.calculateColumnLayout)(e,i);return o.startsWith("two-")||o.startsWith("three-")};t.hasThreeColumns=(e,i)=>(0,t.calculateColumnLayout)(e,i).startsWith("three-");t.renderSpacer=(e,t,o)=>{if(e||t||o)return(0,i.h)("div",{class:"oj-sm-flex-0 oj-flex-item oj-flex oj-sm-flex-wrap-nowrap"},e&&t&&(0,i.h)("div",{class:"oj-sp-list-item-template-emphasis-and-selector-spacer"}),e&&!t&&(0,i.h)("div",{class:"oj-sp-list-item-template-selector-spacer"}),t&&!e&&(0,i.h)("div",{class:"oj-sp-list-item-template-emphasis-spacer"}),o&&(0,i.h)("div",{class:`oj-sp-list-item-template-${o}-spacer`}))}})),define("oj-sp/list-item-template/components/LeadingVisual",["require","exports","ojs/ojlogger","preact","../list-item-template-types","ojs/ojresponsiveutils","ojs/ojavatar"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLeadingVisualType=t.LeadingVisual=void 0;t.LeadingVisual=e=>{const{column:t,leadingVisualType:i,screenRange:n}=e,r=n===a.SCREEN_RANGE.SM;return(0,o.h)("div",{class:"oj-sp-list-item-template-leading-visual"},i===s.VISUAL_TYPE.AVATAR&&(0,o.h)("oj-avatar",{class:"oj-sp-list-item-template-inner-leading-visual",size:r?"2xs":"xs",src:t.avatar.src,initials:t.avatar.initials}),i===s.VISUAL_TYPE.ICON_CIRCLE&&(0,o.h)("oj-avatar",{class:"oj-sp-list-item-template-inner-leading-visual",size:r?"2xs":"xs",iconClass:t.icon.class,shape:"circle",background:t.icon.circleColor,"aria-label":t.icon.altText,role:"img",title:t.icon.altText}),i===s.VISUAL_TYPE.ICON&&(0,o.h)("span",{class:"oj-ux-icon-size-6x oj-sp-list-item-template-inner-leading-visual oj-sp-list-item-template-leading-icon "+t.icon.class,role:"img","aria-label":t.icon.altText}))};t.getLeadingVisualType=(e,t)=>{if(e){const o=n(e);return t?o:o===s.VISUAL_TYPE.AVATAR?void i.error("Avatar not allowed for non primary column"):o===s.VISUAL_TYPE.ICON_CIRCLE?void i.error("Icon circle not allowed for non primary column"):o}};const n=e=>{const{avatar:t,icon:i}=e;return void 0!==(null==t?void 0:t.src)||void 0!==(null==t?void 0:t.initials)?s.VISUAL_TYPE.AVATAR:void 0!==(null==i?void 0:i.class)?void 0!==(null==i?void 0:i.circleColor)?s.VISUAL_TYPE.ICON_CIRCLE:s.VISUAL_TYPE.ICON:void 0}})),define("oj-sp/list-item-template/components/Column",["require","exports","preact","../list-item-template-types","ojs/ojvcomponent-remounter","ojs/ojresponsiveutils","./LeadingVisual","ojs/ojlistitemlayout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Column=void 0;t.Column=e=>{const{column:t,columnIndex:o,columnPosition:a,navigationAction:n,screenRange:d}=e,p=l(t,o,n),u="primary"===a;if(!t)throw new Error("[list-item-template] unable to determine the column to render. Please review the column configuration or log an error if you think the configuration is correct.");return(0,i.h)(s.Remounter,null,(0,i.h)("oj-list-item-layout",{class:"oj-sp-list-item-template-list-item-layout oj-listitemlayout-padding-off"},c(t,d,u),t.overlineText&&(0,i.h)("div",{slot:"overline",title:t.overlineText,class:"oj-sp-list-item-template-overline-text oj-typography-body-xs oj-text-color-secondary"},t.overlineText),t.primaryText&&(0,i.h)("div",{class:"oj-line-clamp-3"},r(e,t.primaryText,p,"primary",u)),t.secondaryText&&(0,i.h)("div",{slot:"secondary",class:"oj-line-clamp-3"},r(e,t.secondaryText,p,"secondary")),t.tertiaryText&&(0,i.h)("div",{slot:"tertiary",title:t.tertiaryText,class:"oj-sp-list-item-template-tertiary-text oj-typography-body-xs oj-text-color-secondary oj-line-clamp-3"},t.tertiaryText),t.metaText&&(0,i.h)("div",{slot:"metadata",class:"oj-sp-list-item-template-meta-text-container"},(0,i.h)("span",{title:t.metaText,class:"oj-sp-list-item-template-meta-text oj-sm-margin-3x-start oj-typography-body-sm oj-sm-padding-1x-start oj-text-color-secondary"},t.metaText))))};const r=(e,t,o,s,a)=>{const{uid:n}=e,r=a?n+"_primaryText":void 0,l="oj-sp-list-item-template-"+s+"-text",c=d(s);if(o===s){const{onSpNavigationAction:o,navigationAction:s}=e,a="disabled"===(null==s?void 0:s.display)?" oj-disabled":"",n=e=>{s&&"disabled"!==s.display&&(null==o||o()),e.preventDefault(),e.stopPropagation()};return(0,i.h)("a",{class:l+" oj-sp-list-item-template-nav-action oj-clickthrough-disabled"+c+a,id:r,title:t,href:"#",onClick:n,tabIndex:-1},t)}return(0,i.h)("span",{class:l+c+" oj-text-color-primary",id:r,title:t},t)},l=(e,t,i)=>{if(e&&e.columnType&&e.columnType===o.COLUMN_TYPE.NON_ESSENTIAL)return"";if((null==i?void 0:i.applyTo)&&"off"!==i.display){const e="column"+(t+1);if(i.applyTo.includes(e)){if(i.applyTo.includes("primary"))return"primary";if(i.applyTo.includes("secondary"))return"secondary"}}return"none"},d=e=>{switch(e){case"primary":return" oj-typography-body-md";case"secondary":return" oj-typography-body-sm";default:return""}},c=(e,t,o)=>{if(!o&&(t===a.SCREEN_RANGE.SM||t===a.SCREEN_RANGE.MD))return;const s=(0,n.getLeadingVisualType)(e,o);return s?(0,i.h)("div",{slot:"leading"},(0,i.h)(n.LeadingVisual,{column:e,leadingVisualType:s,screenRange:t})):void 0}})),define("oj-sp/list-item-template/components/MultipleSelector",["require","exports","preact","ojs/ojkeyset","ojs/ojselector"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasMultipleSelector=t.MultipleSelector=void 0;t.MultipleSelector=e=>{const{uid:t,selector:s}=e,a=e.selectedKeys?e.selectedKeys:new o.KeySetImpl;return(0,i.h)("oj-selector",{selectionMode:"multiple","aria-label":s.ariaLabel,selectedKeys:a,onselectedKeysChanged:t=>{var i;null===(i=e.onSelectedKeysChanged)||void 0===i||i.call(e,t.detail.value)},rowKey:s.rowKey,id:t+"selector_"+s.rowKey})};t.hasMultipleSelector=e=>"multiple"===(null==e?void 0:e.selectionMode)})),define("oj-sp/list-item-template/components/EmphasisDot",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasEmphasisDot=t.EmphasisDot=void 0;t.EmphasisDot=e=>{const{displayOptions:t,hasSelector:s}=e,a="shown"===t.emphasis;return(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 oj-sp-list-item-template-emphasis-dot-container "+(s?"oj-sm-margin-1x-horizontal":"oj-sm-margin-1x-end")},a&&(0,i.h)("span",{class:"oj-icon-color-info oj-ux-ico-circle-8 oj-ux-icon-size-2x",role:"img","aria-label":o.itemEmphasisMessage}))};t.hasEmphasisDot=e=>e&&e.emphasis&&("shown"===e.emphasis||"hidden"===e.emphasis)})),define("oj-sp/common/action",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayType=t.ActionType=t.StandardActionType=void 0,function(e){e.Edit="edit",e.Favorite="favorite",e.Share="share"}(t.StandardActionType||(t.StandardActionType={})),function(e){e.DEFAULT="default",e.PROMOTED="promoted",e.DEEMPHASIZED="deemphasized",e.NAVIGATION="navigation"}(t.ActionType||(t.ActionType={})),function(e){e.ON="on",e.OFF="off",e.DISABLED="disabled"}(t.DisplayType||(t.DisplayType={}))})),define("oj-sp/list-item-template/components/ActionToolbar",["require","exports","preact","ojs/ojvcomponent-remounter","oj-sp/common/action","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact/hooks","ojs/ojbutton","ojs/ojtoolbar","ojs/ojmenu","ojs/ojoption"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderToolbarSpacer=t.ActionToolbar=void 0;t.ActionToolbar=e=>{const{primaryAction:t,secondaryActions:o,parentHasSelector:s,parentHasBadge:a,uid:u,showCondensed:h}=e,m=y(t,o,s),v=g(t,s),j=b(e),A=f(e),C=(0,n.useRef)(null);return(0,n.useEffect)(()=>{const{current:e}=C;e&&e.refresh()}),(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 oj-sp-list-item-template-toolbar-container"+(m?" oj-sm-padding-4x-start":"")},m&&(0,i.h)("div",{id:u+"_toolbar_container","data-overflow":j},(0,i.h)("oj-toolbar",{class:"oj-clickthrough-disabled oj-sp-list-item-template-toolbar oj-sm-justify-content-flex-end"+(a?" oj-sp-list-item-template-toolbar-with-badge":"")+(v?" oj-sp-list-item-template-toolbar-with-primary-action":"")+(h?"":" oj-sp-list-item-template-expanded-toolbar"),ref:C,"data-oj-clickthrough":"disabled"},v&&r(e),!j&&1===A.length&&!h&&d(),!j&&A.map(t=>l(u,t,e.onSpSecondaryAction)),j&&!h&&c(e),j&&p(e))))};t.renderToolbarSpacer=(e,t,o)=>{if(y(e,t,o))return(0,i.h)("div",{class:"oj-sm-flex-0 oj-flex-item oj-flex oj-sm-flex-wrap-nowrap"},(0,i.h)("div",{class:"oj-sp-list-item-template-toolbar-spacer"}))};const r=e=>{const{parentLabel:t,showCondensed:s,uid:a,primaryAction:n,onSpPrimaryAction:r}=e;return(0,i.h)(o.Remounter,null,(0,i.h)("oj-button",{id:a+"_primaryAction",chroming:"solid",display:s?"icons":"all",disabled:"disabled"===n.display,onojAction:e=>{null==r||r(),e.stopPropagation()},"aria-label":t+" "+n.label},s&&(0,i.h)("span",{slot:"startIcon",class:n.icon}),(0,i.h)("span",null,n.label)))},l=(e,t,s)=>(0,i.h)(o.Remounter,null,(0,i.h)("oj-button",{id:e+"_icon_"+t.id,display:"icons",chroming:"borderless",disabled:"disabled"===t.display,onojAction:e=>{null==s||s({actionId:t.id}),e.stopPropagation()}},(0,i.h)("span",{slot:"startIcon",class:t.icon}),(0,i.h)("span",null,t.label))),d=()=>(0,i.h)(o.Remounter,null,(0,i.h)("oj-button",{display:"icons",chroming:"borderless",class:"oj-sp-list-item-template-dummy-icon-button",disabled:!0},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-share"}),(0,i.h)("span",null,"dummy icon"))),c=e=>{const{uid:t,secondaryActions:s,onSpSecondaryAction:a}=e,n=v(s),r=e=>{null==a||a({actionId:n.id}),e.preventDefault(),e.stopPropagation()};return n?(0,i.h)(o.Remounter,null,(0,i.h)("oj-button",{id:t+"_icon_"+n.id,display:"icons",chroming:"borderless",disabled:"disabled"===n.display,onojAction:r},(0,i.h)("span",{slot:"startIcon",class:n.icon}),(0,i.h)("span",null,n.label))):d()},p=e=>{const{uid:t,secondaryActions:s,onSpSecondaryAction:n,showCondensed:r}=e,l=v(s),d=r||void 0===l?f(e):j(e);return(0,i.h)("oj-menu-button",{class:"oj-sp-list-item-template-overflow-menu-button",display:"icons"},a.moreActions,(0,i.h)("oj-menu",{slot:"menu",id:t+"_more-actions-menu",class:"oj-sp-list-item-template-overflow-menu","aria-label":a.actions,openOptions:{initialFocus:"firstItem",position:{at:{horizontal:"end",vertical:"bottom"},my:{horizontal:"end",vertical:"top"},offset:{x:0,y:4}}},onojMenuAction:e=>{const t=e.detail.selectedValue;null==n||n({actionId:t}),e.preventDefault(),e.stopPropagation()}},d.map(e=>(0,i.h)(o.Remounter,null,(0,i.h)("oj-option",{class:"oj-clickthrough-disabled",id:t+"_"+e.id,value:e.id,disabled:"disabled"===e.display},(0,i.h)("span",{class:e.icon,slot:"startIcon"}),(0,i.h)("span",{class:"oj-sp-list-item-template-label"},e.label))))))},u=({display:e,label:t})=>"off"!==e&&void 0!==t&&t.length>0,h=e=>(({id:e})=>void 0!==e)(e)&&u(e),m=e=>h(e)&&(({type:e})=>e===s.ActionType.PROMOTED)(e),g=(e,t)=>!t&&e&&u(e),y=(e,t,i)=>g(e,i)||((e,t)=>!t&&e instanceof Array&&e.filter(h).length>0)(t,i),f=e=>{const{primaryAction:t,secondaryActions:i,parentHasSelector:o}=e;return!g(t,o)&&i instanceof Array?i.filter(h):[]},b=e=>{const{primaryAction:t,showCondensed:i,secondaryActions:o,parentHasSelector:s}=e;if(!g(t,s)&&o instanceof Array){const e=o.filter(h);return e.length>2||2===e.length&&i}return!1},v=e=>{if(e instanceof Array){const t=e.filter(m);if(t.length>0)return t[0]}},j=e=>{const{secondaryActions:t}=e,i=v(t);return b(e)?f(e).filter(e=>void 0===i||e.id!==i.id):[]}})),define("oj-sp/list-item-template/components/BadgeSection",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeSection=t.BADGE_LEADING=t.BADGE_TRAILING=void 0,t.BADGE_TRAILING="trailing",t.BADGE_LEADING="leading";t.BadgeSection=e=>{const{badge:t,displayOptions:n}=e;return(0,i.h)("div",{class:s(n)+" oj-sp-list-item-template-badge-container"},t.text&&(0,i.h)("span",{class:`${o(t)} oj-sp-list-item-template-badge ${a(n)}`,"aria-label":t.text,tabIndex:0,title:t.text},t.text))};const o=e=>{if(e){let t="oj-badge";return["danger","warning","success","info"].indexOf(e.status)>=0&&(t+=" oj-badge-"+e.status),["subtle"].indexOf(e.style)>=0&&(t+=" oj-badge-"+e.style),t}return""},s=e=>{switch(e&&e.badgeSize?e.badgeSize:"medium"){case"short":return"oj-sp-list-item-template-badge-short";case"long":return"oj-sp-list-item-template-badge-long";default:return"oj-sp-list-item-template-badge-default"}},a=e=>{switch(e&&e.badgeSize?e.badgeSize:"medium"){case"short":return"oj-sp-list-item-template-badge-span-short";case"long":return"oj-sp-list-item-template-badge-span-long";default:return"oj-sp-list-item-template-badge-span-default"}}})),define("oj-sp/internal-resources/components/messages-item-level/messages-item-level",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesItemLevel=t.MessageSeverity=void 0,function(e){e.info="info",e.warning="warning",e.error="error",e.success="success"}(t.MessageSeverity||(t.MessageSeverity={}));const s={info:"oj-ux-ico-information-s",warning:"oj-ux-ico-warning-s",error:"oj-ux-ico-error-s",success:"oj-ux-ico-success-s"},a={info:"oj-icon-color-info",warning:"oj-icon-color-warning",error:"oj-icon-color-danger",success:"oj-icon-color-success"},n={info:"infoIcon",warning:"warningIcon",error:"errorIcon",success:"successIcon"};t.MessagesItemLevel=e=>(0,o.h)("div",{class:"oj-sp-messages-item-level-main-container oj-flex oj-sm-flex-wrap-nowrap "+(a[e.severity]||""),"data-severity":e.severity,"data-text":e.text},(0,o.h)("span",{"aria-label":i[n[e.severity]],role:"img",class:`oj-sp-messages-item-level-icon oj-flex-item oj-sm-flex-0 ${s[e.severity]||""} oj-ux-icon-size-4x`}),(0,o.h)("span",{class:"oj-sp-messages-item-level-text oj-flex-item oj-sm-padding-2x-start oj-typography-body-xs"},e.text))})),define("oj-sp/internal-resources/components/messages-item-level/loader",["require","exports","./messages-item-level"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSeverity=t.MessagesItemLevel=void 0,Object.defineProperty(t,"MessagesItemLevel",{enumerable:!0,get:function(){return i.MessagesItemLevel}}),Object.defineProperty(t,"MessageSeverity",{enumerable:!0,get:function(){return i.MessageSeverity}})})),define("oj-sp/list-item-template/components/SMLayout",["require","exports","preact","../list-item-template-util","./Column","./MultipleSelector","./EmphasisDot","./ActionToolbar","./BadgeSection","./LeadingVisual","oj-sp/internal-resources/components/messages-item-level/loader","ojs/ojresponsiveutils"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SMLayout=void 0;t.SMLayout=e=>{const{badge:t,columns:s,displayOptions:c,message:p,uid:g,selector:y,selectedKeys:f,onSelectedKeysChanged:b,primaryAction:v,onSpPrimaryAction:j,secondaryActions:A,onSpSecondaryAction:C}=e,E=(0,a.hasMultipleSelector)(y),T=(0,n.hasEmphasisDot)(c),_=(0,o.getPrimaryIndex)(s),S=s[_],x=(0,d.getLeadingVisualType)(S,!0);return(0,i.h)("div",{class:"oj-flex oj-sm-flex-direction-column"},p&&u(p,E,T),t&&t.position===l.BADGE_LEADING&&h(t,c,E,T,x),(0,i.h)("div",{class:"oj-flex-item oj-flex oj-sm-align-items-center"},E&&(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 "+(T?"oj-sp-list-item-template-selector-negative-margin":"oj-sp-list-item-template-selector-default-margin")},(0,i.h)(a.MultipleSelector,{selector:y,selectedKeys:f,onSelectedKeysChanged:b,uid:g})),T&&(0,i.h)(n.EmphasisDot,{displayOptions:c,hasSelector:E}),m(e,_,"primary"),(0,i.h)(r.ActionToolbar,{parentHasBadge:!!t,uid:g,showCondensed:!0,parentHasSelector:E,parentLabel:S.primaryText,primaryAction:v,onSpPrimaryAction:j,secondaryActions:A,onSpSecondaryAction:C})),(0,o.hasTwoColumns)(s,c)&&(0,i.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"},(0,o.renderSpacer)(E,T,x),m(e,(0,o.getSecondaryIndex)(s,c),"secondary"),(0,r.renderToolbarSpacer)(v,A,E)),(0,o.hasThreeColumns)(s,c)&&(0,i.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"},(0,o.renderSpacer)(E,T,x),m(e,(0,o.getNonEssentialIndex)(s),"tertiary"),(0,r.renderToolbarSpacer)(v,A,E)),t&&t.position===l.BADGE_TRAILING&&h(t,c,E,T,x))};const u=(e,t,s)=>(0,i.h)("div",{tabIndex:0,class:"oj-flex oj-flex-item oj-sp-list-item-template-message-container oj-sm-margin-2x-bottom oj-sm-flex-wrap-nowrap"},(0,o.renderSpacer)(t,s),(0,i.h)(c.MessagesItemLevel,{severity:e.severity,text:e.text})),h=(e,t,s,a,n)=>(0,i.h)("div",{class:`oj-flex oj-flex-item oj-sp-list-item-template-badge-top-container ${e.position} ${"leading"===e.position?"oj-sm-margin-2x-bottom":"oj-sm-margin-2x-top"}`},(0,o.renderSpacer)(s,a,n),(0,i.h)(l.BadgeSection,{badge:e,displayOptions:t})),m=(e,t,o)=>{const{columns:a,navigationAction:n,onSpNavigationAction:r,uid:l}=e,d=a[t];return(0,i.h)("div",{class:`oj-flex-item oj-sm-padding-2x-vertical oj-sp-list-item-template-${o}-col`},(0,i.h)("div",{class:"oj-sp-list-item-template-column-"+t},(0,i.h)("div",{class:"oj-sp-list-item-template-flex-shrink"},(0,i.h)(s.Column,{column:d,columnIndex:t,columnPosition:o,navigationAction:n,screenRange:p.SCREEN_RANGE.SM,uid:l,onSpNavigationAction:r}))))}})),define("oj-sp/list-item-template/components/MDLayout",["require","exports","preact","../list-item-template-util","./Column","./MultipleSelector","./EmphasisDot","./ActionToolbar","./BadgeSection","./LeadingVisual","oj-sp/internal-resources/components/messages-item-level/loader","ojs/ojresponsiveutils"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MDLayout=void 0;t.MDLayout=e=>{const{badge:t,columns:s,displayOptions:l,message:c,uid:p,selector:g,selectedKeys:y,onSelectedKeysChanged:f,primaryAction:b,onSpPrimaryAction:v,secondaryActions:j,onSpSecondaryAction:A}=e,C=(0,a.hasMultipleSelector)(g),E=(0,n.hasEmphasisDot)(l),T=(0,o.getPrimaryIndex)(s),_=s[T],S=(0,d.getLeadingVisualType)(_,!0),x=(0,o.hasTwoColumns)(s,l),O=(0,o.hasThreeColumns)(s,l);return(0,i.h)(i.Fragment,null,c&&u(c,C,E),(0,i.h)("div",{class:"oj-flex oj-sm-align-items-center"},C&&(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 "+(E?"oj-sp-list-item-template-selector-negative-margin":"oj-sp-list-item-template-selector-default-margin")},(0,i.h)(a.MultipleSelector,{selector:g,selectedKeys:y,onSelectedKeysChanged:f,uid:p})),E&&(0,i.h)(n.EmphasisDot,{displayOptions:l,hasSelector:C}),m(e,T,x),(0,i.h)(r.ActionToolbar,{parentHasBadge:!!t,uid:p,showCondensed:!0,parentHasSelector:C,parentLabel:_.primaryText,primaryAction:b,onSpPrimaryAction:v,secondaryActions:j,onSpSecondaryAction:A})),(x||O)&&(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"},(0,o.renderSpacer)(C,E),h(e,(0,o.getSecondaryIndex)(s,l),"secondary",S),O&&h(e,(0,o.getNonEssentialIndex)(s),"tertiary"),(0,r.renderToolbarSpacer)(b,j,C)))};const u=(e,t,s)=>(0,i.h)("div",{tabIndex:0,class:"oj-flex oj-flex-item oj-sp-list-item-template-message-container oj-sm-flex-wrap-nowrap"},(0,o.renderSpacer)(t,s),(0,i.h)(c.MessagesItemLevel,{severity:e.severity,text:e.text})),h=(e,t,o,a)=>{const{columns:n,uid:r,navigationAction:l,onSpNavigationAction:d}=e,c=a?"oj-sp-list-item-template-md-secondary-column-with-leading-visual-"+a:"";return(0,i.h)("div",{class:`oj-flex-item oj-sm-padding-2x-vertical oj-sp-list-item-template-${o}-col \n                    ${"tertiary"===o?"oj-sm-margin-4x-start":""}`},(0,i.h)("div",{class:`oj-sp-list-item-template-column-${t} oj-sm-flex-wrap-nowrap ${c}`},(0,i.h)("div",{class:"oj-sm-flex-1 oj-sp-list-item-template-flex-shrink"},(0,i.h)(s.Column,{column:n[t],columnIndex:t,columnPosition:o,navigationAction:l,screenRange:p.SCREEN_RANGE.MD,uid:r,onSpNavigationAction:d}))))},m=(e,t,o)=>{const{badge:s}=e;return(0,i.h)(i.Fragment,null,s&&s.position===l.BADGE_LEADING&&!o&&g(e,s.position,!1),h(e,t,"primary"),s&&(s.position===l.BADGE_TRAILING||s.position===l.BADGE_LEADING&&o)&&g(e,s.position,o))},g=(e,t,o)=>{const{badge:s,displayOptions:a}=e,n=o?"oj-sp-list-item-template-md-badge-grow":"oj-sp-list-item-template-md-badge-fixed",r=t===l.BADGE_TRAILING||o?"oj-sm-margin-4x-start":"oj-sm-margin-4x-end";return(0,i.h)("div",{class:`oj-flex oj-flex-item oj-sp-list-item-template-badge-top-container\n                   ${t} ${r} ${n}`},(0,i.h)(l.BadgeSection,{badge:s,displayOptions:a}))}})),define("oj-sp/list-item-template/components/LGLayout",["require","exports","preact","../list-item-template-types","../list-item-template-util","./Column","./MultipleSelector","./EmphasisDot","./ActionToolbar","./BadgeSection","oj-sp/internal-resources/components/messages-item-level/loader","ojs/ojresponsiveutils"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LGLayout=void 0;t.LGLayout=e=>{const{badge:t,columns:o,displayOptions:a,message:c,uid:p,selector:g,selectedKeys:y,onSelectedKeysChanged:f,primaryAction:b,onSpPrimaryAction:v,secondaryActions:j,onSpSecondaryAction:A}=e,C=(0,n.hasMultipleSelector)(g),E=(0,r.hasEmphasisDot)(a),T=o[(0,s.getPrimaryIndex)(o)];return(0,i.h)(i.Fragment,null,c&&u(c,C,E),(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-top oj-sm-align-items-center"},(0,i.h)("div",{class:"oj-flex-item"},(0,i.h)("div",{class:"oj-flex oj-sm-align-items-center"},C&&(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 "+(E?"oj-sp-list-item-template-selector-negative-margin":"oj-sp-list-item-template-selector-default-margin")},(0,i.h)(n.MultipleSelector,{selector:g,selectedKeys:y,onSelectedKeysChanged:f,uid:p})),E&&(0,i.h)(r.EmphasisDot,{displayOptions:a,hasSelector:C}),t&&t.position===d.BADGE_LEADING&&h(t,a),m(e,(0,s.getPrimaryIndex)(o),"primary"),(0,s.hasTwoColumns)(o,a)&&m(e,(0,s.getSecondaryIndex)(o,a),"secondary"),(0,s.hasThreeColumns)(o,a)&&m(e,(0,s.getNonEssentialIndex)(o),"tertiary"),t&&t.position===d.BADGE_TRAILING&&h(t,a))),(0,i.h)(l.ActionToolbar,{parentHasBadge:!!t,uid:p,showCondensed:!1,parentHasSelector:C,parentLabel:T.primaryText,primaryAction:b,onSpPrimaryAction:v,secondaryActions:j,onSpSecondaryAction:A})))};const u=(e,t,o)=>(0,i.h)("div",{tabIndex:0,class:"oj-flex oj-flex-item oj-sp-list-item-template-message-container oj-sm-flex-wrap-nowrap"},(0,s.renderSpacer)(t,o),(0,i.h)(c.MessagesItemLevel,{severity:e.severity,text:e.text})),h=(e,t)=>(0,i.h)("div",{class:`oj-flex oj-flex-item oj-sp-list-item-template-badge-top-container oj-sp-list-item-template-lg-badge-fixed\n                    ${e.position===d.BADGE_TRAILING?"oj-sm-margin-4x-start oj-md-order-4":"oj-sm-margin-4x-end oj-md-order-0"}\n                    ${e.position}`},(0,i.h)(d.BadgeSection,{badge:e,displayOptions:t})),m=(e,t,o)=>{const{columns:n,displayOptions:r,navigationAction:l,onSpNavigationAction:d,uid:c}=e,u=(0,s.calculateColumnLayout)(n,r),h=g(t,u)?"oj-sp-list-item-template-lg-col-half":"",m=0!==t?"oj-sm-margin-4x-start":"",y="oj-md-order-"+(t+1);return(0,i.h)("div",{class:`oj-flex-item oj-sm-padding-2x-vertical oj-sp-list-item-template-${o}-col \n                     ${y} ${h} ${m}`},(0,i.h)("div",{class:`oj-sp-list-item-template-column-${t} oj-sm-flex-wrap-nowrap`},(0,i.h)("div",{class:"oj-sm-flex-1 oj-sp-list-item-template-flex-shrink"},(0,i.h)(a.Column,{column:n[t],columnIndex:t,columnPosition:o,navigationAction:l,screenRange:p.SCREEN_RANGE.LG,uid:c,onSpNavigationAction:d}))))},g=(e,t)=>t===o.COLUMN_LAYOUTS.TWO_3_9?0===e:t===o.COLUMN_LAYOUTS.TWO_9_3?1===e:t===o.COLUMN_LAYOUTS.THREE_3_3_6?0===e||1===e:t===o.COLUMN_LAYOUTS.THREE_3_6_3?0===e||2===e:t===o.COLUMN_LAYOUTS.THREE_6_3_3&&(1===e||2===e)})),define("oj-sp/list-item-template/components/ScreenLayout",["require","exports","preact","ojs/ojresponsiveutils","./SMLayout","./MDLayout","./LGLayout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenLayout=void 0;t.ScreenLayout=e=>{const{screenRange:t,badge:r,columns:l,displayOptions:d,message:c,uid:p,selector:u,selectedKeys:h,onSelectedKeysChanged:m,primaryAction:g,onSpPrimaryAction:y,secondaryActions:f,onSpSecondaryAction:b,navigationAction:v,onSpNavigationAction:j}=e;switch(t){case o.SCREEN_RANGE.SM:return(0,i.h)(s.SMLayout,{badge:r,columns:l,displayOptions:d,message:c,uid:p,selector:u,selectedKeys:h,onSelectedKeysChanged:m,primaryAction:g,onSpPrimaryAction:y,secondaryActions:f,onSpSecondaryAction:b,navigationAction:v,onSpNavigationAction:j});case o.SCREEN_RANGE.MD:return(0,i.h)(a.MDLayout,{badge:r,columns:l,displayOptions:d,message:c,uid:p,selector:u,selectedKeys:h,onSelectedKeysChanged:m,primaryAction:g,onSpPrimaryAction:y,secondaryActions:f,onSpSecondaryAction:b,navigationAction:v,onSpNavigationAction:j});default:return(0,i.h)(n.LGLayout,{badge:r,columns:l,displayOptions:d,message:c,uid:p,selector:u,selectedKeys:h,onSelectedKeysChanged:m,primaryAction:g,onSpPrimaryAction:y,secondaryActions:f,onSpSecondaryAction:b,navigationAction:v,onSpNavigationAction:j})}}})),define("css!oj-sp/list-item-template/list-item-template-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/list-item-template/list-item-template",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojresponsiveutils","ojs/ojvcomponent","preact","./list-item-template-util","./components/ScreenLayout","oj-sp/internal-resources/components/messages-item-level/messages-item-level","css!./list-item-template-styles","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListItemTemplate=void 0;let d=class extends a.Component{constructor(e){var t;super(e),this.ref=(0,a.createRef)(),this.state={screenRange:o.SCREEN_RANGE.MD},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,s.getUniqueId)(),this.initResponsiveUtils()}componentDidMount(){this.registerSizeHandlers()}componentDidUnMount(){this.unregisterSizeHandlers()}render(e){const{badge:t,columns:i,displayOptions:o,message:s,selector:n,selectedKeys:l,onSelectedKeysChanged:d,primaryAction:c,onSpPrimaryAction:p,secondaryActions:u,onSpSecondaryAction:h,navigationAction:m,onSpNavigationAction:g}=this.props,{screenRange:y}=this.state,f="multiple"===(null==n?void 0:n.selectionMode)?"oj-sp-checkbox-template-wrapper":"oj-sp-template-wrapper",b=this.getAriaLabel();return(0,a.h)("div",{ref:this.ref,class:"oj-sp-list-item-template-main-container "+f,role:"group","aria-label":b,onKeyUp:e=>this.triggerNavigationActionOnKeyUp(e)},(0,a.h)(r.ScreenLayout,{screenRange:y,badge:t,columns:i,displayOptions:o,message:s,uid:this.uniqueId,selector:n,selectedKeys:l,onSelectedKeysChanged:d,primaryAction:c,onSpPrimaryAction:p,secondaryActions:u,onSpSecondaryAction:h,navigationAction:m,onSpNavigationAction:g}))}triggerNavigationActionOnKeyUp(e){if("Enter"===e.key&&this.props.navigationAction){if(null!==e.target.querySelector("a.oj-sp-list-item-template-nav-action")){const{onSpNavigationAction:t,navigationAction:i}=this.props;i&&"on"===i.display&&(null==t||t(),e.stopPropagation())}}}initResponsiveUtils(){this.resizeObserver=new ResizeObserver(e=>this.setScreenRangeBasedOnContainerSize())}setScreenRangeBasedOnContainerSize(){requestAnimationFrame(()=>{var e;const t=null===(e=this.ref.current)||void 0===e?void 0:e.getBoundingClientRect(),i=t?t.width:0;let s;s=i>=1024?o.SCREEN_RANGE.LG:i>=600?o.SCREEN_RANGE.MD:o.SCREEN_RANGE.SM,this.setState({screenRange:s})})}registerSizeHandlers(){this.setScreenRangeBasedOnContainerSize(),this.resizeObserver.observe(this.ref.current)}unregisterSizeHandlers(){this.resizeObserver.disconnect()}getAriaLabel(){const{columns:e,displayOptions:t,message:i}=this.props,o=e[(0,n.getPrimaryIndex)(e)],s=t&&t.emphasis&&"shown"===t.emphasis,a=i&&i.severity&&(i.severity===l.MessageSeverity.error||i.severity===l.MessageSeverity.warning);return o.primaryText+(a||s?". "+this.res.itemEmphasisMessage:"")}};d.defaultProps={columns:[{primaryText:"<Primary Text>"}],displayOptions:{columnLayout:"auto",badgeSize:"medium",emphasis:"none"},selector:{selectionMode:"single"}},d._metadata={properties:{columns:{type:"Array<object>"},displayOptions:{type:"object",properties:{columnLayout:{type:"string",enumValues:["auto","one","two-split3-9","two-split9-3","two-split6-6","three-split3-3-6","three-split3-6-3","three-split6-3-3","three-split4-4-4"]},badgeSize:{type:"string",enumValues:["short","long","medium"]},emphasis:{type:"string"}}},selectedKeys:{type:"KeySet",writeback:!0},selector:{type:"object",properties:{rowKey:{type:"any"},selectionMode:{type:"string",enumValues:["multiple","single"]},ariaLabel:{type:"string"}}},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["default","neutral","danger","warning","success","info"]},style:{type:"string",enumValues:["strong","subtle"]},position:{type:"string",enumValues:["leading","trailing"]}}},primaryAction:{type:"object",properties:{label:{type:"string"},icon:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},secondaryActions:{type:"Array<object>"},navigationAction:{type:"object",properties:{display:{type:"string",enumValues:["disabled","on","off"]},applyTo:{type:"string",enumValues:["column1-primary","column2-primary","column3-primary","column1-secondary","column2-secondary","column3-secondary"]}}},message:{type:"object",properties:{text:{type:"string"},severity:{type:"string",enumValues:["info","warning","error","success"]}}}},events:{spPrimaryAction:{},spSecondaryAction:{},spNavigationAction:{}},extension:{_WRITEBACK_PROPS:["selectedKeys"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},d=__decorate([(0,s.customElement)("oj-sp-list-item-template"),__metadata("design:paramtypes",[Object])],d),t.ListItemTemplate=d})),define("oj-sp/list-item-template/loader",["require","exports","./list-item-template"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListItemTemplate=void 0,Object.defineProperty(t,"ListItemTemplate",{enumerable:!0,get:function(){return i.ListItemTemplate}})})),define("text!oj-sp/preview-card/component.json",[],(function(){return'{"name":"preview-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Preview Card","description":"Preview card presents the preview of the attachment file for taking action of downloading or deleting.","type":"composite","subcomponentType":"packPrivate","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"properties":{"imageSrc":{"type":"string","displayName":"Image source","description":"Path to where the image is stored.  Note that providing very large image files will impact performance over which Preview Card will have no control."},"iconClass":{"type":"string","displayName":"Icon Class","description":"Redwood icon gallery class."},"altText":{"displayName":"Alternative text","description":"A string to describe the image or icon to screenreader, required for accessibility reasons.","type":"string","required":true},"primaryText":{"type":"string","displayName":"Primary Text","description":"Primary text on Footer Region"},"displayOptions":{"displayName":"Display options","description":"Configure display options of built in actions of preview card.","type":"object|null","properties":{"download":{"type":"string","displayName":"Download action state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Download is visible and enabled."},"off":{"displayName":"Off","description":"Download is not visible."},"disabled":{"displayName":"Disabled","description":"Download is visible and disabled."}}},"remove":{"type":"string","displayName":"Remove action state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Remove is visible and enabled."},"off":{"displayName":"Off","description":"Remove is not visible."},"disabled":{"displayName":"Disabled","description":"Remove is visible and disabled."}}},"cancel":{"type":"string","displayName":"Cancel action state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Cancel is visible and enabled."},"off":{"displayName":"Off","description":"Cancel is not visible."},"disabled":{"displayName":"Disabled","description":"Cancel is visible and disabled."}}}}}},"methods":{},"events":{"spDownload":{"displayName":"Download action event","description":"Dispatched when download action is triggered."},"spRemove":{"displayName":"Remove action event","description":"Dispatched when remove action is triggered."},"spCancel":{"displayName":"Cancel action event","description":"Dispatched when cancel action is triggered."},"spPreview":{"displayName":"Preview action event","description":"Dispatched when action triggered on preview area."}},"slots":{},"extension":{"catalog":{"category":"ODE Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-preview-card.svg"},"vbdt":{"componentPalette":{"visibility":"never"}}},"icon":{"iconPath":"extension/catalog/images/ico-preview-card.svg"}}'})),define("text!oj-sp/preview-card/preview-card-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-preview-card-container oj-panel oj-sm-padding-0"role="group"data-oj-context=""><div :id="[[ uid + \'_preview-area-container1\' ]]":class="[[hasFooter()? \'oj-sp-preview-card-preview-area-container\' : \'oj-sp-preview-card-container\' ]]"tabindex="0"role="button"on-mouseup="[[previewActionHandler]]"on-mousedown="[[onMouseDown]]"on-mousemove="[[onMouseMove]]"on-keyup="[[onKeyUp]]"on-keydown="[[onKeyDown]]"on-touchend="[[previewActionHandler]]"on-touchstart="[[onMouseDown]]"on-touchmove="[[onMouseMove]]"><oj-bind-if test="[[ !hasImage() ]]"><div :id="[[ uid + \'_format_icon-container1\' ]]"class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center oj-sm-flex-direction-column oj-sp-preview-card-no-image-container"><div class="oj-flex-item"><span :class="[[ hasIcon() ? $properties.iconClass + \' oj-ux-icon-size-18x\' : \'oj-ux-ico-file-image oj-ux-icon-size-18x\' ]]"role="img":aria-label="[[$properties.altText]]"></span></div></div></oj-bind-if><oj-bind-if test="[[ hasImage() &amp;&amp; !hasErrorImage() ]]"><div :id="[[ uid + \'_img-container1\' ]]"class="oj-sp-preview-card-image-container"><img :id="[[ uid + \'_img1\' ]]"class="oj-sp-preview-card-image":src="[[ $properties.imageSrc ]]":alt="[[ $properties.altText ]]"on-load="[[ onLoadImage ]]"on-error="[[onErrorImage]]"><div :id="[[ uid + \'_scrim1\' ]]"class="oj-sp-preview-card-image-scrim"></div></div></oj-bind-if><oj-bind-if test="[[ hasImage() &amp;&amp; hasErrorImage() ]]"><div :id="[[ uid + \'_no_img-container1\' ]]"class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center oj-sm-flex-direction-column oj-sp-preview-card-no-image-container"><div class="oj-flex-item"><span class="oj-ux-ico-broken-image oj-ux-icon-size-18x"role="img":aria-label="[[ $properties.altText ]]"></span></div></div></oj-bind-if></div><oj-bind-if test="[[hasFooter()]]"><oj-bind-if test="[[ allActions().length > 0 ]]"><div class="oj-sp-preview-card-footer-container"role="group"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-padding-6x-top oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal"><div :class="oj-flex-item oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sp-preview-card-text"><oj-bind-if test="[[$properties.primaryText]]"><div :id="[[ uid + \'_primaryText1\' ]]":title="[[$properties.primaryText]]"class="oj-flex-item oj-typography-body-lg oj-text-color-primary oj-sp-preview-card-text oj-sm-padding-4x-end"><oj-bind-text value="[[$properties.primaryText]]"></oj-bind-text></div></oj-bind-if></div><div class="oj-flex-item oj-sm-flex-initial"><oj-toolbar :aria-label="[[res.actions]]"class="oj-sm-flex-wrap-nowrap"chroming="borderless"><oj-bind-for-each data="[[allActions]]"><template><oj-button display="icons":id="[[uid + \'_\' + $current.data.id]]":disabled="[[$current.data.display === \'disabled\']]"on-oj-action="[[allActionHandler]]"><div slot="startIcon":class="[[$current.data.icon]]"></div><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-button></template></oj-bind-for-each></oj-toolbar></div></div></div></oj-bind-if><oj-bind-if test="[[ allActions().length === 0 ]]"><div class="oj-sp-preview-card-footer-container oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"role="group"><div class="oj-flex-item"><oj-bind-if test="[[$properties.primaryText]]"><div :id="[[ uid + \'_primaryText1\' ]]":title="[[$properties.primaryText]]"class="oj-sm-padding-1x-top oj-typography-body-lg oj-text-color-primary oj-sp-preview-card-text"><oj-bind-text value="[[$properties.primaryText]]"></oj-bind-text></div></oj-bind-if></div></div></oj-bind-if></oj-bind-if></div></body></html>'})),define("oj-sp/preview-card/preview-card-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common/EventDispatcher","ojs/ojcontext","ojs/ojlogger","ojs/ojknockout","ojs/ojbutton","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewCardViewModel=void 0,function(e){e.ENTER="Enter",e.SPACE=" "}(r||(r={}));t.PreviewCardViewModel=class{constructor(e){this.context=e,this.previewActionHandler=()=>{this.isSwiping||s.EventDispatcher.dispatch(s.EventDispatcher.PREVIEW_ACTION_EVENT_NAME,this.composite,void 0),this.isSwiping=!1},this.onMouseDown=()=>{this.isSwiping=!1},this.onMouseMove=()=>{this.isSwiping=!0},this.onKeyDown=e=>{const{key:t}=e;t!==r.ENTER&&t!==r.SPACE||(e.stopPropagation(),e.preventDefault())},this.onKeyUp=e=>{const{key:t}=e;t!==r.ENTER&&t!==r.SPACE||(this.previewActionHandler(),e.stopPropagation(),e.preventDefault())},this.allActionHandler=e=>{const t=e.target.id.substring(this.uid.length+1);"download"===t?s.EventDispatcher.dispatch(s.EventDispatcher.DOWNLOAD_ACTION_EVENT_NAME,this.composite,void 0):"remove"===t?s.EventDispatcher.dispatch(s.EventDispatcher.REMOVE_ACTION_EVENT_NAME,this.composite,void 0):"cancel"===t&&s.EventDispatcher.dispatch(s.EventDispatcher.CANCEL_ACTION_EVENT_NAME,this.composite,void 0)},this.onLoadImage=()=>{const e=document.getElementById(this.uid+"_img-container1"),t=document.getElementById(this.uid+"_img1");if(e&&e.clientHeight>0&&e.clientWidth>0&&t&&t.naturalHeight>0&&t.naturalWidth>0){const i=Math.min(t.naturalWidth,e.clientWidth),o=t.naturalHeight*i/t.naturalWidth,s=o<e.clientHeight?(e.clientHeight-o)/2:0;t.style.setProperty("--oj-sp-preview-card-image-margin-top",s+"px")}},this.onErrorImage=()=>{this.hasErrorImage(!0)},this.processDisplayOptions=e=>{const t=[];if(e){if("on"===e.download||"disabled"===e.download){const i={display:e.download,icon:"oj-ux-ico-download",id:"download",label:this.res.download};t.push(i)}if("on"===e.remove||"disabled"===e.remove){const i={display:e.remove,icon:"oj-ux-ico-trash",id:"remove",label:this.res.attachmentsRemove};t.push(i)}if("on"===e.cancel||"disabled"===e.cancel){const i={display:e.cancel,icon:"oj-ux-ico-cancel-s",id:"cancel",label:this.res.cancel};t.push(i)}}this.allActions(t)};const t=a.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.allActions=i.observableArray(),this.composite=e.element,this.uid=e.uniqueId,this.isSwiping=!1,this.properties=e.properties,this.hasImage=i.observable(!0),this.hasIcon=i.observable(!1),this.hasErrorImage=i.observable(!1),this.hasFooter=i.observable(!1),this.res=o;const n=this.properties.imageSrc;this.hasImage(!!n);const l=this.properties.iconClass;this.hasIcon(!!l),this.processDisplayOptions(this.properties.displayOptions),this.hasFooter(this.properties.primaryText||this.allActions().length>0),this.busyResolve()}activated(e){n.log(`oj-sp-preview-card ${this.uid} activated`)}connected(e){n.log(`oj-sp-preview-card ${this.uid} connected`)}bindingsApplied(e){n.log(`oj-sp-preview-card ${this.uid} bindingsApplied`)}propertyChanged(e){if(n.log(`oj-sp-preview-card ${this.uid} propertyChanged`),"imageSrc"===e.property){const t=e.value?e.value:null;this.hasImage(!!t),this.hasErrorImage(!1)}if("iconClass"===e.property){const t=e.value?e.value:null;this.hasIcon(!!t)}"displayOptions"===e.property&&this.processDisplayOptions(e.value),this.hasFooter(this.properties.primaryText||this.allActions().length>0)}disconnected(e){n.log(`oj-sp-preview-card ${this.uid} disconnected`)}}})),define("css!oj-sp/preview-card/preview-card-styles",[],(function(){})),define("oj-sp/preview-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./preview-card-view.html","./preview-card-viewModel","css!./preview-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-preview-card",{metadata:JSON.parse(o),view:s,viewModel:a.PreviewCardViewModel})})),define("text!oj-sp/thumbnail/component.json",[],(function(){return'{"name":"thumbnail","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Thumbnail","description":"Thumbnails are reduced-size visual representations of files, images and links used to help in recognizing and identifying those files.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"propertyLayout":[{"propertyGroup":"common","displayName":"Common"},{"propertyGroup":"data","displayName":"Data"}],"properties":{"src":{"description":"Thumbnail source","type":"string","writeback":false,"displayName":"Source","propertyGroup":"data"},"type":{"description":"Thumbnail type. Used for indicating preference to display an image of the src (fallback to icon if unable to show image) or icon for the thumbnail.","type":"string","writeback":false,"value":"IMAGE","enumValues":["IMAGE","ICON"],"propertyEditorValues":{"IMAGE":{"displayName":"Image"},"ICON":{"displayName":"Icon"}},"displayName":"Type","propertyGroup":"common"},"iconType":{"description":"Thumbnail icon type based on supplied MIME type. Only used when type is ICON.","type":"string","writeback":false,"displayName":"Icon Type","propertyGroup":"common"},"iconSize":{"description":"Thumbnail icon size based. Only used when an icon is displayed.","type":"string","writeback":false,"value":"SM","enumValues":["XXS","XS","SM","MD","LG","XL","2XL"],"propertyEditorValues":{"XXS":{"displayName":"Extra Extra Small"},"XS":{"displayName":"Extra Small"},"SM":{"displayName":"Small"},"MD":{"displayName":"Medium"},"LG":{"displayName":"Large"},"XL":{"displayName":"Extra Large"},"2XL":{"displayName":"Two Extra Large"}},"displayName":"Icon Size","propertyGroup":"common"},"imageRatio":{"description":"Thumbnail ratio in width to height. Only used when type is IMAGE.","type":"string","writeback":false,"value":"1-1","enumValues":["1-1","4-3","16-9"],"propertyEditorValues":{"1-1":{"displayName":"1 : 1"},"4-3":{"displayName":"4 : 3"},"16-9":{"displayName":"16 : 9"}},"displayName":"Image Ratio","propertyGroup":"common"},"imageShape":{"description":"Thumbnail shape of image.  Only used when type is IMAGE.","type":"string","writeback":false,"value":"NONE","enumValues":["NONE","ROUNDED_CORNERS","CIRCLE"],"propertyEditorValues":{"NONE":{"displayName":"None"},"ROUNDED_CORNERS":{"displayName":"Rounded Corners"},"CIRCLE":{"displayName":"Circle"}},"displayName":"Image Shape","propertyGroup":"common"},"disable":{"description":"Is the thumbnail disabled.","type":"boolean","value":false,"writeback":false,"displayName":"Disabled","propertyGroup":"common"},"translations":{"description":"Instance Overrides of Strings","writeback":false,"type":"object","properties":{},"displayName":"Translations","propertyGroup":"common"}},"methods":{},"events":{"thumbnailAction":{"description":"Event to be dispatched when thumbnail is clicked.","bubbles":true,"detail":{"src":{"description":"Source parameter from component to be passed with thumbnailAction event","type":"string"}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Controls & Navigation","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Thumbnail&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrathumbnail.html","coverImage":"extension/catalog/images/ico-thumbnail.svg"}},"icon":{"iconPath":"extension/catalog/images/ico-thumbnail.svg"}}'})),define("text!oj-sp/thumbnail/thumbnail-view.html",[],(function(){return'<!doctypehtml><html><head></head><body><div class="wrapper"><div :class="[[aspectPad]]"><div :class="[[imgWrapper]]"><div :class="[[imgDisplay]]"></div><img :src="[[imgSrc]]":class="[[imgClass]]":aria-label="[[imgAlternativeText]]"role="presentation"on-error="[[imageError]]"><div :class="[[iconClass]]"role="presentation":aria-label="[[iconAlternativeText]]"></div><button :class="[[buttonClass]]":aria-label="[[buttonText]]"></button></div></div></div></body></html>'})),define("oj-sp/thumbnail/thumbnail-viewModel",["require","exports","knockout","oj-sp/common/private/ThumbnailCommonPrivate","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojknockout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThumbnailViewModel=void 0;class r{constructor(e){var t;this.imgWrapper=i.observable(""),this.imgSrc=i.observable(""),this.imgClass=i.observable(""),this.imgDisplay=i.observable(""),this.iconClass=i.observable(""),this.aspectPad=i.observable(""),this.imgAlternativeText=i.observable(""),this.iconAlternativeText=i.observable(""),this.buttonText=i.observable(""),this.buttonClass=i.observable(""),this.imageError=()=>{if(!this.stateMonitorInIconMode){this.imgSrc(""),this.imgDisplay(r.IMAGE_DISPLAY_FOR_ICON_CLASS);const e=[],t=[],i=[];this.getIconSizeStyleClasses(e,t,i),this.imageShape===r.SHAPE_CIRCLE?e.push("thumbnail-circle"):this.imageShape===r.SHAPE_ROUNDED_CORNERS&&e.push(this.arrayToString(t)),e.push(r.ICON_BACKGROUND_COLOR_CLASS),e.push(r.ERROR_IMAGE_CLASS,r.ICON_FONT_ALIGN),this.iconClass(this.arrayToString(e)),i.push("icon-button-accessibility"),this.buttonClass(this.arrayToString(i))}};const o=a.getContext(e.element).getBusyContext();this.busyResolve=o.addBusyState({description:"Thumbnail Component Startup - Waiting for data"}),this.properties=e.properties,this.composite=e.element,this.uid=e.uniqueId,this.res=Object.assign(Object.assign({},s),this.properties.translations),(null===(t=this.properties.translations)||void 0===t?void 0:t.alternativeText)&&(this.res.unknownFileTypeIcon=this.properties.translations.alternativeText),this.src=this.properties.src,this.iconType=this.properties.iconType,this.imageRatio=this.properties.imageRatio,this.imageShape=this.properties.imageShape,this.type=this.properties.type,this.disable=this.properties.disable,this.busyResolve()}activated(e){n.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){n.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55")}bindingsApplied(e){this.updateImg(),this.clickHander(),n.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55")}propertyChanged(e){n.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"imageShape"===e.property?this.imageShape=e.value:"disable"===e.property?this.disable=e.value:"type"===e.property?this.type=e.value:"src"===e.property?this.src=e.value:"imageRatio"===e.property?this.imageRatio=e.value:"iconType"===e.property?this.iconType=e.value:"translations"===e.property&&(this.res=Object.assign(Object.assign(Object.assign({},s),e.value),{unknownFileTypeIcon:e.value.alternativeText})),this.updateImg()}disconnected(e){n.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55")}updateImg(){const e=[],t=[],i=[],s=[];s.push("image-wrapper"),!0===this.disable&&(e.push("thumbnail-disabled"),t.push("thumbnail-disabled")),e.push("thumbnail-img-scale-down");const a=[],n=[],l=[];this.getIconSizeStyleClasses(a,n,l),this.buttonText(this.res.actionText);let d=null,c=null,p=!0,u=!1;this.stateMonitorInIconMode=!0;let h="";if(this.type===r.TYPE_ICON)if(this.iconType){const e=o.ThumbnailCommonPrivate.iconTypeForMimeType(this.iconType),i=o.ThumbnailCommonPrivate.iconClassForIconType(e);t.push(i),c=o.ThumbnailCommonPrivate.alternativeTextForIconType(e,this.res)}else{const e=o.ThumbnailCommonPrivate.iconTypeForFileName(this.src),i=o.ThumbnailCommonPrivate.iconClassForIconType(e);t.push(i),c=o.ThumbnailCommonPrivate.alternativeTextForIconType(e,this.res),e===o.ThumbnailIconType.DefaultImage&&(u=!0)}else if(this.src&&""!==this.src){const e=o.ThumbnailCommonPrivate.iconTypeForFileName(this.src);if(e===o.ThumbnailIconType.Document||e===o.ThumbnailIconType.Media||e===o.ThumbnailIconType.Audio||e===o.ThumbnailIconType.PDF||e===o.ThumbnailIconType.Code||e===o.ThumbnailIconType.Presentation||e===o.ThumbnailIconType.Speadsheet||e===o.ThumbnailIconType.Web||e===o.ThumbnailIconType.Compressed){const i=o.ThumbnailCommonPrivate.iconClassForIconType(e);t.push(i),c=o.ThumbnailCommonPrivate.alternativeTextForIconType(e,this.res)}else p=!1,this.stateMonitorInIconMode=!1,h=this.src,d=this.res.alternativeText}else t.push(o.ThumbnailCommonPrivate.DEFAULT_IMAGE_CLASS),u=!0,c=this.res.alternativeText;p?(this.imageRatio===r.RATIO_4_3||this.imageRatio===r.RATIO_16_9?(s.push(r.ICON_BACKGROUND_COLOR_CLASS),s.push("image-wrapper-center")):t.push(r.ICON_BACKGROUND_COLOR_CLASS),u?t.push(r.ICON_DEFAULT_COLOR_CLASS):t.push(r.ICON_COLOR_CLASS),t.push(r.ICON_FONT_ALIGN),e.push(r.IMAGE_DISPLAY_FOR_ICON_CLASS),t.push(this.arrayToString(a)),i.push(this.arrayToString(l)),i.push("icon-button-accessibility"),this.imageShape===r.SHAPE_CIRCLE?t.push("thumbnail-circle"):this.imageShape===r.SHAPE_ROUNDED_CORNERS&&t.push(this.arrayToString(n))):(i.push("image-button-accessibility"),this.imageShape===r.SHAPE_CIRCLE?e.push("thumbnail-circle"):this.imageShape===r.SHAPE_ROUNDED_CORNERS&&e.push("thumbnail-rounded-corners")),this.imgAlternativeText(d),this.iconAlternativeText(c);const m=this.arrayToString(e);this.imgClass(m);const g=this.arrayToString(t);this.iconClass(g);const y=this.arrayToString(i);this.buttonClass(y),g.length<=0?this.imgDisplay(r.DEFAULT_IMAGE_DISPLAY_CLASS):this.imgDisplay(r.IMAGE_DISPLAY_FOR_ICON_CLASS),this.imgSrc(h);let f="pad-1-1";this.imageRatio===r.RATIO_4_3?f="pad-4-3":this.imageRatio===r.RATIO_16_9&&(f="pad-16-9"),this.aspectPad(f);const b=this.arrayToString(s);this.imgWrapper(b)}clickHander(){this.composite&&this.composite.addEventListener("click",e=>{const t={bubbles:!0,cancelable:!0,detail:{src:this.src}};this.composite.dispatchEvent(new CustomEvent("thumbnailAction",t))})}getIconSizeStyleClasses(e,t,i){let o="thumbnail-icon-size-sm oj-ux-icon-size-6x",s="thumbnail-icon-button-size-sm",a="thumbnail-icon-rounding-sm";this.properties.iconSize&&(r.SIZE_XXS===this.properties.iconSize?(o="thumbnail-icon-size-xxs thumbnail-icon-font-size-xxs",s="thumbnail-icon-button-size-xxs",a="thumbnail-icon-rounding-2x"):r.SIZE_XS===this.properties.iconSize?(o="thumbnail-icon-size-xs oj-ux-icon-size-4x",s="thumbnail-icon-button-size-xs",a="thumbnail-icon-rounding-4x"):r.SIZE_SM===this.properties.iconSize?(o="thumbnail-icon-size-sm oj-ux-icon-size-6x",s="thumbnail-icon-button-size-sm",a="thumbnail-icon-rounding-4x"):r.SIZE_MD===this.properties.iconSize?(o="thumbnail-icon-size-md thumbnail-icon-font-size-md",s="thumbnail-icon-button-size-md",a="thumbnail-icon-rounding-4x"):r.SIZE_LG===this.properties.iconSize?(o="thumbnail-icon-size-lg oj-ux-icon-size-9x",s="thumbnail-icon-button-size-lg",a="thumbnail-icon-rounding-4x"):r.SIZE_XL===this.properties.iconSize?(o="thumbnail-icon-size-xl thumbnail-icon-font-size-xl",s="thumbnail-icon-button-size-xl",a="thumbnail-icon-rounding-6x"):r.SIZE_2XL===this.properties.iconSize?(o="thumbnail-icon-size-2xl oj-ux-icon-size-18x",s="thumbnail-icon-button-size-2xl",a="thumbnail-icon-rounding-6x"):(o="thumbnail-icon-size-sm oj-ux-icon-size-6x",s="thumbnail-icon-button-size-sm",a="thumbnail-icon-rounding-4x")),e.push(o),t.push(a),i.push(s)}arrayToString(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t+=" "),t+=e[i];return t}}r.ERROR_IMAGE_CLASS="oj-ux-ico-broken-image",r.IMAGE_DISPLAY_FOR_ICON_CLASS="thumbnail-hide-image-for-icon",r.DEFAULT_IMAGE_DISPLAY_CLASS="image-align-center",r.RATIO_1_1="1-1",r.RATIO_4_3="4-3",r.RATIO_16_9="16-9",r.SHAPE_NONE="NONE",r.SHAPE_ROUNDED_CORNERS="ROUNDED_CORNERS",r.SHAPE_CIRCLE="CIRCLE",r.TYPE_IMAGE="IMAGE",r.TYPE_ICON="ICON",r.SCALING_SCALE_DOWN="scale-down",r.SCALING_SCALE_BOTH="scale-both",r.SIZE_XXS="XXS",r.SIZE_XS="XS",r.SIZE_SM="SM",r.SIZE_MD="MD",r.SIZE_LG="LG",r.SIZE_XL="XL",r.SIZE_2XL="2XL",r.ICON_BACKGROUND_COLOR_CLASS="thumbnail-icon-background-color",r.ICON_COLOR_CLASS="thumbnail-icon-color",r.ICON_DEFAULT_COLOR_CLASS="thumbnail-default-icon-color",r.ICON_FONT_ALIGN="oj-sp-thumbnail-icon-align-center",t.ThumbnailViewModel=r})),define("css!oj-sp/thumbnail/thumbnail-styles",[],(function(){})),define("oj-sp/thumbnail/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./thumbnail-view.html","./thumbnail-viewModel","css!./thumbnail-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-thumbnail",{metadata:JSON.parse(o),view:s,viewModel:a.ThumbnailViewModel})})),define("oj-sp/attachments/attachments-viewModel",["require","exports","knockout","ojs/ojarraydataprovider","ojs/ojcontext","ojs/ojdataprovider","ojs/ojdeferreddataprovider","ojs/ojlistdataproviderview","ojs/ojlogger","ojs/ojtranslation","oj-sp/common/EventDispatcher","oj-sp/common-util/common-util","oj-sp/common/ThumbnailCommon","oj-sp/common/private/ThumbnailCommonPrivate","oj-sp/attachments-common/private/AttachmentManager","oj-sp/attachments-common/private/ComponentUtils","oj-sp/attachments-common/private/EndpointUtils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","./js/mime-type-helper","ojs/ojconverter-datetime","ojs/ojasyncvalidator-length","ojs/ojknockout","ojs/ojarraydataprovider","ojs/ojarraytabledatasource","ojs/ojbutton","ojs/ojdatetimepicker","ojs/ojfilepicker","ojs/ojfilmstrip","ojs/ojformlayout","ojs/ojinputtext","ojs/ojlabelvalue","ojs/ojlistview","ojs/ojmessages","ojs/ojpagingcontrol","ojs/ojprogress-bar","ojs/ojselectsingle","ojs/ojtable","ojs/ojtoolbar","ojs/ojdialog","oj-sp/attachments-viewer/loader","oj-sp/input-url/loader","oj-sp/list-item-template/loader","oj-sp/preview-card/loader","oj-sp/thumbnail/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f,b,v,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentsViewModel=void 0;t.AttachmentsViewModel=class{constructor(e){this.LIST_ACTION_ID_DOWNLOAD="download",this.LIST_ACTION_ID_DOWNLOAD_HIDDEN="download-hidden",this.LIST_ACTION_ID_EDIT="edit",this.LIST_ACTION_ID_REMOVE="remove",this.LIST_ACTION_ID_PREVIEW="preview",this.LIST_ACTION_ID_UPLOAD_COMPLETE="uploadComplete",this.DATA_TYPE_CODE_UPLOAD="UPLOAD",this.DATA_TYPE_CODE_UPLOAD_COMPLETE="UPLOAD_COMPLETE",this.DATA_TYPE_CODE_UPLOAD_ERROR="UPLOAD_ERROR",this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED="UPLOAD_CONSOLIDATED",this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE="UPLOAD_CONSOLIDATED_COMPLETE",this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE_PROCESSED="UPLOAD_CONSOLIDATED_COMPLETE_PROCESSED",this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_ERROR="UPLOAD_CONSOLIDATED_ERROR",this.DATA_TYPE_CODE_WEB_PAGE="WEB_PAGE",this.DATA_TYPE_CODE_FILE="FILE",this.DISPLAY_LEADING_TYPE_ICON="icon",this.DISPLAY_LEADING_TYPE_THUMBNAIL="thumbnail",this.DISPLAY_LEADING_TYPE_PROGRESS="progress",this.COMPLETED_EVENT_ACTION_UPDATE="update",this.COMPLETED_EVENT_ACTION_DELETE="delete",this.COMPLETED_EVENT_ACTION_CREATE="create",this.FILMSTRIP_IMAGE_BINARY="binary",this.FILMSTRIP_IMAGE_BASE64="base64",this.DISPLAY_NAME_ACTION_NONE="none",this.DISPLAY_NAME_ACTION_MODAL="modal",this.DISPLAY_NAME_ACTION_TAB="tab",this.ACTION_ID_NEW_TAB="newTab",this.attachmentsData=i.observableArray(),this.attachmentsDataProvider=new o(this.attachmentsData,{keyAttributes:"AttachedDocumentId"}),this.attachmentsDataSource=i.observable(this.attachmentsDataProvider),this.currentAttachmentsOperationMessage=i.observable(),this.currentSelectedAttachedDocumentId=null,this.overviewErrorMessages=i.observableArray(),this.fileUploadSummaryProgressMessage=i.observable(),this.fileUploadSummaryProgress=i.observable(-1),this.attachmentsFileAcceptTypes=null,this.attachmentsFileSelectionMode="multiple",this.attachmentsLinkInlineInputDisplayed=i.observable(!1),this.attachmentsLinkInput=i.observable(),this.editDialogTitle=i.observable(),this.editDialogLastUpdatedBy=i.observable(),this.editDialogLastUpdatedOn=i.observable(),this.editDialogFileSize=i.observable(),this.editDialogCategoryItem=i.observable(),this.editDialogCategoryReadonly=i.observable(),this.editDialogDescription=i.observable(),this.attachmentCategory=i.observable(),this.DISPLAY_OPTIONS_CATEGORY_FOR_CREATE_SELECT_REQUIRED="SELECT_REQUIRED",this.categoriesArray=i.observableArray(),this.categoriesDataProvider=new o(this.categoriesArray,{keyAttributes:"CategoryName"}),this.filmstripPagingModel=i.observable(),this.attachmentsDataComplete=i.observable(!1),this.previewSelectedAttachment=i.observable(),this.containerSize=i.observable(),this.MAXIMUM_FILMSTRIP_IMAGE_POLL_COUNT=3,this.createPayload=[],this.deferredOperationPayload=[],this.deferredOperationCount=0,this.DEFERRED_OPERATION_CREATE="create",this.DEFERRED_OPERATION_UPDATE="update",this.DEFERRED_OPERATION_DELETE="delete",this.CUSTOM_ACTION_PREFIX="CUSTOM_",this.fileUploadSummaryProgressFileComplete=0,this.fileUploadSummaryProgressFileCount=0,this.attachmentsLinkCreateProcessing=!1,this.DISPLAY_OPTIONS_TYPE_FILMSTRIP="filmstrip",this.filmstripWidth=i.observable(),this.DISPLAY_OPTIONS_TYPE_TABLE="table",this.deferredCreateAttachedDocumentIds=[],this.currentEntityNameForCategoriesLOV=null,this.CATEGORIES_DEFAULT_ACTION_PARAM_NAME="action",this.CATEGORIES_DEFAULT_ENTITY_NAME_PARAM_NAME="entityName",this.CATEGORIES_ACTION_UPDATE="update",this.BACKGROUND_DOWNLOAD_TRACKER_PARAM_NAME_DEFAULT="trackerId",this.BACKGROUND_DOWNLOAD_ATTACHMENT_PARAM_NAME_DEFAULT="attachedDocumentId",this.busyStateOverallUploadFile=null,this.busyStateUploadLink=null,this.currentItemProperty="currentItem",this._refresh=()=>(l.info("Refresh requested for Attachments CCA"),this.populateDataSource(),this.resetWritebackProperties(),!0),this.handleListAction=(e,t,i)=>{this.currentSelectedAttachedDocumentId=this.getListKeyValueFromEvent(e);const o=t.data.id;this.executeListAction(o,this.currentSelectedAttachedDocumentId)},this.handleListOverflowOpenMenu=(e,t,i)=>{this.currentSelectedAttachedDocumentId=this.getListKeyValueFromEvent(e);const o=this.composite.querySelector(`#${this.uid}_more-actions-menu_${t.index}_${this.currentSelectedAttachedDocumentId}`),s={launcher:e.target};o&&o.open(e,s)},this.handleListOverflowAction=e=>{const t=e.detail.selectedValue;this.executeListAction(t,this.currentSelectedAttachedDocumentId)},this.handleTableAction=(e,t,i)=>{this.currentSelectedAttachedDocumentId=this.getTableKeyValueFromContext(i);const o=t.data.id;this.executeListAction(o,this.currentSelectedAttachedDocumentId)},this.handleTableOverflowOpenMenu=(e,t,i)=>{this.currentSelectedAttachedDocumentId=this.getTableKeyValueFromContext(i);const o=this.composite.querySelector(`#${this.uid}_table_more-actions-menu_${t.index}_${this.currentSelectedAttachedDocumentId}`),s={launcher:e.target};o&&o.open(e,s)},this.handleTableOverflowAction=e=>{console.log(e.detail);const t=e.detail.selectedValue;this.executeListAction(t,this.currentSelectedAttachedDocumentId)},this.handleAttachmentsRemoveDialogRemove=e=>{this.selectedAttachedDocumentId=this.currentSelectedAttachedDocumentId,this.isFilmstripDisplayType()&&(this.selectedAttachedDocumentId=this.filmstripSelectedRemoveAttachedDocumentId);const t=document.getElementById("attachmentsRemoveDialog_"+this.uid);t&&t.isOpen()&&(t.addEventListener("ojClose",this.closeDialogRemoveAttachments),t.close())},this.closeDialogRemoveAttachments=()=>{this.removeAttachment(this.selectedAttachedDocumentId);const e=document.getElementById("attachmentsRemoveDialog_"+this.uid);e&&(e.removeEventListener("ojClose",this.closeDialogRemoveAttachments),this.setFocus())},this.handleAttachmentsRemoveDialogCancel=e=>{document.getElementById("attachmentsRemoveDialog_"+this.uid).close()},this.handleAttachmentsListEditDialogSave=e=>{this.editAttachmentInDialog(this.currentSelectedAttachedDocumentId),document.getElementById("attachmentsListEditDialog_"+this.uid).close()},this.handleAttachmentsListEditDialogCancel=e=>{document.getElementById("attachmentsListEditDialog_"+this.uid).close()},this.handleAttachmentsFileSelect=e=>{const t=e.detail.files;this.busyStateOverallUploadFile=this.openBusyState("Attachment Overall File Uploads - Count: "+t.length),this.fileUploadSummaryProgressFileCount=this.fileUploadSummaryProgressFileCount+t.length,m.AttachmentManager.uploadFile(t,this.getCreateCategoryName(),this.properties.createMode?this.properties.createMode:m.AttachmentManager.CREATE_TYPE_BACKGROUND,this.properties.create?this.properties.create.endpoint:null,this.properties.create?this.properties.create.endpointParams:null,this.properties.create?this.properties.create.endpointInitConfig:null,this.properties.createEnclosure?this.properties.createEnclosure.endpoint:null,this.properties.createEnclosure?this.properties.createEnclosure.endpointParams:null,this.properties.createEnclosure?this.properties.createEnclosure.endpointAttachmentParamName:null,this.properties.createEnclosure?this.properties.createEnclosure.endpointInitConfig:null,this.properties.entityName,this.properties.backgroundTracker?this.properties.backgroundTracker.endpoint:null,this.properties.backgroundTracker?this.properties.backgroundTracker.endpointInitConfig:null,this.properties.backgroundUpload?this.properties.backgroundUpload.endpoint:null,this.properties.backgroundUpload?this.properties.backgroundUpload.endpointTrackerParamName:null,this.properties.backgroundUpload?this.properties.backgroundUpload.endpointInitConfig:null,this.properties.chunkifyCreate?this.properties.chunkifyCreate.endpoint:null,this.properties.chunkifyCreate?this.properties.chunkifyCreate.endpointTrackerParamName:null,this.properties.chunkifyCreate?this.properties.chunkifyCreate.endpointInitConfig:null,this.properties.backgroundChunkUpload?this.properties.backgroundChunkUpload.endpoint:null,this.properties.backgroundChunkUpload?this.properties.backgroundChunkUpload.endpointTrackerParamName:null,this.properties.backgroundChunkUpload?this.properties.backgroundChunkUpload.endpointPartParamName:null,this.properties.backgroundChunkUpload?this.properties.backgroundChunkUpload.endpointInitConfig:null,this.properties.backgroundChunkReassembleUpload?this.properties.backgroundChunkReassembleUpload.endpoint:null,this.properties.backgroundChunkReassembleUpload?this.properties.backgroundChunkReassembleUpload.endpointTrackerParamName:null,this.properties.backgroundChunkReassembleUpload?this.properties.backgroundChunkReassembleUpload.endpointInitConfig:null,this)},this.handleAttachmentsAddUrlSelect=e=>{this.attachmentsLinkInput(""),this.mdUpContainerSize()?this.attachmentsLinkInlineInputDisplayed(!0):document.getElementById("attachmentsLinkDialogInput_"+this.uid).open()},this.handleAttachmentsLinkInlineAttach=e=>{const t=this.getAttachmentsLinkInput("attachmentsLinkInlineInput_urlInput_"+this.uid);this.executeUploadLink(t)},this.handleAttachmentsLinkFieldAttach=e=>{const t=this.getAttachmentsLinkInput("attachmentsLinkFieldInput_urlInput_"+this.uid);this.executeUploadLink(t).then(e=>{e||t.showMessages()},e=>{l.warn("handleAttachmentsLinkFieldAttach executeUploadLink rejection"),l.warn(e),t.showMessages()})},this.handleAttachmentsLinkDialogAttach=e=>{const t=this.getAttachmentsLinkInput("attachmentsLinkDialogInput_urlInput_"+this.uid);this.executeUploadLink(t).then(e=>{e?document.getElementById("attachmentsLinkDialogInput_"+this.uid).close():t.showMessages()},e=>{l.warn("handleAttachmentsLinkDialogAttach executeUploadLink rejection"),l.warn(e),t.showMessages()})},this.handleAttachmentsLinkInlineClose=e=>{this.attachmentsLinkInlineInputDisplayed(!1),this.attachmentsLinkCreateProcessing=!1,this.attachmentsLinkInput("")},this.handleAttachmentsLinkDialogCancel=e=>{this.attachmentsLinkCreateProcessing=!1,this.attachmentsLinkInput(""),document.getElementById("attachmentsLinkDialogInput_"+this.uid).close()},this.handleFilmstripDownloadAction=e=>{this.executeListAction(this.LIST_ACTION_ID_DOWNLOAD,e)},this.handleFilmstripRemoveAction=e=>{this.filmstripSelectedRemoveAttachedDocumentId=e,this.executeListAction(this.LIST_ACTION_ID_REMOVE,e)},this.handleAttachmentsPreviewAction=e=>{var t,i;const o=null===(i=null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.userData)||void 0===i?void 0:i.AttachedDocumentId;"cancel"===e.detail.type?document.getElementById("attachmentsPreviewDialog_"+this.uid).close():"remove"===e.detail.type?this.executeListAction(this.LIST_ACTION_ID_REMOVE,o):"download"===e.detail.type&&this.executeListAction(this.LIST_ACTION_ID_DOWNLOAD,o)},this.handleOverviewErrorMessageClose=e=>{const t=this.openBusyState("Attachments: close upload error message and remove failed attachment");this.delay(50).then(()=>{const i=e.detail.message.UploadIdentifier;if(i){const e=this.findAttachmentDataByAttachedDocumentId(i);e&&this.removeAttachmentsData(e)}this.closeBusyState(t)},e=>{l.warn("handleOverviewErrorMessageClose delay rejection"),l.warn(e)})},this.handleFileTitleClick=(e,t)=>{const i=t.data.AttachedDocumentId;this.executeFileTitleClick(e,i)},this.handleTableFileTitleClick=(e,t)=>{const i=t.row.AttachedDocumentId;this.executeFileTitleClick(e,i)},this.handleFileTitleContextMenu=(e,t)=>{this.executeFileTitleContextMenu(e,this.uid+"_list_context-actions-menu",t.data.AttachedDocumentId)},this.handleTableFileTitleContextMenu=(e,t)=>{this.executeFileTitleContextMenu(e,this.uid+"_table_context-actions-menu",t.row.AttachedDocumentId)},this.handleFileTitleContextAction=e=>{const t=e.detail.selectedValue;this.executeFileTitleContextAction(t)},this.properties=e.properties,this.composite=e.element,this.uid=e.uniqueId,this.res=i.observable(Object.assign(Object.assign({},f),this.properties.translations)),this.isMobile=i.observable((0,p.checkMobile)());const t=this.openBusyState("Attachments Component Startup - Waiting for data");this.populateDataSource(),this.initialiseCategories(),this.initialiseComputedVariables(),this.closeBusyState(t),this.attachmentsLinkAsyncLengthValidator=new j({max:4e3,messageDetail:{tooLong:this.res().urlLengthValidationMessage}})}getTranslation(e){return this.res()[e]}linkDeferredUploadListener(e){this.addCreatePayload(e),this.writebackCreatePayload()}linkUploadListener(e,t){e.CategoryName&&!e.UserName&&(e.UserName=this.getUserNameForCategoryName(e.CategoryName,e.AttachedDocumentId,e.AsyncTrackerId)),this.addAttachmentsData(e),this.attachmentsLinkCreateProcessing=!1,this.attachmentsLinkInput(""),this.currentAttachmentsOperationMessage()==this.res().attachmentAnnounceCreateLink?this.currentAttachmentsOperationMessage(this.res().attachmentAnnounceAdditionalCreateLink):this.currentAttachmentsOperationMessage()==this.res().attachmentAnnounceAdditionalCreateLink?this.currentAttachmentsOperationMessage(this.res().attachmentAnnounceAnotherCreateLink):this.currentAttachmentsOperationMessage(this.res().attachmentAnnounceCreateLink),t!==m.AttachmentManager.CREATE_TYPE_BACKGROUND&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND&&t!==m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED&&t!==m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_CREATE),this.closeBusyState(this.busyStateUploadLink)}linkErrorListener(e,t,i,o){this.attachmentsLinkCreateProcessing=!1,t?this.raiseOverviewErrorMessageFromError(null,o,t,e):i?this.raiseOverviewErrorMessageFromResponse(null,o,i,e):this.raiseOverviewErrorMessageFromCode(null,o,e),this.closeBusyState(this.busyStateUploadLink)}fileErrorListener(e,t,i,o,s,a,n){o?this.raiseOverviewErrorMessageFromError(t,a,o,e):s?this.raiseOverviewErrorMessageFromResponse(t,a,s,e):this.raiseOverviewErrorMessageFromCode(t,a,e),this.fileUploadSummaryProgressFileCount>0&&(this.fileUploadSummaryProgressFileCount--,this.updateAttachmentsSummaryProgress());const r=this.findAttachmentDisplayByAsyncTrackerId(i);if(r&&this.isAttachmentFileUpload(r))this.closeBusyState(r.BusyState),r.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_ERROR;else if(r&&this.isAttachmentFileUploadConsolidated(r)){const e=this.findAttachmentFileUploadByAsyncTrackerIdInData(r,i);this.closeBusyState(e.BusyState),e.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_ERROR;let t=!1;for(let e=0;e<r.UploadFiles.length;e++){const i=r.UploadFiles[e];if(i&&i.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD){t=!0;break}}t||(r.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_ERROR)}let l=!1;const d=this.attachmentsData();for(let e=0;e<d.length;e++){const t=d[e];if(t&&(t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD||t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED)){l=!0;break}}if(!l){for(let e=0;e<d.length;e++){const t=d[e];t&&t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_ERROR?this.replaceAttachmentsData(t,t,!1):t&&t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_ERROR&&this.isAttachmentFileUploadConsolidated(r)&&this.updateAttachmentsUploadConsolidatedCompleteError(r)}this.closeBusyState(this.busyStateOverallUploadFile)}}uploadEventListener(e){if(e&&e.type&&e.type===m.AttachmentManager.UPLOAD_FILE_EVENT_TYPE_STATE_COMPLETE){const t=e.id;this.updateAttachmentsProgress(e.createMode,t,e.attachment,e.file,e.user,100,!0,e.category)}else if(e&&e.type&&e.type===m.AttachmentManager.UPLOAD_FILE_EVENT_TYPE_PROGRESS){const t=e.id;this.updateAttachmentsProgress(e.createMode,t,e.attachment,e.file,e.user,e.percent,!1,e.category)}}uploadDeferredListener(e){if(e){let t=!1;for(let i=0;i<e.length;i++){const o=e[i];!o.createMode||o.createMode!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&o.createMode!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&o.createMode!==m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||(this.createAndAddPayloadObject(o.createMode,o.trackerId,o.filename,o.fileSize,o.contentType,o.categoryName),t=!0),this.uploadListener(m.AttachmentManager.getDeferredAttachmentId(o),o.filename,m.AttachmentManager.mimeTypeCalculator(o.filename,o.file.type),o.file.size,o.trackerId,o.createMode,null,null)}t&&this.writebackCreatePayload()}}uploadListener(e,t,i,o,s,a,n,r){const l={AsyncTrackerId:s,AttachedDocumentId:e,BusyState:this.openBusyState("File Upload for file: "+t),DatatypeCode:this.DATA_TYPE_CODE_UPLOAD,FileMimeType:i,FileName:t,FileProgress:-1};if(this.fileUploadSummaryProgressFileCount>0&&this.updateAttachmentsSummaryProgress(),this.isFilmstripDisplayType()){let t=null,i=null;for(let e=0;e<this.attachmentsData().length;e++){const o=this.attachmentsData()[e];if(this.isAttachmentFileUploadConsolidated(o)){t=o;break}if(o.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD&&this.isAttachmentFileUpload(o)){i=o;break}}t?(t.UploadFiles.push(l),this.replaceAttachmentsData(t,t,!0)):i?(t={AttachedDocumentId:this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED+e,DatatypeCode:this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED,UploadFiles:[i,l]},this.replaceAttachmentsData(i,t,!0)):this.addAttachmentsData(l)}else this.addAttachmentsData(l)}stopUploadListener(e){}downloadErrorListener(e,t,i,o){t?this.raiseOverviewErrorMessageFromError(null,o,t,e):i?this.raiseOverviewErrorMessageFromResponse(null,o,i,e):this.raiseOverviewErrorMessageFromCode(null,o,e)}handleAttachmentsFilePickerSelect_FromTest(e){this.handleAttachmentsFileSelect(e)}activated(e){l.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){l.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55"),this.setupMutationObserver()}bindingsApplied(e){l.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),this.setupResizeListener()}propertyChanged(e){l.log(`%c CCA ${this.uid} '${e.property}'`,"background: #222; color: #bada55");try{l.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55")}catch(e){l.log(`Could not log property change event details as unable to stringify objects: '${e}'`)}"translations"===e.property?this.res(Object.assign(Object.assign({},f),e.value)):"view"===e.property&&"external"===e.updatedFrom?this.populateDataSource():"displayOptions"===e.property&&e.subproperty&&"displayOptions.type"===e.subproperty.path&&e.subproperty.value===this.DISPLAY_OPTIONS_TYPE_FILMSTRIP?this.filmstripPagingModel(null):("entityName"===e.property||"category"===e.property||"displayOptions"===e.property&&e.subproperty&&"displayOptions.categoryForCreate"===e.subproperty.path&&e.subproperty.value===this.DISPLAY_OPTIONS_CATEGORY_FOR_CREATE_SELECT_REQUIRED)&&this.populateCategories()}disconnected(e){l.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),this.teardownMutationObserver(),this.teardownResizeListener()}isDisplayed(e){const t=[],i=e.length;for(let o=0;o<i;++o){const i=e[o],s=i.getBoundingClientRect();let a;s.width>0&&s.height>0&&s.left+s.width>0&&s.right-s.width<window.outerWidth&&s.top+s.height>0&&s.bottom-s.width<window.outerHeight&&(a=window.getComputedStyle(i))&&"visible"===a.getPropertyValue("visibility")&&0==i.disabled&&"none"!==a.getPropertyValue("opacity")&&t.push(i)}return t}setFocus(){var e;if(this.attachmentsData().length<=1){const t=document.querySelector("oj-sp-attachments").querySelectorAll("oj-sp-input-url:not([disabled]), oj-button:not([disabled]) , oj-file-picker");null===(e=this.isDisplayed(t)[0])||void 0===e||e.focus()}}styleDisplayForUrl(e){return"WEB_PAGE"===e?"":"none"}styleDisplayForFile(e){return"WEB_PAGE"===e?"none":""}getPrimaryText(e,t,i,o,s){let a=o;return e===this.DATA_TYPE_CODE_UPLOAD||e===this.DATA_TYPE_CODE_UPLOAD_COMPLETE||e===this.DATA_TYPE_CODE_UPLOAD_ERROR?a=t:"WEB_PAGE"===e?a=i:e===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED?a=d.applyParameters(this.res().overallUploadProgress,{count:s?s.length:0}):e===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE&&(a=this.res().overallUploadComplete),a}formatSize(e){return g.ComponentUtils.formatSize(e)}formatLastUpdated(e,t,i){let o="";const s=this.formatLastUpdatedDate(i);return e!==this.DATA_TYPE_CODE_UPLOAD&&e!==this.DATA_TYPE_CODE_UPLOAD_COMPLETE&&e!==this.DATA_TYPE_CODE_UPLOAD_ERROR&&(o=t?d.applyParameters(this.res().lastUpdateByDate,{date:s,username:t}):d.applyParameters(this.res().lastUpdateDate,{date:s})),o}formatLastUpdatedDate(e){let t=e;try{if(e){const i=(0,p.getDateFormatPattern)(),o={pattern:i,timeZone:(0,p.getTimeZone)()};t=new v.IntlDateTimeConverter(o).format(e)}}catch(e){l.warn("Error attempting to parse uploaded date for attachments implementation."),l.log(e)}return t}getDisplayLeadingType(e){let t=this.DISPLAY_LEADING_TYPE_ICON;return e===this.DATA_TYPE_CODE_UPLOAD&&(t=this.DISPLAY_LEADING_TYPE_PROGRESS),t}getMimeTypeIcon(e,t,i,o){let s="oj-ux-ico-file-other";return"FILE"===e||e===this.DATA_TYPE_CODE_UPLOAD_COMPLETE?void 0!==t&&t?(console.log(`Content type found. Content type is ${t}.`),s=u.ThumbnailCommon.iconClassForMimeType(t)):void 0!==i&&i&&(s=u.ThumbnailCommon.iconClassForFileName(i)):"WEB_PAGE"===e?s="oj-ux-ico-link":e===this.DATA_TYPE_CODE_UPLOAD?s=o&&100===o?"oj-ux-ico-circular-progress":"oj-sp-attachments-upload-progress-animation oj-ux-ico-circular-progress-3":e===this.DATA_TYPE_CODE_UPLOAD_ERROR?s="oj-ux-ico-error-s oj-icon-color-danger":e===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED?s="oj-sp-attachments-upload-progress-animation oj-ux-ico-circular-progress-3":e===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE&&(s="oj-ux-ico-circular-progress"),s+=" oj-ux-icon-size-6x",s}getMimeTypeIconAriaLabel(e,t,i,o){let s=this.res().alternativeText;if("FILE"===e||e===this.DATA_TYPE_CODE_UPLOAD_COMPLETE){let e;void 0!==i&&i?e=h.ThumbnailCommonPrivate.iconTypeForMimeType(i):void 0!==t&&t&&(e=h.ThumbnailCommonPrivate.iconTypeForFileName(t)),e&&(s=h.ThumbnailCommonPrivate.alternativeTextForIconType(e,this.res()))}else"WEB_PAGE"===e?s=this.res().url:e===this.DATA_TYPE_CODE_UPLOAD?s=o&&100===o?this.res().uploadCompleteAction:this.res().uploadingIconAlternativeText:e===this.DATA_TYPE_CODE_UPLOAD_ERROR?s=this.res().errorAttachmentUpload:e===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED?s=this.res().uploadingIconAlternativeText:e===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE&&(s=this.res().uploadCompleteAction);return s}getCategoryDisplayName(e){return e.data.UserName}getAttachmentsTableColumns(e){const t=[{id:"attachmentsTable_iconColumn_"+this.uid,maxWidth:"3.5rem",sortable:"disabled",template:"iconTemplate"},{field:"Title",headerText:this.res().fileUrlHeader,id:"attachmentsTable_titleColumn_"+this.uid,className:"oj-sp-attachments-table-title-overflow",sortable:"disabled",template:"fileUrlTemplate"}];return e&&t.push({field:"UserName",headerText:this.res().categoryHeader,id:"attachmentsTable_categoryColumn_"+this.uid,sortable:"disabled"},{headerText:this.res().fileSizeHeader,id:"attachmentsTable_fileSizeColumn_"+this.uid,sortable:"disabled",template:"fileSizeTemplate"}),t.push({field:"LastUpdatedBy",headerText:this.res().lastUpdatedByHeader,id:"attachmentsTable_lastUpdatedByColumn_"+this.uid,sortable:"disabled"},{headerText:this.res().lastUpdatedOnHeader,id:"attachmentsTable_lastUpdateDateColumn_"+this.uid,sortable:"disabled",template:"lastUpdateDateTemplate"}),e&&t.push({field:"Description",headerText:this.res().descriptionHeader,id:"attachmentsTable_descriptionColumn_"+this.uid,className:"oj-sp-attachments-table-description-overflow",sortable:"disabled",template:"descriptionTemplate"}),t.push({id:"attachmentsTable_actionsColumn_"+this.uid,maxWidth:"8rem",sortable:"disabled",template:"actionsTemplate"}),t}getVisibleActions(e,t,i,o,s){const a=[];return e===this.DATA_TYPE_CODE_UPLOAD||e===this.DATA_TYPE_CODE_UPLOAD_ERROR||(e===this.DATA_TYPE_CODE_UPLOAD_COMPLETE?a.push({disabled:!1,icon:"oj-ux-ico-check-circle",id:this.LIST_ACTION_ID_UPLOAD_COMPLETE,label:this.res().uploadCompleteAction}):((!this.isAttachmentRowActions(s)||!s.RowProperty_DownloadVisibility||"visible"!==s.RowProperty_DownloadVisibility)&&(this.isAttachmentRowActions(s)&&s.RowProperty_DownloadVisibility||this.properties.displayOptions&&this.properties.displayOptions.downloadVisibility&&"visible"!==this.properties.displayOptions.downloadVisibility)||(e!==this.DATA_TYPE_CODE_WEB_PAGE?a.push({disabled:this.isAttachmentRowActions(s)&&s.RowProperty_DownloadEnabled&&"false"===s.RowProperty_DownloadEnabled||!(this.isAttachmentRowActions(s)&&s.RowProperty_DownloadEnabled)&&(o||this.properties.displayOptions&&this.properties.displayOptions.download),icon:"oj-ux-ico-download",id:this.LIST_ACTION_ID_DOWNLOAD,label:this.res().download}):a.push({class:"oj-sp-attachments-button-hidden",disabled:this.isAttachmentRowActions(s)&&s.RowProperty_DownloadEnabled&&"false"===s.RowProperty_DownloadEnabled||!(this.isAttachmentRowActions(s)&&s.RowProperty_DownloadEnabled)&&this.properties.displayOptions&&this.properties.displayOptions.download,icon:"oj-ux-ico-download",id:this.LIST_ACTION_ID_DOWNLOAD_HIDDEN,label:this.res().download})),(!this.isAttachmentRowActions(s)||!s.RowProperty_UpdateVisibility||"visible"!==s.RowProperty_UpdateVisibility)&&(this.isAttachmentRowActions(s)&&s.RowProperty_UpdateVisibility||this.properties.displayOptions&&this.properties.displayOptions.updateVisibility&&"visible"!==this.properties.displayOptions.updateVisibility)||a.push({disabled:this.isAttachmentRowActions(s)&&s.RowProperty_UpdateEnabled&&"false"===s.RowProperty_UpdateEnabled||!(this.isAttachmentRowActions(s)&&s.RowProperty_UpdateEnabled)&&this.properties.displayOptions&&this.properties.displayOptions.update,icon:"oj-ux-ico-edit",id:this.LIST_ACTION_ID_EDIT,label:this.res().editAttachDetails}),(!this.isAttachmentRowActions(s)||!s.RowProperty_RemoveVisibility||"visible"!==s.RowProperty_RemoveVisibility)&&(this.isAttachmentRowActions(s)&&s.RowProperty_RemoveVisibility||this.properties.displayOptions&&this.properties.displayOptions.removeVisibility&&"visible"!==this.properties.displayOptions.removeVisibility)||a.push({disabled:this.isAttachmentRowActions(s)&&s.RowProperty_RemoveEnabled&&"false"===s.RowProperty_RemoveEnabled||!(this.isAttachmentRowActions(s)&&s.RowProperty_RemoveEnabled)&&this.properties.displayOptions&&this.properties.displayOptions.remove,icon:"oj-ux-ico-trash",id:this.LIST_ACTION_ID_REMOVE,label:this.res().attachmentsRemove}),(this.isAttachmentRowActions(s)&&s.RowProperty_PreviewVisibility&&"visible"===s.RowProperty_PreviewVisibility||(!this.isAttachmentRowActions(s)||!s.RowProperty_PreviewVisibility)&&this.properties.displayOptions&&"visible"===this.properties.displayOptions.previewVisibility)&&e===this.DATA_TYPE_CODE_FILE&&this.isAttachmentData(s)&&!this.isAttachmentDeferredFromData(s)&&a.push({disabled:this.isAttachmentRowActions(s)&&s.RowProperty_PreviewEnabled&&"false"===s.RowProperty_PreviewEnabled||!(this.isAttachmentRowActions(s)&&s.RowProperty_PreviewEnabled)&&this.properties.displayOptions&&this.properties.displayOptions.preview,icon:"oj-ux-ico-view",id:this.LIST_ACTION_ID_PREVIEW,label:this.res().preview}))),(this.isAttachmentRowActions(s)&&s.RowProperty_CustomActionVisibility&&"visible"===s.RowProperty_CustomActionVisibility||(!this.isAttachmentRowActions(s)||!s.RowProperty_CustomActionVisibility)&&this.properties.customRecordAction&&this.properties.customRecordAction.id&&(!this.properties.customRecordAction.display||"off"!==this.properties.customRecordAction.display))&&a.push({disabled:this.isAttachmentRowActions(s)&&s.RowProperty_CustomActionEnabled&&"false"===s.RowProperty_CustomActionEnabled||!(this.isAttachmentRowActions(s)&&s.RowProperty_CustomActionEnabled)&&"disabled"===this.properties.customRecordAction.display,icon:this.properties.customRecordAction.icon,id:this.CUSTOM_ACTION_PREFIX+this.properties.customRecordAction.id,label:this.properties.customRecordAction.label}),a}getInlineVisibleActions(e,t,i,o,s){return this.getInlineVisibleActionsForScreenSize(e,t,i,o,this.mdUpContainerSize,s)}getOverflowVisibleActions(e,t,i,o,s){return this.getOverflowVisibleActionsForScreenSize(e,t,i,o,this.mdUpContainerSize,s)}getHasOverflowMenu(e,t,i,o){return this.getHasOverflowMenuForScreenSize(e,t,i,this.mdUpContainerSize,o)}getTableInlineVisibleActions(e,t,i,o,s){return this.getInlineVisibleActionsForScreenSize(e,t,i,o,this.lgUpContainerSize,s)}getTableOverflowVisibleActions(e,t,i,o,s){return this.getOverflowVisibleActionsForScreenSize(e,t,i,o,this.lgUpContainerSize,s)}getTableHasOverflowMenu(e,t,i,o){return this.getHasOverflowMenuForScreenSize(e,t,i,this.lgUpContainerSize,o)}getFilmStripPagingModel(){if(!this.filmstripPagingModel()){const e=document.getElementById("attachmentsFilmstrip_"+this.uid);if(e){s.getContext(e).getBusyContext().whenReady().then(()=>{if("getPagingModel"in e)try{this.filmstripPagingModel(e.getPagingModel())}catch(e){console.warn("Unable to set filmstrip paging model"),console.warn(e)}},e=>{l.warn("getFilmStripPagingModel filmStripBusyContext rejection"),l.warn(e)})}}return this.filmstripPagingModel()}isFilmstripImageSource(e){let t=!1;if(this.isAttachmentData(e)&&e.DatatypeCode===this.DATA_TYPE_CODE_FILE&&(this.isAttachmentFileMonolithDataType(e)&&(b.MimeTypeHelper.isFilmStripImageMimeType(e.UploadedFileContentType)||b.MimeTypeHelper.isFilmStripImageFileName(e.FileName))||this.isAttachmentFileSpectraDataType(e)&&(b.MimeTypeHelper.isFilmStripImageMimeType(e.ContentType)||b.MimeTypeHelper.isFilmStripImageFileName(e.FileName)))){t=!0;const o=e;this.isAttachmentPreviewFileUrlDataType(o)&&o.PreviewFileUrl()||o.PreviewFileUrl||(o.PreviewFileUrl=i.observable()),this.downloadFilmstripImageSource(o,0)}return t}getPreviewCardButtonsDisplayOptionsValue(e,t,i,o){let s="on";return s=e&&"visible"===e||!e&&(!i||i&&"visible"===i)?t&&"false"===t||!t&&o?"disabled":"on":"off",s}populateDataSource(){if(this.properties.view)if(l.log("Creating data provider based on view endpoint provided."),this.properties.view.data){l.log("Populating data based on view data provided.");let e=!1;this.properties.view.data instanceof Array?(this.attachmentsData(this.properties.view.data.slice(0)),this.attachmentsDataSource(this.attachmentsDataProvider),e=!0):l.log("Unable to set attachments data provider based on view data provided."),this.resetWritebackProperties(),e&&this.populateWritebackPropertiesFromArray(),this.attachmentsDataComplete(!0)}else if(this.properties.view.endpoint){const e=this.openBusyState("Attachments CCA retrieving attachments.");this.attachmentsDataComplete(!1),this.attachmentsData([]);const t=y.EndpointUtils.callEndpoint(this.properties.view?this.properties.view.endpoint:null,this.properties.view?this.properties.view.endpointParams:null,this.properties.view?this.properties.view.endpointInitConfig:null,null,null,null,null),i=this,o=new Promise((o,s)=>{t.then(t=>{const s=i.isFilmstripDisplayType();if(t&&t.response.ok){const e=t.body.items;i.attachmentsData([]),i.filmstripPagingModel(null);for(let o=0;o<e.length;o++){const s=e[o];m.AttachmentManager.setRestFrameworkVersion(t,s),i.attachmentsData.push(s)}}i.closeBusyState(e),o(i.attachmentsDataProvider),s?i.refreshFilmstripIfDisplayedToFirstItem():i.refreshIfDisplayed(!0),i.attachmentsDataComplete(!0)}).catch(t=>{l.error("Error retrieving attachments: "+t),i.closeBusyState(e),o(i.attachmentsDataProvider)})});this.attachmentsDataSource(new n(o,null))}else l.log("No view property available for populating data source."),this.attachmentsDataSource(this.attachmentsDataProvider),this.attachmentsDataComplete(!0);else this.attachmentsDataSource(this.attachmentsDataProvider),this.attachmentsDataComplete(!0)}populateWritebackPropertiesFromArray(){const e=this.attachmentsData();if(e)for(let t=0;t<e.length;t++){const i=e[t];this.isAttachmentData(i)&&this.isAttachmentDeferredFromData(i)&&this.populateWritebackPropertiesForCreateFromAttachmentData(i)}this.writebackCreatePayload()}populateWritebackPropertiesForCreateFromAttachmentData(e){if(this.isAttachmentFileDataType(e)){if(this.isAttachmentFileMonolithDataType(e)){const t={AsyncTrackerId:e.AsyncTrackerId,CategoryName:e.CategoryName,ContentRepositoryFileShared:"false",DatatypeCode:e.DatatypeCode,Description:e.Description,FileName:e.FileName,Title:e.Title,UploadedFileName:e.FileName};this.addCreatePayload(t)}else if(this.isAttachmentFileSpectraDataType(e)){const t={CategoryName:e.CategoryName,ContentType:e.ContentType,DatatypeCode:e.DatatypeCode,Description:e.Description,FileName:e.FileName,FileSize:e.FileSize,Title:e.Title,TrackerId:e.AsyncTrackerId};this.addCreatePayload(t)}}else if(this.isAttachmentLinkDataType(e)){const t={CategoryName:e.CategoryName,DatatypeCode:e.DatatypeCode,Description:e.Description,Title:e.Title,Url:e.Url};this.addCreatePayload(t)}}initialiseCategories(){this.properties.entityName&&this.properties.displayOptions&&this.properties.displayOptions.categoryForCreate===this.DISPLAY_OPTIONS_CATEGORY_FOR_CREATE_SELECT_REQUIRED&&(l.log("Initialising categories data provider based on categories endpoint and entityName provided."),this.populateCategories())}populateCategories(){if(this.properties.entityName){l.log("Creating categories data provider based on categories endpoint and entityName provided.");this.getCategories().then(e=>{if(this.attachmentCategory()&&this.attachmentCategory().data||!this.properties.category)this.attachmentCategory()&&this.attachmentCategory().data||e.length>0&&this.attachmentCategory({data:e[0],key:e[0].CategoryName});else for(let t=0;t<e.length;t++)if(this.properties.category===e[t].CategoryName){this.attachmentCategory({data:e[t],key:e[t].CategoryName});break}if(this.attachmentCategory()&&this.attachmentCategory().data){for(let e=0;e<this.deferredCreateAttachedDocumentIds.length;e++){const t=this.deferredCreateAttachedDocumentIds[e],i=this.findAttachmentDataByAttachedDocumentId(t);i.CategoryName=this.attachmentCategory().data.CategoryName,i.UserName=this.attachmentCategory().data.UserName}this.deferredCreateAttachedDocumentIds.splice(0)}}).catch(e=>{l.warn(e)})}}getCreateCategoryName(){let e=this.properties.category;return this.attachmentCategory()&&this.attachmentCategory().data&&(e=this.attachmentCategory().data.CategoryName),e}updateCreateDefaultCategoryName(e){this.isAttachmentFileUpload(e)||this.isAttachmentFileUploadConsolidated(e)||e.CategoryName||(this.attachmentCategory()&&this.attachmentCategory().data?(e.CategoryName=this.attachmentCategory().data.CategoryName,e.UserName=this.attachmentCategory().data.UserName):(this.deferredCreateAttachedDocumentIds.length<=0&&this.populateCategories(),this.deferredCreateAttachedDocumentIds.push(e.AttachedDocumentId)))}getInlineVisibleActionsForScreenSize(e,t,o,s,a,n){return i.computed(()=>{const i=a(),r=this.getVisibleActions(e,t,o,s,n);if(2!==r.length||i)r.length>2&&i?r.splice(1):r.length>2&&!i&&r.splice(0);else{for(let e=0;e<r.length;e++){r[e].id===this.LIST_ACTION_ID_DOWNLOAD_HIDDEN&&r.splice(e,1)}2===r.length&&r.splice(0)}for(let e=0;e<r.length;e++){const t=r[e];t.id===this.LIST_ACTION_ID_DOWNLOAD&&s&&(t.icon="oj-ux-ico-circular-progress-2 oj-sp-attachments-download-animation")}return r})}getOverflowVisibleActionsForScreenSize(e,t,o,s,a,n){return i.computed(()=>{const i=a(),r=this.getVisibleActions(e,t,o,s,n);if(2!==r.length||i){if(r.length>2&&i)r.splice(0,1);else if(r.length>2&&!i)for(let e=0;e<r.length;e++){r[e].id===this.LIST_ACTION_ID_DOWNLOAD_HIDDEN&&r.splice(e,1)}}else for(let e=0;e<r.length;e++){r[e].id===this.LIST_ACTION_ID_DOWNLOAD_HIDDEN&&r.splice(e,1)}return r})}getHasOverflowMenuForScreenSize(e,t,o,s,a){return i.computed(()=>{const i=s(),n=this.getVisibleActions(e,t,o,!1,a);return n.length>2||2===n.length&&!i})}populateEditAttributes(e){const t=this.openBusyState("Populate attributes for attachment record edit: "+e),i=this.findAttachmentDataByAttachedDocumentId(e);if(this.getCategories().then(e=>{let o=!1;for(let t=0;t<e.length;t++)if(e[t].CategoryName===i.CategoryName){this.populateEditAttributeCategory_withData(e[t]),o=!0;break}o||(i.CategoryName?this.populateEditAttributeCategory_onError(i.CategoryName,i.UserName):e.length>0?this.populateEditAttributeCategory_withData(e[0]):this.populateEditAttributeCategory_onError(null,null)),this.closeBusyState(t)}).catch(e=>{l.warn(e),this.populateEditAttributeCategory_onError(i.CategoryName,i.UserName),this.closeBusyState(t)}),this.editDialogLastUpdatedOn(i.LastUpdateDate),this.editDialogLastUpdatedBy(i.LastUpdatedByUserName),this.editDialogDescription(i.Description),"UploadedFileLength"in i){const e=i;this.editDialogFileSize(this.formatSize(e.UploadedFileLength)),this.editDialogTitle(e.Title)}else if("Url"in i){const e=i;this.editDialogFileSize("0"),this.editDialogTitle(e.Title)}}getUserNameForCategoryName(e,t,i){let o=null;if(e)if(this.categoriesArray()&&this.categoriesArray().length>0)for(let t=0;t<this.categoriesArray().length;t++){const i=this.categoriesArray()[t];if(i.CategoryName===e){o=i.UserName;break}}else{const o=this.openBusyState("Retrieving categories for translated name lookup.");this.getCategories().then(s=>{for(let o=0;o<s.length;o++)if(s[o].CategoryName===e){let e=this.findAttachmentDataByAttachedDocumentId(t);e||(e=this.findAttachmentDisplayByAsyncTrackerId(i)),e&&this.isAttachmentData(e)&&(e.UserName=s[o].UserName,this.replaceAttachmentsData(e,e,!0)),e&&this.isAttachmentFileUpload(e)&&e.AttachmentData&&(e.AttachmentData.UserName=s[o].UserName);break}this.closeBusyState(o)}).catch(e=>{l.warn(e),this.closeBusyState(o)})}return o}getCategories(){let e=Promise.resolve(null);if(this.properties.categories&&this.properties.categories.endpoint)if(this.properties.entityName)if(this.currentEntityNameForCategoriesLOV&&this.currentEntityNameForCategoriesLOV===this.properties.entityName)e=Promise.resolve(this.categoriesArray());else{const t=this.openBusyState("Attachments CCA Retrieving Categories: "+this.properties.entityName);this.currentEntityNameForCategoriesLOV=this.properties.entityName;const i={};this.properties.categories&&this.properties.categories.endpointActionParamName?i[this.properties.categories.endpointActionParamName]=this.CATEGORIES_ACTION_UPDATE:i[this.CATEGORIES_DEFAULT_ACTION_PARAM_NAME]=this.CATEGORIES_ACTION_UPDATE,this.properties.categories&&this.properties.categories.endpointEntityNameParamName?i[this.properties.categories.endpointEntityNameParamName]=this.properties.entityName:i[this.CATEGORIES_DEFAULT_ENTITY_NAME_PARAM_NAME]=this.properties.entityName;const o=this;e=new Promise((function(e,s){y.EndpointUtils.callEndpoint(o.properties.categories.endpoint,i,o.properties.categories.endpointInitConfig,null,null,null,null).then(i=>{if(i.response.ok&&i.body){const t=i.body.items;o.categoriesArray.splice(0);for(let e=0;e<t.length;e++)o.categoriesArray.push(t[e]);e(t)}else o.raiseOverviewErrorMessageFromResponse(null,o.res().errorAttachmentCategories,i.response,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_GET_CATEGORIES),s(m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_GET_CATEGORIES);o.closeBusyState(t)}).catch(e=>{o.raiseOverviewErrorMessageFromError(null,o.res().errorAttachmentCategories,e,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_GET_CATEGORIES),s(e),o.closeBusyState(t)})}))}else l.warn("Details for entity name used by categories endpoint are not defined - no Category selection provided"),e=Promise.reject("Details for entity name used by categories endpoint are not defined - no Category selection provided");else l.warn("Details for categories endpoint are not defined - no Category selection provided"),e=Promise.reject("Details for categories endpoint are not defined - no Category selection provided");return e}populateEditAttributeCategory_onError(e,t){this.editDialogCategoryReadonly(!0),this.editDialogCategoryItem({data:{CategoryName:e,EntityName:null,UserName:t||e},key:e})}populateEditAttributeCategory_withData(e){this.editDialogCategoryReadonly(!1),this.editDialogCategoryItem({data:e,key:e.CategoryName})}initialiseComputedVariables(){this.mdUpContainerSize=i.computed(()=>this.containerSize()>=600),this.lgUpContainerSize=i.computed(()=>this.containerSize()>=1024),this.styleDisplayForAddFileDrop=i.computed(()=>{let e="";return(this.properties.displayOptions&&"header"===this.properties.displayOptions.addRender||this.properties.displayOptions&&"url"===this.properties.displayOptions.addTypes||this.properties.displayOptions&&"hidden"===this.properties.displayOptions.addVisibility)&&(e="none"),e}),this.styleDisplayForAddFileButton=i.computed(()=>{let e="";return this.properties.displayOptions&&this.properties.displayOptions.addRender?("inline"===this.properties.displayOptions.addRender||this.properties.displayOptions&&"url"===this.properties.displayOptions.addTypes||this.properties.displayOptions&&"hidden"===this.properties.displayOptions.addVisibility)&&(e="none"):e="none",e}),this.styleDisplayForAddUrlField=i.computed(()=>{let e="";return(this.properties.displayOptions&&"header"===this.properties.displayOptions.addRender||this.properties.displayOptions&&"file"===this.properties.displayOptions.addTypes||this.properties.displayOptions&&"hidden"===this.properties.displayOptions.addVisibility)&&(e="none"),e}),this.styleDisplayForAddUrlButton=i.computed(()=>{let e="";return this.properties.displayOptions&&this.properties.displayOptions.addRender?("inline"===this.properties.displayOptions.addRender||this.properties.displayOptions&&"file"===this.properties.displayOptions.addTypes||this.properties.displayOptions&&"hidden"===this.properties.displayOptions.addVisibility)&&(e="none"):e="none",e}),this.editFormCols=i.computed(()=>{let e=1;return this.mdUpContainerSize()&&(e=2),e}),this.previewCardMaxWidthStyle=i.computed(()=>{let e=null;return this.filmstripWidth()&&(e=this.filmstripWidth()+"px"),e}),this.attachmentsPreviewDataProvider=i.computed(()=>{const e={mapFields:e=>{const t=e.data,i={data:{DatatypeCode:t.DatatypeCode,altText:null,iconClass:null,itemId:this.getNullSafeStringValue(t.AttachedDocumentId),itemTitle:null,userData:null},metadata:{key:this.getNullSafeStringValue(t.AttachedDocumentId)}};return this.isAttachmentFileDataType(t)&&(i.data={DatatypeCode:t.DatatypeCode,altText:t.Description,iconClass:u.ThumbnailCommon.iconClassForMimeType(this.isAttachmentFileMonolithDataType(t)?t.UploadedFileContentType:this.isAttachmentFileSpectraDataType(t)?t.ContentType:null),itemId:this.getNullSafeStringValue(t.AttachedDocumentId),itemTitle:t.Title,userData:{AttachedDocumentId:t.AttachedDocumentId,AsyncTrackerId:t.AsyncTrackerId}}),i}},t={attribute:"DatatypeCode",op:"$eq",value:this.DATA_TYPE_CODE_FILE},i={dataMapping:e,filterCriterion:a.FilterFactory.getFilter({filterDef:t})};return new r(this.attachmentsDataSource(),i)}),this.attachmentsPreviewPagesDataProvider=i.computed(()=>{const e=i.observableArray(),t=new o(e,{keyAttributes:"PageNum"});if(this.previewSelectedAttachment()&&this.properties.preview&&this.properties.preview.endpoint){const t=this.openBusyState("Attachments CCA retrieving attachments preview pages."),i={limit:3};this.properties.preview&&this.properties.preview.endpointParams&&Object.assign(i,this.properties.preview.endpointParams);const o=y.EndpointUtils.callEndpoint(this.properties.preview?this.properties.preview.endpoint:null,i,this.properties.preview?this.properties.preview.endpointInitConfig:null,this.properties.preview?this.properties.preview.endpointAttachmentParamName:null,this.previewSelectedAttachment(),null,null),s=this;o.then(i=>{if(i.response.ok&&i.body){const t=i.body.items;e.splice(0);for(let i=0;i<t.length;i++)e.push(t[i])}else s.raiseOverviewErrorMessageFromResponse(null,s.res().errorAttachmentPreviewPages,i.response,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_GET_PREVIEW_PAGES);s.closeBusyState(t)}).catch(e=>{s.raiseOverviewErrorMessageFromError(null,s.res().errorAttachmentPreviewPages,e,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_GET_PREVIEW_PAGES),s.closeBusyState(t)})}return new r(t,{dataMapping:{mapFields:e=>{const t=e.data;return{data:{id:""+t.PageNum,imageHeight:t.ImageHeight,imageSource:t.ImageSource,imageWidth:t.ImageWidth,pageNum:t.PageNum},metadata:{key:""+t.PageNum}}}}})})}raiseEndpointErrorMessage(e){this.raiseOverviewErrorMessage(null,e,this.res().errorAttachmentEndpointDetail)}raiseOverviewErrorMessageFromError(e,t,i,o){const s=d.applyParameters(this.res().errorAttachmentOverviewCodeDetail,{code:o});l.error(i.name+" ::: "+i.message),this.raiseOverviewErrorMessage(e,t,s)}raiseOverviewErrorMessageFromResponse(e,t,i,o){const s=d.applyParameters(this.res().errorAttachmentOverviewCodeDetail,{code:o});l.error(i.status+" ::: "+i.statusText),this.raiseOverviewErrorMessage(e,t,s)}raiseOverviewErrorMessageFromCode(e,t,i){const o=d.applyParameters(this.res().errorAttachmentOverviewCodeDetail,{code:i});this.raiseOverviewErrorMessage(e,t,o)}raiseOverviewErrorMessage(e,t,i){const o={UploadIdentifier:e,detail:i,severity:"error",summary:t};this.overviewErrorMessages.push(o)}findAttachmentDataByAttachedDocumentId(e){let t=null;const i=this.attachmentsData();for(let o=0;o<i.length;o++){const s=i[o];if(s&&s.AttachedDocumentId===e&&this.isAttachmentData(s)){t=s;break}}return t}findAttachmentDisplayByAsyncTrackerId(e){let t=null;const i=this.attachmentsData();for(let o=0;o<i.length;o++){const s=i[o];if(s&&(this.isAttachmentData(s)||this.isAttachmentFileUpload(s))&&s.AsyncTrackerId===e){t=s;break}if(s&&this.isAttachmentFileUploadConsolidated(s)){if(this.findAttachmentFileUploadByAsyncTrackerIdInData(s,e)){t=s;break}}}return t}findAttachmentFileUploadByAsyncTrackerIdInData(e,t){let i=null;const o=e.UploadFiles;for(let e=0;e<o.length;e++){const s=o[e];if(s&&s.AsyncTrackerId===t){i=s;break}}return i}getListKeyValueFromEvent(e){let t=null;const i=e.detail.originalEvent.target,o=document.getElementById("attachmentsList_"+this.uid).getContextByNode(i);return null!=o&&(t=o.key),t}getTableKeyValueFromContext(e){let t=null;return e&&e.cell&&e.cell.item&&e.cell.item.data&&(t=e.cell.item.data.AttachedDocumentId),t}getActionAriaLabelName(e,t,i){let o=i;return e===this.DATA_TYPE_CODE_WEB_PAGE&&(o=t),o}executeFileTitleClick(e,t){e.preventDefault(),l.log("handleFileTitleClick"),this.executeListAction(this.LIST_ACTION_ID_PREVIEW,t)}executeFileTitleContextMenu(e,t,i){l.log("handleFileTitleContextMenu"),this.currentSelectedAttachedDocumentId=i;const o=e.shiftKey;if(!!this.properties.displayOptions&&this.properties.displayOptions.displayNameAction===this.DISPLAY_NAME_ACTION_TAB&&!o){e.preventDefault();const i=document.getElementById(t),o={launcher:e.target};i&&i.open(e,o)}}executeFileTitleContextAction(e){l.log("handleFileTitleContextAction");const t=e;if(l.log("handleFileTitleContextAction: "+t),this.ACTION_ID_NEW_TAB===t){const e=this.findAttachmentDataByAttachedDocumentId(this.currentSelectedAttachedDocumentId),i=m.AttachmentManager.getLinkKey(e),o={ActionId:t,AttachedDocumentId:this.currentSelectedAttachedDocumentId,AttachmentIdentifier:i,AttachmentRecord:e};c.EventDispatcher.dispatch(c.EventDispatcher.ATTACHMENT_ACTION_EVENT_NAME,this.composite,o)}}executeListAction(e,t){if(e===this.LIST_ACTION_ID_DOWNLOAD){const e=this.findAttachmentDataByAttachedDocumentId(t);e&&this.isAttachmentFileDataType(e)&&e.DownloadProgress||this.downloadAttachment(t)}else if(e===this.LIST_ACTION_ID_EDIT)this.populateEditAttributes(t),document.getElementById("attachmentsListEditDialog_"+this.uid).open();else if(e===this.LIST_ACTION_ID_REMOVE)document.getElementById("attachmentsRemoveDialog_"+this.uid).open();else if(e===this.LIST_ACTION_ID_PREVIEW){const e=this.findAttachmentDataByAttachedDocumentId(t);this.previewSelectedAttachment(this.getNullSafeStringValue(e.AttachedDocumentId)),document.getElementById("attachmentsPreviewDialog_"+this.uid).open()}else this.properties.customRecordAction&&e===this.CUSTOM_ACTION_PREFIX+this.properties.customRecordAction.id&&this.customAttachmentAction(t)}getAttachmentsLinkInput(e){const t=document.getElementById(e);let i=null;return t&&this.isAttachmentsLinkInput(t)&&(i=t),i}executeUploadLink(e){let t=Promise.resolve(!0);if(!this.attachmentsLinkCreateProcessing){const i=this;t=new Promise((t,o)=>{i.attachmentsLinkCreateProcessing?t(!0):e.validate().then(e=>{i.attachmentsLinkCreateProcessing?t(!0):"valid"===e&&i.attachmentsLinkInput()&&i.attachmentsLinkInput().length>0?(i.attachmentsLinkCreateProcessing=!0,i.busyStateUploadLink=i.openBusyState("Attachments CCA uploading attachment link."),m.AttachmentManager.uploadLink(i.attachmentsLinkInput(),i.getCreateCategoryName(),i.properties.create?i.properties.create.endpoint:null,i.properties.create?i.properties.create.endpointParams:null,i.properties.create?i.properties.create.endpointInitConfig:null,i.properties.createMode?i.properties.createMode:m.AttachmentManager.CREATE_TYPE_BACKGROUND,i),i.writebackCreatePayload(),t(!0)):t(!1)},e=>{l.warn("Attachments link creation failure"),l.warn(e),t(!1)})})}return t}isAttachmentData(e){return void 0!==e.DatatypeCode}isAttachmentFileDataType(e){return e.DatatypeCode===this.DATA_TYPE_CODE_FILE}isAttachmentLinkDataType(e){return e.DatatypeCode===this.DATA_TYPE_CODE_WEB_PAGE}isAttachmentFileMonolithDataType(e){return e.DatatypeCode===this.DATA_TYPE_CODE_FILE&&void 0!==e.UploadedFileContentType}isAttachmentFileSpectraDataType(e){return e.DatatypeCode===this.DATA_TYPE_CODE_FILE&&void 0!==e.ContentType}isAttachmentPreviewFileUrlDataType(e){return void 0!==e.PreviewFileUrl}isAttachmentFileUpload(e){return e.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD||e.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_ERROR||e.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_COMPLETE}isAttachmentFileUploadConsolidated(e){return e.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED||e.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_ERROR||e.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE}isAttachmentDeferred(e){const t=this.findAttachmentDataByAttachedDocumentId(e);return this.isAttachmentDeferredFromData(t)}isFilmstripDisplayType(){return this.properties.displayOptions&&this.properties.displayOptions.type===this.DISPLAY_OPTIONS_TYPE_FILMSTRIP}isTableDisplayType(){return this.properties.displayOptions&&this.properties.displayOptions.type===this.DISPLAY_OPTIONS_TYPE_TABLE}isAttachmentDeferredFromData(e){let t=!0;return m.AttachmentManager.getLinkKey(e)&&(t=!1),t}isAttachmentsLinkInput(e){return void 0!==e.validate}isEndpointDefined(e){return e&&e.endpoint&&e.endpoint.length>0}isAttachmentRowActions(e){return void 0!==e.RowProperty_RemoveEnabled||void 0!==e.RowProperty_RemoveVisibility||void 0!==e.RowProperty_UpdateEnabled||void 0!==e.RowProperty_UpdateVisibility||void 0!==e.RowProperty_DownloadEnabled||void 0!==e.RowProperty_DownloadVisibility||void 0!==e.RowProperty_PreviewEnabled||void 0!==e.RowProperty_PreviewVisibility||void 0!==e.RowProperty_CustomActionEnabled||void 0!==e.RowProperty_CustomActionVisibility}downloadAttachment(e){const t=this.openBusyState("Attachments CCA Downloading Attachment: "+e),i=this.findAttachmentDataByAttachedDocumentId(e);let o=null;if(this.isAttachmentDeferredFromData(i))this.isEndpointDefined(this.properties.backgroundDownload)?o=m.AttachmentManager.downloadBlob(i.AsyncTrackerId,this.properties.backgroundDownload?this.properties.backgroundDownload.endpoint:null,{},this.properties.backgroundDownload?this.properties.backgroundDownload.endpointInitConfig:null,this.properties.backgroundDownload&&this.properties.backgroundDownload.endpointTrackerParamName?this.properties.backgroundDownload.endpointTrackerParamName:this.BACKGROUND_DOWNLOAD_TRACKER_PARAM_NAME_DEFAULT,this):(console.log("***** - ENDPOINT ERROR - "),console.log(this.properties.backgroundDownload),this.raiseEndpointErrorMessage(this.res().errorAttachmentDownload),this.closeBusyState(t));else if(this.isEndpointDefined(this.properties.download)){const t=this.isAttachmentFileDataType(i)&&i.DownloadInfo&&this.properties.downloadService&&this.properties.downloadService.endpoint,s=this.isAttachmentFileDataType(i)&&i.AsyncTrackerId&&this.properties.downloadService&&this.properties.downloadService.endpoint;if(t){let t={};try{if(this.isAttachmentFileDataType(i)){const e=i.DownloadInfo;t=JSON.parse(e)}}catch(t){l.warn("Unable to parse DownloadInfo for attachment record: "+e),l.warn(t)}const s=this.properties.downloadService&&this.properties.downloadService.endpointParams?this.properties.downloadService.endpointParams:{};Object.assign(s,t),o=m.AttachmentManager.downloadBlob(i.AttachedDocumentId,this.properties.downloadService?this.properties.downloadService.endpoint:null,s,this.properties.downloadService?this.properties.downloadService.endpointInitConfig:null,this.properties.downloadService&&this.properties.downloadService.endpointAttachmentParamName?this.properties.downloadService.endpointAttachmentParamName:this.BACKGROUND_DOWNLOAD_ATTACHMENT_PARAM_NAME_DEFAULT,this)}else if(s)o=m.AttachmentManager.downloadBlob(i.AsyncTrackerId,this.properties.backgroundDownload?this.properties.backgroundDownload.endpoint:null,{},this.properties.backgroundDownload?this.properties.backgroundDownload.endpointInitConfig:null,this.properties.backgroundDownload&&this.properties.backgroundDownload.endpointTrackerParamName?this.properties.backgroundDownload.endpointTrackerParamName:this.BACKGROUND_DOWNLOAD_TRACKER_PARAM_NAME_DEFAULT,this);else{const e=m.AttachmentManager.getLinkKey(i);o=m.AttachmentManager.downloadBlob(e,this.properties.download?this.properties.download.endpoint:null,this.properties.download?this.properties.download.endpointParams:null,this.properties.download?this.properties.download.endpointInitConfig:null,this.properties.download?this.properties.download.endpointAttachmentParamName:null,this)}}else this.raiseEndpointErrorMessage(this.res().errorAttachmentDownload),this.closeBusyState(t);if(o){const s=this.composite.querySelector(`[id*='${e}'] .oj-ux-ico-download`);this.updateDownloadProgressIndicator(e,!0,s),o.then(o=>{if(o){const e="FileName"in i?i.FileName:"",t=d.applyParameters(this.res().attachmentAnnounceDownload,{displayName:e});this.currentAttachmentsOperationMessage(t);const s=document.createElement("a");document.body.appendChild(s);const a=window.URL.createObjectURL(o);s.href=a,s.download=e,s.setAttribute("aria-label",e),s.click()}else this.raiseOverviewErrorMessage(null,this.res().errorAttachmentDownload,this.res().errorAttachmentDownloadNoContent);this.updateDownloadProgressIndicator(e,!1,s),this.closeBusyState(t)}).catch(i=>{this.raiseOverviewErrorMessageFromError(null,this.res().errorAttachmentDownload,i,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_DOWNLOAD),this.updateDownloadProgressIndicator(e,!1,s),this.closeBusyState(t)})}}updateDownloadProgressIndicator(e,t,i){const o=this.findAttachmentDataByAttachedDocumentId(e);o&&this.isAttachmentFileDataType(o)&&i&&(t?(i.classList.remove("oj-ux-ico-download"),i.classList.add("oj-ux-ico-circular-progress-2","oj-sp-attachments-download-animation")):(i.classList.remove("oj-ux-ico-circular-progress-2","oj-sp-attachments-download-animation"),i.classList.add("oj-ux-ico-download")),o.DownloadProgress=t)}downloadFilmstripImageSource(e,t){let i,o=null;if(this.isAttachmentPreviewFileUrlDataType(e)&&e.PreviewFileUrl());else if(this.isAttachmentDeferredFromData(e))this.isEndpointDefined(this.properties.backgroundDownloadWebImage)?(o=m.AttachmentManager.downloadBlob(e.AsyncTrackerId,this.properties.backgroundDownloadWebImage?this.properties.backgroundDownloadWebImage.endpoint:null,null,this.properties.backgroundDownloadWebImage?this.properties.backgroundDownloadWebImage.endpointInitConfig:null,this.properties.backgroundDownloadWebImage?this.properties.backgroundDownloadWebImage.endpointTrackerParamName:null,this),i=this.FILMSTRIP_IMAGE_BASE64):(l.log("Endpoints not defined in CCA for background download web image attachment - attempting to use background download endpoint property"),this.isEndpointDefined(this.properties.backgroundDownload)?(o=m.AttachmentManager.downloadBlob(e.AsyncTrackerId,this.properties.backgroundDownload?this.properties.backgroundDownload.endpoint:null,null,this.properties.backgroundDownload?this.properties.backgroundDownload.endpointInitConfig:null,this.properties.backgroundDownload?this.properties.backgroundDownload.endpointTrackerParamName:null,this),i=this.FILMSTRIP_IMAGE_BINARY):l.log("Endpoints not defined in CCA for background download attachment - Unable to provide filmstrip image. Please provide background download web image endpoint property"));else{const t=m.AttachmentManager.getLinkKey(e);this.isEndpointDefined(this.properties.downloadWebImage)?(o=m.AttachmentManager.downloadBlob(t,this.properties.downloadWebImage?this.properties.downloadWebImage.endpoint:null,this.properties.downloadWebImage?this.properties.downloadWebImage.endpointParams:null,this.properties.downloadWebImage?this.properties.downloadWebImage.endpointInitConfig:null,this.properties.downloadWebImage?this.properties.downloadWebImage.endpointAttachmentParamName:null,this),i=this.FILMSTRIP_IMAGE_BASE64):(l.log("Endpoints not defined in CCA for download web image attachment - Unable to provide filmstrip image. Please provide download web image endpoint property"),this.isEndpointDefined(this.properties.download)?(o=m.AttachmentManager.downloadBlob(t,this.properties.download?this.properties.download.endpoint:null,this.properties.download?this.properties.download.endpointParams:null,this.properties.download?this.properties.download.endpointInitConfig:null,this.properties.download?this.properties.download.endpointAttachmentParamName:null,this),i=this.FILMSTRIP_IMAGE_BINARY):l.log("Endpoints not defined in CCA for download attachment - Unable to provide filmstrip image. Please provide download web image endpoint property"))}o&&o.then(o=>{if(o&&o.size<=0)l.log("Download attachment is empty - Unable to provide filmstrip image. No data downloaded"),this.downloadFilmstripImageSourceDelay(e,t+1);else if(o)if(i===this.FILMSTRIP_IMAGE_BINARY){const t=window.URL.createObjectURL(o);e.PreviewFileUrl(t)}else{o.text().then(t=>{e.PreviewFileUrl(t)}).catch(i=>{l.log("Error in download attachment conversion to string - Unable to provide filmstrip image. Data downloaded error conversion to string."),l.log(i),this.downloadFilmstripImageSourceDelay(e,t+1)})}else l.log("Unable to download attachment - Unable to provide filmstrip image. No data downloaded"),this.downloadFilmstripImageSourceDelay(e,t+1)}).catch(i=>{l.log("Error in download attachment - Unable to provide filmstrip image. No data downloaded"),l.log(i),this.downloadFilmstripImageSourceDelay(e,t+1)})}downloadFilmstripImageSourceDelay(e,t){if(t<=this.MAXIMUM_FILMSTRIP_IMAGE_POLL_COUNT){let i=1e3;1===t?i=1e3:2===t?i=1e4:3===t&&(i=6e4);this.delay(i).then(i=>{this.downloadFilmstripImageSource(e,t)}).catch(e=>{l.log("Error in download delay - Unable to provide filmstrip image. No data downloaded"),l.log(e)})}else l.log("Exceeded maximum poll count for filmstrip image - Unable to provide filmstrip image.")}editAttachmentInDialog(e){const t=this.openBusyState("Attachments CCA Updating Attachment: "+e),i=this.findAttachmentDataByAttachedDocumentId(e);if(this.isAttachmentDeferredFromData(i)){this.updatePayloadObject(i,this.editDialogTitle(),this.editDialogCategoryItem().data.CategoryName,this.editDialogDescription()),i.Title=this.editDialogTitle(),i.CategoryName=this.editDialogCategoryItem().data.CategoryName,i.UserName=this.editDialogCategoryItem().data.UserName,i.Description=this.editDialogDescription(),this.replaceAttachmentsData(i,i,!0);const e=d.applyParameters(this.res().attachmentAnnounceEdit,{displayName:i.Title});this.currentAttachmentsOperationMessage(e),this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_UPDATE),this.closeBusyState(t)}else if(this.isEndpointDefined(this.properties.edit)){const o=m.AttachmentManager.getLinkKey(i);m.AttachmentManager.editDetails(o,this.properties.createMode,this.editDialogTitle(),this.editDialogCategoryItem().data.CategoryName,this.editDialogDescription(),this.properties.edit?this.properties.edit.endpoint:null,this.properties.edit?this.properties.edit.endpointParams:null,this.properties.edit?this.properties.edit.endpointInitConfig:null,this.properties.edit?this.properties.edit.endpointAttachmentParamName:null).then(i=>{if(i.response.ok){const t=this.findAttachmentDataByAttachedDocumentId(e),o=i.body;o.UserName=this.editDialogCategoryItem().data.UserName,this.replaceAttachmentsData(t,o,!0);const s=d.applyParameters(this.res().attachmentAnnounceEdit,{displayName:o.Title});this.currentAttachmentsOperationMessage(s),this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_UPDATE)}else this.raiseOverviewErrorMessageFromResponse(null,this.res().errorAttachmentUpdate,i.response,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_UPDATE);this.closeBusyState(t)}).catch(e=>{this.raiseOverviewErrorMessageFromError(null,this.res().errorAttachmentUpdate,e,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_UPDATE),this.closeBusyState(t)})}else{if(this.properties.createMode===m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE){i.Title=this.editDialogTitle(),i.CategoryName=this.editDialogCategoryItem().data.CategoryName,i.UserName=this.editDialogCategoryItem().data.UserName,i.Description=this.editDialogDescription(),this.replaceAttachmentsData(i,i,!0);const e=m.AttachmentManager.getLinkKey(i),t={CategoryName:this.editDialogCategoryItem().data.CategoryName,Description:this.editDialogDescription(),Title:this.editDialogTitle()};this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_UPDATE),this.addUpdateDeferredOperation(e,t)}else this.raiseEndpointErrorMessage(this.res().errorAttachmentUpdate);const e=d.applyParameters(this.res().attachmentAnnounceEdit,{displayName:i.Title});this.currentAttachmentsOperationMessage(e),this.closeBusyState(t)}}removeAttachment(e){const t=this.openBusyState("Attachments CCA Removing Attachment: "+e),i=this.findAttachmentDataByAttachedDocumentId(e);if(this.isAttachmentDeferredFromData(i)){this.removePayloadObject(i),this.removeAttachmentsData(i);const e=d.applyParameters(this.res().attachmentAnnounceDelete,{displayName:i.Title});this.currentAttachmentsOperationMessage(e),this.closeBusyState(t),this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_DELETE)}else if(this.isEndpointDefined(this.properties.delete)){const o=m.AttachmentManager.getLinkKey(i);m.AttachmentManager.deleteFile(o,this.properties.delete?this.properties.delete.endpoint:null,this.properties.delete?this.properties.delete.endpointParams:null,this.properties.delete?this.properties.delete.endpointInitConfig:null,this.properties.delete?this.properties.delete.endpointAttachmentParamName:null).then(o=>{if(o.response.ok){const t=this.findAttachmentDataByAttachedDocumentId(e);this.removeAttachmentsData(t);const o=d.applyParameters(this.res().attachmentAnnounceDelete,{displayName:i.Title});this.currentAttachmentsOperationMessage(o),this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_DELETE)}else this.raiseOverviewErrorMessageFromResponse(null,this.res().errorAttachmentRemove,o.response,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_FAIL_DELETE);this.closeBusyState(t)}).catch(e=>{this.raiseOverviewErrorMessageFromError(null,this.res().errorAttachmentRemove,e,m.AttachmentManager.ATTACHMENT_ERROR_OPERATION_ERROR_DELETE),this.closeBusyState(t)})}else{if(this.properties.createMode===m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||this.properties.createMode===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE){this.removeAttachmentsData(i);const e=m.AttachmentManager.getLinkKey(i);this.addDeleteDeferredOperation(e);const t=d.applyParameters(this.res().attachmentAnnounceDelete,{displayName:i.Title});this.currentAttachmentsOperationMessage(t),this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_DELETE)}else this.raiseEndpointErrorMessage(this.res().errorAttachmentRemove);this.closeBusyState(t)}}customAttachmentAction(e){const t=this.findAttachmentDataByAttachedDocumentId(e),i=m.AttachmentManager.getLinkKey(t),o={ActionId:this.properties.customRecordAction.id,AttachedDocumentId:e,AttachmentIdentifier:i,AttachmentRecord:t};c.EventDispatcher.dispatch(c.EventDispatcher.ATTACHMENT_ACTION_EVENT_NAME,this.composite,o)}fireAttachmentOperationCompletionEvent(e){const t={action:e,displayCount:this.attachmentsData().length};c.EventDispatcher.dispatch(c.EventDispatcher.ATTACHMENT_COMPLETION_ACTION_EVENT_NAME,this.composite,t)}updateAttachmentsProgress(e,t,i,o,s,a,n,r){const l=this.findAttachmentDisplayByAsyncTrackerId(t);if(this.fileUploadSummaryProgressFileCount>0&&100===a&&(this.fileUploadSummaryProgressFileComplete++,this.updateAttachmentsSummaryProgress()),l&&this.isAttachmentFileUpload(l))l.FileProgress=a,this.replaceAttachmentsData(l,l,!1),n&&100===a&&this.updateAttachmentsUploadComplete(l,e,t,i,o,s,r);else if(l&&this.isAttachmentFileUploadConsolidated(l)){const d=this.findAttachmentFileUploadByAsyncTrackerIdInData(l,t);d.FileProgress=a,n&&100===a&&this.updateAttachmmentsUploadConsolidatedComplete(l,d,e,t,i,o,s,r)}}updateAttachmentsSummaryProgress(){const e=this.fileUploadSummaryProgressFileComplete/this.fileUploadSummaryProgressFileCount*100;if(this.fileUploadSummaryProgress(e),this.fileUploadSummaryProgressFileComplete===this.fileUploadSummaryProgressFileCount){this.fileUploadSummaryProgressMessage(this.res().overallUploadComplete);this.delay(100).then(()=>{this.fileUploadSummaryProgress(-1),this.fileUploadSummaryProgressMessage(null),this.fileUploadSummaryProgressFileCount=0,this.fileUploadSummaryProgressFileComplete=0}).catch(e=>{this.fileUploadSummaryProgress(-1),this.fileUploadSummaryProgressFileCount=0,this.fileUploadSummaryProgressFileComplete=0,console.log("Error awaiting progress summary completion delay"),console.log(e)})}else{const e=d.applyParameters(this.res().overallUploadProgress,{count:this.fileUploadSummaryProgressFileCount});this.fileUploadSummaryProgressMessage(e)}}generateUpdatedAttachmentsData(e,t,i,o,s,a){let n=null;return e===m.AttachmentManager.CREATE_TYPE_BACKGROUND||e===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND||e===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND?n=this.updateAttachmentsDataForBackground(t,i,o):e===m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED||e===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED||e===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED?n=this.updateAttachmentsDataForBackgroundDeferred(e,t,i,o,s,a):e===m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE||e===m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||e===m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE?n=this.updateAttachmentsDataForBackgroundDeferredComplete(e,t,i,o,s,a):l.error("Unexpected event type for uploadComplete event during background upload."),n}async updateAttachmentsUploadComplete(e,t,i,o,s,a,n){const r=this.generateUpdatedAttachmentsData(t,i,o,s,a,n);e.AttachmentData=r,await this.delay(150),e.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_COMPLETE,this.replaceAttachmentsData(e,e,!1);const l=d.applyParameters(this.res().attachmentAnnounceUpload,{filename:s.name});this.currentAttachmentsOperationMessage(l),t!==m.AttachmentManager.CREATE_TYPE_BACKGROUND&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND&&t!==m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED&&t!==m.AttachmentManager.CREATE_TYPE_BACKGROUND_DEFERRED_COMPLETE&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND_DEFERRED_COMPLETE&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED&&t!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND_DEFERRED_COMPLETE||this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_CREATE),this.closeBusyState(e.BusyState),await this.delay(100);let c=!1;const p=this.attachmentsData(),u=[],h=[];for(let e=0;e<p.length;e++){const t=p[e];if(t&&t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD){c=!0;break}t&&t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_COMPLETE&&this.isAttachmentFileUpload(t)?u.push(t):t&&t.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_ERROR&&this.isAttachmentFileUpload(t)&&h.push(t)}if(!c){for(let e=0;e<u.length;e++)this.replaceAttachmentsData(u[e],u[e].AttachmentData,!1);for(let e=0;e<h.length;e++)this.removeAttachmentsData(h[e]);this.writebackViewData(),this.closeBusyState(this.busyStateOverallUploadFile)}}async updateAttachmmentsUploadConsolidatedComplete(e,t,i,o,s,a,n,r){const l=this.generateUpdatedAttachmentsData(i,o,s,a,n,r);t.AttachmentData=l,t.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_COMPLETE;const c=d.applyParameters(this.res().attachmentAnnounceUpload,{filename:l.Title});this.currentAttachmentsOperationMessage(c),i!==m.AttachmentManager.CREATE_TYPE_BACKGROUND&&i!==m.AttachmentManager.CREATE_TYPE_SPECTRA_HYBRID_BACKGROUND&&i!==m.AttachmentManager.CREATE_TYPE_SPECTRA_BACKGROUND||this.fireAttachmentOperationCompletionEvent(this.COMPLETED_EVENT_ACTION_CREATE),this.closeBusyState(t.BusyState),await this.delay(150);let p=!1;for(let t=0;t<e.UploadFiles.length;t++){if(e.UploadFiles[t].DatatypeCode===this.DATA_TYPE_CODE_UPLOAD){p=!0;break}}p||e.DatatypeCode!==this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED||(e.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE,this.replaceAttachmentsData(e,e,!1),await this.delay(100)),p||e.DatatypeCode!==this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED&&e.DatatypeCode!==this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE&&e.DatatypeCode!==this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_ERROR||(this.updateAttachmentsUploadConsolidatedCompleteError(e),this.closeBusyState(this.busyStateOverallUploadFile))}updateAttachmentsUploadConsolidatedCompleteError(e){const t=[];for(let i=0;i<e.UploadFiles.length;i++){const o=e.UploadFiles[i];o.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_COMPLETE?t.push(o.AttachmentData):o.DatatypeCode===this.DATA_TYPE_CODE_UPLOAD_ERROR&&l.log("Consolidated entry was in upload error state: "+o.AsyncTrackerId)}this.addAttachmentsDataArray(t),e.DatatypeCode=this.DATA_TYPE_CODE_UPLOAD_CONSOLIDATED_COMPLETE_PROCESSED,this.removeAttachmentsData(e)}async delay(e){return new Promise(t=>{setTimeout(t,e)})}updateAttachmentsDataForBackground(e,t,i){return t&&(this.isAttachmentFileMonolithDataType(t)?t.UploadedFileLength=i.size:this.isAttachmentFileSpectraDataType(t)&&(t.FileSize=i.size),t.CategoryName&&(t.UserName||(t.UserName=this.getUserNameForCategoryName(t.CategoryName,t.AttachedDocumentId,t.AsyncTrackerId)))),t}updateAttachmentsDataForBackgroundDeferred(e,t,i,o,s,a){return{AsyncTrackerId:t,AttachedDocumentId:e+"_"+t,CategoryName:a,DatatypeCode:"FILE",FileName:o.name,LastUpdateDate:(new Date).toISOString(),LastUpdatedByUserName:s,RestFrameworkVersion:null,Title:o.name,UploadedFileContentType:m.AttachmentManager.mimeTypeCalculator(o.name,o.type),UploadedFileLength:o.size,UserName:this.getUserNameForCategoryName(a,e+"_"+t,t)}}updateAttachmentsDataForBackgroundDeferredComplete(e,t,i,o,s,a){return this.createAndAddPayloadObject(e,t,o.name,o.size,m.AttachmentManager.mimeTypeCalculator(o.name,o.type),a),this.writebackCreatePayload(),this.updateAttachmentsDataForBackgroundDeferred(e,t,i,o,s,a)}addAttachmentsDataArray(e){this.refreshFilmstripIfDisplayedToFirstItem();for(let t=0;t<e.length;t++)this.attachmentsData.unshift(e[t]);this.refreshDisplay(),this.refreshFilmstripPagingControlIfDisplayed(),this.writebackViewData()}addAttachmentsData(e){this.isAttachmentData(e)&&this.updateCreateDefaultCategoryName(e),this.refreshFilmstripIfDisplayedToFirstItem(),this.attachmentsData.unshift(e),this.refreshDisplay(),this.refreshFilmstripPagingControlIfDisplayed(),this.writebackViewData()}replaceAttachmentsData(e,t,i){if(this.isAttachmentData(t)&&this.updateCreateDefaultCategoryName(t),this.isFilmstripDisplayType()){let i=[];try{i=this.attachmentsData.removeAll()}catch(e){l.log("Replacing attachments data message - processing continuing - ",e)}for(let o=0;o<i.length;o++)if(i[o].AttachedDocumentId===e.AttachedDocumentId){i[o]=t;break}this.attachmentsData(i)}else this.attachmentsData.replace(e,t);this.refreshDisplay(),this.refreshFilmstripPagingControlIfDisplayed(),i&&this.writebackViewData()}removeAttachmentsData(e){if(this.isFilmstripDisplayType()){let t=[];try{t=this.attachmentsData.removeAll()}catch(e){l.log("Removing attachment data message - processing continuing - ",e)}for(let i=0;i<t.length;i++)if(t[i].AttachedDocumentId===e.AttachedDocumentId){t.splice(i,1);break}this.attachmentsData(t)}else this.attachmentsData.remove(e);this.refreshDisplay(),this.refreshFilmstripPagingControlIfDisplayed(),this.writebackViewData()}refreshFilmstripIfDisplayedToFirstItem(){if(this.isFilmstripDisplayType()){const e=document.getElementById("attachmentsFilmstrip_"+this.uid);if(e){const t=e.getProperty("currentItem"),i=!t||0!==t.index;if(t&&(t.index=0),i)try{s.getContext(e).getBusyContext().whenReady().then(()=>{e.refresh()}).catch(e=>{console.error("Error occurred during busy context refresh of filmstrip component to first item"),console.error(e)})}catch(e){console.error("Error occurred during refresh of filmstrip component to first item"),console.error(e)}}}}refreshFilmstripIfDisplayed(){this.isFilmstripDisplayType()&&this.refreshDisplay()}refreshFilmstripPagingControlIfDisplayed(){this.isFilmstripDisplayType()&&this.filmstripPagingModel(null)}refreshTableIfDisplayed(){this.isTableDisplayType()&&this.refreshDisplay()}refreshDisplay(){this.refreshIfDisplayed(!1)}refreshIfDisplayed(e){if(this.isFilmstripDisplayType()){const e=document.getElementById("attachmentsFilmstrip_"+this.uid);if(e){const t=e.getProperty("currentItem"),i=this.attachmentsData().length-1;t&&t.index>i&&i>=0&&(t.index=i);try{e.refresh()}catch(t){console.warn("Error occurred during refresh of filmstrip component"),console.warn(t);try{const t=s.getContext(e).getBusyContext();t.whenReady().then(()=>{e.refresh()}).catch(e=>{console.warn("Error occurred during busy context refresh of filmstrip component promise"),console.warn(e)})}catch(e){console.warn("Error occurred during busy context refresh of filmstrip component"),console.warn(e)}}}}else if(this.isTableDisplayType()){const e=document.getElementById("attachmentsTable_"+this.uid);if(e){s.getContext(e).getBusyContext().whenReady().then(()=>{e.refresh()},e=>{l.warn("refreshIfDisplayed tableBusyContext rejection"),l.warn(e)})}}else if(e){document.getElementById("attachmentsList_"+this.uid)}}setupMutationObserver(){this.teardownMutationObserver();try{this.mutationObserver=new MutationObserver(e=>{e.forEach(e=>{const t=this.composite.getBoundingClientRect().width,i=this.getFilmstripCurrentWidth();!this.containerSize()&&t&&t>0&&this.containerSize(t),t===this.containerSize()&&i===this.filmstripWidth()||this.mutationObserverRateLimiter||(this.mutationObserverRateLimiter=this.delay(200),this.mutationObserverRateLimiter.then(()=>{const e=this.composite.getBoundingClientRect().width;e!==this.containerSize()&&this.containerSize(e);const t=this.getFilmstripCurrentWidth();t!==this.filmstripWidth()&&this.filmstripWidth(t),this.mutationObserverRateLimiter=null}).catch(e=>{this.mutationObserverRateLimiter=null,l.error("Cannot process mutation observer due to: "+e.name+": "+e.message)}))})}),this.mutationObserver.observe(this.composite,{attributes:!0,childList:!1,characterData:!1,subtree:!0})}catch(e){l.error("Cannot setup mutation observer due to: "+e.name+": "+e.message)}}getFilmstripCurrentWidth(){let e=0;const t=document.getElementById("attachmentsFilmstrip_"+this.uid);return t&&(e=t.getBoundingClientRect().width),e}teardownMutationObserver(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}setupResizeListener(){this.teardownResizeListener();try{this.resizeListener=e=>{this.containerSize(document.getElementById(this.composite.id).getBoundingClientRect().width),this.calculateFilmstripWidth()},window.addEventListener("resize",this.resizeListener)}catch(e){l.error("Cannot setup resize listener due to: "+e.name+": "+e.message)}}calculateFilmstripWidth(){const e=document.getElementById("attachmentsFilmstrip_"+this.uid);e&&this.filmstripWidth(e.getBoundingClientRect().width)}teardownResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}getNullSafeStringValue(e){let t=null;return e&&(t=String(e)),t}openBusyState(e){const t={description:e};return s.getContext(this.composite).getBusyContext().addBusyState(t)}closeBusyState(e){try{e&&e()}catch(e){l.info("Attempting to close an already closed busy state.")}}resetWritebackProperties(){this.createPayload.splice(0),this.deferredOperationPayload.splice(0),this.deferredOperationCount=0,this.writebackCreatePayload(),this.writebackDeferredOperationPayload()}createAndAddPayloadObject(e,t,i,o,s,a){const n=m.AttachmentManager.createPayloadObject(e,a,t,i,o,s);this.addCreatePayload(n)}addCreatePayload(e){this.createPayload.push(e)}updatePayloadObject(e,t,i,o){for(let s=0;s<this.createPayload.length;s++){const a=this.createPayload[s];this.isPayloadMatchingData(e,a)&&(a.Title=t,a.CategoryName=i,a.Description=o)}this.writebackCreatePayload()}removePayloadObject(e){for(let t=0;t<this.createPayload.length;t++){const i=this.createPayload[t];this.isPayloadMatchingData(e,i)&&this.createPayload.splice(t,1)}this.writebackCreatePayload()}isPayloadMatchingData(e,t){let i=!1;return e.DatatypeCode===t.DatatypeCode&&(e.Title&&t.Title&&e.Title===t.Title||!e.Title||!t.Title)&&(e.DatatypeCode!==this.DATA_TYPE_CODE_FILE||t.TrackerId!==e.AsyncTrackerId&&t.AsyncTrackerId!==e.AsyncTrackerId?e.DatatypeCode===this.DATA_TYPE_CODE_WEB_PAGE&&t.DatatypeCode===this.DATA_TYPE_CODE_WEB_PAGE&&t.Url===e.Url&&(i=!0):i=!0),i}writebackCreatePayload(){const e=[];for(let t=0;t<this.createPayload.length;t++){const i=Object.assign({},this.createPayload[t]);e.push(i)}this.properties.createPayload=e,this.writebackDeferredOperationPayload()}addUpdateDeferredOperation(e,t){const i={id:this.getNextDeferredOperationId(),operation:this.DEFERRED_OPERATION_UPDATE,path:e,payload:t};this.addDeferredOperationPayload(i),this.writebackDeferredOperationPayload()}addDeleteDeferredOperation(e){const t={id:this.getNextDeferredOperationId(),operation:this.DEFERRED_OPERATION_DELETE,path:e,payload:{}};this.addDeferredOperationPayload(t),this.writebackDeferredOperationPayload()}getNextDeferredOperationId(){return this.deferredOperationCount++,"AttachmentsModified"+this.deferredOperationCount}addDeferredOperationPayload(e){this.deferredOperationPayload.push(e)}writebackDeferredOperationPayload(){const e=[];for(let t=0;t<this.createPayload.length;t++){const i=Object.assign({},this.createPayload[t]),o={id:"AttachmentsCreated"+(t+1),operation:this.DEFERRED_OPERATION_CREATE,path:"",payload:i};e.push(o)}for(let t=0;t<this.deferredOperationPayload.length;t++){const i=Object.assign({},this.deferredOperationPayload[t]);e.push(i)}const t={parts:e};this.properties.deferredOperationPayload=t}writebackViewData(){this.properties.view&&this.properties.view.data&&this.properties.view.data instanceof Array&&(this.properties.view.data=this.attachmentsData().slice(0))}}})),define("css!oj-sp/attachments/attachments-styles",[],(function(){})),define("oj-sp/attachments/loader",["require","exports","ojs/ojcomposite","text!./attachments-view.html","text!./component.json","./attachments-viewModel","css!./attachments-styles.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-attachments",{metadata:JSON.parse(s),parseFunction:void 0,view:o,viewModel:a.AttachmentsViewModel})})),define("oj-sp/attachments-2-actions/component/attachments-2-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenBreakpoint=t.ScreenRanges=t.AttachmentActionIDs=t.QuickActionSize=t.DataTypeCodes=void 0,function(e){e.FILE="FILE",e.WEB_PAGE="WEB_PAGE"}(t.DataTypeCodes||(t.DataTypeCodes={})),function(e){e.NONE="",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE"}(t.QuickActionSize||(t.QuickActionSize={})),function(e){e.SELECT_FILES="selectFiles",e.LAUNCH_ADD_LINK="enterLink",e.ADD_FILES="addFiles",e.ADD_LINK="addLink",e.DOWNLOAD="download",e.DOWNLOAD_SELECTED="downloadSelected",e.REMOVE="delete",e.REMOVE_SELECTED="deleteSelected",e.EDIT="edit",e.EDIT_SELECTED="editSelected",e.PREVIEW="preview",e.PREVIEW_SELECTED="previewSelected",e.EDIT_CATEGORY="editCategory"}(t.AttachmentActionIDs||(t.AttachmentActionIDs={})),function(e){e.xsm="xsm",e.sm="sm",e.md="md",e.lg="lg",e.xl="xl"}(t.ScreenRanges||(t.ScreenRanges={})),t.ScreenBreakpoint={xsm:360,sm:600,md:768,lg:1024,xl:5e3}})),define("oj-sp/attachments-2-actions/actions/AttachmentActions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentActions=void 0;class i{constructor(){this.fileProgressListeners=new Map}async create(e){let t=Promise.resolve(null);return this.createOp&&(this.isCreateWithProgressOperation(this.createOp)&&i.isCreateFileData(e)&&(this.createOp.setCancelController(e.CancelController),this.createOp.setHandler(this)),t=this.createOp.doOperation(e)),t}async edit(e){let t=Promise.resolve(null);return this.editOp&&(t=this.editOp.doOperation(e)),t}async delete(e){let t=Promise.resolve(null);return this.deleteOp&&(t=this.deleteOp.doOperation(e)),t}async download(e){let t=Promise.resolve(null);return this.downloadOp&&(t=this.downloadOp.doOperation(e)),t}async versionHistory(e){let t=Promise.resolve(null);return this.versionHistoryOp&&(t=this.versionHistoryOp.doOperation(e)),t}async restoreVersion(e){let t=Promise.resolve(null);return this.restoreVersionOp&&(t=this.restoreVersionOp.doOperation(e)),t}async downloadVersion(e){let t=Promise.resolve(null);return this.downloadVersionOp&&(t=this.downloadVersionOp.doOperation(e)),t}addProgressListener(e,t){this.fileProgressListeners.has(e)||this.fileProgressListeners.set(e,t)}removeProgressListener(e){this.fileProgressListeners.has(e)&&this.fileProgressListeners.delete(e)}raiseFileUploadProgress(e){this.fileProgressListeners.forEach(t=>{t(e)})}static isCreateLinkDataResponse(e){return void 0!==e.Url}static isCreateFileDataResponse(e){return void 0!==e.File}static isCreateLinkData(e){return void 0!==e.Url}static isCreateFileData(e){return void 0!==e.File}isCreateWithProgressOperation(e){return void 0!==e.setHandler&&void 0!==e.setCancelController}}t.AttachmentActions=i})),define("oj-sp/attachments-2-actions/mutators/AttachmentDataMutator",["require","exports","../component/attachments-2-types","../actions/AttachmentActions"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentDataMutator=void 0;t.AttachmentDataMutator=class{generateAttachmentFromCreateData(e){var t,s,a;let n=null;if(o.AttachmentActions.isCreateFileDataResponse(e)){let o=e.AttachmentIdentifier;o||(o=(null===(t=e.File)||void 0===t?void 0:t.name)+e.DocumentIdentifier);n={id:o,documentId:e.DocumentIdentifier,datatypeCode:i.DataTypeCodes.FILE,title:e.Title,fileName:null===(s=e.File)||void 0===s?void 0:s.name,fileSize:null===(a=e.File)||void 0===a?void 0:a.size,fileContentType:e.FileContentType,downloadInfo:e.DownloadInfo,updatedDate:e.UpdatedDate,updatedByUserName:e.UpdatedBy,categoryCode:e.CategoryCode,categoryName:e.CategoryName,description:e.Description}}else if(o.AttachmentActions.isCreateLinkDataResponse(e)){n={id:e.AttachmentIdentifier,documentId:e.DocumentIdentifier,datatypeCode:i.DataTypeCodes.WEB_PAGE,title:e.Title,updatedDate:e.UpdatedDate,updatedByUserName:e.UpdatedBy,categoryCode:e.CategoryCode,categoryName:e.CategoryName,description:e.Description,url:e.Url}}return n}}})),define("oj-sp/attachments-2-actions/mutators/AttachmentBufferingDataMutator",["require","exports","./AttachmentDataMutator"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentBufferingDataMutator=void 0;class o extends i.AttachmentDataMutator{constructor(e){super(),this.data=e}async add(e){this.data.addItem({data:e,metadata:{key:e.id}})}async edit(e,t){const i=await o.findById(e,this.data);Object.assign(i,t),this.data.updateItem({data:i,metadata:{key:i.id}})}async delete(e){this.data.removeItem({metadata:{key:e}})}static async findById(e,t){const i=await o.findByIds([e],t);let s=null;return i&&i.length>0&&(s=i[0]),s}static async findByIds(e,t){const i=[],o=[],s=t.getSubmittableItems();for(let t=0;t<s.length;t++){let a=!1;if("add"===s[t].operation||"update"===s[t].operation){const n=s[t].item.data;for(let t=0;t<e.length;t++)if(n&&n.id===e[t]){i.push(n),o.push(e[t]),a=!0;break}}}const a=new Set,n=[];for(let t=0;t<e.length;t++){const i=e[t];o.includes(i)||(a.add(i),n.push(i))}if(a.size>0){const e=await t.fetchByKeys({keys:a});for(let t=0;t<n.length;t++){const o=n[t],s=e.results.get(o);s?i.push(s.data):console.log("**** ALERT ***** fetchByKeysResults failed - "+o)}}return i}}t.AttachmentBufferingDataMutator=o})),define("oj-sp/attachments-2/context/atch-context",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=(0,i.createContext)(null);t.default=o})),define("oj-sp/attachments-2/context/atch-selected-context",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=(0,i.createContext)(null);t.default=o})),define("oj-sp/attachments-2/utils/atch-utils",["require","exports","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common/ThumbnailCommon","oj-sp/common/private/ThumbnailCommonPrivate","oj-sp/common-util/common-util","ojs/ojconverter-datetime","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/attachments-2-actions/component/attachments-2-types"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRowDisplayState=t.dateTimeToAge=t.shouldShowHideField=t.getScreenRange=t.formatSize=t.atchTitle=t.parseUpdatedDate=t.getMimeTypeIconAriaLabel=t.getMimeTypeIcon=t.iconTemplateRender=void 0;t.iconTemplateRender=e=>{let t=s.ThumbnailCommon.iconClassForMimeType(e.fileContentType);return e.datatypeCode===d.DataTypeCodes.WEB_PAGE&&(t="oj-ux-ico-link"),t+" oj-ux-icon-size-6x"};t.getMimeTypeIcon=(e,t,o,a)=>{let n="oj-ux-ico-file-other";return"FILE"===e||"UPLOAD_COMPLETE"===e?void 0!==t&&t?(i.log(`Content type found. Content type is ${t}.`),n=s.ThumbnailCommon.iconClassForMimeType(t)):void 0!==o&&o&&(n=s.ThumbnailCommon.iconClassForFileName(o)):e===d.DataTypeCodes.WEB_PAGE?n="oj-ux-ico-link":"UPLOAD"===e?n=a&&100===a?"oj-ux-ico-circular-progress":"oj-sp-attachments-upload-progress-animation oj-ux-ico-circular-progress-3":"UPLOAD_ERROR"===e?n="oj-ux-ico-error-s oj-icon-color-danger":"UPLOAD_CONSOLIDATED"===e?n="oj-sp-attachments-upload-progress-animation oj-ux-ico-circular-progress-3":"UPLOAD_CONSOLIDATED_COMPLETE"===e&&(n="oj-ux-ico-circular-progress"),n+=" oj-ux-icon-size-6x",n};t.getMimeTypeIconAriaLabel=(e,t,i,o)=>{let s=l.unknownFileTypeIcon;if("FILE"===e||"UPLOAD_COMPLETE"===e){let e;void 0!==i&&i?e=a.ThumbnailCommonPrivate.iconTypeForMimeType(i):void 0!==t&&t&&(e=a.ThumbnailCommonPrivate.iconTypeForFileName(t)),e&&(s=a.ThumbnailCommonPrivate.alternativeTextForIconType(e,l))}else e===d.DataTypeCodes.WEB_PAGE?s=l.link:"UPLOAD"===e?s=o&&100===o?l.uploadCompleteAction:l.uploadingIconAlternativeText:"UPLOAD_ERROR"===e?s=l.errorAttachmentUpload:"UPLOAD_CONSOLIDATED"===e?s=l.uploadingIconAlternativeText:"UPLOAD_CONSOLIDATED_COMPLETE"===e&&(s=l.uploadCompleteAction);return s};t.parseUpdatedDate=e=>{let t=e;try{if(e){const i=(0,n.getDateFormatPattern)(),o={pattern:i,timeZone:(0,n.getTimeZone)()},s=new Date(e).toISOString();t=new r.IntlDateTimeConverter(o).format(s)}}catch(e){i.warn("Error attempting to parse uploaded date for attachments implementation."),i.log(e)}return t};t.atchTitle=e=>{let t="error";if(e.title&&e.title.length>0)t=e.title;else if(e.datatypeCode===d.DataTypeCodes.WEB_PAGE){t=e.url}else{t=e.fileName}return t};t.formatSize=e=>{const t=[o.fileSize_bytes,o.fileSize_kilobytes,o.fileSize_megabytes,o.fileSize_gigabytes,o.fileSize_terabytes];let s,a=null;try{if("number"==typeof e&&isNaN(e)||null==e)return null;if("string"==typeof e){if(a=parseInt(e),isNaN(a))return null}else a=e}catch(e){i.error(e)}for(s=0;a>=1024&&s<4;s++)a/=1024;if(null===a)return null;{let e="";return e=1!==a||s&&0!==s?Number(a)===a&&a%1!=0?a.toFixed(2)+" "+t[s]:a.toFixed(0)+" "+t[s]:"1 "+o.fileSize_byte,e}};t.getScreenRange=e=>e<d.ScreenBreakpoint.xsm?d.ScreenRanges.xsm:e<d.ScreenBreakpoint.sm?d.ScreenRanges.sm:e<d.ScreenBreakpoint.md?d.ScreenRanges.md:e<d.ScreenBreakpoint.lg?d.ScreenRanges.lg:d.ScreenRanges.xl;t.shouldShowHideField=(e,t)=>{if(e){return e.split(",").includes(t)}return!1};t.dateTimeToAge=(e,t)=>"now";t.calculateRowDisplayState=(e,t,i)=>{let o=i||"disabled";return o="off"===e?"off":null!=t?t:e,o}})),define("text!oj-sp/empty-state/component.json",[],(function(){return'{"pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","name":"empty-state","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Empty State","description":"Empty State is used when there is no data or information to show.","type":"composite","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common":"2404.0.0"},"implements":["SpEmptyStateElement"],"properties":{"primaryText":{"displayName":"Primary Text","description":"Short statement describing the reason of the empty state.","type":"string","required":true,"extension":{"vbdt":{"placeholderValue":"Primary Text"}}},"secondaryText":{"displayName":"Secondary Text","description":"Provides context about what is happening at the moment and gives more details if necessary.","type":"string","required":false},"primaryAction":{"displayName":"Primary Action","description":"Optional primary action.","type":"object|null","required":false,"properties":{"label":{"type":"string","displayName":"Label","description":"The label of the primary action","translatable":true},"icon":{"type":"string","displayName":"Icon","description":"The icon for the primary action"},"display":{"type":"string","displayName":"Display","description":"Display setting for the primary action","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The primary action is visible and enabled"},"off":{"displayName":"Off","description":"The primary action is not visible"},"disabled":{"displayName":"Disabled","description":"The primary action is visible and disabled"}}},"type":{"type":"string","displayName":"Action type","value":"callToAction","enumValues":["danger","callToAction","outlined"],"propertyEditorValues":{"danger":{"displayName":"Danger","description":"Action can have destructive results."},"callToAction":{"displayName":"Call to Action","description":"The action has high emphasis. Should only be one CTA button per page."},"outlined":{"displayName":"Outline","description":"The action has neutral emphasis."}}}}},"navigationAction":{"displayName":"Navigation Action","description":"Optional navigation action.","type":"object|null","required":false,"properties":{"label":{"type":"string","displayName":"Label","description":"The label of the link.","translatable":true},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"displayOptions":{"displayName":"Display Options","description":"Display Options","type":"object|null","required":false,"properties":{"layout":{"displayName":"Layout","description":"Layout for the component. Use fullPage when the component is in a full page layout container, otherwise use other.","type":"string","writeback":false,"value":"other","enumValues":["fullPage","other"],"propertyEditorValues":{"fullPage":{"description":"When used in a full page layout container.","displayName":"Full Page"},"other":{"description":"When used in a container occupying only a portion of the page.","displayName":"Other"}}}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Dispatched when the primary action is clicked","bubbles":false,"cancelable":false},"spNavigationAction":{"displayName":"spNavigationAction event","description":"Dispatched when the navigation action is clicked","bubbles":false,"cancelable":false}},"slots":{},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-empty-state.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Empty%20State%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraemptystate.html"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-empty-state.svg"}}'})),define("text!oj-sp/empty-state/empty-state-view.html",[],(function(){return'<html><head></head><body><div :class="[[`oj-sp-empty-state-overflow oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap ${isGravityLayout() ? \'oj-sm-justify-content-flex-end\' : \'\'}`]]"><div class="oj-sp-empty-state-container"><div :class="[[`oj-sp-empty-state-primary oj-sp-serif-font-family ${typography().primary}`]]"><oj-bind-text value="[[ $properties.primaryText ]]"></oj-bind-text></div><oj-bind-if test="[[$properties.secondaryText]]"><div :class="[[`oj-sp-empty-state-secondary ${typography().secondary} oj-text-color-primary oj-sm-padding-3x-top oj-md-padding-5x-top`]]"><oj-bind-text value="[[ $properties.secondaryText ]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[hasPrimaryAction()]] "><div class="oj-sp-empty-state-cta oj-sm-padding-8x-top"><oj-bind-if test="[[hasPrimaryActionIcon()]]"><oj-button :id="[[uid +\'_primaryAction\']]":class="[[`oj-sp-primary-action-button ${showSMButton() ? \'oj-button-sm\' : \'\'}`]]"chroming="[[$properties.primaryAction.type ? $properties.primaryAction.type : \'callToAction\']]"display="all"disabled="[[$properties.primaryAction.display === \'disabled\']]"on-oj-action="[[primaryActionHandler]]"><span slot="startIcon":class="[[$properties.primaryAction.icon]]"></span><span><oj-bind-text value="[[$properties.primaryAction.label]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[!hasPrimaryActionIcon()]]"><oj-button :id="[[uid +\'_primaryAction\']]":class="[[`oj-sp-primary-action-button ${showSMButton() ? \'oj-button-sm\' : \'\'}`]]"chroming="[[$properties.primaryAction.type ? $properties.primaryAction.type : \'callToAction\']]"display="all"disabled="[[$properties.primaryAction.display === \'disabled\']]"on-oj-action="[[primaryActionHandler]]"><span><oj-bind-text value="[[$properties.primaryAction.label]]"></oj-bind-text></span></oj-button></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[hasNavigationAction()]]"><div class="oj-sp-empty-state-navigation oj-sm-padding-8x-top"><a :class="[[`${$properties.navigationAction.display === \'disabled\' ? \' oj-disabled\' : \'\'}}`]]":id="[[uid + \'_navigationAction\']]"href="#"on-click="[[navigationActionHandler]]"><oj-bind-text value="[[$properties.navigationAction.label]]"></oj-bind-text></a></div></oj-bind-if></div></div><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-a-bl.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-a-br.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-a-tr.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-b-bl.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-b-br.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-b-tl.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-c-tr.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-d-br.png\') ]]"as="image"><link rel="preload":href="[[ require.toUrl(\'oj-sp/empty-state/images/empty-state-background-d-tr.png\') ]]"as="image"></body></html>'})),define("oj-sp/empty-state/empty-state-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/common/EventDispatcher","ojs/ojknockout","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStateViewModel=void 0;t.EmptyStateViewModel=class{constructor(e){this.primaryActionHandler=e=>{l.EventDispatcher.dispatch(l.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,this.composite,null,!1)},this.navigationActionHandler=e=>{this.properties&&this.properties.navigationAction&&"disabled"!==this.properties.navigationAction.display&&l.EventDispatcher.dispatch(l.EventDispatcher.NAVIGATION_ACTION_EVENT_NAME,this.composite,null,!1),e.preventDefault()};const t=s.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.uid=e.uniqueId,this.composite=e.element,this.properties=e.properties,this.res=o,this.screenRange=n.createScreenRangeObservable(),this.isScreenMdDown=i.computed(()=>r.compare(this.screenRange(),"md")<=0),this.initActions(),this.initDynamicPadding(),this.initLayout(),this.initTypography(),this.initBackground(),this.showSMButton=i.computed(()=>!this.isGravityLayout()||this.isScreenMdDown()),this.busyResolve()}activated(e){a.log(`empty-state ${this.uid} activated`)}connected(e){a.log(`empty-state ${this.uid} connected`),"undefined"==typeof ResizeObserver||this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>requestAnimationFrame(()=>this.updateMinHeight()))),this.resizeObserver&&(this.resizeObserver.observe(this.composite),this.resizeObserver.observe(this.getContainer()))}bindingsApplied(e){a.log(`empty-state ${this.uid} bindingsApplied`)}propertyChanged(e){a.log(`empty-state ${this.uid} propertyChanged`)}disconnected(e){a.log(`empty-state ${this.uid} disconnected`),this.resizeObserver&&this.resizeObserver.disconnect()}initTypography(){this.typography=i.computed(()=>this.isGravityLayout()?r.compare(this.screenRange(),"sm")<=0?{primary:"oj-sp-typography-display-xs",secondary:"oj-typography-body-xs"}:r.compare(this.screenRange(),"md")<=0?{primary:"oj-sp-typography-display-xl",secondary:"oj-typography-body-xl"}:{primary:"oj-sp-typography-display-2xl",secondary:"oj-typography-body-xl"}:{primary:"oj-sp-typography-display-3xs",secondary:"oj-typography-body-sm"})}initActions(){const e=({display:e,label:t})=>"off"!==e&&t;this.hasPrimaryAction=i.computed(()=>this.properties.primaryAction&&e(this.properties.primaryAction)),this.hasPrimaryActionIcon=i.computed(()=>this.properties.primaryAction&&this.properties.primaryAction.icon),this.hasNavigationAction=i.computed(()=>this.properties.navigationAction&&e(this.properties.navigationAction))}initDynamicPadding(){this.composite.classList.add("oj-sp-template-wrapper")}initLayout(){const e=e=>{e?(this.composite.classList.remove("oj-sp-empty-state-layout-regular"),this.composite.classList.add("oj-sp-empty-state-layout-gravity")):(this.composite.classList.add("oj-sp-empty-state-layout-regular"),this.composite.classList.remove("oj-sp-empty-state-layout-gravity"))};this.isGravityLayout=i.computed(()=>this.properties.displayOptions&&this.properties.displayOptions.layout&&"fullPage"===this.properties.displayOptions.layout),this.isGravityLayout.subscribe(e),e(this.isGravityLayout())}backgroundIndex(){return Math.floor(4*Math.random())}initBackground(){this.composite.classList.add("oj-sp-empty-state-background"),this.composite.classList.add("oj-sp-empty-state-background-"+this.backgroundIndex())}updateMinHeight(){const e=this.getContainer()?this.getContainer().getBoundingClientRect().height:0;this.composite.style.minHeight=e+"px"}getContainer(){return this.composite.querySelector(".oj-sp-empty-state-container")}}})),define("css!oj-sp/empty-state/empty-state-styles",[],(function(){})),define("oj-sp/empty-state/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./empty-state-view.html","./empty-state-viewModel","css!./empty-state-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-empty-state",{metadata:JSON.parse(o),view:s,viewModel:a.EmptyStateViewModel})})),define("oj-sp/attachments-2/components/atch-no-data",["require","exports","preact","ojs/ojvcomponent","ojs/ojtranslation","oj-sp/common-util/common-util","../utils/atch-utils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/empty-state/loader","ojs/ojfilepicker"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchNoData=void 0;t.AtchNoData=e=>{var t;const l=null!==(t=e.id)&&void 0!==t?t:(0,o.getUniqueId)(),d=(0,a.isSmallScreenOrMobile)();return(0,i.h)("oj-sp-empty-state",{id:l+"__emptyState",primaryText:e.primaryText?e.primaryText:d?r.selectFileMsg:r.selectFileOrDropMsg,secondaryText:e.secondaryText?e.secondaryText:e.maxFileSize?(0,s.applyParameters)(r.maxFileSizeMsg,{max_size:(0,n.formatSize)(e.maxFileSize)}):"",displayOptions:{layout:"other"}})}})),define("oj-sp/attachments-2/components/atch-menu",["require","exports","preact","preact/hooks","ojs/ojtranslation","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/attachments-2-actions/component/attachments-2-types","oj-sp/common-util/common-util","ojs/ojvcomponent","ojs/ojmenu","ojs/ojoption"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchMenu=void 0;t.AtchMenu=e=>{var t,d;const[c,p]=(0,o.useState)({context:void 0,withinSelected:!1,isHeaderClicked:!1}),u=null!==(t=e.id)&&void 0!==t?t:(0,l.getUniqueId)();return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu",{id:u+"_container",onojMenuAction:t=>{if(e.viewRef&&e.viewRef.current&&(null==c?void 0:c.context)){const i=t.detail.selectedValue,o="object"==typeof i?i.action:i;let s=null;e.selectedItems||(s=c.context.key),"object"==typeof i&&(s={attachmentId:s,code:i.value}),e.handleAction(o,s)}},onojBeforeOpen:t=>{if(e.viewRef&&e.viewRef.current){const i=t.detail.originalEvent.target,o=e.viewRef.current.getContextByNode(i);o&&("oj-table-header"===o.subId||"oj-table-footer"===o.subId?p({context:void 0,withinSelected:!1,isHeaderClicked:!0}):e.selectedItems?e.selectedItems.isAddAll()||e.selectedItems.has(o.key)?p({context:o,withinSelected:!0,isHeaderClicked:!1}):p({context:o,withinSelected:!1,isHeaderClicked:!1}):p({context:o,withinSelected:!0,isHeaderClicked:!1}))}},slot:"off"===e.edit&&"off"===e.delete&&"off"===e.download?"":e.slot,"aria-label":a.actions},(0,i.h)(i.Fragment,null,(0,i.h)("oj-option",{id:u+"_resize_columns_action",class:c.isHeaderClicked?"":"oj-sp-attachments2-menu-hidden","data-oj-command":"oj-table-resize"},s.getTranslatedString("oj-ojTable.labelResizeColumn")),(0,i.h)("oj-option",{class:c.isHeaderClicked?"":"oj-sp-attachments2-menu-hidden",disabled:!0},"---"),(0,i.h)("oj-option",{class:c.isHeaderClicked?"":"oj-sp-attachments2-menu-hidden",id:u+"_sort_action"},(0,i.h)("span",null,s.getTranslatedString("oj-ojTable.labelSort")),(0,i.h)("oj-menu",null,(0,i.h)("oj-option",{"data-oj-command":"oj-table-sortAsc",id:u+"_sort_ascending_action"},s.getTranslatedString("oj-ojTable.labelSortAsc")),(0,i.h)("oj-option",{"data-oj-command":"oj-table-sortDsc",id:u+"_sort_descending_action"},s.getTranslatedString("oj-ojTable.labelSortDsc"))))),(0,i.h)("oj-option",{value:e.selectedItems?n.AttachmentActionIDs.EDIT_SELECTED:n.AttachmentActionIDs.EDIT,disabled:"disabled"===e.edit||!c.withinSelected,id:u+"_edit_action",class:"off"===e.edit||c.isHeaderClicked?"oj-sp-attachments2-menu-hidden":""},r.getDirectionality()===r.DIRECTIONALITY.RIGHT_TO_LEFT?(0,i.h)(i.Fragment,null,"â¦",a.edit):(0,i.h)(i.Fragment,null,a.edit,"â¦")),(0,i.h)("oj-option",{id:u+"_assign_category_action",class:e.category&&Array.isArray(e.category)&&"off"!==e.actionOptionsCategory&&!c.isHeaderClicked?"":"oj-sp-attachments2-menu-hidden"},a.assignCategory,e.category&&Array.isArray(e.category)?(0,i.h)("oj-menu",{id:u+"_assign_category_action_menu"},null===(d=e.category)||void 0===d?void 0:d.map(t=>(0,i.h)("oj-option",{id:`${u}_assign_category_action_-_${t.code}`,disabled:"disabled"===e.actionOptionsCategory||!c.withinSelected,value:{action:n.AttachmentActionIDs.EDIT_CATEGORY,value:t.code}},t.displayName))):""),(0,i.h)("oj-option",{disabled:!0,class:"off"===e.edit||c.isHeaderClicked||"off"===e.download&&"off"===e.delete?"oj-sp-attachments2-menu-hidden":""},"---"),(0,i.h)("oj-option",{value:e.selectedItems?n.AttachmentActionIDs.DOWNLOAD_SELECTED:n.AttachmentActionIDs.DOWNLOAD,disabled:"disabled"===e.download||!c.withinSelected,class:"off"===e.download||c.isHeaderClicked?"oj-sp-attachments2-menu-hidden":"",id:u+"_download_action"},a.download),(0,i.h)("oj-option",{disabled:!0,class:"off"===e.download||c.isHeaderClicked||"off"===e.delete?"oj-sp-attachments2-menu-hidden":""},"---"),(0,i.h)("oj-option",{value:e.selectedItems?n.AttachmentActionIDs.REMOVE_SELECTED:n.AttachmentActionIDs.REMOVE,disabled:"disabled"===e.delete||!c.withinSelected,class:"off"===e.delete||c.isHeaderClicked?"oj-sp-attachments2-menu-hidden":"",id:u+"_delete_action"},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-trash"}),a.remove)))}})),define("oj-sp/attachments-2/utils/atch-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_COLUMN_ID_DESCRIPTION=t.TABLE_COLUMN_ID_LAST_UPDATE=t.TABLE_COLUMN_ID_CATEGORY=t.TABLE_COLUMN_ID_FILE_SIZE=t.TABLE_COLUMN_ID_TITLE=void 0,t.TABLE_COLUMN_ID_TITLE="_title",t.TABLE_COLUMN_ID_FILE_SIZE="fileSize",t.TABLE_COLUMN_ID_CATEGORY="category",t.TABLE_COLUMN_ID_LAST_UPDATE="lastUpdate",t.TABLE_COLUMN_ID_DESCRIPTION="description"})),define("oj-sp/attachments-2/views/atch-tabular-view",["require","exports","preact","preact/hooks","../utils/atch-utils","ojs/ojtranslation","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../context/atch-context","../context/atch-selected-context","oj-sp/attachments-2-actions/component/attachments-2-types","../utils/atch-utils","../components/atch-no-data","../components/atch-menu","../utils/atch-utils","../utils/atch-types","ojs/ojtable","ojs/ojtoolbar","ojs/ojfilepicker","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchTableView=void 0;t.AtchTableView=e=>{const{clientSize:t,data:C,handleAction:E,handleSelectedChanged:T,maxFileSize:_,category:S,scroller:x}=(0,o.useContext)(r.default),{selectedActionOptions:O,selectedItems:w}=(0,o.useContext)(l.default),I=(0,o.useRef)(null),D=(0,o.useMemo)(()=>({fetchSize:25,maxCount:-1,scroller:null!=x?x:null}),[x]),N=(n.attachmentTitle,n.fileSizeHeader,n.updatedOn,n.descriptionHeader,n.actions),P={contentTypeCellTemplate:"sm",titleCellTemplate:"sm",categoryCellTemplate:"sm",fileSizeCellTemplate:"lg",actionsCellTemplate:"sm",lastUpdateDateCellTemplate:"md",descriptionCellTemplate:"xl"},R=(0,o.useMemo)(()=>{const i=[{template:"contentTypeCellTemplate",id:"_celltype",field:"fileContentType",headerText:"",sortable:"disabled",weight:1,width:"42px"},{template:"titleCellTemplate",id:"_title",field:"title",sortable:"disabled",weight:3,className:"oj-sp-attachments2-table-category-column"},{template:"categoryCellTemplate",id:"category",field:"categoryCode",weight:1,minWidth:"150px",headerClassName:"oj-sp-attachments2-table-category-column-header",className:"oj-sp-attachments2-table-category-column"},{template:"fileSizeCellTemplate",id:"fileSize",field:"fileSize",sortable:"disabled",weight:1,minWidth:"150px",headerClassName:"oj-sp-attachments2-table-file-size-column-header",className:"oj-sp-attachments2-table-file-size-column"},{template:"lastUpdateDateCellTemplate",id:"lastUpdate",field:"updatedDate",sortable:"disabled",weight:1,minWidth:"180px",headerClassName:"oj-sp-attachments2-table-update-on-column-header",className:"oj-sp-attachments2-table-update-on-column"},{template:"descriptionCellTemplate",id:"description",field:"description",sortable:"disabled",weight:2,minWidth:"180px",className:"oj-sp-attachments2-table-description-column"},{template:"off"!=e.edit||"off"!=e.download?"actionsCellTemplate":"hideCellTemplate",id:"actions",headerText:N,sortable:"disabled",width:"150px",headerClassName:"oj-sp-attachments2-table-action-column-header",className:"oj-sp-attachments2-table-action-column"}],o=[i[0]];for(let t=0;t<e.tableColumns.length;t++){const s=e.tableColumns[t];for(let e=0;e<i.length;e++){const t=i[e];if(s.id===t.id){o.push(Object.assign(Object.assign({},s),t));break}}}o.push(i[i.length-1]);const s=o.filter(i=>{const o=P[i.template]&&d.ScreenBreakpoint[P[i.template]]<=d.ScreenBreakpoint[t];return i.id===m.TABLE_COLUMN_ID_DESCRIPTION?o&&!(0,h.shouldShowHideField)(e.excludeFields,m.TABLE_COLUMN_ID_DESCRIPTION):o});let a=s.length-1;"actions"===s[s.length-1].id&&(a-=2);for(let e=2;e<=a;e++)s[e].resizable="enabled";return s},[t,e]);return(0,i.h)("oj-table",{id:e.prefix+"__table__",class:"oj-sp-attachments2-table",ref:I,data:C,layout:"fixed",accessibility:{rowHeader:R[1].id},selectionMode:y,scrollPolicyOptions:D,columnsDefault:g,selected:{row:e.seletedItems},onselectedChanged:e=>{const t=e.detail.value.row,i=e.detail.updatedFrom;T&&"internal"===i&&T(t)},columns:R,selectAllControl:"hidden","aria-label":n.attachments},(0,i.h)("template",{slot:"titleCellTemplate",render:t=>{const o=(0,c.atchTitle)(t.row);return t.item.data.datatypeCode===d.DataTypeCodes.WEB_PAGE?(0,i.h)("a",{id:`${e.prefix}_atchtable_row#${t.item.key}`,target:"_blank",className:"oj-sp-attachments2-link-title",title:t.item.data.url,href:t.item.data.url},o):(0,i.h)("span",{id:`${e.prefix}_atchtable_row#${t.item.key}`,title:o,className:"oj-line-clamp-3"},o)}}),(0,i.h)("template",{slot:"categoryCellTemplate",render:e=>A(e,S)}),(0,i.h)("template",{slot:"fileSizeCellTemplate",render:f}),(0,i.h)("template",{slot:"contentTypeCellTemplate",render:b}),(0,i.h)("template",{slot:"lastUpdateDateCellTemplate",render:v}),(0,i.h)("template",{slot:"descriptionCellTemplate",render:j}),(0,i.h)("template",{slot:"actionsCellTemplate",render:t=>{var o,r,l,p,u,h;const m="FILE"===t.item.data.datatypeCode,g=(0,c.atchTitle)(t.row),y=(0,s.calculateRowDisplayState)(e.delete,null===(r=null===(o=t.item.data)||void 0===o?void 0:o.actionOptions)||void 0===r?void 0:r.delete),f=(0,s.calculateRowDisplayState)(e.download,null===(p=null===(l=t.item.data)||void 0===l?void 0:l.actionOptions)||void 0===p?void 0:p.download),b=(0,s.calculateRowDisplayState)(e.edit,null===(h=null===(u=t.item.data)||void 0===u?void 0:u.actionOptions)||void 0===h?void 0:h.edit);return"off"!=y||"off"!=b||"off"!=f?(0,i.h)("oj-toolbar",{"data-oj-clickthrough":"disabled","aria-label":n.actions,"aria-controls":"controlled",chroming:"borderless",class:"oj-sp-attachments2-table-action-toolbar"},m&&"off"!=f?(0,i.h)("oj-button",{id:`${e.prefix}_table_${t.item.key}_download_icon_${t.item.index}`,"data-oj-clickthrough":"disabled",display:"icons",disabled:"disabled"===f,"aria-label":(0,a.applyParameters)(n.downloadAttachment,{title:g}),onojAction:e=>{E(d.AttachmentActionIDs.DOWNLOAD,t.row.id)},chroming:"borderless"},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-download"}),(0,i.h)("span",null,n.download)):"","off"!=b?(0,i.h)("oj-button",{id:`${e.prefix}_table_${t.item.key}_edit_icon_${t.item.index}`,"data-oj-clickthrough":"disabled",display:"icons",disabled:"disabled"===b,"aria-label":(0,a.applyParameters)(n.editAttachment,{title:g}),onojAction:e=>{E(d.AttachmentActionIDs.EDIT,t.row.id)},chroming:"borderless"},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-edit"}),(0,i.h)("span",null,n.edit)):""):""}}),(0,i.h)("template",{slot:"noData",render:()=>(0,i.h)(p.AtchNoData,{handleAction:E,maxFileSize:_})}),(0,i.h)(u.AtchMenu,{id:e.prefix+"_contextMenu",viewRef:I,slot:"contextMenu",delete:O.delete,download:O.download,edit:O.edit,actionOptionsCategory:e.category,selectedItems:w,handleAction:E,category:S}))};const g={sortable:"disabled"},y={row:"multiple",column:"none"},f=e=>{const t=(0,c.formatSize)(e.data);return(0,i.h)("span",null,t)},b=e=>{const{datatypeCode:t,fileName:o,fileContentType:a,fileProgress:n}=e.row;return(0,i.h)("span",{role:"img","aria-label":(0,s.getMimeTypeIconAriaLabel)(t,o,a,n),class:(0,c.iconTemplateRender)(e.item.data)})},v=e=>{const t=(0,c.parseUpdatedDate)(e.data);return(0,i.h)("span",null,t)},j=e=>(0,i.h)("span",{title:e.data,className:"oj-line-clamp-3"},e.data),A=(e,t)=>{const o=null==e?void 0:e.item.data;let s;return o&&(s=(null==o?void 0:o.categoryName)&&o.categoryName.length>0?o.categoryName:t&&Array.isArray(t)&&t.find(e=>e.code==o.categoryCode)?t.find(e=>e.code==o.categoryCode).displayName:o.categoryCode),(0,i.h)("span",{className:"oj-line-clamp-1",title:s},s)}})),define("oj-sp/attachments-2/views/atch-list-view",["require","exports","preact","preact/hooks","ojs/ojvcomponent","ojs/ojtranslation","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../utils/atch-utils","../context/atch-context","../utils/atch-utils","oj-sp/attachments-2-actions/component/attachments-2-types","../utils/atch-utils","../components/atch-no-data","../components/atch-menu","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojselector","ojs/ojbutton","oj-sp/empty-state/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchListView=void 0;t.AtchListView=e=>{var t;null!==(t=e.id)&&void 0!==t||(0,s.getUniqueId)();const m=(0,o.useMemo)(()=>({item:"visible"}),[]),{handleSelectedChanged:g,handleAction:y,data:f,category:b,maxFileSize:v,scroller:j}=(0,o.useContext)(l.default),A=(0,o.useRef)(null),C=(0,o.useMemo)(()=>({maxCount:-1,scroller:null!=j?j:null}),[j]),E=e=>{const t=e.detail.value,i=e.detail.updatedFrom;g&&"internal"===i&&g(t)};return(0,i.h)("oj-list-view",{id:e.prefix+"__listview__","aria-label":n.attachments,data:f,gridlines:m,ref:A,class:"oj-sp-attachments2-listview oj-listview-item-padding-off",selected:e.seletedItems,onselectedChanged:E,"selection-mode":"multiple",scrollPolicyOptions:C},(0,i.h)("template",{slot:"itemTemplate","data-oj-as":"item",render:t=>{var o,s,l,u,m,g;const f=(0,p.atchTitle)(t.data),v=(0,r.calculateRowDisplayState)(e.delete,null===(s=null===(o=t.data)||void 0===o?void 0:o.actionOptions)||void 0===s?void 0:s.delete),j=(0,r.calculateRowDisplayState)(e.download,null===(u=null===(l=t.data)||void 0===l?void 0:l.actionOptions)||void 0===u?void 0:u.download),C=(0,r.calculateRowDisplayState)(e.edit,null===(g=null===(m=t.data)||void 0===m?void 0:m.actionOptions)||void 0===g?void 0:g.edit);return(0,i.h)("div",null,(0,i.h)("oj-list-item-layout",null,(0,i.h)("div",{id:`${e.prefix}_primaryText_${t.key}`,class:"oj-typography-body-md oj-text-color-primary oj-sp-attachments2-listview-title"},((t,o,s)=>t.datatypeCode===c.DataTypeCodes.WEB_PAGE?(0,i.h)("a",{id:`${e.prefix}_atchtable_row#${s}`,target:"_blank",className:"oj-sp-attachments2-listview-title oj-sp-attachments2-link-title",title:t.url,href:t.url},o):(0,i.h)("span",{id:`${e.prefix}_atchtable_row#${s}`,className:"oj-sp-attachments2-listview-title oj-line-clamp-3",title:o},o))(t.data,f,t.index)),(0,i.h)("div",{slot:"secondary",class:"oj-line-clamp-2 oj-typography-body-sm oj-sp-attachments2-listview-fileSize"},(0,p.formatSize)(t.data.fileSize)),(0,i.h)("div",{slot:"tertiary",class:"oj-typography-body-xs oj-text-color-secondary oj-sp-attachments2-listview-description oj-line-clamp-3"},t.data.description&&t.data.description.length>0&&!(0,r.shouldShowHideField)(e.excludeFields,"description")?t.data.description:""),(0,i.h)("div",{slot:"quaternary"},(0,i.h)("div",{class:"oj-typography-body-xs oj-text-color-secondary"},(0,a.applyParameters)(n.updatedOnDate,{date:(0,p.parseUpdatedDate)(t.data.updatedDate)}))),(0,i.h)("oj-selector",{"aria-label":(0,a.applyParameters)(n.selectAttachment,{title:f}),slot:"selector",selectedKeys:e.seletedItems,onselectedKeysChanged:E,selectionMode:"multiple",rowKey:t.key,id:t.data.id}),(0,i.h)("span",{role:"img",slot:"leading",class:(0,p.iconTemplateRender)(t.data),"aria-label":(0,d.getMimeTypeIconAriaLabel)(t.data.datatypeCode,t.data.fileName,t.data.fileContentType,0)}),(0,i.h)("span",{slot:"action"},"off"!=v||"off"!=C||"off"!=j?(0,i.h)("oj-menu-button",{chroming:"borderless",class:"oj-button-sm",display:"icons",id:`${e.prefix}_actionsMenu_${t.key}`,"aria-label":n.actions},(0,i.h)(h.AtchMenu,{id:`${e.prefix}_contextMenu_${t.key}`,viewRef:A,slot:"menu",delete:v,download:t.data.datatypeCode===c.DataTypeCodes.FILE?j:"off",edit:C,actionOptionsCategory:e.category,handleAction:y,category:b})):"")))}}),(0,i.h)("template",{slot:"noData",render:()=>(0,i.h)(u.AtchNoData,{handleAction:y,maxFileSize:v})}))}})),define("oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarWidthCalculatorKey=t.ElementType=t.ControlSize=t.ActionType=t.SelectorState=void 0,function(e){e.NONE="none",e.INDETERMINATE="indeterminate",e.ALL="all"}(t.SelectorState||(t.SelectorState={})),function(e){e.STANDARD="standard",e.PRIMARY="primary",e.SECONDARY="secondary",e.MORE_ACTIONS="more-actions",e.CONTEXT="context",e.SORT="sort",e.MULTI_COL_SORT="multi-column-sort",e.EXPORT="export",e.COLUMNS="columns",e.GROUP="group",e.SELECTOR="selector",e.LAYOUT_ACTIONS="layout-actions",e.ZOOM_LEVEL_OPTIONS="zoom-level-options",e.LAYOUT_VIEW_OPTIONS="layout-view-options",e.FUNCTIONAL="functional",e.TOGGLE_CANVAS="toggle-canvas"}(t.ActionType||(t.ActionType={})),function(e){e.SMALL="oj-button-sm",e.LARGE="oj-button-lg"}(t.ControlSize||(t.ControlSize={})),function(e){e.BUTTON="BUTTON",e.BUTTON_ICON="BUTTON_ICON",e.MENU_BUTTON="MENU_BUTTON",e.MENU_BUTTON_START_ICON="MENU_BUTTON_START_ICON",e.MENU_BUTTON_END_ICON="MENU_BUTTON_END_ICON",e.BUTTON_SET="BUTTON_SET",e.BUTTON_SET_OPTION="BUTTON_SET_OPTION",e.BUTTON_ICON_TEXT="BUTTON_ICON_TEXT",e.SELECTOR="SELECTOR",e.SPAN="SPAN"}(t.ElementType||(t.ElementType={})),function(e){e.TOOLBAR_AVAILABLE_WIDTH="toolbar_available_width",e.SELECTION_CONTAINER_WIDTH="selection_container_width",e.FUNCTIONAL_TOOLBAR_WIDTH="functional_toolbar_width",e.LAYOUT_TOOLBAR_WIDTH="layout_toolbar_width",e.RESPONSIVE_SELECTION_CONTAINER_WIDTH="responsive_selection_container_width",e.RESPONSIVE_FUNC_TOOLBAR_WIDTH="responsive_functional_toolbar_width",e.RESPONSIVE_LAYOUT_TOOLBAR_WIDTH="responsive_layout_toolbar_width"}(t.ToolbarWidthCalculatorKey||(t.ToolbarWidthCalculatorKey={}))})),define("oj-sp/internal-resources/components/collection-toolbars/action-converter-utils",["require","exports","./collection-toolbars-types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getButtonIconType=t.convertStandardOptionsToControlModel=t.getMoreActionsControlModel=t.convertCustomIconActionsToControlModel=t.convertCustomActionsToControlModel=t.convertCustomActionGroupToControlModel=t.convertDisplayOptionToControlModel=void 0;t.convertDisplayOptionToControlModel=(e,i,o,s,a)=>i&&"off"!==i?{id:e.id,label:a[e.label],display:i,actionType:o,elementType:s,icon:null!=e.icon?(0,t.getButtonIconType)(e.icon,s):null}:null;t.convertCustomActionGroupToControlModel=(e,o,s,a)=>{if(!(null==e?void 0:e.label)||!(null==e?void 0:e.actions))return null;const n=(0,t.convertCustomActionsToControlModel)(e.actions,o,()=>i.ElementType.BUTTON_SET_OPTION,a);return 0===n.length?null:{id:o+"_action_group",label:e.label,display:"on",actions:n,actionType:o,elementType:s}};t.convertCustomActionsToControlModel=(e,t,i,s)=>e?(e=e.filter(e=>e.id&&e.label&&"off"!==e.display).slice(0,s)).map(e=>o(e,t,i)):[];t.convertCustomIconActionsToControlModel=(e,t,o,a)=>{if(!e)return[];let n;return n="function"!=typeof o&&[i.ElementType.BUTTON_ICON,i.ElementType.BUTTON_ICON_TEXT].includes(o)?e=>e.id&&e.label&&e.icon&&"off"!==e.display:e=>e.id&&e.label&&"off"!==e.display,(e=e.filter(n).slice(0,a)).map(e=>s(e,t,o))};const o=(e,t,i)=>{const o="function"==typeof i?i(e):i;return{id:e.id,label:e.label,display:e.display,actionType:t,elementType:o}},s=(e,i,o)=>{const s="function"==typeof o?o(e):o;return{id:e.id,label:e.label,display:e.display,actionType:i,elementType:s,icon:null!=e.icon?(0,t.getButtonIconType)(e.icon,s):null}};t.getMoreActionsControlModel=(e,t,i,o)=>({id:i+"_action_group",label:t,display:"on",actionType:i,actions:e,elementType:o});t.convertStandardOptionsToControlModel=(e,t,o,s,n,r)=>e&&e.length&&(e=e.filter(e=>e.value&&e.label).splice(0,t)).length?(r&&(r=e.findIndex(e=>e.value===r)>-1?r:null),{id:o,label:n,display:"on",actionType:o,elementType:s,selectedActionId:r,actions:e.map(e=>a(e,o,i.ElementType.BUTTON_SET_OPTION))}):null;const a=(e,t,i)=>({id:e.value,label:e.label,display:"on",actionType:t,elementType:i});t.getButtonIconType=(e,t)=>{let o,s="startIcon";switch(t){case i.ElementType.MENU_BUTTON_END_ICON:o="icons",s="endIcon";break;case i.ElementType.BUTTON_ICON:case i.ElementType.MENU_BUTTON_START_ICON:o="icons";break;case i.ElementType.BUTTON_ICON_TEXT:o="all";break;default:o="label"}return{class:e,display:o,slot:s}}})),define("oj-sp/collection-container/utils/collection-container-constants",["require","exports","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GROUP_SUMMARY_VALUE_CLASS=t.GROUP_SUMMARY_LABEL_CLASS=t.GROUP_SUMMARY_MARGIN_WIDTH=t.GROUP_SUMMARY_LABEL_MIN_WIDTH=t.DEFAULT_MULTI_SORT_CONDITIONS_COUNT=t.SMALL_SCREEN_MEDIA_QUERY=t.MAXIMUM_GROUP_OPTIONS=t.MAXIMUM_CONTEXT_OPTIONS=t.MAXIMUM_SORT_OPTIONS=t.MAXIMUM_SECONDARY_GROUP_ACTIONS=t.MAXIMUM_SECONDARY_ACTIONS=t.MAXIMUM_PRIMARY_GROUP_ACTIONS=t.MAXIMUM_PRIMARY_ACTIONS=t.OVERFLOW_BUTTON_ICON=t.SORT_ICON=t.LAYOUT_TOOLBAR_MODEL=t.FUNCTIONAL_TOOLBAR_MODEL=t.STANDARD_MULTI_COL_SORT_ACTION=t.STANDARD_COLUMNS_ACTION=t.STANDARD_EXPORT_ACTION=t.STANDARD_DELETE_ACTION=t.STANDARD_ADD_ACTION=t.STANDARD_MULTI_COL_SORT_ID=t.STANDARD_COLUMNS_ID=t.STANDARD_EXPORT_ID=t.STANDARD_DELETE_ID=t.STANDARD_ADD_ID=t.BASE_CSS_CLASS=void 0,t.BASE_CSS_CLASS="oj-sp-collection-container",t.STANDARD_ADD_ID="add",t.STANDARD_DELETE_ID="delete",t.STANDARD_EXPORT_ID="export",t.STANDARD_COLUMNS_ID="columns",t.STANDARD_MULTI_COL_SORT_ID="multi-column-sort",t.STANDARD_ADD_ACTION={id:t.STANDARD_ADD_ID,label:"add",icon:"oj-ux-ico-plus"},t.STANDARD_DELETE_ACTION={id:t.STANDARD_DELETE_ID,label:"delete"},t.STANDARD_EXPORT_ACTION={id:t.STANDARD_EXPORT_ID,label:"exportIcon",icon:"oj-ux-ico-download"},t.STANDARD_COLUMNS_ACTION={id:t.STANDARD_COLUMNS_ID,label:"columns",icon:"oj-ux-ico-layout-2-col"},t.STANDARD_MULTI_COL_SORT_ACTION={id:t.STANDARD_MULTI_COL_SORT_ID,label:"sortButton"},t.FUNCTIONAL_TOOLBAR_MODEL={controlModels:[],label:"functional",classes:"oj-sp-collection-container-functional-toolbar",controlsSize:i.ControlSize.SMALL,responsiveOrder:2},t.LAYOUT_TOOLBAR_MODEL={controlModels:[],label:"layout",classes:"oj-sp-collection-container-layout-toolbar",controlsSize:i.ControlSize.SMALL,responsiveOrder:1},t.SORT_ICON="oj-ux-ico-sort",t.OVERFLOW_BUTTON_ICON="oj-ux-ico-overflow-h",t.MAXIMUM_PRIMARY_ACTIONS=3,t.MAXIMUM_PRIMARY_GROUP_ACTIONS=6,t.MAXIMUM_SECONDARY_ACTIONS=6,t.MAXIMUM_SECONDARY_GROUP_ACTIONS=3,t.MAXIMUM_SORT_OPTIONS=6,t.MAXIMUM_CONTEXT_OPTIONS=7,t.MAXIMUM_GROUP_OPTIONS=6,t.SMALL_SCREEN_MEDIA_QUERY="(max-width: 599px)",t.DEFAULT_MULTI_SORT_CONDITIONS_COUNT=2,t.GROUP_SUMMARY_LABEL_MIN_WIDTH=72,t.GROUP_SUMMARY_MARGIN_WIDTH=8,t.GROUP_SUMMARY_LABEL_CLASS="oj-text-color-secondary oj-typography-body-xl",t.GROUP_SUMMARY_VALUE_CLASS="oj-text-color-primary oj-typography-body-xl oj-typography-bold"})),define("oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPEN_OPTIONS=t.ACTION_ATTRS_SEPARATOR=t.BUTTON_DISPLAY_LABEL=t.BUTTON_DISPLAY_ALL=t.BUTTONSET_CHROMING_OUTLINED=t.MENU_BUTTON_CHROMING_OUTLINED=t.BUTTON_CHROMING_OUTLINED=t.SMALL_SCREEN_MAX_WIDTH=t.SMALL_SCREEN_MEDIA_QUERY=t.LAYOUT_TOOLBAR_PADDING=t.FUNCTIONAL_TOOLBAR_PADDING=t.LAYOUT_TOOLBAR_LABEL=t.FUNCTIONAL_TOOLBAR_LABEL=void 0,t.FUNCTIONAL_TOOLBAR_LABEL="functional",t.LAYOUT_TOOLBAR_LABEL="layout",t.FUNCTIONAL_TOOLBAR_PADDING=0,t.LAYOUT_TOOLBAR_PADDING=48,t.SMALL_SCREEN_MEDIA_QUERY="(max-width: 599px)",t.SMALL_SCREEN_MAX_WIDTH=599,t.BUTTON_CHROMING_OUTLINED="outlined",t.MENU_BUTTON_CHROMING_OUTLINED="outlined",t.BUTTONSET_CHROMING_OUTLINED="outlined",t.BUTTON_DISPLAY_ALL="all",t.BUTTON_DISPLAY_LABEL="label",t.ACTION_ATTRS_SEPARATOR="|",t.OPEN_OPTIONS={initialFocus:"firstItem",position:{my:{horizontal:"end"},at:{horizontal:"end"}}}})),define("oj-sp/internal-resources/components/collection-toolbars/collection-toolbar-control",["require","exports","preact","./collection-toolbars-types","./collection-toolbars-constants","ojs/ojvcomponent-remounter","ojs/ojbutton","ojs/ojmenu","ojs/ojoption"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionToolbarControl=void 0;t.CollectionToolbarControl=e=>(0,i.h)(i.Fragment,null,h(e.controlModel.elementType)&&n(e),m(e.controlModel.elementType)&&r(e),g(e.controlModel.elementType)&&p(e));const n=e=>{var t,o;const{componentBaseCssClass:a,componentId:n,controlModel:r}=e,l=r.id===r.actionType?f(n,r.actionType,"button"):f(n,r.actionType,r.id,"button"),d=y(a,r.actionType,"button");return(0,i.h)(i.Fragment,null,(0,i.h)("oj-button",{class:`${d} ${null!==(t=e.controlSize)&&void 0!==t?t:""}`,id:l,disabled:"disabled"===r.display,label:r.label,display:r.icon?r.icon.display:s.BUTTON_DISPLAY_ALL,chroming:null!==(o=r.chroming)&&void 0!==o?o:s.BUTTON_CHROMING_OUTLINED,onojAction:t=>{var i;return null===(i=e.onSpAction)||void 0===i?void 0:i.call(e,v(t))},"data-action-type":r.actionType,"data-action-id":r.id},null!=r.icon&&(0,i.h)("span",{slot:"startIcon",className:r.icon.class}),(0,i.h)("span",null,r.label)))},r=e=>e.controlModel.icon?d(e):l(e),l=e=>{var t,o;const{componentId:a,componentBaseCssClass:n,controlModel:r}=e,l=f(a,r.actionType,"menu_button"),d=y(n,r.actionType,"menu-button");return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu-button",{key:l,id:l,class:`${d} ${null!==(t=e.controlSize)&&void 0!==t?t:""}`,chroming:null!==(o=r.chroming)&&void 0!==o?o:s.MENU_BUTTON_CHROMING_OUTLINED},(0,i.h)("span",null,r.label),c(e)))},d=e=>{var t,o;const{componentId:a,componentBaseCssClass:n,controlModel:r}=e,l=f(a,r.actionType,"icon_menu_button"),d=y(n,r.actionType,"menu-button");return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu-button",{key:l,id:l,class:`${d} ${null!==(t=e.controlSize)&&void 0!==t?t:""}`,chroming:null!==(o=r.chroming)&&void 0!==o?o:s.MENU_BUTTON_CHROMING_OUTLINED,display:r.icon.display},(0,i.h)("span",{slot:r.icon.slot,className:r.icon.class}),(0,i.h)("span",null,r.label),c(e)))},c=e=>{const{componentBaseCssClass:t,componentId:o,controlModel:a}=e,n=f(o,a.actionType,"menu"),r=y(t,a.actionType,"menu");return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu",{slot:"menu",key:n,id:n,class:r,onojMenuAction:t=>{var i;return null===(i=e.onSpAction)||void 0===i?void 0:i.call(e,b(t.detail.selectedValue))},openOptions:s.OPEN_OPTIONS},a.actions.map((e,n,r)=>{var l,d,c,p;const h=(null===(l=e.actions)||void 0===l?void 0:l.length)>0?"menu_label":e.id,m=`${e.actionType}${s.ACTION_ATTRS_SEPARATOR}${h}`;return(0,i.h)(i.Fragment,{key:m},(null===(d=a.overflowMenuOptions)||void 0===d?void 0:d.displayActionsDivider)&&(g=e,v=r,(b=n)>0&&g.actionType!==v[b-1].actionType)&&(0,i.h)("oj-option",{class:t+"-actions-divider"}),(0,i.h)("oj-option",{key:h,"data-action-id":m,value:m,disabled:"disabled"===e.display},u(e,a),(0,i.h)("span",null,e.label),(null===(c=e.actions)||void 0===c?void 0:c.length)>0&&(0,i.h)("oj-menu",{id:f(o,e.actionType,"sub_menu"),class:y(t,e.actionType,"sub-menu")},null===(p=e.actions)||void 0===p?void 0:p.map(t=>{const o=`${t.actionType}${s.ACTION_ATTRS_SEPARATOR}${t.id}`;return(0,i.h)("oj-option",{key:t.id,"data-action-id":o,value:o,disabled:"disabled"===t.display},u(t,e),(0,i.h)("span",null,t.label))}))));var g,b,v})))},p=e=>{var t,o,n;const{componentBaseCssClass:r,componentId:l,controlModel:d}=e,c=f(l,d.actionType,"buttonset"),p=y(r,d.actionType,"buttonset");return(0,i.h)(a.Remounter,null,(0,i.h)("oj-buttonset-one",{key:c,id:c,class:`${p} ${null!==(t=e.controlSize)&&void 0!==t?t:""}`,chroming:null!==(o=d.chroming)&&void 0!==o?o:s.BUTTONSET_CHROMING_OUTLINED,value:d.selectedActionId?`${d.actionType}${s.ACTION_ATTRS_SEPARATOR}${d.selectedActionId}`:null,onvalueChanged:t=>((t,i)=>{var o;const s=t.detail.value?b(t.detail.value):null;"internal"!==t.detail.updatedFrom&&(null==s?void 0:s.actionId)===i.selectedActionId||null===(o=e.onSpAction)||void 0===o||o.call(e,s)})(t,d)},null===(n=d.actions)||void 0===n?void 0:n.map(e=>(0,i.h)("oj-option",{key:e.id,value:`${e.actionType}${s.ACTION_ATTRS_SEPARATOR}${e.id}`},e.label))))},u=(e,t)=>{var o;let s=null;return"all"===(null===(o=e.icon)||void 0===o?void 0:o.display)?s=e.icon.class:t.selectedActionId&&(s=t.selectedActionId===e.id?"oj-ux-ico-check oj-menu-item-icon":"oj-menu-item-icon"),null!=s&&(0,i.h)("span",{slot:"startIcon",class:s})},h=e=>[o.ElementType.BUTTON,o.ElementType.BUTTON_ICON,o.ElementType.BUTTON_ICON_TEXT].includes(e),m=e=>[o.ElementType.MENU_BUTTON,o.ElementType.MENU_BUTTON_START_ICON,o.ElementType.MENU_BUTTON_END_ICON].includes(e),g=e=>e===o.ElementType.BUTTON_SET,y=(e,t,...i)=>`${e}-${t}-${i.join("-")}`,f=(e,t,...i)=>{const o=i.join("_");return`${e}_${t.replace("-","_")}_${o}`},b=e=>{const t=e.indexOf(s.ACTION_ATTRS_SEPARATOR),i=e.substring(0,t);return{actionId:e.substring(t+1),actionType:i}},v=e=>{const t=e.target,i=t.getAttribute("data-action-type");return{actionId:t.getAttribute("data-action-id"),actionType:i}}})),define("oj-sp/internal-resources/components/collection-toolbars/collection-toolbar",["require","exports","preact","preact/compat","./collection-toolbar-control","ojs/ojtoolbar"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=(0,o.memo)((0,o.forwardRef)((e,t)=>{const{componentId:o,componentBaseCssClass:a,label:n,styleClass:r,toolbarControlModels:l}=e;if(l.length)return(0,i.h)("oj-toolbar",{"aria-label":n,class:""+r,ref:t},l.map(t=>(0,i.h)(s.CollectionToolbarControl,{key:`${t.actionType}_${t.id}`,componentId:o,componentBaseCssClass:a,controlModel:t,controlSize:e.toolbarControlsSize,onSpAction:e.onSpAction})))}),(e,t)=>e.toolbarControlModels===t.toolbarControlModels)})),define("oj-sp/internal-resources/components/collection-toolbars/collection-selector",["require","exports","preact","preact/compat","./collection-toolbars-types","ojs/ojkeyset","preact/hooks","ojs/ojselector"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionSelector=void 0,t.CollectionSelector=(0,o.forwardRef)((e,t)=>{const[o,r]=(0,n.useState)(!1),[l,d]=(0,n.useState)();(0,n.useEffect)(()=>{c()},[e.selectionData.selectorState]);const c=()=>{e.selectionData.selectorState===s.SelectorState.ALL&&(r(!1),d(new a.AllKeySetImpl)),e.selectionData.selectorState===s.SelectorState.NONE&&(d(new a.KeySetImpl),r(!1)),e.selectionData.selectorState===s.SelectorState.INDETERMINATE&&r(!0)},p=""===e.selectionData.resultsCountLabel&&e.isSmallScreen&&"on"===e.selectionData.selectorDisplay?e.selectionData.defaultResultsCountLabel:e.selectionData.resultsCountLabel;return(0,i.h)("div",{class:"oj-flex-bar-start",ref:t},"on"===e.selectionData.selectorDisplay&&(0,i.h)("oj-selector",{selectionMode:"all","aria-label":"select all",class:e.componentBaseCssClass+"-toolbar-selector oj-sp-collection-toolbars-selector",indeterminate:o,selectedKeys:l,onselectedKeysChanged:t=>{var i;null===(i=e.onSpAction)||void 0===i||i.call(e,(e=>{let t;return e instanceof a.KeySetImpl&&(t=s.SelectorState.NONE),e instanceof a.AllKeySetImpl&&(t=s.SelectorState.ALL),{actionId:t,actionType:s.ActionType.SELECTOR}})(t.detail.value))}}),p&&(0,i.h)("div",{"aria-label":p,"aria-live":"polite",class:e.componentBaseCssClass+"-results-label oj-sp-collection-toolbars-results-label oj-md-margin-6x-end oj-typography-semi-bold"},(0,i.h)("span",null,p)))})})),define("oj-sp/internal-resources/components/collection-toolbars/responsive-toolbar-calculator",["require","exports","./collection-toolbars-types","ojs/ojcontext","./collection-toolbars-constants"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsiveToolbarCalculator=void 0;class a{generateResponsiveOrderForControlModels(e){var t;const i=(null!==(t=e.responsiveOrder)&&void 0!==t?t:1)*a.RESPONSIVE_START_ORDER,o=e.controlModels;for(let e=0,t=o.length-1;e<o.length;e++,t--){const s=o[e];a.OVERFLOW_MENU_ACTION_TYPES.includes(s.controlModel.actionType)?s.responsiveOrder=i:s.controlModel.responsiveOrder?s.responsiveOrder=s.controlModel.responsiveOrder<i?i+s.controlModel.responsiveOrder:s.controlModel.responsiveOrder:s.responsiveOrder=i+t}}calculateToolbarControlsTotalWidth(e,t,i){const o=Array.from(t.children);let s=0,a=0;return e.forEach(e=>{if(e.controlModel.responsiveControlModel){const t=o[a++];e.responsiveControlModelWidth=this.getElementComputedWidth(t)}const t=o[a++],i=this.getElementComputedWidth(t);e.controlModelWidth=i,(!e.controlModel.actions||e.controlModel.actions.length>0)&&(s+=i)}),s+=this.getElementTotalPadding(t,i),s}calculateToolbarTotalWidth(e,t,i){let o=0;return e.forEach(e=>{var t;a.OVERFLOW_MENU_ACTION_TYPES.includes(e.controlModel.actionType)?(null===(t=e.controlModel.actions)||void 0===t?void 0:t.length)>0&&(o+=e.controlModelWidth):o+=e.controlModelWidth}),o+=this.getElementTotalPadding(t,i),o}getSortedControlModelsByDescendingOrder(e,t){const i=[];return e&&i.push(...e.controlModels),t&&i.push(...t.controlModels),i.sort((e,t)=>t.responsiveOrder-e.responsiveOrder),i}calculateSelectorContainerWidth(e){let t=0;return Array.from(e.children).forEach(e=>{t+=this.getElementComputedWidth(e)}),t}calculateTextWidth(e,t){const i=document.createElement("div");this.setHiddenElementDefaultStyles(i),i.innerText=e,t.classNames&&(i.className=t.classNames),t.font&&(i.style.font=t.font),document.body.appendChild(i);const o=this.getElementComputedWidth(i);return i.remove(),o}computeResponsiveToolbars(e,t,o,s){const a=(e.get(i.ToolbarWidthCalculatorKey.FUNCTIONAL_TOOLBAR_WIDTH)||0)+(e.get(i.ToolbarWidthCalculatorKey.LAYOUT_TOOLBAR_WIDTH)||0),n=e.get(i.ToolbarWidthCalculatorKey.TOOLBAR_AVAILABLE_WIDTH)-(e.get(i.ToolbarWidthCalculatorKey.RESPONSIVE_SELECTION_CONTAINER_WIDTH)||0),{hiddenControlModelIds:r,switchControlModelIds:l}=this.computeResponsiveControlModelIds(s,a,n);return{functionalControlModels:this.getResponsiveControlModels(t,r,l),layoutControlModels:this.getResponsiveControlModels(o,r,l)}}getFlattenedToolbarControlModels(e){const t=[];return e&&e.controlModels.forEach(e=>{if(e.responsiveControlModel){const i=Object.assign(Object.assign({},e.responsiveControlModel),{id:e.id+"_responsive"});t.push(i)}t.push(e)}),t}getResponsiveToolbarModel(e){const t=[];e.controlModels.forEach(e=>{const i={controlModel:e,controlModelWidth:0,responsiveOrder:0};t.push(i)});return Object.assign(Object.assign({},e),{controlModels:t})}async recomputeSelectorContainerWidth(e,t,i,s){let n=0;if(t)if(0===a.SELECTOR_WIDTH){const e=document.createElement("div");e.className="oj-flex-bar-start",this.setHiddenElementDefaultStyles(e);const t=document.createElement("oj-selector");e.appendChild(t),i.append(e),await o.getContext(e).getBusyContext().whenReady(),n=this.getElementComputedWidth(e),a.SELECTOR_WIDTH=n,e.remove()}else n=a.SELECTOR_WIDTH;if(e){const t=s+"-results-label oj-md-margin-6x-end oj-typography-semi-bold oj-flex-bar-start";n+=this.calculateTextWidth(e,{classNames:t})}return n}async calculateToolbarControlModelsWidth(e,t,i,o){for(let s=0;s<t.length;s++){const a=t[s],n=e.find(e=>e.controlModel.id===a.controlModel.id);if(!n||this.didToolbarControlModelUpdate(n.controlModel,a.controlModel)){const e=0!==s||s!==t.length-1;a.controlModelWidth=await this.getToolbarControlModelWidth(a.controlModel,i,o,e),a.controlModel.responsiveControlModel&&(a.responsiveControlModelWidth=await this.getToolbarControlModelWidth(a.controlModel.responsiveControlModel,i,o,e))}else a.controlModelWidth=n.controlModelWidth,a.controlModel.responsiveControlModel&&(a.responsiveControlModelWidth=n.responsiveControlModelWidth)}}didToolbarControlModelUpdate(e,t){var i,o;return e.label!==t.label||e.display!==t.display||e.elementType!==t.elementType||(null===(i=e.actions)||void 0===i?void 0:i.length)!==(null===(o=t.actions)||void 0===o?void 0:o.length)}createElementAndSetDefaultStyles(e,t,o,s){let a;e===i.ElementType.BUTTON?a=document.createElement("oj-button"):e===i.ElementType.MENU_BUTTON?a=document.createElement("oj-menu-button"):e===i.ElementType.BUTTON_SET&&(a=document.createElement("oj-buttonset-one")),this.setHiddenElementDefaultStyles(a),a.className=s;const n="borderless"===o.chroming?"--oj-toolbar-borderless-button-margin":"--oj-toolbar-button-margin";return a.style.marginRight=getComputedStyle(document.documentElement).getPropertyValue(n),t&&(a.style.marginLeft=a.style.marginRight),a.setProperties(o),a.setAttribute("data-oj-context",""),a}setHiddenElementDefaultStyles(e){e.style.visibility="hidden",e.style.height="0px",e.style.position="absolute",e.style.zIndex="1000000"}getButtonIconSpanElement(e,t){const i=document.createElement("span");return i.slot=t,i.className=e,i}getButtonLabelSpanElement(e){const t=document.createElement("span");return t.innerText=e,t}getDummyMenuOption(){const e=document.createElement("oj-option");e.innerText="dummy";const t=document.createElement("oj-menu");return t.setAttribute("slot","menu"),t.appendChild(e),t}async computeButtonWidth(e,t,a,n){var r;const l={disabled:"disabled"===e.display,display:e.icon?e.icon.display:s.BUTTON_DISPLAY_ALL,chroming:null!==(r=e.chroming)&&void 0!==r?r:s.BUTTON_CHROMING_OUTLINED},d=this.createElementAndSetDefaultStyles(i.ElementType.BUTTON,n,l,a);null!=e.icon&&e.icon.class&&d.appendChild(this.getButtonIconSpanElement(e.icon.class,e.icon.slot));const c=this.getButtonLabelSpanElement(e.label);d.appendChild(c),t.append(d),await o.getContext(d).getBusyContext().whenReady();const p=this.getElementComputedWidth(d);return d.remove(),p}async computeMenuButtonWidth(e,t,a,n){var r,l;const d={chroming:null!==(r=e.chroming)&&void 0!==r?r:s.MENU_BUTTON_CHROMING_OUTLINED,display:null===(l=e.icon)||void 0===l?void 0:l.display},c=this.createElementAndSetDefaultStyles(i.ElementType.MENU_BUTTON,n,d,a);null!=e.icon&&e.icon.class&&c.appendChild(this.getButtonIconSpanElement(e.icon.class,e.icon.slot));const p=this.getButtonLabelSpanElement(e.label);if(c.appendChild(p),e.elementType!==i.ElementType.MENU_BUTTON_END_ICON){const e=this.getDummyMenuOption();c.appendChild(e)}t.append(c),await o.getContext(c).getBusyContext().whenReady();const u=this.getElementComputedWidth(c);return c.remove(),u}async computeButtonSetWidth(e,t,a,n){var r;const l={chroming:null!==(r=e.chroming)&&void 0!==r?r:s.BUTTONSET_CHROMING_OUTLINED},d=this.createElementAndSetDefaultStyles(i.ElementType.BUTTON_SET,n,l,a);e.actions.forEach(e=>{const t=document.createElement("oj-option");t.value=`${e.actionType}${s.ACTION_ATTRS_SEPARATOR}${e.id}`,t.innerText=e.label,d.appendChild(t)}),t.append(d),await o.getContext(d).getBusyContext().whenReady();const c=this.getElementComputedWidth(d);return d.remove(),c}async getToolbarControlModelWidth(e,t,o,s){return[i.ElementType.BUTTON,i.ElementType.BUTTON_ICON,i.ElementType.BUTTON_ICON_TEXT].includes(e.elementType)?await this.computeButtonWidth(e,t,o,s):[i.ElementType.MENU_BUTTON,i.ElementType.MENU_BUTTON_END_ICON,i.ElementType.MENU_BUTTON_START_ICON].includes(e.elementType)?await this.computeMenuButtonWidth(e,t,o,s):e.elementType===i.ElementType.BUTTON_SET?await this.computeButtonSetWidth(e,t,o,s):0}computeResponsiveControlModelIds(e,t,i){var o;const s=[],n=[];if(t>i){let r=e.length-1;for(;t>i&&r>=0;){const i=e[r--];a.OVERFLOW_MENU_ACTION_TYPES.includes(i.controlModel.actionType)?0===(null===(o=i.controlModel.actions)||void 0===o?void 0:o.length)&&(t+=i.controlModelWidth):i.controlModel.responsiveControlModel?(t-=i.controlModelWidth,t+=i.responsiveControlModelWidth,n.push(i.controlModel.id)):i.controlModel.positionFixed||(t-=i.controlModelWidth,s.push(i.controlModel.id))}t>i&&s.push(...this.getHiddenControlModelIdsFromFixed(e,t,i,n))}return{hiddenControlModelIds:s,switchControlModelIds:n}}getHiddenControlModelIdsFromFixed(e,t,i,o){const s=[],a=e.filter(e=>!!e.controlModel.positionFixed||!!e.responsiveControlModelWidth);for(;t>i&&a.length>0;){const e=a.pop();e.responsiveControlModelWidth?(t-=e.responsiveControlModelWidth,o.splice(o.indexOf(e.controlModel.id),1)):t-=e.controlModelWidth,s.push(e.controlModel.id)}return s}getResponsiveControlModels(e,t,i){var o;const s=[];if(e){const n=[];let r;e.controlModels.forEach(e=>{i.includes(e.controlModel.id)?s.push(Object.assign({},e.controlModel.responsiveControlModel)):t.includes(e.controlModel.id)?n.push(Object.assign({},e.controlModel)):s.push(Object.assign({},e.controlModel)),a.OVERFLOW_MENU_ACTION_TYPES.includes(e.controlModel.actionType)&&(r=s.length-1)}),r>-1&&n.length>0?s[r].actions=n.concat(s[r].actions):r>-1&&0===(null===(o=s[r].actions)||void 0===o?void 0:o.length)&&s.splice(r,1)}return s}getElementComputedWidth(e){const t=getComputedStyle(e),i=parseFloat(t.paddingRight)+parseFloat(t.paddingLeft),o=parseFloat(t.marginRight)+parseFloat(t.marginLeft);return parseFloat(t.width)+i+o}getElementTotalPadding(e,t=0){if(e){const t=getComputedStyle(e);return parseFloat(t.paddingRight)+parseFloat(t.paddingLeft)}return t}}a.RESPONSIVE_START_ORDER=100,a.OVERFLOW_MENU_ACTION_TYPES=[i.ActionType.MORE_ACTIONS,i.ActionType.LAYOUT_ACTIONS],a.SELECTOR_WIDTH=0,t.ResponsiveToolbarCalculator=a})),define("css!oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-styles",[],(function(){})),define("oj-sp/internal-resources/components/collection-toolbars/collection-toolbars",["require","exports","preact","preact/hooks","preact/compat","./collection-toolbar","./collection-selector","./collection-toolbars-types","./collection-toolbars-constants","./responsive-toolbar-calculator","css!./collection-toolbars-styles.css"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const c=(e,t,o)=>(0,i.h)(n.CollectionSelector,{ref:o,componentBaseCssClass:e.componentBaseCssClass,selectionData:e.selectionModel,onSpAction:e.onSpAction,isSmallScreen:t}),p=(e,t,o,s,n,r)=>(0,i.h)(a.default,{ref:s,key:t,componentId:e.componentId,componentBaseCssClass:e.componentBaseCssClass,label:t,styleClass:r,toolbarControlModels:o,toolbarControlsSize:n,onSpAction:e.onSpAction}),u=e=>"on"===(null==e?void 0:e.selectorDisplay)||!!(null==e?void 0:e.resultsCountLabel);t.default=(0,s.memo)(e=>{const t=(0,o.useRef)(),s=(0,o.useRef)(new d.ResponsiveToolbarCalculator).current;let a;const n=(0,o.useRef)(!1),h=(0,o.useRef)([]),m=(0,o.useRef)(new Map).current,[g,y]=(0,o.useState)({functionalControlModels:s.getFlattenedToolbarControlModels(e.functionalToolbarModel)}),[f,b]=(0,o.useState)({layoutControlModels:s.getFlattenedToolbarControlModels(e.layoutToolbarModel)}),v=(0,o.useRef)(),j=(0,o.useRef)(),A=(0,o.useRef)(!0),C=(0,o.useRef)(!1),E=(0,o.useRef)(!1),T=(0,o.useRef)(!1),_=(0,o.useRef)(!1),S=(0,o.useRef)(),x=(0,o.useRef)(),O=(0,o.useRef)();(0,o.useEffect)(()=>{var t,i;(C.current||E.current)&&(C.current&&(null===(t=e.functionalToolbarModel)||void 0===t?void 0:t.controlModels.length)>0&&(N(),C.current=!1),E.current&&(null===(i=e.layoutToolbarModel)||void 0===i?void 0:i.controlModels.length)>0&&(P(),E.current=!1),I())},[C.current,E.current]),(0,o.useEffect)(()=>{A.current||(T.current=u(e.selectionModel),R(e.selectionModel))},[e.selectionModel]),(0,o.useEffect)(()=>{if(e.functionalToolbarModel&&!A.current)if(v.current){const t=v.current.controlModels;v.current=s.getResponsiveToolbarModel(e.functionalToolbarModel),L(t,v.current.controlModels)}else e.functionalToolbarModel.controlModels.length>0&&(y({functionalControlModels:s.getFlattenedToolbarControlModels(e.functionalToolbarModel)}),C.current=!0)},[e.functionalToolbarModel]),(0,o.useEffect)(()=>{if(e.layoutToolbarModel&&!A.current)if(j.current){const t=j.current.controlModels;j.current=s.getResponsiveToolbarModel(e.layoutToolbarModel),M(t,j.current.controlModels)}else e.layoutToolbarModel.controlModels.length>0&&(b({layoutControlModels:s.getFlattenedToolbarControlModels(e.layoutToolbarModel)}),E.current=!0)},[e.layoutToolbarModel]),(0,o.useEffect)(()=>{G(),U();return m.get(r.ToolbarWidthCalculatorKey.TOOLBAR_AVAILABLE_WIDTH)>0&&(w(),_.current=!0),A.current=!1,z},[]);const w=()=>{var t,i,o,s;(u(e.selectionModel)||(null===(t=e.functionalToolbarModel)||void 0===t?void 0:t.controlModels.length)>0||(null===(i=e.layoutToolbarModel)||void 0===i?void 0:i.controlModels.length)>0)&&(u(e.selectionModel)&&D(),(null===(o=e.functionalToolbarModel)||void 0===o?void 0:o.controlModels.length)>0&&(N(),C.current=!1),(null===(s=e.layoutToolbarModel)||void 0===s?void 0:s.controlModels.length)>0&&(P(),E.current=!1),I())},I=()=>{h.current=s.getSortedControlModelsByDescendingOrder(v.current,j.current),H()},D=()=>{T.current=!0,F()},N=()=>{v.current=s.getResponsiveToolbarModel(e.functionalToolbarModel),k(),s.generateResponsiveOrderForControlModels(v.current)},P=()=>{j.current=s.getResponsiveToolbarModel(e.layoutToolbarModel),V(),s.generateResponsiveOrderForControlModels(j.current)},R=async i=>{if(i){let o=0;const a="on"===i.selectorDisplay;o=await s.recomputeSelectorContainerWidth(i.resultsCountLabel,a,t.current,e.componentBaseCssClass),m.set(r.ToolbarWidthCalculatorKey.SELECTION_CONTAINER_WIDTH,o),H()}},L=async(i,o)=>{const a=i||[],n=o||[];await s.calculateToolbarControlModelsWidth(a,n,t.current,e.functionalToolbarModel.controlsSize);const l=s.calculateToolbarTotalWidth(v.current.controlModels,S.current);m.set(r.ToolbarWidthCalculatorKey.FUNCTIONAL_TOOLBAR_WIDTH,l),s.generateResponsiveOrderForControlModels(v.current),h.current=s.getSortedControlModelsByDescendingOrder(v.current,j.current),H()},M=async(i,o)=>{var a;const n=i||[],d=o||[];await s.calculateToolbarControlModelsWidth(n,d,t.current,e.layoutToolbarModel.controlsSize);const c=(null===(a=v.current)||void 0===a?void 0:a.controlModels.length)>0?l.LAYOUT_TOOLBAR_PADDING:0,p=s.calculateToolbarTotalWidth(j.current.controlModels,x.current,c);m.set(r.ToolbarWidthCalculatorKey.LAYOUT_TOOLBAR_WIDTH,p),s.generateResponsiveOrderForControlModels(j.current),h.current=s.getSortedControlModelsByDescendingOrder(v.current,j.current),H()},F=()=>{const e=s.calculateSelectorContainerWidth(O.current);m.set(r.ToolbarWidthCalculatorKey.SELECTION_CONTAINER_WIDTH,e)},k=()=>{let e=0;S.current&&(e=s.calculateToolbarControlsTotalWidth(v.current.controlModels,S.current)),m.set(r.ToolbarWidthCalculatorKey.FUNCTIONAL_TOOLBAR_WIDTH,e)},V=()=>{var e;let t=0;if(x.current){const i=(null===(e=v.current)||void 0===e?void 0:e.controlModels.length)>0?l.LAYOUT_TOOLBAR_PADDING:0;t=s.calculateToolbarControlsTotalWidth(j.current.controlModels,x.current,i)}m.set(r.ToolbarWidthCalculatorKey.LAYOUT_TOOLBAR_WIDTH,t)},B=()=>{if(t.current){U();const e=m.get(r.ToolbarWidthCalculatorKey.TOOLBAR_AVAILABLE_WIDTH);e>0&&_.current?H():e>0&&!_.current&&(w(),_.current=!0)}},U=()=>{const e=t.current.getBoundingClientRect().width;m.set(r.ToolbarWidthCalculatorKey.TOOLBAR_AVAILABLE_WIDTH,e),n.current=e<=l.SMALL_SCREEN_MAX_WIDTH},H=()=>{$(),q()},$=()=>{if(T.current){const e=n.current?0:m.get(r.ToolbarWidthCalculatorKey.SELECTION_CONTAINER_WIDTH)||0;m.set(r.ToolbarWidthCalculatorKey.RESPONSIVE_SELECTION_CONTAINER_WIDTH,e)}else m.set(r.ToolbarWidthCalculatorKey.RESPONSIVE_SELECTION_CONTAINER_WIDTH,0)},q=()=>{const e=s.computeResponsiveToolbars(m,v.current,j.current,h.current);y({functionalControlModels:e.functionalControlModels}),b({layoutControlModels:e.layoutControlModels})},G=()=>{const e=t.current;e&&(a=new ResizeObserver(()=>requestAnimationFrame(B)),a.observe(e))},z=()=>{a&&a.disconnect()},Y=n.current&&T.current;return(0,i.h)(i.Fragment,null,(0,i.h)("div",{class:"oj-sp-collection-toolbars oj-flex-item oj-sm-12 "+(Y?"":"oj-flex-bar"),ref:t},(t=>{var o,s;const a="oj-flex-bar-middle oj-sm-flex-wrap-nowrap "+(null===(o=e.functionalToolbarModel)||void 0===o?void 0:o.classes);let r="oj-flex-bar-end oj-sm-flex-wrap-nowrap "+(null===(s=e.layoutToolbarModel)||void 0===s?void 0:s.classes);return r+=e.functionalToolbarModel?" oj-sm-padding-12x-start":"",t?(0,i.h)(i.Fragment,null,(0,i.h)("div",{class:`oj-flex-bar ${e.componentBaseCssClass}-toolbars-row`},g.functionalControlModels.length>0&&p(e,e.functionalToolbarModel.label,g.functionalControlModels,S,e.functionalToolbarModel.controlsSize,a),f.layoutControlModels.length>0&&p(e,e.layoutToolbarModel.label,f.layoutControlModels,x,e.layoutToolbarModel.controlsSize,r)),(0,i.h)("div",{class:`oj-flex-bar ${e.componentBaseCssClass}-selection-row`},e.selectionModel&&c(e,n.current,O))):(0,i.h)(i.Fragment,null,e.selectionModel&&c(e,n.current,O),g.functionalControlModels.length>0&&p(e,e.functionalToolbarModel.label,g.functionalControlModels,S,e.functionalToolbarModel.controlsSize,a),f.layoutControlModels.length>0&&p(e,e.layoutToolbarModel.label,f.layoutControlModels,x,e.layoutToolbarModel.controlsSize,r))})(Y)))},(e,t)=>t.functionalToolbarModel===e.functionalToolbarModel&&t.layoutToolbarModel===e.layoutToolbarModel&&t.selectionModel===e.selectionModel)})),define("oj-sp/internal-resources/components/collection-toolbars/loader",["require","exports","./collection-toolbars"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionToolbars=void 0,t.CollectionToolbars=i.default})),define("text!oj-sp/smart-filters/component.json",[],(function(){return'{"name":"smart-filters","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Smart Filters","description":"Smart Filters component is a search input text with advanced filtering capabilities.","type":"composite","dependencies":{"oj-dynamic-form":"15.1.1","oj-dynamic-shared":"15.1.1","oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-data-provider":"2404.0.0","oj-sp-fa-css":"2404.0.0","oj-sp-filter-chip":"2404.0.0","oj-sp-overflow":"2404.0.0"},"extension":{"catalog":{"category":"Redwood Controls & Navigation","coverImage":"extension/catalog/images/ico-smart-filter-48.svg","tags":["Early Adopter","Redwood","visual-builder-only"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Smart%20Filters&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectrasmartfilters.html"},"vbdt":{"pi":{"layouts":{"data":{"customizers":[{"propertyName":"askHint"},{"propertyName":"filtersMetadata"},{"propertyName":"resultsData"},{"propertyName":"searchContext"},{"propertyName":"suggestionFilters"},{"propertyName":"suggestions"},{"propertyName":"totalCount"},{"propertyName":"value"}]},"general":{"customizers":[{"displayName":"Expanded","propertyName":"displayOptions.expanded"}]}}},"visibility":"oracleInternal"}},"icon":{"iconPath":"extension/catalog/images/ico-smart-filter-48.svg"},"properties":{"appliedFilters":{"description":"Current applied filters.","displayName":"Applied Filters","writeback":true,"type":"Array","status":[{"type":"deprecated","since":"2101.0.0","description":"Use value property instead."}]},"askHint":{"description":"Current ask hint.","displayName":"Ask Hint","translatable":true,"type":"string"},"autofocus":{"description":"Autofocus is a Boolean that reflects the autofocus attribute, if it is set to true then the associated component will get input focus when the page is loaded. Setting this property doesn\'t set the focus to the component: it tells the browser to focus to it when the element is inserted in the document.","displayName":"Autofocus","type":"boolean","value":false},"displayOptions":{"description":"Display options.","displayName":"Display Options","type":"object|null","properties":{"expanded":{"description":"Expanded.","displayName":"Expanded","type":"string","value":"auto","enumValues":["auto","false","true"],"propertyEditorValues":{"auto":{"description":"Default value. Expanded on medium-to-up screens and collapsed on small screens if there are no applied filters. Expanded if there are applied filters.","displayName":"Auto"},"false":{"description":"Collapsed on all screens if there are no applied filters.","displayName":"False"},"true":{"description":"Expanded on all screens irrespective of applied filters.","displayName":"True"}}},"suggestionFiltersOverflow":{"description":"Suggestion Filters Overflow; show/hide More Filters chip","displayName":"Suggestion Filters Overflow","type":"string","value":"on","enumValues":["off","on"],"propertyEditorValues":{"off":{"description":"Hide the More Filters chip in the suggestion filters bar.","displayName":"Off"},"on":{"description":"Show the More Filters chip in the suggestion filters bar.","displayName":"On"}}},"autocompleteSource":{"description":"Visibility toggle for autocomplete suggestions source.","displayName":"Autocomplete Source","type":"string","value":"on","enumValues":["off","on"],"propertyEditorValues":{"off":{"description":"Hide autocomplete suggestions source in the suggestions drop-down for typeahead filtering.","displayName":"Off"},"on":{"description":"Show autocomplete suggestions source in the suggestions drop-down for typeahead filtering","displayName":"On"}}}}},"filtersMetadata":{"description":"Metadata defining filters.","displayName":"Filters Metadata","type":"object"},"resultsData":{"description":"Current results data.","displayName":"Results Data","type":"SmartSearchAndFilterDataProvider"},"searchContext":{"description":"PREVIEW: This is a preview API. Preview APIs are production quality, but can be changed on a major version without a deprecation path. Context delivered from resultsData having domain specific information.","displayName":"Search Context","readOnly":true,"type":"object","writeback":true},"suggestionFilters":{"description":"Current suggestion filters.","displayName":"Suggestion Filters","writeback":true,"type":"SuggestionFiltersDataProvider"},"suggestions":{"description":"Current suggestions.","displayName":"Suggestions","type":"SmartSuggestionChipsDataProvider"},"totalCount":{"description":"Total count.","displayName":"Total Count","type":"number","readOnly":true,"writeback":true},"translations":{"type":"object","description":"A collection of translated resources from the translation bundle, or null if this component has no resources. Resources may be accessed and overridden individually or collectively.","properties":{"msgNoData":{"type":"string"}}},"value":{"description":"Current applied filters.","displayName":"Value","writeback":true,"type":"Array<{ count?:number, dependencies?:string[], dynamicProps?: {[key: string]: FilterChipDynamicPropAutocomplete}, filter: string, filterLabel?: string, label: string, value: string | number[] | string[] | object }>","extension":{"vbdt":{"itemProperties":{"count":{"type":"number","displayName":"Count"},"dependencies":{"type":"string","displayName":"Dependencies"},"dynamicProps":{"type":"string","displayName":"Dynamic properties"},"filter":{"type":"string","displayName":"Filter"},"filterLabel":{"type":"string","displayName":"Filter label"},"label":{"type":"string","displayName":"Label"},"value":{"type":"string | number[] | string[] | object","displayName":"Value"}}}}}},"events":{},"methods":{"openSuggestions":{"displayName":"Open Suggestions","description":"Opens suggestions"}}}'})),define("text!oj-sp/smart-filters/smart-filters.html",[],(function(){return'<html><head></head><body><div class="oj-sp-smart-filters":class="[[{\n       \'oj-sp-smart-filters-collapsed\': !isExpanded(),\n       \'oj-sp-smart-filters-expanded\': isExpanded(),\n       \'oj-sp-smart-filters-md-up\': isMediumToUpScreen(),\n       \'oj-sp-smart-filters-sm\': isSmallScreen()\n     }]]"><div class="oj-sp-smart-filters-overflow-filter-chip-container-for-overflow-calculations"><oj-sp-filter-chip class="oj-sm-margin-2x-start"close-icon="never"label="[[appliedFiltersOverflowString]]"type="applied"></oj-sp-filter-chip></div><oj-bind-if test="[[!isExpanded()]]"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><oj-button chroming="borderless"class="oj-button-sm oj-sm-flex-0 oj-sp-smart-filters-expand-search-button"display="icons"on-oj-action="[[onExpandSearchButtonAction]]"><span class="oj-ux-ico-search"slot="startIcon"></span><oj-bind-text value="[[res.search]]"></oj-bind-text></oj-button><oj-bind-if test="[[shouldDisplaySuggestionFiltersContainer()]]"><oj-bind-if test="[[isMediumToUpScreen()]]"><oj-conveyor-belt :aria-label="[[res.suggestionFilters]]"class="oj-sm-flex-1 oj-sp-helper-overflow-hidden oj-sp-smart-filters-suggestion-filters"on-keydown="[[onSuggestionFiltersContainerKeyDown]]"role="list"><oj-bind-for-each data="[[suggestionFiltersObservable]]"><template data-oj-as="filterChip"><oj-sp-filter-chip count="[[filterChip.data.count]]"label="[[formatSuggestionFilterDisplayLabel(filterChip.data)]]"label-target-id="[[filterChip.data.labelTargetId]]"label-target-tab-index="[[filterChip.data.labelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onSuggestionFilterChipLabelAction]]"on-sp-value-count-action="[[onSuggestionFilterChipValueCountAction]]"value="[[formatSuggestionFilterDisplayValue(filterChip.data)]]"value-count-target-id="[[filterChip.data.valueCountTargetId]]"value-count-target-tab-index="[[filterChip.data.valueCountTargetTabIndex()]]"role="button"></oj-sp-filter-chip></template></oj-bind-for-each><oj-bind-if test="[[shouldDisplayMoreFiltersFilterChip()]]"><oj-sp-filter-chip class="oj-sp-smart-filters-more-filters-filter-chip"label="[[res.moreFilters]]"label-target-id="[[moreFiltersFilterChipLabelTargetId]]"label-target-tab-index="[[moreFiltersFilterChipLabelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onMoreFiltersFilterChipAction]]"></oj-sp-filter-chip></oj-bind-if></oj-conveyor-belt></oj-bind-if><oj-bind-if test="[[isSmallScreen()]]"><div :aria-label="[[res.suggestionFilters]]"class="oj-sm-flex-1 oj-sp-helper-overflow-hidden oj-sp-smart-filters-suggestion-filters"on-keydown="[[onSuggestionFiltersContainerKeyDown]]"role="list"><oj-sp-overflow><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><oj-bind-for-each data="[[suggestionFiltersObservable]]"><template data-oj-as="filterChip"><oj-sp-filter-chip class="oj-sm-flex-0"count="[[filterChip.data.count]]"label="[[formatSuggestionFilterDisplayLabel(filterChip.data)]]"label-target-id="[[filterChip.data.labelTargetId]]"label-target-tab-index="[[filterChip.data.labelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onSuggestionFilterChipLabelAction]]"on-sp-value-count-action="[[onSuggestionFilterChipValueCountAction]]"value="[[formatSuggestionFilterDisplayValue(filterChip.data)]]"value-count-target-id="[[filterChip.data.valueCountTargetId]]"value-count-target-tab-index="[[filterChip.data.valueCountTargetTabIndex()]]"role="button"></oj-sp-filter-chip></template></oj-bind-for-each><oj-bind-if test="[[shouldDisplayMoreFiltersFilterChip()]]"><oj-sp-filter-chip class="oj-sm-flex-0 oj-sp-smart-filters-more-filters-filter-chip"label="[[res.moreFilters]]"label-target-id="[[moreFiltersFilterChipLabelTargetId]]"label-target-tab-index="[[moreFiltersFilterChipLabelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onMoreFiltersFilterChipAction]]"></oj-sp-filter-chip></oj-bind-if></div></oj-sp-overflow></div></oj-bind-if></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[isExpanded()]]"><div class="oj-sp-smart-filters-search-bar-wrapper"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sp-helper-overflow-hidden oj-sp-helper-padding-1_25x-vertical oj-sp-smart-filters-search-bar":class="[[{\n             \'oj-focus\': hasInputTextFocus(),\n             \'oj-sm-padding-3x-horizontal\': isMediumToUpScreen(),\n             \'oj-sm-padding-4x-horizontal\': isSmallScreen()\n           }]]"on-click="[[onSearchBarClick]]"role="search":aria-label="[[res.accSearchLandmark]]"tabindex="0"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center"><a aria-hidden="true"class="oj-text-color-primary oj-sp-helper-text-decoration-none oj-sp-smart-filters-icon-anchor"href="#"on-click="[[onSearchIconClick]]"tabindex="-1"><span class="oj-ux-ico-search oj-sp-smart-filters-icon"></span></a></div><div class="oj-sm-flex-1 oj-sp-helper-overflow-hidden oj-sp-smart-filters-search-bar-content":class="[[{\n               \'oj-sm-margin-3x-start\': isMediumToUpScreen(),\n               \'oj-sm-margin-4x-start\': isSmallScreen()\n             }]]"><oj-bind-if test="[[$props.askHint &amp;&amp; isSmallScreen() &amp;&amp; !appliedFiltersObservableArray().length]]"><div class="oj-sp-smart-filters-ask-hint oj-typography-body-md"><oj-bind-text value="[[$props.askHint]]"></oj-bind-text></div></oj-bind-if><div :aria-label="[[res.appliedFilters]]"class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sp-smart-filters-applied-filters oj-sp-smart-filters-applied-filters-with-horizontal-gap"on-keydown="[[onAppliedFiltersContainerKeyDown]]"role="list"><oj-bind-if test="[[isMediumToUpScreen()]]"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sp-helper-overflow-x-auto"><oj-bind-for-each data="[[appliedFiltersObservableArray]]"><template data-oj-as="filterChip"><oj-bind-if test="[[filterChip.data.shouldRender]]"><oj-sp-filter-chip active="[[filterChip.data.active()]]"class="oj-sm-flex-0 oj-sp-smart-filters-applied-filter-chip":data-id="[[filterChip.data.id]]"has-popup="[[filterChip.data.hasPopup()]]"label="[[formatAppliedFilterDisplayLabel(filterChip.data)]]"on-sp-action="[[onAppliedFilterChipAction]]"on-sp-close="[[onAppliedFilterChipClose]]"on-sp-focus="[[onAppliedFilterChipFocus]]"target-id="[[filterChip.data.targetId]]"target-tab-index="[[filterChip.data.targetTabIndex()]]"type="applied"value="[[formatAppliedFilterDisplayValue(filterChip.data)]]"></oj-sp-filter-chip></oj-bind-if></template></oj-bind-for-each></div></oj-bind-if><oj-bind-if test="[[isSmallScreen()]]"><oj-sp-overflow class="oj-sp-smart-filters-applied-filters-overflow oj-sp-helper-overflow-x-auto"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><oj-bind-for-each data="[[appliedFiltersObservableArray]]"><template data-oj-as="filterChip"><oj-bind-if test="[[filterChip.data.shouldRender]]"><oj-sp-filter-chip class="oj-sm-flex-0 oj-sp-smart-filters-applied-filter-chip":data-id="[[filterChip.data.id]]"label="[[formatAppliedFilterDisplayLabel(filterChip.data)]]"on-sp-action="[[onAppliedFilterChipAction]]"on-sp-close="[[onAppliedFilterChipClose]]"on-sp-focus="[[onAppliedFilterChipFocus]]"target-id="[[filterChip.data.targetId]]"target-tab-index="[[filterChip.data.targetTabIndex()]]"type="applied"value="[[formatAppliedFilterDisplayValue(filterChip.data)]]"></oj-sp-filter-chip></oj-bind-if></template></oj-bind-for-each></div></oj-sp-overflow></oj-bind-if><oj-bind-if test="[[appliedFiltersOverflowCount()]]"><oj-sp-filter-chip class="oj-sm-margin-2x-start oj-sp-smart-filters-overflow-count"close-icon="never"label="[[appliedFiltersOverflowString]]"on-sp-action="[[onAppliedFilterChipOverflowAction]]"on-sp-focus="[[onAppliedFilterChipFocus]]"target-id="[[appliedFilterChipOverflowTargetId]]"target-tab-index="[[appliedFilterChipOverflowTargetTabIndex()]]"type="applied"></oj-sp-filter-chip></oj-bind-if><oj-bind-if test="[[isMediumToUpScreen()]]"><div class="oj-sm-flex-1 oj-sp-smart-filters-search-bar-input-text-container"><oj-input-text :aria-label="[[ $props.askHint !== null ? $props.askHint : res.search]]"autocomplete="off":id="[[ $uniqueId + \'_smart-filter-inputtext\' ]]"class="oj-sp-smart-filters-chromeless-input-text oj-sp-smart-filters-search-bar-input-text":class="[[{\n                                 \'oj-sm-padding-2x-start\': appliedFiltersObservableArray().length\n                               }]]"clear-icon="never"on-blur="[[onInputTextBlur]]"on-focus="[[onInputTextFocus]]"on-keyup="[[onInputTextKeyUp]]"on-raw-value-changed="[[onInputTextRawValueChanged]]"placeholder="[[ $props.askHint !== null ? $props.askHint : res.search]]"raw-value="{{inputTextRawValue}}"spellcheck="false"user-assistance-density="compact"value="{{inputTextValue}}"></oj-input-text></div></oj-bind-if></div></div></div></div><oj-bind-if test="[[shouldDisplaySuggestionFiltersContainer()]]"><oj-bind-if test="[[isMediumToUpScreen()]]"><oj-conveyor-belt :aria-label="[[res.suggestionFilters]]"class="oj-sm-margin-2x-top oj-sp-smart-filters-suggestion-filters"on-keydown="[[onSuggestionFiltersContainerKeyDown]]"role="list"><oj-bind-for-each data="[[suggestionFiltersObservable]]"><template data-oj-as="filterChip"><oj-sp-filter-chip count="[[filterChip.data.count]]"label="[[formatSuggestionFilterDisplayLabel(filterChip.data)]]"label-target-id="[[filterChip.data.labelTargetId]]"label-target-tab-index="[[filterChip.data.labelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onSuggestionFilterChipLabelAction]]"on-sp-value-count-action="[[onSuggestionFilterChipValueCountAction]]"value="[[formatSuggestionFilterDisplayValue(filterChip.data)]]"value-count-target-id="[[filterChip.data.valueCountTargetId]]"value-count-target-tab-index="[[filterChip.data.valueCountTargetTabIndex()]]"role="button"></oj-sp-filter-chip></template></oj-bind-for-each><oj-bind-if test="[[shouldDisplayMoreFiltersFilterChip()]]"><oj-sp-filter-chip class="oj-sp-smart-filters-more-filters-filter-chip"label="[[res.moreFilters]]"label-target-id="[[moreFiltersFilterChipLabelTargetId]]"label-target-tab-index="[[moreFiltersFilterChipLabelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onMoreFiltersFilterChipAction]]"></oj-sp-filter-chip></oj-bind-if></oj-conveyor-belt></oj-bind-if><oj-bind-if test="[[isSmallScreen()]]"><div :aria-label="[[res.suggestionFilters]]"class="oj-sm-margin-2x-top oj-sp-smart-filters-suggestion-filters"on-keydown="[[onSuggestionFiltersContainerKeyDown]]"role="list"><oj-sp-overflow><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><oj-bind-for-each data="[[suggestionFiltersObservable]]"><template data-oj-as="filterChip"><oj-sp-filter-chip class="oj-sm-flex-0"count="[[filterChip.data.count]]"label="[[formatSuggestionFilterDisplayLabel(filterChip.data)]]"label-target-id="[[filterChip.data.labelTargetId]]"label-target-tab-index="[[filterChip.data.labelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onSuggestionFilterChipLabelAction]]"on-sp-value-count-action="[[onSuggestionFilterChipValueCountAction]]"value="[[formatSuggestionFilterDisplayValue(filterChip.data)]]"value-count-target-id="[[filterChip.data.valueCountTargetId]]"value-count-target-tab-index="[[filterChip.data.valueCountTargetTabIndex()]]"role="button"></oj-sp-filter-chip></template></oj-bind-for-each><oj-bind-if test="[[shouldDisplayMoreFiltersFilterChip()]]"><oj-sp-filter-chip class="oj-sm-flex-0 oj-sp-smart-filters-more-filters-filter-chip"label="[[res.moreFilters]]"label-target-id="[[moreFiltersFilterChipLabelTargetId]]"label-target-tab-index="[[moreFiltersFilterChipLabelTargetTabIndex()]]"on-sp-focus="[[onSuggestionFilterChipFocus]]"on-sp-label-action="[[onMoreFiltersFilterChipAction]]"></oj-sp-filter-chip></oj-bind-if></div></oj-sp-overflow></div></oj-bind-if></oj-bind-if></oj-bind-if><div class="oj-helper-hidden-accessible"role="status"aria-live="polite"aria-relevant="additions"></div></div><oj-popup chrome="none"class="oj-sp-smart-filters-search-bar-popup":class="[[{\n            \'oj-color-invert oj-sp-color-invert-bg\': searchBarPopupBackground === \'mixed\'\n          }]]":id="[[searchBarPopupId]]"on-oj-close="[[onSearchBarPopupClose]]"position.at.horizontal="start"position.at.vertical="top"position.collision="none"position.my.horizontal="start"position.my.vertical="top":style.width="[[searchBarWidth()]]"><oj-defer><div class="oj-flex oj-sp-helper-padding-1_25x-vertical oj-sm-padding-4x-start oj-sm-padding-3x-end oj-sp-smart-filters-search-bar":class="[[{\n         \'oj-focus\': hasInputTextFocus()\n       }]]"on-click="[[onSearchBarClick]]"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-flex-start"><a aria-hidden="true"class="oj-sp-helper-margin-1_5x-top oj-text-color-primary oj-sp-helper-text-decoration-none oj-sp-smart-filters-icon-anchor"href="#"on-click="[[onSearchIconClick]]"tabindex="-1"><span class="oj-ux-ico-search oj-sp-smart-filters-icon"></span></a></div><div class="oj-sm-flex-1 oj-sm-margin-4x-start oj-sp-smart-filters-search-bar-content"><div :aria-label="[[res.appliedFilters]]"class="oj-flex oj-sp-smart-filters-search-bar-items oj-sp-smart-filters-applied-filters"on-keydown="[[onAppliedFiltersContainerKeyDown]]"role="list"><oj-bind-for-each data="[[appliedFiltersObservableArray]]"><template data-oj-as="filterChip"><oj-sp-filter-chip class="oj-sm-flex-0 oj-sp-smart-filters-applied-filter-chip"label="[[formatAppliedFilterDisplayLabel(filterChip.data)]]"on-sp-action="[[onAppliedFilterChipAction]]"on-sp-close="[[onAppliedFilterChipClose]]"on-sp-focus="[[onAppliedFilterChipFocus]]"target-id="[[filterChip.data.targetId]]"target-tab-index="[[filterChip.data.targetTabIndex()]]"type="applied"value="[[formatAppliedFilterDisplayValue(filterChip.data)]]"></oj-sp-filter-chip></template></oj-bind-for-each><oj-input-text :aria-label="[[$props.askHint]]"autocomplete="off"class="oj-sm-flex-1 oj-sp-smart-filters-chromeless-input-text oj-sp-smart-filters-search-bar-input-text"clear-icon="never":id="[[ $uniqueId + \'_search-bar-inputtext\' ]]"on-blur="[[onInputTextBlur]]"on-focus="[[onInputTextFocus]]"on-keyup="[[onInputTextKeyUp]]"on-raw-value-changed="[[onInputTextRawValueChanged]]"placeholder="[[$props.askHint]]"raw-value="{{inputTextRawValue}}"user-assistance-density="compact"value="{{inputTextValue}}"></oj-input-text></div></div></div></oj-defer></oj-popup><oj-popup class="oj-sp-smart-filters-suggestions-popup":id="[[suggestionsPopupId]]"position.offset.y="[[POPUP_VERTICAL_OFFSET]]":style.width="[[searchBarWidth()]]"on-keydown="[[onSuggestionsPopUpKeyEsc]]"on-oj-close="[[onSuggestionsPopupClosed]]"><oj-defer><oj-list-view :aria-label="[[res.suggestions]]"class="oj-sp-smart-filters-keyboard-navigable-list-view"data="[[suggestionsListViewObservable]]"drill-mode="none"gridlines.item="hidden"on-current-item-changed="[[onSuggestionsListViewCurrentItemChanged]]"on-oj-item-action="[[onSuggestionsListViewItemAction]]"selected="{{suggestionsListViewSelected}}"selection-mode="single":id="[[suggestionsListViewId]]"><template slot="noData"><div class="oj-bg-neutral-20 oj-sp-smart-filters-suggestion-highlight"on-click="[[addKeywordFilterFromTextInputRawValue]]"><oj-list-item-layout><div aria-hidden="true"class="oj-sp-smart-filters-icon oj-ux-ico-search"slot="leading"></div><div class="oj-flex oj-sp-smart-filters-suggestion-chips-wrapper"><div class="oj-flex oj-sp-smart-filters-suggestion-chips"><span class="oj-sm-flex-0 oj-typography-body-sm oj-sp-smart-filters-suggestion-chip"><oj-bind-text value="[[inputTextRawValue]]"></oj-bind-text></span></div></div></oj-list-item-layout></div></template><template data-oj-as="item"slot="itemTemplate"><li :class="[[{\n            \'oj-helper-hidden\': !item.data || !item.data.chips || !item.data.chips.length\n          }]]":id="[[\'suggestionDropdown_\'+item.data.id]]"><oj-list-item-layout><div aria-hidden="true"class="oj-sp-smart-filters-icon":class="[[{\n                 \'oj-ux-ico-clock\': item.data.category === SUGGESTION_TYPE.HISTORY,\n                 \'oj-ux-ico-box\': item.data.category === SUGGESTION_TYPE.SUGGESTION,\n                 \'oj-ux-ico-search\': item.data.category === SUGGESTION_TYPE.AUTOCOMPLETE,\n               }]]"slot="leading"></div><div><div class="oj-sp-smart-filters-suggestion-chips-wrapper"><div :aria-label="[[getAriaLabel(item.data.chips)]]"class="oj-sp-smart-filters-suggestion-chips oj-helper-overflow-wrap-anywhere"><oj-bind-for-each data="[[item.data.chips]]"><template data-oj-as="chip"><span class="oj-typography-body-sm oj-sp-smart-filters-suggestion-chip"><oj-highlight-text match-text="[[inputTextRawValue]]"text="[[chip.data.label]]"></oj-highlight-text></span><oj-bind-if test="[[chip.observableIndex() < item.data.chips.length - 1]]"><div aria-orientation="vertical"class="oj-divider-start oj-sp-smart-filters-suggestion-chip-divider"role="separator"></div></oj-bind-if></template></oj-bind-for-each></div></div></div><oj-bind-if test="[[isAutocompleteSourceOn() &amp;&amp; item.data.category === SUGGESTION_TYPE.AUTOCOMPLETE]]"><div class="oj-typography-body-sm oj-text-color-secondary oj-helper-overflow-wrap-anywhere"slot="secondary"><oj-bind-text value="[[getSuggestionMetadata(item.data.chips)]]"></oj-bind-text></div></oj-bind-if></oj-list-item-layout></li></template></oj-list-view></oj-defer></oj-popup><oj-dialog class="oj-sp-smart-filters-sm-dialog oj-sp-helper-overflow-hidden oj-dialog-full":id="[[smallScreenPopupId]]"on-oj-close="[[onSmallScreenPopupClose]]"data-oj-context=""><oj-defer><div class="oj-sp-helper-full-viewport"><oj-switcher value="[[smallScreenPopupActiveView]]"><div class="oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"slot="moreFilters"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sm-padding-4x-start oj-sm-padding-3x-end oj-divider-bottom"><a :aria-label="[[res.back]]"class="oj-sm-flex-0 oj-text-color-primary oj-sp-helper-text-decoration-none oj-sp-smart-filters-icon-anchor oj-sp-smart-filters-sm-back-icon-anchor"href="#"on-click="[[onBackIconClick]]":title="[[res.back]]"><span aria-hidden="true"class="oj-ux-ico-chevron-left oj-sp-smart-filters-icon"></span></a><oj-input-text :aria-label="[[res.search]]"autocomplete="off":id="[[ $uniqueId + \'_small-screen-inputtext\' ]]"class="oj-sm-flex-1 oj-sp-smart-filters-chromeless-input-text oj-sm-margin-5x-start oj-sp-smart-filters-more-filters-input-text"clear-icon="never"on-raw-value-changed="[[onMoreFiltersInputTextRawValueChanged]]"placeholder="[[res.search]]"raw-value="{{moreFiltersInputTextRawValue}}"user-assistance-density="compact"value="{{moreFiltersInputTextValue}}"></oj-input-text><oj-bind-if test="[[moreFiltersInputTextRawValue]]"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sm-margin-2x-start"><a :aria-label="[[res.clearField]]"class="oj-sp-helper-text-decoration-none oj-sp-smart-filters-icon-anchor oj-sp-smart-filters-sm-dialog-more-filters-clear-anchor"href="#"on-click="[[onMoreFiltersClearAnchorClick]]":title="[[res.clearField]]"><span aria-hidden="true"class="oj-ux-ico-cancel-s oj-sp-smart-filters-icon oj-sp-smart-filters-clear-icon"></span></a></div></oj-bind-if></div><div class="oj-sm-flex-1 oj-sm-margin-2x-top oj-sp-helper-overflow-y-auto oj-sp-smart-filters-sm-dialog-more-filters-view-content"><oj-list-view :aria-label="[[res.moreFilters]]"class="oj-sp-helper-overflow-hidden oj-sp-smart-filters-keyboard-navigable-list-view"data="[[moreFiltersListViewObservable]]"drill-mode="none"gridlines.item="hidden"on-current-item-changed="[[onSmallScreenPopupMoreFiltersListViewCurrentItemChanged]]"on-oj-item-action="[[onMoreFiltersListViewItemAction]]"selected="{{smallScreenPopupMoreFiltersListViewSelected}}"selection-mode="single"translations.msg-no-data="[[res.msgNoData]]"><template data-oj-as="item"slot="itemTemplate"><li :id="[[\'moreFilters_\'+item.data.id]]"><oj-list-item-layout><oj-highlight-text match-text="[[moreFiltersInputTextRawValue]]"text="[[item.data.label]]"></oj-highlight-text></oj-list-item-layout></li></template></oj-list-view></div></div><div class="oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sp-helper-position-relative oj-sp-smart-filters-sm-dialog-search-view"slot="search"><div class="oj-flex oj-sp-smart-filters-search-bar-wrapper"><div class="oj-sm-width-full oj-flex oj-sp-helper-padding-1_5x-top oj-sm-padding-4x-start oj-sm-padding-3x-end oj-sm-padding-2x-bottom oj-sp-smart-filters-search-bar"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-flex-start"><a :aria-label="[[res.back]]"class="oj-sp-helper-margin-1_5x-top oj-text-color-primary oj-sp-helper-text-decoration-none oj-sp-smart-filters-sm-back-icon-anchor"href="#"on-click="[[onBackIconClick]]":title="[[res.back]]"><span aria-hidden="true"class="oj-ux-ico-chevron-left oj-sp-smart-filters-icon"></span></a></div><div class="oj-sm-flex-1 oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-margin-5x-start oj-sp-helper-overflow-hidden oj-sp-smart-filters-search-bar-content"><oj-bind-if test="[[appliedFiltersObservableArray().length]]"><div :aria-label="[[res.appliedFilters]]"class="oj-sm-flex-1 oj-flex oj-sp-helper-overflow-y-auto oj-sp-smart-filters-search-bar-items oj-sp-smart-filters-applied-filters"on-keydown="[[onAppliedFiltersContainerKeyDown]]"role="list"><oj-bind-for-each data="[[appliedFiltersObservableArray]]"><template data-oj-as="filterChip"><oj-sp-filter-chip active="[[filterChip.data.active()]]"class="oj-sm-flex-0 oj-sp-smart-filters-applied-filter-chip":data-id="[[filterChip.data.id]]"label="[[formatAppliedFilterDisplayLabel(filterChip.data)]]"on-sp-action="[[onAppliedFilterChipAction]]"on-sp-close="[[onAppliedFilterChipClose]]"on-sp-focus="[[onAppliedFilterChipFocus]]"target-id="[[filterChip.data.targetId]]"target-tab-index="[[filterChip.data.targetTabIndex()]]"type="applied"value="[[formatAppliedFilterDisplayValue(filterChip.data)]]"></oj-sp-filter-chip></template></oj-bind-for-each></div></oj-bind-if><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sp-smart-filters-search-bar-input-text-wrapper":class="[[{\n                       \'oj-sp-helper-margin-1_5x-top\': appliedFiltersObservableArray().length\n                     }]]"><oj-input-text :aria-label="[[$props.askHint]]"autocomplete="off":id="[[ $uniqueId + \'_small-screen-search-inputtext\' ]]"class="oj-sm-flex-1 oj-sp-smart-filters-chromeless-input-text oj-sp-smart-filters-search-bar-input-text"clear-icon="never"on-blur="[[onInputTextBlur]]"on-focus="[[onInputTextFocus]]"on-keyup="[[onInputTextKeyUp]]"on-raw-value-changed="[[onInputTextRawValueChanged]]"placeholder="[[$props.askHint]]"raw-value="{{inputTextRawValue}}"spellcheck="false"user-assistance-density="compact"value="{{inputTextValue}}"></oj-input-text><oj-bind-if test="[[inputTextRawValue]]"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sm-margin-2x-start"><a :aria-label="[[res.clearField]]"class="oj-sp-helper-text-decoration-none oj-sp-smart-filters-icon-anchor oj-sp-smart-filters-sm-dialog-clear-anchor"href="#"on-click="[[onClearIconClick]]":title="[[res.clearField]]"><span aria-hidden="true"class="oj-ux-ico-cancel-s oj-sp-smart-filters-icon oj-sp-smart-filters-clear-icon"></span></a></div></oj-bind-if></div></div></div></div><div class="oj-sm-flex-1 oj-divider-top oj-sp-helper-overflow-y-auto"><oj-bind-if test="[[shouldDisplaySmallScreenPopupFilterDynamicForm()]]"><oj-bind-dom config="[[filterDynamicFormConfigObservable]]"></oj-bind-dom></oj-bind-if><oj-bind-if test="[[!shouldDisplaySmallScreenPopupFilterDynamicForm()]]"><oj-list-view :aria-label="[[res.suggestions]]"class="oj-sp-helper-overflow-x-hidden oj-sp-smart-filters-keyboard-navigable-list-view oj-sp-smart-filters-sm-dialog-suggestions-list"data="[[suggestionsListViewObservable]]"drill-mode="none"gridlines.item="hidden"on-current-item-changed="[[onSmallScreenPopupSuggestionsListViewCurrentItemChanged]]"on-oj-item-action="[[onSuggestionsListViewItemAction]]"selected="{{smallScreenPopupSuggestionsListViewSelected}}"selection-mode="single"><template slot="noData"><div class="oj-bg-neutral-20 oj-sp-smart-filters-suggestion-highlight"on-click="[[addKeywordFilterFromTextInputRawValue]]"><oj-list-item-layout><div aria-hidden="true"class="oj-sp-smart-filters-icon oj-ux-ico-search"slot="leading"></div><div class="oj-flex oj-sp-smart-filters-suggestion-chips-wrapper"><div class="oj-flex oj-sp-smart-filters-suggestion-chips"><span class="oj-sm-flex-0 oj-typography-body-sm oj-sp-smart-filters-suggestion-chip"><oj-bind-text value="[[inputTextRawValue]]"></oj-bind-text></span></div></div></oj-list-item-layout></div></template><template data-oj-as="item"slot="itemTemplate"><li :class="[[{\n                        \'oj-helper-hidden\': !item.data || !item.data.chips || !item.data.chips.length\n                      }]]":id="[[\'suggestionDropdown_\'+item.data.id]]"><oj-list-item-layout><div aria-hidden="true"class="oj-sp-smart-filters-icon":class="[[{\n                             \'oj-ux-ico-clock\': item.data.category === SUGGESTION_TYPE.HISTORY,\n                             \'oj-ux-ico-box\': item.data.category === SUGGESTION_TYPE.SUGGESTION,\n                             \'oj-ux-ico-search\': item.data.category === SUGGESTION_TYPE.AUTOCOMPLETE\n                           }]]"slot="leading"></div><div><div class="oj-sp-smart-filters-suggestion-chips-wrapper"><div class="oj-sp-smart-filters-suggestion-chips oj-helper-overflow-wrap-anywhere"><oj-bind-for-each data="[[item.data.chips]]"><template data-oj-as="chip"><span class="oj-typography-body-sm oj-sp-smart-filters-suggestion-chip"><oj-highlight-text match-text="[[inputTextRawValue]]"text="[[chip.data.label]]"></oj-highlight-text></span><oj-bind-if test="[[chip.observableIndex() < item.data.chips.length - 1]]"><div aria-orientation="vertical"class="oj-divider-start oj-sp-smart-filters-suggestion-chip-divider"role="separator"></div></oj-bind-if></template></oj-bind-for-each></div></div></div></oj-list-item-layout></li></template></oj-list-view></oj-bind-if><oj-bind-if test="[[shouldDisplaySeeResultsButton()]]"><div class="oj-sp-smart-filters-see-results-button-wrapper"><oj-button chroming="callToAction"class="oj-sp-smart-filters-see-results-button"on-oj-action="[[onSeeResultsButtonAction]]"><span><oj-bind-text value="[[seeResultsString]]"></oj-bind-text></span></oj-button></div></oj-bind-if></div></div></oj-switcher></div></oj-defer></oj-dialog><oj-popup auto-dismiss="focusLoss"class="oj-sp-helper-overflow-y-auto oj-sp-smart-filters-filter-popup"data-oj-context="":id="[[filterPopupId]]"initial-focus="firstFocusable"on-oj-before-close="[[onFilterPopupBeforeClose]]"on-oj-close="[[onFilterPopupClose]]"position.offset.y="[[POPUP_VERTICAL_OFFSET]]"><oj-defer><oj-bind-if test="[[isMediumToUpScreen() &amp;&amp; !shouldDisplaySmallScreenPopupFilterDynamicForm()]]"><oj-bind-dom config="[[filterDynamicFormConfigObservable]]"></oj-bind-dom></oj-bind-if></oj-defer></oj-popup><oj-popup class="oj-sp-smart-filters-more-filters-popup":class="[[{\n            \'oj-sp-smart-filters-more-filters-popup-with-search-bar\': shouldDisplayMoreFiltersPopupSearchBar()\n          }]]":id="[[moreFiltersPopupId]]"position.offset.y="[[POPUP_VERTICAL_OFFSET]]"><oj-defer><div class="oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sp-smart-filters-more-filters-popup-main"><oj-bind-if test="[[shouldDisplayMoreFiltersPopupSearchBar()]]"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sm-padding-4x-start oj-sm-padding-2x-end oj-divider-bottom"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center"><span aria-hidden="true"class="oj-ux-ico-search oj-sp-smart-filters-icon"></span></div><oj-input-text :aria-label="[[res.search]]"autocomplete="off":id="[[ $uniqueId + \'_more-filter-inputtext\' ]]"class="oj-sm-flex-1 oj-sp-smart-filters-chromeless-input-text oj-sm-margin-4x-start oj-sp-smart-filters-more-filters-input-text"clear-icon="never"on-keyup="[[onMoreFiltersInputTextKeyUp]]"on-raw-value-changed="[[onMoreFiltersInputTextRawValueChanged]]"placeholder="[[res.search]]"raw-value="{{moreFiltersInputTextRawValue}}"user-assistance-density="compact"value="{{moreFiltersInputTextValue}}"></oj-input-text><oj-bind-if test="[[moreFiltersInputTextRawValue]]"><div class="oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sm-margin-2x-start"><a :aria-label="[[res.clearField]]"class="oj-sp-helper-text-decoration-none oj-sp-smart-filters-icon-anchor oj-sp-smart-filters-clear-anchor"href="#"on-click="[[onMoreFiltersClearAnchorClick]]":title="[[res.clearField]]"><span aria-hidden="true"class="oj-ux-ico-cancel-s oj-sp-smart-filters-icon oj-sp-smart-filters-clear-icon"></span></a></div></oj-bind-if></div></oj-bind-if><div class="oj-sm-flex-1":class="[[{\n             \'oj-sm-margin-2x-top\': shouldDisplayMoreFiltersPopupSearchBar()\n           }]]"><oj-list-view :aria-label="[[res.moreFilters]]"class="oj-sp-smart-filters-keyboard-navigable-list-view oj-sp-smart-filters-more-filters-popup-list-view"data="[[moreFiltersListViewObservable]]"drill-mode="none"gridlines.item="hidden"on-current-item-changed="[[onMoreFiltersListViewCurrentItemChanged]]"on-oj-item-action="[[onMoreFiltersListViewItemAction]]"selected="{{moreFiltersListViewSelected}}"selection-mode="single"translations.msg-no-data="[[res.msgNoData]]"><template data-oj-as="item"slot="itemTemplate"><li :id="[[\'moreFilters_\'+item.data.id]]"><oj-list-item-layout><div class="oj-flex oj-sm-justify-content-space-between oj-sp-smart-filters-more-filters-popup-list-item"><div class="oj-sp-helper-overflow-hidden oj-sp-smart-filters-more-filters-popup-list-item-label oj-typography-semi-bold"><oj-bind-text value="[[formatSuggestionFilterDisplayLabel(item.data)]]"></oj-bind-text></div><div class="oj-sp-helper-overflow-hidden oj-sp-smart-filters-more-filters-popup-list-item-value"><oj-bind-text value="[[formatSuggestionFilterDisplayValue(item.data)]]"></oj-bind-text></div></div></oj-list-item-layout></li></template></oj-list-view></div></div></oj-defer></oj-popup><template :id="[[filterDynamicFormTemplateId]]"><oj-dynamic-form class="oj-sp-smart-filters-filter-dynamic-form"display-properties="[[displayProperties]]":id="[[id]]"label-edge="[[labelEdge]]"metadata="[[metadata]]"metadata-path="[[metadataPath]]"on-value-changed="[[onValueChanged]]"valid="{{valid}}"value="[[value]]"></oj-dynamic-form></template></body></html>'})),define("oj-sp/data-provider/DataProviderBindingContext",["knockout","ojs/ojlogger","ojs/ojbindingprovider"],(e,t,i)=>{const o=/^(?:\{\{)([^]+)(?:\}\})$/,s=/^(?:\[\[)([^]+)(?:\]\])$/;class a{static getInstance(){return a._instance||(a._instance=new a),a._instance}_evaluateExpressionIfNeededInContext(e){if(this.isExpression(e)){const t=this._getContext(),i=this.getExpression(e);return this.createFromString(i,t)()}return e}_evaluateArrayInContext(e){const t=e.slice(0);for(let e=0;e<t.length;e++)t[e]=this.evaluateInContext(t[e]);return t}evaluateInContext(e){if(null==e)return e;if(Array.isArray(e))return this._evaluateArrayInContext(e);if("string"==typeof e)return this._evaluateExpressionIfNeededInContext(e);if("object"==typeof e){const t=Object.assign({},e),i=Object.keys(t);for(let e=0;e<i.length;e++){const o=i[e];t[o]=this.evaluateInContext(t[o])}return t}return e}assignFilterContext(e){this._filterContext=e,delete this._context}assignAvailableContext(e){this._availableContext=e,delete this._context}assignUriParameters(e){this._uriParameters=e}getUriParameters(){return this._uriParameters?this._uriParameters:{}}_getContext(){if(this._context)return this._context;const e=this._filterContext||{},t=this._availableContext||{};return this._context=Object.assign({},t,e),this._context}getExpression(e){let t;if(e){const i=e.trim();t=o.exec(i),t=t?t[1]:null,t||(t=s.exec(i),t=t?t[1]:null)}return t}isExpression(e){return!(!this._isString(e)||!this.getExpression(e))}_isString(e){return"string"==typeof e}createFromString(e,o){const s={$data:o};try{const t=i.createBindingExpressionEvaluator(e,s);return()=>{try{return t.bind(null,s)()}catch(t){throw new Error(`oj-sp/data-provider/DataProviderBindingContext - Could not evaluate expression ${e}: ${t} in search config.`)}}}catch(i){return t.error(`oj-sp/data-provider/DataProviderBindingContext - Could not evaluate expression ${e}.`,i),()=>{}}}}return a}),define("oj-sp/smart-filters/common/enums",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUGGESTION_TYPE=t.AUTOCOMPLETE_SOURCE_VALUE=t.SUGGESTION_FILTERS_OVERFLOW_VALUE=t.SMALL_SCREEN_POPUP_VIEW=t.LABEL_EDGE=t.FILTER_CHIP_VALUE_TYPE=t.FILTER_CHIP_TYPE=t.EXPANDED_VALUE=t.EVENT_NAME=t.DYNAMIC_FORM_VALID_VALUE=t.COMPONENT_TYPE=void 0,function(e){e.OJ_CHECKBOXSET="oj-checkboxset",e.OJ_RADIOSET="oj-radioset",e.OJ_SELECT_SINGLE="oj-select-single",e.OJ_SLIDER="oj-slider"}(t.COMPONENT_TYPE||(t.COMPONENT_TYPE={})),function(e){e.INVALID_HIDDEN="invalidHidden",e.INVALID_SHOWN="invalidShown",e.PENDING="pending",e.VALID="valid"}(t.DYNAMIC_FORM_VALID_VALUE||(t.DYNAMIC_FORM_VALID_VALUE={})),function(e){e.AFTER_FETCH="afterfetch",e.REFRESH="refresh"}(t.EVENT_NAME||(t.EVENT_NAME={})),function(e){e.AUTO="auto",e.FALSE="false",e.TRUE="true"}(t.EXPANDED_VALUE||(t.EXPANDED_VALUE={})),function(e){e.APPLIED="appliedFilterChip",e.SUGGESTION="suggestionFilterChip"}(t.FILTER_CHIP_TYPE||(t.FILTER_CHIP_TYPE={})),function(e){e.DATE_RANGE="date-range",e.NUMERIC_RANGE="numeric-range"}(t.FILTER_CHIP_VALUE_TYPE||(t.FILTER_CHIP_VALUE_TYPE={})),function(e){e.INSIDE="inside",e.NONE="none",e.START="start",e.TOP="top"}(t.LABEL_EDGE||(t.LABEL_EDGE={})),function(e){e.DYNAMIC_FORM="dynamicForm",e.MORE_FILTERS="moreFilters",e.SEARCH="search"}(t.SMALL_SCREEN_POPUP_VIEW||(t.SMALL_SCREEN_POPUP_VIEW={})),function(e){e.OFF="off",e.ON="on"}(t.SUGGESTION_FILTERS_OVERFLOW_VALUE||(t.SUGGESTION_FILTERS_OVERFLOW_VALUE={})),function(e){e.OFF="off",e.ON="on"}(t.AUTOCOMPLETE_SOURCE_VALUE||(t.AUTOCOMPLETE_SOURCE_VALUE={})),function(e){e.AUTOCOMPLETE="autocomplete",e.HISTORY="history",e.SUGGESTION="suggestion"}(t.SUGGESTION_TYPE||(t.SUGGESTION_TYPE={}))})),define("text!oj-sp/filter-chip/component.json",[],(function(){return'{"name":"filter-chip","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Filter Chip","description":"A filter chip allows user to quickly filter results in a list or table. NOTE: This component has been explicitly developed to be used in conjunction with the Smart Filters component.","type":"composite","subcomponentType":"packPrivate","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-fa-css":"2404.0.0"},"extension":{"catalog":{"tags":["Redwood"],"coverImage":"extension/catalog/images/ico-smart-filter-48.svg"}},"icon":{"iconPath":"extension/catalog/images/ico-smart-filter-48.svg"},"properties":{"actionable":{"type":"boolean","displayName":"Actionable","description":"The filter chip is actionable (triggers the spAction event) if set to true. No matter the value set to the actionable property, the filter chip will be closeable if the disabled property is set to false and the closeIcon property is set to \'always\'. This property only works for applied filter chips.","value":true},"active":{"type":"boolean","displayName":"Active","description":"The filter chip becomes active if set to true.","value":false},"closeIcon":{"type":"string","displayName":"Close Icon","description":"Specifies if the close icon (x) should be visible. This property only works for applied filter chips.","value":"always","enumValues":["always","never"],"propertyEditorValues":{"always":{"displayName":"Always","description":"The close icon (x) is always visible."},"never":{"displayName":"Never","description":"The close icon (x) is never visible."}}},"count":{"type":"number","displayName":"Count","description":"Count to show in the filter chip. This property only works for non-applied filter chips."},"disabled":{"type":"boolean","displayName":"Disabled","description":"Disables the filter chip if set to true.","value":false},"hasPopup":{"type":"boolean","displayName":"Has Popup","description":"Indicates the availability of an interactive popup element.","value":false},"label":{"type":"string","displayName":"Label","description":"Label to show in the filter chip.","required":true},"labelTargetId":{"type":"string","displayName":"Label Target Id","description":"Label target identifier that facilitates focus handling. This property only works for non-applied filter chips."},"labelTargetTabIndex":{"type":"string","displayName":"Label Target Tab Index","description":"Label target tab index (for roving tab index/focus handling). This property only works for non-applied filter chips.","value":"-1","enumValues":["-1","0"]},"targetId":{"type":"string","displayName":"Target Id","description":"Target identifier that facilitates focus handling. This property only works for applied filter chips."},"targetTabIndex":{"type":"string","displayName":"Target Tab Index","description":"Target tab index (for roving tab index/focus handling). This property only works for applied filter chips.","value":"-1","enumValues":["-1","0"]},"translations":{"type":"object","description":"A collection of translated resources from the translation bundle, or null if this component has no resources. Resources may be accessed and overridden individually or collectively.","properties":{"close":{"type":"string"}}},"type":{"type":"string","displayName":"Type","description":"Filter chip type. This property controls the appearance and behavior of the filter chip.","value":"nonApplied","enumValues":["applied","nonApplied"],"propertyEditorValues":{"applied":{"displayName":"Applied","description":"Among other things, applied filter chips display a close icon (x)."},"nonApplied":{"displayName":"Non-Applied","description":"Among other things, non-applied filter chips does not display a close icon (x)."}}},"value":{"type":"string","displayName":"Value","description":"Value to show in the filter chip."},"valueCountTargetId":{"type":"string","displayName":"Value/Count Target Id","description":"Value/Count target identifier that facilitates focus handling. This property only works for non-applied filter chips."},"valueCountTargetTabIndex":{"type":"string","displayName":"Value/Count Target Tab Index","description":"Value/Count target tab index  (for roving tab index/focus handling). This property only works for non-applied filter chips.","value":"-1","enumValues":["-1","0"]}},"events":{"spAction":{"description":"Triggered when an applied filter chip is clicked. This is also triggered by keyboard/mouse/touch events.","bubbles":true,"cancelable":false},"spClose":{"description":"Triggered when an applied filter chip is closed (for example, when the close icon (x) is clicked)","bubbles":true,"cancelable":false},"spFocus":{"description":"Triggered when the filter chip gets focus.","bubbles":true,"cancelable":false},"spLabelAction":{"description":"Triggered when the label target of a non-applied filter chip is clicked. This is also triggered by keyboard/mouse/touch events.","bubbles":true,"cancelable":false},"spValueCountAction":{"description":"Triggered when the value/count target of a non-applied filter chip is clicked. This is also triggered by keyboard/mouse/touch events.","bubbles":true,"cancelable":false}}}'})),define("text!oj-sp/filter-chip/filter-chip.html",[],(function(){return'<html><head></head><body><div :aria-disabled="[[toBooleanString($props.disabled)]]":aria-pressed="[[toBooleanString($props.active)]]"class="oj-sp-filter-chip":class="[[{\n       \'oj-active\': $props.active,\n       \'oj-disabled\': $props.disabled,\n       \'oj-sp-filter-chip-applied\': isAppliedFilterChip(),\n       \'oj-sp-filter-chip-non-applied\': !isAppliedFilterChip()\n     }]]"><div class="oj-sp-filter-chip-chrome"><oj-bind-if test="[[isAppliedFilterChip()]]"><div :aria-haspopup="[[toBooleanString($props.hasPopup)]]":aria-label="[[appliedFilterString() + \' \' + res.pressDelete]]"class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sm-padding-2x-start oj-typography-body-sm oj-sp-helper-white-space-nowrap oj-sp-filter-chip-focusable oj-sp-filter-chip-clickable":class="[[{\n            \'oj-focus\': isAppliedFilterChipFocused(),\n            \'oj-sm-padding-1x-end\': shouldDisplayAppliedFilterChipCloseAnchor(),\n            \'oj-sm-padding-2x-end\': !shouldDisplayAppliedFilterChipCloseAnchor(),\n            \'oj-sp-filter-chip-applied-actionable\': $props.actionable\n           }]]":data-id="[[$props.targetId]]"on-blur="[[onAppliedFilterChipBlur]]"on-click="[[onAppliedFilterChipClick]]"on-focus="[[onAppliedFilterChipFocus]]"on-keyup="[[onAppliedFilterChipKeyUp]]"role="listitem":tabindex="[[$props.disabled ? -1 : $props.targetTabIndex]]"><oj-bind-if test="[[$props.label]]"><span class="oj-sp-filter-chip-applied-label":class="[[{\n                  \'oj-text-color-disabled\': $props.disabled\n                }]]"><oj-bind-text value="[[$props.label]]"></oj-bind-text></span></oj-bind-if><oj-bind-if test="[[$props.value]]"><span class="oj-typography-semi-bold oj-sp-filter-chip-applied-value":class="[[{\n                  \'oj-sm-margin-1x-start\': $props.label,\n                  \'oj-text-color-disabled\': $props.disabled,\n                  \'oj-text-color-primary\': !$props.disabled &amp;&amp; !$props.actionable &amp;&amp; !$props.active\n                }]]"><oj-bind-text value="[[$props.value]]"></oj-bind-text></span></oj-bind-if><oj-bind-if test="[[shouldDisplayAppliedFilterChipCloseAnchor()]]"><div aria-orientation="vertical"class="oj-sm-margin-2x-start oj-sp-filter-chip-divider"role="separator"></div><a :aria-label="[[removeAriaLabelString]]"class="oj-flex oj-sm-align-items-center oj-sm-justify-content-center oj-sm-margin-1x-start oj-sp-helper-text-decoration-none oj-sp-filter-chip-close-anchor"href="#"on-touchstart="[[onAppliedFilterChipCloseAnchorClick]]"on-click="[[onAppliedFilterChipCloseAnchorClick]]"on-mouseenter="[[onAppliedFilterChipCloseAnchorMouseEnter]]"on-mouseleave="[[onAppliedFilterChipCloseAnchorMouseLeave]]"tabindex="-1":title="[[!$props.disabled &amp;&amp; res.remove]]"><span aria-hidden="true"class="oj-ux-ico-close oj-ux-icon-size-6x":class="[[{\n                    \'oj-text-color-disabled\': $props.disabled,\n                    \'oj-text-color-primary\': !$props.disabled &amp;&amp; isAppliedFilterChipCloseAnchorHovered() &amp;&amp; !$props.active,\n                    \'oj-text-color-secondary\': !$props.disabled &amp;&amp; !isAppliedFilterChipCloseAnchorHovered() &amp;&amp; !$props.active\n                  }]]"></span></a></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[!isAppliedFilterChip()]]"><oj-bind-if test="[[$props.label]]"><div :aria-label="[[suggestionFilterLabelString]]"class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sm-justify-content-center oj-sm-padding-2x-start oj-typography-body-sm oj-text-color-primary oj-sp-helper-white-space-nowrap oj-sp-filter-chip-focusable oj-sp-filter-chip-clickable":class="[[{\n               \'oj-focus\': isNonAppliedFilterChipLabelFocused(),\n               \'oj-sm-padding-2x-end\': !$props.value &amp;&amp; !countString(),\n               \'oj-sp-filter-chip-non-applied-label-focusable\': $props.value || countString(),\n               \'oj-text-color-disabled\': $props.disabled\n             }]]":data-id="[[$props.labelTargetId]]"on-blur="[[onNonAppliedFilterChipLabelBlur]]"on-click="[[onNonAppliedFilterChipLabelClick]]"on-focus="[[onNonAppliedFilterChipLabelFocus]]"on-keyup="[[onNonAppliedFilterChipLabelKeyUp]]"role="listitem":tabindex="[[$props.disabled ? -1 : $props.labelTargetTabIndex]]"><oj-bind-text value="[[$props.label]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[$props.value || countString()]]"><div :aria-label="[[suggestionFilterValueCountString]]"class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sm-justify-content-center oj-sm-padding-2x-end oj-typography-body-sm oj-typography-semi-bold oj-text-color-primary oj-sp-helper-white-space-nowrap oj-sp-filter-chip-focusable oj-sp-filter-chip-clickable":class="[[{\n               \'oj-focus\': isNonAppliedFilterChipValueCountFocused(),\n               \'oj-sm-padding-1x-start\': $props.label,\n               \'oj-sm-padding-2x-start\': !$props.label,\n               \'oj-sp-filter-chip-non-applied-value-count-focusable\': $props.label,\n               \'oj-text-color-disabled\': $props.disabled\n             }]]":data-id="[[$props.valueCountTargetId]]"on-blur="[[onNonAppliedFilterChipValueCountBlur]]"on-click="[[onNonAppliedFilterChipValueCountClick]]"on-focus="[[onNonAppliedFilterChipValueCountFocus]]"on-keyup="[[onNonAppliedFilterChipValueCountKeyUp]]"role="listitem":tabindex="[[$props.disabled ? -1 : $props.valueCountTargetTabIndex]]"><oj-bind-if test="[[$props.value]]"><div><oj-bind-text value="[[$props.value]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[countString()]]"><div :class="[[{\n                   \'oj-sp-helper-margin-1_5x-start\': $props.value\n                 }]]"class="oj-sp-filter-chip-count"><oj-bind-text value="[[countString()]]"></oj-bind-text></div></oj-bind-if></div></oj-bind-if></oj-bind-if></div></div></body></html>'})),define("oj-sp/filter-chip/common/enums",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE=t.EVENT_NAME=t.CLOSE_ICON=void 0,function(e){e.ALWAYS="always",e.NEVER="never"}(t.CLOSE_ICON||(t.CLOSE_ICON={})),function(e){e.ACTION="spAction",e.CLOSE="spClose",e.FOCUS="spFocus",e.LABEL_ACTION="spLabelAction",e.VALUE_COUNT_ACTION="spValueCountAction"}(t.EVENT_NAME||(t.EVENT_NAME={})),function(e){e.APPLIED="applied",e.NON_APPLIED="nonApplied"}(t.TYPE||(t.TYPE={}))})),define("css!oj-sp/fa-css/svg",[],(function(){})),define("oj-sp/fa-css/fa-css",["css!./fa-css-additions","css!./svg"],(function(){return new function(){}})),define("oj-sp/filter-chip/filter-chip",["require","exports","knockout","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojtranslation","./common/enums","ojs/ojcomposite","ojs/ojknockout","oj-sp/fa-css/fa-css","oj-sp/css-additions/loader"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OjSpFilterChipViewModel=void 0;const l=[o.KEY_NAME.ENTER,o.KEY_NAME.SPACE],d=[o.KEY_NAME.BACKSPACE,o.KEY_NAME.DELETE];t.OjSpFilterChipViewModel=class{constructor(e){this.bindingsApplied=()=>{},this.performAction=(e=r.EVENT_NAME.ACTION)=>{const{actionable:t,disabled:i}=this.properties;e===r.EVENT_NAME.ACTION&&!t||i||(this.dispatchEvent(e),this.isAppliedFilterChipFocused(!1))},this.performClose=()=>{const{closeIcon:e,disabled:t}=this.properties;e===r.CLOSE_ICON.NEVER||t||this.dispatchEvent(r.EVENT_NAME.CLOSE)},this.dispatchEvent=(e,t)=>{const i={bubbles:!0};t&&(i.detail=t),this.compositeElem.dispatchEvent(new CustomEvent(e,i))},this.isListActionKey=e=>l.indexOf(e)>-1,this.isListRemoveKey=e=>d.indexOf(e)>-1,this.onAppliedFilterChipBlur=e=>{e.stopPropagation(),this.isAppliedFilterChipFocused(!1)},this.onNonAppliedFilterChipLabelBlur=e=>{e.stopPropagation(),this.isNonAppliedFilterChipLabelFocused(!1)},this.onNonAppliedFilterChipValueCountBlur=e=>{e.stopPropagation(),this.isNonAppliedFilterChipValueCountFocused(!1)},this.onAppliedFilterChipClick=e=>{e.stopPropagation(),this.performAction()},this.onAppliedFilterChipCloseAnchorClick=e=>{e.preventDefault(),e.stopPropagation(),this.performClose()},this.onNonAppliedFilterChipLabelClick=e=>{e.stopPropagation(),this.performAction(r.EVENT_NAME.LABEL_ACTION)},this.onNonAppliedFilterChipValueCountClick=e=>{e.stopPropagation(),this.performAction(r.EVENT_NAME.VALUE_COUNT_ACTION)},this.onAppliedFilterChipFocus=e=>{e.stopPropagation(),this.isAppliedFilterChipFocused(!0);const{targetId:t}=this.properties;this.dispatchEvent(r.EVENT_NAME.FOCUS,{id:t})},this.onNonAppliedFilterChipLabelFocus=e=>{e.stopPropagation(),this.isNonAppliedFilterChipLabelFocused(!0);const{labelTargetId:t}=this.properties;this.dispatchEvent(r.EVENT_NAME.FOCUS,{id:t})},this.onNonAppliedFilterChipValueCountFocus=e=>{e.stopPropagation(),this.isNonAppliedFilterChipValueCountFocused(!0);const{valueCountTargetId:t}=this.properties;this.dispatchEvent(r.EVENT_NAME.FOCUS,{id:t})},this.onAppliedFilterChipKeyUp=e=>{e.stopPropagation();const{key:t}=e;this.isListRemoveKey(t)?this.performClose():this.isListActionKey(t)&&this.performAction()},this.onNonAppliedFilterChipLabelKeyUp=e=>{e.stopPropagation();const{key:t}=e;this.isListActionKey(t)&&this.performAction(r.EVENT_NAME.LABEL_ACTION)},this.onNonAppliedFilterChipValueCountKeyUp=e=>{e.stopPropagation();const{key:t}=e;this.isListActionKey(t)&&this.performAction(r.EVENT_NAME.VALUE_COUNT_ACTION)},this.onAppliedFilterChipCloseAnchorMouseEnter=()=>{this.isAppliedFilterChipCloseAnchorHovered(!0)},this.onAppliedFilterChipCloseAnchorMouseLeave=()=>{this.isAppliedFilterChipCloseAnchorHovered(!1)};const{element:t,properties:a}=e;this.compositeElem=t,this.properties=a;const{closeIcon:c,count:p,translations:u,type:h}=this.properties;this.res=Object.assign(Object.assign({},s),u),this.countString=i.observable(this.parseCount(p)),this.isAppliedFilterChip=i.observable(h===r.TYPE.APPLIED),this.isAppliedFilterChipCloseAnchorHovered=i.observable(!1),this.isAppliedFilterChipFocused=i.observable(!1),this.isNonAppliedFilterChipLabelFocused=i.observable(!1),this.isNonAppliedFilterChipValueCountFocused=i.observable(!1),this.shouldDisplayAppliedFilterChipCloseAnchor=i.observable(c===r.CLOSE_ICON.ALWAYS&&this.isAppliedFilterChip()),this.appliedFilterString=i.computed(()=>n.applyParameters(this.res.appliedFilter,{value:`${this.properties.label} ${this.properties.value}`}),this),this.removeAriaLabelString=i.computed(()=>n.applyParameters(this.res.filterRemove,{0:this.properties.label}),this),this.suggestionFilterLabelString=i.computed(()=>{const{res:e}=this;return n.applyParameters(e.suggestionFilter,{labelSuffix:e.label,value:this.properties.label})},this),this.suggestionFilterValueCountString=i.computed(()=>{const{countString:e,res:t}=this,{value:i}=this.properties;let o,s;return i&&e()?(o=n.applyParameters(t.xAndY,{x:t.value,y:t.count}),s=`${i} ${e()}`):e()?(o=t.count,s=e()):i&&(o=t.value,s=i),n.applyParameters(t.suggestionFilter,{labelSuffix:o,value:s})},this),this.toBooleanString=o.toBooleanString}activated(e){}connected(){}disconnected(){}propertyChanged(e){const{property:t,updatedFrom:i,value:s}=e;if(i!==o.UPDATED_FROM.INTERNAL)if("count"===t)this.countString(this.parseCount(s));else if("type"===t){this.isAppliedFilterChip(s===r.TYPE.APPLIED);const{closeIcon:e}=this.properties;this.shouldDisplayAppliedFilterChipCloseAnchor(e===r.CLOSE_ICON.ALWAYS&&this.isAppliedFilterChip())}}parseCount(e){return(0,o.isNullOrUndefined)(e)||isNaN(e)?"":e.toString()}}})),define("css!oj-sp/filter-chip/filter-chip",[],(function(){})),define("oj-sp/filter-chip/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./filter-chip.html","./filter-chip","css!./filter-chip.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-filter-chip",{metadata:JSON.parse(o),view:s,viewModel:a.OjSpFilterChipViewModel})})),define("text!oj-sp/overflow/component.json",[],(function(){return'{"name":"overflow","version":"2404.0.0","pack":"oj-sp","jetVersion":"^15.0.0","displayName":"Overflow","description":"Container that shows indicators when it has been overflowed.","type":"composite","subcomponentType":"packPrivate","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","dependencies":{"oj-sp-common-util":"2404.0.0","oj-sp-fa-css":"2404.0.0"},"extension":{"catalog":{"category":"Redwood Controls & Navigation","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-conveyor-belt-48.svg"}},"properties":{},"slots":{"":{"displayName":"Default","description":"Content of this composite."}},"events":{}}'})),define("text!oj-sp/overflow/overflow.html",[],(function(){return'<html><head></head><body><div class="oj-sp-helper-border-box oj-sp-helper-position-relative oj-sp-helper-overflow-hidden oj-sp-overflow"><div class="oj-sp-helper-overflow-x-auto oj-sp-helper-overflow-y-hidden oj-sp-overflow-overflow-container"on-scroll="[[onOverflowContainerElemScroll]]"><div class="oj-sp-helper-position-relative oj-sp-overflow-content-container"><oj-bind-slot></oj-bind-slot></div></div><oj-bind-if test="[[shouldDisplayStartOverflowIndicator()]]"><div class="oj-sp-helper-position-absolute oj-sp-overflow-indicator oj-sp-overflow-indicator-start"></div></oj-bind-if><oj-bind-if test="[[shouldDisplayEndOverflowIndicator()]]"><div class="oj-sp-helper-position-absolute oj-sp-overflow-indicator oj-sp-overflow-indicator-end"></div></oj-bind-if></div></body></html>'})),define("oj-sp/overflow/overflow",["require","exports","knockout","oj-sp/common-util/common-util","ojs/ojlogger","ojs/ojcomposite","ojs/ojknockout","oj-sp/fa-css/fa-css"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OjSpOverflowViewModel=void 0;t.OjSpOverflowViewModel=class{constructor(e){this.bindingsApplied=async()=>{},this.cacheElems=()=>{this.overflowContainerElem=this.compositeElem.querySelector(".oj-sp-overflow-overflow-container"),this.contentContainerElem=this.overflowContainerElem.querySelector(".oj-sp-overflow-content-container")},this.onContentContainerElemMutate=async(e,t)=>{for(const t of e)t.type===o.MUTATION_TYPE.CHILD_LIST&&(await(0,o.pRequestAnimationFrame)(),this.showOrHideOverflowIndicators())},this.onOverflowContainerElemScroll=async()=>{const e=(0,o.getBusyContext)(this.compositeElem).addBusyState({description:"Overflow - Repainting..."});this.isTicking||(this.isTicking=!0,await(0,o.pRequestAnimationFrame)(),this.showOrHideOverflowIndicators(),this.isTicking=!1),e()},this.showOrHideOverflowIndicators=()=>{const{offsetWidth:e,scrollLeft:t,scrollWidth:i}=this.overflowContainerElem,o=Math.abs(t);this.shouldDisplayStartOverflowIndicator(o>0),this.shouldDisplayEndOverflowIndicator(o+e<i)};const{element:t,properties:s}=e;this.compositeElem=t,this.properties=s,this.isTicking=!1,this.shouldDisplayEndOverflowIndicator=i.observable(!1),this.shouldDisplayStartOverflowIndicator=i.observable(!1)}activated(e){}connected(){this.cacheElems(),this.contentContainerElemMutationObserver=new MutationObserver(this.onContentContainerElemMutate),this.contentContainerElemMutationObserver.observe(this.contentContainerElem,{childList:!0,subtree:!0})}disconnected(){this.contentContainerElemMutationObserver&&this.contentContainerElemMutationObserver.disconnect()}}})),define("css!oj-sp/overflow/overflow",[],(function(){})),define("oj-sp/overflow/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./overflow.html","./overflow","css!./overflow.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-overflow",{metadata:JSON.parse(o),view:s,viewModel:a.OjSpOverflowViewModel})}));__rest=this&&this.__rest||function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};define("oj-sp/smart-filters/smart-filters",["require","exports","knockout","oj-sp/common-util/common-util","oj-sp/common-util/enums","oj-sp/data-provider/DataProviderBindingContext","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojarraydataprovider","ojs/ojcomponentcore","ojs/ojconverter-datetime","ojs/ojconverter-number","ojs/ojhtmlutils","ojs/ojknockout-keyset","ojs/ojlistdataproviderview","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojtranslation","ojs/ojtracer","./common/enums","oj-dynamic/form/loader","oj-sp/filter-chip/loader","oj-sp/overflow/loader","ojs/ojbinddom","ojs/ojbutton","ojs/ojcomposite","ojs/ojconveyorbelt","ojs/ojdefer","ojs/ojdialog","ojs/ojhighlighttext","ojs/ojinputtext","ojs/ojknockout","ojs/ojlistitemlayout","ojs/ojlistview","ojs/ojpopup","ojs/ojswitcher","oj-sp/fa-css/fa-css","oj-sp/css-additions/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OjSpSmartFiltersViewModel=void 0;const v="oj-sp-smart-filters",j=[o.KEY_NAME.ARROW_LEFT,o.KEY_NAME.ARROW_RIGHT,o.KEY_NAME.END,o.KEY_NAME.HOME],A={KEYWORD:"keyword"};const C=Symbol.for("trigger");t.OjSpSmartFiltersViewModel=class{constructor(t){this.FILTER_TYPE=A,this.POPUP_VERTICAL_OFFSET=4,this.SUGGESTION_TYPE=b.SUGGESTION_TYPE,this.bindingsApplied=async()=>{if(this.cacheElems(),this.properties.autofocus&&this.compositeElem.setAttribute("tabindex","-1"),await this.decorateFilters(this.properties.value||this.properties.appliedFilters,b.FILTER_CHIP_TYPE.APPLIED).then(e=>{var t;const i=null===(t=e[0])||void 0===t?void 0:t.targetId;this.updateAppliedFilterChipsTabIndex(e,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),this.appliedFiltersObservableArray(e)}),this.updateIsExpanded(),this.screenRangeSubscription=this.screenRange.subscribe(this.onScreenRangeChange),!(0,o.isNullOrUndefined)(this.properties.suggestionFilters)){const e=this.undecorateFilters(this.appliedFiltersObservableArray());await this.updateSuggestionFiltersObservableFromAppliedFilters(e)}},this.openSuggestions=async()=>{if(this.isSmallScreen())this.smallScreenPopup.isOpen()?this.smallScreenPopupActiveView(b.SMALL_SCREEN_POPUP_VIEW.SEARCH):await this.openSmallScreenPopup();else if(this.isMediumToUpScreen()){if(!this.isExpanded())return;this.filterPopup.isOpen()&&await this.closeFilterPopup(),this.moreFiltersPopup.isOpen()&&await this.closeMoreFiltersPopup()}this.focusInputTextElem()},this.cacheElems=()=>{this.overflowFilterChipContainerForOverflowCalculationsElem=this.compositeElem.querySelector(`.${v}-overflow-filter-chip-container-for-overflow-calculations`),this.filterPopup=this.compositeElem.querySelector("#"+this.filterPopupId),this.moreFiltersPopup=this.compositeElem.querySelector("#"+this.moreFiltersPopupId),this.searchBarPopup=this.compositeElem.querySelector("#"+this.searchBarPopupId),this.smallScreenPopup=this.compositeElem.querySelector("#"+this.smallScreenPopupId),this.suggestionsPopup=this.compositeElem.querySelector("#"+this.suggestionsPopupId),this.ariaLiveRegion=this.compositeElem.querySelector('.oj-helper-hidden-accessible[aria-live="polite"]')},this.onScreenRangeChange=async e=>{if(this.isSmallScreen(e===o.SCREEN_RANGE.SMALL),this.isMediumToUpScreen()){if(!this.smallScreenPopup.isOpen())return;const e=this.smallScreenPopupActiveView();if(e===b.SMALL_SCREEN_POPUP_VIEW.SEARCH){const e=this.smallScreenPopupActiveAppliedFilter,t=this.shouldDisplaySmallScreenPopupFilterDynamicForm();if(await this.closeSmallScreenPopup(),t&&(null==e?void 0:e.isComplex)){const t=this.findAppliedFilterElemById(e.id);return await this.openFilterPopup(t,e),void this.focusInputTextElem()}if(!t){if(e&&this.isKeywordFilterChip(e));else{const e=this.inputTextRawValue();this.inputTextValue(e)}return await this.openSuggestionsPopup(),void this.focusInputTextElem()}}if(e===b.SMALL_SCREEN_POPUP_VIEW.MORE_FILTERS){await this.closeSmallScreenPopup(),this.shouldDisplayMoreFiltersPopupSearchBar(this.moreFiltersSuggestionFilters.length>8),this.moreFiltersInputTextValue(this.shouldDisplayMoreFiltersPopupSearchBar()?this.moreFiltersInputTextRawValue():null);const e=this.getSuggestionFiltersContainerElem(),t=e.querySelector(`.${v}-more-filters-filter-chip`);return this.makeElemVisibleInContainerElem(t,e),void await this.openMoreFiltersPopup()}}if(this.isSmallScreen()){if(this.suggestionsPopup.isOpen()){await this.closeSuggestionsPopup(),await this.openSmallScreenPopup();const e=this.inputTextRawValue();return e&&this.inputTextValue(e),void this.focusInputTextElem()}if(this.filterPopup.isOpen()){const e=this.activeAppliedFilter;return await this.closeFilterPopup(),await this.openSmallScreenPopup(),this.shouldDisplaySmallScreenPopupFilterDynamicForm(!0),void await this.activateAppliedFilterChip(e)}if(this.moreFiltersPopup.isOpen()){const e=this.moreFiltersInputTextRawValue();return await this.closeMoreFiltersPopup(),await this.openSmallScreenPopup(b.SMALL_SCREEN_POPUP_VIEW.MORE_FILTERS),e&&this.moreFiltersInputTextValue(e),void this.focusMoreFiltersInputTextElem()}}await this.handleAppliedFilterChipsOverflow()},this.formatAppliedFilterDisplayLabel=({filterLabel:e,label:t})=>e||t,this.getSuggestionMetadata=e=>{var t,i,o;const s=null===(o=null===(i=null===(t=e[0])||void 0===t?void 0:t.dynamicProps)||void 0===i?void 0:i.autocomplete)||void 0===o?void 0:o.attributeLabel;return null!=s?s:""},this.formatAppliedFilterDisplayValue=e=>{const{filterLabel:t,label:i,value:s,valueType:a}=e;if(this.isKeywordFilterChip(e)||!s)return"";const n=!(0,o.isEmpty)(t);if(Array.isArray(s)){const e=s.length;return e?1===e?n?i:""+s[0]:`(${e})`:""}if((0,o.isObject)(s)){if(a===b.FILTER_CHIP_VALUE_TYPE.DATE_RANGE){const e=s,t=this.dateTimeConverter.format(e.gte),i=this.dateTimeConverter.format(e.lte);return y.applyParameters(this.res.rangeSeparator,{from:t,to:i})}if(a===b.FILTER_CHIP_VALUE_TYPE.NUMERIC_RANGE){const e=s,t=this.numberConverter.format(e.gte),i=this.numberConverter.format(e.lte);return y.applyParameters(this.res.rangeSeparator,{from:t,to:i})}return Object.keys(s).reduce((e,t,i)=>{const a=s[t];return i>1||(0,o.isNullOrUndefined)(a)||e.push(a),e},[]).join(" - ")}return n?t===i?"":i:""+s},this.formatSuggestionFilterDisplayLabel=e=>this.formatAppliedFilterDisplayLabel(e),this.formatSuggestionFilterDisplayValue=e=>this.formatAppliedFilterDisplayValue(e),this.getInputTextElem=()=>{let e=`.${v}-search-bar-input-text .oj-inputtext-input`,t=this.compositeElem;return this.smallScreenPopup.isOpen()?(e=`.${v}-sm-dialog ${e}`,t=this.smallScreenPopup):this.searchBarPopup.isOpen()&&(e=`.${v}-search-bar-popup ${e}`,t=this.searchBarPopup),t.querySelector(e)},this.focusInputTextElem=()=>{const e=this.getInputTextElem();e&&e.focus()},this.getMoreFiltersInputTextElem=()=>{const e=`.${v}-more-filters-input-text .oj-inputtext-input`;let t;if(this.moreFiltersPopup.isOpen()?t=this.moreFiltersPopup:this.smallScreenPopup.isOpen()&&(t=this.smallScreenPopup),t)return t.querySelector(e)},this.focusMoreFiltersInputTextElem=()=>{const e=this.getMoreFiltersInputTextElem();e&&e.focus()},this.onResultsDataAfterFetch=e=>{var t;const i=e.detail.fetchSize;this.totalCount(i),this.properties.totalCount=i;const o=e.detail.searchContext;this.properties.searchContext=o,this.shouldDisplaySeeResultsButton((null===(t=this.smallScreenPopup)||void 0===t?void 0:t.isOpen())&&this.isSmallScreenPopupDirty())},this.onSuggestionFiltersAfterFetch=e=>{const t=e.detail.fetchSize;this.shouldDisplaySuggestionFiltersContainer(t>0),this.shouldDisplaySuggestionFiltersContainer()},this.isListNavigationKey=e=>j.indexOf(e)>-1,this.getFocusableElemsWithin=e=>Array.from(e.querySelectorAll("[tabindex]")),this.getSuggestionFiltersContainerElem=()=>this.compositeElem.querySelector(`.${v}-suggestion-filters`),this.onSuggestionFiltersContainerKeyDown=async e=>{const{key:t}=e;if((t===o.KEY_NAME.SPACE||this.isListNavigationKey(t))&&e.preventDefault(),!this.isListNavigationKey(t))return;const i=this.suggestionFiltersObservable(),s=await(0,o.dataProviderToArray)(i),a=s.reduce((e,t)=>{const{count:i,label:o,labelTargetId:s,value:a,valueCountTargetId:n}=t;return o&&e.push(s),(a||i)&&e.push(n),e},[]);this.shouldDisplayMoreFiltersFilterChip()&&a.push(this.moreFiltersFilterChipLabelTargetId);const n=this.getElemIdToFocus(t,a,this.suggestionFiltersContainerFocusedElemId);if(!n)return;const r=this.getSuggestionFiltersContainerElem(),l=(0,o.getBusyContext)(r);this.updateSuggestionFilterChipsTabIndex(s,{shouldUpdateMoreFiltersFilterChipLabelTargetTabIndex:!0,shouldUpdateSuggestionFiltersContainerFocusedElemId:!0,suggestionFilterChipTargetIdToSetTabIndexZero:n}),await l.whenReady(),this.focusElemWithin(r,n)},this.getElemIdToFocus=(e,t,i)=>{const s=t.length,a=t.findIndex(e=>e===i);let n=-1;const r=(0,o.getDirectionality)();if(-1===a||a>=s)n=0;else{const t=s-1;e===o.KEY_NAME.ARROW_LEFT&&a>0&&r===o.DIRECTIONALITY.LEFT_TO_RIGHT?n=a-1:e===o.KEY_NAME.ARROW_LEFT&&r===o.DIRECTIONALITY.RIGHT_TO_LEFT||e===o.KEY_NAME.ARROW_RIGHT&&a<t&&r===o.DIRECTIONALITY.LEFT_TO_RIGHT?n=a+1:e===o.KEY_NAME.ARROW_RIGHT&&r===o.DIRECTIONALITY.RIGHT_TO_LEFT?n=a-1:e===o.KEY_NAME.END?n=t:e===o.KEY_NAME.HOME&&(n=0)}if(-1===n)return;const l=t[n];return l!==i?l:void 0},this.focusElemWithin=(e,t)=>{const i=this.getFocusableElemsWithin(e).find(e=>e.dataset.id===t);i&&i.focus()},this.onSuggestionFilterChipFocus=async e=>{const{id:t}=e.detail;if(t===this.suggestionFiltersContainerFocusedElemId)return;const i=this.suggestionFiltersObservable(),s=await(0,o.dataProviderToArray)(i);this.updateSuggestionFilterChipsTabIndex(s,{shouldUpdateMoreFiltersFilterChipLabelTargetTabIndex:!0,shouldUpdateSuggestionFiltersContainerFocusedElemId:!0,suggestionFilterChipTargetIdToSetTabIndexZero:t})},this.updateSuggestionFilterChipsTabIndex=(e,t={})=>{const{shouldUpdateMoreFiltersFilterChipLabelTargetTabIndex:i=!1,shouldUpdateSuggestionFiltersContainerFocusedElemId:o=!1,suggestionFilterChipTargetIdToSetTabIndexZero:a}=t;let n=!1;e.forEach(e=>{const{labelTargetId:t,valueCountTargetId:i}=e;e.labelTargetTabIndex(a===t?s.TAB_INDEX.ZERO:s.TAB_INDEX.MINUS_ONE),e.valueCountTargetTabIndex(a===i?s.TAB_INDEX.ZERO:s.TAB_INDEX.MINUS_ONE),n||a!==t&&a!==i||(n=!0)}),i&&this.moreFiltersFilterChipLabelTargetTabIndex(a===this.moreFiltersFilterChipLabelTargetId?s.TAB_INDEX.ZERO:s.TAB_INDEX.MINUS_ONE),o&&(n||a!==this.moreFiltersFilterChipLabelTargetId||(n=!0),this.suggestionFiltersContainerFocusedElemId=n?a:null)},this.updateAppliedFilterChipsTabIndex=(e,t={})=>{const{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:o=!1,shouldUpdateAppliedFiltersContainerFocusedElemId:a=!1}=t;let n=!1;e.forEach(e=>{e.targetTabIndex(i===e.targetId?s.TAB_INDEX.ZERO:s.TAB_INDEX.MINUS_ONE),n||i!==e.targetId||(n=!0)}),o&&this.appliedFilterChipOverflowTargetTabIndex(i===this.appliedFilterChipOverflowTargetId?s.TAB_INDEX.ZERO:s.TAB_INDEX.MINUS_ONE),a&&(n||i!==this.appliedFilterChipOverflowTargetId||(n=!0),this.appliedFiltersContainerFocusedElemId=n?i:null)},this.updateListDataProviderViewObservable=(e,t,i={})=>{const{arrayDataProviderOptions:o={keyAttributes:"id"},listDataProviderViewOptions:s}=i,a=new r(t,o);e(new h(a,s))},this.onSuggestionFiltersRefresh=async()=>{const e=this.undecorateFilters(this.appliedFiltersObservableArray());await this.updateSuggestionFiltersObservableFromAppliedFilters(e)},this.onSearchBarClick=async e=>{e.stopPropagation(),this.isMediumToUpScreen()?this.focusInputTextElem():this.smallScreenPopup.isOpen()||(await this.openSmallScreenPopup(),this.focusInputTextElem())},this.onSearchIconClick=e=>{e.preventDefault()},this.onInputTextBlur=()=>{this.hasInputTextFocus(!1)},this.updateInputTextRoleToComboBox=async()=>{if(!this.isExpanded())return;const e=(0,o.getBusyContext)(this.compositeElem);await e.whenReady();const t=this.getInputTextElem();null==t||t.setAttribute("role","combobox"),null==t||t.setAttribute("aria-controls",this.suggestionsListViewId),null==t||t.setAttribute("aria-expanded","false")},this.onInputTextFocus=async e=>{if(e.stopPropagation(),this.hasInputTextFocus(!0),(0,o.isNullOrUndefined)(this.properties.suggestions))return;const t=this.inputTextRawValue();this.updateSuggestionsListViewObservable(this.appliedFiltersObservableArray(),t),this.isMediumToUpScreen()?await this.openSuggestionsPopup():this.smallScreenPopup.isOpen()&&(this.deactivateAppliedFilterChips(),this.shouldDisplaySmallScreenPopupFilterDynamicForm(!1))},this.onInputTextKeyUp=async e=>{const{key:t}=e;t===o.KEY_NAME.ENTER?await this.addKeywordFilterFromTextInputRawValue():t===o.KEY_NAME.ARROW_DOWN&&this.focusPopupListView(this.suggestionsPopup)},this.onMoreFiltersInputTextKeyUp=async e=>{const{key:t}=e;t===o.KEY_NAME.ARROW_DOWN&&this.focusPopupListView(this.moreFiltersPopup)},this.focusPopupListView=e=>{if(!e.isOpen())return;const t=e.querySelector("oj-list-view");null==t||t.focus()},this.addKeywordFilterFromTextInputRawValue=async()=>{this.triggerTelemetry(event,async e=>{const t=this.inputTextRawValue();if(!t.trim())return;const i=t.length;e.setAttribute(this.telemetryPrefix+".noOfCharacters",i);const o=this.generateKeywordFilterChip(t),s=await this.decorateFilter(o,b.FILTER_CHIP_TYPE.APPLIED);await this.addAppliedFilters([s]),this.smallScreenPopup.isOpen()?(this.deactivateAppliedFilterChips(),this.isExpanded(!0),this.updateInputTextRoleToComboBox(),this.inputTextValue(null)):(this.inputTextValue(null),this.suggestionsPopup.isOpen()&&await this.closeSuggestionsPopup()),await this.handleAppliedFilterChipsOverflow(),await this.focusLastFilterChip(),e.end()})},this.generateKeywordFilterChip=e=>({filter:A.KEYWORD,label:e,value:e}),this.addAppliedFilters=async e=>{this.triggerTelemetry(event,async t=>{const i=this.appliedFiltersObservableArray(),o=[];i.forEach((t,i)=>{e.forEach(e=>{e.filter===t.filter&&this.formatAppliedFilterDisplayLabel(e).toLowerCase()===this.formatAppliedFilterDisplayLabel(t).toLowerCase()&&this.formatAppliedFilterDisplayValue(e).toLowerCase()===this.formatAppliedFilterDisplayValue(t).toLowerCase()&&o.push(i)})}),o.length>0&&(o.forEach(e=>{i.splice(e,1)}),this.appliedFiltersObservableArray(i)),this.updateAppliedFilterChipsTabIndex(i,{shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0});const s=e[0].targetId;this.updateAppliedFilterChipsTabIndex(e,{appliedFilterChipTargetIdToSetTabIndexZero:s,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),this.appliedFiltersObservableArray.push(...e),await this.updateValueProperty(this.appliedFiltersObservableArray()),this.smallScreenPopup.isOpen()&&this.isSmallScreenPopupDirty(!0);const a=this.appliedFiltersObservableArray(),n=a.length;let r=0;a.forEach(e=>{e.isComplex&&++r}),t.setAttribute(this.telemetryPrefix+".totalAppliedFilterChips",n),t.setAttribute(this.telemetryPrefix+".totalComplexAppliedFilterChips",r),t.end()})},this.generateIndex=(e,t)=>{const i=null==e?void 0:e.toString().replace(/[^a-zA-Z0-9]/g,"\\$&"),o=t.querySelector("ul #"+i);let s=-1;if(o){const e=t.querySelector(".oj-sp-smart-filters-keyboard-navigable-list-view").getContextByNode(o),{index:i}=e;s=i}return s},this.validateKey=e=>e&&("number"==typeof e||"string"==typeof e),this.onInputTextRawValueChanged=e=>{const t=e.detail.value;if(!t.trim())return;if(this.smallScreenPopup.isOpen()&&this.smallScreenPopupActiveAppliedFilter&&this.isKeywordFilterChip(this.smallScreenPopupActiveAppliedFilter))return;const i=this.inputTextRawValueChangeDelay;if(this.properties.suggestions&&!this.suggestionsListResolve){const e=(0,o.getBusyContext)(this.compositeElem);this.suggestionsListResolve=e.addBusyState({description:"Smart Filters - Updating Suggestions List"})}window.clearTimeout(this.inputTextRawValueChangeTimeoutId),this.inputTextRawValueChangeTimeoutId=window.setTimeout(()=>{this.updateSuggestionsListViewObservable(this.appliedFiltersObservableArray(),t),this.suggestionsListResolve&&(this.suggestionsListResolve(),this.suggestionsListResolve=null)},i)},this.onMoreFiltersInputTextRawValueChanged=e=>{const t=e.detail.value;this.updateMoreFiltersListViewObservable(this.moreFiltersSuggestionFilters,t)},this.updateSuggestionsListViewObservable=(e,t="")=>{const i=this.properties.suggestions;if((0,o.isNullOrUndefined)(i))return;const s=this.undecorateFilters(e),a=this.generateFilterCriterion(s,t),n=new h(i,{filterCriterion:a});this.suggestionsListViewObservable(n)},this.updateMoreFiltersListViewObservable=(e,t="")=>{let i;if(t){const e=(0,o.escapeStringFoRegExp)(t);i={op:"$or",criteria:[{op:"$regex",value:{label:new RegExp(`.*${e}.*`,"i")}},{op:"$regex",value:{filterLabel:new RegExp(`.*${e}.*`,"i")}}]}}const s=[{attribute:"label",direction:o.SORT_DIRECTION.ASCENDING}];this.updateListDataProviderViewObservable(this.moreFiltersListViewObservable,e,{listDataProviderViewOptions:{filterCriterion:i,sortCriteria:s}})},this.updateSuggestionFiltersObservableFromAppliedFilters=async e=>{const t=this.properties.suggestionFilters;if((0,o.isNullOrUndefined)(t))return;const i={filterCriterion:this.generateFilterCriterion(e)},a=(0,o.getBusyContext)(this.compositeElem).addBusyState({description:"Smart Filters - Suggestion Filters Data Provider Iterating"});let n=[];try{n=await(0,o.dataProviderToArray)(t,i)}catch(e){!function(e){const t=[`[${v}]`,e.message].join(" ");m.error(t)}(e)}const r=await this.decorateFilters(n,b.FILTER_CHIP_TYPE.SUGGESTION);let l;if(a(),this.isSuggestionFiltersOverflowOn())if(r.length<=5)l=r.slice(0,5),this.shouldDisplayMoreFiltersFilterChip(!1);else{const e=4;l=r.slice(0,e);const t=r.slice(e);this.moreFiltersSuggestionFiltersUnmutated=(0,o.cloneDeep)(t),this.moreFiltersSuggestionFilters=(0,o.cloneDeep)(t),this.shouldDisplayMoreFiltersFilterChip(!0),this.updateMoreFiltersListViewObservable(this.moreFiltersSuggestionFilters)}else l=(0,o.cloneDeep)(r),this.shouldDisplayMoreFiltersFilterChip(!1);const d=await this.decorateFilters(l,b.FILTER_CHIP_TYPE.SUGGESTION);if(d.length){const e=d[0];e.label?(e.labelTargetTabIndex(s.TAB_INDEX.ZERO),this.suggestionFiltersContainerFocusedElemId=e.labelTargetId):(e.value||e.count)&&(e.valueCountTargetTabIndex(s.TAB_INDEX.ZERO),this.suggestionFiltersContainerFocusedElemId=e.valueCountTargetId)}this.updateListDataProviderViewObservable(this.suggestionFiltersObservable,d),this.shouldDisplaySuggestionFiltersContainer(!0)},this.onAppliedFilterChipAction=async(e,t)=>{this.triggerTelemetry(e,async i=>{const s=t.data,a=await this.requiresFilterDynamicForm(s);if(this.isSmallScreen()){if(this.smallScreenPopup.isOpen()){if(this.isSmallScreenPopupActiveAppliedFilter(s))return;this.deactivateAppliedFilterChips(),this.shouldDisplaySeeResultsButton(!1)}this.smallScreenPopup.isOpen()||await this.openSmallScreenPopup(),a?(this.resetFilterDynamicForm(),await this.activateAppliedFilterChip(s),this.focusFilterDynamicFormElem()):(i.setAttribute(this.telemetryPrefix+".keywordFilterChipUpdated",s.filter),await this.removeAppliedFilter(s),this.inputTextValue(s.label),this.focusInputTextElem())}else if(this.suggestionsPopup.isOpen()&&await this.closeSuggestionsPopup(),a||(i.setAttribute(this.telemetryPrefix+".keywordFilterChipUpdated",s.filter),await this.removeAppliedFilter(s),this.inputTextValue(s.label),await this.handleAppliedFilterChipsOverflow(),this.focusInputTextElem()),a){const t=e.target;if(!(0,o.isNullOrUndefined)(t.dataset.spDead))return;if(this.filterPopup.isOpen()){if(this.isActiveAppliedFilter(s))return;await this.closeFilterPopup()}await this.openFilterPopup(t,s)}i.end()})},this.focusLastFilterChip=async()=>{const e=this.getAppliedFilterChipsContainerElem();if(!e)return;const t=e.querySelectorAll(`.${v}-applied-filter-chip`);if(0===t.length)return void this.focusInputTextElem();const i=(0,o.getBusyContext)(e);if(await i.whenReady(),this.smallScreenPopup.isOpen()||0===this.appliedFiltersOverflowCount()){const e=t[t.length-1].querySelector("[tabindex]");null==e||e.focus()}else this.focusElemWithin(e,this.appliedFilterChipOverflowTargetId)},this.onAppliedFilterChipClose=async(e,t)=>{this.triggerTelemetry(e,async i=>{const s=t.data,a=s.isComplex;if(a){const t=this.formatAppliedFilterDisplayLabel(s);i.setAttribute(this.telemetryPrefix+".complexFilterChipRemoved",t);e.target.dataset.spDead="true"}else i.setAttribute(this.telemetryPrefix+".keywordFilterChipRemoved",s.filter);this.filterPopup.isOpen()&&await this.closeFilterPopup(),await this.removeAppliedFilter(s),this.suggestionsPopup.isOpen()&&await this.closeSuggestionsPopup(),this.smallScreenPopup.isOpen()&&this.isSmallScreenPopupActiveAppliedFilter(s)&&(a&&this.shouldDisplaySmallScreenPopupFilterDynamicForm(!1),this.smallScreenPopupActiveAppliedFilter=null);const n=this.inputTextValue();(this.smallScreenPopup.isOpen()||this.isMediumToUpScreenAndExpanded())&&(0,o.isEmpty)(n)&&this.inputTextValue(null),this.smallScreenPopup.isOpen()||(this.searchBarPopup.isOpen()||this.updateIsExpanded(),this.isExpanded()&&await this.handleAppliedFilterChipsOverflow()),(0,o.isEmpty)(n)?await this.focusLastFilterChip():this.focusInputTextElem(),i.end()})},this.onSuggestionsPopUpKeyEsc=async e=>{const{key:t}=e;"Escape"===t?this.suggestionsPopup.isOpen()&&(await this.closeSuggestionsPopup(),this.focusInputTextElem()):t===o.KEY_NAME.F6&&this.focusInputTextElem()},this.onAppliedFiltersContainerKeyDown=async e=>{const{key:t}=e;t!==o.KEY_NAME.SPACE&&!this.isListNavigationKey(t)||this.hasInputTextFocus()||e.preventDefault();const{activeElement:i}=document;if(!this.isListNavigationKey(t)||!i.classList.contains("oj-sp-filter-chip-focusable"))return;const s=this.searchBarPopup.isOpen()||this.smallScreenPopup.isOpen(),a=this.appliedFiltersObservableArray();let n=[...a];s||(n=a.filter(({shouldRender:e})=>e));const r=n.map(({targetId:e})=>e);this.appliedFiltersOverflowCount()&&!s&&r.push(this.appliedFilterChipOverflowTargetId);const l=this.getElemIdToFocus(t,r,this.appliedFiltersContainerFocusedElemId);if(!l)return;const d=this.getAppliedFilterChipsContainerElem(),c=(0,o.getBusyContext)(d);this.updateAppliedFilterChipsTabIndex(a,{appliedFilterChipTargetIdToSetTabIndexZero:l,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),await c.whenReady(),this.focusElemWithin(d,l)},this.onAppliedFilterChipFocus=e=>{this.suggestionsPopup.isOpen()&&this.closeSuggestionsPopup();const{id:t}=e.detail;if(t===this.appliedFiltersContainerFocusedElemId)return;const i=this.appliedFiltersObservableArray();this.updateAppliedFilterChipsTabIndex(i,{appliedFilterChipTargetIdToSetTabIndexZero:t,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0})},this.onAppliedFilterChipOverflowAction=async()=>{this.lastAppliedFiltersContainerFocusedElemId=this.appliedFiltersContainerFocusedElemId,this.isSmallScreen()?await this.openSmallScreenPopup():await this.openSearchBarPopup(),this.focusInputTextElem()},this.onSuggestionFilterChipLabelAction=async(e,t)=>{const i=e.target,o=t.data;i.setAttribute("disabled","true");const s=await this.requiresFilterDynamicForm(o);await this.suggestionFilterChipAction(o,s)},this.onSuggestionFilterChipValueCountAction=async(e,t)=>{const i=e.target,o=t.data;i.setAttribute("disabled","true"),await this.suggestionFilterChipAction(o,!1)},this.suggestionFilterChipAction=async(e,t=!0)=>{this.suggestionsPopup.isOpen()&&await this.closeSuggestionsPopup(),this.filterPopup.isOpen()&&await this.closeFilterPopup();const i=this.inputTextValue();this.isMediumToUpScreenAndExpanded()&&!(0,o.isEmpty)(i)&&this.inputTextValue(null),await this.applySuggestionFilter(e,t)},this.focusFilterChipElement=async e=>{if(!e)return;const t=i.contextFor(e).$current.data.targetId,s=this.appliedFiltersObservableArray(),a=this.getAppliedFilterChipsContainerElem(),n=(0,o.getBusyContext)(a);this.updateAppliedFilterChipsTabIndex(s,{appliedFilterChipTargetIdToSetTabIndexZero:t,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!1,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),await n.whenReady(),this.focusElemWithin(a,t)},this.applySuggestionFilter=async(e,t=!0)=>{const i=Object.assign({},e),o=await this.decorateFilter(i,b.FILTER_CHIP_TYPE.APPLIED);if(await this.addAppliedFilters([o]),this.isExpanded(!0),this.updateInputTextRoleToComboBox(),await this.handleAppliedFilterChipsOverflow(),this.isSmallScreen()&&t)return await this.openSmallScreenPopup(),void await this.activateAppliedFilterChip(o);if(this.isMediumToUpScreen()){const e=await this.requiresFilterDynamicForm(o),i=this.findAppliedFilterElemById(o.id);e&&t?(await this.activateAppliedFilterChip(o),await this.openFilterPopup(i,o)):await this.focusFilterChipElement(i)}},this.removeAppliedFilter=async e=>{var t;const i=e.isComplex,o=[e];if(i&&this.resolveAppliedFiltersDependenciesForRemoval(e.filter,o),this.appliedFiltersObservableArray.removeAll(o),e.targetTabIndex()===s.TAB_INDEX.ZERO){const e=this.appliedFiltersObservableArray(),i=null===(t=e[0])||void 0===t?void 0:t.targetId;this.updateAppliedFilterChipsTabIndex(e,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0})}await this.updateValueProperty(this.appliedFiltersObservableArray()),this.smallScreenPopup.isOpen()&&this.isSmallScreenPopupDirty(!0),i&&this.shouldDisplaySuggestionFiltersContainer(!0);const a=y.applyParameters(this.res.accFilterRemoved,{0:o.length});this.announce(a)},this.onSuggestionsListViewCurrentItemChanged=e=>{const t=i.contextFor(e.detail.item);if(!t)return;const o=t.$current.data;this.setListViewSelected(this.suggestionsListViewSelected,o.id)},this.onSmallScreenPopupSuggestionsListViewCurrentItemChanged=e=>{const t=i.contextFor(e.detail.item);if(!t)return;const o=t.$current.data;this.setListViewSelected(this.smallScreenPopupSuggestionsListViewSelected,o.id)},this.setListViewSelected=(e,t)=>{e.clear(),t&&e.add([t])},this.getAriaLabel=e=>{let t="";return e.forEach((e,i)=>{0===i?t=e.label:t+=`${this.res.andAriaLabel}${e.label}`}),t},this.onSuggestionsListViewItemAction=async e=>{this.triggerTelemetry(e,async t=>{const{data:i,key:s}=e.detail.context;t.setAttribute(this.telemetryPrefix+".category",i.category);try{if(this.validateKey(s)){const e=this.smallScreenPopup.isOpen()?this.smallScreenPopup:this.suggestionsPopup,o="suggestionDropdown_"+i.id,s=this.generateIndex(o,e),a=this.suggestionsPopup.querySelectorAll(".oj-ux-ico-box"),n=this.suggestionsPopup.querySelectorAll(".oj-ux-ico-clock");if(s>=0)if(i.category===b.SUGGESTION_TYPE.HISTORY)t.setAttribute(this.telemetryPrefix+".position",s);else if(i.category===b.SUGGESTION_TYPE.SUGGESTION){const e=s-n.length;t.setAttribute(this.telemetryPrefix+".position",e)}else if(i.category===b.SUGGESTION_TYPE.AUTOCOMPLETE){const e=s-n.length-a.length;t.setAttribute(this.telemetryPrefix+".position",e)}}}catch(e){m.warn(e)}const a=e=>e.every(e=>this.isKeywordFilterChip(e)),n=e.detail.context.data,{chips:r}=n;if(!r||!r.length)return;const l=await this.decorateFilters(r,b.FILTER_CHIP_TYPE.APPLIED);let d=0,c=0;for(const[e,t]of l.entries())t.isComplex?++c:++d;const p=`${c} ${this.res.complexFilterChip}, ${d} ${this.res.keywordFilterChip}`;t.setAttribute(this.telemetryPrefix+".typeOfSuggestionFilterChip",p),await this.addAppliedFilters(l);const u=this.inputTextValue();if(a(l)||await this.closePopup(this.suggestionsPopup),!this.smallScreenPopup.isOpen()&&!this.isMediumToUpScreenAndExpanded()||(0,o.isEmpty)(u)||this.inputTextValue(null),this.smallScreenPopup.isOpen()){if(this.deactivateAppliedFilterChips(),this.shouldDisplaySeeResultsButton(!0),a(l))this.isExpanded(!0),this.updateInputTextRoleToComboBox(),await this.handleAppliedFilterChipsOverflow();else{this.smallScreenPopupSuggestionsListViewSelected.clear();const e=l[0];1===l.length&&e.isComplex?(this.resetFilterDynamicForm(),await this.activateAppliedFilterChip(e)):(this.isExpanded(!0),this.updateInputTextRoleToComboBox(),await this.closeSmallScreenPopup(),await this.handleAppliedFilterChipsOverflow())}await this.focusLastFilterChip()}if(this.isMediumToUpScreenAndExpanded()){await this.handleAppliedFilterChipsOverflow();const e=l[0];if(1===l.length&&e.isComplex){if(await this.requiresFilterDynamicForm(e)){const t=this.findAppliedFilterElemById(e.id);await this.openFilterPopup(t,e)}}else await this.focusLastFilterChip()}t.end()})},this.onExpandSearchButtonAction=async()=>{if(this.isSmallScreen()&&!this.appliedFiltersObservableArray().length)return await this.openSmallScreenPopup(),void this.focusInputTextElem();const e=(0,o.getBusyContext)(this.compositeElem);this.isExpanded(!0),this.updateInputTextRoleToComboBox(),await e.whenReady(),this.isMediumToUpScreen()&&this.focusInputTextElem()},this.onBackIconClick=async e=>{e.preventDefault();const t=this.smallScreenPopupActiveView();t===b.SMALL_SCREEN_POPUP_VIEW.SEARCH?(this.isSmallScreenPopupDirty()&&await this.resetAppliedFilters(this.smallScreenPopupAppliedFiltersUnmutated),this.updateIsExpanded()):t===b.SMALL_SCREEN_POPUP_VIEW.MORE_FILTERS&&(this.moreFiltersInputTextValue(null),this.moreFiltersSuggestionFilters=(0,o.cloneDeep)(this.moreFiltersSuggestionFiltersUnmutated)),await this.closeSmallScreenPopup()},this.onClearIconClick=e=>{e.preventDefault(),this.inputTextValue(null),this.focusInputTextElem()},this.onMoreFiltersClearAnchorClick=e=>{e.preventDefault(),this.moreFiltersInputTextValue(null),this.focusMoreFiltersInputTextElem()},this.onSeeResultsButtonAction=async()=>{var e;this.deactivateAppliedFilterChips(),this.updateIsExpanded(),await this.closeSmallScreenPopup(),await this.handleAppliedFilterChipsOverflow();const t=this.appliedFiltersObservableArray(),i=null===(e=t[0])||void 0===e?void 0:e.targetId;this.updateAppliedFilterChipsTabIndex(t,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),await this.handleAppliedFilterChipsOverflow()},this.getAppliedFilterChipsContainerElem=()=>{let e=this.compositeElem;return this.searchBarPopup.isOpen()?e=this.searchBarPopup:this.smallScreenPopup.isOpen()&&(e=this.smallScreenPopup),e.querySelector(`.${v}-applied-filters`)},this.unhideAppliedFilters=async()=>{const e=this.appliedFiltersObservableArray().filter(({shouldRender:e})=>!e),t=this.getAppliedFilterChipsContainerElem(),i=(0,o.getBusyContext)(t);e.forEach(e=>{const t=Object.assign(Object.assign({},e),{shouldRender:!0});this.appliedFiltersObservableArray.replace(e,t)}),await i.whenReady()},this.getElemBoundaries=e=>{const t=e.getBoundingClientRect();return(0,o.pickBoundaries)(t)},this.handleAppliedFilterChipsOverflow=async()=>{const e=(0,o.getDirectionality)();this.appliedFiltersOverflowCount(0),await this.unhideAppliedFilters();const t=this.getAppliedFilterChipsContainerElem();if(!t)return;const i=this.getElemBoundaries(t);if(this.isMediumToUpScreenAndExpanded()){const t=this.compositeElem.querySelector(`.${v}-search-bar-input-text-container`).getBoundingClientRect();e===o.DIRECTIONALITY.LEFT_TO_RIGHT?i.right=i.right-t.width:e===o.DIRECTIONALITY.RIGHT_TO_LEFT&&(i.left=i.left+t.width)}const a=this.overflowFilterChipContainerForOverflowCalculationsElem.getBoundingClientRect(),n=Array.from(t.querySelectorAll(`.${v}-applied-filter-chip`)).reverse(),r=n.reduce((t,s,r)=>{let l=!1;if(r<n.length-1){const n=this.getElemBoundaries(s);if(l=!(0,o.isElementBoundariesWithinContainerElementBoundaries)(n,i),t.length&&!l){const t=Object.assign({},i);e===o.DIRECTIONALITY.LEFT_TO_RIGHT?t.right=t.right-a.width:e===o.DIRECTIONALITY.RIGHT_TO_LEFT&&(t.left=t.left+a.width),l=!(0,o.isElementBoundariesWithinContainerElementBoundaries)(n,t)}}if(l){const e=s.dataset.id;t.push(e)}return t},[]),l=r.length;if(l){const e=this.searchBarPopup.isOpen(),i=(0,o.getBusyContext)(t);this.appliedFiltersObservableArray().forEach(t=>{const i=(0,o.isNullOrUndefined)(r.find(e=>e===t.id)),a=Object.assign(Object.assign({},t),{shouldRender:i});e||a.targetTabIndex(s.TAB_INDEX.MINUS_ONE),this.appliedFiltersObservableArray.replace(t,a)}),e||this.appliedFilterChipOverflowTargetTabIndex(s.TAB_INDEX.ZERO),await i.whenReady(),e||(this.appliedFiltersContainerFocusedElemId=this.appliedFilterChipOverflowTargetId)}this.appliedFiltersOverflowCount(l)},this.openPopup=(e,t)=>{const i=(0,o.getBusyContext)(e);return l.subtreeShown(e),e.open(t),i.whenReady()},this.closePopup=e=>{const t=(0,o.getBusyContext)(e);return e.close(),t.whenReady()},this.openFilterPopup=async(e,t)=>{e&&t&&(this.activeAppliedFilter=t,this.deactivateAppliedFilterChips(),t.active(!0),this.filterDynamicFormValid(b.DYNAMIC_FORM_VALID_VALUE.VALID),this.setFilterDynamicFormInContext(t),await this.openPopup(this.filterPopup,e))},this.closeFilterPopup=async(e=!0)=>{if(!this.filterPopup.isOpen())return;this.filterDynamicFormConfigObservable().forceSkipValidationOnBeforeClose=e,await this.closePopup(this.filterPopup),this.resetFilterDynamicForm(),this.activeAppliedFilter=null},this.requiresFilterDynamicForm=async e=>{if(this.isKeywordFilterChip(e))return!1;const t=await this.getMetadataValueForFilterChip(e);return!!t&&(await this.registerCustomElementMappingIfNeeded(t),!t.readonly)},this.getDynamicUIMetadataForFilterChip=async e=>{const t=this.properties.filtersMetadata;if(!t)return null;const i=e.filter;let o="filter";const s={properties:["value"]};await t.getMetadata();let a=await t.getMetadataByDiscriminator(o,i,s);return a||(o="items.filter",a=await t.getMetadataByDiscriminator(o,i,s)),a},this.getMetadataValueForFilterChip=async e=>{var t;const i=await this.getDynamicUIMetadataForFilterChip(e);return null===(t=null==i?void 0:i.properties)||void 0===t?void 0:t.value},this.registerCustomElementMappingIfNeeded=async t=>{if((t.controlType||t.componentType)===b.COMPONENT_TYPE.OJ_SLIDER){(await new Promise((t,i)=>{e(["oj-dynamic/shared/DynamicInputRegistry"],t,i)})).getInstance().registerCustomElementMapping(b.COMPONENT_TYPE.OJ_SLIDER,{loadPath:"ojs/ojslider"})}},this.onFilterDynamicFormValueChanged=async e=>{this.triggerTelemetry(e,async t=>{const i=e.detail.value,o=this.findAppliedFilterById(i.id),s=Object.assign(Object.assign({},o),{value:i.value}),a=this.formatAppliedFilterDisplayLabel(s);if(t.setAttribute(this.telemetryPrefix+".complexFilterChipUpdated",a),s.isComplex){const e=[];this.resolveAppliedFiltersDependenciesForRemoval(s.filter,e),e.length>0&&this.appliedFiltersObservableArray.removeAll(e)}await this.updatedFilterLabelFromValueElementIfNeeded(s),this.appliedFiltersObservableArray.replace(o,s),this.smallScreenPopup.isOpen()&&this.isSmallScreenPopupDirty(!0),await this.updateValueProperty(this.appliedFiltersObservableArray()),t.end()})},this.setFilterDynamicFormInContext=e=>{const t=this.compositeElem.querySelector("#"+this.filterDynamicFormTemplateId),i=(0,p.stringToNodeArray)(t.innerHTML);let o;const s=this.getDisplayProperties(e.value),n=this.properties.filtersMetadata;this.getFilterDynamicFormLabelEdge(e).then(e=>(o=e,this.getFilterDynamicFormMetadataPath())).then(t=>{const r={displayProperties:s,id:this.filterDynamicFormId,labelEdge:o,metadata:n,metadataPath:t,onValueChanged:this.onFilterDynamicFormValueChanged.bind(this),valid:this.filterDynamicFormValid,value:e};this.filterDynamicFormConfigObservable({data:r,view:i});const l=this.undecorateFilter(e),d={$appliedFilters:this.undecorateFilters(this.appliedFiltersObservableArray()),$currentFilter:l};a.getInstance().assignFilterContext(d)}).catch(e=>{m.log(e)})},this.updatedFilterLabelFromValueElementIfNeeded=async e=>{if(!e.filterLabel)return;const t=await this.getMetadataValueForFilterChip(e);if("object"===t.type)return;const i=t.controlType||t.componentType;if(i!==b.COMPONENT_TYPE.OJ_CHECKBOXSET&&i!==b.COMPONENT_TYPE.OJ_RADIOSET&&i!==b.COMPONENT_TYPE.OJ_SELECT_SINGLE)return;const o=t.dataProvider;if(!o)return;const s=o.getCapability("fetchByKeys");if(!s||!s.implementation)return;let a;if(i===b.COMPONENT_TYPE.OJ_CHECKBOXSET){if(!Array.isArray(e.value))return;a=e.value[0]}else i!==b.COMPONENT_TYPE.OJ_RADIOSET&&i!==b.COMPONENT_TYPE.OJ_SELECT_SINGLE||(a=e.value);const n={keys:new Set};n.keys.add(a);const r=await o.fetchByKeys(n);if(r.results.has(a)){const t=r.results.get(a).data;e.label=e.label=t?t.label.replace(/\s\((?:(\d+))\)/,""):""}},this.getFilterDynamicFormLabelEdge=async e=>{const t=await this.getMetadataValueForFilterChip(e);return"object"===(null==t?void 0:t.type)?b.LABEL_EDGE.INSIDE:b.LABEL_EDGE.NONE},this.getDisplayProperties=e=>{if((0,o.isObject)(e)&&!Array.isArray(e)){const t=Object.keys(e);if(t.length)return t.map(e=>"value."+e)}return["value"]},this.getFilterDynamicFormElem=()=>{let e;if(this.smallScreenPopup.isOpen()?e=this.smallScreenPopup:this.filterPopup.isOpen()&&(e=this.filterPopup),e)return e.querySelector("#"+this.filterDynamicFormId)},this.focusFilterDynamicFormElem=()=>{const e=this.getFilterDynamicFormElem();e&&e.focus()},this.onFilterPopupBeforeClose=e=>{if(!this.filterDynamicFormConfigObservable().forceSkipValidationOnBeforeClose&&this.filterDynamicFormValid()!==b.DYNAMIC_FORM_VALID_VALUE.VALID){e.preventDefault();const t=this.getFilterDynamicFormElem();t&&t.focusOn("@firstInvalidShown")}},this.onFilterPopupClose=()=>{if(!this.isConnected)return;const e=this.findAppliedFilterElemById(this.activeAppliedFilter.id);this.deactivateAppliedFilterChips();const t=this.getInputTextElem();document.activeElement!==t&&this.focusFilterChipElement(e)},this.openSmallScreenPopup=async(e=b.SMALL_SCREEN_POPUP_VIEW.SEARCH)=>{var t;if(this.smallScreenPopupActiveView(e),e===b.SMALL_SCREEN_POPUP_VIEW.SEARCH){this.isSmallScreenPopupDirty(!1);const e=(0,o.cloneDeep)(this.appliedFiltersObservableArray()),i=null===(t=e[0])||void 0===t?void 0:t.targetId;this.updateAppliedFilterChipsTabIndex(e,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),this.smallScreenPopupAppliedFiltersUnmutated=e,this.smallScreenPopupSuggestionsListViewSelected.clear(),this.inputTextValue(null)}else e===b.SMALL_SCREEN_POPUP_VIEW.MORE_FILTERS&&this.smallScreenPopupMoreFiltersListViewSelected.clear();let i;await this.openPopup(this.smallScreenPopup,document.body),e===b.SMALL_SCREEN_POPUP_VIEW.SEARCH?i=this.getInputTextElem():e===b.SMALL_SCREEN_POPUP_VIEW.MORE_FILTERS&&(i=this.getMoreFiltersInputTextElem()),(0,o.disableInputTextElemAutoCapitalization)(i)},this.closeSmallScreenPopup=async()=>{await this.closePopup(this.smallScreenPopup),this.smallScreenPopupActiveAppliedFilter=null,this.isSmallScreenPopupDirty(!1),this.smallScreenPopupAppliedFiltersUnmutated=null,this.inputTextValue(null),this.shouldDisplaySmallScreenPopupFilterDynamicForm(!1),this.resetFilterDynamicForm(),this.shouldDisplaySeeResultsButton(!1)},this.openSuggestionsPopup=async()=>{let e=`.${v}-search-bar`,t=this.compositeElem;this.searchBarPopup.isOpen()&&(e=`.${v}-search-bar-popup ${e}`,t=this.searchBarPopup);const i=t.querySelector(e);this.searchBarWidth(i.offsetWidth+"px"),this.suggestionsListViewSelected.clear(),await this.openPopup(this.suggestionsPopup,i);const o=this.getInputTextElem();null==o||o.setAttribute("aria-expanded","true")},this.closeSuggestionsPopup=async()=>{await this.closePopup(this.suggestionsPopup)},this.onSuggestionsPopupClosed=()=>{const e=this.getInputTextElem();null==e||e.setAttribute("aria-expanded","false")},this.openSearchBarPopup=async()=>{var e;const t=this.appliedFiltersObservableArray(),i=null===(e=t[0])||void 0===e?void 0:e.targetId;this.updateAppliedFilterChipsTabIndex(t,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFiltersContainerFocusedElemId:!0});const o=this.compositeElem.querySelector(`.${v}-search-bar`);this.searchBarWidth(o.offsetWidth+"px"),await this.openPopup(this.searchBarPopup,o)},this.closeSearchBarPopup=async()=>{await this.closePopup(this.searchBarPopup)},this.onSearchBarPopupClose=()=>{this.isConnected&&this.updateAppliedFiltersTabIndexAfterPopupClose()},this.onSmallScreenPopupClose=async()=>{this.isConnected&&(this.updateAppliedFiltersTabIndexAfterPopupClose(),await this.handleAppliedFilterChipsOverflow())},this.updateAppliedFiltersTabIndexAfterPopupClose=()=>{var e;const t=this.appliedFiltersObservableArray();if(!t.length)return;let i=null===(e=t.find(({targetId:e})=>this.lastAppliedFiltersContainerFocusedElemId===e))||void 0===e?void 0:e.targetId;i||(i=this.appliedFiltersOverflowCount()?this.appliedFilterChipOverflowTargetId:t[0].targetId),this.updateAppliedFilterChipsTabIndex(t,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),this.lastAppliedFiltersContainerFocusedElemId=null},this.openMoreFiltersPopup=async()=>{this.moreFiltersListViewSelected.clear();const e=this.compositeElem.querySelector(`.${v}-more-filters-filter-chip`);if(await this.openPopup(this.moreFiltersPopup,e),this.shouldDisplayMoreFiltersPopupSearchBar()){const e=this.getMoreFiltersInputTextElem();(0,o.disableInputTextElemAutoCapitalization)(e),this.focusMoreFiltersInputTextElem()}else this.focusPopupListView(this.moreFiltersPopup)},this.closeMoreFiltersPopup=async()=>{await this.closePopup(this.moreFiltersPopup)},this.deactivateAppliedFilterChips=()=>{this.smallScreenPopup.isOpen()&&!this.smallScreenPopupActiveAppliedFilter||(this.appliedFiltersObservableArray().forEach(e=>{e.active(!1)}),this.smallScreenPopupActiveAppliedFilter=null)},this.activateAppliedFilterChip=async e=>{var t;if(!e||this.isKeywordFilterChip(e))return;e.active(!0);const i=this.getAppliedFiltersContainerElem(),s=this.findAppliedFilterElemById(e.id);this.smallScreenPopup.isOpen()?this.smallScreenPopupActiveAppliedFilter=e:this.isMediumToUpScreenAndExpanded()&&(this.activeAppliedFilter=e,this.makeElemVisibleInContainerElem(s,i));if(await this.requiresFilterDynamicForm(e)){if(this.smallScreenPopup.isOpen()&&this.shouldDisplaySmallScreenPopupFilterDynamicForm(!0),!(0,o.isNullOrUndefined)(null===(t=null==s?void 0:s.dataset)||void 0===t?void 0:t.spDead))return;this.setFilterDynamicFormInContext(e)}},this.generateFilterCriterion=(e=[],t="")=>{let i;return i=e.length?{criteria:[{op:"$ne",value:{filters:e}},{text:t}],op:"$and"}:{text:t},i},this.findAppliedFilterById=e=>this.appliedFiltersObservableArray().find(({id:t})=>t===e),this.findAppliedFilterElemById=e=>{const t=this.getAppliedFiltersContainerElem();return null==t?void 0:t.querySelector(`.${v}-applied-filter-chip[data-id="${e}"]`)},this.getAppliedFiltersContainerElem=()=>{let e;return e=this.smallScreenPopup.isOpen()?this.smallScreenPopup.querySelector(`.${v}-search-bar-items`):this.compositeElem.querySelector(`.${v}-search-bar-content`),e},this.generateFilterChipId=({count:e,label:t,value:i,filter:s},a)=>{const n=[],r=(0,o.isEmpty)(s)?"f":s;n.push(r);const l=(0,o.isEmpty)(t)?"l":t;let d;n.push(l),d=(0,o.isEmpty)(i)?"l":Array.isArray(i)?i.join("-"):(0,o.isObject)(i)?Object.keys(i).map(e=>`${e}:${i[e]}`).join("-"):i.toString(),n.push(d),a&&n.push(a);const c=(0,o.isNullOrUndefined)(e)||isNaN(e)?"c":e.toString();n.push(c);const p=n.join("");return(0,o.hashCode)(p).toString()},this.decorateFilter=async(e,t)=>{const o=this.isComplexFilterChip(e);let a,n;if(o){const t=await this.getMetadataValueForFilterChip(e);a=(null==t?void 0:t.controlType)||(null==t?void 0:t.componentType);if("object"===(null==t?void 0:t.type)){const{properties:e}=t,{gte:i,lte:o}=e;"oj-input-number"===(null==i?void 0:i.componentType)&&"number"===(null==i?void 0:i.type)&&"oj-input-number"===(null==o?void 0:o.componentType)&&"number"===(null==o?void 0:o.type)?n=b.FILTER_CHIP_VALUE_TYPE.NUMERIC_RANGE:"oj-input-date"===(null==i?void 0:i.componentType)&&"string"===(null==i?void 0:i.type)&&"oj-input-date"===(null==o?void 0:o.componentType)&&"string"===(null==o?void 0:o.type)&&(n=b.FILTER_CHIP_VALUE_TYPE.DATE_RANGE)}}let r=Object.assign(Object.assign({},e),{active:i.observable(!1),componentType:a,hasPopup:i.observable(o),id:this.generateFilterChipId(e),isComplex:o,shouldRender:!0,type:t,valueType:n});if(t===b.FILTER_CHIP_TYPE.APPLIED){const{labelTargetId:t,labelTargetTabIndex:o,valueCountTargetId:a,valueCountTargetTabIndex:n}=r,l=__rest(r,["labelTargetId","labelTargetTabIndex","valueCountTargetId","valueCountTargetTabIndex"]);r=Object.assign(Object.assign({},l),{targetId:this.generateFilterChipId(e,"l"),targetTabIndex:i.observable(s.TAB_INDEX.MINUS_ONE)})}else if(t===b.FILTER_CHIP_TYPE.SUGGESTION){const{targetId:t,targetTabIndex:o}=r,a=__rest(r,["targetId","targetTabIndex"]);r=Object.assign(Object.assign({},a),{labelTargetId:this.generateFilterChipId(e,"l"),labelTargetTabIndex:i.observable(s.TAB_INDEX.MINUS_ONE),valueCountTargetId:this.generateFilterChipId(e,"vc"),valueCountTargetTabIndex:i.observable(s.TAB_INDEX.MINUS_ONE)})}return r},this.decorateFilters=(e=[],t)=>Promise.all(e.map(e=>this.decorateFilter(e,t))),this.undecorateFilter=e=>{const{active:t,componentType:i,hasPopup:o,id:s,isComplex:a,labelTargetId:n,labelTargetTabIndex:r,shouldRender:l,targetId:d,targetTabIndex:c,type:p,valueCountTargetId:u,valueCountTargetTabIndex:h,valueType:m}=e;return __rest(e,["active","componentType","hasPopup","id","isComplex","labelTargetId","labelTargetTabIndex","shouldRender","targetId","targetTabIndex","type","valueCountTargetId","valueCountTargetTabIndex","valueType"])},this.undecorateFilters=(e=[])=>e.map(e=>this.undecorateFilter(e)),this.resetAppliedFilters=async e=>{this.appliedFiltersObservableArray.removeAll(),e.length&&this.appliedFiltersObservableArray.push(...e),await this.updateValueProperty(this.appliedFiltersObservableArray())},this.updateValueProperty=async e=>{const t=this.undecorateFilters(e);(0,o.isNullOrUndefined)(this.properties.value)?(0,o.isNullOrUndefined)(this.properties.appliedFilters)||(this.properties.appliedFilters=t):this.properties.value=t,await this.updateSuggestionFiltersObservableFromAppliedFilters(t)},this.parseExpandedValue=(e=b.EXPANDED_VALUE.AUTO)=>!!this.appliedFiltersObservableArray().length||(e===b.EXPANDED_VALUE.TRUE||e!==b.EXPANDED_VALUE.FALSE&&this.isMediumToUpScreen()),this.parseSuggestionFiltersOverflowValue=(e=b.SUGGESTION_FILTERS_OVERFLOW_VALUE.ON)=>e===b.SUGGESTION_FILTERS_OVERFLOW_VALUE.ON,this.parseAutocompleteSourceValue=(e=b.AUTOCOMPLETE_SOURCE_VALUE.ON)=>(0,o.isNullOrUndefined)(e)||e===b.AUTOCOMPLETE_SOURCE_VALUE.ON,this.updateIsExpanded=()=>{const e=this.parseExpandedValue(this.properties.displayOptions.expanded);this.isExpanded(e),this.updateInputTextRoleToComboBox()},this.isKeywordFilterChip=e=>e.filter===A.KEYWORD,this.isComplexFilterChip=e=>!this.isKeywordFilterChip(e),this.isSmallScreenPopupActiveAppliedFilter=e=>this.smallScreenPopupActiveAppliedFilter&&this.smallScreenPopupActiveAppliedFilter.id===e.id,this.isActiveAppliedFilter=e=>this.activeAppliedFilter&&this.activeAppliedFilter.id===e.id,this.isMediumToUpScreen=()=>!this.isSmallScreen(),this.isMediumToUpScreenAndExpanded=()=>this.isMediumToUpScreen()&&this.isExpanded(),this.onMoreFiltersFilterChipAction=async()=>{if(this.moreFiltersInputTextValue(null),this.isSmallScreen())return await this.openSmallScreenPopup(b.SMALL_SCREEN_POPUP_VIEW.MORE_FILTERS),void this.focusMoreFiltersInputTextElem();this.shouldDisplayMoreFiltersPopupSearchBar(this.moreFiltersSuggestionFilters.length>8),await this.openMoreFiltersPopup()},this.onMoreFiltersListViewItemAction=async e=>{this.triggerTelemetry(e,async t=>{const{data:i,key:o}=e.detail.context;try{if(this.validateKey(o)){const e=this.smallScreenPopup.isOpen()?this.smallScreenPopup:this.moreFiltersPopup,o="moreFilters_"+i.id,s=this.generateIndex(o,e);s>=0&&(t.setAttribute(this.telemetryPrefix+".type",i.type),t.setAttribute(this.telemetryPrefix+".position",s+4))}}catch(e){m.warn(e)}const s=e.detail.context.data;this.smallScreenPopup.isOpen()&&await this.closeSmallScreenPopup(),this.moreFiltersPopup.isOpen()&&await this.closeMoreFiltersPopup(),await this.applySuggestionFilter(s),t.end()})},this.onMoreFiltersListViewCurrentItemChanged=e=>{const t=i.contextFor(e.detail.item);if(!t)return;const o=t.$current.data;this.setListViewSelected(this.moreFiltersListViewSelected,o.id)},this.onSmallScreenPopupMoreFiltersListViewCurrentItemChanged=e=>{const t=i.contextFor(e.detail.item);if(!t)return;const o=t.$current.data;this.setListViewSelected(this.smallScreenPopupMoreFiltersListViewSelected,o.id)};const{element:C,properties:E,uniqueId:T}=t;this.compositeElem=C,this.properties=E,this.uniqueId=T,this.res=Object.assign(Object.assign({},n),this.properties.translations),this.screenRange=(0,g.createScreenRangeObservable)(),this.isSmallScreen=i.observable(this.screenRange()===o.SCREEN_RANGE.SMALL),this.appliedFilterChipOverflowTargetId=`${v}-applied-filter-overflow-target-${this.uniqueId}`,this.appliedFilterChipOverflowTargetTabIndex=i.observable(s.TAB_INDEX.MINUS_ONE),this.appliedFiltersObservableArray=i.observableArray([]),this.lastAppliedFiltersContainerFocusedElemId=null,this.suggestionFiltersObservable=i.observable(),this.suggestionFiltersContainerFocusedElemId=null,this.activeAppliedFilter=null,this.appliedFiltersOverflowCount=i.observable(0),this.dateTimeConverter=new d.IntlDateTimeConverter,this.filterDynamicFormConfigObservable=i.observable({data:{},view:[]}),this.filterDynamicFormId=`${v}-filter-dynamic-form-${this.uniqueId}`,this.filterDynamicFormTemplateId=`${v}-filter-dynamic-form-template-${this.uniqueId}`,this.filterDynamicFormValid=i.observable(b.DYNAMIC_FORM_VALID_VALUE.VALID),this.filterPopupId=`${v}-filter-popup-${this.uniqueId}`,this.hasInputTextFocus=i.observable(!1),this.inputTextRawValue=i.observable(),this.inputTextRawValueChangeDelay=350,this.inputTextValue=i.observable(),this.isSmallScreenPopupDirty=i.observable(!1),this.moreFiltersFilterChipLabelTargetId=`${v}-more-filters-filter-chip-label-target-${this.uniqueId}`,this.moreFiltersFilterChipLabelTargetTabIndex=i.observable(s.TAB_INDEX.MINUS_ONE),this.moreFiltersInputTextRawValue=i.observable(),this.moreFiltersInputTextValue=i.observable(),this.moreFiltersListViewObservable=i.observable(),this.moreFiltersListViewSelected=new u.ObservableKeySet,this.moreFiltersPopupId=`${v}-more-filters-popup-${this.uniqueId}`,this.moreFiltersSuggestionFilters=[],this.moreFiltersSuggestionFiltersUnmutated=[],this.shouldDisplayMoreFiltersFilterChip=i.observable(!1),this.shouldDisplayMoreFiltersPopupSearchBar=i.observable(!1),this.shouldDisplaySeeResultsButton=i.observable(!1),this.shouldDisplaySmallScreenPopupFilterDynamicForm=i.observable(!1),this.shouldDisplaySuggestionFiltersContainer=i.observable(!1),this.numberConverter=new c.IntlNumberConverter,this.searchBarPopupBackground=(0,o.computedStyleOnElement)(this.compositeElem,`--${v}-search-bar-popup-bg-color`)?"mixed":"",this.searchBarPopupId=`${v}-search-bar-popup-${this.uniqueId}`,this.searchBarWidth=i.observable(),this.smallScreenPopupActiveAppliedFilter=null,this.smallScreenPopupActiveView=i.observable(b.SMALL_SCREEN_POPUP_VIEW.SEARCH),this.smallScreenPopupId=`${v}-sm-dialog-${this.uniqueId}`,this.smallScreenPopupAppliedFiltersUnmutated=null,this.smallScreenPopupMoreFiltersListViewSelected=new u.ObservableKeySet,this.smallScreenPopupSuggestionsListViewSelected=new u.ObservableKeySet,this.suggestionsListViewObservable=i.observable(),this.suggestionsListViewSelected=new u.ObservableKeySet,this.suggestionsPopupId=`${v}-suggestions-popup-${this.uniqueId}`,this.suggestionsListViewId=`${v}-suggestions-popup-lv-${this.uniqueId}`,this.tracer=(0,f.getTracerProvider)().getTracer("oj-sp."+t.element.localName),this.telemetryPrefix="oj-sp."+t.element.localName;const _=new Map;this.oTelcontext={getValue:e=>_.get(e),setValue(e,t){return _.set(e,t),this},deleteValue(e){return _.delete(e),this}},this.totalCount=i.observable(0);const S=this.parseExpandedValue(this.properties.displayOptions.expanded);this.isExpanded=i.observable(S);const x=this.parseSuggestionFiltersOverflowValue(this.properties.displayOptions.suggestionFiltersOverflow);this.isSuggestionFiltersOverflowOn=i.observable(x);const O=this.parseAutocompleteSourceValue(this.properties.displayOptions.autocompleteSource);this.isAutocompleteSourceOn=i.observable(O),this.appliedFiltersOverflowString=i.computed(()=>{const e=Math.min(this.appliedFiltersOverflowCount(),99);return y.applyParameters(this.res.plusCount,{0:e})},this),this.seeResultsString=i.computed(()=>y.applyParameters(this.res.seeResults,{0:this.numberConverter.format(this.totalCount())}),this),(0,o.isEmpty)(this.properties.resultsData)||this.properties.resultsData.addEventListener(b.EVENT_NAME.AFTER_FETCH,this.onResultsDataAfterFetch),(0,o.isEmpty)(this.properties.suggestionFilters)||(this.properties.suggestionFilters.addEventListener(b.EVENT_NAME.AFTER_FETCH,this.onSuggestionFiltersAfterFetch),this.properties.suggestionFilters.addEventListener(b.EVENT_NAME.REFRESH,this.onSuggestionFiltersRefresh)),this.updateListDataProviderViewObservable(this.suggestionFiltersObservable,[]),this.updateListDataProviderViewObservable(this.moreFiltersListViewObservable,[]),this.properties.totalCount=0}activated(e){}connected(){this.isConnected=!0,window.addEventListener("resize",this.handleAppliedFilterChipsOverflow)}disconnected(){var e;this.isConnected=!1,null===(e=this.screenRangeSubscription)||void 0===e||e.dispose(),window.removeEventListener("resize",this.handleAppliedFilterChipsOverflow)}async propertyChanged(e){var t;const{property:s,subproperty:a,updatedFrom:n,value:r}=e;if(n===o.UPDATED_FROM.EXTERNAL&&("value"===s||"appliedFilters"===s)){this.filterPopup.isOpen()&&await this.closeFilterPopup();const e=await this.decorateFilters(r,b.FILTER_CHIP_TYPE.APPLIED),i=null===(t=e[0])||void 0===t?void 0:t.targetId;this.updateAppliedFilterChipsTabIndex(e,{appliedFilterChipTargetIdToSetTabIndexZero:i,shouldUpdateAppliedFilterChipOverflowTargetTabIndex:!0,shouldUpdateAppliedFiltersContainerFocusedElemId:!0}),this.appliedFiltersObservableArray(e),await this.updateSuggestionFiltersObservableFromAppliedFilters(r),this.updateIsExpanded(),this.isExpanded()&&await this.handleAppliedFilterChipsOverflow()}if(n===o.UPDATED_FROM.EXTERNAL&&"resultsData"===s&&((0,o.isNullOrUndefined)(r)||r.addEventListener(b.EVENT_NAME.AFTER_FETCH,this.onResultsDataAfterFetch)),n===o.UPDATED_FROM.EXTERNAL&&"suggestionFilters"===s){(0,o.isNullOrUndefined)(r)?this.shouldDisplaySuggestionFiltersContainer(!1):(this.shouldDisplaySuggestionFiltersContainer(!0),r.addEventListener(b.EVENT_NAME.AFTER_FETCH,this.onSuggestionFiltersAfterFetch),r.addEventListener(b.EVENT_NAME.REFRESH,this.onSuggestionFiltersRefresh));const e=this.properties.value||this.properties.appliedFilters;await this.updateSuggestionFiltersObservableFromAppliedFilters(e)}if(n===o.UPDATED_FROM.EXTERNAL&&"suggestions"===s){const e=this.properties.value||this.properties.appliedFilters;await this.updateSuggestionFiltersObservableFromAppliedFilters(e)}if(n===o.UPDATED_FROM.EXTERNAL&&"displayOptions"===s&&a){const{path:e,value:t}=a;if("displayOptions.suggestionFiltersOverflow"===e){const e=this.parseSuggestionFiltersOverflowValue(t);this.isSuggestionFiltersOverflowOn=i.observable(e)}if("displayOptions.autocompleteSource"===e){const e=this.parseAutocompleteSourceValue(t);this.isAutocompleteSourceOn(e)}}}makeElemVisibleInContainerElem(e,t){e&&t&&!(0,o.isElementVisibleInContainerElement)(e,t)&&t.scrollTo({behavior:"smooth",left:e.offsetLeft})}triggerTelemetry(e,t){this.oTelcontext.setValue(C,e),this.tracer.startActiveSpan("componentEvent",{},this.oTelcontext,t)}resolveAppliedFiltersDependenciesForRemoval(e,t){const i=this.appliedFiltersObservableArray();for(let o=0;o<i.length;o++){const s=i[o];Array.isArray(s.dependencies)&&s.dependencies.indexOf(e)>-1&&(t.push(s),this.resolveAppliedFiltersDependenciesForRemoval(s.filter,t))}}getFilterDynamicFormMetadataPath(){return new Promise(e=>{let t="";this.properties.filtersMetadata.getMetadata({propertyPath:"items"}).then(i=>{i&&(t="items"),e(t)}).catch(e=>{m.log(e)})})}resetFilterDynamicForm(){this.filterDynamicFormConfigObservable({data:{},view:[]})}announce(e){const t=document.createElement("SPAN");t.textContent=e,t.id="_msg"+(this.ariaLiveRegion.childElementCount+1),this.ariaLiveRegion.appendChild(t)}}})),define("css!oj-sp/smart-filters/smart-filters",[],(function(){})),define("oj-sp/smart-filters/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./smart-filters.html","./smart-filters","css!./smart-filters.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-smart-filters",{metadata:JSON.parse(o),view:s,viewModel:a.OjSpSmartFiltersViewModel})})),define("oj-sp/collection-container/components/smart-filters-container",["require","exports","preact","oj-sp/smart-filters/loader"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartFiltersContainer=void 0;t.SmartFiltersContainer=e=>(0,i.h)("div",{class:"oj-flex-item oj-sm-12 oj-sm-margin-3x-bottom"},(0,i.h)("oj-sp-smart-filters",{id:e.componentId+"_smartfilters",askHint:e.askHint,autofocus:e.autofocus,displayOptions:{expanded:!0},resultsData:e.resultsData,translations:e.translations,value:e.value,onvalueChanged:t=>e.onValueChanged(t.detail.value)}))})),define("oj-sp/collection-container/utils/manage-columns-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageColumnsUtils=void 0;class i{static findItemRecursively(e,t){let i;const o=e;for(let s=0;s<o.length&&(o[s].id===t?i={arr:e,index:s}:o[s].children&&(i=this.findItemRecursively(o[s].children,t)),!i);s++);return i}static reorderColumn(e,t,i,o){const s=e.slice(),a=this.findItemRecursively(s,t),n=this.findItemRecursively(s,i);let r;return a&&(r=a.arr.splice(a.index,1)[0]),n&&r&&("inside"===o?n.arr[n.index].children.push(r):"after"===o&&n.index===n.arr.length-1?n.arr.push(r):n.arr.splice("after"===o?n.index+1:n.index,0,r)),s}static getMovedColumns(e,t,i){const o=[];return[...e.values()].forEach(e=>{t.has(e)||o.push(i.find(t=>t.id===e))}),o}static reorderAllColumnsList(e,t,o,s,a){if(s.parentKey===o.parentKey){const t="activeColumns"===s.parentKey?e[0]:e[1],i=t.findIndex(e=>e.id===s.key),n=t.findIndex(e=>e.id===o.key),r=t.splice(n,1)[0];"after"===a?t.splice(i+1,0,r):"before"===a?t.splice(i-1,0,r):t.push(r)}else{if("activeColumns"===s.key||"activeColumns"===s.parentKey){const s=t.hiddenColumns.filter(e=>e.id===o.key);i.moveColumnsFromOneGroupToAnother(s,e[1],e[0])}if("hiddenColumns"===s.key||"hiddenColumns"===s.parentKey){const s=t.activeColumns.filter(e=>e.id===o.key);i.moveColumnsFromOneGroupToAnother(s,e[0],e[1])}}}static copyColumns(e){const t=[];if(e)for(const i of e)t.push(i);return t}static areKeysSame(e,t){return JSON.stringify(e)===JSON.stringify(t)}static swapColumnUsingKeySet(e,t,i){for(let o=e.length-1;o>=0;o--){const s=e[o];i.has(s.id)||(e.splice(o,1),t.unshift(s))}for(let o=t.length-1;o>=0;o--){const s=t[o];i.has(s.id)&&(t.splice(o,1),e.push(s))}return[e,t]}static moveColumnsFromOneGroupToAnother(e,t,i){e.forEach(e=>{let o=t.findIndex(t=>t.id===e.id);o>-1&&t.splice(o,1),o=i.findIndex(t=>t.id===e.id),-1===o&&i.push(e)})}}i.searchColumns=(e,t)=>{if(!e)return t;return t.filter(t=>t.headerText.toLowerCase().includes(e.toLowerCase()))},t.ManageColumnsUtils=i})),define("oj-sp/collection-container/utils/hooks-utils",["require","exports","preact/hooks"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaQuery=void 0;t.useMediaQuery=e=>{const[t,o]=(0,i.useState)(window.matchMedia(e).matches);return(0,i.useEffect)(()=>{const i=window.matchMedia(e);i.matches!==t&&o(i.matches);const s=()=>o(i.matches);return i.addEventListener("change",s),()=>i.removeEventListener("change",s)},[e]),t}})),define("oj-sp/collection-container/components/columns-dialog",["require","exports","preact","preact/hooks","preact/compat","ojs/ojkeyset","ojs/ojmutablearraytreedataprovider","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../utils/manage-columns-utils","../utils/collection-container-constants","../utils/hooks-utils","ojs/ojdialog","ojs/ojlistview","ojs/ojinputtext","ojs/ojmenu","ojs/ojlistitemlayout","ojs/ojlistviewdnd"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const p=(e,t)=>{if(0===e.length&&0===t.length)return[];return[{children:e,id:"activeColumns",name:r.show},{children:t,id:"hiddenColumns",name:r.hide}]},u=e=>{const t=[];for(const i of e){const e=Object.assign({},i);t.push(e.id)}return t};t.default=(0,s.memo)((0,s.forwardRef)((e,t)=>{const s=(0,o.useRef)(),h=(0,o.useRef)(),m=(0,o.useRef)(),g=(0,o.useRef)(),y=(0,o.useRef)(new n.MutableArrayTreeDataProvider([],"id")),[f,b]=(0,o.useState)(""),v=(0,o.useRef)([[],[]]),[j,A]=(0,o.useState)(()=>({activeColumns:l.ManageColumnsUtils.copyColumns(e.activeColumns),hiddenColumns:l.ManageColumnsUtils.copyColumns(e.hiddenColumns)})),C=(0,c.useMediaQuery)(d.SMALL_SCREEN_MEDIA_QUERY);(0,o.useEffect)(()=>{S||(A(()=>({activeColumns:l.ManageColumnsUtils.copyColumns(e.activeColumns),hiddenColumns:l.ManageColumnsUtils.copyColumns(e.hiddenColumns)})),v.current[0]=l.ManageColumnsUtils.copyColumns(e.activeColumns),v.current[1]=l.ManageColumnsUtils.copyColumns(e.hiddenColumns))},[e.activeColumns,e.hiddenColumns]),(0,o.useEffect)(()=>{s.current=!1,h.current=!1,m.current=!1,g.current=[l.ManageColumnsUtils.copyColumns(e.activeColumns),l.ManageColumnsUtils.copyColumns(e.hiddenColumns)],v.current=[l.ManageColumnsUtils.copyColumns(e.activeColumns),l.ManageColumnsUtils.copyColumns(e.hiddenColumns)]},[]);const E=()=>{s.current&&(s.current=!1),h.current&&(h.current=!1),m.current&&(m.current=!1)},{columnsData:T,selectedColumns:_,columnsFiltered:S}=(0,o.useMemo)(()=>{const e=""!==f;return{columnsData:p(j.activeColumns,j.hiddenColumns),selectedColumns:new a.KeySetImpl(u(j.activeColumns)),columnsFiltered:e}},[j]);(0,o.useEffect)(()=>{y.current.data=T},[T]);const x=(e,t)=>{t.leaf||e.preventDefault()},O=e=>{const t=e.detail.value,i=[...t.values()],o=u(j.activeColumns);if(l.ManageColumnsUtils.areKeysSame(i,o))return;const a=e.detail.previousValue.keys.keys,n=e.detail.value.keys.keys,r=l.ManageColumnsUtils.getMovedColumns(a,n,j.activeColumns),d=l.ManageColumnsUtils.getMovedColumns(n,a,j.hiddenColumns);l.ManageColumnsUtils.moveColumnsFromOneGroupToAnother(r,v.current[0],v.current[1]),l.ManageColumnsUtils.moveColumnsFromOneGroupToAnother(d,v.current[1],v.current[0]);const c=l.ManageColumnsUtils.swapColumnUsingKeySet(l.ManageColumnsUtils.copyColumns(j.activeColumns),l.ManageColumnsUtils.copyColumns(j.hiddenColumns),t);s.current=!0,A(e=>{const t=c[0],i=c[1];return Object.assign(Object.assign({},e),{activeColumns:t,hiddenColumns:i})})},w=t=>{var i,o;const s=document.getElementById(e.componentId+"_manage_columns_list_view"),a=s.getContextByNode(t.detail.reference),n=t.detail.items;for(const e of n){const n=s.getContextByNode(e);if(!n.group){const e={key:n.key,parentKey:null===(i=n.parent)||void 0===i?void 0:i.key},s={key:a.key,parentKey:null===(o=a.parent)||void 0===o?void 0:o.key};l.ManageColumnsUtils.reorderAllColumnsList(v.current,j,e,s,t.detail.position);const r=l.ManageColumnsUtils.reorderColumn(T,n.key,a.key,t.detail.position),d=r.find(e=>"activeColumns"===e.id),c=r.find(e=>"hiddenColumns"===e.id);h.current=!0,A(e=>{const t=d.children,i=c.children;return Object.assign(Object.assign({},e),{activeColumns:t,hiddenColumns:i})})}}},I=e=>{const t=e.detail.value,i=l.ManageColumnsUtils.searchColumns(t,l.ManageColumnsUtils.copyColumns(v.current[0])),o=l.ManageColumnsUtils.searchColumns(t,l.ManageColumnsUtils.copyColumns(v.current[1]));b(()=>t),A(e=>{const t=i,s=o;return Object.assign(Object.assign({},e),{activeColumns:t,hiddenColumns:s})})},D=()=>{b(()=>""),m.current=!0,v.current=[l.ManageColumnsUtils.copyColumns(g.current[0]),l.ManageColumnsUtils.copyColumns(g.current[1])],A(e=>{const t=l.ManageColumnsUtils.copyColumns(g.current[0]),i=l.ManageColumnsUtils.copyColumns(g.current[1]);return Object.assign(Object.assign({},e),{activeColumns:t,hiddenColumns:i})})},N=t=>{return(0,i.h)(i.Fragment,null,t.leaf&&(s=t,(0,i.h)("li",{key:`${e.componentId}_${s.data.id}`},(0,i.h)("div",{class:"oj-flex"},(0,i.h)("oj-list-item-layout",{id:`${e.componentId}_${s.data.id}_column`,class:"oj-flex-item","data-column-id":s.data.id},(0,i.h)("span",{class:"oj-typography-body-md oj-text-color-primary"},s.data.headerText),(0,i.h)("oj-selector",{id:`${e.componentId}_listview_checkboxset_${s.data.id}`,"aria-label":s.data.headerText+" column",slot:"selector",onselectedKeysChanged:O,selectionMode:"multiple",rowKey:s.data.id,selectedKeys:_}),!S&&(0,i.h)("div",{slot:"action",id:`${e.componentId}_${s.key}_draghandle`,"aria-labelledby":s.key+"_draghandle",class:"oj-sm-align-self-center oj-sm-margin-4x-horizontal oj-listview-drag-handle","aria-label":`Reorder ${s.data.headerText}, draggable, context menu available`,role:"button",tabIndex:0}))))),!t.leaf&&(o=t,(0,i.h)("li",{id:`${e.componentId}_${o.key}_group`},(0,i.h)("span",null,o.data.name))));var o,s},P=()=>(0,i.h)("div",{class:"oj-sp-collection-container-columns-list-view-no-data"},(0,i.h)("span",{class:"oj-typography-body-md oj-text-color-primary"},r.no_item_to_display));return(0,i.h)("div",{id:e.componentId+"_manage_columns_dialog_container","data-oj-context":!0},(0,i.h)("oj-dialog",{"aria-label":"manage-columns",ref:t,id:e.componentId+"_manage_columns_dialog",class:"oj-sp-collection-container-manage-columns-dialog",dialogTitle:r.columns,cancelBehavior:"icon",onojBeforeClose:t=>{b(e=>""),S&&(s.current||h.current)?(null==e||e.onActiveColumnsChanged(l.ManageColumnsUtils.copyColumns(v.current[0])),null==e||e.onHiddenColumnsChanged(l.ManageColumnsUtils.copyColumns(v.current[1]))):(s.current||h.current||m.current)&&(null==e||e.onActiveColumnsChanged([...j.activeColumns]),null==e||e.onHiddenColumnsChanged([...j.hiddenColumns])),E()}},(0,i.h)("div",{slot:"body"},(0,i.h)("oj-input-text",{id:e.componentId+"_manage_columns_search_box",value:f,labelHint:r.search,labelEdge:"none",placeholder:r.search,clearIcon:"conditional",onrawValueChanged:I},(0,i.h)("div",{slot:"start",class:"oj-text-field-start-end-icon oj-ux-ico-search",role:"presentation"})),(0,i.h)("oj-list-view",{id:e.componentId+"_manage_columns_list_view","aria-label":"List for managing columns",class:"oj-sp-collection-container-columns-list-view",data:y.current,drillMode:"none",dnd:{reorder:{items:"enabled"},drop:{items:{dragOver:x}}},groupHeaderPosition:"static",selectionRequired:!1,onojReorder:w},(0,i.h)("oj-menu",{slot:"contextMenu","aria-label":"Item Reorder",onojBeforeOpen:e=>(e=>{e.detail.originalEvent.target.classList.contains("oj-listview-drag-handle")&&e.preventDefault()})(e),class:"oj-sp-collection-container-dialog-menu-visibility"},(0,i.h)("oj-option",{"data-oj-command":"oj-listview-cut"}),(0,i.h)("oj-option",{"data-oj-command":"oj-listview-paste"}),(0,i.h)("oj-option",{"data-oj-command":"oj-listview-paste-before"}),(0,i.h)("oj-option",{"data-oj-command":"oj-listview-paste-after"})),(0,i.h)("template",{slot:"itemTemplate",render:N}),(0,i.h)("template",{slot:"noData",render:P}))),(0,i.h)("div",{slot:"footer",class:"oj-dialog-footer-separator"},(0,i.h)("oj-button",{id:e.componentId+"_columns_restore_button",class:"oj-button-sm oj-sp-collection-container-columns-restore-button "+(C?"oj-sm-width-full":""),onojAction:D},(0,i.h)("span",null,r.restoreDefaults)))))}),(e,t)=>e.activeColumns===t.activeColumns&&(e.hiddenColumns===t.hiddenColumns&&e.componentId===t.componentId))})),define("oj-sp/collection-container/utils/collection-container-utils",["require","exports","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","oj-sp/internal-resources/components/collection-toolbars/action-converter-utils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","./collection-container-constants"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContainerUtils=void 0;class r{static getStandardGroupActionGroup(e){const t=o.convertStandardOptionsToControlModel(e.groupOptions,n.MAXIMUM_GROUP_OPTIONS,i.ActionType.GROUP,i.ElementType.MENU_BUTTON,s.groupBy,e.selectedGroupValue);return t&&(t.positionFixed=!0),t}}r.getResultsCountLabel=e=>{var t,i;const{totalItemsCount:o,selectedItemsCount:n,smartFilters:r}=e;if(o>0&&n){if("ALL"===n||n===o)return a.applyParameters(s.allTotalSelected,{0:o});if(Number.isInteger(n)&&n>0)return a.applyParameters(s.numOfTotalSelected,{0:n,1:o})}if(n){if("ALL"===n)return s.allSelected;if(Number.isInteger(n)&&n>0)return a.applyParameters(s.numSelected,{0:n})}return o>0?1===o?(null===(t=null==r?void 0:r.value)||void 0===t?void 0:t.length)>0?s.oneResult:s.oneItem:(null===(i=null==r?void 0:r.value)||void 0===i?void 0:i.length)>0?a.applyParameters(s.numResults,{NUM:o}):a.applyParameters(s.numItems,{NUM:o}):""},r.getStandardSortAction=e=>{if(e.selectedSortConditions&&(e.activeColumns||e.hiddenColumns)){const t=o.convertDisplayOptionToControlModel(n.STANDARD_MULTI_COL_SORT_ACTION,e.selectedSortConditions?"on":"off",i.ActionType.MULTI_COL_SORT,i.ElementType.BUTTON,s);return t.positionFixed=!0,t}{const t=o.convertStandardOptionsToControlModel(e.layoutSortOptions,n.MAXIMUM_SORT_OPTIONS,i.ActionType.SORT,i.ElementType.MENU_BUTTON,s.sortBy,e.selectedSortValue);return t&&(t.positionFixed=!0,t.responsiveControlModel=Object.assign(Object.assign({},t),{elementType:i.ElementType.MENU_BUTTON_START_ICON,icon:o.getButtonIconType(n.SORT_ICON,i.ElementType.MENU_BUTTON_START_ICON)})),t}},t.CollectionContainerUtils=r})),define("oj-sp/collection-container/utils/collection-container-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortConditionDirection=void 0,function(e){e.Ascending="ascending",e.Descending="descending"}(t.SortConditionDirection||(t.SortConditionDirection={}))})),define("oj-sp/collection-container/components/multi-column-sort/multi-column-sort-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidStates=void 0,function(e){e.valid="valid",e.pending="pending",e.invalidHidden="invalidHidden",e.invalidShown="invalidShown"}(t.ValidStates||(t.ValidStates={}))})),define("oj-sp/collection-container/components/multi-column-sort/multi-column-sort-constants",["require","exports","./multi-column-sort-types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DIRECTION_VALID_STATE=t.COLUMN_VALID_STATE=t.MULTI_COLUMN_SORT_REMOVE_BTN_ID_SUFFIX=t.MULTI_COLUMN_SORT_DIRECTION_KEY_SUFFIX=t.MULTI_COLUMN_SORT_DIRECTION_ID_SUFFIX=t.MULTI_COLUMN_SORT_COLUMN_KEY_SUFFIX=t.MULTI_COLUMN_SORT_COLUMN_ID_SUFFIX=t.MULTI_COLUMN_SORT_DIV_ID_SUFFIX=t.ZERO=t.SORT_CONDITION_VALID_STATE=t.SORT_CONDITION_ID_SUFFIX=t.MULTI_COLUMN_SORT_ID_PREFIX=void 0,t.MULTI_COLUMN_SORT_ID_PREFIX="sort_condition_",t.SORT_CONDITION_ID_SUFFIX="sci",t.SORT_CONDITION_VALID_STATE=i.ValidStates.valid,t.ZERO=0,t.MULTI_COLUMN_SORT_DIV_ID_SUFFIX="mcsc_div_id",t.MULTI_COLUMN_SORT_COLUMN_ID_SUFFIX="mcsc_col_id",t.MULTI_COLUMN_SORT_COLUMN_KEY_SUFFIX="mcsc_col_key",t.MULTI_COLUMN_SORT_DIRECTION_ID_SUFFIX="mcsc_dir_id",t.MULTI_COLUMN_SORT_DIRECTION_KEY_SUFFIX="mcsc_dir_key",t.MULTI_COLUMN_SORT_REMOVE_BTN_ID_SUFFIX="mcsc_rm_key",t.COLUMN_VALID_STATE="columnValidState",t.DIRECTION_VALID_STATE="directionValidState"})),define("oj-sp/collection-container/components/multi-column-sort/multi-column-sort-condition",["require","exports","preact","preact/hooks","ojs/ojarraydataprovider","ojs/ojmutablearraydataprovider","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../../utils/collection-container-types","./multi-column-sort-constants","ojs/ojlabelvalue","ojs/ojlabel"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const d=[{value:r.SortConditionDirection.Ascending,label:n.sortAscending},{value:r.SortConditionDirection.Descending,label:n.sortDescending}];t.default=e=>{const t=(0,o.useRef)(new a(e.availableColumns,{keyAttributes:"id"})),c=(0,o.useRef)(new s(d,{keyAttributes:"value"}));(0,o.useEffect)(()=>{t.current.data=e.availableColumns},[e.availableColumns]);const p=e.sortConditionRow.sortCondition,u=p.attribute,h=p.direction;return(0,i.h)("oj-label-value",{"label-edge":"top"},(0,i.h)("oj-label",{slot:"label",for:e.sortConditionRow.id+l.MULTI_COLUMN_SORT_DIV_ID_SUFFIX},e.label),(0,i.h)("div",{slot:"value",id:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_DIV_ID_SUFFIX}`,"data-selected-attribute":u,class:"oj-flex oj-sp-collection-container-multi-column-sort-row"},(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-1 oj-sm-padding-4x-end"},(0,i.h)("oj-select-single",{labelHint:n.columnName,"item-text":"headerText",data:t.current,class:"oj-sp-collection-container-multi-column-sort-column-select-single",required:!0,id:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_COLUMN_ID_SUFFIX}`,key:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_COLUMN_KEY_SUFFIX}`,value:u,onvalueChanged:t=>{if("internal"===t.detail.updatedFrom){const i={id:e.sortConditionRow.id,sortCondition:{attribute:t.detail.value,direction:e.sortConditionRow.sortCondition.direction}};e.onSortConditionValueChange(i)}},onvalidChanged:t=>{e.onSortConditionValidChange(e.sortConditionRow.id,l.COLUMN_VALID_STATE,t.detail.value)}})),(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-1 oj-sm-padding-2x-end"},(0,i.h)("oj-select-single",{labelHint:n.sortOrder,key:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_DIRECTION_ID_SUFFIX}`,id:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_DIRECTION_KEY_SUFFIX}`,data:c.current,class:"oj-sp-collection-container-multi-column-sort-order-select-single",required:!0,value:h,onvalueChanged:t=>{const i={id:e.sortConditionRow.id,sortCondition:{attribute:e.sortConditionRow.sortCondition.attribute,direction:t.detail.value==r.SortConditionDirection.Ascending?r.SortConditionDirection.Ascending:r.SortConditionDirection.Descending}};e.onSortConditionValueChange(i)},onvalidChanged:t=>{e.onSortConditionValidChange(e.sortConditionRow.id,l.DIRECTION_VALID_STATE,t.detail.value)}})),(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0"},(0,i.h)("oj-button",{"aria-label":n.removeSort,class:"oj-button-lg oj-sp-collection-container-multi-column-sort-rm-button",id:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_REMOVE_BTN_ID_SUFFIX}`,disabled:e.disableRemove,key:`${e.componentId}_${e.sortConditionRow.id}_${l.MULTI_COLUMN_SORT_REMOVE_BTN_ID_SUFFIX}`,onojAction:t=>{e.onSortConditionRemove(e.sortConditionRow.id)},chroming:"borderless",display:"icons"},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-close-circle-s"})))))}})),define("oj-sp/collection-container/components/multi-column-sort/multi-column-sort",["require","exports","preact","preact/hooks","preact/compat","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../../utils/collection-container-types","./multi-column-sort-types","./multi-column-sort-condition","../../utils/collection-container-constants","./multi-column-sort-constants","ojs/ojbutton","ojs/ojformlayout","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const p=e=>{const t=[];let i=0;null==e||e.forEach(e=>{t.push({id:c.MULTI_COLUMN_SORT_ID_PREFIX+i++,sortCondition:{attribute:e.attribute,direction:e.direction}})});const o=d.DEFAULT_MULTI_SORT_CONDITIONS_COUNT-t.length;for(let e=0;e<o;e++)t.push({id:c.MULTI_COLUMN_SORT_ID_PREFIX+i++,sortCondition:{attribute:"",direction:n.SortConditionDirection.Ascending}});return t},u=(0,s.forwardRef)((e,t)=>{const s=(0,o.useRef)(e.selectedSortConditions),[u,h]=(0,o.useState)(!1),[m,g]=(0,o.useState)(()=>p(e.selectedSortConditions)),y=(0,o.useMemo)(()=>{const e=[];return m.forEach(t=>{e.push({id:t.id,columnValidState:c.SORT_CONDITION_VALID_STATE,directionValidState:c.SORT_CONDITION_VALID_STATE})}),e},[m]),f=(0,o.useRef)(`${e.componentId}_${m[0].id}_${c.MULTI_COLUMN_SORT_COLUMN_ID_SUFFIX}`),b=(0,o.useRef)(null),v=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(e.selectedSortConditions.length===m.length){const t=m.map(e=>e.sortCondition);for(let i=0;i<t.length;i++)if(t[i].attribute!==e.selectedSortConditions[i].attribute||t[i].direction!==e.selectedSortConditions[i].direction){g(p(e.selectedSortConditions));break}}else g(p(e.selectedSortConditions))},[e.selectedSortConditions]),(0,o.useEffect)(()=>{if(f.current.startsWith("NO_NEXT_CONDITION_ROW"))if(b.current.disabled)if(m[m.length-1].sortCondition.attribute)v.current.focus();else{document.getElementById(`${e.componentId}_${m[m.length-1].id}_${c.MULTI_COLUMN_SORT_COLUMN_ID_SUFFIX}`).focus()}else b.current.focus();else{document.getElementById(f.current).focus()}},[f.current]);const j=t=>{const i=[];for(const o of e.sortColumns)if(t===o.id)i.push(o);else{m.find(e=>e.sortCondition.attribute===o.id)||i.push(o)}return i},A=(0,o.useCallback)(e=>{const t=[];m.forEach(i=>{e.id===i.id?t.push(e):t.push(i)}),g(t)},[m]),C=()=>{let e=!0;return y.forEach(t=>{e=e&&(t.columnValidState===r.ValidStates.valid||t.columnValidState===r.ValidStates.invalidHidden)&&t.directionValidState===r.ValidStates.valid}),e},E=(0,o.useCallback)((e,t,i)=>{y.find(t=>t.id===e)[t]=i,h(!C())},[u,m]),T=(0,o.useCallback)(t=>{const i=[];m.forEach(e=>{e.id!==t&&i.push(e)}),C()&&g(i);const o=(e=>{const t=m.findIndex(t=>t.id==e);return m.length>t+1?m[t+1].id:"-1"})(t);2===i.length||"-1"===o?f.current="NO_NEXT_CONDITION_ROW#"+i.length:f.current=`${e.componentId}_${o}_${c.MULTI_COLUMN_SORT_REMOVE_BTN_ID_SUFFIX}`},[m,u]),_=t=>{const i=[...m],o=(()=>{if(m.length>0){const e=m[m.length-1].id;return parseInt(e.substring(e.lastIndexOf("_")+1))+1}return 0})();i.push({id:c.MULTI_COLUMN_SORT_ID_PREFIX+o,sortCondition:{attribute:"",direction:n.SortConditionDirection.Ascending}}),g(i),f.current=`${e.componentId}_${c.MULTI_COLUMN_SORT_ID_PREFIX}${o}_${c.MULTI_COLUMN_SORT_COLUMN_ID_SUFFIX}`},S=e=>{g(p(s.current))},x=(0,o.useMemo)(()=>{let t=!1;const o=m.findIndex(e=>""===e.sortCondition.attribute);return(o>-1||-1===o&&e.sortColumns.length===m.length||u)&&(t=!0),(0,i.h)("oj-button",{disabled:t,"aria-label":a.addSort,id:e.componentId+"_multi_column_sort_add_btn",class:"oj-sp-collection-container-multi-column-sort-add-btn",onojAction:_,ref:b},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-plus"}),a.addSort)},[m,u]),O=(0,o.useMemo)(()=>(0,i.h)("oj-button",{id:e.componentId+"_multi_column_sort_restore_btn","aria-label":a.restoreDefaults,class:"oj-sp-collection-container-multi-column-restore-btn",onojAction:S,ref:v},a.restoreDefaults),[]),w=(0,o.useMemo)(()=>(0,i.h)("oj-toolbar",{id:e.componentId+"_multi_column_sort_footer_toolbar","aria-label":a.addSort,"aria-controls":"controlled",chroming:"outlined"},x,O),[m,u]);return(0,i.h)("div",{id:e.componentId+"_multi_sort_dialog_container"},(0,i.h)("oj-dialog",{"aria-label":a.sortDrawer,ref:t,id:e.componentId+"_multi_sort_dialog",class:"oj-sp-collection-container-multi-column-sort-dialog",dialogTitle:a.sortDrawer,cancelBehavior:"icon",onojClose:t=>{var i;const o=[];"Escape"!==(null===(i=t.detail.originalEvent)||void 0===i?void 0:i.code)&&(m.forEach(e=>{e.sortCondition.attribute&&o.push(e.sortCondition)}),e.onSelectedSortConditionsChanged(o))}},(0,i.h)("div",{slot:"body"},(0,i.h)("oj-form-layout",{class:"oj-formlayout-full-width",id:e.componentId+"_multi_column_sort_form_layout",maxColumns:1,columns:1,direction:"row"},(0,i.h)("div",null,m.map((t,o)=>(0,i.h)(l.default,{key:`${e.componentId}_${t.id}_${c.SORT_CONDITION_ID_SUFFIX}`,componentId:e.componentId,label:o===c.ZERO?a.sortFirst:a.sortNext,disableRemove:m.length<=d.DEFAULT_MULTI_SORT_CONDITIONS_COUNT,availableColumns:j(t.sortCondition.attribute),sortConditionRow:t,onSortConditionValueChange:A,onSortConditionValidChange:E,onSortConditionRemove:T}))))),(0,i.h)("div",{slot:"footer",class:"oj-dialog-footer-separator"},w)))});t.default=(0,s.memo)(u,(e,t)=>e.sortColumns===t.sortColumns&&(e.selectedSortConditions===t.selectedSortConditions&&e.componentId===t.componentId))})),define("oj-sp/collection-container/components/group-summary",["require","exports","preact","preact/hooks","oj-sp/internal-resources/components/collection-toolbars/responsive-toolbar-calculator","../utils/collection-container-constants"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupSummary=void 0;t.GroupSummary=e=>{const t=(0,o.useRef)(null),n=(0,o.useRef)(0),r=(0,o.useRef)({label:0,value:0});let l;const d=new s.ResponsiveToolbarCalculator,[c,p]=(0,o.useState)({labelMinWidth:"",valueMinWidth:""});(0,o.useEffect)(()=>(u(),h),[]),(0,o.useEffect)(()=>{(()=>{const t=d.calculateTextWidth(e.label,{classNames:a.GROUP_SUMMARY_LABEL_CLASS}),i=d.calculateTextWidth(e.value,{classNames:a.GROUP_SUMMARY_VALUE_CLASS});r.current={label:t,value:i}})(),n.current>0&&m()},[e.label,e.value]);const u=()=>{const e=t.current;e&&(l=new ResizeObserver(()=>{const t=e.getBoundingClientRect().width;t!==n.current&&(n.current=t,n.current>0&&m())}),l.observe(e))},h=()=>{l&&l.disconnect()},m=()=>{const e=r.current.label+a.GROUP_SUMMARY_MARGIN_WIDTH+r.current.value,t=n.current;if(t<=e){let e=0,i=0;if(r.current.label>=a.GROUP_SUMMARY_LABEL_MIN_WIDTH){const o=t-(a.GROUP_SUMMARY_MARGIN_WIDTH+r.current.value);o>=a.GROUP_SUMMARY_LABEL_MIN_WIDTH?(e=o,i=r.current.value):(e=a.GROUP_SUMMARY_LABEL_MIN_WIDTH,i=t-(a.GROUP_SUMMARY_LABEL_MIN_WIDTH+a.GROUP_SUMMARY_MARGIN_WIDTH))}else e=r.current.label,i=t-(r.current.label+a.GROUP_SUMMARY_MARGIN_WIDTH);p({labelMinWidth:e+"px",valueMinWidth:i+"px"})}else p({labelMinWidth:"unset",valueMinWidth:"unset"})};return(0,i.h)("div",{ref:t,class:"oj-sp-collection-container-group-summary oj-flex oj-sm-12 oj-sm-margin-3x-bottom oj-sm-flex-wrap-nowrap"},null!=e.label&&(0,i.h)("div",{class:`oj-sp-collection-container-group-summary-label oj-flex-item oj-sm-flex-initial ${a.GROUP_SUMMARY_LABEL_CLASS} oj-line-clamp-1`,style:{minWidth:c.labelMinWidth},"aria-label":e.label,title:e.label},e.label),null!=e.value&&(0,i.h)("div",{class:`oj-sp-collection-container-group-summary-value oj-flex-item oj-sm-margin-2x-start ${a.GROUP_SUMMARY_VALUE_CLASS} oj-line-clamp-1`,style:{minWidth:c.valueMinWidth},"aria-label":e.value,title:e.value},e.value))}})),define("css!oj-sp/collection-container/collection-container-styles",[],(function(){})),define("oj-sp/common/position-helper",["require","exports","ojs/ojlogger","./EventDispatcher"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends HTMLElement{connectedCallback(){i.log("position helper connected"),this.dispatchEvent(new CustomEvent(o.EventDispatcher.CONNECTED_EVENT_NAME))}disconnectedCallback(){i.log("position helper disconnected"),this.dispatchEvent(new CustomEvent(o.EventDispatcher.DISCONNECTED_EVENT_NAME))}}customElements.define("oj-sp-position-helper",s)}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/collection-container/collection-container",["require","exports","ojs/ojlogger","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","oj-sp/internal-resources/components/collection-toolbars/action-converter-utils","./utils/collection-container-constants","oj-sp/internal-resources/components/collection-toolbars/loader","./components/smart-filters-container","./components/columns-dialog","ojs/ojresponsiveutils","oj-sp/common/positionUtility","ojs/ojcontext","./utils/collection-container-utils","./components/multi-column-sort/multi-column-sort","./components/group-summary","css!./collection-container-styles","oj-sp/common/position-helper"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContainer=void 0;let b=class extends s.Component{constructor(e,t){var i;super(e,t),this.toolbarsPanelHeight=0,this.rootRef=(0,s.createRef)(),this.toolbarsPanelRef=(0,s.createRef)(),this.manageColumnsDialogRef=(0,s.createRef)(),this.rootBusyContextRef=(0,s.createRef)(),this.multiColumnSortDialogRef=(0,s.createRef)(),this.panelsContainerRef=(0,s.createRef)(),this.mdDownMediaQueryChangeListener=e=>{this.unregisterToolbarFromPositionUtil(),this.registerToolbarWithPositionUtil(this.props)},this.smartFiltersValueChangeHandler=e=>{this.props.onSmartFiltersChanged(Object.assign(Object.assign({},this.props.smartFilters),{value:e}))},this.renderColumnsDialog=e=>(0,s.h)(p.default,{ref:this.manageColumnsDialogRef,componentId:this.uniqueId,activeColumns:e.activeColumns,hiddenColumns:e.hiddenColumns,onActiveColumnsChanged:e=>{var t,i;return null===(i=(t=this.props).onActiveColumnsChanged)||void 0===i?void 0:i.call(t,e)},onHiddenColumnsChanged:e=>{var t,i;return null===(i=(t=this.props).onHiddenColumnsChanged)||void 0===i?void 0:i.call(t,e)}}),this.renderMultiColumnsSortDialog=e=>(0,s.h)(y.default,{ref:this.multiColumnSortDialogRef,componentId:this.uniqueId,sortColumns:this.allColumns,selectedSortConditions:e.selectedSortConditions,onSelectedSortConditionsChanged:this.multiColumnSortActionHandler}),this.openManageColumnsDialog=()=>{this.manageColumnsDialogRef.current.open()},this.openMultiColumnSortDialog=()=>{this.multiColumnSortDialogRef.current.open()},this.setToolbarHeight=e=>{var t,i,o,s;const a=this.panelsContainerRef.current;a&&e&&(this.toolbarsPanelHeight=e.getBoundingClientRect().height,a.style.setProperty("--oj-sp-collection-container-toolbar-height",this.toolbarsPanelHeight+"px"),"sticky"===getComputedStyle(e).position?null===(i=(t=this.props).onCollectionScrollerTopChanged)||void 0===i||i.call(t,parseFloat(getComputedStyle(e).top)+this.toolbarsPanelHeight):null===(s=(o=this.props).onCollectionScrollerTopChanged)||void 0===s||s.call(o,0))},this.handleConnected=e=>{this.registerToolbarWithPositionUtil(this.props)},this.handleDisconnected=e=>{this.unregisterToolbarFromPositionUtil()},this.initializeAllActions=e=>{this.initializeLayoutActions(e),this.initializeFunctionalActions(e),this.computeFunctionalControlModels(),this.computeFunctionalToolbarModel(),this.computeLayoutControlModels(),this.computeLayoutToolbarModel()},this.initializeFunctionalActions=e=>{this.customPrimaryActions=r.convertCustomIconActionsToControlModel(e.functionalPrimaryActions,n.ActionType.PRIMARY,e=>e.icon?n.ElementType.BUTTON_ICON_TEXT:n.ElementType.BUTTON,l.MAXIMUM_PRIMARY_ACTIONS),this.customPrimaryActionGroup=r.convertCustomActionGroupToControlModel(e.functionalPrimaryActionGroup,n.ActionType.PRIMARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_PRIMARY_GROUP_ACTIONS),this.customSecondaryActions=r.convertCustomActionsToControlModel(e.functionalSecondaryActions,n.ActionType.SECONDARY,n.ElementType.BUTTON,l.MAXIMUM_SECONDARY_ACTIONS),this.customSecondaryActionGroup=r.convertCustomActionGroupToControlModel(e.functionalSecondaryActionGroup,n.ActionType.SECONDARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_SECONDARY_GROUP_ACTIONS),this.initializeStandardAddAction(e),this.standardDeleteAction=r.convertDisplayOptionToControlModel(l.STANDARD_DELETE_ACTION,e.displayOptions.delete,n.ActionType.STANDARD,n.ElementType.BUTTON,this.componentStrings)},this.initializeLayoutActions=e=>{this.standardGroupActionGroup=g.CollectionContainerUtils.getStandardGroupActionGroup(e),this.standardSortAction=g.CollectionContainerUtils.getStandardSortAction(e),this.standardContextActionGroup=r.convertStandardOptionsToControlModel(e.layoutContextOptions,l.MAXIMUM_CONTEXT_OPTIONS,n.ActionType.CONTEXT,n.ElementType.BUTTON_SET,this.componentStrings.contextMenu,e.selectedContextValue),this.standardExportAction=r.convertDisplayOptionToControlModel(l.STANDARD_EXPORT_ACTION,e.displayOptions.export,n.ActionType.EXPORT,n.ElementType.BUTTON_ICON,this.componentStrings),this.standardColumnsAction=r.convertDisplayOptionToControlModel(l.STANDARD_COLUMNS_ACTION,e.displayOptions.columns,n.ActionType.COLUMNS,n.ElementType.BUTTON_ICON,this.componentStrings)},this.initializeAllColumns=e=>{this.allColumns=[],e.activeColumns&&(this.allColumns=this.allColumns.concat(e.activeColumns)),e.hiddenColumns&&(this.allColumns=this.allColumns.concat(e.hiddenColumns))},this.initializeStandardAddAction=e=>{const t=this.hasNonFunctionalStandardActions()?n.ElementType.BUTTON_ICON:n.ElementType.BUTTON_ICON_TEXT;this.standardAddAction=r.convertDisplayOptionToControlModel(l.STANDARD_ADD_ACTION,e.displayOptions.add,n.ActionType.STANDARD,t,this.componentStrings)},this.computeFunctionalControlModels=()=>{this.functionalControlModels=[],this.standardAddAction&&this.functionalControlModels.push(this.standardAddAction),this.customPrimaryActions.length>0&&this.functionalControlModels.push(...this.customPrimaryActions),this.customPrimaryActionGroup&&this.functionalControlModels.push(this.customPrimaryActionGroup);let e=[];this.customSecondaryActions.length>0&&e.push(...this.customSecondaryActions),this.customSecondaryActionGroup&&e.push(this.customSecondaryActionGroup),this.standardDeleteAction&&e.push(this.standardDeleteAction),1===e.length&&(this.functionalControlModels.push(e[0]),e=[]),this.functionalControlModels.length+e.length>0?(this.moreFunctionalControlModel=r.getMoreActionsControlModel(e,this.componentStrings.moreActions,n.ActionType.MORE_ACTIONS,n.ElementType.MENU_BUTTON),this.moreFunctionalControlModel.overflowMenuOptions={displayActionsDivider:!0}):this.moreFunctionalControlModel=null},this.computeLayoutControlModels=()=>{this.layoutControlModels=[],this.standardGroupActionGroup&&this.layoutControlModels.push(this.standardGroupActionGroup),this.standardSortAction&&this.layoutControlModels.push(this.standardSortAction),this.standardContextActionGroup&&this.layoutControlModels.push(this.standardContextActionGroup),this.standardExportAction&&this.layoutControlModels.push(this.standardExportAction),this.standardColumnsAction&&this.layoutControlModels.push(this.standardColumnsAction),this.layoutControlModels.length?(this.moreLayoutControlModel=r.getMoreActionsControlModel([],this.componentStrings.layoutActions,n.ActionType.LAYOUT_ACTIONS,n.ElementType.MENU_BUTTON_END_ICON),this.moreLayoutControlModel.icon=r.getButtonIconType(l.OVERFLOW_BUTTON_ICON,n.ElementType.MENU_BUTTON_END_ICON),this.moreLayoutControlModel.overflowMenuOptions={displayActionsDivider:!0}):this.moreLayoutControlModel=null},this.initializeStateWithControlModels=()=>{this.state={selectionModel:this.computeSelectionModel(),functionalToolbarModel:this.functionalToolbarModel,layoutToolbarModel:this.layoutToolbarModel,groupSummaryModel:this.groupSummaryModel}},this.initializeActionHandlers=()=>{this.actionHandlers=new Map,this.actionHandlers.set(n.ActionType.STANDARD,this.standardActionHandler),this.actionHandlers.set(n.ActionType.PRIMARY,this.primaryActionHandler),this.actionHandlers.set(n.ActionType.SECONDARY,this.secondaryActionHandler),this.actionHandlers.set(n.ActionType.SELECTOR,this.selectorActionHandler),this.actionHandlers.set(n.ActionType.GROUP,this.groupActionHandler),this.actionHandlers.set(n.ActionType.CONTEXT,this.contextActionHandler),this.actionHandlers.set(n.ActionType.SORT,this.sortActionHandler),this.actionHandlers.set(n.ActionType.EXPORT,this.exportActionHandler),this.actionHandlers.set(n.ActionType.COLUMNS,this.openManageColumnsDialog),this.actionHandlers.set(n.ActionType.MULTI_COL_SORT,this.openMultiColumnSortDialog)},this.updateStateWithSelectionModel=()=>{this.setState({selectionModel:this.computeSelectionModel()})},this.updateStateWithFunctionalToolbarModel=()=>{this.setState({functionalToolbarModel:this.functionalToolbarModel})},this.updateStateWithLayoutToolbarModel=()=>{this.setState({layoutToolbarModel:this.layoutToolbarModel})},this.updateStateWithGroupSummaryModel=()=>{this.setState({groupSummaryModel:this.groupSummaryModel})},this.computeSelectionModel=()=>({resultsCountLabel:g.CollectionContainerUtils.getResultsCountLabel(this.props),selectorState:this.props.selector,selectorDisplay:this.props.displayOptions.selector,defaultResultsCountLabel:a.noneSelected}),this.computeFunctionalToolbarModel=()=>{const e=[];this.functionalControlModels.length&&e.push(...this.functionalControlModels),this.moreFunctionalControlModel&&e.push(this.moreFunctionalControlModel),this.functionalToolbarModel=Object.assign(Object.assign({},l.FUNCTIONAL_TOOLBAR_MODEL),{controlModels:e})},this.computeLayoutToolbarModel=()=>{const e=[];this.layoutControlModels.length&&e.push(...this.layoutControlModels),this.moreLayoutControlModel&&e.push(this.moreLayoutControlModel),this.layoutToolbarModel=Object.assign(Object.assign({},l.LAYOUT_TOOLBAR_MODEL),{controlModels:e})},this.initializeGroupSummaryModel=e=>{e.groupSummaryLabel||e.groupSummaryValue?this.groupSummaryModel={label:e.groupSummaryLabel,value:e.groupSummaryValue}:this.groupSummaryModel=null},this.selectorPropertyChangeHandler=(e,t)=>{var i,o;e.selector===t.selector&&e.selectedItemsCount===t.selectedItemsCount&&e.totalItemsCount===t.totalItemsCount&&e.displayOptions.selector===t.displayOptions.selector&&(null===(i=e.smartFilters)||void 0===i?void 0:i.value)===(null===(o=t.smartFilters)||void 0===o?void 0:o.value)||this.updateStateWithSelectionModel()},this.functionalPropertyChangeHandler=(e,t)=>{var i,o,s,d;let c=!1;if(e.functionalPrimaryActions!==t.functionalPrimaryActions){const e=e=>e.icon?n.ElementType.BUTTON_ICON_TEXT:n.ElementType.BUTTON;this.customPrimaryActions=r.convertCustomIconActionsToControlModel(t.functionalPrimaryActions,n.ActionType.PRIMARY,e,l.MAXIMUM_PRIMARY_ACTIONS),c=!0}e.functionalPrimaryActionGroup!==t.functionalPrimaryActionGroup&&(this.customPrimaryActionGroup=r.convertCustomActionGroupToControlModel(t.functionalPrimaryActionGroup,n.ActionType.PRIMARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_PRIMARY_GROUP_ACTIONS),c=!0),e.functionalSecondaryActions!==t.functionalSecondaryActions&&(this.customSecondaryActions=r.convertCustomActionsToControlModel(t.functionalSecondaryActions,n.ActionType.SECONDARY,n.ElementType.BUTTON,l.MAXIMUM_SECONDARY_ACTIONS),c=!0),e.functionalSecondaryActionGroup!==t.functionalSecondaryActionGroup&&(this.customSecondaryActionGroup=r.convertCustomActionGroupToControlModel(t.functionalSecondaryActionGroup,n.ActionType.SECONDARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_SECONDARY_GROUP_ACTIONS),c=!0),(e.displayOptions.add!==t.displayOptions.add||(null===(i=e.translations)||void 0===i?void 0:i.add)!==(null===(o=t.translations)||void 0===o?void 0:o.add)||c)&&(this.componentStrings=Object.assign(Object.assign({},a),t.translations),this.initializeStandardAddAction(t),c=!0),e.displayOptions.delete===t.displayOptions.delete&&(null===(s=e.translations)||void 0===s?void 0:s.delete)===(null===(d=t.translations)||void 0===d?void 0:d.delete)||(this.componentStrings=Object.assign(Object.assign({},a),t.translations),this.standardDeleteAction=r.convertDisplayOptionToControlModel(l.STANDARD_DELETE_ACTION,t.displayOptions.delete,n.ActionType.STANDARD,n.ElementType.BUTTON,this.componentStrings),c=!0),c&&(this.computeFunctionalControlModels(),this.computeFunctionalToolbarModel(),this.updateStateWithFunctionalToolbarModel())},this.layoutPropertyChangeHandler=(e,t)=>{let i=!1;e.selectedGroupValue===t.selectedGroupValue&&e.groupOptions===t.groupOptions||(this.standardGroupActionGroup=g.CollectionContainerUtils.getStandardGroupActionGroup(t),i=!0),e.selectedContextValue===t.selectedContextValue&&e.layoutContextOptions===t.layoutContextOptions||(this.standardContextActionGroup=r.convertStandardOptionsToControlModel(t.layoutContextOptions,l.MAXIMUM_CONTEXT_OPTIONS,n.ActionType.CONTEXT,n.ElementType.BUTTON_SET,this.componentStrings.contextMenu,t.selectedContextValue),i=!0),e.selectedSortValue===t.selectedSortValue&&e.layoutSortOptions===t.layoutSortOptions&&e.selectedSortConditions===t.selectedSortConditions||(this.standardSortAction=g.CollectionContainerUtils.getStandardSortAction(t),i=!0),e.displayOptions.export!==t.displayOptions.export&&(this.standardExportAction=r.convertDisplayOptionToControlModel(l.STANDARD_EXPORT_ACTION,t.displayOptions.export,n.ActionType.EXPORT,n.ElementType.BUTTON_ICON,this.componentStrings),i=!0),e.displayOptions.columns!==t.displayOptions.columns&&(this.standardColumnsAction=r.convertDisplayOptionToControlModel(l.STANDARD_COLUMNS_ACTION,t.displayOptions.columns,n.ActionType.COLUMNS,n.ElementType.BUTTON_ICON,this.componentStrings),i=!0),i&&(this.computeLayoutControlModels(),this.computeLayoutToolbarModel(),this.updateStateWithLayoutToolbarModel(),!this.standardAddAction||0!==this.layoutControlModels.length&&0!==this.state.layoutToolbarModel.controlModels.length||(this.initializeStandardAddAction(t),this.computeFunctionalControlModels(),this.computeFunctionalToolbarModel(),this.updateStateWithFunctionalToolbarModel()))},this.groupSummaryPropertyChangeHandler=(e,t)=>{e.groupSummaryValue===t.groupSummaryValue&&e.groupSummaryLabel===t.groupSummaryLabel||(this.initializeGroupSummaryModel(t),this.updateStateWithGroupSummaryModel())},this.toolbarControlActionHandler=e=>{const{actionId:t,actionType:i}=e;this.actionHandlers.get(i)(t)},this.toolbarControlActionHandlerProp=this.toolbarControlActionHandler.bind(this),this.standardActionHandler=e=>{e===l.STANDARD_ADD_ID?this.props.onSpAdd():this.props.onSpDelete()},this.primaryActionHandler=e=>{this.props.onSpPrimaryAction({actionId:e})},this.secondaryActionHandler=e=>{this.props.onSpSecondaryAction({actionId:e})},this.selectorActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectorChanged)||void 0===i||i.call(t,e)},this.groupActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectedGroupValueChanged)||void 0===i||i.call(t,e)},this.contextActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectedContextValueChanged)||void 0===i||i.call(t,e)},this.sortActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectedSortValueChanged)||void 0===i||i.call(t,e)},this.exportActionHandler=e=>{this.props.onSpExport()},this.multiColumnSortActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectedSortConditionsChanged)||void 0===i||i.call(t,e)},this.isSmartFiltersConfigured=()=>!this.props.search&&!this.isGroupMenuConfigured()&&null!=this.props.smartFilters&&Object.keys(this.props.smartFilters).length>0,this.isSmartSearchConfigured=()=>this.props.search&&!this.isGroupMenuConfigured(),this.isManageColumnsConfigured=()=>"on"===this.props.displayOptions.columns,this.isGroupMenuConfigured=()=>null!=this.standardGroupActionGroup,this.isGroupSummaryConfigured=()=>this.isGroupMenuConfigured()&&null!=this.groupSummaryModel,this.hasNonFunctionalStandardActions=()=>this.customPrimaryActions.length>0||null!=this.customPrimaryActionGroup||this.customSecondaryActions.length>0||null!=this.customSecondaryActionGroup||null!=this.standardGroupActionGroup||null!=this.standardContextActionGroup||null!=this.standardSortAction||null!=this.standardExportAction||null!=this.standardColumnsAction,this.columnPropertyChangeHandler=(e,t)=>{e.activeColumns===t.activeColumns&&e.hiddenColumns===t.hiddenColumns||this.initializeAllColumns(t)},this.uniqueId=null!==(i=e.id)&&void 0!==i?i:(0,o.getUniqueId)(),this.uniqueComponentName=this.uniqueId+"_collection-container",this.componentStrings=Object.assign(Object.assign({},a),e.translations),this.standardAddAction=null,this.standardDeleteAction=null,this.customPrimaryActions=[],this.customPrimaryActionGroup=null,this.customSecondaryActions=[],this.customSecondaryActionGroup=null,this.standardGroupActionGroup=null,this.standardSortAction=null,this.standardContextActionGroup=null,this.standardExportAction=null,this.standardColumnsAction=null,this.functionalToolbarModel=null,this.layoutToolbarModel=null,this.groupSummaryModel=null,this.resizeObserver=null,this.allColumns=[],this.initializeActionHandlers(),this.initializeAllActions(this.props),this.initializeGroupSummaryModel(this.props),this.initializeStateWithControlModels(),this.initializeAllColumns(this.props);const d=u.getFrameworkQuery(u.FRAMEWORK_QUERY_KEY.MD_DOWN);this.mdDownMediaQuery=window.matchMedia(d)}render(e){let t="oj-flex oj-bg-neutral-10 oj-sm-padding-4x-top oj-sm-padding-4x-bottom oj-sp-collection-container-toolbars-wrapper ";return t+=""+("on"===e.displayOptions.selector?"oj-sp-checkbox-template-wrapper":"oj-sp-template-wrapper"),(0,s.h)(o.Root,{ref:this.rootRef,id:e.id},(0,s.h)("div",{class:"oj-sp-collection-container-panel",role:"group",ref:this.panelsContainerRef,"data-oj-context":!0},this.renderPositionHelper(),(0,s.h)("div",{ref:this.toolbarsPanelRef,id:this.uniqueId+"_toolbars-panel",class:"oj-sp-toolbars-panel"},(0,s.h)("div",{class:t},this.isGroupSummaryConfigured()&&(0,s.h)(f.GroupSummary,{label:this.state.groupSummaryModel.label,value:this.state.groupSummaryModel.value}),this.isSmartSearchConfigured()&&this.renderSearchSlot(e.search),this.isSmartFiltersConfigured()&&(0,s.h)(c.SmartFiltersContainer,{componentId:this.uniqueId,askHint:e.smartFilters.askHint,autofocus:e.smartFilters.autofocus,resultsData:e.smartFilters.resultsData,translations:e.smartFilters.translations,value:e.smartFilters.value,onValueChanged:this.smartFiltersValueChangeHandler}),(0,s.h)(d.CollectionToolbars,{componentId:this.uniqueId,componentBaseCssClass:l.BASE_CSS_CLASS,selectionModel:this.state.selectionModel,functionalToolbarModel:this.state.functionalToolbarModel,layoutToolbarModel:this.state.layoutToolbarModel,onSpAction:this.toolbarControlActionHandlerProp}))),(0,s.h)("div",{class:"oj-sp-collection-container-main-panel"},e.children)),this.isManageColumnsConfigured()&&this.renderColumnsDialog(e),e.selectedSortConditions&&this.renderMultiColumnsSortDialog(e))}componentDidMount(){i.log(`Component ${this.constructor.name} with id ${this.uniqueId} is mounted`),this.rootBusyContextRef.current=m.getContext(this.rootRef.current).getBusyContext();const e=this.toolbarsPanelRef.current;this.resizeObserver=new ResizeObserver(()=>this.setToolbarHeight(e)),this.resizeObserver.observe(e),this.mdDownMediaQuery.addEventListener("change",this.mdDownMediaQueryChangeListener)}componentDidUpdate(e){i.log(`Component ${this.constructor.name} with id ${this.uniqueId} is updated`),this.props!==e&&(this.selectorPropertyChangeHandler(e,this.props),this.functionalPropertyChangeHandler(e,this.props),this.layoutPropertyChangeHandler(e,this.props),this.columnPropertyChangeHandler(e,this.props),this.groupSummaryPropertyChangeHandler(e,this.props))}componentWillUnmount(){i.log(`Component ${this.constructor.name} with id ${this.uniqueId} will unmount`),this.resizeObserver&&this.resizeObserver.disconnect(),this.mdDownMediaQuery.removeEventListener("change",this.mdDownMediaQueryChangeListener)}renderSearchSlot(e){return(0,s.h)("div",{class:"oj-sp-collection-container-search-panel oj-flex-item oj-sm-12 oj-sm-margin-3x-bottom"},e)}registerToolbarWithPositionUtil(e){const t=this.toolbarsPanelRef.current,i={componentName:this.uniqueComponentName,component:t,offsetCalculationSubscription:{offsetOptions:{position:"top",level:h.PositionUtility.LEVEL_MAP.toolbar},onOffsetChange:i=>{var o;const s=i.top;t.style.top=s+"px","sticky"===getComputedStyle(t).position&&(null===(o=e.onCollectionScrollerTopChanged)||void 0===o||o.call(e,s+this.toolbarsPanelHeight))}},stickinessSubscription:{onStickinessChange:i=>{var o,s;i.isSticky?(t.style.position="sticky",null===(o=e.onCollectionScrollerTopChanged)||void 0===o||o.call(e,parseFloat(getComputedStyle(t).top)+this.toolbarsPanelHeight)):(t.style.position="unset",null===(s=e.onCollectionScrollerTopChanged)||void 0===s||s.call(e,0))}}};t&&(h.PositionUtility.subscribe(i),this.stickyToolbarsPanel=t)}unregisterToolbarFromPositionUtil(){this.stickyToolbarsPanel&&h.PositionUtility.unsubscribe({componentName:this.uniqueComponentName})}renderPositionHelper(){return(0,s.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}};b.defaultProps={displayOptions:{add:"off",delete:"off",columns:"off",export:"off",selector:"off"},selector:"none"},b._metadata={properties:{displayOptions:{type:"object",properties:{add:{type:"string",enumValues:["disabled","on","off"]},delete:{type:"string",enumValues:["disabled","on","off"]},columns:{type:"string",enumValues:["disabled","on","off"]},selector:{type:"string",enumValues:["on","off"]},export:{type:"string",enumValues:["disabled","on","off"]}}},smartFilters:{type:"object",properties:{askHint:{type:"string"},autofocus:{type:"boolean"},resultsData:{type:"DataProvider"},translations:{type:"object",properties:{msgNoData:{type:"string"}}},value:{type:"Array<object>"},onValueChanged:{type:"function"}},writeback:!0},collectionScrollerTop:{type:"number",writeback:!0},functionalPrimaryActions:{type:"Array<object>"},functionalPrimaryActionGroup:{type:"object",properties:{label:{type:"string"},actions:{type:"Array<object>"}}},functionalSecondaryActions:{type:"Array<object>"},functionalSecondaryActionGroup:{type:"object",properties:{label:{type:"string"},actions:{type:"Array<object>"}}},selectedItemsCount:{type:"string|number"},totalItemsCount:{type:"number"},layoutContextOptions:{type:"Array<object>"},selectedContextValue:{type:"string",writeback:!0},layoutSortOptions:{type:"Array<object>"},selectedSortValue:{type:"string",writeback:!0},translations:{type:"object",properties:{add:{type:"string"},delete:{type:"string"}}},selector:{type:"string",writeback:!0},groupOptions:{type:"Array<object>"},selectedGroupValue:{type:"string",writeback:!0},groupSummaryLabel:{type:"string"},groupSummaryValue:{type:"string"},selectedSortConditions:{type:"Array<object>",writeback:!0},activeColumns:{type:"Array<object>",writeback:!0},hiddenColumns:{type:"Array<object>",writeback:!0}},events:{spTableScrollerOffsetChanged:{},spAdd:{},spDelete:{},spPrimaryAction:{},spSecondaryAction:{},spExport:{}},slots:{"":{},search:{}},extension:{_WRITEBACK_PROPS:["smartFilters","collectionScrollerTop","selectedContextValue","selectedSortValue","selector","selectedGroupValue","selectedSortConditions","activeColumns","hiddenColumns"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},b=__decorate([(0,o.customElement)("oj-sp-collection-container"),__metadata("design:paramtypes",[Object,Object])],b),t.CollectionContainer=b})),define("oj-sp/collection-container/loader",["require","exports","./collection-container"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContainer=void 0,Object.defineProperty(t,"CollectionContainer",{enumerable:!0,get:function(){return i.CollectionContainer}})})),define("oj-sp/attachments-2/components/atch-container",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../context/atch-context","../context/atch-selected-context","../views/atch-tabular-view","../views/atch-list-view","oj-sp/attachments-2-actions/component/attachments-2-types","oj-sp/common-util/common-util","oj-sp/collection-container/loader","oj-sp/attachments-2-actions/mutators/AttachmentBufferingDataMutator","../utils/atch-types","ojs/ojlogger","../utils/atch-utils","oj-sp/collection-container/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchContainer=void 0;t.AtchContainer=e=>{const{handleAction:t,data:y,category:f}=(0,o.useContext)(a.default),[b,v]=(0,o.useState)([{id:h.TABLE_COLUMN_ID_TITLE,headerText:s.attachmentTitle},{id:h.TABLE_COLUMN_ID_FILE_SIZE,headerText:s.fileSizeHeader},{id:h.TABLE_COLUMN_ID_LAST_UPDATE,headerText:s.updatedOn}]),[j,A]=(0,o.useState)([{id:h.TABLE_COLUMN_ID_DESCRIPTION,headerText:s.descriptionHeader},{id:h.TABLE_COLUMN_ID_CATEGORY,headerText:s.categoryLabel}]),[C,E]=(0,o.useState)({edit:"disabled",download:"disabled",delete:"disabled"}),T=(0,o.useMemo)(()=>({selectedActionOptions:C,selectedItems:e.selectedItems}),[C,e.selectedItems]);(0,o.useEffect)(()=>{(async()=>{let t=[];e.selectedItems&&e.selectedItems.values().size>0&&(t=await u.AttachmentBufferingDataMutator.findByIds(Array.from(e.selectedItems.values()),y));const i=S(t),o=x(t),s=O(t);E({download:i,delete:o,edit:s})})().catch(e=>{m.error("Error updating selected actions - "+e.message)})},[e.actionOptionsEdit,e.actionOptionsDelete,e.actionOptionsDownload,e.selectedItems]),(0,o.useEffect)(()=>{let t=[...b],i=[...j];const o=()=>{i=i.filter(e=>e.id!==h.TABLE_COLUMN_ID_CATEGORY)},a=()=>{t=t.filter(e=>e.id!==h.TABLE_COLUMN_ID_CATEGORY)};if("include"===e.fieldOptionsCategory){-1===t.findIndex(e=>e.id===h.TABLE_COLUMN_ID_CATEGORY)&&t.splice(1,0,{id:h.TABLE_COLUMN_ID_CATEGORY,headerText:s.categoryLabel}),o()}else if("exclude"===e.fieldOptionsCategory)o(),a();else{a();-1===i.findIndex(e=>e.id===h.TABLE_COLUMN_ID_CATEGORY)&&i.splice(1,0,{id:h.TABLE_COLUMN_ID_CATEGORY,headerText:s.categoryLabel})}v(t),A(i)},[e.fieldOptionsCategory]);const _=e=>{const i=e.actionId;if(i.includes("editCategory")){const e=i.split("_-_");t(e[0],e[1])}else t(i)},S=t=>{var i,o;let s="disabled";if("disabled"===e.actionOptionsDownload||"off"===e.actionOptionsDownload)s=e.actionOptionsDownload;else if(e.selectedItems&&e.selectedItems.values().size>0&&e.selectedItems.values().size<=1){let a=!1;const n=[];for(let e=0;e<t.length;e++){if("WEB_PAGE"===t[e].datatypeCode){a=!0;break}(null===(i=t[e].actionOptions)||void 0===i?void 0:i.download)&&n.push(null===(o=t[e].actionOptions)||void 0===o?void 0:o.download)}s=a?"off":w(e.actionOptionsDownload,n,e.selectedItems.values().size)}else s="disabled";return s},x=t=>{var i,o,s;let a="disabled";if("disabled"===e.actionOptionsDelete||"off"===e.actionOptionsDelete)a=e.actionOptionsDelete;else{const n=null===(i=e.selectedItems)||void 0===i?void 0:i.values().size,r=[];for(let e=0;e<(null==t?void 0:t.length);e++)(null===(o=t[e].actionOptions)||void 0===o?void 0:o.delete)&&r.push(null===(s=t[e].actionOptions)||void 0===s?void 0:s.delete);a=w(e.actionOptionsDelete,r,n)}return a},O=t=>{var i;let o="disabled";return"disabled"===e.actionOptionsEdit||"off"===e.actionOptionsEdit?o=e.actionOptionsEdit:e.selectedItems&&1==e.selectedItems.values().size&&(o=(0,g.calculateRowDisplayState)(e.actionOptionsEdit,null===(i=t[0].actionOptions)||void 0===i?void 0:i.edit)),o},w=(e,t,i)=>{let o="off"===e?"off":"disabled";if(i>0){o=null!=e?e:"on";let s=void 0;if((null==t?void 0:t.length)===i){s=t[0];for(let e=1;e<t.length;e++)if(s!==t[e]){s=void 0;break}}s?o=s:(null==t?void 0:t.length)>0&&"on"===o&&(o="disabled")}return o},I=(e,t)=>{let i="disabled";return i="off"===e||"disabled"===e?e:t&&"off"!==t?t:"disabled",i},D=(0,o.useMemo)(()=>{let t="disabled";if("disabled"===e.actionOptionsCategory||"off"===e.actionOptionsCategory?t=e.actionOptionsCategory:e.selectedItems&&e.selectedItems.values().size>0&&(t="on"),f&&Array.isArray(f)&&"off"!==t){if(f.length>1){const e=f.map(e=>({id:"editCategory_-_"+e.code,label:e.displayName,display:t}));return{label:s.assignCategory,actions:e}}return{}}return{}},[f,e.selectedItems,e.actionOptionsCategory]);return(0,i.h)(n.default.Provider,{value:T},(0,i.h)(p.CollectionContainer,{id:e.prefix+"_collectionContainer",displayOptions:{delete:I(e.actionOptionsDelete,C.delete),columns:e.viewPortSize===d.ScreenRanges.sm||e.viewPortSize===d.ScreenRanges.xsm?"off":"on",selector:"off"},functionalPrimaryActions:[{id:d.AttachmentActionIDs.SELECT_FILES,label:s.attachFile,display:(()=>{let t="off";return"all"!==e.displayOptionsType&&"file"!==e.displayOptionsType||(t=e.actionOptionsAdd),t})()},{id:d.AttachmentActionIDs.LAUNCH_ADD_LINK,label:s.addLink,display:(()=>{let t="off";return"all"!==e.displayOptionsType&&"link"!==e.displayOptionsType||(t=e.actionOptionsAdd),t})()},{id:d.AttachmentActionIDs.DOWNLOAD_SELECTED,label:s.download,display:I(e.actionOptionsDownload,C.download)}],functionalSecondaryActions:[{id:d.AttachmentActionIDs.EDIT_SELECTED,label:c.getDirectionality()===c.DIRECTIONALITY.RIGHT_TO_LEFT?"â¦"+s.edit:s.edit+"â¦",display:I(e.actionOptionsEdit,C.edit)}],functionalSecondaryActionGroup:D,translations:{delete:s.attachmentsRemove},onSpPrimaryAction:_,onSpSecondaryAction:_,onSpDelete:e=>{t(d.AttachmentActionIDs.REMOVE_SELECTED)},activeColumns:b,onActiveColumnsChanged:e=>{v(e)},hiddenColumns:j,onHiddenColumnsChanged:e=>{A(e)}},(0,i.h)("div",null,e.viewPortSize===d.ScreenRanges.sm||e.viewPortSize===d.ScreenRanges.xsm?(0,i.h)(l.AtchListView,{prefix:e.prefix,seletedItems:e.selectedItems,download:e.actionOptionsDownload,add:e.actionOptionsAdd,delete:e.actionOptionsDelete,edit:e.actionOptionsEdit,category:e.actionOptionsCategory,excludeFields:e.displayOptionExcludeFields}):(0,i.h)(r.AtchTableView,{prefix:e.prefix,seletedItems:e.selectedItems,download:e.actionOptionsDownload,add:e.actionOptionsAdd,delete:e.actionOptionsDelete,edit:e.actionOptionsEdit,category:e.actionOptionsCategory,tableColumns:b,excludeFields:e.displayOptionExcludeFields}))))}})),define("css!oj-sp/attachments-2/attachments-2-styles",[],(function(){})),define("oj-sp/attachments-2/components/atch-add-url",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common-util/common-util","oj-sp/attachments-2-actions/component/attachments-2-types","ojs/ojcontext","ojs/ojlogger","css!../attachments-2-styles.css","oj-sp/input-url/loader","ojs/ojdialog","ojs/ojbutton","ojs/ojpopup","ojs/ojinputtext"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchAddUrl=void 0;const d={urlAddress:"",urlTitle:""};class c extends o.Component{constructor(e){var t;super(e),this.state=Object.assign({},d),this.dialogRef=(0,o.createRef)(),this.popupRef=(0,o.createRef)(),this.inputUrlRef=(0,o.createRef)(),this.inputTitleRef=(0,o.createRef)(),this.handleUrlChanged=e=>{const t=e.detail.value;this.setState((e,i)=>{if(e.urlAddress!==t)return{urlAddress:t}})},this.handleTitleChanged=e=>{const t=e.detail.value;this.setState((e,i)=>{if(e.urlTitle!==t)return{urlTitle:t}})},this.handleKeyPress=e=>{"Enter"===e.key&&(document.getElementById(this.uniquePrefix+"_add_url_button").focus(),document.getElementById(this.uniquePrefix+"_add_url_button").click())},this.handleUrlCreate=async()=>{const e=r.getContext(this.inputUrlRef.current).getBusyContext().addBusyState({description:"Add URL Form Submit - URL Input Validation Action"});if("valid"===await this.inputUrlRef.current.validate()){const e={Url:this.state.urlAddress,Title:this.state.urlTitle};this.dialogRef.current?this.dialogRef.current.close():this.popupRef.current.close(),this.props.handleAction(n.AttachmentActionIDs.ADD_LINK,e)}try{e&&e()}catch(e){l.log("Attempting to close an already closed busy state.")}},this.handleUrlCancel=()=>{this.dialogRef.current?this.dialogRef.current.close():this.popupRef.current.close()},this.inputUrlMarkup=()=>(0,o.h)("oj-sp-input-url",{id:this.uniquePrefix+"_add_url_input",class:"oj-sp-attachments2-add-url-input-url",labelHint:s.link,"label-edge":"inside",required:!0,placeholder:s.sampleURL,value:this.state.urlAddress,ref:this.inputUrlRef,onvalueChanged:this.handleUrlChanged,onKeyPress:this.handleKeyPress}),this.inputTitleMarkup=()=>(0,o.h)("oj-input-text",{id:this.uniquePrefix+"_url_title",class:"oj-sp-attachments2-add-url-input-title",labelHint:s.attachmentTitle,"label-edge":"inside",value:this.state.urlTitle?this.state.urlTitle:"",ref:this.inputTitleRef,onvalueChanged:this.handleTitleChanged,onKeyPress:this.handleKeyPress}),this.okButtonMarkup=()=>(0,o.h)("oj-button",{id:this.uniquePrefix+"_add_url_button",class:"oj-button-sm",chroming:"callToAction",onojAction:this.handleUrlCreate},(0,o.h)("span",null,s.add)),this.cancelButtonMarkup=()=>(0,o.h)("oj-button",{id:this.uniquePrefix+"_cancel_url_button",class:"oj-button-sm "+(this.dialogRef.current?"oj-sm-only-padding-4x-bottom":"oj-sm-padding-4x-end"),onojAction:this.handleUrlCancel},(0,o.h)("span",null,s.cancel)),this.uniquePrefix=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)()}reset(){this.setState(d)}launch(e){this.reset(),this.dialogRef.current?this.dialogRef.current.open():this.popupRef.current.open(e)}render(e){const t=(0,a.isSmallScreenOrMobile)()||e.viewPortSize===n.ScreenRanges.xsm||e.viewPortSize===n.ScreenRanges.sm;return(0,o.h)("div",null,t?(0,o.h)("oj-dialog",{id:this.uniquePrefix+"_urlDialog",class:"oj-sp-attachments2-add-url-dialog",title:s.addLinkTitle,ref:this.dialogRef},(0,o.h)("div",{slot:"body"},this.inputUrlMarkup(),this.inputTitleMarkup()),(0,o.h)("div",{slot:"footer",class:"oj-sm-padding-10x-top oj-sm-padding-6x-bottom oj-md-padding-8x-bottom oj-sm-only-flex-direction-column oj-sm-padding-4x-horizontal oj-md-padding-8x-horizontal"},this.cancelButtonMarkup(),this.okButtonMarkup())):(0,o.h)("oj-popup",{id:this.uniquePrefix+"_urlPopup",class:"oj-sp-attachments2-add-url-popup oj-sm-padding-4x",modality:"modeless",autoDismiss:"focusLoss",initialFocus:"firstFocusable",ref:this.popupRef},this.inputUrlMarkup(),this.inputTitleMarkup(),(0,o.h)("div",{class:"oj-sp-attachments-2-add-url-popup-buttons"},this.cancelButtonMarkup(),this.okButtonMarkup())))}}t.AtchAddUrl=c})),define("oj-sp/attachments-2/components/atch-details",["require","exports","preact","ojs/ojvcomponent","../utils/atch-utils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","css!../attachments-2-styles.css","ojs/ojinputtext","ojs/ojformlayout"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchDetails=void 0;t.AtchDetails=e=>{var t;const{editAtch:n}=e,r=null!==(t=e.id)&&void 0!==t?t:(0,o.getUniqueId)();return(0,i.h)("oj-form-layout",{direction:"row","max-columns":"2",readonly:!0},(0,i.h)("oj-input-text",{id:r+"_edit_m_fileSize","label-hint":a.fileSizeHeader,value:(0,s.formatSize)(null==n?void 0:n.fileSize),readonly:!0,autocomplete:"off"}),(0,i.h)("oj-input-text",{id:r+"_edit_m_fileContentType","label-hint":a.fileType,value:null==n?void 0:n.fileContentType,readonly:!0,autocomplete:"off"}),(0,i.h)("oj-input-text",{id:r+"_edit_m_fileName","label-hint":a.fileName,value:null==n?void 0:n.fileName,readonly:!0,autocomplete:"off"}),(0,i.h)("oj-input-text",{id:r+"_edit_m_updatedDate","label-hint":a.updatedOn,value:(0,s.parseUpdatedDate)(n.updatedDate),readonly:!0,autocomplete:"off"}))}})),define("oj-sp/attachments-2/components/atch-edit-pane",["require","exports","ojs/ojvcomponent","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/attachments-2-actions/component/attachments-2-types","../context/atch-context","../utils/atch-utils","./atch-details","ojs/ojmutablearraydataprovider","oj-sp/input-url/loader","ojs/ojinputtext","ojs/ojselectsingle"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchEditPane=void 0;t.AtchEditPane=e=>{var t,p;const{editAtch:u,setEditAtchCallback:h,setDrawerTitleCallback:m,inputValidStateCallback:g,displayOptionExcludeFields:y}=e,{category:f}=(0,s.useContext)(r.default),b=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)(),v=(0,s.useMemo)(()=>{const e=Array.isArray(f)?[...f]:[];if(u){let t=!1;for(let i=0;i<e.length;i++)if(e[i].code===u.categoryCode){t=!0;break}!t&&u.categoryCode&&e.push({code:u.categoryName?u.categoryName:u.categoryCode,displayName:u.categoryCode})}return new c((t=e,Array.isArray(t)?null==t?void 0:t.map(e=>({value:e.code,label:e.displayName})):[]),{keyAttributes:"value"});var t},[f,u]),j=(0,s.useRef)(),A=(0,s.useRef)(),C=e=>{const t=e.currentTarget.id.substring(e.currentTarget.id.indexOf("_-_")+"_-_".length),i=e.target.value,o=Object.assign(Object.assign({},u),{[t]:i});h(o)},E=e=>{g(e.detail.value)};return(0,o.h)("div",{className:"oj-drawer-full-height"},(0,o.h)("div",null,(0,o.h)("oj-input-text",{id:b+"_edit__-_title",class:"oj-sm-padding-4x-bottom",labelHint:a.attachmentTitle,"label-edge":"inside",autofocus:!0,value:null==u?void 0:u.title,onvalueChanged:C,onfocusout:e=>{const t=e.target.value;""!==t&&m(t)},onvalidChanged:E,ref:j,required:(null==u?void 0:u.datatypeCode)===n.DataTypeCodes.FILE}),(null==u?void 0:u.datatypeCode)===n.DataTypeCodes.WEB_PAGE?(0,o.h)("oj-sp-input-url",{id:b+"_edit__-_url",class:"oj-sp-attachments2-edit-drawer-input-url",labelHint:a.link,"label-edge":"inside",required:!0,placeholder:a.sampleURL,onvalidChanged:E,value:null==u?void 0:u.url,onvalueChanged:e=>{const t=e.detail.value;if((null==u?void 0:u.url)!==t){const e=Object.assign(Object.assign({},u),{url:t});h(e)}},ref:A}):"",f&&Array.isArray(f)&&"off"!==e.actionOptionsCategory?(0,o.h)("oj-select-single",{disabled:"disabled"===e.actionOptionsCategory,id:b+"_edit__-_category",class:"oj-sm-padding-4x-bottom",labelHint:a.categoryHeader,"label-edge":"inside",autofocus:!0,value:null!==(p=null==u?void 0:u.categoryCode)&&void 0!==p?p:null,data:v,onvalueChanged:e=>{const t=e.detail.value;if(u&&t!==u.categoryCode){const e=Object.assign(Object.assign({},u),{categoryCode:t});h(e)}}}):"",(0,l.shouldShowHideField)(y,"description")?"":(0,o.h)("oj-input-text",{id:b+"_edit__-_description",labelHint:a.descriptionHeader,"label-edge":"inside",value:null==u?void 0:u.description,onvalueChanged:C})),(null==u?void 0:u.datatypeCode)===n.DataTypeCodes.FILE?(0,o.h)("div",null,(0,o.h)("div",{class:"oj-sp-attachments2-edit-drawer-metadata-section oj-typography-subheading-xs"},a.attachmentDetails),(0,o.h)(d.AtchDetails,{editAtch:u})):(0,o.h)("div",null))}})),define("oj-sp/internal-resources/components/drawer-common/drawer-template-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionId=void 0,function(e){e.Previous="PREVIOUS",e.Next="NEXT",e.Primary="PRIMARY",e.Secondary="SECONDARY",e.PrimaryAndClose="PRIMARY_AND_CLOSE",e.PrimaryAndNext="PRIMARY_AND_NEXT",e.Cancel="CANCEL",e.Skip="SKIP",e.Continue="CONTINUE"}(t.ActionId||(t.ActionId={}))})),define("oj-sp/internal-resources/components/drawer-common/drawer-template-header",["require","exports","preact","preact/hooks","./drawer-template-types"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawerTemplateHeader=t.HEADER_HORIZONTAL_PADDING=void 0,t.HEADER_HORIZONTAL_PADDING="oj-sm-padding-4x-horizontal oj-md-padding-6x-horizontal";t.DrawerTemplateHeader=e=>{const s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const{current:t}=s,i=new ResizeObserver(()=>u(e.setCssVariable,t));return i.observe(t),()=>{i.disconnect()}}),(0,i.h)("header",{ref:s,"aria-labelledby":e.uid+"_title",class:`oj-sp-drawer-template-header oj-bg-neutral-10\n    oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap ${a(e)} ${t.HEADER_HORIZONTAL_PADDING}`},p(e)&&c(e)&&n(e),r(e))};const a=e=>e.verticalPadding?e.verticalPadding:e.drawerSubtitle?"oj-sm-padding-3x-vertical":"oj-sm-padding-4x-vertical",n=e=>p(e)&&c(e)&&(0,i.h)("div",{class:"oj-flex-item oj-flex-bar oj-sm-margin-3x-bottom"},(0,i.h)("div",{class:"oj-flex-bar-start"},l(e),d(e)),(0,i.h)("div",{class:"oj-flex-bar-end"},e.endSlot)),r=e=>(0,i.h)("div",{class:` oj-flex oj-sm-flex-direction-row oj-sm-flex-wrap-nowrap ${!c(e)&&p(e)?"oj-sm-align-items-center":"oj-sm-align-items-start"} `},(0,i.h)("div",{class:`oj-flex-item ${c(e)?"oj-sm-padding-4x-end":""} `},(0,i.h)("div",{id:e.uid+"_title",role:"heading","aria-level":2,"aria-label":e.drawerTitleAriaLabel||e.drawerTitle||"",class:"oj-flex-item oj-sp-drawer-template-title oj-text-color-primary oj-typography-subheading-sm oj-line-clamp-2",title:e.drawerTitle},e.drawerTitle),(0,i.h)("div",{class:"oj-sp-drawer-template-subtitle oj-text-color-secondary oj-typography-body-sm"},e.drawerSubtitle)),!c(e)&&p(e)&&(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0"},e.endSlot),c(e)&&!p(e)&&(0,i.h)("div",{class:"oj-flex-bar-end oj-flex-item oj-sm-padding-1x-top oj-sm-justify-content-flex-end"},l(e),d(e))),l=e=>(e.previousItem&&"disabled"===e.previousItem.display&&e.nextItem&&"disabled"!==e.nextItem.display&&h(document.querySelector(".oj-sp-drawer-template-next-button")),e.previousItem&&"off"!==e.previousItem.display&&(0,i.h)("oj-button",{class:"oj-sp-drawer-template-previous-button oj-sm-margin-2x-end oj-button-sm",display:"icons",disabled:"disabled"===e.previousItem.display,onojAction:t=>e.onSpAction(s.ActionId.Previous,t)},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-chevron-left"}),(0,i.h)("span",null,e.previousItem.label||e.res.previous))),d=e=>(e.nextItem&&"disabled"===e.nextItem.display&&e.previousItem&&"disabled"!==e.previousItem.display&&h(document.querySelector(".oj-sp-drawer-template-previous-button")),e.nextItem&&"off"!==e.nextItem.display&&(0,i.h)("oj-button",{class:"oj-sp-drawer-template-next-button oj-button-sm",display:"icons",disabled:"disabled"===e.nextItem.display,onojAction:t=>e.onSpAction(s.ActionId.Next,t)},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-chevron-right"}),(0,i.h)("span",null,e.nextItem.label||e.res.next))),c=e=>{const t=e.previousItem&&e.previousItem.id&&"off"!==e.previousItem.display,i=e.nextItem&&e.nextItem.id&&"off"!==e.nextItem.display;return!(!t&&!i)},p=e=>void 0!==e.endSlot,u=(e,t)=>{if(!t)return;e("--oj-sp-drawer-template-header-height",t.getBoundingClientRect().height+"px")},h=e=>{e&&e.focus()}})),define("css!oj-sp/create-edit-drawer-template/components/create-edit-drawer-footer-styles",[],(function(){})),define("oj-sp/create-edit-drawer-template/components/create-edit-drawer-footer",["require","exports","ojs/ojtranslation","preact","preact/hooks","oj-sp/internal-resources/components/drawer-common/drawer-template-types","css!./create-edit-drawer-footer-styles","ojs/ojbutton","ojs/ojtoolbar","ojs/ojmenu"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEditDrawerFooter=void 0;t.CreateEditDrawerFooter=e=>{const t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{const{current:i}=t,o=new ResizeObserver(()=>d(e.setCssVariable,i));return o.observe(i),()=>{o.disconnect()}}),(0,o.h)("div",{ref:t,class:"oj-sp-create-edit-drawer-template-footer oj-bg-neutral-10 oj-sm-padding-4x oj-md-padding-6x-horizontal"},(0,o.h)("oj-toolbar",{class:"oj-sm-only-width-full oj-flex-item oj-sp-create-edit-drawer-template-toolbar\n                     oj-clickthrough-disabled oj-flex oj-sm-only-flex-direction-column\n                     oj-md-justify-content-flex-end oj-sm-flex-wrap-nowrap oj-md-flex-items-0"},n(e),r(e),l(e)))};const n=e=>(0,o.h)("oj-button",{id:e.uid+"_secondaryAction_"+a.ActionId.Cancel,class:"oj-sp-create-edit-drawer-template-secondary-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-3x-bottom oj-button-sm",display:"all",chroming:"outlined",onojAction:t=>e.onSpAction(a.ActionId.Cancel,t)},(0,o.h)("span",null,e.res.cancel)),r=e=>{const{hasNavigation:t,secondaryAction:i}=e;return i&&"off"!==i.display&&!t&&(0,o.h)("oj-button",{id:e.uid+"_secondaryAction_"+a.ActionId.Secondary,class:"oj-sp-create-edit-drawer-template-secondary-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-3x-bottom oj-button-sm",display:"all",chroming:"outlined",disabled:"disabled"===i.display,onojAction:t=>e.onSpAction(a.ActionId.Secondary,t)},(0,o.h)("span",null,i.label))},l=e=>{const{primaryAction:t,hasNavigation:s,hasMoreItems:n}=e;if(t)return s?n?(0,o.h)("oj-button",{class:"oj-sp-create-edit-drawer-template-navigation-end-action oj-sm-only-width-full oj-sm-only-margin-0 oj-button-sm",chroming:"callToAction",display:"all",onojAction:t=>e.onSpAction(a.ActionId.PrimaryAndClose,t)},(0,o.h)("span",null,i.applyParameters(e.res.ctaAndClose,{CTA_LABEL:t?t.label:""}))):(0,o.h)("oj-menu-button",{class:"oj-sp-create-edit-drawer-template-navigation-menu-button oj-sm-only-width-full oj-sm-only-margin-0 oj-button-sm",chroming:"solid"},(0,o.h)("span",null,t.label),(0,o.h)("oj-menu",{class:"oj-sp-create-edit-drawer-template-navigation-menu",slot:"menu",onojMenuAction:t=>{const i=t.detail.selectedValue?t.detail.selectedValue:"";if(i===a.ActionId.PrimaryAndClose)e.onSpAction(a.ActionId.PrimaryAndClose,t);else{if(i!==a.ActionId.PrimaryAndNext)throw new Error("[oj-sp-create-edit-drawer-template] unkown menu action with id "+i);e.onSpAction(a.ActionId.PrimaryAndNext,t)}}},(0,o.h)("oj-option",{id:e.uid+"_menuAction_"+a.ActionId.PrimaryAndClose,value:a.ActionId.PrimaryAndClose},i.applyParameters(e.res.ctaAndClose,{CTA_LABEL:t?t.label:""})),(0,o.h)("oj-option",{id:e.uid+"_menuAction_"+a.ActionId.PrimaryAndNext,value:a.ActionId.PrimaryAndNext},i.applyParameters(e.res.ctaAndNext,{CTA_LABEL:t?t.label:""})))):(0,o.h)("oj-button",{class:"oj-sp-create-edit-drawer-template-primary-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-button-sm",chroming:"callToAction",display:"all",disabled:"disabled"===t.display,onojAction:t=>e.onSpAction(a.ActionId.Primary,t)},(0,o.h)("span",null,t.label))},d=(e,t)=>{if(!t)return;e("--oj-sp-drawer-template-footer-height",t.getBoundingClientRect().height+"px")}})),define("css!oj-sp/internal-resources/components/drawer-common/drawer-template-styles",[],(function(){})),define("css!oj-sp/create-edit-drawer-template/create-edit-drawer-template-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/create-edit-drawer-template/create-edit-drawer-template",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojvcomponent","preact","oj-sp/internal-resources/components/drawer-common/drawer-template-types","oj-sp/internal-resources/components/drawer-common/drawer-template-header","./components/create-edit-drawer-footer","oj-sp/common/positionUtility","css!oj-sp/internal-resources/components/drawer-common/drawer-template-styles","css!./create-edit-drawer-template-styles","oj-sp/common/position-helper"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEditDrawerTemplate=void 0;let p=class extends n.Component{async componentDidMount(){this.subscribeHeaderToPositionUtil(),this.subscribeFooterToPositionUtil()}componentWillUnmount(){this.unsubscribePositionUtil()}constructor(e){var t;super(e),this.state={screenRange:s.SCREEN_RANGE.MD},this.actionHandler=e=>{var t,i,o,s,a,n,l,d,c,p,u,h,m,g,y,f;switch(e){case r.ActionId.Previous:null===(i=(t=this.props).onSpPrevious)||void 0===i||i.call(t,{id:null===(o=this.props.previousItem)||void 0===o?void 0:o.id});break;case r.ActionId.Next:null===(a=(s=this.props).onSpNext)||void 0===a||a.call(s,{id:null===(n=this.props.nextItem)||void 0===n?void 0:n.id});break;case r.ActionId.Cancel:null===(d=(l=this.props).onSpCancel)||void 0===d||d.call(l);break;case r.ActionId.PrimaryAndClose:null===(p=(c=this.props).onSpPrimaryActionAndClose)||void 0===p||p.call(c);break;case r.ActionId.PrimaryAndNext:null===(h=(u=this.props).onSpPrimaryActionAndNext)||void 0===h||h.call(u);break;case r.ActionId.Primary:null===(g=(m=this.props).onSpPrimaryAction)||void 0===g||g.call(m);break;case r.ActionId.Secondary:null===(f=(y=this.props).onSpSecondaryAction)||void 0===f||f.call(y);break;default:throw new Error("Unidentified action triggered")}},this.handlerUnsavedChangesCancel=e=>{var t,i;e.preventDefault(),e.stopPropagation(),null===(i=(t=this.props).onSpUnsavedChangesCancel)||void 0===i||i.call(t)},this.handlerUnsavedChangesDiscard=e=>{var t,i;e.preventDefault(),e.stopPropagation(),null===(i=(t=this.props).onSpUnsavedChangesDiscard)||void 0===i||i.call(t)},this.handleConnected=e=>{this.subscribeHeaderToPositionUtil(),this.subscribeFooterToPositionUtil()},this.handleDisconnected=e=>{this.unsubscribePositionUtil()},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,a.getUniqueId)(),this.initResponsiveUtils(),this.headerRef=(0,n.createRef)(),this.footerRef=(0,n.createRef)(),this.headerComponentName=this.uniqueId+"_create-edit-header",this.footerComponentName=this.uniqueId+"_create-edit-footer"}render(e){const{drawerSize:t}=this.props,{screenRange:i}=this.state,o=oj.Config.getDeviceType();return(0,n.h)("div",{class:`oj-sp-create-edit-drawer-template-main-container oj-bg-neutral-10 \n                  ${"oj-sp-drawer-template-width-"+t}\n                  ${"oj-sp-"+o+"-"+i}`},(0,n.h)("div",{class:"oj-sp-create-edit-drawer-header-wrapper",ref:this.headerRef},this.renderHeader()),(0,n.h)("div",{class:"oj-sp-create-edit-drawer-template-content-container"},this.renderUnsavedBanner(),this.renderBody()),this.renderPositionHelper(),(0,n.h)("div",{class:"oj-sp-create-edit-drawer-footer-wrapper",ref:this.footerRef},this.renderFooter()))}renderPositionHelper(){return(0,n.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}renderHeader(){return(0,n.h)(l.DrawerTemplateHeader,{uid:this.uniqueId,res:this.res,drawerTitle:this.props.drawerTitle,drawerSubtitle:this.props.drawerSubtitle,previousItem:this.props.previousItem,nextItem:this.props.nextItem,setCssVariable:(e,t)=>this.setCssVariable(e,t),onSpAction:e=>this.actionHandler(e)})}renderFooter(){const{primaryAction:e,secondaryAction:t,onSpPrimaryAction:i,onSpPrimaryActionAndClose:o,onSpPrimaryActionAndNext:s,onSpSecondaryAction:a,onSpCancel:r}=this.props;return(0,n.h)(d.CreateEditDrawerFooter,{uid:this.uniqueId,res:this.res,hasNavigation:this.hasNavigation(),hasMoreItems:this.hasMoreItems(),primaryAction:e,secondaryAction:t,setCssVariable:(e,t)=>this.setCssVariable(e,t),onSpAction:e=>this.actionHandler(e)})}renderUnsavedBanner(){return(0,n.h)("div",{class:"unsaved-message-banner-create-edit-container"},(0,n.h)("oj-sp-message-banner-unsaved-changes",{class:"oj-flex-item oj-sm-12 oj-md-1 unsaved-message-banner-create-edit",visible:this.showUnsavedBanner(),onojSpCancel:this.handlerUnsavedChangesCancel,onojSpDiscardChanges:this.handlerUnsavedChangesDiscard}))}renderBody(){const e="oj-sm-padding-4x-vertical oj-md-padding-6x-vertical "+l.HEADER_HORIZONTAL_PADDING;return(0,n.h)("div",{class:"oj-sp-create-edit-drawer-template-body oj-bg-neutral-10 "+e},this.props.children)}hasNavigation(){const{nextItem:e,previousItem:t}=this.props;return e&&"off"!==e.display||t&&"off"!==t.display}showUnsavedBanner(){const{unsavedChanges:e}=this.props;return this.hasNavigation()&&!0===e}hasMoreItems(){const{previousItem:e,nextItem:t}=this.props;return!(!e||"off"===e.display||t&&"on"===t.display)}initResponsiveUtils(){this.screenRange=o.createScreenRangeObservable(),this.setState({screenRange:this.screenRange()}),this.screenRange.subscribe(e=>{this.setState({screenRange:e})})}setCssVariable(e,t){this.base.style.setProperty(e,t)}unsubscribePositionUtil(){c.PositionUtility.isComponentSubscribed(this.headerComponentName)&&c.PositionUtility.unsubscribe({componentName:this.headerComponentName}),c.PositionUtility.isComponentSubscribed(this.footerComponentName)&&c.PositionUtility.unsubscribe({componentName:this.footerComponentName})}subscribeHeaderToPositionUtil(){const e=this.headerRef.current;if(e&&!c.PositionUtility.isComponentSubscribed(this.headerComponentName)){const t={componentName:this.headerComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"top",level:c.PositionUtility.LEVEL_MAP.header},onOffsetChange:t=>{e.style.top=t.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:e},onStickinessChange:t=>{const i=t.isSticky;e.style.position=i?"sticky":"unset"}}};c.PositionUtility.subscribe(t)}}subscribeFooterToPositionUtil(){const e=this.footerRef.current;if(e&&!c.PositionUtility.isComponentSubscribed(this.footerComponentName)){const t={componentName:this.footerComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"bottom",level:c.PositionUtility.LEVEL_MAP.footerNavigation},onOffsetChange:t=>{e.style.top=t.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:e},onStickinessChange:t=>{const i=t.isSticky;e.style.position=i?"sticky":"unset"}}};c.PositionUtility.subscribe(t)}}};p.defaultProps={drawerSize:"sm",primaryAction:{display:"on",label:""}},p._metadata={properties:{drawerTitle:{type:"string"},drawerSubtitle:{type:"string"},drawerSize:{type:"string",enumValues:["xl","lg","md","sm"]},primaryAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["disabled","on"]}}},secondaryAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},nextItem:{type:"object",properties:{id:{type:"string"},label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},previousItem:{type:"object",properties:{id:{type:"string"},label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},unsavedChanges:{type:"boolean"}},events:{spPrimaryAction:{},spSecondaryAction:{},spCancel:{},spPrevious:{},spNext:{},spPrimaryActionAndNext:{},spPrimaryActionAndClose:{},spUnsavedChangesDiscard:{},spUnsavedChangesCancel:{}},slots:{"":{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},p=__decorate([(0,a.customElement)("oj-sp-create-edit-drawer-template"),__metadata("design:paramtypes",[Object])],p),t.CreateEditDrawerTemplate=p})),define("oj-sp/create-edit-drawer-template/loader",["require","exports","./create-edit-drawer-template"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEditDrawerTemplate=void 0,Object.defineProperty(t,"CreateEditDrawerTemplate",{enumerable:!0,get:function(){return i.CreateEditDrawerTemplate}})})),define("oj-sp/attachments-2/components/atch-edit",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact/hooks","./atch-edit-pane","../utils/atch-utils","ojs/ojlogger","ojs/ojdrawerpopup","oj-sp/create-edit-drawer-template/loader"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchEdit=void 0;t.AtchEdit=e=>{var t;const[d,c]=(0,a.useState)(void 0),[p,u]=(0,a.useState)(""),[h,m]=(0,a.useState)("pending"),g=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)(),{asyncEditAttachment:y,editAtch:f,isOpened:b,handleEditClose:v,displayOptionExcludeFields:j}=e;(0,a.useEffect)(()=>{A(f)},[b]);const A=e=>{e?(e.title||(e.title=(0,r.atchTitle)(e)),c(e),u(e.title)):l.log("No attachment provided.")};return(0,o.h)("div",null,(0,o.h)("oj-drawer-popup",{edge:"end",modality:"modal",opened:b,onopenedChanged:e=>{!1===e.detail.value&&v()},id:g+"_editCreatePopUp"},(0,o.h)("oj-sp-create-edit-drawer-template",{id:g+"_editCreateEditTmpl",drawerTitle:p,primaryAction:{label:s.updateAttachment,display:"on"},onspPrimaryAction:()=>{"valid"===h&&(y(f.id,d).catch(e=>{l.log(e)}),v())},onspCancel:()=>{v()}},(0,o.h)(n.AtchEditPane,{editAtch:d,displayOptionExcludeFields:j,setEditAtchCallback:e=>{c(e)},setDrawerTitleCallback:e=>{u(e)},inputValidStateCallback:e=>{m(e)},actionOptionsCategory:e.actionOptionsCategory}))))}})),define("oj-sp/messages-banner/components/validation-message-detail",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationMessageDetail=void 0;t.ValidationMessageDetail=e=>{const t=(0,o.useRef)(null),{detail:a,uid:n,id:r}=e,[l,d]=(0,o.useState)(0),[c,p]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),m=Object.assign({},s);(0,o.useLayoutEffect)(()=>{!function(){let e=0;const i=(o=t.current,null==o?void 0:o.children);var o;Array.from(i).forEach(t=>{e+=t.clientHeight});const s=2*function(e){if(null==t?void 0:t.current.hasChildNodes()){const e=getComputedStyle(t.current.childNodes[0]);return Math.round(parseFloat(e.getPropertyValue("line-height")))}}();t.current.style.maxHeight=c?"none":s+"px";h(e>s),d(s)}()},[a]);const g=a.map((e,t)=>(0,i.h)("li",{class:"oj-flex-item",key:t},e));return(0,i.h)("div",{id:`${n}_message_${r}`},(0,i.h)("div",{id:`${n}_message_detail_list${r}`,class:"oj-flex oj-sm-flex-direction-column"},(0,i.h)("ul",{class:g.length>1?"oj-sp-messages-banner-validation-list":"oj-sp-single-val-detail",ref:t},g),u&&(0,i.h)("div",{class:"oj-flex oj-flex-item oj-sm-flex-items-initial oj-sm-padding-2x-top"},(0,i.h)("div",{class:"oj-flex-item oj-sm-margin-5x-end"},(0,i.h)("a",{id:`${n}_primaryAction_${r}`,href:"#",class:"\n                        oj-link-standalone\n                        oj-link-subtle-primary\n                        oj-typography-body-sm\n                        oj-typography-semi-bold\n                        ",onClick:function(e){e.preventDefault(),t.current.style.maxHeight=c?l+"px":"none",p(!c)}},c?m.viewLess:m.viewMore)))))}})),define("css!oj-sp/messages-banner/messages-banner-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/messages-banner/messages-banner",["require","exports","ojs/ojvcomponent","preact","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common-util/common-util","ojs/ojmutablearraydataprovider","./components/validation-message-detail","oj-sp/common/positionUtility","css!./messages-banner-styles.css","ojs/ojmessagebanner","oj-sp/common/position-helper"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";var c,p,u,h,m;Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesBanner=t.DISPLAY_OPTIONS_BANNER_TYPE=void 0,function(e){e.GENERAL="general",e.VALIDATION="validation",e.SERVER_ERROR="servererror"}(c||(c={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error",e.SUCCESS="success"}(p||(p={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error",e.CONFIRMATION="confirmation"}(u||(u={})),function(e){e.ALL="all",e.PRIMARY="primary",e.SECONDARY="secondary"}(h||(h={})),function(e){e.PAGE="page",e.SECTION="section"}(m=t.DISPLAY_OPTIONS_BANNER_TYPE||(t.DISPLAY_OPTIONS_BANNER_TYPE={}));let g=class extends o.Component{constructor(e){var t;super(e),this.handleConnected=e=>{this.subscribeToPositionUtil()},this.handleDisconnected=e=>{this.unsubscribePositionUtil()},this.handleClick=e=>{const t=e.currentTarget,i=t.getAttribute("data-key"),o=this.state.jetMessagesDp.data.find(({id:e})=>e===i);t.id.includes("_primaryAction_")?this.handlePrimaryActionClick(e,o):this.handleSecondaryActionClick(e,o)},this.wrapperRef=e=>{this.messageBannerElementRef=e},this.memoize=()=>{let e,t;return i=>{if(i)if(Array.isArray(i)||i===e){if(Array.isArray(i)&&!this.checkArrayAreEqual(i,t)){t=i;this.createMesssagesDataProvider(i).then(e=>{this.setState({jetMessagesDp:e})}).catch(e=>{s.error("Error: "+e)})}}else{null==e||e.removeEventListener("mutate",this.dataMutate),null==e||e.removeEventListener("refresh",this.refreshDataProvider),e=i,i.addEventListener("mutate",this.dataMutate),i.addEventListener("refresh",this.refreshDataProvider);this.createMesssagesDataProvider(i).then(e=>{this.setState({jetMessagesDp:e})}).catch(e=>{s.error("Error: "+e)})}}},this.renderValidationMessageTemplate=e=>{const{id:t="",detail:i=[]}=e.data,s=(0,o.h)(l.ValidationMessageDetail,{detail:i,uid:this.uid,id:t});return(0,o.h)("div",null,s)},this.renderActionsMessageTemplate=e=>{const{id:t="",detail:i="",primaryButtonText:s="",secondaryButtonText:a=""}=e.data;return(0,o.h)("div",{id:`${this.uid}_message_${t}`},(0,o.h)("div",{class:"oj-flex-item"},(0,o.h)("span",null,i)),(0,o.h)("div",{class:"\n                  oj-flex\n                  oj-flex-item\n                  oj-sm-flex-items-initial\n                  oj-sm-padding-2x-top\n                "},s&&(0,o.h)("div",{class:"oj-flex-item oj-sm-margin-5x-end"},(0,o.h)("a",{id:`${this.uid}_primaryAction_${t}`,"data-key":t,href:"#",class:"\n                         oj-link-standalone\n                         oj-link-subtle-primary\n                         oj-typography-body-sm\n                         oj-typography-semi-bold\n                        ",onClick:this.handleClick},s)),a&&(0,o.h)("div",{class:"oj-flex-item oj-sm-margin-5x-end"},(0,o.h)("a",{id:`${this.uid}_secondaryAction_${t}`,"data-key":t,href:"#",class:"\n                                oj-link-standalone\n                                oj-link-subtle-primary\n                                oj-typography-body-sm\n                                oj-typography-semi-bold\n                              ",onClick:this.handleClick},a))))},this.renderRegularMessageTemplate=e=>{const{id:t="",detail:i=""}=e.data;return(0,o.h)("div",{id:`${this.uid}_message_${t}`},(0,o.h)("div",{class:`oj-flex-item ${this.uid}_message_detail_${t}`},(0,o.h)("span",null,i)))},this.dataMutate=async e=>{var t;let i=null===(t=this.state.jetMessagesDp)||void 0===t?void 0:t.data.slice();if(e.detail.add){const{data:t,indexes:o}=e.detail.add;o?o.forEach((e,o)=>{const s=this.processOjSpectraMessages([t[o]]);i.splice(e,0,...s)}):i=[...i,...this.processOjSpectraMessages(t)],this.state.jetMessagesDp.data=i}else if(e.detail.update){const{data:t,indexes:o}=e.detail.update,s=this.processOjSpectraMessages(t);o?o.forEach(e=>{const t=s.find(t=>{var o;return t.id===(null===(o=i[e])||void 0===o?void 0:o.id)});i[e]=t}):i=i.map(e=>{var t;return null!==(t=s.find(({id:t})=>t===e.id))&&void 0!==t?t:e}),this.state.jetMessagesDp.data=i}else if(e.detail.remove){const{indexes:t,keys:o}=e.detail.remove;i=t?i.filter((e,i)=>!t.includes(i)):i.filter(e=>!Array.from(o).find(t=>String(t)===e.id)),this.state.jetMessagesDp.data=i}},this.refreshDataProvider=async()=>{var e;this.mountBusyResolve=(0,n.setBusyResolve)(this.messageBannerElementRef,{description:"Messages Banner - with group of messages"});const t=null!==(e=this.props.data)&&void 0!==e?e:this.props.messages,i=await(0,n.dataProviderToArray)(t);this.mountBusyResolve();const o=this.processOjSpectraMessages(i);this.state.jetMessagesDp.data=o},this.closeMessage=e=>{var t,i;const o=e.detail.key;if(null===(i=(t=this.props).onSpClose)||void 0===i||i.call(t,{messageId:o}),this.props.data)return;let s=this.state.jetMessagesDp.data;s=s.filter(e=>o!==e.id),this.state.jetMessagesDp.data=s},this.handlePrimaryActionClick=(e,t)=>{var i,o;e.preventDefault(),null===(o=(i=this.props).onSpPrimaryAction)||void 0===o||o.call(i,{messageId:t.id})},this.handleSecondaryActionClick=(e,t)=>{var i,o;e.preventDefault(),null===(o=(i=this.props).onSpSecondaryAction)||void 0===o||o.call(i,{messageId:t.id})},this.getDetailTemplate=e=>{const{template:t,primaryButtonText:i,secondaryButtonText:o}=e.data;return t===c.VALIDATION?"validationDetail":null!=i||null!=o?"actions":"regularMessageTemplate"},this.res=Object.assign(Object.assign({},a),this.props.translations),this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.uniqueComponentName=this.uid+"_messages-banner",this.state={jetMessagesDp:null},this.memoizer=this.memoize()}getBannerType(){var e,t,i;return null!==(i=null===(t=null===(e=this.props)||void 0===e?void 0:e.displayOptions)||void 0===t?void 0:t.bannerType)&&void 0!==i?i:m.PAGE}isBannerTypeSection(){return this.getBannerType()===m.SECTION}componentDidMount(){this.subscribeToPositionUtil(),this.componentObserver=new MutationObserver(()=>{this.componentObserver.disconnect()}),this.componentObserver.observe(this.messageBannerElementRef,{attributes:!0,childList:!0,subtree:!0})}componentDidUpdate(e,t){this.state.jetMessagesDp!==t.jetMessagesDp&&this.mountBusyResolve&&(this.mountBusyResolve(),this.mountBusyResolve=null)}componentWillUnmount(){var e;this.componentObserver.disconnect(),this.unsubscribePositionUtil();const t=null!==(e=this.props.data)&&void 0!==e?e:this.props.messages;if(Array.isArray(t))return;const i=t;i.removeEventListener("mutate",this.dataMutate),i.removeEventListener("refresh",this.refreshDataProvider)}render(e){var t;const i=null!==(t=e.data)&&void 0!==t?t:e.messages;return this.memoizer(i),(0,o.h)("div",{id:this.uid+"_stickycontainer",className:this.isBannerTypeSection()?"":"oj-sp-messages-banner-sticky-container",ref:this.wrapperRef},this.renderPositionHelper(),(0,o.h)("oj-message-banner",{id:this.uid+"_messagecontainer",data:this.state.jetMessagesDp,detailTemplateValue:this.getDetailTemplate,onojClose:this.closeMessage,type:this.getBannerType()},(0,o.h)("template",{slot:"validationDetail",render:this.renderValidationMessageTemplate}),(0,o.h)("template",{slot:"actions",render:this.renderActionsMessageTemplate}),(0,o.h)("template",{slot:"regularMessageTemplate",render:this.renderRegularMessageTemplate})))}renderPositionHelper(){return(0,o.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}unsubscribePositionUtil(){!this.isBannerTypeSection()&&d.PositionUtility.isComponentSubscribed(this.uniqueComponentName)&&d.PositionUtility.unsubscribe({componentName:this.uniqueComponentName})}subscribeToPositionUtil(){if(this.messageBannerElementRef&&!this.isBannerTypeSection()&&!d.PositionUtility.isComponentSubscribed(this.uniqueComponentName)){const e={componentName:this.uniqueComponentName,component:this.messageBannerElementRef,offsetCalculationSubscription:{offsetOptions:{position:"top",level:d.PositionUtility.LEVEL_MAP.banner},onOffsetChange:e=>{this.messageBannerElementRef.style.top=e.top+"px"}},stickinessSubscription:{onStickinessChange:e=>{const t=e.isSticky;this.messageBannerElementRef.style.position=t?"sticky":"unset"}}};d.PositionUtility.subscribe(e)}}checkArrayAreEqual(e,t){return(null==e?void 0:e.length)===(null==t?void 0:t.length)&&(null==t?void 0:t.every((t,i)=>t===e[i]))}convertBannerToSpectraMessage(e){var t;const i=Object.assign({},e);switch(this.checkInstanceOf(i,"messageType")?null===(t=i.messageType)||void 0===t?void 0:t.split("-")[0]:i.template){case c.GENERAL:return this.getGeneralMessage(i);case c.VALIDATION:return this.getValidationMessage(i);case c.SERVER_ERROR:return this.getServerErrorMessage(i);default:return null}}checkInstanceOf(e,t){return t in e}getServerErrorMessage(e){var t;e.primaryText=this.res.serverErrorMessage,e.secondaryActionLabel=null;const i=this.checkInstanceOf(e,"messageType")?null===(t=e.messageType)||void 0===t?void 0:t.split("-")[0]:e.template,o=u.ERROR;return this.getSpectraMessage(e,i,o)}getValidationMessage(e){var t,i,o,s;const a=this.checkInstanceOf(e,"messageType")?null===(t=e.messageType)||void 0===t?void 0:t.split("-")[0]:e.template;let n=this.checkInstanceOf(e,"messageType")?null===(i=e.messageType)||void 0===i?void 0:i.split("-")[(null===(o=e.messageType)||void 0===o?void 0:o.split("-").length)-1]:e.severity;n=n!==p.WARNING&&n!==p.ERROR?u.WARNING:n!==p.WARNING&&n===p.ERROR?u.ERROR:u.WARNING;let r=null!==(s=e.secondaryText)&&void 0!==s?s:"";const l=Array.isArray(r);return r="object"!=typeof r||l?"string"==typeof r?[r].filter(Boolean):r.filter(Boolean):[r].filter(Boolean).join(" "),e.secondaryText=r,this.getSpectraMessage(e,a,n)}getGeneralMessage(e){var t,i,o;const s=this.checkInstanceOf(e,"messageType")?null===(t=e.messageType)||void 0===t?void 0:t.split("-")[0]:e.template;let a=this.checkInstanceOf(e,"messageType")?null===(i=e.messageType)||void 0===i?void 0:i.split("-")[(null===(o=e.messageType)||void 0===o?void 0:o.split("-").length)-1]:e.severity;return e.displayActions===h.ALL?(e.primaryActionLabel=e.primaryActionLabel||"Primary action",e.secondaryActionLabel=e.secondaryActionLabel||"Secondary action"):e.displayActions===h.PRIMARY?(e.primaryActionLabel=e.primaryActionLabel||"Primary action",e.secondaryActionLabel=null):(e.primaryActionLabel=null,e.secondaryActionLabel=null),a=a===p.SUCCESS?u.CONFIRMATION:a,this.getSpectraMessage(e,s,a)}getSpectraMessage(e,t,i){const{secondaryText:o,primaryActionLabel:s,secondaryActionLabel:a,primaryText:n,id:r}=e;return{detail:o,id:r,primaryButtonText:t===c.GENERAL?s:t===c.SERVER_ERROR?this.res.tryAgain:"",secondaryButtonText:a,severity:i,showList:t===c.VALIDATION&&(null==o?void 0:o.length)>1,summary:n,template:t,closeAffordance:t===c.SERVER_ERROR?"off":"on"}}processOjSpectraMessages(e){if(!e||!Array.isArray(e))return;return e.map(e=>this.convertBannerToSpectraMessage(e))}async createMesssagesDataProvider(e){const t=document.querySelector("#"+this.uid);this.mountBusyResolve=(0,n.setBusyResolve)(this.messageBannerElementRef||t,{description:"Messages Banner - with group of messages"});const i=Array.isArray(e)?e:await(0,n.dataProviderToArray)(e),o=this.processOjSpectraMessages(i);return new r(o,{keyAttributes:"id"})}};g._metadata={properties:{messages:{type:"Array<object>|DataProvider"},data:{type:"DataProvider"},translations:{type:"object",properties:{tryAgain:{type:"string"}}},displayOptions:{type:"object",properties:{bannerType:{type:"string",enumValues:["page","section"]}}}},events:{spPrimaryAction:{},spSecondaryAction:{},spClose:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},g=__decorate([(0,i.customElement)("oj-sp-messages-banner"),__metadata("design:paramtypes",[Object])],g),t.MessagesBanner=g})),define("oj-sp/messages-banner/loader",["require","exports","./messages-banner"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesBanner=void 0,Object.defineProperty(t,"MessagesBanner",{enumerable:!0,get:function(){return i.MessagesBanner}})})),define("oj-sp/attachments-2/components/atch-messages",["require","exports","ojs/ojvcomponent","preact","ojs/ojlogger","ojs/ojmutablearraydataprovider","oj-sp/messages-banner/loader","oj-sp/messages-banner/loader"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchMessages=void 0;const r={errorMsgs:new a([],{keyAttributes:"id"})};class l extends o.Component{constructor(e){var t;super(e),this.state=Object.assign({},r),this.bannerRef=(0,o.createRef)(),this.onRemoveMessage=e=>{s.log("remove message: "+e.messageId),this.setState({errorMsgs:new a([],{keyAttributes:"id"})})},this.primaryAction=e=>{s.log("retry message: "+e.messageId)},this.uniquePrefix=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)()}render(e){return(0,o.h)("div",null,(0,o.h)(n.MessagesBanner,{id:this.uniquePrefix+"__atch2_messages",ref:this.bannerRef,data:this.state.errorMsgs,onSpClose:this.onRemoveMessage,onSpPrimaryAction:this.primaryAction}))}addError(e,t){const i=new a([{id:"error1",messageType:"validation-error",primaryText:e,secondaryText:t.message}],{keyAttributes:"id"});this.setState({errorMsgs:i})}}t.AtchMessages=l})),define("text!oj-sp/message-dialog-destructive/component.json",[],(function(){return'{"name":"message-dialog-destructive","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Message Dialog - Destructive Action","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","description":"Allows users to confirm that they intend to perform an action that might destroy content.","type":"composite","icon":{"iconPath":"extension/images/ico-message-dialog-destructive-action-48.svg"},"dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0"},"properties":{"primaryText":{"description":"Title of the destruction dialog ","displayName":"Primary Text","writeback":false,"type":"string","required":true},"secondaryText":{"description":"Message of the destruction dialog","displayName":"Secondary Text","writeback":false,"type":"string","required":true},"primaryActionLabel":{"description":"text of primary button of the dialog , if not defined will default to Delete","displayName":"Primary Button Label","writeback":false,"type":"string","required":false},"openDialog":{"description":"Property to open or close dialog","displayName":"open","writeback":false,"type":"boolean","required":true}},"events":{"ojSpDeleteConfirm":{"displayName":"Delete Confirm Event","description":"Dispatched when Delete confirmation action is triggered.","bubbles":false,"cancelable":true,"eventGroup":"common"},"ojSpCancel":{"displayName":"Cancel Dialog event","description":"Dispatched when clicked on cancel or pressed escape button to close the dialog.","bubbles":false,"cancelable":true,"eventGroup":"common"}},"methods":{"open":{"description":"Opens message destructive Dialog.","params":[{"name":"payload","description":"optional payload which can be sent to destructive dialog which will get dispatched when deleteconfirm event is fired","type":"any"}],"status":[{"type":"deprecated","since":"2207.0.0","description":"Use openDialog property instead."}]}},"extension":{"catalog":{"category":"Redwood Messages","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Message%20Dialog%20Destructive%20&Test%20Adapter%20=docs/testAdapterAPI/classes/messagedialogdestructive.html","coverImage":"extension/images/ico-message-dialog-destructive-action-48.svg"}}}'})),define("text!oj-sp/message-dialog-destructive/message-destructive.html",[],(function(){return'<html><head></head><body><oj-dialog class="oj-sp-message-destruction-dialog"modality="modal":id="[[ $uniqueId + \'_messageDirtyDataDialog\']]"position.at.vertical="[[screenRange() === \'sm\' ? \'bottom\' : \'center\']]"position.my.vertical="[[screenRange() === \'sm\' ? \'bottom\' : \'center\']]"position.at.horizontal="[[screenRange() === \'sm\' ? \'start\' : \'center\']]"position.my.horizontal="[[screenRange() === \'sm\' ? \'start\' : \'center\']]"position.collision="none"cancel-behavior="escape"on-oj-close="[[onDialogClose]]"><div slot="header"class="oj-sm-padding-5x-top"><h1 class="oj-typography-heading-sm oj-sm-margin-0-vertical oj-sm-padding-5x-top oj-md-padding-8x-top oj-sm-padding-0-bottom oj-sm-padding-4x-horizontal oj-md-padding-8x-horizontal"><oj-bind-text value="[[ $properties.primaryText ]]"></oj-bind-text></h1></div><div slot="body"class="oj-sm-padding-1x-bottom oj-sm-padding-5x-top oj-sm-padding-4x-horizontal oj-md-padding-8x-horizontal"><oj-defer><oj-bind-text class="oj-typography-body-md"value="[[ $properties.secondaryText ]]"></oj-bind-text></oj-defer></div><div slot="footer"><oj-button :id="[[ $uniqueId + \'_cancel\']]"on-oj-action="[[cancel]]"class="oj-button-sm oj-sm-padding-4x-top"><oj-bind-text value="[[res.cancel]]"></oj-bind-text></oj-button><oj-button :id="[[ $uniqueId + \'_deleteConfirm\']]"chroming="callToAction"class="oj-sp-message-destruction-dialog-danger-button oj-button-sm oj-sm-padding-4x-top oj-sm-padding-2x-horizontal oj-md-padding-2x-horizontal"on-oj-action="[[deleteConfirm]]"><span><oj-bind-text value="[[ $properties.primaryActionLabel ? $properties.primaryActionLabel : res.deleteButton ]]"></oj-bind-text></span></oj-button></div></oj-dialog></body></html>'})),define("oj-sp/message-dialog-destructive/message-destructive",["require","exports","oj-sp/common/EventDispatcher","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojbutton","ojs/ojdialog","ojs/ojknockout","ojs/ojdefer"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDestructionModel=void 0;t.MessageDestructionModel=class{constructor(e){this.connected=e=>{n.info("connected")},this.disconnected=e=>{n.info("disconnected")},this.bindingsApplied=()=>{n.info("bindings applied")},this.open=e=>{const t=this.getDestructionDialog();t&&!t.isOpen()&&(e&&this.payload(e),t.open())},this.getDestructionDialog=()=>(this.destructionDialog||(this.destructionDialog=this.element.querySelector(".oj-sp-message-destruction-dialog")),this.destructionDialog),this.setBusyResolve=e=>a.getContext(this.element).getBusyContext().addBusyState(e),this.onDialogClose=e=>{var t,s;(null===(s=null===(t=e.detail)||void 0===t?void 0:t.originalEvent)||void 0===s?void 0:s.key)===o.KEY_NAME.ESCAPE&&i.EventDispatcher.dispatch(i.EventDispatcher.MESSAGE_UNSAVED_CANCEL_EVENT_NAME,this.element,void 0)},this.closeDialog=()=>{const e=this.getDestructionDialog();e&&e.isOpen()&&e.close()},this.cancel=e=>{this.closeDialog(),i.EventDispatcher.dispatch(i.EventDispatcher.MESSAGE_UNSAVED_CANCEL_EVENT_NAME,this.element,void 0)},this.deleteConfirm=e=>{this.closeDialog(),i.EventDispatcher.dispatch(i.EventDispatcher.MESSAGE_DESTRUCTIVE_DELETE_CONFIRM_ACTION_EVENT_NAME,this.element,this.payload,!1)};const{element:t,properties:l,uniqueId:d}=e;this.properties=l,this.uniqueId=d,this.element=t,this.res=Object.assign({},s),this.screenRange=r.createScreenRangeObservable()}activated(e){n.info("activated")}propertyChanged(e){const{property:t,value:i}=e,o=this.getDestructionDialog();"openDialog"===t&&(i?this.open():(null==o?void 0:o.isOpen())&&o.close())}}})),define("css!oj-sp/message-dialog-destructive/message-destruction-styles",[],(function(){})),define("oj-sp/message-dialog-destructive/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./message-destructive.html","./message-destructive","css!./message-destruction-styles.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-message-dialog-destructive",{metadata:JSON.parse(o),view:s,viewModel:a.MessageDestructionModel})})),define("oj-sp/attachments-2/components/atch-confirm",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","css!../attachments-2-styles.css","oj-sp/message-dialog-destructive/loader"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchConfirmAction=void 0;const n={confirmTitlePrimary:void 0,confirmTitlePrimaryLabel:void 0,openDialogState:!1};class r extends o.Component{constructor(e){var t;super(e),this.state=Object.assign({},n),this.msgDialogRef=(0,o.createRef)(),this.callbackFunction=void 0,this.confirmAction=()=>{this.callbackFunction&&this.callbackFunction(),this.setState({openDialogState:!1})},this.cancelAction=()=>{this.callbackFunction=void 0,this.setState({openDialogState:!1})},this.uniquePrefix=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)()}confirmRemove(e,t){this.callbackFunction=t,this.setState({confirmTitlePrimary:1===e?s.removeDialogHeader:(0,a.applyParameters)(s.removeMultipleAttachments,{count:e}),confirmTitlePrimaryLabel:s.attachmentsRemove,openDialogState:!0})}render(e){return(0,o.h)("oj-sp-message-dialog-destructive",{id:this.uniquePrefix+"_confirmMessage",onojSpDeleteConfirm:this.confirmAction,primaryText:this.state.confirmTitlePrimary,primaryActionLabel:this.state.confirmTitlePrimaryLabel,secondaryText:null,openDialog:this.state.openDialogState,onojSpCancel:this.cancelAction,ref:this.msgDialogRef})}}t.AtchConfirmAction=r})),define("oj-sp/attachments-2/components/atch-message-toast",["require","exports","ojs/ojvcomponent","preact","ojs/ojmessages"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtchMessagesToast=void 0;t.AtchMessagesToast=e=>{var t;const s=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)(),a=()=>{e.closeAction()};return(0,o.h)("div",null,(0,o.h)("oj-messages",{id:s+"__atch2_messages_toast",class:"oj-color-invert",display:"notification",position:{at:{horizontal:"center",vertical:"bottom"}},displayOptions:{category:"none"},messages:e.messages},(0,o.h)("template",{slot:"messageTemplate",render:e=>{var t;return(0,o.h)("oj-message",{id:s+"__atch2_messages_toast_slot",class:"oj-color-invert",onojClose:a,displayOptions:{category:"none"},message:e.data},(0,o.h)("div",{slot:"detail",class:"oj-flex oj-sm-flex-direction-column"},e.data.detail?(0,o.h)("div",{class:"oj-flex-item"},(0,o.h)("span",null,e.data.detail)):"",(null===(t=e.data.actions)||void 0===t?void 0:t.length)>0?e.data.actions.map(e=>(0,o.h)("div",{class:"oj-flex-item oj-sm-margin-3x-top"},(0,o.h)("a",{href:"javascript:void(0)",onClick:e.action,id:e.id,class:"oj-link-standalone oj-typography-body-sm oj-typography-semi-bold"},e.title))):""))}})))}})),define("text!oj-sp/messages-toast/component.json",[],(function(){return'{"name":"messages-toast","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Messages Toast","description":"Messages Toast is a component that provides a template for different messages","type":"composite","icon":{"iconPath":"extension/images/ico-toast-messages-48.svg"},"dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0"},"properties":{"primaryText":{"displayName":"Primary Text","description":"The primary text of the toast message.","type":"string"},"type":{"type":"string","displayName":"Toast type","description":"Defines type of the Toast.","value":"acknowledgement","enumValues":["acknowledgement"],"propertyEditorValues":{"acknowledgement":{"displayName":"acknowledgement","description":"Acknowledgement toast message."}}},"displayMode":{"type":"string","displayName":"The display mode for the toast message.","value":"light","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The toast has a dark background with a light text color, to contrast with the light theme."},"mixed":{"displayName":"Mixed","description":"The toast has a light bacgkround with a dark text color, to contrast with the mixed theme."}}}},"methods":{"open":{"displayName":"Open","description":"This method opens the toast message."},"openMessageLog":{"displayName":"Open Message Log","description":"This method opens the log of toast messages."}},"events":{},"slots":{},"extension":{"catalog":{"category":"Redwood Messages","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Messages%20Toast%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectramessagestoast.html","coverImage":"extension/images/ico-toast-messages-48.svg"},"vbdt":{"pi":{"layouts":{"general":{"customizers":[{"propertyName":"primaryText"},{"propertyName":"type"}]}}}}}}'})),define("text!oj-sp/messages-toast/messages-toast-view.html",[],(function(){return'<html><head></head><body><oj-messages :id="[[ uid + \'_messagesToastContainer\' ]]":class="[[ {\'oj-color-invert\' : displayMode() === \'light\'} ]]"position="{}"messages="[[ jetMessagesDataprovider ]]"display="notification"display-options.category="none"></oj-messages><oj-dialog :id="[[ uid + \'_messagesLogContainer\' ]]"><div slot="body"><oj-bind-if test="[[ messageLog().length > 0 ]]"><ul><oj-bind-for-each data="[[ messageLog ]]"><template><li><oj-bind-text value="[[ $current.data.value ]]"></oj-bind-text></li></template><template slot="noData"></template></oj-bind-for-each></ul></oj-bind-if><oj-bind-if test="[[ messageLog().length === 0 ]]"><div><oj-bind-text value="[[ res().no_item_to_display ]]"></oj-bind-text></div></oj-bind-if></div><div slot="footer"><oj-button :id="[[ uid + \'_dialogCloseButton\' ]]"on-oj-action="[[ closeMessageLog ]]"><span><oj-bind-text value="[[ res().close ]]"></oj-bind-text></span></oj-button></div></oj-dialog></body></html>'})),define("oj-sp/messages-toast/messages-toast-viewModel",["require","exports","knockout","oj-sp/common-util/enums","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojarraydataprovider","ojs/ojcontext","ojs/ojlogger","ojs/ojmessages"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesToastViewModel=void 0;t.MessagesToastViewModel=class{constructor(e){this.open=()=>{this.jetMessages.removeAll(),this.jetMessages(this.createAToast())},this.openMessageLog=()=>{this.messageDialog||(this.messageDialog=document.querySelector(`#${this.uid}_messagesLogContainer`)),this.messageDialog.open()},this.createAToast=()=>{var e;const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches?-1:0,i=[];return(null===(e=this.properties.primaryText)||void 0===e?void 0:e.length)>0&&(i.push({autoTimeout:t,severity:this.toastType[this.properties.type],summary:this.properties.primaryText}),this.messageLog.push({value:this.properties.primaryText})),i},this.closeMessageLog=()=>{this.messageDialog||(this.messageDialog=document.querySelector(`#${this.uid}_messagesLogContainer`)),this.messageDialog.close()},this.setBusyResolve=e=>n.getContext(this.composite).getBusyContext().addBusyState(e),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=i.observable(Object.assign({},s)),this.displayMode=i.observable(o.BACKGROUND_MODE.LIGHT),this.toastType={acknowledgement:"confirmation"};const t=this.setBusyResolve({description:"Web Component Startup - Waiting for data"});this.jetMessages=i.observableArray(),this.jetMessagesDataprovider=new a(this.jetMessages),this.messageLog=i.observableArray([]),t()}activated(e){r.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){r.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55")}bindingsApplied(e){r.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),this.displayMode(this.properties.displayMode?this.properties.displayMode:o.BACKGROUND_MODE.LIGHT)}propertyChanged(e){const t=this.setBusyResolve({description:"Messages Banner - Property Changed"});r.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"displayMode"===e.property&&this.displayMode(e.value?e.value:o.BACKGROUND_MODE.LIGHT),t()}disconnected(e){r.log(`%c CCA ${this.uid} disconnected`,"background: #222; color: #bada55")}}})),define("css!oj-sp/messages-toast/messages-toast-styles",[],(function(){})),define("oj-sp/messages-toast/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./messages-toast-view.html","./messages-toast-viewModel","css!./messages-toast-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-messages-toast",{metadata:JSON.parse(o),view:s,viewModel:a.MessagesToastViewModel})}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/attachments-2/attachments-2",["require","exports","ojs/ojvcomponent","preact","ojs/ojkeyset","ojs/ojfilepickerutils","ojs/ojtranslation","ojs/ojbufferingdataprovider","ojs/ojcontext","ojs/ojlogger","ojs/ojtracer","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/attachments-2-actions/component/attachments-2-types","oj-sp/attachments-2-actions/mutators/AttachmentBufferingDataMutator","./components/atch-container","./components/atch-add-url","./components/atch-edit","./components/atch-messages","./components/atch-confirm","./context/atch-context","./utils/atch-utils","./utils/atch-utils","./components/atch-message-toast","css!./attachments-2-styles.css","oj-sp/messages-toast/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f,b,v,j,A,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attachments2=void 0;const E={clientSize:u.ScreenRanges.lg,windowSize:u.ScreenRanges.lg,selectedItems:new s.KeySetImpl,progress:[],uploadMessageArray:[],actionId:"",isEditOpened:!1,cancelUpload:!1},T=Symbol.for("trigger");let _=class extends o.Component{constructor(e){var t;super(e),this.state=Object.assign({},E),this.addUrlRef=(0,o.createRef)(),this.addUrlToastRef=(0,o.createRef)(),this.deleteToastRef=(0,o.createRef)(),this.confirmMessageRef=(0,o.createRef)(),this.msgsRef=(0,o.createRef)(),this.dropAreaRef=(0,o.createRef)(),this.uploadProgressArray=[],this.createFileDataArray=[],this.isCurrentUpload=!1,this.getDropHandlers=e=>{let t={};return"all"!==e.displayOptions.type&&"file"!==e.displayOptions.type||(t="on"===e.actionOptions.add?{dragEnter:this.handleDragEnter,dragOver:this.handleDragOver,dragLeave:this.handleDragLeave,dragDrop:this.handleDrop}:{}),t},this.handleMountUploadProgressToast=(e,t)=>{const i=this.createFileDataArray.length>0?this.createFileDataArray.length:e.length;this.setState(e=>Object.assign(Object.assign({},e),{uploadMessageArray:[{severity:"info",detail:(0,n.applyParameters)(this.res.numOfTotalAttachments,{currentIndex:t,numberAttachments:i}),actions:[this.createAction(this.cancelCurrentAndNextuploadAttachments,this.res.cancel,"cancelAction")],summary:1===i?this.res.uploadingSingleFile:(0,n.applyParameters)(this.res.uploadingManyFile,{count:i})}]}))},this.cancelCurrentAndNextuploadAttachments=()=>{this.state.cancelUpload||(this.setState({cancelUpload:!0}),this.currentAbortController.abort())},this.handleUnmountUploadProgressToast=()=>{setTimeout(()=>{this.setState(e=>Object.assign(Object.assign({},e),{uploadMessageArray:[]}))})},this.handleShowUploadAndCancelSummary=(e,t)=>{setTimeout(()=>{let i=[];null!=e&&(i=[...i,{severity:"confirmation",summary:e,autoTimeout:0}]),null!=t&&(i=[...i,{severity:"error",summary:t,autoTimeout:0}]),this.setState(e=>Object.assign(Object.assign({},e),{uploadMessageArray:i,cancelUpload:!1}))})},this.enterTarget=null,this.handleDragEnter=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.enterTarget=e.target,this.dropAreaRef.current.classList.add("oj-sp-attachments-dropzone")},this.handleDragLeave=e=>{this.enterTarget===e.target&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.dropAreaRef.current.classList.remove("oj-sp-attachments-dropzone"))},this.handleDragOver=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},this.handleDrop=e=>{e.preventDefault(),e.stopPropagation(),this.handleAction(u.AttachmentActionIDs.ADD_FILES,e.dataTransfer.files),this.dropAreaRef.current.classList.remove("oj-sp-attachments-dropzone")},this.isBufferingDataProvider=e=>e&&(e instanceof r||"getSubmittableItems"in e),this.getBufferingDataProvider=e=>{let t;return e&&(t=this.isBufferingDataProvider(e)?e:new r(e)),t},this.parentContentRefCallback=e=>{this.parentElementRef=e},this.resizeObserverHandler=e=>{for(const t of e)this.handleResponsiveState()},this.handleResponsiveState=()=>{if(!this.parentElementRef)return;const{clientWidth:e}=this.parentElementRef,t=(0,j.getScreenRange)(e),i=(0,j.getScreenRange)(e+10),o=window.innerWidth,s=(0,j.getScreenRange)(o);this.setState((e,o)=>{const a={};return e.clientSize!==t&&e.clientSize!==i&&(a.clientSize=t),e.windowSize!==s&&(a.windowSize=s),a})},this.selectFiles=()=>{a.pickFiles(this.addFiles,{accept:[],capture:"none",selectionMode:"multiple"})},this.addFiles=e=>{var t;const i=[],o=null===(t=this.props.fileOptions)||void 0===t?void 0:t.maxFileSize,s=[],a=e.length>1?this.res.errorAttachmentUploadTitle+"s":this.res.errorAttachmentUploadTitle;for(let t=0;t<e.length;t++)!o||e[t].size<o?i.push(e[t]):s.push((0,n.applyParameters)(this.res.errorAttachmentUploadSubtitle,{filename:e[t].name,maxSize:(0,A.formatSize)(o)}));s.length>0&&this.msgsRef.current.addError(a,{message:s.length>1?s:s[0]}),this.asyncHandleAddFiles(i).catch(e=>{d.log(e)})},this.filePickerSelectEvent=e=>{const t=e.detail.files;t&&this.addFiles(t)},this.getDeleteToastMessage=e=>1===e?this.res.attachmentSingleRemoved:(0,n.applyParameters)(this.res.attachmentsMultipleRemoved,{count:e}),this.getEditToastMessage=e=>1===e?this.res.attachmentUpdated:(0,n.applyParameters)(this.res.attachmentsMultipleUpdated,{count:e}),this.handleEditClose=()=>{this.setState({isEditOpened:!1})},this.handleAction=(e,t)=>{this.componentEvent(new CustomEvent("Attachments2HandleAction-"+e),i=>{switch(i.setAttribute("oj-sp.attachments-2.handle_action",e),d.log("atch-tabular-view-render",e),e){case u.AttachmentActionIDs.SELECT_FILES:this.selectFiles();break;case u.AttachmentActionIDs.LAUNCH_ADD_LINK:this.addUrlRef.current.launch(`#${this.uniquePrefix}_collectionContainer_primary_${u.AttachmentActionIDs.LAUNCH_ADD_LINK}_button`);break;case u.AttachmentActionIDs.ADD_FILES:t&&t instanceof FileList&&(i.setAttribute("oj-sp.attachments-2.handle_action_payload_file_count",t.length),this.addFiles(t));break;case u.AttachmentActionIDs.ADD_LINK:t.CategoryCode=this.getDefaultCategory(this.props),this.asyncAddLink(t).catch(e=>{d.error(e)});break;case u.AttachmentActionIDs.DOWNLOAD:{const e=t,i=this.openBusyState("Attachments 2 Download Action - FindById - "+e);h.AttachmentBufferingDataMutator.findById(e,this.providerValue.data).then(t=>{this.asyncDownload(e,t).catch(e=>{d.error(e)}),this.closeBusyState(i)}).catch(e=>{d.error(e),this.closeBusyState(i)});break}case u.AttachmentActionIDs.DOWNLOAD_SELECTED:{const e=this.getFirstSelectedAtchId(),t=this.openBusyState("Attachments 2 Download Select Action - FindById - "+e);h.AttachmentBufferingDataMutator.findById(e,this.providerValue.data).then(i=>{this.asyncDownload(e,i).catch(e=>{d.error(e)}),this.closeBusyState(t)}).catch(e=>{d.error(e),this.closeBusyState(t)});break}case u.AttachmentActionIDs.REMOVE:this.confirmMessageRef.current.confirmRemove(1,()=>{this.asyncDeleteAttachment(t).catch(e=>{d.error(e)})});break;case u.AttachmentActionIDs.REMOVE_SELECTED:{const e=this.state.selectedItems.values().size;this.confirmMessageRef.current.confirmRemove(e,()=>{this.asyncDeleteSelected().catch(e=>{d.error(e)})});break}case u.AttachmentActionIDs.EDIT:case u.AttachmentActionIDs.EDIT_SELECTED:{let i="";i=e===u.AttachmentActionIDs.EDIT_SELECTED?this.getFirstSelectedAtchId():t;const o=this.openBusyState("Attachments Edit Action - FindById - "+i);h.AttachmentBufferingDataMutator.findById(i,this.providerValue.data).then(t=>{d.log("mylog edit attachments-2.tsx part 1",t),this.setState({editAtch:t,actionId:e,isEditOpened:!0}),this.closeBusyState(o)}).catch(e=>{d.error(e),this.closeBusyState(o)});break}case u.AttachmentActionIDs.EDIT_CATEGORY:this.selectCategoryForSelectedItems(t).catch(e=>{d.error(e)})}i.end()})},this.selectCategoryForSelectedItems=async e=>{let t;t="object"==typeof e?e.code:e,"object"==typeof e&&(null==e?void 0:e.attachmentId)?await this.asyncEditAttachment(e.attachmentId,{categoryCode:t}):await this.asyncEditAttachmentSelected(t)},this.handleSelectedItemsChanged=e=>{this.setState((t,i)=>{if(t.selectedItems!==e)return{selectedItems:e}})},this.asyncHandleAddFiles=async e=>{const t=this.openBusyState("Attachments Add Files Action"),i=(new Date).getMilliseconds()+"_";this.isCurrentUpload||this.handleMountUploadProgressToast(e,1);for(let t=0;t<e.length;t++){const o=e[t],s=i+t,a=new AbortController,n={clientUploadId:s,filename:o.name,mimetype:o.type,controller:a,progress:0,completed:!1};this.uploadProgressArray.push(n);const r={ClientUploadId:s,File:o,CancelController:a,CategoryCode:this.getDefaultCategory(this.props)};this.createFileDataArray.push(r)}const o=new h.AttachmentBufferingDataMutator(this.providerValue.data),s=[];if(this.isCurrentUpload)return;this.isCurrentUpload=!0;for(let t=0;t<this.createFileDataArray.length;t++){t>0&&this.handleMountUploadProgressToast(e,t+1);const i=this.createFileDataArray[t];this.currentAbortController=i.CancelController;const a=await this.props.actions.create(i).catch(e=>{i.CancelController.signal.aborted?this.handleUnmountUploadProgressToast():(this.msgsRef.current.addError(this.res.errorAttachmentUpload,e),d.error(e.name+" ::: "+e.message))});if(this.state.cancelUpload)break;if(a){let e=!0;const t=o.generateAttachmentFromCreateData(a);s.push(t),await o.add(t).catch(t=>{e=!1,d.error(t)}),this.createFileDataArray.unshift()}}let a=null;const r=this.createFileDataArray.length-s.length,l=s.length>1?(0,n.applyParameters)(this.res.uploadedFiles,{count:s.length}):1==s.length?this.res.uploadedFile:null;this.state.cancelUpload&&(a=r>1?(0,n.applyParameters)(this.res.canceledUploadFiles,{count:r}):1===r?this.res.canceledUploadFile:null),this.handleShowUploadAndCancelSummary(l,a),this.uploadProgressArray=[],this.createFileDataArray=[],this.isCurrentUpload=!1,this.closeBusyState(t)},this.asyncAddLink=async e=>{const t=this.openBusyState("Attachments Add Link Action"),i=await this.props.actions.create(e).catch(e=>{this.msgsRef.current.addError(this.res.errorAttachmentUpload,e),d.error(e.name+" ::: "+e.message)});if(i){let e=!0;const t=new h.AttachmentBufferingDataMutator(this.providerValue.data),o=t.generateAttachmentFromCreateData(i);await t.add(o).catch(t=>{e=!1,d.error(t)}),e&&this.addUrlToastRef.current.open()}this.closeBusyState(t)},this.asyncEditAttachmentSelected=async e=>{const t=this.openBusyState("Attachments Edit Action"),i=this.state.selectedItems.values().size,o=this.state.selectedItems.values().values();let s=o.next();const a=[];do{let t=void 0;t={AttachmentIdentifier:s.value},this.state.editAtch||(t.CategoryCode=e);const i=await this.props.actions.edit(t).catch(e=>{this.msgsRef.current.addError(this.res.errorAttachmentUpdate,e),d.error(e.name+" ::: "+e.message)});i&&a.push(i),s=o.next()}while(!s.done);if(a&&a.length>0){let t=!0;const o=new h.AttachmentBufferingDataMutator(this.providerValue.data);for(let i=0;i<a.length;i++){const s=a[i].AttachmentIdentifier;await o.edit(s,{categoryCode:e}).catch(e=>{t=!1,d.error(e)})}t&&(this.deleteToastRef.current.primaryText=this.getEditToastMessage(i),this.deleteToastRef.current.open())}this.closeBusyState(t)},this.asyncEditAttachment=async(e,t)=>{const i=this.openBusyState("Attachments Edit Action");let o=void 0;o={AttachmentIdentifier:e,DocumentIdentifier:t.documentId,Title:t.title,Description:t.description},this.state.editAtch&&this.state.editAtch.categoryCode==t.categoryCode||(o.CategoryCode=null==t?void 0:t.categoryCode),t.datatypeCode===u.DataTypeCodes.WEB_PAGE&&(o.Url=t.url);if(await this.props.actions.edit(o).catch(e=>{this.msgsRef.current.addError(this.res.errorAttachmentUpdate,e),d.error(e.name+" ::: "+e.message)})){let i=!0;const o=new h.AttachmentBufferingDataMutator(this.providerValue.data);await o.edit(e,t).catch(e=>{i=!1,d.error(e)}),i&&(this.deleteToastRef.current.primaryText=this.res.attachmentUpdated,this.deleteToastRef.current.open())}this.closeBusyState(i)},this.asyncDeleteAttachment=async e=>{const t=this.openBusyState("Attachments Delete Action"),i={AttachmentIdentifier:e};if(await this.props.actions.delete(i).catch(e=>{this.msgsRef.current.addError(this.res.errorAttachmentRemove,e)})){let t=!0;const i=new h.AttachmentBufferingDataMutator(this.providerValue.data);await i.delete(e).catch(e=>{t=!1,d.error(e)}),t&&(this.deleteToastRef.current.primaryText=this.getDeleteToastMessage(1),this.deleteToastRef.current.open())}this.closeBusyState(t)},this.asyncDeleteSelected=async()=>{const e=this.openBusyState("Attachments Delete Selected Action"),t=this.state.selectedItems.values().size,i=this.state.selectedItems.values().values();let o=i.next();const a=[];do{const e={AttachmentIdentifier:o.value},t=await this.props.actions.delete(e).catch(e=>{this.msgsRef.current.addError(this.res.errorAttachmentRemove,e),d.error(e.name+" ::: "+e.message)});t&&a.push(t),o=i.next()}while(!o.done);if(a&&a.length>0){let e=!0;const i=new h.AttachmentBufferingDataMutator(this.providerValue.data);for(let t=0;t<a.length;t++){const o=a[t].AttachmentIdentifier;await i.delete(o).catch(t=>{e=!1,d.error(t)})}e&&(this.deleteToastRef.current.primaryText=this.getDeleteToastMessage(t),this.deleteToastRef.current.open()),this.handleSelectedItemsChanged(new s.KeySetImpl)}this.closeBusyState(e)},this.asyncDownload=async(e,t)=>{const i=this.openBusyState("Attachments Download Action"),o={AttachmentIdentifier:e,DocumentIdentifier:null==t?void 0:t.documentId},s=await this.props.actions.download(o).catch(e=>{this.msgsRef.current.addError(this.res.errorAttachmentDownload,e),d.error(e.name+" ::: "+e.message)});if(s){const e=null==t?void 0:t.fileName,i=((0,n.applyParameters)(this.res.attachmentAnnounceDownload,{displayName:e}),document.createElement("a"));document.body.appendChild(i);const o=window.URL.createObjectURL(s.Data);i.href=o,i.download=e,i.setAttribute("aria-label",e),i.click()}this.closeBusyState(i)},this.uniquePrefix=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.res=Object.assign({},p),this.resizeObserver=new ResizeObserver(e=>this.resizeObserverHandler(e));const l=(0,j.getScreenRange)(window.innerWidth);this.setState({clientSize:l,windowSize:l}),this.tracer=(0,c.getTracerProvider)().getTracer("oj-sp.attachments-2");const m=new Map;this.oTelcontext={getValue:e=>m.get(e),setValue(e,t){return m.set(e,t),this},deleteValue(e){return m.delete(e),this}},e.onValidChanged&&e.onValidChanged("valid")}componentEvent(e,t){return this.oTelcontext.setValue(T,e),this.tracer.startActiveSpan("componentEvent",{},this.oTelcontext,t)}render(e){var t,i;const s=this.getBufferingDataProvider(e.data);this.providerValue={clientSize:this.state.clientSize,data:s,handleAction:this.handleAction,addFiles:this.asyncHandleAddFiles,filePickerSelectEvent:this.filePickerSelectEvent,handleSelectedChanged:this.handleSelectedItemsChanged,maxFileSize:null===(t=e.fileOptions)||void 0===t?void 0:t.maxFileSize,category:e.category,scroller:null===(i=e.scrollPolicyOptions)||void 0===i?void 0:i.scroller};const a=this.getDropHandlers(e);return(0,o.h)(v.default.Provider,{value:this.providerValue},(0,o.h)("div",{ref:this.parentContentRefCallback,className:"oj-sp-attachments2-container",onDragEnter:a.dragEnter,onDragOver:a.dragOver,onDragLeave:a.dragLeave,onDrop:a.dragDrop},(0,o.h)("div",{ref:this.dropAreaRef,className:"oj-sp-attachments2-dropzone-default"}),(0,o.h)(f.AtchMessages,{id:this.uniquePrefix,ref:this.msgsRef}),(0,o.h)(m.AtchContainer,{prefix:this.uniquePrefix,actionOptionsAdd:e.actionOptions.add,actionOptionsEdit:e.actionOptions.edit,actionOptionsDownload:e.actionOptions.download,actionOptionsDelete:e.actionOptions.delete,actionOptionsCategory:e.actionOptions.category,displayOptionsView:e.displayOptions.view,displayOptionsType:e.displayOptions.type,fieldOptionsCategory:e.fieldOptions.category,displayOptionExcludeFields:e.displayOptions.excludeFields,selectedItems:this.state.selectedItems,viewPortSize:this.state.clientSize}),(0,o.h)(g.AtchAddUrl,{id:this.uniquePrefix,ref:this.addUrlRef,handleAction:this.handleAction,viewPortSize:this.state.windowSize}),(0,o.h)(y.AtchEdit,{displayOptionExcludeFields:e.displayOptions.excludeFields,id:this.uniquePrefix,editAtch:this.state.editAtch,actionId:this.state.actionId,asyncEditAttachment:this.asyncEditAttachment,isOpened:this.state.isEditOpened,handleEditClose:this.handleEditClose,actionOptionsCategory:e.actionOptions.category}),(0,o.h)(b.AtchConfirmAction,{id:this.uniquePrefix,ref:this.confirmMessageRef}),(0,o.h)("oj-sp-messages-toast",{"primary-text":this.res.linkAdded,id:this.uniquePrefix+"_add_url_messages_toast",type:"acknowledgement",ref:this.addUrlToastRef}),(0,o.h)("oj-sp-messages-toast",{id:this.uniquePrefix+"_upload_messages_toast",type:"acknowledgement",ref:this.deleteToastRef}),(0,o.h)(C.AtchMessagesToast,{id:this.uniquePrefix+"_add_file_messages_toast",messages:this.state.uploadMessageArray,closeAction:this.handleUnmountUploadProgressToast}),(0,o.h)("oj-file-picker",{id:this.uniquePrefix+"_test_filePicker",class:"oj-sp-attachments2-test-filepicker oj-sp-attachments2-specificity-filepicker",onojSelect:this.filePickerSelectEvent})))}createAction(e,t,i){return{action:e,title:t,id:i}}componentDidMount(){this.resizeObserver.observe(this.parentElementRef)}componentWillUnmount(){this.resizeObserver.disconnect()}getDefaultCategory(e){let t=null;if(e.category&&"string"==typeof e.category)t=e.category;else if(e.category&&Array.isArray(e.category)){const i=e.category;i.length>0&&(t=i[0].code)}return t}getFirstSelectedAtchId(){return this.state.selectedItems.values().values().next().value}openBusyState(e){const t={description:e};return l.getContext(this.parentElementRef).getBusyContext().addBusyState(t)}closeBusyState(e){try{e&&e()}catch(e){d.info("Attempting to close an already closed busy state.")}}};_.defaultProps={displayOptions:{view:"auto",type:"all",excludeFields:""},actionOptions:{add:"on",edit:"on",download:"on",delete:"on",category:"on"},fieldOptions:{category:null}},_._metadata={properties:{data:{type:"DataProvider"},actions:{type:"object"},displayOptions:{type:"object",properties:{view:{type:"string",enumValues:["auto","list","tabular"]},type:{type:"string",enumValues:["link","all","file"]},excludeFields:{type:"string"}}},actionOptions:{type:"object",properties:{add:{type:"string",enumValues:["disabled","on","off"]},edit:{type:"string",enumValues:["disabled","on","off"]},download:{type:"string",enumValues:["disabled","on","off"]},delete:{type:"string",enumValues:["disabled","on","off"]},category:{type:"string",enumValues:["disabled","on","off"]}}},fileOptions:{type:"object",properties:{maxFileSize:{type:"number"}}},category:{type:"string|Array<object>"},fieldOptions:{type:"object",properties:{category:{type:"string",enumValues:["include","exclude"]}}},valid:{type:"string",enumValues:["invalidHidden","invalidShown","valid","pending"],readOnly:!0,writeback:!0},scrollPolicyOptions:{type:"object",properties:{scroller:{type:"string"}}}},slots:{displayTemplate:{data:{}}},extension:{_WRITEBACK_PROPS:["valid"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["id"]}},_=__decorate([(0,i.customElement)("oj-sp-attachments-2"),__metadata("design:paramtypes",[Object])],_),t.Attachments2=_})),define("oj-sp/attachments-2/loader",["require","exports","./attachments-2"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attachments2=void 0,Object.defineProperty(t,"Attachments2",{enumerable:!0,get:function(){return i.Attachments2}})})),define("oj-sp/attachments-2-actions/view/BossAttachmentsView",["require","exports","ojs/ojlistdataproviderview"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossAttachmentsView=void 0;class o{static mapAttachments(e){return new i(e,{dataMapping:{mapFields:e=>{const t=e.data;return{data:{datatypeCode:t.document.type,title:t.document.title,id:t.id,description:t.document.description,documentId:t.document.id,url:t.document.url,updatedByUserName:"",updatedDate:t.timeUpdated,categoryCode:t.category,categoryName:"",fileName:t.document.fileName,fileSize:t.document.size,fileContentType:t.document.mediaType,actionOptions:t.actionOptions},metadata:{key:o.getNullSafeStringValue(t.id)}}}}})}static async mapCategories(e){var t,i,o,s,a;const n=[];if(e){const r=null===(a=null===(s=null===(o=null===(i=null===(t=(await e.getMetadata()).properties)||void 0===t?void 0:t.items)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.$attachments)||void 0===s?void 0:s.properties)||void 0===a?void 0:a.category["x-enum"];if(r){const e=Object.keys(r);for(let t=0;e&&t<e.length;t++){const i=e[t],o={code:i,displayName:r[i].display};n.push(o)}}}return n}static getNullSafeStringValue(e){let t=null;return e&&(t=String(e)),t}}t.BossAttachmentsView=o})),define("oj-sp/attachments-2-actions/view/BossAttachmentsViewType",["vb/types/extendedType","./BossAttachmentsView"],(e,t)=>class extends e{constructor(e){super(),this._init(e)}_init(){}getWritableOptions(){return{propertiesWritable:"all"}}isExtendedType(){return!0}getTypeDefinition(){return{type:{},resolved:!0}}init(e,t,i){this._init(i)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t)}hoistValueObjectProperties(){return!1}mapAttachments(e){return t.BossAttachmentsView.mapAttachments(e)}mapCategories(e){return t.BossAttachmentsView.mapCategories(e)}}),define("oj-sp/attachments-2-actions/actions/executors/AttachmentExecutor",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentExecutor=void 0;t.AttachmentExecutor=class{}})),define("oj-sp/attachments-2-actions/actions/executors/RestHelperExecutor",["require","exports","./AttachmentExecutor","ojs/ojlogger","vb/helpers/rest"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestHelperExecutor=void 0;class a extends i.AttachmentExecutor{constructor(e,t,i){super(),this.endpointName=e,this.endpointParams=t,this.endpointBindingNames=i}static createExecutorWithName(e){return new a(e,null,null)}static createExecutorWithParams(e,t){return new a(e,t,null)}static createExecutorWithParamsAndBindings(e,t,i){return new a(e,t,i)}static createExecutorWithBindings(e,t){return new a(e,null,t)}async execute(e,t,i,s,n,r){const l=Object.assign({},this.endpointParams);r&&Object.assign(l,r);const d=await a.callEndpoint(this.endpointName,l,this.endpointBindingNames,t,e,i,s,n).catch(e=>{throw o.warn("Attachment Error executing REST:: Endpoint: "+this.endpointName),o.warn(e),new Error("Attachment Error executing REST:: Endpoint: "+this.endpointName)});if(!d.response.ok){o.warn("Attachment Failure executing REST:: Endpoint: "+this.endpointName);let e=null;try{const t=d.body&&d.body instanceof Blob?await d.body.text():null,i=JSON.parse(t);e=null==i?void 0:i.errorMessage}catch(e){o.warn("Exception occurred attempting to retrieve detailed message for REST failure "+this.endpointName),o.warn(e)}throw e?new Error(e):new Error("Attachment Failure executing REST:: Endpoint: "+this.endpointName)}return Promise.resolve(d)}async toUrl(e){return a.getEndpointUrl(this.endpointName,this.endpointParams,this.endpointBindingNames,e)}static callEndpoint(e,t,i,s,n,r,l,d){let c=a.getEndpoint(e);const p={};if(Object.assign(p,t),i&&s)for(let e=0;e<i.length&&e<s.length;e++)if(s[e]){if(!i[e])throw o.warn("Attachment Error executing REST:: No Bind Param Name for Value: "+s[e]),new Error("Attachment Error executing REST:: No Bind Param Name for Value: "+s[e]);p[i[e]]=s[e]}0!==Object.keys(p).length&&(c=c.parameters(p)),n&&(c=c.body(n)),r&&(c=c.responseBodyFormat(r)),l?c=d?c.initConfiguration({headers:d,signal:l.signal}):c.initConfiguration({signal:l.signal}):d&&(c=c.initConfiguration({headers:d}));return c.fetch().catch(e=>{throw console.error(e),e})}static getEndpointUrl(e,t,i,s){let n=a.getEndpoint(e);const r={};Object.assign(r,t);for(let e=0;i&&s&&e<i.length&&e<s.length;e++)if(s[e]){if(!i[e])throw o.warn("Attachment Error executing REST:: No Bind Param Name for Value: "+s[e]),new Error("Attachment Error executing REST:: No Bind Param Name for Value: "+s[e]);r[i[e]]=s[e]}n=n.parameters(r);return n.toUrl()}static getEndpoint(e){let t=null,i=e;const o=e.indexOf(":");o>=0&&(t=e.substring(0,o),i=e.substring(o+1));let a=null;return a=t?s.get(i,{extensionId:t}):s.get(i),a}}t.RestHelperExecutor=a})),define("oj-sp/attachments-2-actions/actions/operations/BaseAttachmentUploadOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAttachmentUploadOperation=void 0;t.BaseAttachmentUploadOperation=class{setHandler(e){this.handler=e}setCancelController(e){this.cancelController=e}}})),define("oj-sp/attachments-2-actions/actions/operations/bossCommon/BossCommonCreateOperation",["require","exports","../../AttachmentActions","ojs/ojlogger"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossCommonCreateOperation=void 0;class s{static async doOperation(e){return i.AttachmentActions.isCreateLinkData(e.data)?this.doCreateLinkOperation(e.data,e):i.AttachmentActions.isCreateFileData(e.data)?this.doCreateFileOperation(e.data,e):void 0}static async doCreateLinkOperation(e,t){let i=null;const o=await this.createDocumentLink(e,t);if(o.response.ok){const s=o.response.headers.get("location"),a=s.substring(s.lastIndexOf("/")+1),n=await this.getDocument(a,t);if(n.response.ok){i={DocumentIdentifier:a,Url:n.body.url,Title:n.body.title,UpdatedDate:n.body.timeUpdated,UpdatedBy:n.body.updatedBy,CategoryName:null,CategoryCode:e.CategoryCode,Description:null}}}return Promise.resolve(i)}static async doCreateFileOperation(e,t){let i=null;const o=await this.createDocumentFile(e,t);if(o.response.ok){const s=o.response.headers.get("location"),a=s.substring(s.lastIndexOf("/")+1),n=await this.getDocument(a,t);if(n.response.ok){const o=await this.createContent(e,n.body.uploadParameters,n.body.title,a,t);if(o.response.ok){const s=await this.updateDocument(a,this.getContentName(o),this.getContentVersion(o),t);if(null==s?void 0:s.response.ok){i={DocumentIdentifier:a,ClientUploadId:null,FileContentType:n.body.mediaType,DownloadInfo:null,File:e.File,Title:n.body.title,UpdatedDate:n.body.timeUpdated,UpdatedBy:n.body.updatedBy,CategoryName:null,CategoryCode:e.CategoryCode,Description:null}}}}}return Promise.resolve(i)}static createDocumentLink(e,t){return t.createDocumentExecutor.execute({type:"WEB_PAGE",url:e.Url,title:e.Title},null,null,t.cancelController)}static createDocumentFile(e,t){return t.createDocumentExecutor.execute({type:"FILE",fileName:e.File.name,size:e.File.size,title:e.File.name,mediaType:this.mimeTypeCalculator(e.File.name,e.File.type)},null,null,t.cancelController)}static getDocument(e,t){return t.getDocumentExecutor.execute(null,[e],null,t.cancelController)}static async createContent(e,t,i,o,s){return s.uploadChunkingContext&&s.uploadChunkingContext.ChunkingUploadEnabled&&e.File.size>s.uploadChunkingContext.ChunkingMinimumFileSizeThreshold?this.createContent_chunkUpload(e,t,i,o,s):this.createContent_singleUpload(e,t,i,s)}static createContent_singleUpload(e,t,i,o){const a=new FormData;if(a.append("primaryFile",e.File),a.append("dSecurityGroup",s.ContentSecurityGroup),a.append("dDocTitle",i),a.append("dDocAccount",""),a.append("dDocType","Document"),t)for(const[e,i]of Object.entries(t))a.append(e,i);return o.uploadContentExecutor.execute(a,null,null,o.cancelController)}static async createContent_chunkUpload(e,t,i,o,a){let n=Math.ceil(e.File.size/a.uploadChunkingContext.ChunkingPreferredChunkCount),r=a.uploadChunkingContext.ChunkingPreferredChunkCount;n>a.uploadChunkingContext.ChunkingMaximumChunkSize&&(n=a.uploadChunkingContext.ChunkingMaximumChunkSize,r=Math.ceil(e.File.size/a.uploadChunkingContext.ChunkingMaximumChunkSize));let l=e.File.size%n;0===l&&(l=n);const d=crypto.randomUUID(),c=[],p=a.uploadChunkingContext.ChunkingMaximumChunkUploadAttempts&&a.uploadChunkingContext.ChunkingMaximumChunkUploadAttempts>0?a.uploadChunkingContext.ChunkingMaximumChunkUploadAttempts:3;let u=0,h=0;for(let m=0;m<r;m++){u=h,h=m===r-1?u+l:u+n;for(let n=0;n<p;n++)try{await s.createUpload_createChunk_uploadChunk(e,i,m,u,h,d,t,a,c);break}catch(e){if(n+1===p)throw e;{const e=await this.getDocument(o,a);if(!e.response.ok)throw new Error("Unable to retrieve updated upload parameters for chunk upload: "+m);t=e.body.uploadParameters}}}const m=[],g=[];for(let e=0;e<c.length;e++)m.push(c[e].name),g.push(c[e].version);const y="xFndCrIDs="+g.join()+"\nxFndCrDocNames="+m.join()+"\nxFndCrSeparator=,\nxFndCrFileSize="+e.File.size+"\nxFndCrFormat="+this.mimeTypeCalculator(e.File.name,e.File.type)+"\nxFndCrFileName="+e.File.name,f=new FormData;f.append("primaryFile",new Blob([y])),f.append("dSecurityGroup",s.ContentSecurityGroup),f.append("dDocTitle",i),f.append("dDocAccount",""),f.append("dDocType","Document"),f.append("xFndVirusScanResult","ASSEMBLE");const b=await this.getDocument(o,a);if(!b.response.ok)throw new Error("Unable to retrieve updated upload parameters for assemble upload:");if(t=b.body.uploadParameters)for(const[e,i]of Object.entries(t))f.append(e,i);return await a.uploadContentExecutor.execute(f,null,null,a.cancelController)}static async createUpload_createChunk_uploadChunk(e,t,i,o,a,n,r,l,d){const c=e.File.slice(o,a),p=new FormData;if(p.append("primaryFile",c),p.append("dSecurityGroup",s.ContentSecurityGroup),p.append("dDocTitle",t),p.append("xComments",n+"_"+i+".chunk"),p.append("dDocAccount",""),p.append("dDocType","Document"),p.append("xFndVirusScanResult","CHUNK"),r)for(const[e,t]of Object.entries(r))p.append(e,t);const u=await l.uploadContentExecutor.execute(p,null,null,l.cancelController);if(!u.response.ok)throw new Error("Failure to upload chunk - "+n+" - "+i);d.push({name:this.getContentName(u),version:this.getContentVersion(u)})}static getContentName(e){return e.body.dDocName}static getContentVersion(e){return e.body.dID}static async updateDocument(e,t,i,s){var a;let n=null;for(let r=0;r<10;r++){try{if(n=await this.updateDocumentAttempt(e,t,i,s),null===(a=n.response)||void 0===a?void 0:a.ok)break;o.info("AttachmentAction Create - update Document unsuccessful attempt "+(r+1)+".")}catch(e){o.info("AttachmentAction Create - update Document unsuccessful attempt with error "+(r+1)+".")}await this.delay(100)}return n}static async delay(e){return new Promise(t=>{setTimeout(t,e)})}static updateDocumentAttempt(e,t,i,o){return o.updateDocumentExecutor.execute({name:t,version:i},[e],null,o.cancelController)}static mimeTypeCalculator(e,t){return t&&""!=t?t:-1===e.indexOf(".")?"application/octet-stream":"application/"+e.substring(e.lastIndexOf(".")+1)}}s.ContentSecurityGroup="Attachments",t.BossCommonCreateOperation=s})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossCreateOperation",["require","exports","../BaseAttachmentUploadOperation","../bossCommon/BossCommonCreateOperation"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossCreateOperation=void 0;class s extends i.BaseAttachmentUploadOperation{constructor(e,t,i,o,s,a,n){super(),this.createDocumentExecutor=e,this.getDocumentExecutor=t,this.uploadContentExecutor=i,this.updateDocumentExecutor=o,this.createAttachmentExecutor=s,this.getAttachmentExecutor=a,this.uploadChunkingContext=n}async doOperation(e){let t=null;const i={data:e,createDocumentExecutor:this.createDocumentExecutor,getDocumentExecutor:this.getDocumentExecutor,uploadContentExecutor:this.uploadContentExecutor,updateDocumentExecutor:this.updateDocumentExecutor,cancelController:this.cancelController,uploadChunkingContext:this.uploadChunkingContext},s=await o.BossCommonCreateOperation.doOperation(i),a=await this.createAttachment(s.DocumentIdentifier,e.CategoryCode);if(!a.response.ok)throw new Error("Failure to create attachments");{const e=a.response.headers.get("location"),i=e.substring(e.lastIndexOf("/")+1),o=await this.getAttachment(i);if(!o.response.ok)throw new Error("Failure to retrieve attachments - "+i);t=s,t.AttachmentIdentifier=i,t.UpdatedDate=o.body.timeUpdated,t.UpdatedBy=o.body.updatedBy}return t}createAttachment(e,t){const i={document:{id:e}};return t&&(i.category=t),this.createAttachmentExecutor.execute(i,null,null,this.cancelController)}getAttachment(e){return this.getAttachmentExecutor.execute(null,[e],null,this.cancelController)}}t.BossCreateOperation=s})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossDeleteOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeleteOperation=void 0;t.BossDeleteOperation=class{constructor(e){this.deleteAttachmentExecutor=e}async doOperation(e){let t=null;if(this.deleteAttachmentExecutor){if(!(await this.deleteAttachmentExecutor.execute(null,[e.AttachmentIdentifier],null,null,null)).response.ok)throw new Error("Failure to delete attachments");t={AttachmentIdentifier:e.AttachmentIdentifier}}return Promise.resolve(t)}}})),define("oj-sp/attachments-2-actions/actions/operations/bossSecurity/BossDocumentsSecurity",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDocumentsSecurity=void 0;t.BossDocumentsSecurity=class{constructor(e,t,i){this.getAttachmentExecutor=e,this.bossObjectsPrefix=t,this.bossObjectsPrefixSubstitution=i||""}async getSecurityHeader(e){const t=await this.getAttachmentExecutor.toUrl([e]);let i="";if(this.bossObjectsPrefix)i=t.substring(t.indexOf(this.bossObjectsPrefix)+this.bossObjectsPrefix.length);else{const e=["/http/","/https/","http://","https://"];for(let o=0;o<e.length;o++){const s=e[o];if(t.indexOf(s)>=0){i=t.substring(t.indexOf(s)+s.length);break}}}return{"Ora-Attachment-ID":this.bossObjectsPrefixSubstitution+(i.indexOf("?")>0?i.substring(0,i.indexOf("?")):i)}}}})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossDownloadOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDownloadOperation=void 0;t.BossDownloadOperation=class{constructor(e,t,i,o,s,a){this.getAttachmentExecutor=e,this.getDocumentExecutor=t,this.getContentExecutor=i,this.getContentVersionsExecutor=o,this.getContentRevisionExecutor=s,this.getDocumentsSecurity=a}async doOperation(e){var t,i;let o=null;const s=await this.getAttachmentExecutor.execute(null,[e.AttachmentIdentifier],null,null,null);if(!s.response.ok)throw new Error("Failure to retrieve attachments - "+e.AttachmentIdentifier);{const a=null===(t=s.body.document)||void 0===t?void 0:t.id,n=await this.getDocumentsSecurity.getSecurityHeader(e.AttachmentIdentifier),r=await this.getDocumentExecutor.execute(null,[a],null,null,n);if(!r.response.ok)throw new Error("Failure to retrieve documents - "+a);{const e=r.body.name,t=r.body.version,s=null===(i=r.body.latestDocument)||void 0===i?void 0:i.id,a=r.body.downloadParameters;if(s){let i=null;const s=await this.getContentVersionsExecutor.execute(null,[e],null,null,null,a);if(!(s.response.ok&&s.body&&s.body.items))throw new Error("Failure to retrieve content versions - "+e);for(let e=0;s.body.items.length;e++){const o=s.body.items[e];if(o.dID===t){i=o.version;break}}if(!i)throw new Error("Failure to retrieve content revision identifier from versions - "+e+" : "+t);{const s=await this.getContentRevisionExecutor.execute(null,[e,i],"blob",null,null,a);if(!s.response.ok)throw new Error("Failure to retrieve content revision - "+e+" : "+t);o={Data:s.body,FileName:r.body.fileName}}}else{const t=await this.getContentExecutor.execute(null,[e],"blob",null,null,a);if(!t.response.ok)throw new Error("Failure to retrieve content - "+e);o={Data:t.body,FileName:r.body.fileName}}}}return Promise.resolve(o)}}})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossEditOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossEditOperation=void 0;t.BossEditOperation=class{constructor(e,t,i,o){this.editAttachmentExecutor=e,this.getAttachmentExecutor=t,this.editDocumentExecutor=i,this.editDocumentsSecurity=o}async doOperation(e){var t;let i=null,o=!1,s=!1;const a={};if(e.CategoryCode&&(a.category=e.CategoryCode,o=!0),o){if(!(await this.editAttachmentExecutor.execute(a,[e.AttachmentIdentifier],null,null,null)).response.ok)throw new Error("Failure to update attachments - "+e.AttachmentIdentifier);s=!0}else s=!0;if(s){let o=!1;const s={};if(e.Url&&(s.url=e.Url,o=!0),e.Title&&(s.title=e.Title,o=!0),e.Description&&(s.description=e.Description,o=!0),o){const o=await this.getAttachment(e.AttachmentIdentifier);if(!o.response.ok)throw new Error("Failure to retrieve attachments - "+e.AttachmentIdentifier);{const a=null===(t=o.body.document)||void 0===t?void 0:t.id,n=await this.editDocumentsSecurity.getSecurityHeader(e.AttachmentIdentifier);if(!(await this.editDocumentExecutor.execute(s,[a],null,null,n)).response.ok)throw new Error("Failure to update documents - "+a);i={AttachmentIdentifier:e.AttachmentIdentifier}}}else i={AttachmentIdentifier:e.AttachmentIdentifier}}return Promise.resolve(i)}getAttachment(e){return this.getAttachmentExecutor.execute(null,[e],null,null)}}})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossVersionHistoryOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossVersionHistoryOperation=void 0;t.BossVersionHistoryOperation=class{constructor(e,t,i,o){this.getAttachmentExecutor=e,this.getDocumentExecutor=t,this.getContentVersionsExecutor=i,this.getDocumentsSecurity=o}async doOperation(e){var t;let i=null;const o=await this.getAttachmentExecutor.execute(null,[e.AttachmentIdentifier],null,null,null);if(!o.response.ok)throw new Error("Failure to retrieve attachment - "+e.AttachmentIdentifier);{const s=null===(t=o.body.document)||void 0===t?void 0:t.id,a=await this.getDocumentsSecurity.getSecurityHeader(e.AttachmentIdentifier),n=await this.getDocumentExecutor.execute(null,[s],null,null,a);if(!n.response.ok)throw new Error("Failure to retrieve document - "+s);{const t=n.body.name,o=n.body.downloadParameters,s=await this.getContentVersionsExecutor.execute(null,[t],null,null,null,o);if(!s.response.ok)throw new Error("Failure to retrieve versions - "+t);{const t=[],o=s.body;if(o&&o.items)for(let e=0;e<o.items.length;e++){const i=o.items[e],s={ContentIdentifier:i.dDocName,ContentVersion:i.dID,ContentRevision:i.version,UpdatedDate:i.dInDate,UpdatedByUser:i.dDocAuthor};t.push(s)}const a={Title:n.body.title,Versions:t};i={AttachmentIdentifier:e.AttachmentIdentifier,VersionsData:a}}}}return Promise.resolve(i)}}})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossDownloadVersionOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDownloadVersionOperation=void 0;t.BossDownloadVersionOperation=class{constructor(e,t,i,o){this.getAttachmentExecutor=e,this.getDocumentExecutor=t,this.getContentRevisionExecutor=i,this.documentsSecurity=o}async doOperation(e){var t;let i=null;const o=await this.getAttachmentExecutor.execute(null,[e.AttachmentIdentifier],null,null,null);if(!o.response.ok)throw new Error("Failure to retrieve attachment - "+e.AttachmentIdentifier);{const s=null===(t=o.body.document)||void 0===t?void 0:t.id,a=await this.documentsSecurity.getSecurityHeader(e.AttachmentIdentifier),n=await this.getDocumentExecutor.execute(null,[s],null,null,a);if(!n.response.ok)throw new Error("Failure to retrieve document - "+s);{const t=n.body.name,o=n.body.downloadParameters,s=e.Version.ContentRevision,a=await this.getContentRevisionExecutor.execute(null,[t,s],"blob",null,null,o);if(!a.response.ok)throw new Error("Failure to retrieve content revision - "+t+" : "+s);i={Data:a.body,FileName:n.body.fileName}}}return Promise.resolve(i)}}})),define("oj-sp/attachments-2-actions/actions/operations/boss/BossRestoreVersionOperation",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossRestoreVersionOperation=void 0;t.BossRestoreVersionOperation=class{constructor(e,t,i,o,s){this.getAttachmentExecutor=e,this.getDocumentExecutor=t,this.createDocumentExecutor=i,this.updateAttachmentExecutor=o,this.documentsSecurity=s}async doOperation(e){var t,i,o,s;let a=null;const n=await this.getAttachmentExecutor.execute(null,[e.AttachmentIdentifier],null,null,null);if(!n.response.ok)throw new Error("Failure to retrieve attachment - "+e.AttachmentIdentifier);{const r=null===(t=n.body.document)||void 0===t?void 0:t.id,l=await this.documentsSecurity.getSecurityHeader(e.AttachmentIdentifier),d=await this.getDocumentExecutor.execute(null,[r],null,null,l);if(!d.response.ok)throw new Error("Failure to retrieve document - "+r);{let t=null;if(e.RestoreToHeadVersion)t=null===(i=d.body.latestDocument)||void 0===i?void 0:i.id;else{const i=d.body.name,a={latestDocument:{id:null!==(s=null===(o=d.body.latestDocument)||void 0===o?void 0:o.id)&&void 0!==s?s:r},name:i,version:e.Version.ContentVersion},n=await this.createDocumentExecutor.execute(a,null,null,null,l);if(!n.response.ok)throw new Error("Failure to create document - base -"+r);{const e=n.response.headers.get("location");t=e.substring(e.lastIndexOf("/")+1)}}if(t){const i={document:{id:t}};if(!(await this.updateAttachmentExecutor.execute(i,[e.AttachmentIdentifier],null,null,null)).response.ok)throw new Error("Failure to update attachment -"+e.AttachmentIdentifier);a={AttachmentIdentifier:e.AttachmentIdentifier,Version:e.Version}}}}return Promise.resolve(a)}}})),define("oj-sp/attachments-2-actions/actions/boss/BossAttachmentActions",["require","exports","../AttachmentActions","../executors/RestHelperExecutor","../operations/boss/BossCreateOperation","../operations/boss/BossDeleteOperation","../operations/bossSecurity/BossDocumentsSecurity","../operations/boss/BossDownloadOperation","../operations/boss/BossEditOperation","../operations/boss/BossVersionHistoryOperation","../operations/boss/BossDownloadVersionOperation","../operations/boss/BossRestoreVersionOperation"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossAttachmentActions=void 0;class u extends i.AttachmentActions{constructor(e,t,i,o,s,a,n){super(),this.createOp=e,this.editOp=t,this.deleteOp=i,this.downloadOp=o,this.versionHistoryOp=s,this.restoreVersionOp=a,this.downloadVersionOp=n}async create(e){i.AttachmentActions.isCreateFileData(e)&&(this.createOp.setCancelController(e.CancelController),this.createOp.setHandler(this));const t=await this.createOp.doOperation(e);return Promise.resolve(t)}static createHelperFromBaseDefinition(e,t,i,o,s,a,n,r,l,d){const c=d||"dRevisionID";return u.createHelperFromDetails(e+"/Create_documents",e+"/Get_documents","documents_id",{$fields:"url,title,timeUpdated,updatedBy,mediaType,uploadParameters"},s+"/postData",e+"/Update_documents","documents_id",e+"/Create_"+t+"_$attachments",i,e+"/Get_"+t+"_$attachments",i,o,null==l||l,e+"/Update_"+t+"_$attachments",i,o,e+"/Get_"+t+"_$attachments",Object.assign(Object.assign({},i),{$fields:"document.id"}),o,e+"/Update_documents","documents_id",e+"/Delete_"+t+"_$attachments",i,o,e+"/Get_"+t+"_$attachments",Object.assign(Object.assign({},i),{$fields:"document.id"}),o,{$fields:"name,version,fileName,downloadParameters,latestDocument.id"},s+"/getData",a,s+"/getVersion",c,{$fields:"name,version,downloadParameters,latestDocument.id"},s+"/getVersions",a,{$fields:"name,version,latestDocument.id"},e+"/Get_"+t+"_$attachments",Object.assign({},i),o,n,r)}static createHelperFromDetails(e,t,i,h,m,g,y,f,b,v,j,A,C,E,T,_,S,x,O,w,I,D,N,P,R,L,M,F,k,V,B,U,H,$,q,G,z,Y,K,W,X){const Q={ChunkingUploadEnabled:C,ChunkingMinimumFileSizeThreshold:20971520,ChunkingPreferredChunkCount:10,ChunkingMaximumChunkSize:20971520,ChunkingMaximumChunkUploadAttempts:3},J=new s.BossCreateOperation(o.RestHelperExecutor.createExecutorWithName(e),o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,h,[i]),o.RestHelperExecutor.createExecutorWithName(m),o.RestHelperExecutor.createExecutorWithBindings(g,[y]),o.RestHelperExecutor.createExecutorWithParams(f,b),o.RestHelperExecutor.createExecutorWithParamsAndBindings(v,j,[A]),Q),Z=new l.BossEditOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(E,T,[_]),o.RestHelperExecutor.createExecutorWithParamsAndBindings(S,x,[O]),o.RestHelperExecutor.createExecutorWithBindings(w,[I]),new n.BossDocumentsSecurity(o.RestHelperExecutor.createExecutorWithParamsAndBindings(z,Y,[K]),W,X)),ee=new a.BossDeleteOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(D,N,[P])),te=new r.BossDownloadOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(R,L,[M]),o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,F,[i]),o.RestHelperExecutor.createExecutorWithBindings(k,[V]),o.RestHelperExecutor.createExecutorWithBindings($,[q]),o.RestHelperExecutor.createExecutorWithBindings(B,[V,U]),new n.BossDocumentsSecurity(o.RestHelperExecutor.createExecutorWithParamsAndBindings(z,Y,[K]),W,X)),ie=new d.BossVersionHistoryOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(R,L,[M]),o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,H,[i]),o.RestHelperExecutor.createExecutorWithBindings($,[q]),new n.BossDocumentsSecurity(o.RestHelperExecutor.createExecutorWithParamsAndBindings(z,Y,[K]),W,X)),oe=new p.BossRestoreVersionOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(R,L,[M]),o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,G,[i]),o.RestHelperExecutor.createExecutorWithName(e),o.RestHelperExecutor.createExecutorWithParamsAndBindings(E,T,[_]),new n.BossDocumentsSecurity(o.RestHelperExecutor.createExecutorWithParamsAndBindings(z,Y,[K]),W,X)),se=new c.BossDownloadVersionOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(R,L,[M]),o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,H,[i]),o.RestHelperExecutor.createExecutorWithBindings(B,[V,U]),new n.BossDocumentsSecurity(o.RestHelperExecutor.createExecutorWithParamsAndBindings(z,Y,[K]),W,X));return new u(J,Z,ee,te,ie,oe,se)}}t.BossAttachmentActions=u})),define("oj-sp/attachments-2-actions/public/BossPublicAttachmentActions",["vb/types/extendedType","../actions/boss/BossAttachmentActions"],(e,t)=>class extends e{constructor(e){super(),this._init(e)}_init(e){this.actions=t.BossAttachmentActions.createHelperFromBaseDefinition(e.baseBusinessServiceName,e.baseBusinessOperationName,e.baseBusinessParams,e.attachmentParamName,e.baseContentServerServiceName,e.contentServerDocumentParamName,e.bossObjectsPrefix,e.bossObjectsPrefixSubstitution,e.chunkingEnabled)}getWritableOptions(){return{propertiesWritable:"all"}}isExtendedType(){return!0}getTypeDefinition(){return{type:{baseBusinessServiceName:"string",baseBusinessOperationName:"string",baseBusinessParams:"object",attachmentParamName:"string",baseContentServerServiceName:"string",contentServerDocumentParamName:"string",bossObjectsPrefix:"string",bossObjectsPrefixSubstitution:"string",chunkingEnabled:"boolean"},resolved:!0}}init(e,t,i){this._init(i)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t)}hoistValueObjectProperties(){return!1}create(e){return this.actions.create(e)}edit(e){return this.actions.edit(e)}delete(e){return this.actions.delete(e)}download(e){return this.actions.download(e)}versionHistory(e){return this.actions.versionHistory(e)}downloadVersion(e){return this.actions.downloadVersion(e)}restoreVersion(e){return this.actions.restoreVersion(e)}addProgressListener(e,t){return this.actions.addProgressListener(e,t)}removeProgressListener(e){return this.actions.removeProgressListener(e)}raiseFileUploadProgress(e){return this.actions.raiseFileUploadProgress(e)}}),define("oj-sp/attachments-2-actions/public/BossPublicAttachmentsView",["../view/BossAttachmentsView"],e=>{class t extends e.BossAttachmentsView{}return t}),define("oj-sp/attachments-2-actions/actions/operations/bossDeferred/BossDeferredKeyGenerator",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeferredKeyGenerator=void 0;class i{static generateKey(){return this.attachmentIdentifierCounter++,"deferred_"+Date.now()+"_"+this.attachmentIdentifierCounter}static isGeneratedKey(e){return e.startsWith("deferred_")}}i.attachmentIdentifierCounter=0,t.BossDeferredKeyGenerator=i})),define("oj-sp/attachments-2-actions/actions/operations/bossDeferred/BossDeferredCreateOperation",["require","exports","../BaseAttachmentUploadOperation","../bossCommon/BossCommonCreateOperation","./BossDeferredKeyGenerator"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeferredCreateOperation=void 0;class a extends i.BaseAttachmentUploadOperation{constructor(e,t,i,o,s){super(),this.createDocumentExecutor=e,this.getDocumentExecutor=t,this.uploadContentExecutor=i,this.updateDocumentExecutor=o,this.uploadChunkingContext=s}async doOperation(e){const t={data:e,createDocumentExecutor:this.createDocumentExecutor,getDocumentExecutor:this.getDocumentExecutor,uploadContentExecutor:this.uploadContentExecutor,updateDocumentExecutor:this.updateDocumentExecutor,cancelController:this.cancelController,uploadChunkingContext:this.uploadChunkingContext},i=await o.BossCommonCreateOperation.doOperation(t);return i.AttachmentIdentifier=s.BossDeferredKeyGenerator.generateKey(),i}}t.BossDeferredCreateOperation=a})),define("oj-sp/attachments-2-actions/actions/operations/bossDeferred/BossDeferredDownloadOperation",["require","exports","./BossDeferredKeyGenerator"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeferredDownloadOperation=void 0;t.BossDeferredDownloadOperation=class{constructor(e,t,i){this.getDocumentExecutor=e,this.getContentExecutor=t,this.getDocumentsSecurity=i}async doOperation(e){let t=null;const o=e.DocumentIdentifier;let s=null;i.BossDeferredKeyGenerator.isGeneratedKey(e.AttachmentIdentifier)||(s=await this.getDocumentsSecurity.getSecurityHeader(e.AttachmentIdentifier));const a=await this.getDocumentExecutor.execute(null,[o],null,null,s);if(!a.response.ok)throw new Error("Failure to retrieve documents - "+o);{const e=a.body.name,i=a.body.downloadParameters,o=await this.getContentExecutor.execute(null,[e],"blob",null,null,i);if(!o.response.ok)throw new Error("Failure to retrieve content - "+e);t={Data:o.body,FileName:a.body.fileName}}return Promise.resolve(t)}}})),define("oj-sp/attachments-2-actions/actions/operations/bossDeferred/BossDeferredEditOperation",["require","exports","./BossDeferredKeyGenerator"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeferredEditOperation=void 0;t.BossDeferredEditOperation=class{constructor(e){this.editDocumentExecutor=e}async doOperation(e){let t=null,o=!1;const s={};if(e.Url&&(s.url=e.Url,o=!0),e.Title&&(s.title=e.Title,o=!0),e.Description&&(s.description=e.Description,o=!0),o)if(i.BossDeferredKeyGenerator.isGeneratedKey(e.AttachmentIdentifier)){const i=e.DocumentIdentifier;if(!(await this.editDocumentExecutor.execute(s,[i],null,null,null)).response.ok)throw new Error("Failure to update documents - "+i);t={AttachmentIdentifier:e.AttachmentIdentifier}}else t={AttachmentIdentifier:e.AttachmentIdentifier};else t={AttachmentIdentifier:e.AttachmentIdentifier};return Promise.resolve(t)}}})),define("oj-sp/attachments-2-actions/actions/boss/BossDeferredAttachmentActions",["require","exports","../AttachmentActions","../executors/RestHelperExecutor","../operations/bossDeferred/BossDeferredCreateOperation","../operations/bossDeferred/BossDeferredDownloadOperation","../operations/bossDeferred/BossDeferredEditOperation","../operations/bossSecurity/BossDocumentsSecurity"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeferredAttachmentActions=void 0;class l extends i.AttachmentActions{constructor(e,t,i){super(),this.createDeferredOp=e,this.editOp=t,this.downloadOp=i}async create(e){let t=null;return i.AttachmentActions.isCreateFileData(e)&&(this.createDeferredOp.setCancelController(e.CancelController),this.createDeferredOp.setHandler(this)),t=await this.createDeferredOp.doOperation(e),Promise.resolve(t)}async delete(e){const t={AttachmentIdentifier:e.AttachmentIdentifier};return Promise.resolve(t)}static createHelperFromBaseDefinition(e,t,i,o,s,a,n,r,d){return l.createHelperFromDetails(e+"/Create_documents",e+"/Get_documents","documents_id",{$fields:"url,title,timeUpdated,updatedBy,mediaType,uploadParameters"},t+"/postData",e+"/Update_documents","documents_id",null==o||o,e+"/Update_documents","documents_id",{$fields:"name,fileName,downloadParameters"},t+"/getData",i,e+"/Get_"+s+"_$attachments",Object.assign({},a),n,r,d)}static createHelperFromDetails(e,t,i,d,c,p,u,h,m,g,y,f,b,v,j,A,C,E){const T={ChunkingUploadEnabled:h,ChunkingMinimumFileSizeThreshold:20971520,ChunkingPreferredChunkCount:10,ChunkingMaximumChunkSize:20971520,ChunkingMaximumChunkUploadAttempts:3},_=new s.BossDeferredCreateOperation(o.RestHelperExecutor.createExecutorWithName(e),o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,d,[i]),o.RestHelperExecutor.createExecutorWithName(c),o.RestHelperExecutor.createExecutorWithBindings(p,[u]),T),S=new n.BossDeferredEditOperation(o.RestHelperExecutor.createExecutorWithBindings(m,[g])),x=new a.BossDeferredDownloadOperation(o.RestHelperExecutor.createExecutorWithParamsAndBindings(t,y,[i]),o.RestHelperExecutor.createExecutorWithBindings(f,[b]),new r.BossDocumentsSecurity(o.RestHelperExecutor.createExecutorWithParamsAndBindings(v,j,[A]),C,E));return new l(_,S,x)}}t.BossDeferredAttachmentActions=l})),define("oj-sp/attachments-2-actions/public/BossPublicDeferredAttachmentActions",["vb/types/extendedType","../actions/boss/BossDeferredAttachmentActions"],(e,t)=>class extends e{constructor(e){super(),this._init(e)}_init(e){this.actions=t.BossDeferredAttachmentActions.createHelperFromBaseDefinition(e.baseBusinessServiceName,e.baseContentServerServiceName,e.contentServerDocumentParamName,e.chunkingEnabled,e.baseBusinessOperationName,e.baseBusinessParams,e.attachmentParamName,e.bossObjectsPrefix,e.bossObjectsPrefixSubstitution)}getWritableOptions(){return{propertiesWritable:"all"}}isExtendedType(){return!0}getTypeDefinition(){return{type:{baseBusinessServiceName:"string",baseContentServerServiceName:"string",contentServerDocumentParamName:"string",chunkingEnabled:"boolean",baseBusinessOperationName:"string",baseBusinessParams:"object",attachmentParamName:"string",bossObjectsPrefix:"string",bossObjectsPrefixSubstitution:"string"},resolved:!0}}init(e,t,i){this._init(i)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t)}hoistValueObjectProperties(){return!1}create(e){return this.actions.create(e)}edit(e){return this.actions.edit(e)}delete(e){return this.actions.delete(e)}download(e){return this.actions.download(e)}addProgressListener(e,t){return this.actions.addProgressListener(e,t)}removeProgressListener(e){return this.actions.removeProgressListener(e)}raiseFileUploadProgress(e){return this.actions.raiseFileUploadProgress(e)}}),define("oj-sp/attachments-2-actions/transaction/BossDeferredAttachmentTransaction",["require","exports","../actions/executors/RestHelperExecutor","../actions/operations/bossSecurity/BossDocumentsSecurity"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossDeferredAttachmentTransaction=void 0;class s{constructor(e,t,i){this.createAttachmentOp=e,this.editAttachmentOp=t,this.deleteAttachmentOp=i}async completeAttachments(e){const t=e.getSubmittableItems();for(let i=0;i<t.length;i++){const o=t[i];if("add"===o.operation){e.setItemStatus(o,"submitting",null,null);const t={DocumentIdentifier:o.item.data.documentId,CategoryCode:o.item.data.categoryCode};let i=null;const s=await this.createAttachmentOp.doOperation(t).catch(e=>(i={detail:e.message,severity:"error",summary:"Error completing attachment creation"},null));o.item.data.id=null==s?void 0:s.AttachmentIdentifier,e.setItemStatus(o,i?"unsubmitted":"submitted",i,null==s?void 0:s.AttachmentIdentifier)}else if("update"===o.operation){e.setItemStatus(o,"submitting",null,null);const t={AttachmentIdentifier:o.item.data.id,DocumentIdentifier:o.item.data.documentId,Title:o.item.data.title,Description:o.item.data.description,Url:o.item.data.url,CategoryCode:o.item.data.categoryCode};let i=null;this.editAttachmentOp.doOperation(t).catch(e=>(i={detail:e.message,severity:"error",summary:"Error completing attachment edit"},null)),e.setItemStatus(o,i?"unsubmitted":"submitted",i,null)}else if("remove"===o.operation){e.setItemStatus(o,"submitting",null,null);const t={AttachmentIdentifier:o.item.metadata.key};let i=null;this.deleteAttachmentOp.doOperation(t).catch(e=>(i={detail:e.message,severity:"error",summary:"Error completing attachment delete"},null)),e.setItemStatus(o,i?"unsubmitted":"submitted",i,null)}}}static createHelperFromBaseDefinition(e,t,i,o,a,n,r,l){return s.createHelperFromDetails(e+"/Create_documents",e+"/Get_documents","documents_id",a+"/postData",e+"/Update_documents","documents_id",e+"/Create_"+t+"_$attachments",i,e+"/Get_"+t+"_$attachments",i,o,e+"/Update_"+t+"_$attachments",i,o,e+"/Get_"+t+"_$attachments",Object.assign(Object.assign({},i),{$fields:"document.id"}),o,e+"/Update_documents","documents_id",e+"/Delete_"+t+"_$attachments",i,o,e+"/Get_"+t+"_$attachments",Object.assign(Object.assign({},i),{$fields:"document.id"}),o,{$fields:"name,fileName"},a+"/getData",n,e+"/Get_"+t+"_$attachments",Object.assign({},i),o,r,l)}static createHelperFromDetails(e,t,l,d,c,p,u,h,m,g,y,f,b,v,j,A,C,E,T,_,S,x,O,w,I,D,N,P,R,L,M,F,k){const V=new a(i.RestHelperExecutor.createExecutorWithParams(u,h),i.RestHelperExecutor.createExecutorWithParamsAndBindings(m,g,[y])),B=new n(i.RestHelperExecutor.createExecutorWithParamsAndBindings(f,b,[v]),i.RestHelperExecutor.createExecutorWithParamsAndBindings(j,A,[C]),i.RestHelperExecutor.createExecutorWithBindings(E,[T]),new o.BossDocumentsSecurity(i.RestHelperExecutor.createExecutorWithParamsAndBindings(R,L,[M]),F,k)),U=new r(i.RestHelperExecutor.createExecutorWithParamsAndBindings(_,S,[x]));return new s(V,B,U)}}t.BossDeferredAttachmentTransaction=s;class a{constructor(e,t){this.createAttachmentExecutor=e,this.getAttachmentExecutor=t}async doOperation(e){let t=null;const i={document:{id:e.DocumentIdentifier}};e.CategoryCode&&(i.category=e.CategoryCode);const o=await this.createAttachmentExecutor.execute(i,null,null,null);if(!o.response.ok)throw new Error("Failure to create attachments");{const e=o.response.headers.get("location");t={AttachmentIdentifier:e.substring(e.lastIndexOf("/")+1)}}return Promise.resolve(t)}}class n{constructor(e,t,i,o){this.editAttachmentExecutor=e,this.getAttachmentExecutor=t,this.editDocumentExecutor=i,this.editDocumentsSecurity=o}async doOperation(e){var t;let i=null,o=!1,s=!1;const a={};if(e.CategoryCode&&(a.category=e.CategoryCode,o=!0),o){if(!(await this.editAttachmentExecutor.execute(a,[e.AttachmentIdentifier],null,null,null)).response.ok)throw new Error("Failure to update attachments - "+e.AttachmentIdentifier);s=!0}else s=!0;if(s){let o=!1;const s={};if(e.Url&&(s.url=e.Url,o=!0),e.Title&&(s.title=e.Title,o=!0),e.Description&&(s.description=e.Description,o=!0),o){let o=e.DocumentIdentifier;if(!o){const i=await this.getAttachment(e.AttachmentIdentifier);if(!i.response.ok)throw new Error("Failure to retrieve attachments - "+e.AttachmentIdentifier);o=null===(t=i.body.document)||void 0===t?void 0:t.id}const a=await this.editDocumentsSecurity.getSecurityHeader(e.AttachmentIdentifier);if(!(await this.editDocumentExecutor.execute(s,[o],null,null,a)).response.ok)throw new Error("Failure to update documents - "+o);i={AttachmentIdentifier:e.AttachmentIdentifier,DocumentIdentifier:o}}else i={AttachmentIdentifier:e.AttachmentIdentifier,DocumentIdentifier:e.DocumentIdentifier}}return Promise.resolve(i)}getAttachment(e){return this.getAttachmentExecutor.execute(null,[e],null,null)}}class r{constructor(e){this.deleteAttachmentExecutor=e}async doOperation(e){let t=null;if(this.deleteAttachmentExecutor){if(!(await this.deleteAttachmentExecutor.execute(null,[e.AttachmentIdentifier],null,null,null)).response.ok)throw new Error("Failure to delete attachments");t={AttachmentIdentifier:e.AttachmentIdentifier}}return Promise.resolve(t)}}})),define("oj-sp/attachments-2-actions/transaction/BossDeferredAttachmentTransactionType",["vb/types/extendedType","./BossDeferredAttachmentTransaction"],(e,t)=>class extends e{constructor(e){super(),this._init(e)}_init(e){this.attachmentTransaction=t.BossDeferredAttachmentTransaction.createHelperFromBaseDefinition(e.baseBusinessServiceName,e.baseBusinessOperationName,e.baseBusinessParams,e.attachmentParamName,e.baseContentServerServiceName,e.contentServerDocumentParamName,e.bossObjectsPrefix,e.bossObjectsPrefixSubstitution)}getWritableOptions(){return{propertiesWritable:"all"}}isExtendedType(){return!0}getTypeDefinition(){return{type:{baseBusinessServiceName:"string",baseBusinessOperationName:"string",baseBusinessParams:"object",attachmentParamName:"string",baseContentServerServiceName:"string",contentServerDocumentParamName:"string",bossObjectsPrefix:"string",bossObjectsPrefixSubstitution:"string"},resolved:!0}}init(e,t,i){this._init(i)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t)}hoistValueObjectProperties(){return!1}completeAttachments(e){return this.attachmentTransaction.completeAttachments(e)}}),define("css!oj-sp/bottom-drawer-template/bottom-drawer-template-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/bottom-drawer-template/bottom-drawer-template",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojresponsiveknockoututils","ojs/ojlogger","ojs/ojtranslation","ojs/ojvcomponent","preact","css!./bottom-drawer-template-styles","ojs/ojbutton","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BottomDrawerTemplate=void 0;let l=class extends r.Component{constructor(e){var t;super(e),this.state={screenRange:null},this.handleClose=e=>{this.setDrawerState("closed")},this.setDrawerState=e=>{var t,i;null===(i=(t=this.props).onDrawerStateChanged)||void 0===i||i.call(t,e)},this.setDiscoverability=e=>{var t,i;null===(i=(t=this.props).onDiscoverabilityChanged)||void 0===i||i.call(t,e)},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,n.getUniqueId)(),this.initResponsiveUtils()}componentDidMount(){this.registerExpandSwipeListener(),this.resetExpandState()}componentDidUpdate(e){var t,i,o;(null===(t=this.props.displayOptions)||void 0===t?void 0:t.drawerMode)!==(null===(i=e.displayOptions)||void 0===i?void 0:i.drawerMode)&&this.resetExpandState(),this.props.drawerState!==e.drawerState&&this.base&&this.base.dispatchEvent(new Event("resize")),"on"===this.props.discoverability&&"fixed"!==(null===(o=this.props.displayOptions)||void 0===o?void 0:o.drawerMode)&&s.warn("[bottom-drawer-template] the discoverability property only works when the drawer mode is fixed")}render(e){const{drawerState:t,discoverability:i,displayOptions:o}=e,s=this.state.screenRange||"";return(0,r.h)("div",{class:`oj-sp-bottom-drawer-template-parent-container oj-bg-neutral-10 oj-flex\n        oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap \n        oj-sp-bottom-drawer-template-state-${t} \n        oj-sp-bottom-drawer-template-${s}\n        ${"on"===i&&"fixed"===(null==o?void 0:o.drawerMode)?" peek ":""}`},this.renderHeader(),"minimized"!==t&&this.renderBody())}renderHeader(){const{header:e,drawerState:t}=this.props;return(0,r.h)("div",{class:"oj-sp-bottom-drawer-template-header oj-sp-template-wrapper oj-bg-neutral-10 \n        oj-flex oj-sm-flex-0 oj-flex-item oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap\n        "+("minimized"!==t?"oj-sm-padding-4x-horizontal":"")},this.renderExpandHandle(),"minimized"!==t&&this.isTitleVisible()&&(0,r.h)("div",{class:"oj-sp-bottom-drawer-template-header-top oj-flex oj-sm-flex-0 oj-flex-item oj-sm-flex-wrap-nowrap oj-sm-align-items-center"},this.renderHeaderText(),this.renderHeaderActions()),"minimized"!==t&&(0,r.h)("div",{class:"oj-flex oj-sm-flex-0 oj-flex-item oj-sm-flex-wrap-nowrap oj-sm-align-items-center"},(0,r.h)("div",{class:"oj-flex-item oj-sm-width-4/5 "+(!this.isTitleVisible()&&"oj-sm-margin-4x-vertical")},e),!this.isTitleVisible()&&this.renderHeaderActions()))}renderExpandHandle(){const{displayOptions:e,drawerState:t}=this.props;return"fixed"===e.drawerMode&&(0,r.h)("div",{class:"oj-sp-bottom-drawer-expand-handle-bar oj-bg-neutral-10 oj-flex oj-sm-justify-content-center oj-sm-align-items-bottom"},(0,r.h)("oj-button",{class:"oj-sp-bottom-drawer-expand-handle-button oj-flex-item",chroming:"borderless",display:"icons",title:"minimized"===t?this.res.expandDrawer:this.res.collapseDrawer,"aria-label":"minimized"===t?a.applyParameters(this.res.accDrawerExpand,{0:this.props.drawerTitle}):a.applyParameters(this.res.accDrawerCollapse,{0:this.props.drawerTitle}),onojAction:()=>this.onExpandDrawerAction()}),(0,r.h)("span",{class:"oj-sp-bottom-drawer-expand-handle oj-sm-margin-2x-top oj-bg-neutral-170"}))}renderBody(){const{children:e}=this.props;return e&&(0,r.h)("div",{class:"oj-sp-bottom-drawer-template-content"},e)}renderHeaderText(){const{drawerTitle:e,drawerSubtitle:t,displayOptions:i}=this.props;return this.isTitleVisible()&&(e||t)&&(0,r.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-margin-4x-vertical"},(0,r.h)("div",{role:"heading","aria-level":2,"aria-label":e,class:"oj-sp-bottom-drawer-template-title oj-text-color-primary oj-typography-subheading-md "+this.getHeaderLineClamp(),title:e},e),(0,r.h)("span",{title:t,class:"oj-sp-bottom-drawer-template-subtitle oj-text-color-secondary oj-typography-body-sm "+this.getHeaderLineClamp()},t))}isTitleVisible(){const{displayOptions:e}=this.props;return"on"===(null==e?void 0:e.title)}isDrawerClosable(){const{displayOptions:e}=this.props;return"closable"===e.drawerMode}renderHeaderActions(){const{displayOptions:e}=this.props,t="maximized"===this.props.drawerState,i="sm"!==this.screenRange()&&"on"===e.maximize;return(i||this.isDrawerClosable())&&(0,r.h)("div",{class:"oj-flex-item oj-flex-bar oj-sm-margin-4x-vertical"},(0,r.h)("oj-toolbar",{class:"oj-sp-bottom-drawer-template-toolbar oj-flex-bar-end oj-sm-align-items-center oj-sm-flex-wrap-nowrap"},i&&(0,r.h)("oj-button",{class:"oj-sp-bottom-drawer-template-maximize-button oj-button-sm",chroming:"borderless",display:"icons",label:t?this.res.minimizeDrawer:this.res.maximizeDrawer,"aria-label":t?a.applyParameters(this.res.accDrawerMinimize,{0:this.props.drawerTitle}):a.applyParameters(this.res.accDrawerMaximize,{0:this.props.drawerTitle}),onojAction:()=>this.onMaximizeDrawerAction()},(0,r.h)("span",{slot:"startIcon",class:t?"oj-ux-ico-minimize":"oj-ux-ico-maximize"})),this.isDrawerClosable()&&(0,r.h)("oj-button",{class:"oj-sp-bottom-drawer-template-close-button oj-button-sm",chroming:"borderless",display:"icons",label:this.res.close,"aria-label":a.applyParameters(this.res.accDrawerClose,{0:this.props.drawerTitle}),onojAction:this.handleClose},(0,r.h)("span",{slot:"startIcon",class:"oj-ux-ico-close"}))))}resetExpandState(){var e;const t=null===(e=this.props.displayOptions)||void 0===e?void 0:e.drawerMode,i=this.props.drawerState;this.setDrawerState("fixed"===t?"minimized":"closed"===i?"closed":"auto")}onExpandDrawerAction(){const{displayOptions:e,drawerState:t,discoverability:i}=this.props;"fixed"===(null==e?void 0:e.drawerMode)?("on"===i&&this.setDiscoverability("off"),"sm"===this.screenRange()?this.setDrawerState("minimized"===t?"maximized":"minimized"):this.setDrawerState("minimized"===t?"auto":"minimized")):s.error("[bottom-drawer-template] onExpandDrawerAction called and drawerMode is not fixed")}getHeaderLineClamp(){return"sm"===this.screenRange()?"oj-line-clamp-2":"oj-line-clamp-1"}onMaximizeDrawerAction(){const{drawerState:e}=this.props,t="auto"===e?"maximized":"auto";this.setDrawerState(t)}onMobileExpandBarSwipeUp(){this.setDrawerState("maximized")}onMobileExpandBarSwipeDown(){const e=this.props.displayOptions&&this.props.displayOptions.drawerMode;this.setDrawerState("fixed"===e?"minimized":"closed")}registerExpandSwipeListener(){this.onSwipeGesture(this.base.querySelector(".oj-sp-bottom-drawer-template-header"),e=>{var t;"sm"===this.screenRange()&&"fixed"===(null===(t=this.props.displayOptions)||void 0===t?void 0:t.drawerMode)&&("up"===e?this.onMobileExpandBarSwipeUp():this.onMobileExpandBarSwipeDown())})}initResponsiveUtils(){this.screenRange=o.createScreenRangeObservable(),this.setState({screenRange:this.screenRange()}),this.screenRange.subscribe(e=>{this.setState({screenRange:e})})}onSwipeGesture(e,t){let i=null,o=null;e.addEventListener("touchstart",e=>{e&&e.touches&&e.touches.item(0)&&(i=e.touches.item(0).clientY,o=Date.now())},!1),e.addEventListener("touchend",e=>{i=null,o=null},!1),e.addEventListener("touchmove",e=>{const o="number"==typeof i&&e&&e.touches&&e.touches.item(0);if(o){const e=o.clientY-i;Math.abs(e)>50&&t(e<0?"up":"down")}},!1)}};l.defaultProps={displayOptions:{drawerMode:"closable",title:"on",maximize:"off"}},l._metadata={properties:{drawerTitle:{type:"string"},drawerSubtitle:{type:"string"},drawerState:{type:"string",enumValues:["closed","auto","maximized","minimized"],writeback:!0},discoverability:{type:"string",enumValues:["on","off"],writeback:!0},displayOptions:{type:"object",properties:{drawerMode:{type:"string",enumValues:["fixed","closable"]},title:{type:"string",enumValues:["on","off"]},maximize:{type:"string",enumValues:["on","off"]}}}},slots:{"":{},header:{}},extension:{_WRITEBACK_PROPS:["drawerState","discoverability"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},l=__decorate([(0,n.customElement)("oj-sp-bottom-drawer-template"),__metadata("design:paramtypes",[Object])],l),t.BottomDrawerTemplate=l})),define("oj-sp/bottom-drawer-template/loader",["require","exports","./bottom-drawer-template"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BottomDrawerTemplate=void 0,Object.defineProperty(t,"BottomDrawerTemplate",{enumerable:!0,get:function(){return i.BottomDrawerTemplate}})})),define("oj-sp/calendar/components/CalendarsPanel",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojbutton"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarsPanel=t.EventColors=void 0,t.EventColors=[{key:"blue",color:"rgb(var(--oj-sp-rw-blue-rgb-20))",dvtColor:"#245D63"},{key:"sienna",color:"rgb(var(--oj-sp-rw-sienna-rgb-30))",dvtColor:"#DE7F11"},{key:"plum",color:"rgb(var(--oj-sp-rw-plum-rgb-30))",dvtColor:"#4E4137"},{key:"rose",color:"rgb(var(--oj-sp-rw-rose-rgb-30))",dvtColor:"#83401E"},{key:"pine",color:"rgb(var(--oj-sp-rw-pine-rgb-30))",dvtColor:"#317A45"},{key:"teal",color:"rgb(var(--oj-sp-rw-teal-rgb-30))",dvtColor:"#5FA2BA"}],t.CalendarsPanel=function(e){var s;const a=Object.assign({},o),n=t=>{const i=[...e.visibleCalendars];if(i.includes(t)){const e=i.indexOf(t);i.splice(e,1)}else i.push(t);e.onCalendarProviderAction(i)},r=o=>{var s,r;if(o.displayName&&o.name&&o.color)return(0,i.h)("li",{onKeyDown:e=>((e,t)=>{"Enter"!==e.code&&"Space"!==e.code||!t||(n(t),e.preventDefault(),e.stopPropagation())})(e,o.name)},(0,i.h)("oj-list-item-layout",{class:"oj-sp-calendar-fiter-list-item"},(0,i.h)("div",{class:"oj-sp-calendar-provider-color",slot:"leading",style:{"background-color":""+t.EventColors.find(e=>e.key===o.color).color}}),(0,i.h)("span",{class:"oj-typography-body-md"},o.displayName),(0,i.h)("div",{slot:"action"},(0,i.h)("oj-button",{id:`calendarProvider_${o.name}_actionButton`,display:"icons",chroming:"borderless",onojAction:()=>n(o.name)},(null===(s=e.visibleCalendars)||void 0===s?void 0:s.includes(o.name))?a.hide:a.show,(0,i.h)("span",{slot:"startIcon",class:(null===(r=e.visibleCalendars)||void 0===r?void 0:r.includes(o.name))?"oj-ux-ico-view":"oj-ux-ico-view-hide"})))))};return(0,i.h)("div",{class:"oj-sp-calendar-side-panel-content oj-sp-calendar-filter-item"},(0,i.h)("oj-list-view",{"aria-label":a.calendarsList,class:"oj-sp-calendar-filter-list-view","selection-mode":"none"},(0,i.h)("ul",null,null===(s=e.data)||void 0===s?void 0:s.map(e=>r(e)))))}})),define("oj-sp/calendar/components/CalendarDrawerFooter",["require","exports","preact","preact/hooks","ojs/ojtoolbar","ojs/ojbutton"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarDrawerFooter=void 0;t.CalendarDrawerFooter=e=>{const t=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const{current:e}=t,i=new ResizeObserver(()=>a(e));return i.observe(e),()=>{i.disconnect()}}),(0,i.h)("div",{ref:t,class:"oj-sm-padding-3x-top oj-bg-neutral-10 oj-sp-calendar-drawer-footer oj-sp-calendar-drawer-footer-sticky"},e.detailActions&&e.detailActions.length>0&&(0,i.h)("oj-toolbar",{class:"oj-sm-only-width-full oj-flex-item\n          oj-clickthrough-disabled oj-flex oj-sm-only-flex-direction-column\n          oj-md-flex-items-initial oj-sm-flex-wrap-nowrap oj-md-flex-items-0"},s(e)))};const s=e=>{const{detailActions:t}=e;return n(t).map(o=>(0,i.h)("oj-button",{id:e.uid+"_detailAction_"+o.id,disabled:"disabled"===o.display,class:"oj-sp-calendar-event-detail-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0\n          oj-button-sm oj-sm-only-margin-3x-bottom",display:"all",chroming:o.id!==t[t.length-1].id?"solid":"outlined",onojAction:()=>{var t;return null===(t=e.onEventDetailAction)||void 0===t?void 0:t.call(e,{actionId:o.id})}},(0,i.h)("span",null,o.label)))},a=e=>{if(!e)return;const t=e.getBoundingClientRect().height;e.parentElement.style.setProperty("--oj-sp-calendar-panel-footer-height",t+"px")},n=e=>e&&e.length>0?e.slice(0,3).filter(({display:e})=>"off"!==e).reverse():[]})),define("oj-sp/calendar/components/CalendarDrawer",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojconverter-datetime","./CalendarsPanel","./CalendarDrawerFooter","oj-sp/common-util/common-util"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarDrawer=void 0;const l={formatType:"time",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},d={formatType:"date",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},c={formatType:"time",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},p={dateFormat:"full",formatType:"date",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};t.CalendarDrawer=e=>{var t;const u=Object.assign({},o),h=e.calendarEvent,m=e.eventDetailActions,g=e.showEventDetails&&h?null===(t=e.eventDetailTemplate)||void 0===t?void 0:t.call(e,h):null,y=e.showCalendarProviders?(0,i.h)(a.CalendarsPanel,{visibleCalendars:e.visibleCalendars,onCalendarProviderAction:e.onCalendarProviderAction,data:e.calendarProviders}):null,f=e.eventDetailActions&&!e.showCalendarProviders?(0,i.h)(n.CalendarDrawerFooter,{uid:e.uid,onEventDetailAction:e.onEventDetailAction,detailActions:m}):null;return(0,i.h)("oj-sp-general-drawer-template",{id:e.uid+"_calendar_general_drawer","drawer-size":"sm","drawer-title":e.showEventDetails&&h?h.eventTitle:u.calendarsList,"drawer-subtitle":e.showEventDetails&&h?((e,t)=>{const i=new Date(e),o=new s.IntlDateTimeConverter((0,r.getDateFormatPattern)()?d:p),a=new s.IntlDateTimeConverter((0,r.getTimeFormatPattern)()?l:c).format(i.toISOString()),n=o.format(i.toISOString());return t?""+n:`${n}, ${a}`})(h.start,h.allDay):"",onspClose:e.closeDrawer,"data-oj-binding-provider":"preact"},(0,i.h)("div",{key:e.uid+"_calendar_general_drawer_content",class:"oj-sp-calendar-panel-content-container"},g,y,f))}})),define("oj-sp/calendar/components/CalendarToolbar",["require","exports","preact","preact/hooks","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","oj-sp/internal-resources/components/collection-toolbars/loader","oj-sp/internal-resources/components/collection-toolbars/action-converter-utils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarToolbar=void 0;const l=Object.assign({},r),d=[{id:"calendar_create",label:l.createEvent,display:"on",actionType:s.ActionType.PRIMARY,elementType:s.ElementType.BUTTON_ICON,icon:{class:"oj-ux-ico-plus",display:"icons",slot:"startIcon"}},{id:"calendar_previous",label:l.previous,display:"on",positionFixed:!0,actionType:s.ActionType.PRIMARY,elementType:s.ElementType.BUTTON_ICON,icon:{class:"oj-ux-ico-chevron-left",display:"icons",slot:"startIcon"}},{id:"calendar_next",label:l.next,display:"on",positionFixed:!0,actionType:s.ActionType.PRIMARY,elementType:s.ElementType.BUTTON_ICON,icon:{class:"oj-ux-ico-chevron-right",display:"icons",slot:"startIcon"}},{id:"calendar_today",label:l.today,display:"on",actionType:s.ActionType.PRIMARY,elementType:s.ElementType.BUTTON},{id:"calendar_providers",label:l.calendarsList,display:"on",actionType:s.ActionType.PRIMARY,elementType:s.ElementType.BUTTON}],c={label:"functional",classes:"oj-sp-calendar-functional-toolbar",controlModels:[],controlsSize:s.ControlSize.SMALL,responsiveOrder:2},p={id:"calendar_views",label:l.accCalendarViews,display:"on",actionType:s.ActionType.CONTEXT,elementType:s.ElementType.BUTTON_SET,selectedActionId:"month",actions:[{id:"month",label:l.month,display:"on",actionType:s.ActionType.CONTEXT,elementType:s.ElementType.BUTTON_SET_OPTION},{id:"week",label:l.week,display:"on",actionType:s.ActionType.CONTEXT,elementType:s.ElementType.BUTTON_SET_OPTION},{id:"day",label:l.day,display:"on",actionType:s.ActionType.CONTEXT,elementType:s.ElementType.BUTTON_SET_OPTION},{id:"list",label:l.listView,display:"on",actionType:s.ActionType.CONTEXT,elementType:s.ElementType.BUTTON_SET_OPTION}]},u={label:"layout",classes:"oj-sp-calendar-layout-toolbar",controlModels:[],controlsSize:s.ControlSize.SMALL,responsiveOrder:1};t.CalendarToolbar=e=>{const[t,r]=(0,o.useState)(u),[h,m]=(0,o.useState)(c);(0,o.useEffect)(()=>{y(),f(),v()},[]),(0,o.useEffect)(()=>{p.selectedActionId=e.selectedView?e.selectedView:"month",y(),v(),y()},[e.selectedView]),(0,o.useEffect)(()=>{f()},[e.createEvent,e.readonly]);const g=t=>{let i=t?l.previousMonth:l.nextMonth;if(e.selectedView)switch(e.selectedView){case"week":case"list":i=t?l.previousWeek:l.nextWeek;break;case"day":i=t?l.previousDay:l.nextDay}return i},y=()=>{d.find(e=>"calendar_previous"===e.id).label=g(!0);d.find(e=>"calendar_next"===e.id).label=g(!1)},f=()=>{const t=[];let i=[];i=e.createEvent&&("off"===e.createEvent||e.readonly)?d.filter(e=>"calendar_create"!==e.id):d,t.push(...i),t.push(n.getMoreActionsControlModel([],l.moreActions,s.ActionType.MORE_ACTIONS,s.ElementType.MENU_BUTTON)),m(Object.assign(Object.assign({},c),{controlModels:t}))},b=()=>{const e=n.getMoreActionsControlModel([],l.accCalendarViews,s.ActionType.LAYOUT_ACTIONS,s.ElementType.MENU_BUTTON_END_ICON);return e.icon=n.getButtonIconType("oj-ux-ico-calendar-month",s.ElementType.MENU_BUTTON_END_ICON),e},v=()=>{const e=[];e.push(p),e.push(b()),r(Object.assign(Object.assign({},u),{controlModels:e}))};return(0,i.h)(a.CollectionToolbars,{componentId:e.componentId+"_toolbarActions",componentBaseCssClass:"oj-sp-calendar",functionalToolbarModel:h,layoutToolbarModel:t,onSpAction:t=>{var i;if("context"!==t.actionType)return"calendar_create"===t.actionId?void e.onCreateEvent():"calendar_providers"===t.actionId?void e.onOpenCalendarsPanel():void e.onNavigate(t.actionId);const o=[];p.selectedActionId=t.actionId,o.push(p),o.push(b()),r(Object.assign(Object.assign({},u),{controlModels:o})),null===(i=e.onSelectedViewChanged)||void 0===i||i.call(e,t.actionId)}})}})),define("oj-sp/calendar/components/EmptyState",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyState=void 0;t.EmptyState=e=>{const t=Object.assign({},o);return(0,i.h)("div",{class:"oj-sp-calendar-no-data-wrapper"},(0,i.h)("oj-sp-empty-state",{id:e.uid+"_calendar_empty_state",primaryText:e.primaryText?e.primaryText:t.noEventsMessage,primaryAction:{label:t.createEvent,display:e.primaryActionDisplay},onspPrimaryAction:()=>{const t=new Date(e.currentDate.toISOString()),i=new Date(t.setDate(e.currentDate.getDate()-e.currentDate.getDay()));e.onCreateEvent({startTime:new Date(i).toISOString(),endTime:null,allDay:!1})},"display-options":"[[ {'layout': 'other'} ]]"}))}})),define("oj-sp/calendar/utils/CalendarDateRangeTransform",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarDateRangeTransform=void 0,function(e){e.Add="add",e.Substract="substract"}(i||(i={}));t.CalendarDateRangeTransform=class{getInclusiveDateRange(e,t,o){let s=t;return o&&(s=this.getEndDate(e,t,i.Substract)),{start:e,end:s,allDay:o}}getTranformDateRange(e,t,o){let s=t;return o&&(s=this.getEndDate(e,t,i.Add)),{start:e,end:s,allDay:o}}getEndDate(e,t,o){let s=t;const a=t.getTime()-e.getTime();return Math.floor(a/864e5)>0&&(s=i.Add===o?new Date(t.getTime()+864e5):i.Substract===o?new Date(t.getTime()-864e5):null),s}}})),define("oj-sp/calendar/components/CalendarComponent",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","ojs/ojconverter-datetime","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","./CalendarsPanel","./EmptyState","../utils/CalendarDateRangeTransform","oj-sp-3rdparty-fullcalendar/main.min","oj-sp/empty-state/loader"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarComponent=void 0;const c=window.FullCalendar,p={month:"dayGridMonth",week:"timeGridWeek",day:"timeGridDay",list:"listWeek"};let u,h,m,g,y;t.CalendarComponent=e=>{var t;const f=Object.assign({},n),[b,v]=(0,o.useState)(!1),j=(0,o.useRef)(null),A=(0,o.useRef)(null),C=new d.CalendarDateRangeTransform,E={headerToolbar:!1,initialView:e.selectedViewValue&&p[e.selectedViewValue]?p[e.selectedViewValue]:"dayGridMonth",slotEventOverlap:!1,eventInteractive:!0,nowIndicator:!0,fixedWeekCount:!1,locale:(0,s.getCurrentLocale)(),direction:(0,s.getDirectionality)(),timeZone:"local",selectable:!e.readonly&&"off"!==e.createEvent,dayMaxEventRows:!0,editable:!e.readonly,selectMirror:!e.readonly&&"off"!==e.createEvent,select:t=>{const i=C.getInclusiveDateRange(t.start,t.end,t.allDay);e.onCreateEvent({startTime:i.start.toISOString(),endTime:i.end.toISOString(),allDay:i.allDay})},eventClick:e=>{I(e)},eventDataTransform:t=>{var i;const o=new Date(t.start),s=new Date(t.end),a=t.allDay,n=C.getTranformDateRange(o,s,a),l=null===(i=e.calendarProviders)||void 0===i?void 0:i.find(e=>e.name===t.calendarProvider);let d;d=l?r.EventColors.find(e=>e.key===l.color):r.EventColors.find(e=>"teal"===e.key);return{id:t.id,start:n.start.toISOString(),end:n.end.toISOString(),title:t.eventTitle,backgroundColor:d.color,calendarProvider:t.calendarProvider,allDay:!!n.allDay&&n.allDay,eventColor:d}},dayHeaderContent:e=>({html:`<span class='oj-typography-body-sm oj-typography-semi-bold oj-text-color-primary'>\n          ${e.text}\n        </span>`}),eventDidMount:e=>{D(e)},noEventsDidMount:()=>{v(!0)},noEventsWillUnmount:()=>{v(!1)},noEventsContent:()=>"",eventContent:e=>S(e),eventChange:t=>{var i;null===(i=e.onSpCalendarEventUpdate)||void 0===i||i.call(e,{eventId:t.event.id,newStartTime:t.event.startStr,newEndTime:t.event.endStr,allDay:t.event.allDay})},moreLinkDidMount:e=>{const t=e.el;t&&t.setAttribute("role","button")},moreLinkClick:e=>{y=e.jsEvent.target}},T=e.readonly||"on"!==e.createEvent?"off":"on",_=b?"off":"on",S=t=>{const i=new a.IntlDateTimeConverter({formatType:"datetime",dateFormat:"full",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),o=t.event.start,s=i.format(o.toISOString()),n=e.calendarProviders.find(e=>e.name===t.event.extendedProps.calendarProvider),r=n?n.displayName:"";let l;switch(t.view.type){case"timeGridWeek":l=t.event.allDay?L(t):M(t.event);break;case"timeGridDay":l=t.event.allDay?L(t):F(t.event);break;case"dayGridMonth":l=t.event.allDay?L(t):k(t.event);break;case"listWeek":l=V(t.event)}const d="listWeek"===t.view.type,c=t.event.allDay;return{html:`<div class='oj-sp-calendar-event-container'\n        event-id="${t.event.id}"\n        ${"listWeek"===t.view.type?"tabIndex='0'":""}\n        aria-label="${d||c?"":s+", "}${t.event.title}, ${r}">\n          ${l}\n        </div>`}},x=(e,t,i)=>{i.preventDefault();const o=j.current.querySelector(`[data-row="${e}"][data-col="${t}"]`);if("gridcell"===(null==o?void 0:o.getAttribute("role"))){const e=j.current.querySelector(`[data-row="${null==h?void 0:h.getAttribute("data-row")}"][data-col="${null==h?void 0:h.getAttribute("data-col")}"]`);null==e||e.setAttribute("tabindex","-1"),o.setAttribute("tabindex","0"),o.focus(),h=o}},O=e=>{const t=e.target.getAttribute("event-id");I(null,t),e.preventDefault(),e.stopPropagation()},w=e=>{if(e){const t=e.querySelectorAll(".fc-daygrid-event")[0];t&&t.focus()}},I=(t,i)=>{const o=i||t.event.id;"single"===e.selectionMode&&P(o),"multiple"===e.selectionMode&&R(o)},D=t=>{const i=t.event.id.toString(),o=t.el;o&&(o.setAttribute("role","button"),e.selected.includes(i)&&o.classList.add("oj-sp-calendar-event-selected"),(()=>{const e=j.current,t=e.querySelector(".fc-popover");if(t){requestAnimationFrame(()=>{const i=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=t.style.getPropertyValue("left"),a=i.x+i.width>o.x+o.width?i.x+i.width-(o.x+o.width):0,n=parseFloat(s)-a;t.style.setProperty("left",n+"px"),A.current=t,w(t)});const i=j.current.querySelector(".fc-popover-close");i&&(i.setAttribute("tabindex","0"),i.setAttribute("aria-label",f.close))}})(),N(o))},N=t=>{"day"!==e.selectedViewValue&&"week"!==e.selectedViewValue||requestAnimationFrame(()=>{const e=t.querySelector(".oj-sp-calendar-event-dayview-container-title"),i=t.querySelector(".oj-sp-calendar-event-dayview-title");if(e&&i){const t=window.getComputedStyle(e),o=window.getComputedStyle(i),s=t.getPropertyValue("height"),a=o.getPropertyValue("line-height"),n=parseFloat(s),r=parseFloat(a),l=Math.floor(n/r);i.style.webkitLineClamp=l.toString()}})},P=t=>{var i,o;let s=[];e.selected[0]===t?(s=[...e.selected],s.pop(),null===(i=e.onSelectedChanged)||void 0===i||i.call(e,{selected:s})):(s=[...e.selected],s.pop(),s.push(t),null===(o=e.onSelectedChanged)||void 0===o||o.call(e,{selected:s}))},R=t=>{var i,o;let s=[];const a=e.selected.findIndex(e=>e===t);a>=0?(s=[...e.selected],s.splice(a,1),null===(i=e.onSelectedChanged)||void 0===i||i.call(e,{selected:s})):(s=[...e.selected],s.push(t),null===(o=e.onSelectedChanged)||void 0===o||o.call(e,{selected:s}))},L=e=>{var t,i;if("listWeek"===e.view.type)return;const o="listWeek"===e.view.type?`<div class='oj-sp-calendar-event-dot-indicator' style="color: ${e.backgroundColor}"></div>`:"";return`<div class="${"listWeek"!==e.view.type?"oj-sm-padding-1x-horizontal oj-md-padding-3x-horizontal":""} oj-flex oj-sm-align-items-center oj-sm-flex-wrap-nowrap" title="${null===(t=e.event)||void 0===t?void 0:t.title}">\n        ${o}\n        <span class='oj-sp-calendar-event-content-container oj-text-color-primary'>\n          ${null===(i=e.event)||void 0===i?void 0:i.title}\n        </span>\n      </div>`},M=e=>{if(e.allDay)return;return`<div class='oj-sp-calendar-event-dayview-container oj-md-padding-1x-horizontal' title="${`${B(null==e?void 0:e.start)} - ${B(null==e?void 0:e.end)}`} - ${null==e?void 0:e.title}">\n        <div class='oj-sp-calendar-event-dayview-time-text oj-typography-body-xs oj-text-color-secondary'>\n          ${B(null==e?void 0:e.start)} - ${B(null==e?void 0:e.end)}\n        </div>\n        <div class='oj-sp-calendar-event-dayview-container-title oj-helper-overflow-wrap-anywhere oj-typography-body-sm oj-text-color-primary oj-line-clamp-4'>\n          <div class="oj-sp-calendar-event-dayview-title">\n            ${null==e?void 0:e.title}\n          </div>\n        </div>\n      </div>`},F=e=>{if(e.allDay)return;return`<div class='oj-sp-calendar-event-dayview-container oj-md-padding-1x-horizontal' title="${`${B(null==e?void 0:e.start)} - ${B(null==e?void 0:e.end)}`} - ${null==e?void 0:e.title}">\n        <div class='oj-sp-calendar-event-dayview-container-title oj-helper-overflow-wrap-anywhere oj-typography-body-sm oj-text-color-primary oj-line-clamp-4'>\n          <div class="oj-sp-calendar-event-dayview-title">\n            ${null==e?void 0:e.title}\n          </div>\n        </div>\n        <div class='oj-sp-calendar-event-dayview-time-text oj-typography-body-xs oj-text-color-secondary'>\n          ${B(null==e?void 0:e.start)} - ${B(null==e?void 0:e.end)}\n        </div>\n      </div>`},k=e=>`<div class='oj-flex oj-sm-align-items-center oj-sm-flex-wrap-nowrap' title="${B(e.start)} - ${null==e?void 0:e.title}">\n        <div class='oj-sp-calendar-event-dot-indicator' style="color: ${e.extendedProps.eventColor.dvtColor}"></div>\n        <div class='oj-sp-calendar-event-content-container'>\n          <span class="${"rtl"===(0,s.getDirectionality)()?"oj-sm-padding-1x-start":"oj-sm-padding-1x-end"}"\n            style="color: ${e.extendedProps.eventColor.dvtColor}">\n              ${B(e.start)}\n          </span>\n          <span class='oj-text-color-primary'>\n              ${e.title}\n          </span>\n        </div>\n      </div>`,V=e=>`<div class='oj-flex oj-sm-align-items-center oj-sm-flex-wrap-nowrap' title="${null==e?void 0:e.title}">\n        <div class='oj-sp-calendar-event-dot-indicator' style="${"color: "+e.extendedProps.eventColor.dvtColor}"></div>\n        <span class='oj-sp-calendar-event-content-container oj-text-color-primary oj-line-clamp-1'>\n          ${null==e?void 0:e.title}\n        </span>\n      </div>`,B=e=>{const t={formatType:"time",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},i={formatType:"time",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone};return new a.IntlDateTimeConverter((0,s.getTimeFormatPattern)()?t:i).format(new Date(e).toISOString())},U=()=>{const e=j.current.querySelector("table, .fc-scrollgrid");e&&!e.getAttribute("aria-label")&&e.setAttribute("aria-label",f.accCalendar)},H=()=>{const e=j.current.querySelector(".fc-list-table");e&&!e.getAttribute("aria-label")&&e.setAttribute("aria-label",f.accCalendar)},$=()=>{u.updateSize()},q=()=>{const t=u.getEventSources();t&&t.length>0?(t.forEach(e=>{e.remove()}),u.addEventSource(e.calendarSourceData)):u.addEventSource(e.calendarSourceData)};return(0,o.useEffect)(()=>{u=new c.Calendar(j.current,E),u.render(),q();const t=e.currentDate?e.currentDate:new Date;t&&u.gotoDate(t),U(),H(),j.current.style.setProperty("--fc-now-indicator-color","#a22c1c");const i=new ResizeObserver($);return i.observe(j.current),"month"===e.selectedViewValue&&(()=>{var e;const t=j.current.querySelectorAll('table.fc-scrollgrid-sync-table td[role="gridcell"]'),i=j.current.querySelectorAll("table.fc-scrollgrid-sync-table tbody tr");null===(e=t[0])||void 0===e||e.setAttribute("tabindex","0"),h=t[0];let o=0,s=0,a=0;i.forEach(e=>{e.querySelectorAll("td").forEach(e=>{e.dataset.row=o,e.dataset.col=s,s++}),s>a&&(a=s-1),s=0,o++})})(),()=>{u.destroy(),i.disconnect()}},[]),(0,o.useEffect)(()=>{u.setOption("editable",!e.readonly),u.setOption("selectable",!e.readonly&&"off"!==e.createEvent),u.setOption("selectMirror",!e.readonly&&"off"!==e.createEvent)},[e.readonly,e.createEvent]),(0,o.useEffect)(()=>{u.setOption("eventClick",I),u.setOption("eventDidMount",D),u.setOption("eventContent",S),(()=>{const t=e.selected,i=j.current.querySelectorAll(".oj-sp-calendar-event-selected");Array.from(i).forEach(e=>e.classList.remove("oj-sp-calendar-event-selected")),t.forEach(e=>{const t=j.current.querySelectorAll(`[event-id="${e}"]`);Array.from(t).forEach(e=>{const t=e.closest(".fc-event");t&&t.classList.add("oj-sp-calendar-event-selected")})})})(),e.eventDetailMode&&A.current&&A.current.isConnected&&(e=>{const t=e.querySelector(".fc-popover-close");t&&t.click()})(A.current)},[e.selected]),(0,o.useEffect)(()=>{var t;u.setOption("eventClick",I),"none"===e.selectionMode&&(null===(t=e.onSelectedChanged)||void 0===t||t.call(e,{selected:[]}))},[e.selectionMode]),(0,o.useEffect)(()=>{u.unselect(),q()},[e.calendarSourceData]),(0,o.useEffect)(()=>{const t=e.selectedViewValue;t&&p[e.selectedViewValue]&&(u.setOption("eventDidMount",D),u.changeView(p[e.selectedViewValue])),"list"===t?H():U()},[e.selectedViewValue]),(0,o.useEffect)(()=>{const t=e.currentDate?e.currentDate:new Date;t&&u.gotoDate(t)},[e.currentDate]),(0,i.h)(i.Fragment,null,(0,i.h)("div",{style:b?"display:none":"",id:e.id,class:"oj-sp-calendar-full-calendar",ref:j,onKeyDown:t=>{const i=t.target;y&&"Escape"===t.key&&(y.focus(),y=null),i.classList.contains("fc-popover-close")&&"Enter"===t.key&&y&&(i.click(),y.focus(),y=null),"list"!==e.selectedViewValue||t.key!==s.KEY_NAME.ENTER&&t.key!==s.KEY_NAME.SPACE||O(t),"month"!==e.selectedViewValue||"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"ArrowDown"!==t.key&&"ArrowUp"!==t.key||(e=>{const t=e.target;switch(t.classList.contains("fc-daygrid-event")?(g=parseInt(t.fcSeg.firstCol,10),m=parseInt(t.fcSeg.row,10)):(g=parseInt(t.dataset.col,10),m=parseInt(t.dataset.row,10)),e.key){case"ArrowRight":x(6===g?m+1:m,6===g?0:g+1,e);break;case"ArrowLeft":x(0===g?m-1:m,0===g?6:g-1,e);break;case"ArrowDown":x(m+1,g,e);break;case"ArrowUp":x(m-1,g,e)}e.preventDefault()})(t)}}),b&&(0,i.h)(l.EmptyState,{uid:e.id,primaryText:null===(t=e.emptyState)||void 0===t?void 0:t.primaryText,currentDate:e.currentDate,primaryActionDisplay:T,emptyStateDisplay:_,onCreateEvent:e.onCreateEvent}))}})),define("oj-sp/calendar/components/TitleDatePicker",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","ojs/ojconverter-datetime","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojdatetimepicker"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleDatePicker=void 0;t.TitleDatePicker=function(e){const t=Object.assign({},n),l="oj-sp-calendar-popup-"+e.id;let d,c,p;(0,o.useEffect)(()=>{v(p)},[e.screenRange]);const u=()=>{j(),A(),b(p,d)},h=e=>{const{key:t}=e;t!==s.KEY_NAME.ENTER&&t!==s.KEY_NAME.ARROW_DOWN&&t!==s.KEY_NAME.SPACE||(e.preventDefault(),j(),A(),b(p,d))},m=()=>(0,i.h)("oj-date-picker",{class:"oj-sp-calendar-date-picker-styles",onvalueChanged:C}),g=e=>{p=e},y=e=>{d=e},f=e=>{c=e},b=(e,t)=>{e.open(t)},v=e=>{e.close()},j=()=>{const e=d.offsetWidth;p.style.width=e+"px"},A=()=>{const e=Math.round(d.getBoundingClientRect().bottom-c.getBoundingClientRect().bottom),t="rtl"===document.dir?-Math.round(d.getBoundingClientRect().width-c.getBoundingClientRect().width):Math.round(c.getBoundingClientRect().x-d.getBoundingClientRect().x);p.position={of:"#"+c.id,offset:{x:-t,y:e},collision:"none"}},C=t=>{const i=t.detail.value;e.goToDate(i),v(p)},E=i=>{let o;const s=()=>{const e=new a.IntlDateTimeConverter({month:"short",day:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),s=new a.IntlDateTimeConverter({dateFormat:"medium",formatType:"date",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),{startDate:n,endDate:l}=(e=>{const t=e.getDay(),i=t,o=6-t;return{startDate:new Date(e.getTime()-864e5*i),endDate:new Date(e.getTime()+864e5*o)}})(i),d=e.format(n.toISOString()),c=s.format(l.toISOString());o=r.applyParameters(t.rangeDateSeparator,{from:d,to:c})};switch(e.selectedViewValue?e.selectedViewValue:"month"){case"month":(()=>{const e=new a.IntlDateTimeConverter({month:"long",year:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone});o=e.format(i.toISOString())})();break;case"week":case"list":s();break;case"day":(()=>{const e=new a.IntlDateTimeConverter({dateFormat:"full",formatType:"date",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone});o=e.format(i.toISOString())})()}return o};return(0,i.h)(i.Fragment,null,(0,i.h)("div",{class:"oj-flex-bar oj-md-padding-3x-bottom"},(0,i.h)("p",{ref:y,id:e.id+"_pageTitle",class:(0,s.classnames)("oj-sp-calendar-title-date-picker-clickable","oj-typography-subheading-md","oj-sm-margin-0","oj-sm-padding-0","oj-flex-bar-start","oj-sm-align-items-center"),tabIndex:0,role:"button","aria-haspopup":"true",onClick:u,onKeyDown:h},(0,i.h)("span",{class:"oj-sp-calendar-current-date"},E(e.currentDate)),(0,i.h)("span",{"aria-hidden":"true",id:"oj-sp-calendar-date-picker-nav-down",ref:f,class:(0,s.classnames)("oj-ux-ico-nav-down","oj-sm-margin-2x-start","oj-sp-calendar-nav-down-icon-align","sm"===e.screenRange?"oj-ux-icon-size-5x":"oj-ux-icon-size-6x")}))),(0,i.h)("span",null,(0,i.h)("oj-popup",{ref:g,id:l,class:"oj-sp-calendar-popup-date-picker oj-sp-calendar-popup-min-width","initial-focus":"firstFocusable"},m())))}})),define("oj-sp/calendar/utils/CalendarDataCache",["require","exports","ojs/ojdataprovider","oj-sp/common-util/common-util","ojs/ojdataprovider"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarDataCache=void 0;t.CalendarDataCache=class{constructor(e,t){this.calcInterval=e=>{const t=e.getMonth()-this.startingDate.getMonth(),i=((Math.abs(t)+1)%3-1)*Math.sign(t),o=e.getFullYear(),s=e.getMonth();return{intervalStartDate:new Date(o,s-1-i,1,0,0,0),intervalEndDate:new Date(o,s+2-i,0,23,59,59)}},this.startingDate=e,this.calendarDataProvider=t,this.intervalsArray=[]}async getIntervalData(e,t=!1){t&&(this.intervalsArray=[]);const i=this.findInterval(e);let s=null;if(i>=0)s=this.intervalsArray[i],i!==this.intervalsArray.length-1&&(this.intervalsArray.splice(i,1),this.intervalsArray.push(s));else{const{intervalStartDate:t,intervalEndDate:i}=this.calcInterval(e),a=await(0,o.dataProviderToArray)(this.calendarDataProvider,this.getFetchListParams(t,i));this.cleanLocalStorage(),s=this.createIntervalData(t,i,a),this.intervalsArray.push(s)}return s}createIntervalData(e,t,i){return{start:e,end:t,data:i,isDateWithinInterval:i=>i>=e&&i<=t}}updateEventIntervalsData(e){e.map(e=>{const t=this.findInterval(new Date(e.start));if(t>=0){const i=this.findEventIndex(e.id,t);this.intervalsArray[t].data[i]=e}})}findInterval(e){let t=-1;for(const[i,o]of this.intervalsArray.entries())if(o.isDateWithinInterval(e)){t=i;break}return t}findEventIndex(e,t){return this.intervalsArray[t].data.findIndex(t=>t.id===e)}getFetchListParams(e,t){const o={op:"$and",criteria:[{op:"$ge",attribute:"end",value:e.toISOString()},{op:"$le",attribute:"start",value:t.toISOString()}]};return{filterCriterion:i.FilterFactory.getFilter({filterDef:o})}}cleanLocalStorage(){for(;this.intervalsArray.length>9;)this.intervalsArray.shift()}}})),define("css!oj-sp/calendar/calendar-styles",[],(function(){})),define("css!oj-sp/general-drawer-template/components/general-drawer-footer-styles",[],(function(){})),define("oj-sp/general-drawer-template/components/general-drawer-footer",["require","exports","preact","preact/hooks","css!./general-drawer-footer-styles.css"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralDrawerFooter=t.HEADER_HORIZONTAL_PADDING=void 0,t.HEADER_HORIZONTAL_PADDING="oj-sm-padding-4x-horizontal oj-md-padding-6x-horizontal";t.GeneralDrawerFooter=e=>{const n=(0,o.useRef)(null);(0,o.useEffect)(()=>{const{current:t}=n;if(t){const i=new ResizeObserver(()=>a(e.setCssVariable,t));return i.observe(t),()=>{i.disconnect()}}});const{secondaryActions:r}=e,l="oj-sm-padding-4x-vertical oj-md-padding-6x-vertical "+t.HEADER_HORIZONTAL_PADDING,d=e.primaryAction&&"off"!==e.primaryAction.display;return(d||r&&s(r).length>0)&&(0,i.h)("div",{ref:n,class:"oj-sp-general-drawer-template-footer oj-bg-neutral-10 "+l},(0,i.h)("oj-toolbar",{class:"oj-sp-general-drawer-template-toolbar oj-clickthrough-disabled oj-flex oj-sm-only-flex-direction-column oj-md-justify-content-flex-end oj-sm-flex-wrap-nowrap oj-md-flex-items-0"},s(r).map(t=>(0,i.h)("oj-button",{id:e.uid+"_secondaryAction_"+t.id,class:"oj-sp-general-drawer-template-secondary-action oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-4x-bottom",display:"all",chroming:"outlined",disabled:"disabled"===t.display,onojAction:t=>{var i;return null===(i=e.onSpSecondaryAction)||void 0===i?void 0:i.call(e,{actionId:t.target.id.replace(e.uid+"_secondaryAction_","")})}},(0,i.h)("span",null,t.label))),d&&(0,i.h)("oj-button",{class:"oj-sp-general-drawer-template-primary-action oj-flex-item oj-sm-only-margin-0",chroming:"callToAction",display:"all",disabled:"disabled"===e.primaryAction.display,onojAction:()=>{var t;return null===(t=e.onSpPrimaryAction)||void 0===t?void 0:t.call(e)}},(0,i.h)("span",null,e.primaryAction.label))))};const s=e=>e&&e.length>0?e.slice(0,2).filter(({display:e})=>"off"!==e).reverse():[],a=(e,t)=>{if(!t)return;e("--oj-sp-general-drawer-template-footer-height",t.clientHeight+"px")}})),define("css!oj-sp/general-drawer-template/general-drawer-template-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/general-drawer-template/general-drawer-template",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","oj-sp/internal-resources/components/drawer-common/drawer-template-header","./components/general-drawer-footer","oj-sp/internal-resources/components/drawer-common/drawer-template-types","oj-sp/common/positionUtility","css!oj-sp/internal-resources/components/drawer-common/drawer-template-styles","css!./general-drawer-template-styles","ojs/ojbutton","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralDrawerTemplate=void 0;let d=class extends s.Component{async componentDidMount(){this.subscribeHeaderToPositionUtil(),this.subscribeFooterToPositionUtil()}componentWillUnmount(){this.unsubscribePositionUtil()}constructor(e){var t;super(e),this.state={screenRange:null},this.handleConnected=e=>{this.subscribeHeaderToPositionUtil(),this.subscribeFooterToPositionUtil()},this.handleDisconnected=e=>{this.unsubscribePositionUtil()},this.actionHandler=e=>{var t,i,o,s,a,n;switch(e){case r.ActionId.Previous:null===(i=(t=this.props).onSpPrevious)||void 0===i||i.call(t,{id:null===(o=this.props.previousItem)||void 0===o?void 0:o.id});break;case r.ActionId.Next:null===(a=(s=this.props).onSpNext)||void 0===a||a.call(s,{id:null===(n=this.props.nextItem)||void 0===n?void 0:n.id});break;default:throw new Error("Unidentified action triggered")}},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.generalDrawerHeaderRef=(0,s.createRef)(),this.generalDrawerfooterRef=(0,s.createRef)(),this.headerComponentName=this.uniqueId+"_general-drawer-template-header",this.footerComponentName=this.uniqueId+"_general-drawer-template-footer"}render(e){return(0,s.h)("div",{class:"oj-sp-general-drawer-template-main oj-bg-neutral-10 "+("oj-sp-drawer-template-width-"+this.props.drawerSize)},this.renderPositionHelper(),(0,s.h)("div",{class:"oj-sp-general-drawer-template-header-wrapper",ref:this.generalDrawerHeaderRef},this.renderDrawerHeader()),this.renderDrawerBody(),this.renderDrawerFooter())}renderPositionHelper(){return(0,s.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}renderDrawerHeader(){return(0,s.h)(a.DrawerTemplateHeader,{uid:this.uniqueId,res:this.res,drawerTitle:this.props.drawerTitle,drawerSubtitle:this.props.drawerSubtitle,previousItem:this.props.previousItem,nextItem:this.props.nextItem,setCssVariable:(e,t)=>this.setCssVariable(e,t),onSpAction:e=>this.actionHandler(e),endSlot:this.hasCloseButton()?this.renderCloseButton():void 0})}renderDrawerBody(){const e="oj-sm-padding-4x-vertical oj-md-padding-6x-vertical "+a.HEADER_HORIZONTAL_PADDING;return(0,s.h)("div",{class:"oj-sp-general-drawer-template-body oj-bg-neutral-10 "+e},this.props.children)}renderCloseButton(){return(0,s.h)("oj-button",{class:"oj-sp-general-drawer-template-close-button oj-button-sm",display:"icons",chroming:"borderless",onojAction:()=>this.props.onSpClose()},(0,s.h)("span",{slot:"startIcon",class:"oj-ux-ico-close"}),this.getCloseActionOrDefault()&&this.getCloseActionOrDefault().label||this.res.close)}hasCloseButton(){const e=this.props.closeAction;return!e||!e.display||"off"!==e.display}renderDrawerFooter(){return(0,s.h)("div",{class:"oj-sp-general-drawer-template-footer-wrapper",ref:this.generalDrawerfooterRef},(0,s.h)(n.GeneralDrawerFooter,{uid:this.uniqueId,primaryAction:this.props.primaryAction,secondaryActions:this.props.secondaryActions,setCssVariable:(e,t)=>this.setCssVariable(e,t),onSpPrimaryAction:this.props.onSpPrimaryAction,onSpSecondaryAction:this.props.onSpSecondaryAction}))}getCloseActionOrDefault(){return this.props.closeAction||{display:"on",label:i.close}}setCssVariable(e,t){this.base.style.setProperty(e,t)}unsubscribePositionUtil(){l.PositionUtility.isComponentSubscribed(this.headerComponentName)&&l.PositionUtility.unsubscribe({componentName:this.headerComponentName}),l.PositionUtility.isComponentSubscribed(this.footerComponentName)&&l.PositionUtility.unsubscribe({componentName:this.footerComponentName})}subscribeHeaderToPositionUtil(){const e=this.generalDrawerHeaderRef.current;if(e&&!l.PositionUtility.isComponentSubscribed(this.headerComponentName)){const t={componentName:this.headerComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"top",level:l.PositionUtility.LEVEL_MAP.header},onOffsetChange:t=>{e.style.top=t.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:e},onStickinessChange:t=>{const i=t.isSticky;e.style.position=i?"sticky":"unset"}}};l.PositionUtility.subscribe(t)}}subscribeFooterToPositionUtil(){const e=this.generalDrawerfooterRef.current;if(e&&!l.PositionUtility.isComponentSubscribed(this.footerComponentName)){const t={componentName:this.footerComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"bottom",level:l.PositionUtility.LEVEL_MAP.footerNavigation},onOffsetChange:t=>{e.style.top=t.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:e},onStickinessChange:t=>{const i=t.isSticky;e.style.position=i?"sticky":"unset"}}};l.PositionUtility.subscribe(t)}}};d.defaultProps={drawerSize:"sm"},d._metadata={properties:{drawerTitle:{type:"string"},drawerSubtitle:{type:"string"},drawerSize:{type:"string",enumValues:["xl","lg","md","sm"]},primaryAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},secondaryActions:{type:"Array<object>"},closeAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["on","off"]}}},nextItem:{type:"object",properties:{id:{type:"string"},label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},previousItem:{type:"object",properties:{id:{type:"string"},label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}}},events:{spPrimaryAction:{},spSecondaryAction:{},spClose:{},spPrevious:{},spNext:{}},slots:{"":{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},d=__decorate([(0,o.customElement)("oj-sp-general-drawer-template"),__metadata("design:paramtypes",[Object])],d),t.GeneralDrawerTemplate=d})),define("oj-sp/general-drawer-template/loader",["require","exports","./general-drawer-template"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralDrawerTemplate=void 0,Object.defineProperty(t,"GeneralDrawerTemplate",{enumerable:!0,get:function(){return i.GeneralDrawerTemplate}})}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/calendar/calendar",["require","exports","ojs/ojvcomponent","preact","./components/CalendarDrawer","./components/CalendarToolbar","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojresponsiveutils","./components/CalendarComponent","./components/TitleDatePicker","./utils/CalendarDataCache","oj-sp/common-util/common-util","ojs/ojlogger","css!./calendar-styles","ojs/ojdrawerlayout","ojs/ojbutton","ojs/ojpopup","ojs/ojoption","ojs/ojtoolbar","ojs/ojdatetimepicker","ojs/ojdataprovider","oj-sp/general-drawer-template/loader","oj-sp-3rdparty-fullcalendar/main.min"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Calendar=void 0;const h={month:2592e6,week:6048e5,list:6048e5,day:864e5};let m=class extends o.Component{constructor(e){var t;super(e),this.wrapperRef=(0,o.createRef)(),this.calendarDrawerRef=(0,o.createRef)(),this.calendarMainContainer=(0,o.createRef)(),this.updateScrimSize=()=>{const{height:e,width:t,left:i}=this.base.getBoundingClientRect();this.base.style.setProperty("--oj-sp-calendar-scrim-height",e+"px"),this.base.style.setProperty("--oj-sp-calendar-scrim-width",t+"px"),this.base.style.setProperty("--oj-sp-calendar-scrim-left",i+"px")},this.dataProviderEvent=async e=>{await this.updateDataProvider(e)},this.goToDate=e=>{if(e){const[t,i,o]=e.split("-").map(Number);t&&i&&o&&this.setState({currentDate:new Date(t,i-1,o)})}else this.setState({currentDate:new Date})},this.setCalendarHeight=()=>{var e;const t=this.wrapperRef.current,i="sm"===this.state.screenRange?84:112,o=window.innerHeight;this.base.style.setProperty("--oj-sp-calendar-height-fallback",o+"px");const s=parseFloat(getComputedStyle(this.base).paddingTop),a=t?parseFloat(getComputedStyle(t).paddingTop):0,n="sm"===this.state.screenRange||"md"===this.state.screenRange?24:32;this.base.style.setProperty("--oj-sp-calendar-full-calendar-paddings",i+s+a+n+"px"),(null===(e=this.calendarDrawerRef)||void 0===e?void 0:e.current).style.setProperty("--oj-sp-calendar-detail-panel-content-height",o-n+"px")},this.setCalendarWidth=()=>{const e=this.wrapperRef.current,t=e.clientWidth,i=e?parseFloat(getComputedStyle(e).paddingRight):0;this.base.style.setProperty("--oj-sp-calendar-width",t-2*i+"px"),"md"===this.state.screenRange&&this.updateScrimSize()},this.onSelectedViewChanged=e=>{var t,i;null===(i=(t=this.props).onSelectedViewValueChanged)||void 0===i||i.call(t,e)},this.navigateNext=()=>{const e=this.state.currentDate?this.state.currentDate:new Date;let t;const i=this.props.selectedViewValue,o=h[i];switch(i){case"month":t=e.setMonth(e.getMonth()+1,1);break;case"week":case"list":case"day":t=new Date(this.state.currentDate.getTime()+o)}this.setState({currentDate:new Date(t)})},this.navigatePrevious=()=>{const e=this.state.currentDate?this.state.currentDate:new Date;let t;const i=this.props.selectedViewValue,o=h[i];switch(i){case"month":t=e.setMonth(e.getMonth()-1,1);break;case"week":case"list":case"day":t=new Date(this.state.currentDate.getTime()-o)}this.setState({currentDate:new Date(t)})},this.navigateToday=()=>{this.setState({currentDate:new Date})},this.onNavigateAction=e=>{switch(e){case"calendar_next":this.navigateNext();break;case"calendar_previous":this.navigatePrevious();break;case"calendar_today":this.navigateToday()}},this.onEventCreateAction=()=>{const e=this.state.currentDate?this.state.currentDate:new Date,t=new Date(e.toISOString());let i;switch(this.props.selectedViewValue){case"month":i=new Date(e.getFullYear(),e.getMonth(),1);break;case"week":case"list":i=new Date(t.setDate(e.getDate()-e.getDay()));break;case"day":i=new Date(this.state.currentDate.getTime())}this.props.onSpCalendarEventCreate({startTime:new Date(i).toISOString(),endTime:null,allDay:!1})},this.onSelectToCreateEvent=e=>{this.props.onSpCalendarEventCreate({startTime:e.startTime,endTime:e.endTime,allDay:e.allDay})},this.onOpenCalendarsPanelAction=()=>{this.setState({showCalendarProviders:!0,showEventDetails:!1}),this.props.onSelectedChanged([]),this.focusOnDrawer()},this.onSelectedChanged=e=>{var t;const i=e.selected;this.props.onSelectedChanged(i),this.internalSelection=!0,this.setState({showEventDetails:i.length>0&&"on"===(null===(t=this.props.displayOptions)||void 0===t?void 0:t.eventDetailMode),showCalendarProviders:!1}),this.focusOnDrawer()},this.closeDrawer=()=>{this.setState({showEventDetails:!1,showCalendarProviders:!1}),this.props.onSelectedChanged([])},this.smMediaQueryChangeListener=e=>{e.matches&&(this.setState({screenRange:"sm"}),this.props.onSelectedViewValueChanged("list"))},this.mdMediaQueryChangeListener=e=>{e.matches&&this.setState({screenRange:"md"})},this.lgMediaQueryChangeListener=e=>{e.matches&&this.setState({screenRange:"lg"})},this.xlMediaQueryChangeListener=e=>{e.matches&&this.setState({screenRange:"xl"})},this.getScreenRange=()=>this.smMediaQuery.matches?"sm":this.mdMediaQuery.matches?"md":this.lgMediaQuery.matches?"lg":"xl",this.res=Object.assign({},n),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)();const s=r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.SM_ONLY),a=r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.MD_ONLY),l=r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.LG_ONLY),d=r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.XL_UP);this.smMediaQuery=window.matchMedia(s),this.mdMediaQuery=window.matchMedia(a),this.lgMediaQuery=window.matchMedia(l),this.xlMediaQuery=window.matchMedia(d),this.internalSelection=!1,this.calendarDataCache=new c.CalendarDataCache(new Date,this.props.calendarEvents),this.state={currentDate:new Date,screenRange:this.getScreenRange(),intervalData:null,calendarFilteredData:[],showEventDetails:!1,showCalendarProviders:!1}}async componentDidMount(){var e,t;this.smMediaQuery.addEventListener("change",this.smMediaQueryChangeListener),this.mdMediaQuery.addEventListener("change",this.mdMediaQueryChangeListener),this.lgMediaQuery.addEventListener("change",this.lgMediaQueryChangeListener),this.xlMediaQuery.addEventListener("change",this.xlMediaQueryChangeListener),window.addEventListener("resize",this.setCalendarHeight),this.setCalendarHeight(),"sm"===this.state.screenRange&&this.props.onSelectedViewValueChanged("list"),this.props.calendarEvents&&!Array.isArray(this.props.calendarEvents)?(null===(e=this.props.calendarEvents)||void 0===e||e.addEventListener("mutate",this.dataProviderEvent),null===(t=this.props.calendarEvents)||void 0===t||t.addEventListener("refresh",this.dataProviderEvent),await this.mapDataProvider()):u.error("Invalid data type specified for calendarEvents property."),this.validateSelected(),this.contentResizeObserver=new ResizeObserver(this.setCalendarWidth),this.contentResizeObserver.observe(this.wrapperRef.current)}componentWillUnmount(){var e,t;this.contentResizeObserver.disconnect(),Array.isArray(this.props.calendarEvents)||(null===(e=this.props.calendarEvents)||void 0===e||e.removeEventListener("mutate",this.dataProviderEvent),null===(t=this.props.calendarEvents)||void 0===t||t.removeEventListener("refresh",this.dataProviderEvent)),window.removeEventListener("resize",this.setCalendarHeight),this.smMediaQuery.removeEventListener("change",this.smMediaQueryChangeListener),this.mdMediaQuery.removeEventListener("change",this.mdMediaQueryChangeListener),this.lgMediaQuery.removeEventListener("change",this.lgMediaQueryChangeListener),this.xlMediaQuery.removeEventListener("change",this.xlMediaQueryChangeListener)}componentDidUpdate(e,t,i){this.props.visibleCalendars.length!==e.visibleCalendars.length&&this.filterData(this.props.visibleCalendars,this.state.intervalData),this.state.currentDate!==t.currentDate&&this.mapDataProvider(),this.props.selected===e.selected||this.internalSelection||this.validateSelected(),this.state.screenRange!==t.screenRange&&this.setCalendarHeight(),e.calendarEvents!==this.props.calendarEvents&&(this.calendarDataCache=new c.CalendarDataCache(new Date,this.props.calendarEvents),this.mapDataProvider()),this.internalSelection=!1}validateSelected(){var e;const t=this.state.intervalData,i=this.props.selected.slice(-1)[0];if(t&&t.data.length>0&&i){t.data.find(e=>e.id.toString()===i)||(this.props.onSelectedChanged([]),"on"===(null===(e=this.props.displayOptions)||void 0===e?void 0:e.eventDetailMode)&&this.setState({showEventDetails:!1}))}}async mapDataProvider(){if(this.props.calendarEvents&&(!this.state.intervalData||!this.state.intervalData.isDateWithinInterval(this.state.currentDate))){const e=await this.calendarDataCache.getIntervalData(this.state.currentDate);let t=[];this.props.visibleCalendars&&this.props.visibleCalendars.length>0&&(t=e.data.filter(e=>this.props.visibleCalendars.includes(e.calendarProvider))),this.setState({intervalData:e,calendarFilteredData:t})}}async updateDataProvider(e){var t,i,o,s;let a=null===(t=this.state.intervalData)||void 0===t?void 0:t.data;if("refresh"===(null==e?void 0:e.type)){const e=await this.calendarDataCache.getIntervalData(this.state.currentDate,!0);a=e.data}else"mutate"===(null==e?void 0:e.type)&&(e.detail.update?(null===(i=e.detail.update)||void 0===i||i.data.map(e=>{const t=a.findIndex(t=>t.id===e.id);a[t]=e}),this.calendarDataCache.updateEventIntervalsData(null===(o=e.detail.update)||void 0===o?void 0:o.data)):e.detail.add&&(null===(s=e.detail.add)||void 0===s||s.data.map(e=>{a.push(e)})));let n=[];this.props.visibleCalendars&&this.props.visibleCalendars.length>0&&(n=a.filter(e=>this.props.visibleCalendars.includes(e.calendarProvider))),this.setState({calendarFilteredData:n})}filterData(e,t){if(t&&t.data){const i=t.data.filter(t=>e.includes(t.calendarProvider));this.setState({calendarFilteredData:i})}}focusOnDrawer(){const e=(0,p.findAllFocusableElements)(this.calendarDrawerRef.current);e&&e.length>0&&e[0].focus()}calendarSidePanelFooterActionsHandler(e){var t,i;null===(i=(t=this.props).onSpCalendarEventDetailAction)||void 0===i||i.call(t,{actionId:e.actionId,eventId:this.props.selected[this.props.selected.length-1]})}calendarProvidersActionsHandler(e){var t,i;null===(i=(t=this.props).onVisibleCalendarsChanged)||void 0===i||i.call(t,e)}renderCalendarToolbar(){var e,t;const i=this.props.selectedViewValue?this.props.selectedViewValue:"month";return(0,o.h)("div",{class:"oj-sp-calendar-toolbar-container oj-flex oj-bg-neutral-10 oj-sm-padding-3x-bottom oj-md-padding-3x-top"},(0,o.h)(a.CalendarToolbar,{componentId:this.uniqueId,selectedView:i,readonly:null===(e=this.props)||void 0===e?void 0:e.readonly,createEvent:null===(t=this.props.displayOptions)||void 0===t?void 0:t.createEvent,onSelectedViewChanged:this.onSelectedViewChanged,onNavigate:this.onNavigateAction,onCreateEvent:this.onEventCreateAction,onOpenCalendarsPanel:this.onOpenCalendarsPanelAction}))}renderTitleDatePicker(){return(0,o.h)(d.TitleDatePicker,{id:this.uniqueId,screenRange:this.state.screenRange,currentDate:this.state.currentDate,selectedViewValue:this.props.selectedViewValue,goToDate:this.goToDate})}renderCalendarDrawer(){var e,t;const i=null===(e=this.state.intervalData)||void 0===e?void 0:e.data.find(e=>e.id==this.props.selected[this.props.selected.length-1]),a=this.props.eventDetailActions&&this.props.eventDetailActions.length>0?this.props.eventDetailActions:null,n=this.state.showEventDetails&&"on"===(null===(t=this.props.displayOptions)||void 0===t?void 0:t.eventDetailMode);return(0,o.h)("div",{ref:this.calendarDrawerRef,class:"oj-sp-calendar-side-panel-container oj-sp-calendar-side-panel-container-border"},(0,o.h)(s.CalendarDrawer,{uid:this.uniqueId,calendarEvent:i,eventDetailActions:a,eventDetailTemplate:this.props.eventDetailTemplate,showEventDetails:n,showCalendarProviders:this.state.showCalendarProviders,visibleCalendars:this.props.visibleCalendars,onCalendarProviderAction:e=>this.calendarProvidersActionsHandler(e),closeDrawer:this.closeDrawer,calendarProviders:this.props.calendarProviders,onEventDetailAction:e=>this.calendarSidePanelFooterActionsHandler(e)}))}renderCalendarContainer(){var e,t,i;const s=this.props.selectionMode?this.props.selectionMode:"single",a=this.props.selectedViewValue?this.props.selectedViewValue:"month";return(0,o.h)(l.CalendarComponent,{id:this.uniqueId+"_full_calendar",selectedViewValue:a,selectionMode:s,calendarProviders:this.props.calendarProviders,onSpCalendarEventUpdate:this.props.onSpCalendarEventUpdate,calendarSourceData:this.state.calendarFilteredData,selected:this.props.selected,readonly:null===(e=this.props)||void 0===e?void 0:e.readonly,createEvent:null===(t=this.props.displayOptions)||void 0===t?void 0:t.createEvent,currentDate:this.state.currentDate,onCreateEvent:this.onSelectToCreateEvent,eventDetailMode:"on"===(null===(i=this.props.displayOptions)||void 0===i?void 0:i.eventDetailMode),emptyState:this.props.emptyState,onSelectedChanged:this.onSelectedChanged})}render(e){var t;const i=this.state.showEventDetails&&"on"===(null===(t=this.props.displayOptions)||void 0===t?void 0:t.eventDetailMode)||this.state.showCalendarProviders,s="lg"===this.state.screenRange||"xl"===this.state.screenRange?"oj-sp-calendar-wrapper-bottom-padding":"",a="md"===this.state.screenRange&&i?"oj-sp-calendar-main-content-blocked":"",n="week"===e.selectedViewValue?"oj-sp-calendar-week":"";return(0,o.h)("div",{class:"oj-sp-calendar-component"},(0,o.h)("oj-drawer-layout",{endOpened:i,onojBeforeClose:this.closeDrawer},(0,o.h)("div",{ref:this.wrapperRef,class:"oj-sp-calendar-wrapper oj-sp-template-wrapper "+s},(0,o.h)("div",{class:"oj-sp-calendar-header"},this.renderTitleDatePicker(),this.renderCalendarToolbar()),(0,o.h)("div",{ref:this.calendarMainContainer,class:"oj-sp-calendar-component-main-container "+n},this.renderCalendarContainer())),(0,o.h)("div",{slot:"end",class:"oj-sp-calendar-end-slot"},this.renderCalendarDrawer())),(0,o.h)("div",{class:"oj-sp-calendar-scrim "+a}))}};m.defaultProps={selected:[],selectionMode:"single",selectedViewValue:"month",visibleCalendars:[],displayOptions:{createEvent:"off",eventDetailMode:"off"},readonly:!1},m._metadata={properties:{calendarEvents:{type:"DataProvider"},calendarProviders:{type:"Array<object>"},visibleCalendars:{type:"Array<string>",writeback:!0},selectedViewValue:{type:"string",writeback:!0},selected:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","multiple","single"]},readonly:{type:"boolean"},displayOptions:{type:"object",properties:{createEvent:{type:"string",enumValues:["on","off"]},eventDetailMode:{type:"string",enumValues:["on","off"]}}},emptyState:{type:"object",properties:{primaryText:{type:"string"}}},eventDetailActions:{type:"Array<object>"}},slots:{eventDetailTemplate:{data:{}}},events:{spCalendarEventUpdate:{},spCalendarEventCreate:{},spCalendarEventDetailAction:{}},extension:{_WRITEBACK_PROPS:["visibleCalendars","selectedViewValue","selected"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},m=__decorate([(0,i.customElement)("oj-sp-calendar"),__metadata("design:paramtypes",[Object])],m),t.Calendar=m})),define("oj-sp/calendar/loader",["require","exports","./calendar"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Calendar=void 0,Object.defineProperty(t,"Calendar",{enumerable:!0,get:function(){return i.Calendar}})})),define("oj-sp/canvas-page/components/CanvasPageHeader",["require","exports","preact","oj-sp/header-create-edit/loader"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPageHeader=void 0;t.CanvasPageHeader=e=>(0,i.h)("oj-sp-header-create-edit",{class:"oj-sp-canvas-page-header oj-sp-internal-color-strip-on-top",id:e.componentId+"_header_create_edit",pageTitle:e.pageTitle,pageSubtitle:e.pageSubtitle,timestamp:e.timestamp,primaryAction:e.primaryAction,badge:e.badge,displayOptions:{save:e.displayOptions.save,goToParent:!1}})})),define("oj-sp/canvas-page/utils/canvas-page-constants",["require","exports","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAXIMUM_LAYOUT_OPTIONS=t.MAXIMUM_ZOOM_OPTIONS=t.MAXIMUM_FUNCTIONAL_ACTIONS=t.OVERFLOW_BUTTON_ICON=t.LAYOUT_TOOLBAR_MODEL=t.FUNCTIONAL_TOOLBAR_MODEL=t.COLLAPSE_ACTION=t.EXPAND_ACTION=t.TOGGLE_CANVAS_ID=t.BASE_CSS_CLASS=void 0,t.BASE_CSS_CLASS="oj-sp-canvas-page",t.TOGGLE_CANVAS_ID="toggle-canvas",t.EXPAND_ACTION={id:t.TOGGLE_CANVAS_ID,label:"expandCanvas",icon:"oj-ux-ico-expand"},t.COLLAPSE_ACTION={id:t.TOGGLE_CANVAS_ID,label:"collapseCanvas",icon:"oj-ux-ico-collapse"},t.FUNCTIONAL_TOOLBAR_MODEL={controlModels:[],label:"functional",classes:"oj-sp-canvas-page-functional-toolbar",controlsSize:i.ControlSize.SMALL,responsiveOrder:2},t.LAYOUT_TOOLBAR_MODEL={controlModels:[],label:"layout",classes:"oj-sp-canvas-page-layout-toolbar",controlsSize:i.ControlSize.SMALL,responsiveOrder:1},t.OVERFLOW_BUTTON_ICON="oj-ux-ico-overflow-h",t.MAXIMUM_FUNCTIONAL_ACTIONS=8,t.MAXIMUM_ZOOM_OPTIONS=10,t.MAXIMUM_LAYOUT_OPTIONS=3})),define("oj-sp/canvas-page/utils/canvas-page-toolbar-utils",["require","exports","oj-sp/internal-resources/components/collection-toolbars/action-converter-utils","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","./canvas-page-constants","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMoreLayoutActionsControlModel=t.convertExpandActionToControlModel=t.convertZoomLevelActionsToControlModel=t.convertLayoutViewActionsToControlModel=t.getMoreFunctionalActionsControlModel=t.convertFunctionalActionsToControlModel=void 0;t.convertFunctionalActionsToControlModel=e=>{const t=i.convertCustomIconActionsToControlModel(e.functionalActions,o.ActionType.FUNCTIONAL,o.ElementType.BUTTON_ICON,s.MAXIMUM_FUNCTIONAL_ACTIONS);return t.length>0&&t.forEach(e=>e.chroming="borderless"),t};t.getMoreFunctionalActionsControlModel=()=>{const e=i.getMoreActionsControlModel([],a.moreActions,o.ActionType.MORE_ACTIONS,o.ElementType.MENU_BUTTON_END_ICON);return e&&(e.chroming="borderless",e.icon=i.getButtonIconType(s.OVERFLOW_BUTTON_ICON,o.ElementType.MENU_BUTTON_END_ICON)),e};t.convertLayoutViewActionsToControlModel=e=>{const t=i.convertStandardOptionsToControlModel(e.layoutViewOptions,s.MAXIMUM_LAYOUT_OPTIONS,o.ActionType.LAYOUT_VIEW_OPTIONS,o.ElementType.BUTTON_SET,a.viewOptions,e.selectedLayoutViewValue);return t&&(t.responsiveOrder=2),t};t.convertZoomLevelActionsToControlModel=e=>{const t=i.convertStandardOptionsToControlModel(e.zoomLevelOptions,s.MAXIMUM_ZOOM_OPTIONS,o.ActionType.ZOOM_LEVEL_OPTIONS,o.ElementType.MENU_BUTTON,a.zoomLevel,e.selectedZoomLevelValue);return t&&(t.responsiveOrder=1,t.chroming="borderless"),t};t.convertExpandActionToControlModel=e=>{const t=e.canvasExpanded?s.COLLAPSE_ACTION:s.EXPAND_ACTION,n=i.convertDisplayOptionToControlModel(t,e.displayOptions.expand,o.ActionType.TOGGLE_CANVAS,o.ElementType.BUTTON_ICON,a);return n&&(n.responsiveOrder=3,n.chroming="borderless"),n};t.getMoreLayoutActionsControlModel=()=>{const e=i.getMoreActionsControlModel([],a.layoutActions,o.ActionType.LAYOUT_ACTIONS,o.ElementType.MENU_BUTTON);return e&&(e.chroming="borderless"),e}})),define("oj-sp/canvas-page/components/CanvasPageCollectionToolbar",["require","exports","preact","preact/hooks","../utils/canvas-page-constants","oj-sp/internal-resources/components/collection-toolbars/loader","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","../utils/canvas-page-toolbar-utils"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPageCollectionToolbar=void 0;t.CanvasPageCollectionToolbar=e=>{let t,l,d,c,p,u,h,m;const[g,y]=(0,o.useState)(s.FUNCTIONAL_TOOLBAR_MODEL),[f,b]=(0,o.useState)(s.LAYOUT_TOOLBAR_MODEL),v=(0,o.useRef)(e.canvasExpanded),j=(0,o.useRef)(new Map).current,A=(0,o.useRef)(!1);(0,o.useEffect)(()=>{C()},[]),(0,o.useEffect)(()=>{A.current&&E()},[e.functionalActions]),(0,o.useEffect)(()=>{A.current&&T(),v.current=e.canvasExpanded,A.current=!0},[e.layoutViewOptions,e.selectedLayoutViewValue,e.zoomLevelOptions,e.selectedZoomLevelValue,e.displayOptions.expand,e.canvasExpanded]);const C=()=>{_(),S(),x(),w(),O(),I(),D()},E=()=>{_(),x(),w()},T=()=>{S(),O(),I()},_=()=>{t=r.convertFunctionalActionsToControlModel(e)},S=()=>{d=r.convertLayoutViewActionsToControlModel(e),c=r.convertZoomLevelActionsToControlModel(e),p=r.convertExpandActionToControlModel(e)},x=()=>{h=[],t.length>0&&h.push(...t),l=h.length?r.getMoreFunctionalActionsControlModel():null},O=()=>{m=[],d&&m.push(d),c&&m.push(c),p&&m.push(p),u=m.length?r.getMoreLayoutActionsControlModel():null},w=()=>{const e=[];h.length&&e.push(...h),l&&e.push(l),y(Object.assign(Object.assign({},s.FUNCTIONAL_TOOLBAR_MODEL),{controlModels:e}))},I=()=>{const e=[];u&&e.push(u),m.length&&e.push(...m),b(Object.assign(Object.assign({},s.LAYOUT_TOOLBAR_MODEL),{controlModels:e}))},D=()=>{j.set(n.ActionType.FUNCTIONAL,N),j.set(n.ActionType.LAYOUT_VIEW_OPTIONS,P),j.set(n.ActionType.ZOOM_LEVEL_OPTIONS,R),j.set(n.ActionType.TOGGLE_CANVAS,L)},N=t=>{e.onSpFunctionalAction({actionId:t})},P=t=>{var i;null===(i=e.onSelectedLayoutViewValueChanged)||void 0===i||i.call(e,t)},R=t=>{var i;null===(i=e.onSelectedZoomLevelValueChanged)||void 0===i||i.call(e,t)},L=()=>{e.onCanvasExpandedChanged(!v.current)},M=(0,o.useCallback)(e=>{const{actionId:t,actionType:i}=e;j.get(i)(t)},[j]);return(0,i.h)("div",{class:"oj-sp-canvas-page-toolbar-panel oj-sp-template-wrapper oj-flex oj-bg-neutral-10"},(0,i.h)(a.CollectionToolbars,{componentId:e.componentId+"_collection_toolbar",componentBaseCssClass:s.BASE_CSS_CLASS,functionalToolbarModel:g,layoutToolbarModel:f,onSpAction:M}))}})),define("css!oj-sp/canvas-page/canvas-page-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/canvas-page/canvas-page",["require","exports","ojs/ojvcomponent","preact","ojs/ojlogger","./components/CanvasPageHeader","./components/CanvasPageCollectionToolbar","css!./canvas-page-styles.css"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPage=void 0;let r=class extends o.Component{constructor(e,t){var s;super(e,t),this.rootContainerRef=(0,o.createRef)(),this.headerToolbarPanelRef=(0,o.createRef)(),this.layoutViewValueChangeHandler=e=>{this.props.onSelectedLayoutViewValueChanged(e)},this.zoomLevelValueChangeHandler=e=>{this.props.onSelectedZoomLevelValueChanged(e)},this.canvasExpandedChangeHandler=e=>{this.setState({canvasExpanded:e})},this.isCollectionToolbarConfigured=()=>"on"===this.props.displayOptions.expand||this.props.functionalActions&&this.props.functionalActions.length>0||this.props.layoutViewOptions&&this.props.layoutViewOptions.length>0||this.props.zoomLevelOptions&&this.props.zoomLevelOptions.length>0,this.setHeaderToolbarPanelHeight=()=>{const e=this.rootContainerRef.current,t=this.headerToolbarPanelRef.current;e&&t&&e.style.setProperty("--oj-sp-canvas-page-header-toolbar-height",t.getBoundingClientRect().height+"px")},this.observeHeaderToolbarContainer=()=>{const e=this.headerToolbarPanelRef.current;this.headerToolbarPanelObserver=new MutationObserver(()=>this.setHeaderToolbarPanelHeight()),this.headerToolbarPanelObserver.observe(e,{childList:!0,subtree:!0})},this.uniqueId=null!==(s=e.id)&&void 0!==s?s:(0,i.getUniqueId)(),this.state={canvasExpanded:!1},this.headerToolbarPanelObserver=null}render(e){return(0,o.h)("div",{class:"oj-sp-canvas-page-container",ref:this.rootContainerRef},(0,o.h)("div",{"data-otel-hero":"canvasPageHeader",class:"oj-sp-canvas-page-header-toolbar-panel",ref:this.headerToolbarPanelRef,"data-oj-context":!0},!this.state.canvasExpanded&&(0,o.h)(a.CanvasPageHeader,{componentId:this.uniqueId,pageTitle:e.pageTitle,pageSubtitle:e.pageSubtitle,displayOptions:e.displayOptions,timestamp:e.timestamp,primaryAction:e.primaryAction,badge:e.badge}),this.isCollectionToolbarConfigured()&&(0,o.h)(n.CanvasPageCollectionToolbar,{componentId:this.uniqueId,displayOptions:e.displayOptions,functionalActions:e.functionalActions,zoomLevelOptions:e.zoomLevelOptions,selectedZoomLevelValue:e.selectedZoomLevelValue,layoutViewOptions:e.layoutViewOptions,selectedLayoutViewValue:e.selectedLayoutViewValue,onSpFunctionalAction:e.onSpFunctionalAction,onSelectedLayoutViewValueChanged:this.layoutViewValueChangeHandler,onSelectedZoomLevelValueChanged:this.zoomLevelValueChangeHandler,canvasExpanded:this.state.canvasExpanded,onCanvasExpandedChanged:this.canvasExpandedChangeHandler})),(0,o.h)("div",{"data-otel-hero":"oj-sp-canvas-page.default","data-oj-context":!0,class:"oj-sp-public-primary-content-container"},e.children))}componentDidMount(){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} is mounted`),this.observeHeaderToolbarContainer()}componentDidUpdate(e){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} is updated`)}componentWillUnmount(){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} will unmount`)}};r.defaultProps={primaryAction:{disabled:!0},displayOptions:{save:"off",expand:"off"}},r._metadata={slots:{"":{implicitBusyContext:!0}},properties:{pageTitle:{type:"string"},pageSubtitle:{type:"string"},timestamp:{type:"string"},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]}}},primaryAction:{type:"object",properties:{disabled:{type:"boolean"},label:{type:"string"}}},displayOptions:{type:"object",properties:{save:{type:"string",enumValues:["disabled","on","off"]},expand:{type:"string",enumValues:["on","off"]}}},functionalActions:{type:"Array<object>"},zoomLevelOptions:{type:"Array<object>"},selectedZoomLevelValue:{type:"string",writeback:!0},layoutViewOptions:{type:"Array<object>"},selectedLayoutViewValue:{type:"string",writeback:!0}},events:{spPrimaryAction:{},spCancel:{},spSave:{},spFunctionalAction:{}},extension:{_WRITEBACK_PROPS:["selectedZoomLevelValue","selectedLayoutViewValue"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},r=__decorate([(0,i.customElement)("oj-sp-canvas-page"),__metadata("design:paramtypes",[Object,Object])],r),t.CanvasPage=r})),define("oj-sp/canvas-page/loader",["require","exports","./canvas-page"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPage=void 0,Object.defineProperty(t,"CanvasPage",{enumerable:!0,get:function(){return i.CanvasPage}})})),define("oj-sp/card/components/DragHandle",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>(0,i.h)("div",{className:"oj-listview-drag-handle oj-sp-card-drag-handle",tabIndex:0,"aria-label":e.dragHandleLabel})})),define("oj-sp/internal-resources/components/card-common/private/Heading",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{var t,o,s;const a=(null===(o=null===(t=e.badge)||void 0===t?void 0:t.text)||void 0===o?void 0:o.length)>0,n=(null===(s=e.overlineText)||void 0===s?void 0:s.length)>0,r=()=>{let t="oj-badge oj-sp-card-common-badge oj-badge-sm";const i=e.isFullSizeImageAvailable?"strong":e.badge.style;return t+=e.badge&&e.badge.style?" oj-badge-"+i:"",t+=e.badge&&e.badge.status?" oj-badge-"+e.badge.status:"",t},l=()=>{let e="oj-sm-flex-initial oj-sm-justify-content-center oj-sm-align-self-center";return e+="oj-sp-card-common-max-flex-12","oj-sm-flex-initial oj-sm-justify-content-center oj-sm-align-self-centeroj-sp-card-common-max-flex-12"};return(()=>{var t,o;return(0,i.h)("div",{class:"oj-flex oj-flex-item oj-sm-flex-wrap-nowrap oj-sp-card-common-header  "+(e.isFullSizeImageAvailable?"oj-sm-margin-2x-bottom":"oj-sm-margin-4x-bottom")},a&&(0,i.h)("div",{class:"oj-sp-card-common-badge-container oj-sm-margin-3x-end"},(0,i.h)("span",{title:null===(t=e.badge)||void 0===t?void 0:t.text,class:r()},null===(o=e.badge)||void 0===o?void 0:o.text)),n&&(0,i.h)("div",{class:l()},(0,i.h)("span",{title:e.overlineText,class:"oj-typography-body-xs  oj-line-clamp-1 oj-sp-card-common-break-all oj-sp-card-common-overline "+(e.isFullSizeImageAvailable?"oj-sp-card-common-full-image-text-color":"oj-text-color-primary")},e.overlineText)))})()}})),define("oj-sp/internal-resources/components/card-common/private/PrimaryText",["require","exports","preact","preact/hooks"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,o.useCallback)(()=>{var t;null===(t=e.onSpAddFocusRing)||void 0===t||t.call(e)},[]),s=(0,o.useCallback)(()=>{var t;null===(t=e.onSpRemoveFocusRing)||void 0===t||t.call(e)},[]),a=(0,o.useCallback)(t=>{var i,o,s;"enter"!==(null===(i=null==t?void 0:t.code)||void 0===i?void 0:i.toLowerCase())&&"space"!==(null===(o=null==t?void 0:t.code)||void 0===o?void 0:o.toLowerCase())||(null===(s=e.onSpCardAction)||void 0===s||s.call(e),t.preventDefault(),t.stopPropagation())},[]),n=`oj-typography-body-md oj-typography-bold  ${"lg"===e.imageSize?"oj-line-clamp-3":"oj-line-clamp-2"} ${"full"===e.imageSize?"oj-sp-card-common-full-image-text-color":"oj-text-color-primary"}`,r="oj-flex-item oj-sm-flex-0"+(e.showFocusRing?" oj-sp-card-common-primary-text-link":" oj-sp-card-common-title-ring");return(0,i.h)("div",{class:r,tabIndex:0,role:"link",onKeyPress:a,onFocus:t,onBlur:s},(0,i.h)("span",{title:e.text,class:n},e.text))}})),define("oj-sp/internal-resources/components/card-common/CardUtils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardUtils=void 0;t.CardUtils=class{constructor(){this.DEFAULT_IMAGE_PATH=e.toUrl("../../resources/default_image.png"),this.getImageSrc=e=>(null==e?void 0:e.src)||this.DEFAULT_IMAGE_PATH,this.getImageSizeClass=e=>"oj-sp-card-common-image-"+e+" ",this.getImageClass=(e,t,i,o=!1)=>{let s="oj-sp-card-common-image-object-fit-cover ";return"sm"!==e&&"md"!==e&&"lg"!==e||o?"xl"!==e||o||(s+="oj-sp-card-common-xl-image-rounded-corners "):s+="oj-sp-card-common-image-rounded-corners ",s+=this.getImageSizeClass(e),i||!t?s+="oj-sp-card-common-image-pos-center":t&&("left"===t.position||"right"===t.position||"top"===t.position||"bottom"===t.position||"center"===t.position||"topRight"===t.position||"bottomLeft"===t.position||"bottomRight"===t.position?s+="oj-sp-card-common-image-pos-"+t.position:s+="oj-sp-card-common-image-pos-topLeft"),s}}getAspectRatioClass(e,t){let i="oj-sp-card-common-image-wrapper-16-9";switch("21-9"===(null==t?void 0:t.aspectRatio)&&"full"===e?"":null==t?void 0:t.aspectRatio){case"1-1":i="oj-sp-card-common-image-wrapper-1-1";break;case"4-3":i="oj-sp-card-common-image-wrapper-4-3";break;case"21-9":i="oj-sp-card-common-image-xl-wrapper-21-9";break;default:i="oj-sp-card-common-image-wrapper-16-9"}return i}}})),define("oj-sp/internal-resources/components/card-common/private/RectangularImage",["require","exports","preact","preact/hooks","../CardUtils"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=new s.CardUtils,[a,n]=(0,o.useState)({imageSrc:t.getImageSrc(e.image),imageLoadError:!1});(0,o.useEffect)(()=>{n({imageSrc:t.getImageSrc(e.image),imageLoadError:!1})},[e.image]);const r=(0,o.useCallback)(()=>{n({imageSrc:t.DEFAULT_IMAGE_PATH,imageLoadError:!0})},[]);return(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 oj-flex oj-sm-justify-content-center"},(0,i.h)("div",{class:"oj-sp-card-common-image-xl-wrapper "+t.getAspectRatioClass(e.imageSize,e.image)},(0,i.h)("img",{class:t.getImageClass("xl",e.image,a.imageLoadError,e.disableRoundedCorners),src:a.imageSrc,onError:r,role:"presentation"})))}})),define("oj-sp/internal-resources/components/card-common/private/SecondaryText",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{var t,o,s;const a=(null===(t=e.secondaryText)||void 0===t?void 0:t.length)>0,n=(null===(o=e.secondaryTextLine2)||void 0===o?void 0:o.length)>0,r=(null===(s=e.secondaryTextLine3)||void 0===s?void 0:s.length)>0,l="full"===e.imageSize;let d=e.secondaryTextLine2||e.secondaryTextLine3?1:2;"lg"===e.imageSize&&(d=e.secondaryTextLine2||e.secondaryTextLine3?1:3),"full"===e.imageSize&&(d=1);const c=a?"":"oj-sm-margin-2x-top",p=a||n?"":"oj-sm-margin-2x-top",u=(e,t,o,s)=>(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-initial "+o,"data-secondary-text":"secondary_text"+s},(0,i.h)("span",{title:e,class:`oj-sp-card-flex-no-shrink oj-typography-body-sm  oj-line-clamp-${t} ${1===t?"oj-sp-card-common-break-all":""} ${l?"oj-sp-card-common-full-image-text-color":"oj-text-color-secondary"}`},e));return(0,i.h)(i.Fragment,null,a&&u(e.secondaryText,d,"oj-sm-margin-2x-top",""),n&&"full"!==e.imageSize&&u(e.secondaryTextLine2,1,c,"2"),r&&"lg"===e.imageSize&&u(e.secondaryTextLine3,1,p,"3"))}})),define("oj-sp/internal-resources/components/card-common/private/SquareImage",["require","exports","preact","preact/hooks","../CardUtils"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=new s.CardUtils,[a,n]=(0,o.useState)({imageSrc:t.getImageSrc(e.image),imageLoadError:!1});(0,o.useEffect)(()=>{n({imageSrc:t.getImageSrc(e.image),imageLoadError:!1})},[e.image]);const r=(0,o.useCallback)(()=>{n({imageSrc:t.DEFAULT_IMAGE_PATH,imageLoadError:!0})},[]);return(0,i.h)("div",{class:"oj-flex-item oj-sm-flex-0 oj-flex oj-sm-justify-content-center oj-sm-margin-6x-start"},(0,i.h)("img",{class:t.getImageClass(e.imageSize,e.image,a.imageLoadError),src:a.imageSrc,onError:r,role:"presentation"}))}})),define("oj-sp/internal-resources/components/card-common/private/TertiaryText",["require","exports","preact","preact/hooks"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,o.useCallback)(t=>{var i;null===(i=e.onSpActionHandler)||void 0===i||i.call(e),t.preventDefault(),t.stopPropagation()},[]),s=(0,o.useCallback)(t=>{var i,o,s;"enter"!==(null===(i=null==t?void 0:t.code)||void 0===i?void 0:i.toLowerCase())&&"space"!==(null===(o=null==t?void 0:t.code)||void 0===o?void 0:o.toLowerCase())||(null===(s=e.onSpActionHandler)||void 0===s||s.call(e),t.preventDefault(),t.stopPropagation())},[]);return(0,i.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap","data-tertiary-text":!0},(0,i.h)("div",{class:"oj-flex-item oj-typography-body-sm "+e.tertiaryTextMargin},(()=>{const o="off"!==e.enableNavigationAction?"oj-text-color-disabled":"oj-text-color-primary";return"on"===e.enableNavigationAction?(0,i.h)("a",{href:"#",class:"oj-line-clamp-1 oj-sp-card-common-break-all oj-sp-card-common-tertiary-text-link",title:e.tertiaryText,onClick:t,onKeyPress:s},e.tertiaryText):(0,i.h)("span",{title:e.tertiaryText,class:"oj-typography-body-sm  oj-line-clamp-1 oj-sp-card-common-break-all "+o},e.tertiaryText)})()))}})),define("oj-sp/internal-resources/components/card-common/CardCommon",["require","exports","oj-sp/internal-resources/components/messages-item-level/messages-item-level","preact","preact/hooks","./private/Heading","./private/PrimaryText","./private/RectangularImage","./private/SecondaryText","./private/SquareImage","./private/TertiaryText"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,s.useCallback)(()=>{var t;null===(t=e.onSpAddFocusRing)||void 0===t||t.call(e)},[]),p=(0,s.useCallback)(()=>{var t;null===(t=e.onSpRemoveFocusRing)||void 0===t||t.call(e)},[]),u=(0,s.useCallback)(()=>{var t;null===(t=e.onSpCardAction)||void 0===t||t.call(e)},[]),h=(0,s.useCallback)(()=>{var t;null===(t=e.onSpNavigationAction)||void 0===t||t.call(e)},[]);return(()=>{var s;const{isItemLevelMessageAvailable:m,isHeaderAvailable:g,isSecondaryTextAvailable:y,isSecondaryTextLine2Available:f,isSecondaryTextLine3Available:b,isTertiaryTextAvailable:v,isSquareImageAvailable:j,isExtraLargeImageAvailable:A,isFullSizeImageAvailable:C}=(()=>{var t,i,o,s,a,n,r,l,d;return{isItemLevelMessageAvailable:(null===(i=null===(t=e.itemLevelMessage)||void 0===t?void 0:t.text)||void 0===i?void 0:i.length)>0,isHeaderAvailable:(null===(o=e.overlineText)||void 0===o?void 0:o.length)>0||(null===(a=null===(s=e.badge)||void 0===s?void 0:s.text)||void 0===a?void 0:a.length)>0,isSecondaryTextAvailable:(null===(n=e.secondaryText)||void 0===n?void 0:n.length)>0,isSecondaryTextLine2Available:(null===(r=e.secondaryTextLine2)||void 0===r?void 0:r.length)>0,isSecondaryTextLine3Available:(null===(l=e.secondaryTextLine3)||void 0===l?void 0:l.length)>0,isTertiaryTextAvailable:(null===(d=e.tertiaryText)||void 0===d?void 0:d.length)>0,isSquareImageAvailable:"sm"===e.imageSize||"md"===e.imageSize||"lg"===e.imageSize,isExtraLargeImageAvailable:"xl"===e.imageSize,isFullSizeImageAvailable:"full"===e.imageSize}})();return(0,o.h)("div",{class:""+(C?" oj-sp-card-common-full-size-image-container":"")},(A||C)&&(0,o.h)(r.default,{image:e.image,imageSize:e.imageSize,disableRoundedCorners:e.disableRoundedCorners}),(0,o.h)("div",{class:(()=>{let t="oj-flex-item oj-sm-12 oj-sm-flex-direction-column oj-sm-align-items-flex-start oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal";return e.disableTopPadding||(t+=" oj-sm-padding-4x-top oj-lg-padding-6x-top"),e.disableBottomPadding||(t+=" oj-sm-padding-4x-bottom oj-lg-padding-6x-bottom"),t})()+(C?" oj-sp-card-common-full-size-image-body":"")},g&&(0,o.h)(a.default,{badge:null==e?void 0:e.badge,isFullSizeImageAvailable:C,overlineText:e.overlineText}),(0,o.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column"},(0,o.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap"},(0,o.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column oj-sp-card-common-flex-shrink"},(0,o.h)(n.default,{text:e.primaryText,imageSize:e.imageSize,showFocusRing:e.showFocusRing,onSpAddFocusRing:t,onSpRemoveFocusRing:p,onSpCardAction:u}),(y||f||b)&&(0,o.h)(l.default,{secondaryText:e.secondaryText,secondaryTextLine2:e.secondaryTextLine2,secondaryTextLine3:e.secondaryTextLine3,imageSize:e.imageSize}),!C&&v&&(0,o.h)(c.default,{onSpActionHandler:h,enableNavigationAction:null===(s=e.navigationAction)||void 0===s?void 0:s.display,tertiaryText:e.tertiaryText,tertiaryTextMargin:"oj-sm-margin-2x-top"})),j&&(0,o.h)(d.default,{image:null==e?void 0:e.image,imageSize:e.imageSize}))),m&&!C&&(0,o.h)("div",{class:"oj-sm-margin-4x-top oj-sp-card_messages_item_level_container"},(0,o.h)(i.MessagesItemLevel,{text:e.itemLevelMessage.text,severity:e.itemLevelMessage.severity}))))})()}})),define("css!oj-sp/card-footer/card-footer-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/card-footer/card-footer",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojkeyset","ojs/ojcontext","oj-sp/internal-resources/components/collection-toolbars/responsive-toolbar-calculator","oj-sp/common/action","ojs/ojresponsiveknockoututils","ojs/ojavatar","ojs/ojbutton","ojs/ojknockout","ojs/ojselector","ojs/ojmenu","ojs/ojselector","ojs/ojtoolbar","ojs/ojinputnumber","css!./card-footer-styles"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.CardFooter=void 0,function(e){e.PRIMARY="_primary_",e.SECONDARY="_secondary_"}(p||(p={}));let u=class extends o.Component{constructor(e){var t;super(e),this.validationHint={validatorHint:"none"},this.quantityRef=(0,o.createRef)(),this.isActionLink=e=>e&&e.length>0&&e[0].type===d.ActionType.NAVIGATION,this.calculateAvatar=e=>{const t=e.avatar;return!(!t||!t.src&&!t.initials)},this.calculateIconFont=e=>{const t=e.icon;return!(!t||!t.class)},this.getQuantityChanger=e=>{var t,i,s;return(0,o.h)("oj-input-number",{class:"oj-sp-card-footer-quantity-changer",min:0,max:null!==(i=null===(t=e.quantityOptions)||void 0===t?void 0:t.max)&&void 0!==i?i:void 0,value:null!==(s=e.quantity)&&void 0!==s?s:0,step:1,onvalueChanged:this.onQuantityChanged,onvalidChanged:this.onQuantityValidChanged,onKeyPress:this.eatNonNumbers,labelEdge:"none","aria-label":this.res.objectQuantity,displayOptions:this.validationHint,ref:this.quantityRef,"data-oj-clickthrough":"disabled"})},this.onQuantityChanged=e=>{var t,i;this.isQuantityUpdatedFromInternal=!0,null===(i=(t=this.props).onQuantityChanged)||void 0===i||i.call(t,e.detail.value)},this.onQuantityValidChanged=e=>{var t,i;null===(i=(t=this.props).onQuantityValidChanged)||void 0===i||i.call(t,e.detail.value)},this.hasQuantity=()=>{var e,t;return"on"===(null===(e=this.props.displayOptions)||void 0===e?void 0:e.quantity)&&"multiple"===(null===(t=this.props.selector)||void 0===t?void 0:t.selectionMode)},this.calculateReadonlyContentType=e=>{const t=e.footerText,i=this.calculateAvatar(e),o=this.calculateIconFont(e);return t?t.label&&!t.value?void a.error("Invalid footer text, you must provide a value."):i?"av":o?"ic":"ro":(i?a.error("Invalid avatar, footer text is expected."):o&&a.error("Invalid Icon, footer text is expected."),"")},this.calculateMaxPrimaryActions=e=>{let t="",i="",o=[];if((null==e?void 0:e.length)>0){const s=[];let n=0,r=d.ActionType.DEFAULT;for(let t=0;t<e.length&&s.length<2;t++){const i=Object.assign({},e[t]);if(i)if(i.id&&i.label){if(void 0===i.display||"off"!==i.display){n++;let e=!0;1===n&&(r=i.type?i.type:d.ActionType.DEFAULT),2===n&&(r===d.ActionType.NAVIGATION?(e=!1,a.warn("Only first primary action can be a navigation link. The rest of the actions will be ignored.")):(r!==d.ActionType.PROMOTED&&r!==d.ActionType.DEEMPHASIZED||i.type&&i.type===r&&(a.warn("Only one primary action can be promoted or deemphasized. The second one is set to be default."),i.type=d.ActionType.DEFAULT),i.type&&i.type===d.ActionType.NAVIGATION&&(e=!1,a.warn("Only first primary action can be a navigation link, the link will be ignored.")))),e&&s.push(i)}}else a.error("Invalid primary action - id and label are all required - id: "+i.id+" icon: "+i.icon+" label: "+i.label)}if(s&&s.length&&s[0].type===d.ActionType.NAVIGATION){t=s[0].label;let e="oj-link-standalone oj-sp-card-footer-link oj-typography-body-md oj-line-clamp-1 oj-sp-card-footer-word-break oj-sm-margin-2x-top";"disabled"===s[0].display&&(e+=" oj-disabled"),i=e}s&&2===s.length&&(s[1].type!==d.ActionType.PROMOTED&&s[0].type!==d.ActionType.DEEMPHASIZED||s.reverse()),o=s}return{linkLabel:t,linkCSS:i,primaryActions:o}},this.calculateMaxSecondaryActions=(e,t)=>{let i=!1,o=[],s=[];if(t){const n=[];let r=0;for(let e=0;e<t.length&&r<6;e++){const i=t[e];i&&(i.id&&i.icon&&i.label?void 0!==i.display&&"off"===i.display||(n.push(i),r++):a.error("Invalid primary action - id, icon and label are all required - id: "+i.id+" icon: "+i.icon+" label: "+i.label))}const l=e.length;let d=!1;d=this.isActionLink(e)||l<2?r>3:r>1,d?(i=!0,this.isActionLink(e)||l<2?(o=n.slice(0,2),s=n.slice(2)):s=n):(i=!1,o=n)}for(let e=0;e<s.length;e++)s[e].category=p.SECONDARY;return{displayOverflowMenu:i,secondaryActions:o,actionsInMenu:s}},this.calculateMaxActions=e=>{const{linkLabel:t,linkCSS:i,primaryActions:o}=this.calculateMaxPrimaryActions(e.primaryActions),{displayOverflowMenu:s,secondaryActions:a,actionsInMenu:n}=this.calculateMaxSecondaryActions(o,e.secondaryActions);let r=!0;for(let e=0;e<o.length;e++)if(!o[e].icon){r=!1;break}return{linkLabel:t,linkCSS:i,primaryActions:o,displayOverflowMenu:s,secondaryActions:a,actionsInMenu:n,displayIconInMenuOption:r}},this.generateLayout=(e,t)=>"b"+e+"i"+t,this.calculateFooterWidth=(e,t,i,o)=>{if("av"===e||"ic"===e||"ro"===e||""===e){const i=""===e?0:3*this.remFontSize;return this.getReadonlyContentWidth(e,t)+i+this.getIconToolBarWidth(o)}{const e=0===i.length&&0===o?0:3*this.remFontSize;return this.getButtonToolBarWidth(i)+e+this.getIconToolBarWidth(o)}},this.getFooterWidth=()=>{if(!this.base)return-1;const e=getComputedStyle(this.base.querySelector(".oj-sp-card-footer-toolbar-container"));return e?parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight):-1},this.resetActionContext=()=>{this.actionContext={currentLayout:"",layouts:[]}},this.calculateActions=e=>{if(""===this.actionContext.currentLayout){const t=this.calculateMaxActions(e),i=this.cloneObject(t);let o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0);i.layout=this.generateLayout(o,s);const a=this.calculateStartAlignedType(e,i.primaryActions);i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i);const n=1===o&&i.primaryActions[0].type===d.ActionType.NAVIGATION;if(2===o&&1===s){const i=this.cloneObject(t);i.displayOverflowMenu?(i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[1]),{category:p.PRIMARY})),i.primaryActions.pop()):(i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[1]),{category:p.PRIMARY})),i.primaryActions.pop()),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i);const n=this.cloneObject(t);n.displayOverflowMenu?(n.actionsInMenu.unshift(Object.assign(Object.assign({},n.primaryActions[1]),{category:p.PRIMARY})),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.primaryActions[0]),{category:p.PRIMARY})),n.primaryActions.pop(),n.primaryActions.pop()):(n.displayOverflowMenu=!0,n.actionsInMenu.unshift(Object.assign(Object.assign({},n.secondaryActions[0]),{category:p.SECONDARY})),n.secondaryActions.pop(),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.primaryActions[1]),{category:p.PRIMARY})),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.primaryActions[0]),{category:p.PRIMARY})),n.primaryActions.pop(),n.primaryActions.pop()),o=n.primaryActions.length,s=n.secondaryActions.length+(n.displayOverflowMenu?1:0),n.layout=this.generateLayout(o,s),n.width=this.calculateFooterWidth(a,e.footerText,n.primaryActions,s),this.actionContext.layouts.push(n)}else if(2===o&&0===s){const i=this.cloneObject(t);i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[1]),{category:p.PRIMARY})),i.primaryActions.pop(),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i);const n=this.cloneObject(t);n.displayOverflowMenu=!0,n.actionsInMenu.unshift(Object.assign(Object.assign({},n.primaryActions[1]),{category:p.PRIMARY})),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.primaryActions[0]),{category:p.PRIMARY})),n.primaryActions.pop(),n.primaryActions.pop(),o=n.primaryActions.length,s=n.secondaryActions.length+(n.displayOverflowMenu?1:0),n.layout=this.generateLayout(o,s),n.width=this.calculateFooterWidth(a,e.footerText,n.primaryActions,s),this.actionContext.layouts.push(n)}else if(1===o&&3===s){const i=this.cloneObject(t);i.displayOverflowMenu?(i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.secondaryActions.pop()):(i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[2]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop()),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i);const r=this.cloneObject(t);if(r.displayOverflowMenu?(r.actionsInMenu.unshift(Object.assign(Object.assign({},r.secondaryActions[1]),{category:p.SECONDARY})),r.actionsInMenu.unshift(Object.assign(Object.assign({},r.secondaryActions[0]),{category:p.SECONDARY})),r.secondaryActions.pop(),r.secondaryActions.pop()):(r.displayOverflowMenu=!0,r.actionsInMenu.unshift(Object.assign(Object.assign({},r.secondaryActions[2]),{category:p.SECONDARY})),r.actionsInMenu.unshift(Object.assign(Object.assign({},r.secondaryActions[1]),{category:p.SECONDARY})),r.actionsInMenu.unshift(Object.assign(Object.assign({},r.secondaryActions[0]),{category:p.SECONDARY})),r.secondaryActions.pop(),r.secondaryActions.pop(),r.secondaryActions.pop()),o=r.primaryActions.length,s=r.secondaryActions.length+(r.displayOverflowMenu?1:0),r.layout=this.generateLayout(o,s),r.width=this.calculateFooterWidth(a,e.footerText,r.primaryActions,s),this.actionContext.layouts.push(r),!n){const i=this.cloneObject(t);i.displayOverflowMenu?(i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop(),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[0]),{category:p.PRIMARY})),i.primaryActions.pop()):(i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[2]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop(),i.secondaryActions.pop(),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[0]),{category:p.PRIMARY})),i.primaryActions.pop()),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i)}}else if(1===o&&2===s){const i=this.cloneObject(t);if(i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop(),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i),!n){const i=this.cloneObject(t);i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop(),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[0]),{category:p.PRIMARY})),i.primaryActions.pop(),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i)}}else if(1===o&&1===s){const i=this.cloneObject(t);i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[0]),{category:p.PRIMARY})),i.primaryActions.pop(),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i)}else if(1===o&&0===s){if(!n){const i=this.cloneObject(t);i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.primaryActions[0]),{category:p.PRIMARY})),i.primaryActions.pop(),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i)}}else if(0===o&&3===s){const i=this.cloneObject(t);i.displayOverflowMenu?(i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.secondaryActions.pop()):(i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[2]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop()),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i);const n=this.cloneObject(t);n.displayOverflowMenu?(n.actionsInMenu.unshift(Object.assign(Object.assign({},n.secondaryActions[1]),{category:p.SECONDARY})),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.secondaryActions[0]),{category:p.SECONDARY})),n.secondaryActions.pop(),n.secondaryActions.pop()):(n.displayOverflowMenu=!0,n.actionsInMenu.unshift(Object.assign(Object.assign({},n.secondaryActions[2]),{category:p.SECONDARY})),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.secondaryActions[1]),{category:p.SECONDARY})),n.actionsInMenu.unshift(Object.assign(Object.assign({},n.secondaryActions[0]),{category:p.SECONDARY})),n.secondaryActions.pop(),n.secondaryActions.pop(),n.secondaryActions.pop()),o=n.primaryActions.length,s=n.secondaryActions.length+(n.displayOverflowMenu?1:0),n.layout=this.generateLayout(o,s),n.width=this.calculateFooterWidth(a,e.footerText,n.primaryActions,s),this.actionContext.layouts.push(n)}else if(0===o&&2===s){const i=this.cloneObject(t);i.displayOverflowMenu=!0,i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[1]),{category:p.SECONDARY})),i.actionsInMenu.unshift(Object.assign(Object.assign({},i.secondaryActions[0]),{category:p.SECONDARY})),i.secondaryActions.pop(),i.secondaryActions.pop(),o=i.primaryActions.length,s=i.secondaryActions.length+(i.displayOverflowMenu?1:0),i.layout=this.generateLayout(o,s),i.width=this.calculateFooterWidth(a,e.footerText,i.primaryActions,s),this.actionContext.layouts.push(i)}}const t=this.getFooterWidth();if(t<0)return this.actionContext.currentLayout=this.actionContext.layouts[0].layout,this.calculateMaxActions(e);for(let e=0;e<this.actionContext.layouts.length;e++)if(t>this.actionContext.layouts[e].width)return this.actionContext.currentLayout=this.actionContext.layouts[e].layout,this.actionContext.layouts[e];const i=this.actionContext.layouts.length>0&&1===this.actionContext.layouts[0].primaryActions.length&&this.actionContext.layouts[0].primaryActions[0].type===d.ActionType.NAVIGATION,o=this.actionContext.layouts.length>0&&0===this.actionContext.layouts[0].primaryActions.length;if(i||o){const e=this.actionContext.layouts.length-1;return this.actionContext.currentLayout=this.actionContext.layouts[e].layout,this.actionContext.layouts[e]}return this.calculateMaxActions(e)},this.calculateStartAlignedType=(e,t)=>e.selector&&"multiple"===e.selector.selectionMode?"select":e.primaryActions&&e.primaryActions.length>0?this.isActionLink(t)?"al":"pa":this.calculateReadonlyContentType(e),this.calculateEndAlignedType=()=>this.hasQuantity()?"qt":"sa",this.primaryActionHandler=e=>{var t,i;const o=e.target.getAttribute("data-primary-action");null===(i=(t=this.props).onSpPrimaryAction)||void 0===i||i.call(t,{actionId:o}),e.preventDefault(),e.stopPropagation()},this.secondaryActionHandler=e=>{var t,i;const o=e.target.getAttribute("data-secondary-action");null===(i=(t=this.props).onSpSecondaryAction)||void 0===i||i.call(t,{actionId:o}),e.preventDefault(),e.stopPropagation()},this.overflowActionHandler=e=>{var t,i,o,s;const a=e.detail.selectedValue,n=a.indexOf(p.PRIMARY),r=a.indexOf(p.SECONDARY);let l;0===n?(l=a.slice(p.PRIMARY.length),null===(i=(t=this.props).onSpPrimaryAction)||void 0===i||i.call(t,{actionId:l})):0===r&&(l=a.slice(p.SECONDARY.length),null===(s=(o=this.props).onSpSecondaryAction)||void 0===s||s.call(o,{actionId:l}))},this.handleSelectedChanged=e=>{var t,i;null===(i=(t=this.props).onSelectedKeysChanged)||void 0===i||i.call(t,e.detail.value)},this.eatNonNumbers=e=>{const t=e.which?e.which:e.keyCode,i=String.fromCharCode(t),o=i.replace(/[^0-9.,]/g,"");i!==o&&e.preventDefault()},this.onContentResize=()=>{const e=this.getFooterWidth();if(e<0)return;const t=this.getRemFontSize();if(this.remFontSize!==t)return this.remFontSize=t,this.resetActionContext(),void this.setState({actionLayoutChanged:!0});let i;for(let t=0;t<this.actionContext.layouts.length;t++)if(e>this.actionContext.layouts[t].width){i=this.actionContext.layouts[t].layout;break}if(!i){const e=this.actionContext.layouts.length>0&&1===this.actionContext.layouts[0].primaryActions.length&&this.actionContext.layouts[0].primaryActions[0].type===d.ActionType.NAVIGATION,t=this.actionContext.layouts.length>0&&0===this.actionContext.layouts[0].primaryActions.length;if(e||t){const e=this.actionContext.layouts.length-1;i=this.actionContext.layouts[e].layout}}this.actionContext.currentLayout!==i&&this.setState({actionLayoutChanged:!0})},this.refreshToolbar=async e=>{var t;const i=this.base.querySelector(".oj-sp-card-footer-container");if(i){await r.getContext(i).getBusyContext().whenReady();const o=null===(t=this.base)||void 0===t?void 0:t.querySelector(e);o&&o.refresh()}},this.menuButtonHandler=e=>{e.stopPropagation()},this.componentDidMount=()=>{this.resizeObserver=new ResizeObserver(()=>{this.onContentResize()}),this.resizeObserver.observe(this.base)},this.componentDidUpdate=(e,t)=>{this.refreshToolbar(".oj-sp-card-footer-secondary-toolbar"),this.refreshToolbar(".oj-sp-card-footer-primary-toolbar")},this.componentWillUnmount=()=>{this.resizeObserver.disconnect()},this.uid=null!==(t=this.props.id)&&void 0!==t?t:"card_footer_"+(0,i.getUniqueId)(),this.res=Object.assign({},s),this.isQuantityUpdatedFromInternal=!1,this.hasQuantityChanger=!1,this.actionContext={currentLayout:"",layouts:[]},this.screenRange=c.createScreenRangeObservable(),this.responsiveCalculator=new l.ResponsiveToolbarCalculator,this.remFontSize=16,this.state={isSmallMediumScreen:"sm"===this.screenRange()||"md"===this.screenRange(),actionLayoutChanged:!1},this.screenRange.subscribe(e=>{const t="sm"===e||"md"===e;this.state.isSmallMediumScreen!==t&&this.setState({isSmallMediumScreen:t})})}cloneObject(e){return JSON.parse(JSON.stringify(e))}getRemFontSize(){let e=16;const t=window.getComputedStyle(document.body).getPropertyValue("font-size").match(/^(\d*\.?\d*)px$/);if(t&&t.length>=2){const i=Number(t[1]);e=isNaN(i)?16:i}return e}getButtonToolBarWidth(e){const t=1===e.length&&e[0].type===d.ActionType.NAVIGATION?this.getLinkClassNames():this.getButtonClassNames(),i=this.remFontSize>=14?32:2*this.remFontSize,o=this.remFontSize/2,s=this.remFontSize;if(e&&e.length>0){if(2===e.length)return this.responsiveCalculator.calculateTextWidth(e[0].label,{classNames:t})+this.responsiveCalculator.calculateTextWidth(e[1].label,{classNames:t})+o+2*i;if(1===e.length)return e[0].type===d.ActionType.NAVIGATION?this.responsiveCalculator.calculateTextWidth(e[0].label,{classNames:t})+s:this.responsiveCalculator.calculateTextWidth(e[0].label,{classNames:t})+i}return 0}getReadonlyContentWidth(e,t){const i="av"===e||"ic"===e?2*this.remFontSize:0,o=this.remFontSize;if(t){return i+Math.max(this.responsiveCalculator.calculateTextWidth(t.label,{classNames:this.getLabelClassNames()}),this.responsiveCalculator.calculateTextWidth(t.value,{classNames:this.getTextClassNames()}))+o}return 0}getButtonClassNames(){return"oj-button-sm oj-button oj-button-text-only"}getLabelClassNames(){return"oj-sp-card-footer-text-label oj-typography-body-sm oj-text-color-secondary oj-line-clamp-1 oj-sp-card-footer-word-break oj-sp-card-footer-ff-fix"}getTextClassNames(){return"oj-sp-card-footer-text-value oj-typography-body-md oj-typography-semi-bold oj-line-clamp-1 oj-sp-card-footer-word-break"}getLinkClassNames(){return"oj-link-standalone oj-sp-card-footer-link oj-typography-body-md oj-line-clamp-1 oj-sp-card-footer-word-break"}getIconToolBarWidth(e){return 36*e*(this.remFontSize/16)}linkActionHandler(e,t){var i,o;if((null==e?void 0:e.length)&&"disabled"!==e[0].display){const t=e[0].id;null===(o=(i=this.props).onSpPrimaryAction)||void 0===o||o.call(i,{actionId:t})}t.preventDefault(),t.stopPropagation()}getCardFooterButtons(e,t,i,s,a){const{uid:r,res:l,state:d,props:c}=this;switch(e){case"select":{const e=c.selectedKeys?c.selectedKeys:new n.KeySetImpl;return(0,o.h)("oj-selector",{selectionMode:"multiple","aria-label":c.selector.ariaLabel,selectedKeys:e,onselectedKeysChanged:this.handleSelectedChanged,rowKey:c.selector.rowKey,class:"oj-sp-card-footer-selector-shift","data-oj-clickthrough":"disabled"})}case"al":return(0,o.h)("a",{className:a,"data-oj-clickthrough":"disabled",href:"#",onClick:this.linkActionHandler.bind(this,i)},s);case"pa":return(0,o.h)("oj-toolbar",{"aria-label":l.actions,class:"oj-sp-card-footer-primary-toolbar oj-sm-flex-wrap-nowrap","data-oj-clickthrough":"disabled"},i.map(e=>d.isSmallMediumScreen&&t?(0,o.h)("oj-button",{"data-primary-action":e.id,disabled:"disabled"===e.display,class:"oj-button-sm oj-flex-item  "+(this.state.isSmallMediumScreen&&t?"oj-sm-width-full":""),chroming:e.type&&"default"!==e.type?"promoted"===e.type?"outlined":"borderless":"solid",onojAction:this.primaryActionHandler},e.label):(0,o.h)("oj-button",{"data-primary-action":e.id,disabled:"disabled"===e.display,class:"oj-button-sm  "+(this.state.isSmallMediumScreen&&t?"oj-sm-width-full":""),chroming:e.type&&"default"!==e.type?"promoted"===e.type?"outlined":"borderless":"solid",onojAction:this.primaryActionHandler},e.label)));case"av":case"ro":case"ic":return(0,o.h)("div",{className:"oj-flex oj-sm-flex-wrap-nowrap"},"av"===e&&(0,o.h)("div",{className:"oj-flex-item oj-sm-flex-initial oj-sm-padding-1x-top oj-sm-padding-4x-end"},(0,o.h)("oj-avatar",{size:"xxs",initials:c.avatar.initials,src:c.avatar.src})),"ic"===e&&c.icon&&(0,o.h)("div",{className:"oj-flex-item oj-sm-flex-initial oj-sp-card-footer-icon oj-sm-padding-4x-end"},(0,o.h)("div",{className:"oj-sp-card-footer-icon-font "+c.icon.class})),(0,o.h)("div",{className:"oj-flex-item oj-line-clamp-1 oj-sp-card-footer-word-break "+(c.footerText&&c.footerText.label?"":"oj-sm-padding-2x-top")},c.footerText&&c.footerText.label&&(0,o.h)("div",{className:"oj-sp-card-footer-text-label oj-typography-body-sm oj-text-color-secondary oj-line-clamp-1 oj-sp-card-footer-word-break oj-sp-card-footer-ff-fix",title:c.footerText?c.footerText.label:null},c.footerText?c.footerText.label:""),(0,o.h)("div",{className:"oj-sp-card-footer-text-value oj-typography-body-md oj-text-color-primary oj-typography-semi-bold oj-line-clamp-1 oj-sp-card-footer-word-break",title:c.footerText?c.footerText.value:null},c.footerText?c.footerText.value:"")))}return null}validate(){var e,t;return null===(t=null===(e=this.quantityRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.validate()}render(e){const{uid:t,res:i}=this,{linkLabel:s,linkCSS:a,primaryActions:n,displayOverflowMenu:r,secondaryActions:l,actionsInMenu:d,displayIconInMenuOption:c}=this.calculateActions(e),p=this.calculateStartAlignedType(e,n),u=this.calculateEndAlignedType(),h=n.length>0&&0===l.length&&0===d.length;return this.hasQuantityChanger="qt"===u,(0,o.h)("div",{ref:e=>this.base=e},(0,o.h)("div",{className:"oj-sp-card-footer-container "+(e.emphasized?"oj-sp-card-footer-container-neutral-fill":""),"data-oj-context":!0},(0,o.h)("div",{className:"oj-flex oj-sm-justify-content-space-between oj-sp-card-footer-toolbar-container oj-sm-flex-wrap-nowrap oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal "+("qt"===u?" oj-sm-align-items-center":" oj-sm-padding-6x-top")},(0,o.h)("div",{className:"oj-flex-item"},this.getCardFooterButtons(p,h,n,s,a)),(0,o.h)("div",{className:"oj-flex-item oj-sm-flex-initial oj-sp-card-footer-secondary"+(r?" oj-sp-card-footer-display-overflow":"")+("qt"===u?" oj-sp-card-footer-quantity-changer-end-shift":"")},this.hasQuantityChanger&&this.getQuantityChanger(e),"sa"===u&&"select"!==p&&"qt"!==p&&(l.length>0||r)&&(0,o.h)("div",null,(0,o.h)("oj-toolbar",{"aria-label":i.secondaryActions,class:"oj-sp-card-footer-secondary-toolbar oj-sm-flex-wrap-nowrap",chroming:"borderless","data-oj-clickthrough":"disabled"},l.map(e=>(0,o.h)("oj-button",{display:"icons","data-secondary-action":e.id,disabled:"disabled"===e.display,class:"oj-button-sm",onojAction:this.secondaryActionHandler,chroming:"borderless"},(0,o.h)("div",{slot:"startIcon",className:e.icon}),e.label)),r&&(0,o.h)("oj-menu-button",{chroming:"borderless",display:"icons",class:"oj-button-sm","aria-label":i.actions,title:i.moreActions,onojAction:this.menuButtonHandler},(0,o.h)("oj-menu",{id:t+"_more-actions-menu",slot:"menu",onojMenuAction:this.overflowActionHandler,"aria-label":i.actions},d.map(e=>(0,o.h)("oj-option",{key:e.id,value:e.category+e.id,disabled:"disabled"===e.display},c&&(0,o.h)("div",{slot:"startIcon",className:e.icon}),e.label))))))))))}isPropValueChanged(e,t){return e!==t&&JSON.stringify(e)!==JSON.stringify(t)}shouldComponentUpdate(e,t){return this.isPropValueChanged(this.props.primaryActions,e.primaryActions)||this.isPropValueChanged(this.props.secondaryActions,e.secondaryActions)||this.isPropValueChanged(this.props.footerText,e.footerText)||this.isPropValueChanged(this.props.avatar,e.avatar)||this.isPropValueChanged(this.props.icon,e.icon)?(this.resetActionContext(),!0):!this.isQuantityUpdatedFromInternal||(this.isQuantityUpdatedFromInternal=!1,!1)}};u.observedAttributes=["id"],u._metadata={properties:{displayOptions:{type:"object",properties:{quantity:{type:"string",enumValues:["on","off"]}}},footerText:{type:"object",properties:{label:{type:"string"},value:{type:"string"}}},quantity:{type:"number",writeback:!0},quantityValid:{type:"string",readOnly:!0,writeback:!0},quantityOptions:{type:"object",properties:{max:{type:"number"}}},avatar:{type:"object",properties:{initials:{type:"string"},src:{type:"string"}}},icon:{type:"object",properties:{class:{type:"string"}}},emphasized:{type:"boolean"},primaryActions:{type:"Array<object>"},secondaryActions:{type:"Array<object>"},selectedKeys:{type:"object",writeback:!0},selector:{type:"object",properties:{rowKey:{type:"any"},selectionMode:{type:"string",enumValues:["multiple","single"]},ariaLabel:{type:"string"}}}},events:{spPrimaryAction:{},spSecondaryAction:{}},extension:{_WRITEBACK_PROPS:["quantity","quantityValid","selectedKeys"],_READ_ONLY_PROPS:["quantityValid"],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{validate:{}}},u=__decorate([(0,i.customElement)("oj-sp-card-footer"),__metadata("design:paramtypes",[Object])],u),t.CardFooter=u})),define("oj-sp/card-footer/loader",["require","exports","./card-footer"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardFooter=void 0,Object.defineProperty(t,"CardFooter",{enumerable:!0,get:function(){return i.CardFooter}})})),define("css!oj-sp/card/card-styles",[],(function(){})),define("css!oj-sp/internal-resources/components/card-common/card-common-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/card/card",["require","exports","ojs/ojvcomponent","preact","./components/DragHandle","oj-sp/internal-resources/components/card-common/CardCommon","oj-sp/card-footer/loader","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","css!./card-styles","css!oj-sp/internal-resources/components/card-common/card-common-styles"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;let l=class extends o.Component{constructor(e){var t;super(e),this.createRef=e=>{this.contentElem=e},this.onCardClick=e=>{var t;this.props.selector&&"single"===(null===(t=this.props.selector)||void 0===t?void 0:t.selectionMode)||!this.props.onSpCardAction||(this.props.onSpCardAction(),e.preventDefault(),e.stopPropagation())},this.cardKeyPressHandler=()=>{var e,t;null===(t=(e=this.props).onSpCardAction)||void 0===t||t.call(e)},this.focusOnCard=()=>{this.contentElem.classList.add("oj-sp-card-title-ring-parent")},this.removeFocusFromCard=()=>{this.contentElem.classList.remove("oj-sp-card-title-ring-parent")},this.linkActionHandler=()=>{var e,t;null===(t=null===(e=this.props)||void 0===e?void 0:e.onSpNavigationAction)||void 0===t||t.call(e)},this.handleSelectedKeysChange=e=>{var t,i;this.props.selectedKeys!==e&&(null===(i=(t=this.props).onSelectedKeysChanged)||void 0===i||i.call(t,e))},this.primaryActionHandler=e=>{var t,i;if(e){const o=e.actionId;null===(i=(t=this.props).onSpPrimaryAction)||void 0===i||i.call(t,{actionId:o})}},this.secondaryActionHandler=e=>{var t,i;if(e){const o=e.actionId;null===(i=(t=this.props).onSpSecondaryAction)||void 0===i||i.call(t,{actionId:o})}},this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.res=Object.assign({},r)}render(e){var t;const{isFooterAvailable:i,isExtraLargeImageAvailable:n,isFullSizeImageAvailable:r}=this.getBlocksAvailabilityStatus(e);return(0,o.h)("div",{class:"oj-panel oj-sm-padding-0 oj-sp-card-parent-container oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column",onMouseEnter:e=>{e.currentTarget.classList.add("oj-panel-shadow-sm")},onMouseLeave:e=>{e.currentTarget.classList.remove("oj-panel-shadow-sm")},ref:this.createRef,role:"group","aria-label":e.primaryText},"on"===e.displayOptions.dragAffordance&&!n&&!r&&(0,o.h)(s.default,{dragHandleLabel:e.dragAffordanceLabel||this.res.accDraggable}),(0,o.h)("div",{onClick:this.onCardClick,class:"oj-flex-item oj-sp-card-hover"},(0,o.h)(a.default,{onSpAddFocusRing:this.focusOnCard,onSpRemoveFocusRing:this.removeFocusFromCard,onSpCardAction:this.cardKeyPressHandler,onSpNavigationAction:this.linkActionHandler,secondaryText:e.secondaryText,secondaryTextLine2:e.secondaryTextLine2,secondaryTextLine3:e.secondaryTextLine3,imageSize:e.imageSize,primaryText:e.primaryText,badge:e.badge,overlineText:e.overlineText,tertiaryText:e.tertiaryText,itemLevelMessage:e.itemLevelMessage,image:e.image,navigationAction:e.navigationAction,disableTopPadding:"on"===(null===(t=e.displayOptions)||void 0===t?void 0:t.dragAffordance)&&!n&&!r})),i&&this.getFooterTemplate(e))}getFooterTemplate(e){return(0,o.h)("div",{class:"oj-flex-item oj-sm-flex-initial"},(0,o.h)(n.CardFooter,{id:this.uid+"_footer",footerText:e.footerText,avatar:e.footerAvatar,icon:e.footerIcon,emphasized:void 0===e.footerEmphasized||e.footerEmphasized,primaryActions:e.primaryActions,secondaryActions:e.secondaryActions,selector:e.selector,selectedKeys:e.selectedKeys,onSelectedKeysChanged:this.handleSelectedKeysChange,onSpPrimaryAction:this.primaryActionHandler,onSpSecondaryAction:this.secondaryActionHandler}))}hasFooterPropertyDefined(e){return!((e.selector&&"multiple"===e.selector.selectionMode||!e.footerAvatar&&!e.footerIcon&&(!e.footerText||!e.footerText.label||!e.footerText.value)&&!e.primaryActions&&!e.secondaryActions)&&(!e.selector||"multiple"!==e.selector.selectionMode||!e.selectedKeys))}getBlocksAvailabilityStatus(e){return{isFooterAvailable:e.displayOptions&&"on"===e.displayOptions.footer||(e.displayOptions&&"off"!==e.displayOptions.footer||!e.displayOptions)&&this.hasFooterPropertyDefined(e),isExtraLargeImageAvailable:"xl"===e.imageSize,isFullSizeImageAvailable:"full"===e.imageSize}}};l.defaultProps={badge:{status:"neutral",style:"subtle",text:void 0},displayOptions:{footer:"auto",dragAffordance:"off"},imageSize:"none",navigationAction:{display:"off"}},l._metadata={properties:{badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]},style:{type:"string",enumValues:["strong","subtle"]}}},overlineText:{type:"string"},primaryText:{type:"string"},secondaryText:{type:"string"},secondaryTextLine2:{type:"string"},secondaryTextLine3:{type:"string"},tertiaryText:{type:"string"},imageSize:{type:"string",enumValues:["xl","lg","md","sm","none","full"]},image:{type:"object",properties:{src:{type:"string"},position:{type:"string",enumValues:["top","center","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight"]},aspectRatio:{type:"string",enumValues:["1-1","4-3","16-9","21-9"]}}},displayOptions:{type:"object",properties:{footer:{type:"string",enumValues:["auto","on","off"]},dragAffordance:{type:"string",enumValues:["on","off"]}}},itemLevelMessage:{type:"object",properties:{text:{type:"string"},severity:{type:"string",enumValues:["info","warning","error","success"]}}},footerText:{type:"object",properties:{label:{type:"string"},value:{type:"string"}}},footerAvatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},footerIcon:{type:"object",properties:{class:{type:"string"}}},footerEmphasized:{type:"boolean"},primaryActions:{type:"Array<object>"},secondaryActions:{type:"Array<object>"},selectedKeys:{type:"object",writeback:!0},selector:{type:"object",properties:{rowKey:{type:"any"},selectionMode:{type:"string",enumValues:["multiple","single"]},ariaLabel:{type:"string"}}},navigationAction:{type:"object",properties:{display:{type:"string",enumValues:["disabled","on","off"]}}},dragAffordanceLabel:{type:"string"}},events:{spPrimaryAction:{},spSecondaryAction:{},spNavigationAction:{},spCardAction:{}},extension:{_WRITEBACK_PROPS:["selectedKeys"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},l=__decorate([(0,i.customElement)("oj-sp-card"),__metadata("design:paramtypes",[Object])],l),t.Card=l})),define("oj-sp/card/loader",["require","exports","./card"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,Object.defineProperty(t,"Card",{enumerable:!0,get:function(){return i.Card}})})),define("oj-sp/collection-container-advanced/utils/collection-container-advanced-constants",["require","exports","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAXIMUM_CONTEXT_OPTIONS=t.MAXIMUM_SORT_OPTIONS=t.MAXIMUM_SECONDARY_GROUP_ACTIONS=t.MAXIMUM_SECONDARY_ACTIONS=t.MAXIMUM_PRIMARY_GROUP_ACTIONS=t.MAXIMUM_PRIMARY_LABEL_ACTIONS=t.MAXIMUM_PRIMARY_ICON_ACTIONS=t.OVERFLOW_BUTTON_ICON=t.SORT_ICON=t.LAYOUT_TOOLBAR_MODEL=t.FUNCTIONAL_TOOLBAR_MODEL=t.STANDARD_EXPORT_ACTION=t.STANDARD_EXPORT_ID=t.BASE_CSS_CLASS=void 0,t.BASE_CSS_CLASS="oj-sp-collection-container-advanced",t.STANDARD_EXPORT_ID="export",t.STANDARD_EXPORT_ACTION={id:t.STANDARD_EXPORT_ID,label:"exportIcon",icon:"oj-ux-ico-download"},t.FUNCTIONAL_TOOLBAR_MODEL={controlModels:[],label:"functional",classes:"oj-sp-collection-container-advanced-functional-toolbar",controlsSize:i.ControlSize.SMALL,responsiveOrder:1},t.LAYOUT_TOOLBAR_MODEL={controlModels:[],label:"layout",classes:"oj-sp-collection-container-advanced-layout-toolbar",controlsSize:i.ControlSize.SMALL,responsiveOrder:2},t.SORT_ICON="oj-ux-ico-sort",t.OVERFLOW_BUTTON_ICON="oj-ux-ico-overflow-h",t.MAXIMUM_PRIMARY_ICON_ACTIONS=50,t.MAXIMUM_PRIMARY_LABEL_ACTIONS=3,t.MAXIMUM_PRIMARY_GROUP_ACTIONS=6,t.MAXIMUM_SECONDARY_ACTIONS=6,t.MAXIMUM_SECONDARY_GROUP_ACTIONS=3,t.MAXIMUM_SORT_OPTIONS=6,t.MAXIMUM_CONTEXT_OPTIONS=7})),define("oj-sp/collection-container-advanced/utils/collection-container-advanced-utils",["require","exports","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","oj-sp/internal-resources/components/collection-toolbars/action-converter-utils","./collection-container-advanced-constants","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContainerAdvancedUtils=void 0;t.CollectionContainerAdvancedUtils=class{static getCustomPrimaryActions(e){const t=[];if(null==e?void 0:e.length){const a=[],n=[];e.forEach(e=>{e.icon?a.push(e):n.push(e)});let r=[],l=[];a.length&&(r=o.convertCustomIconActionsToControlModel(a,i.ActionType.PRIMARY,i.ElementType.BUTTON_ICON,s.MAXIMUM_PRIMARY_ICON_ACTIONS)),n.length&&(l=o.convertCustomIconActionsToControlModel(n,i.ActionType.PRIMARY,i.ElementType.BUTTON,s.MAXIMUM_PRIMARY_LABEL_ACTIONS)),t.push(...r,...l)}return t}static getExportAction(e){const t=o.convertDisplayOptionToControlModel(s.STANDARD_EXPORT_ACTION,e,i.ActionType.EXPORT,i.ElementType.BUTTON_ICON,a);return t&&(t.positionFixed=!0),t}static getMoreLayoutActionControlModel(){const e=o.getMoreActionsControlModel([],a.layoutActions,i.ActionType.LAYOUT_ACTIONS,i.ElementType.MENU_BUTTON_END_ICON);return e.icon=o.getButtonIconType(s.OVERFLOW_BUTTON_ICON,i.ElementType.MENU_BUTTON_END_ICON),e.overflowMenuOptions={displayActionsDivider:!0},e}static getMoreFunctionalActionControlModel(e){const t=o.getMoreActionsControlModel(e,a.moreActions,i.ActionType.MORE_ACTIONS,i.ElementType.MENU_BUTTON);return t.overflowMenuOptions={displayActionsDivider:!0},t}static swapExportAndLayoutActionsControlModel(e){const t=e.findIndex(e=>e.id==s.STANDARD_EXPORT_ID),i=e.splice(t,1);return[...e,...i]}}})),define("css!oj-sp/collection-container-advanced/collection-container-advanced-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/collection-container-advanced/collection-container-advanced",["require","exports","ojs/ojvcomponent","preact","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/internal-resources/components/collection-toolbars/collection-toolbars-types","oj-sp/internal-resources/components/collection-toolbars/action-converter-utils","./utils/collection-container-advanced-constants","oj-sp/internal-resources/components/collection-toolbars/loader","./utils/collection-container-advanced-utils","css!./collection-container-advanced-styles"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContainerAdvanced=void 0;let p=class extends o.Component{constructor(e,t){var s;super(e,t),this.mainContainerRef=(0,o.createRef)(),this.toolbarsPanelRef=(0,o.createRef)(),this.observeToolbarPanelChange=()=>{const e=this.toolbarsPanelRef.current;this.toolbarPanelObserver=new MutationObserver(this.setToolbarHeight),this.toolbarPanelObserver.observe(e,{childList:!0,subtree:!0})},this.setToolbarHeight=()=>{if(this.mainContainerRef.current&&this.toolbarsPanelRef.current){const e=this.toolbarsPanelRef.current.getBoundingClientRect().height;this.mainContainerRef.current.style.setProperty("--oj-sp-collection-container-advanced-toolbar-height",e+"px")}},this.initializeActionHandlers=()=>{this.actionHandlers=new Map,this.actionHandlers.set(n.ActionType.PRIMARY,this.primaryActionHandler),this.actionHandlers.set(n.ActionType.SECONDARY,this.secondaryActionHandler),this.actionHandlers.set(n.ActionType.CONTEXT,this.contextActionHandler),this.actionHandlers.set(n.ActionType.SORT,this.sortActionHandler),this.actionHandlers.set(n.ActionType.EXPORT,this.exportActionHandler)},this.primaryActionHandler=e=>{this.props.onSpPrimaryAction({actionId:e})},this.secondaryActionHandler=e=>{this.props.onSpSecondaryAction({actionId:e})},this.contextActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectedContextValueChanged)||void 0===i||i.call(t,e)},this.sortActionHandler=e=>{var t,i;null===(i=(t=this.props).onSelectedSortValueChanged)||void 0===i||i.call(t,e)},this.exportActionHandler=e=>{this.props.onSpExport()},this.initializeAllActions=e=>{this.initializeFunctionalActions(e),this.initializeLayoutActions(e),this.computeFunctionalToolbarModel(),this.computeLayoutToolbarModel()},this.initializeFunctionalActions=e=>{this.customPrimaryActions=c.CollectionContainerAdvancedUtils.getCustomPrimaryActions(e.functionalPrimaryActions),this.customPrimaryActionGroup=r.convertCustomActionGroupToControlModel(e.functionalPrimaryActionGroup,n.ActionType.PRIMARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_PRIMARY_GROUP_ACTIONS),this.customSecondaryActions=r.convertCustomActionsToControlModel(e.functionalSecondaryActions,n.ActionType.SECONDARY,n.ElementType.BUTTON,l.MAXIMUM_SECONDARY_ACTIONS),this.customSecondaryActionGroup=r.convertCustomActionGroupToControlModel(e.functionalSecondaryActionGroup,n.ActionType.SECONDARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_SECONDARY_GROUP_ACTIONS)},this.initializeLayoutActions=e=>{this.standardSortActionGroup=r.convertStandardOptionsToControlModel(e.layoutSortOptions,l.MAXIMUM_SORT_OPTIONS,n.ActionType.SORT,n.ElementType.MENU_BUTTON,a.sortBy,e.selectedSortValue),this.standardContextActionGroup=r.convertStandardOptionsToControlModel(e.layoutContextOptions,l.MAXIMUM_CONTEXT_OPTIONS,n.ActionType.CONTEXT,n.ElementType.BUTTON_SET,a.contextMenu,e.selectedContextValue),this.standardExportAction=c.CollectionContainerAdvancedUtils.getExportAction(e.displayOptions.export)},this.computeFunctionalToolbarModel=()=>{const e=[];this.customPrimaryActions.length>0&&e.push(...this.customPrimaryActions),this.customPrimaryActionGroup&&e.push(this.customPrimaryActionGroup);let t=[];this.customSecondaryActions.length>0&&t.push(...this.customSecondaryActions),this.customSecondaryActionGroup&&t.push(this.customSecondaryActionGroup),1===t.length&&(e.push(t[0]),t=[]),e.length+t.length>0?(this.moreFunctionalControlModel=c.CollectionContainerAdvancedUtils.getMoreFunctionalActionControlModel(t),e.push(this.moreFunctionalControlModel)):this.moreFunctionalControlModel=null,this.functionalToolbarModel=Object.assign(Object.assign({},l.FUNCTIONAL_TOOLBAR_MODEL),{controlModels:e})},this.computeLayoutToolbarModel=()=>{let e=[];this.standardSortActionGroup&&e.push(this.standardSortActionGroup),this.standardContextActionGroup&&e.push(this.standardContextActionGroup),this.standardExportAction&&e.push(this.standardExportAction),e.length?(this.moreLayoutControlModel=c.CollectionContainerAdvancedUtils.getMoreLayoutActionControlModel(),e.push(this.moreLayoutControlModel)):this.moreLayoutControlModel=null,this.standardExportAction&&e.length>1&&(e=c.CollectionContainerAdvancedUtils.swapExportAndLayoutActionsControlModel(e)),this.layoutToolbarModel=Object.assign(Object.assign({},l.LAYOUT_TOOLBAR_MODEL),{controlModels:e})},this.initializeStateWithToolbarModels=()=>{this.state={functionalToolbarModel:this.functionalToolbarModel,layoutToolbarModel:this.layoutToolbarModel}},this.updateStateWithFunctionalToolbarModel=()=>{this.setState({functionalToolbarModel:this.functionalToolbarModel})},this.updateStateWithLayoutToolbarModel=()=>{this.setState({layoutToolbarModel:this.layoutToolbarModel})},this.functionalPropertyChangeHandler=(e,t)=>{let i=!1;e.functionalPrimaryActions!==t.functionalPrimaryActions&&(this.customPrimaryActions=c.CollectionContainerAdvancedUtils.getCustomPrimaryActions(t.functionalPrimaryActions),i=!0),e.functionalPrimaryActionGroup!==t.functionalPrimaryActionGroup&&(this.customPrimaryActionGroup=r.convertCustomActionGroupToControlModel(t.functionalPrimaryActionGroup,n.ActionType.PRIMARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_PRIMARY_GROUP_ACTIONS),i=!0),e.functionalSecondaryActions!==t.functionalSecondaryActions&&(this.customSecondaryActions=r.convertCustomActionsToControlModel(t.functionalSecondaryActions,n.ActionType.SECONDARY,n.ElementType.BUTTON,l.MAXIMUM_SECONDARY_ACTIONS),i=!0),e.functionalSecondaryActionGroup!==t.functionalSecondaryActionGroup&&(this.customSecondaryActionGroup=r.convertCustomActionGroupToControlModel(t.functionalSecondaryActionGroup,n.ActionType.SECONDARY,n.ElementType.MENU_BUTTON,l.MAXIMUM_SECONDARY_GROUP_ACTIONS),i=!0),i&&(this.computeFunctionalToolbarModel(),this.updateStateWithFunctionalToolbarModel())},this.layoutPropertyChangeHandler=(e,t)=>{let i=!1;e.selectedSortValue===t.selectedSortValue&&e.layoutSortOptions===t.layoutSortOptions||(this.standardSortActionGroup=r.convertStandardOptionsToControlModel(t.layoutSortOptions,l.MAXIMUM_SORT_OPTIONS,n.ActionType.SORT,n.ElementType.MENU_BUTTON,a.sortBy,t.selectedSortValue),i=!0),e.selectedContextValue===t.selectedContextValue&&e.layoutContextOptions===t.layoutContextOptions||(this.standardContextActionGroup=r.convertStandardOptionsToControlModel(t.layoutContextOptions,l.MAXIMUM_CONTEXT_OPTIONS,n.ActionType.CONTEXT,n.ElementType.BUTTON_SET,a.contextMenu,t.selectedContextValue),i=!0),e.displayOptions.export!==t.displayOptions.export&&(this.standardExportAction=c.CollectionContainerAdvancedUtils.getExportAction(t.displayOptions.export),i=!0),i&&(this.computeLayoutToolbarModel(),this.updateStateWithLayoutToolbarModel())},this.toolbarControlActionHandler=e=>{const{actionId:t,actionType:i}=e;this.actionHandlers.get(i)(t)},this.uniqueId=null!==(s=e.id)&&void 0!==s?s:(0,i.getUniqueId)(),this.customPrimaryActions=[],this.customPrimaryActionGroup=null,this.customSecondaryActions=[],this.customSecondaryActionGroup=null,this.standardSortActionGroup=null,this.standardContextActionGroup=null,this.standardExportAction=null,this.functionalToolbarModel=null,this.layoutToolbarModel=null,this.toolbarPanelObserver=null,this.initializeActionHandlers(),this.initializeAllActions(this.props),this.initializeStateWithToolbarModels()}render(e){return(0,o.h)("div",{class:"oj-sp-collection-container-advanced-panel",role:"group",ref:this.mainContainerRef},(0,o.h)("div",{ref:this.toolbarsPanelRef,id:this.uniqueId+"_toolbars-panel",class:"oj-sp-toolbars-panel"},(0,o.h)("div",{class:"oj-flex oj-bg-neutral-10 oj-sm-padding-4x-top oj-sm-padding-4x-bottom oj-sp-template-wrapper "},(0,o.h)(d.CollectionToolbars,{componentId:this.uniqueId,componentBaseCssClass:l.BASE_CSS_CLASS,functionalToolbarModel:this.state.functionalToolbarModel,layoutToolbarModel:this.state.layoutToolbarModel,onSpAction:this.toolbarControlActionHandler}),e.search&&this.renderSearchSlot(e.search))),(0,o.h)("div",{class:"oj-sp-collection-container-advanced-main-panel"},e.children))}componentDidMount(){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} is mounted`),this.observeToolbarPanelChange()}componentDidUpdate(e){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} is updated`),this.props!==e&&(this.functionalPropertyChangeHandler(e,this.props),this.layoutPropertyChangeHandler(e,this.props))}componentWillUnmount(){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} will unmount`),this.toolbarPanelObserver&&this.toolbarPanelObserver.disconnect()}renderSearchSlot(e){return(0,o.h)("div",{class:"oj-sp-collection-container-advanced-search-panel oj-flex-item oj-sm-12 oj-sm-margin-3x-top"},e)}};p.defaultProps={displayOptions:{export:"off"}},p._metadata={properties:{displayOptions:{type:"object",properties:{export:{type:"string",enumValues:["disabled","on","off"]}}},functionalPrimaryActions:{type:"Array<object>"},functionalPrimaryActionGroup:{type:"object",properties:{label:{type:"string"},actions:{type:"Array<object>"}}},functionalSecondaryActions:{type:"Array<object>"},functionalSecondaryActionGroup:{type:"object",properties:{label:{type:"string"},actions:{type:"Array<object>"}}},layoutContextOptions:{type:"Array<object>"},selectedContextValue:{type:"string",writeback:!0},layoutSortOptions:{type:"Array<object>"},selectedSortValue:{type:"string",writeback:!0}},events:{spPrimaryAction:{},spSecondaryAction:{},spExport:{}},slots:{"":{},search:{}},extension:{_WRITEBACK_PROPS:["selectedContextValue","selectedSortValue"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},p=__decorate([(0,i.customElement)("oj-sp-collection-container-advanced"),__metadata("design:paramtypes",[Object,Object])],p),t.CollectionContainerAdvanced=p})),define("oj-sp/collection-container-advanced/loader",["require","exports","./collection-container-advanced"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionContainerAdvanced=void 0,Object.defineProperty(t,"CollectionContainerAdvanced",{enumerable:!0,get:function(){return i.CollectionContainerAdvanced}})})),define("css!oj-sp/collection-detail-page/component/stacker/collection-detail-stacker-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/collection-detail-page/component/stacker/collection-detail-stacker",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","css!./collection-detail-stacker-styles"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionDetailStacker=void 0;let a=class extends o.Component{constructor(e){super(e),this.prevSelectedCount=-1,this.toBeRendered=this.props.selectedItems?[this.props.selectedItems[0]]:[],this.prevSelected=[],this.slideShow=!0,this.sameLastSelection=!1,this.waitTimeInMillisecond=250,this.card1Class="card1 tuck slide",this.card2Class="card2 tuck slide hide",this.contentClass="content",this.hiddenCard1Class="hidden-card-1",this.hiddenCard2Class="hidden-card-2",this.state={shouldWaitForRender:!1},this.setStackingScale=()=>{const e=this.compRefElement;if(e){const t=e.parentElement.getBoundingClientRect().height;e.style.setProperty("--oj-sp-collection-detail-scale-delta",(26/t).toString()),e.style.setProperty("--oj-sp-collection-detail-scale-delta1",(16/(t-16)).toString())}},this.prepareContent=e=>{var t,i,o,s;this.compRefElement;const a=e.length;if(this.slideShow=this.prevSelectedCount<=a,this.sameLastSelection=!1,null===(i=null===(t=this.card1)||void 0===t?void 0:t.classList)||void 0===i||i.remove("disable_tab_nav"),null===(s=null===(o=this.card2)||void 0===o?void 0:o.classList)||void 0===s||s.remove("disable_tab_nav"),a>1)this.toBeRendered=[e[0],e[1]?e[1]:"no_data"],this.card2Class="card2 card tuck slide",this.sameLastSelection=JSON.stringify(this.prevSelected[0])==JSON.stringify(e[0]),this.slideShow?this.sameLastSelection?this.card1Class="card1 card tuck slide":this.card1Class="card1 card tuck":(this.toBeRendered=[this.prevSelected[0],e[0]!=this.prevSelected[0]?e[0]:"no_data"],this.card1Class="card1 card tuck slide");else if(1==a)if(this.sameLastSelection=this.prevSelected&&JSON.stringify(this.prevSelected[0])==JSON.stringify(e[0]),this.prevSelectedCount>1&&!this.sameLastSelection)this.toBeRendered=[this.prevSelected[0],e[0]],this.card2Class="card2 tuck slide";else if(this.card1Class="card1 tuck slide",this.card2Class="card2 tuck slide hide",1==this.prevSelectedCount){if(!this.state.shouldWaitForRender)return this.setState({shouldWaitForRender:!0}),void(this.toBeRendered=[this.prevSelected[0],e[0]!=this.prevSelected[0]?e[0]:"no_data"]);this.toBeRendered=[e[0],"no_data"]}else if(0==this.prevSelectedCount){if(!this.state.shouldWaitForRender)return this.setState({shouldWaitForRender:!0}),this.toBeRendered=[e[0],"no_data"],void(this.card1Class="card1 tuck slide hide")}else this.toBeRendered=[e[0],"no_data"];else this.card1Class="card1 tuck slide",this.card2Class="card2 tuck slide hide",this.toBeRendered=[null,"no_data"];switch(a){case 0:case 1:this.contentClass="content",this.hiddenCard1Class="hidden-card-1",this.hiddenCard2Class="hidden-card-2";break;case 2:this.contentClass="content multi-select shift1",this.hiddenCard1Class="hidden-card-1 hidden-card-1-slide shadow",this.hiddenCard2Class="hidden-card-2 hidden-card-1-slide";break;default:this.contentClass="content multi-select shift1 shift2",this.hiddenCard1Class="hidden-card-1 hidden-card-1-slide shadow",this.hiddenCard2Class="hidden-card-2 hidden-card-1-slide hidden-card-2-slide shadow"}this.prevSelectedCount=a,this.prevSelected=e},this.addAnimation=()=>{var e,t;const i=this.compRefElement;this.card1=i.getElementsByClassName("card1")[0],this.card2=i.getElementsByClassName("card2")[0];const o=null===(e=this.card1)||void 0===e?void 0:e.classList;this.prevSelectedCount>1?this.sameLastSelection||(this.slideShow?window.requestAnimationFrame(()=>{setTimeout(()=>{null==o||o.add("slide")},0)}):null==o||o.remove("slide")):1==this.prevSelectedCount&&(this.slideShow||this.sameLastSelection||null==o||o.remove("slide")),null===(t=this.card1)||void 0===t||t.addEventListener("transitionend",this.disableTabNav,{once:!0})},this.disableTabNav=e=>{var t,i,o,s;this.slideShow?null===(i=null===(t=this.card2)||void 0===t?void 0:t.classList)||void 0===i||i.add("disable_tab_nav"):null===(s=null===(o=this.card1)||void 0===o?void 0:o.classList)||void 0===s||s.add("disable_tab_nav")},this.ref=(0,o.createRef)(),this.res=Object.assign({},s),this.triggerRerender=this.triggerRerender.bind(this),this.prepareContent(this.props.selectedItems)}triggerRerender(){this.setState({shouldWaitForRender:!1})}componentDidMount(){this.compRefElement=this.ref.current,window.addEventListener("load",this.setStackingScale),window.addEventListener("resize",this.setStackingScale),this.triggerRerender(),this.addAnimation()}componentWillUnmount(){window.removeEventListener("load",this.setStackingScale),window.removeEventListener("resize",this.setStackingScale)}shouldComponentUpdate(e,t){return!t.shouldWaitForRender&&((1==e.selectedItems.length||JSON.stringify(e.selectedItems)!=JSON.stringify(this.props.selectedItems))&&(this.prepareContent(e.selectedItems),!0))}componentDidUpdate(e){this.state.shouldWaitForRender?setTimeout(this.triggerRerender,this.waitTimeInMillisecond):this.addAnimation()}render(e){var t,i;const s=this.props.selectedItems.length>1?"oj-bg-neutral-0":"";return(0,o.h)("div",{class:this.contentClass,ref:this.ref},(0,o.h)("div",{id:"oj-sp-collection-detail-stacker-container",key:this.toBeRendered[0],class:`${this.card1Class} ${s}`,tabIndex:0,role:"region","aria-labelledby":"oj-sp-detail-panel-title"},this.toBeRendered[0]&&(null===(t=e.detail)||void 0===t?void 0:t.call(e,this.toBeRendered[0]))),(0,o.h)("div",{key:this.toBeRendered[1],class:`${this.card2Class} ${s}`,tabIndex:0,role:"complementary","aria-label":this.res.collectionDetailPageContentAriaLabel},"no_data"!=this.toBeRendered[1]&&(null===(i=e.detail)||void 0===i?void 0:i.call(e,this.toBeRendered[1]))),(0,o.h)("div",{key:"hidden-card-1",class:this.hiddenCard1Class}),(0,o.h)("div",{key:"hidden-card-2",class:this.hiddenCard2Class}),0==e.selectedItems.length&&(0,o.h)("div",null,e.noSelection?e.noSelection:(0,o.h)("oj-sp-empty-state",{slot:"noSelection","primary-text":this.res.collectionDetailPageNoSelectionSlotDefaultMessage,"display-options":"[[ {'layout': 'other'} ]]"})))}};a.defaultProps={selectedItems:[]},a._metadata={properties:{selectedItems:{type:"Array<any>"}},slots:{detail:{data:{}},noSelection:{}}},a=__decorate([(0,i.customElement)("oj-sp-collection-detail-stacker"),__metadata("design:paramtypes",[Object])],a),t.CollectionDetailStacker=a})),define("css!oj-sp/collection-detail-page/collection-detail-page-styles",[],(function(){})),define("text!oj-sp/header-general-overview/component.json",[],(function(){return'{"name":"header-general-overview","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"General Overview Page Header","description":"Page header is the area on the top of the page, separated from content, which provides users with general information about the page as well as page level actions.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-smart-filters":"2404.0.0","oj-sp-fa-css":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-timestamp":"2404.0.0","oj-sp-data-switcher":"2404.0.0"},"properties":{"pageTitle":{"displayName":"Page Title","description":"The title of the page.","type":"string","translatable":true,"required":false},"pageSubtitle":{"displayName":"Page Subtitle","description":"Additional supporting information to the page title.","type":"string","translatable":true,"required":false},"avatar":{"displayName":"Avatar Image","description":"The avatar of the person who is required in the context of the page.","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component.","type":"object","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info is visible.","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go to Parent action is visible.","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether In-flow Back action is visible.","type":"boolean","value":false},"mobileMenu":{"description":"Defines whether Mobile Menu action is visible.","type":"boolean","value":false,"status":[{"type":"deprecated","since":"2301.0.0","description":"This property is been deprecated, as there is no use case for menu/hamburger icon as part of the header-general-overview."}]},"switcherSearch":{"description":"Defines whether data switcher search is visible.","displayName":"Switcher Search","type":"boolean","value":false}}},"primaryAction":{"displayName":"Primary Action","description":"This controls the primary action button.","type":"object","properties":{"label":{"description":"The label for the primary action button of the page.","type":"string"},"display":{"type":"string","displayName":"Display option for the primary item","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The primary Action is visible and enabled"},"off":{"displayName":"Off","description":"The primary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The primary Action is visible and disabled"}}},"disabled":{"description":"The disabled state of the primary action button.","type":"boolean","status":[{"type":"deprecated","since":"2210.0.0","description":"Use value display property instead."}]}},"required":false},"contextualInfo":{"displayName":"Contextual Info","description":"The contextual information to be displayed.","type":"Array<object>","properties":{"label":{"description":"Contextual Info Label.","type":"string"},"value":{"description":"Contextual Info Value.","type":"string"}},"required":false},"selectContext":{"displayName":"Select Context","description":"The context selector.","type":"object","properties":{"data":{"description":"The data for the context selector.","type":"oj.DataProvider"},"itemText":{"description":"The item text for the context selector.","type":"string"},"labelHint":{"description":"The label hint for context selector.","type":"string"},"secondaryText":{"description":"Secondary Text","displayName":"The secondary text for the context selector.","type":"string","required":false},"avatar":{"displayName":"Avatar Image","description":"The Avatar displayed as column leading visual for context selector","type":"object","required":false,"properties":{"src":{"description":"URL of the source avatar image.","displayName":"Src","type":"string"},"initials":{"description":"Initials to display in the absence of source image.","displayName":"Intials","type":"string"}}},"icon":{"displayName":"Icon","description":"The icon leading visual for context selector","type":"object","required":false,"properties":{"class":{"description":"Redwood icon gallery class","displayName":"Class","type":"string"},"altText":{"description":"Alternate image text for screen reader","displayName":"AltText","type":"string"}}}},"required":false},"selectContextValue":{"displayName":"Select Context Value","description":"The value of the context selector.","type":"V|null","required":false,"writeback":true},"selectContextValueItem":{"displayName":"Select Context Value Item","description":"The value item of the context selector.","type":"object","required":false,"writeback":true},"selectObject":{"displayName":"Select Object","description":"The object selector.","type":"object","properties":{"data":{"description":"The data for the object selector..","type":"oj.DataProvider"},"itemText":{"description":"The item text for the object selector..","type":"string"},"labelHint":{"description":"The label hint for object selector.","type":"string"},"secondaryText":{"description":"Secondary Text","displayName":"The secondary text for the object selector.","type":"string","required":false},"avatar":{"displayName":"Avatar Image","description":"The Avatar displayed as column leading visual for object selector","type":"object","required":false,"properties":{"src":{"description":"URL of the source avatar image.","displayName":"Src","type":"string"},"initials":{"description":"Initials to display in the absence of source image.","displayName":"Intials","type":"string"}}},"icon":{"displayName":"Icon","description":"The icon leading visual for object selector","type":"object","required":false,"properties":{"icon":{"description":"Redwood icon gallery class","displayName":"Class","type":"string"},"class":{"description":"Alternate image text for screen reader","displayName":"AltText","type":"string"}}}}},"selectObjectValue":{"displayName":"Select Object Value","description":"The value of the object selector.","type":"V|null","writeback":true},"selectObjectValueItem":{"displayName":"Select Object Value Item","description":"The value item of the object selector.","type":"object","writeback":true},"dataSwitcherType":{"displayName":"Data Switcher Type","description":"The value of the data switcher type.","type":"string","value":"context","status":[{"type":"deprecated","since":"2307.0.0","description":"Data switcher type will be defined from pageTitle, selectObject and selectContext. If selectObject and pageTitle are provided then selectObject takes the precedence."}]},"secondaryActions":{"displayName":"Secondary Actions","description":"A list of secondary actions of the page. This supports upto 4 actions. If there are more than 4, only render the first 4. Each action has [label, id, icon, display].","type":"Array<object>","required":false,"properties":{"label":{"type":"string","displayName":"label of the secondary item"},"id":{"type":"string","displayName":"label of the secondary item","description":"This is a unique id associated wit hthe secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"icon":{"type":"string","displayName":"icon for the secondary item"},"display":{"type":"string","displayName":"Display option for the secondary item","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled"},"off":{"displayName":"Off","description":"The secondary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled"}}}}},"smartFilters":{"displayName":"Smart Filters","description":"Properties for smart filters.","required":false,"writeback":true,"type":"object","properties":{"appliedFilters":{"type":"Array","description":"Currently applied filters.","displayName":"Applied Filters","status":[{"type":"deprecated","since":"2101.0.0","description":"Use value sub property instead."}]},"askHint":{"type":"string","description":"Current ask hint.","displayName":"Ask Hint"},"autofocus":{"type":"boolean","description":"Autofocus is a Boolean that reflects the autofocus attribute, if it is set to true then the associated component will get input focus when the page is loaded. Setting this property doesn\'t set the focus to the component: it tells the browser to focus to it when the element is inserted in the document.","displayName":"Autofocus"},"expanded":{"description":"Expanded.","displayName":"Expanded","type":"string","enumValues":["auto","false","true"],"propertyEditorValues":{"auto":{"description":"Default value. Expanded on medium-to-up screens and collapsed on small screens if there are no applied filters. Expanded if there are applied filters.","displayName":"Auto"},"false":{"description":"Collapsed on all screens if there are no applied filters.","displayName":"False"},"true":{"description":"Expanded on all screens irrespective of applied filters.","displayName":"True"}}},"autocompleteSource":{"description":"Visibility toggle for autocomplete suggestions source.","displayName":"Autocomplete Source","type":"string","enumValues":["off","on"],"propertyEditorValues":{"off":{"description":"Hide autocomplete suggestions source in the suggestions drop-down for typeahead filtering.","displayName":"Off"},"on":{"description":"Show autocomplete suggestions source in the suggestions drop-down for typeahead filtering","displayName":"On"}}},"filtersMetadata":{"description":"Metadata defining filters.","displayName":"Filters Metadata","type":"object"},"resultsData":{"description":"Current results data.","displayName":"Results Data","type":"SmartSearchAndFilterDataProvider"},"suggestionFilters":{"description":"Current suggestion filters.","displayName":"Suggestion Filters","writeback":true,"type":"SuggestionFiltersDataProvider"},"suggestions":{"type":"SmartSuggestionChipsDataProvider","description":"Current suggestions.","displayName":"Suggestions"},"totalCount":{"type":"number","description":"Total count.","displayName":"Total Count","readOnly":true},"translations":{"type":"object","description":"A collection of translated resources from the translation bundle, or null if this component has no resources. Resources may be accessed and overridden individually or collectively.","properties":{"msgNoData":{"type":"string"}}},"value":{"description":"Current applied filters.","displayName":"Value","writeback":true,"type":"Array"}}},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp"},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}}}},"translations":{"description":"Instance Overrides of Strings.","type":"object","properties":{"actions":{"type":"string"},"goToParent":{"type":"string"},"avatarHint":{"type":"string"},"inFlowBack":{"type":"string"}}},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}}},"methods":{},"events":{"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when the secondary action is clicked.","bubbles":true,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the secondary item clicked.","type":"string"}}},"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Triggered when the primary action is clicked.","bubbles":true,"cancelable":false},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked.","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked.","bubbles":true,"cancelable":false},"spMobileMenu":{"displayName":"spMobileMenu event","description":"Triggered when the Mobile Menu action is clicked.","bubbles":true,"cancelable":false}},"slots":{"search":{"description":"This is the slot for search components.","displayName":"Search slot"}},"extension":{"catalog":{"status":"Pre-production","tags":["oj-sp","Redwood","Early-Adopter","header-general-overview"],"docUrl":"http://design.oraclecorp.com/page-header-general-overview"},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/header-general-overview/header-general-overview-view.html",[],(function(){return'<html><head></head><body><header class="oj-sp-header-general-overview-sticky-container":id="[[ uid + \'_headerContainer\' ]]":aria-labelledby="[[ uid + \'_pageTitle\' ]]"data-oj-context=""><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-flex-start"><div :id="[[ uid + \'_headerContent\' ]]"class="oj-sp-header-container":class="[[{\n      \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n      \'oj-sp-header-general-overview-bg-light\': background() === \'light\',\n      \'oj-flex-item oj-sp-header-general-overview-header-content\': true\n    }]]"><oj-bind-if test="[[ colorStripOnTop() ]]"><div class="oj-sp-header-general-overview-header-strip"></div></oj-bind-if><div class="oj-sm-only-padding-4x-horizontal oj-lg-only-padding-6x-horizontal oj-xl-padding-12x-horizontal oj-md-only-padding-6x-horizontal oj-sp-header-general-overview-padded-container oj-sp-template-wrapper":class="[[{\'oj-sp-header-general-overview-padded-container-sm oj-sm-only-padding-4x-bottom oj-md-padding-6x-vertical\': headerStickyState() !== \'semiSticky\' }]]"><div :class="[[ getHeaderAlignment() ]]"class="oj-sp-header-general-overview-non-semi-sticky-content oj-flex oj-sm-align-items-center"><oj-bind-if test="[[inFlowBackVisible() || goToParentVisible() || mobileMenuVisible()]]"><div :class="[[{\n            \'oj-sm-align-self-flex-start\' : inFlowBackVisible(),\n            \'oj-sp-header-general-overview-back-btn-top\' : inFlowBackVisible() ,\n            \'oj-sp-header-general-overview-parent-btn-top\' : goToParentVisible() &amp;&amp; !inFlowBackVisible() }]]"class="oj-sp-header-general-overview-header-navigation"><oj-bind-if test="[[ !(isSmallScreenOrMobile() &amp;&amp; mobileMenuVisible()) ]]"><oj-bind-if test="[[ goToParentVisible() &amp;&amp; !inFlowBackVisible() ]]"><div class="oj-flex-item"><a href="#":id="[[ uid + \'_goToParent\' ]]"class="oj-link-standalone oj-typography-body-md oj-sm-padding-2x-end oj-sp-header-general-overview-go-to-parent-link oj-sp-helper-truncate"on-click="[[ goToParentHandler ]]"><oj-bind-text value="[[ res().goToParent ]]"></oj-bind-text></a></div></oj-bind-if><oj-bind-if test="[[ inFlowBackVisible() ]]"><div class="oj-flex-item"><oj-button :id="[[ uid + \'_inFlowBack\' ]]"display="icons"class="oj-sm-padding-2x-end oj-sp-header-general-overview-inflow-back-btn oj-button-sm"chroming="borderless"on-oj-action="[[ inFlowBackHandler ]]"><div slot="startIcon"class="oj-ux-ico-nav-left"></div><span><oj-bind-text value="[[ inFlowBackTranslationsString() ]]"></oj-bind-text></span></oj-button></div></oj-bind-if></oj-bind-if><oj-bind-if test="[[ isSmallScreenOrMobile() &amp;&amp; mobileMenuVisible() ]]"><div class="oj-flex-item"><oj-button :id="[[ uid + \'_mobileMenu\' ]]"class="oj-sm-padding-2x-end oj-button-sm"chroming="borderless"display="icons"on-oj-action="[[ mobileMenuHandler ]]"><div slot="startIcon"class="oj-ux-ico-menu-overflow"></div><span><oj-bind-text value="[[ res().navigator ]]"></oj-bind-text></span></oj-button></div></oj-bind-if><oj-bind-if test="[[ (!goToParentVisible() &amp;&amp; !inFlowBackVisible()) ]]"><div class="oj-flex-item oj-sm-padding-2x-horizontal"></div></oj-bind-if></div></oj-bind-if><div :class="[[ getAvatarTitleContainerMargin() ]]"class="oj-sp-header-general-overview-avatar-title-container oj-flex oj-sm-flex-wrap-nowrap oj-sp-helper-truncate"><div class="oj-sp-header-general-overview-avatar-container"><oj-bind-if test="[[ avatarVisible ]]"><oj-avatar :id="[[ uid + \'_avatar\' ]]":aria-label="[[ ojTranslate.applyParameters(res().avatarHint, {pageTitle: actualPageTitle()}) ]]":title="[[ ojTranslate.applyParameters(res().avatarHint, {pageTitle: actualPageTitle()}) ]]"role="img"size="[[ screenRange() ===\'sm\'  ?  \'xs\': \'sm\' ]]"initials="[[ avatarInitials ]]"src="[[ avatarSrc ]]"class="oj-sp-header-general-overview-avatar oj-md-margin-4x-end oj-sm-margin-2x-end oj-flex-item"></oj-avatar></oj-bind-if></div><div :class="[[{\'oj-sp-header-general-overview-title oj-sp-helper-truncate\' : true,\n                            \'oj-flex\' :  !properties.pageSubtitle }]]"><div :id="[[ uid + \'_oj-sp-header-general-overview-title-badge-container\' ]]"class="oj-sp-header-general-overview-title-badge-cont"><oj-bind-if test="[[ !( properties.selectObject &amp;&amp; properties.selectObject?.data &amp;&amp; (properties.selectObject?.data?.isEmpty()===\'no\') ) ]]"><h1 :id="[[ uid + \'_pageTitle\' ]]"class="oj-sp-header-general-overview-page-title oj-typography-bold":class="[[{ \'oj-typography-subheading-lg\': (screenRange()!==\'sm\'),\n                  \'oj-typography-body-xl\': (screenRange()===\'sm\')\n                }]]"><oj-bind-text value="[[ actualPageTitle ]]"></oj-bind-text></h1></oj-bind-if><oj-bind-if test="[[properties.selectContext &amp;&amp; properties.selectContext.data &amp;&amp; (Object.keys(properties.selectContext.data).length > 0) &amp;&amp; !( properties.selectObject &amp;&amp; properties.selectObject.data &amp;&amp; properties.selectObject.data.isEmpty()!==\'yes\') ]]"><oj-sp-data-switcher :id="[[ uid + \'_selectContext\' ]]"switcher-type="context"popup.width="{{ popupWidth }}"popup.position-offset-horizontal="{{ popupPositionOffset }}"item-text="[[ properties.selectContext.itemText ]]"switcher-value="{{ properties.selectContextValue }}"switcher-value-item="{{ properties.selectContextValueItem }}"secondary-text="{{ properties.selectContext.secondaryText }}"avatar="{{ properties.selectContext.avatar }}"icon="{{ properties.selectContext.icon }}"on-switcher-value-changed="[[ onDataSwitcherAction ]]"on-switcher-value-item-changed="[[ onDataSwitcherAction ]]"data="[[ properties.selectContext.data ]]"label-hint="[[ properties.selectContext?.labelHint ? properties.selectContext.labelHint : res().accContextSwitcher ]]"display-options.search="[[ properties.displayOptions.switcherSearch ]]"></oj-sp-data-switcher></oj-bind-if><oj-bind-if test="[[properties.selectObject &amp;&amp; properties.selectObject.data &amp;&amp; properties.selectObject.data.isEmpty()!==\'yes\']]"><oj-sp-data-switcher :id="[[ uid + \'_selectObject\' ]]"switcher-type="object"popup.width="{{ popupWidth }}"popup.position-offset-horizontal="{{ popupPositionOffset }}"item-text="[[ properties.selectObject.itemText ]]"switcher-value="{{ properties.selectObjectValue }}"switcher-value-item="{{ properties.selectObjectValueItem }}"secondary-text="{{ properties.selectObject.secondaryText }}"avatar="{{ properties.selectObject.avatar }}"icon="{{ properties.selectObject.icon }}"on-switcher-value-changed="[[ onObjectDataSwitcherAction ]]"on-switcher-value-item-changed="[[ onObjectDataSwitcherAction ]]"data="[[ properties.selectObject.data ]]"label-hint="[[ properties.selectObject?.labelHint ? properties.selectObject.labelHint : res().accObjectSwitcher ]]"display-options.search="[[ properties.displayOptions.switcherSearch ]]"></oj-sp-data-switcher></oj-bind-if><oj-bind-if test="[[badgeVisible()]]"><span :id="[[ uid + \'_badgeContainer\' ]]"class="oj-sp-header-general-overview-badge oj-sm-padding-2x-start"><span :title="[[properties.badge.text]]"class="oj-sp-header-general-overview-badge-text":id="[[ uid + \'_badge\' ]]":class="[[badgeClass]]"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></span></span></oj-bind-if></div><oj-bind-if test="[[ properties.pageSubtitle ]]"><div :id="[[ uid + \'_pageSubtitle\' ]]"class="oj-typography-body-sm oj-sm-margin-1x-top oj-sp-helper-truncate":title="[[ properties.pageSubtitle ]]"><oj-bind-text value="[[ properties.pageSubtitle ]]"></oj-bind-text></div></oj-bind-if></div></div><oj-bind-if test="[[ ( secondaryActionsSet().length > 0 || primaryActionVisible() ) || updateTime]]"><div :class="[[ {\'oj-sm-align-self-flex-end\' : !(!inFlowBackVisible() &amp;&amp; !goToParentVisible() &amp;&amp; isSmallScreen()),\n            \'oj-sm-align-self-flex-start\' : !inFlowBackVisible() &amp;&amp; !goToParentVisible() &amp;&amp; isSmallScreen(),\n            \'oj-lg-align-self-flex-start\' : inFlowBackVisible() || (!inFlowBackVisible() &amp;&amp; !goToParentVisible()),\n            \'oj-lg-align-self-flex-end\' : goToParentVisible() &amp;&amp; !inFlowBackVisible(),\n          } ]]"class="oj-sp-header-general-overview-button-group"><oj-bind-if test="[[ ( secondaryActionsSet().length > 0 || primaryActionVisible() ) ]]"><oj-toolbar :id="[[ uid + \'_headerToolbar\' ]]"aria-label="Header"aria-controls=""class="oj-flex oj-sm-justify-content-flex-end oj-flex-item oj-sm-flex-wrap-nowrap oj-sm-padding-0-vertical oj-md-only-padding-4x-bottom":class="[[{\'oj-lg-padding-4x-bottom\' : updateTime() === \'\' &amp;&amp; (goToParentVisible() &amp;&amp; !inFlowBackVisible()),\n                \'oj-sm-only-padding-4x-bottom\': goToParentVisible() || inFlowBackVisible()}]]"><oj-bind-if test="[[ secondaryActionsSet().length > 0 ]]"><oj-menu-button :id="[[ uid + \'_borderlessMenuWithoutStartIcon\' ]]"display="icons"class="oj-md-hide oj-button-sm"><span><oj-bind-text value="[[ res().moreActions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_menuOverflow\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-if test="[[ (secondaryActionsSet().length === 1 &amp;&amp; secondaryActionsSet()[0].display !== \'off\') ]]"><oj-option :id="[[ uid + secondaryActionsSet()[0].id + \'_overflow\' ]]":data-secondary-action-id="[[ secondaryActionsSet()[0].id ]]"value="[[ secondaryActionEvent() + uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; !isSmallScreenOrMobile() ) ]]"><oj-option :id="[[ uid + \'_secondaryActionSetOption\' ]]"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetSubMenu\' ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id + \'_overflow\' ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent() + uid + $current.data.id ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; isSmallScreenOrMobile() ) ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id+ \'_overflow\' ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent() + uid + $current.data.id ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-bind-if></oj-menu><span slot="endIcon"class="oj-ux-ico-overflow-horiz"></span></oj-menu-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length > 1 &amp;&amp; primaryActionVisible() ]]"><oj-menu-button :id="[[ uid + \'_secondaryActionSet\' ]]"chroming="outlined"class="oj-sm-only-hide oj-button-sm"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetMenu\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent() + uid + $current.data.id ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length > 2 &amp;&amp; !primaryActionVisible() ]]"><oj-menu-button :id="[[ uid + \'_secondaryActionSet\' ]]"chroming="outlined"class="oj-sm-only-hide oj-button-sm"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetMenu\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.index !== 0 ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent() + uid + $current.data.id  ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button><oj-button class="oj-sm-only-hide oj-button-sm":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length === 1 ]]"><oj-button class="oj-sm-only-hide oj-button-sm":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length === 2 &amp;&amp; !primaryActionVisible() ]]"><oj-button class="oj-sm-only-hide oj-button-sm":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button><oj-button class="oj-sm-only-hide oj-button-sm":id="[[ uid + secondaryActionsSet()[1].id ]]"disabled="[[ secondaryActionsSet()[1].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[1].icon ]]"><span :class="[[ secondaryActionsSet()[1].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[1].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ primaryActionVisible]]"><oj-button :id="[[ uid + \'_primaryAction\' ]]"class="oj-sm-only-hide oj-button-sm"disabled="[[ primaryActionDisabled ]]"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-toolbar></oj-bind-if><oj-bind-if test="[[updateTime]]"><div :class="[[{\'oj-sp-header-general-overview-timestamp-padding oj-sm-padding-0x-top oj-sm-padding-2x-bottom\': secondaryActionsSet().length == 0 &amp;&amp; !primaryActionVisible() &amp;&amp; (inFlowBackVisible() || goToParentVisible()) ,\n                   \'oj-sp-header-general-overview-timestamp-spacing oj-sm-padding-0x-top oj-typography-body-sm oj-text-color-secondary\': true,\n                   \'oj-md-only-hide\' : !(secondaryActionsSet().length === 0 &amp;&amp; !primaryActionVisible() &amp;&amp; goToParentVisible() &amp;&amp; !inFlowBackVisible())\n                          }]]"class="oj-sm-only-hide"><div class="oj-flex-bar"><div :class="[[{\'oj-lg-padding-1x-top\': secondaryActionsSet().length !== 0 || primaryActionVisible(),\n                  \'oj-lg-padding-2x-bottom\': goToParentVisible() &amp;&amp; !inFlowBackVisible(),\n                  \'oj-sp-header-general-overview-timestamp-line-height\': secondaryActionsSet().length == 0 &amp;&amp; !primaryActionVisible() &amp;&amp; !inFlowBackVisible() &amp;&amp; !goToParentVisible() }]]"class="oj-flex-bar-end"><oj-sp-timestamp value="[[updateTime]]"interval="60"></oj-sp-timestamp></div></div></div></oj-bind-if></div></oj-bind-if></div><oj-bind-if test="[[ contextualInfoVisible() || smartFiltersVisible() || searchSlotUsed() ]]"><div :class="[[ getSecondaryRowClasses() ]]"><oj-bind-if test="[[ (badgeVisible() || contextualInfoVisible()) &amp;&amp; !(smartFiltersVisible() || searchSlotUsed()) ]]"><div :id="[[uid + \'_contextualInfoContainer\']]":class="[[{\n                  \'oj-sm-align-items-center\': badgeVisible(),\n                  \'oj-flex-bar oj-sp-header-general-overview-ci-container\': true\n              }]]"><oj-bind-if test="[[ contextualInfoVisible ]]"><div class="oj-flex-bar-middle":id="[[ uid + \'_contextualInfo\' ]]"><oj-conveyor-belt tabindex="0"class="oj-sp-header-general-overview-contextual-conveyor"data-oj-binding-provider="none"><div class="oj-flex oj-sm-flex-items-initial"><oj-bind-for-each data="[[ properties.contextualInfo ]]"><template><oj-bind-if test="[[ $current.index < 4 ]]"><div class="oj-sm-padding-4x-end oj-md-padding-6x-end oj-flex-item oj-flex"><oj-bind-if test="[[ contextualInfoLabelVisible() ]]"><div :id="[[ uid + \'_contextualInfo\' + $current.index + \'-labelled-by\']]"class="oj-typography-body-sm"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></div></oj-bind-if><div :id="[[ uid + \'_contextualInfo\' + $current.index ]]":class="[[ $current.index === 0 &amp;&amp; !contextualInfoLabelVisible() ?  \'oj-sm-padding-0x-start\' : \'oj-sm-padding-2x-start\' ]]"class="oj-typography-body-sm oj-typography-semi-bold"><oj-bind-text value="[[ $current.data.value ]]"></oj-bind-text></div></div></oj-bind-if></template></oj-bind-for-each></div></oj-conveyor-belt></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[ (smartFiltersVisible() &amp;&amp; !searchSlotUsed()) ]]"><div :id="[[ uid + \'_smartfilters\' ]]"class="oj-typography-body-xs oj-sp-header-general-overview-smart-filter-container"><oj-sp-smart-filters ask-hint="[[ properties.smartFilters.askHint ]]"autofocus="[[ properties.smartFilters.autofocus ]]"display-options.expanded="[[ properties.smartFilters.expanded ]]"display-options.autocomplete-source="[[ properties.smartFilters.autocompleteSource ]]"filters-metadata="[[ properties.smartFilters.filtersMetadata ]]"results-data="[[ properties.smartFilters.resultsData ]]"suggestion-filters="[[ properties.smartFilters.suggestionFilters ]]"suggestions="[[ properties.smartFilters.suggestions ]]"total-count="[[ properties.smartFilters.totalCount ]]"on-total-count-changed="[[ totalCountChangeHandler ]]"translations="[[ properties.smartFilters.translations ]]"value="{{ smartFilters$appliedFilters }}"on-value-changed="[[ appliedFiltersChangeHandler ]]"></oj-sp-smart-filters></div></oj-bind-if><oj-bind-if test="[[ searchSlotUsed ]]"><div :id="[[ uid + \'_smartfilters\' ]]"class="oj-sm-padding-1x-start oj-sm-padding-4x-end oj-md-padding-5x-end oj-typography-body-xs oj-sm-padding-2x-top oj-md-padding-5x-top oj-sp-header-general-overview-smart-filter-container"><oj-bind-slot name="search"></oj-bind-slot></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[updateTime]]"><div :class="[[ {\'oj-flex oj-sm-justify-content-flex-start oj-sp-header-general-overview-timestamp oj-lg-hide oj-xl-hide\': true, \'oj-sm-hide\' : headerStickyState() === \'semiSticky\',\n          \'oj-md-only-hide\' : secondaryActionsSet().length === 0 &amp;&amp; !primaryActionVisible() &amp;&amp; goToParentVisible() &amp;&amp; !inFlowBackVisible() }]]"><div class="oj-sp-header-general-overview-timestamp-spacing oj-sm-padding-0x-top oj-sm-padding-5x-end oj-typography-body-sm oj-text-color-secondary"><div class="oj-flex-bar"><div class="oj-flex-bar-end oj-sm-padding-2x-top"><oj-sp-timestamp value="[[updateTime]]"interval="60"></oj-sp-timestamp></div></div></div></div></oj-bind-if></div><oj-bind-if test="[[ !colorStripOnTop() ]]"><div class="oj-sp-header-general-overview-header-strip"></div></oj-bind-if></div><div class="oj-flex-item oj-sm-flex-0"><div class="oj-sp-header-general-overview-placeholder"></div></div></div></header><oj-bind-if test="[[ primaryActionVisible ]]"><div :class="[[{\n    \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n    \'oj-sp-header-general-overview-bg-light\': background() === \'light\',\n    \'oj-sp-header-general-overview-mobile-buttons-bottom\': isInAppNavVisible,\n    \'oj-sp-header-general-overview-mobile-buttons-container oj-flex oj-sm-flex-direction-column oj-md-hide oj-divider-top\': true\n  }]]"><oj-button :id="[[ uid + \'_primaryActionMobile\' ]]"class="oj-button-sm oj-flex-item oj-sm-margin-4x"disabled="[[ primaryActionDisabled ]]"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></div></oj-bind-if></body></html>'})),define("css!oj-sp/data-switcher/data-switcher-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/data-switcher/data-switcher",["require","exports","preact","ojs/ojvcomponent","ojs/ojkeyset","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojresponsiveknockoututils","oj-sp/common-util/common-util","ojs/ojlistdataproviderview","css!./data-switcher-styles","oj-sp/list-item-template/loader","ojs/ojinputtext","ojs/ojlistview","ojs/ojdialog","ojs/ojpopup"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.DataSwitcher=void 0,function(e){e.CONTEXT="context",e.OBJECT="object"}(c||(c={}));const p={itemText:"label",switcherType:c.OBJECT,displayOptions:{search:!1}};let u=class extends i.Component{constructor(e){var t,r,d,c,p,u,h;super(e),this.state={screenRange:null,headerText:"",dataSize:null},this.onDataSwitcherClick=async()=>{await this.openDataSwitcherView()},this.onDataSwitcherKeyDown=e=>{const{key:t}=e;if(t===l.KEY_NAME.ENTER||t===l.KEY_NAME.ARROW_DOWN){e.preventDefault();const t={description:"Data Switcher - on data switcher key down event"},i=(0,l.setBusyResolve)(this.dataSwitcherElement,t);this.openDataSwitcherView().then(()=>i()).catch(e=>{a.error(e),i()})}},this.handleSelectedChanged=e=>{const{onSpAction:t,onSwitcherValueItemChanged:i,onSwitcherValueChanged:o,itemText:s}=this.props,n=e.detail.context,r=this.dataSwitcherDialog?this.closeDialog():this.dataSwitcherPopup?this.closePopup():null;null==r||r.then(()=>{this.handelSelectionChangedCalled=!0;const e=n.data[s];this.setState({headerText:e||""}),null==t||t(n),i(n),o(n.key),this.selectedValue=n.key}).catch(e=>{a.error(e)})},this.onInputTextKeyDown=e=>{var t;const{key:i}=e;i===l.KEY_NAME.ARROW_DOWN&&(e.preventDefault(),null===(t=this.dataSwitcherListViewElement)||void 0===t||t.focus())},this.dataProviderEvent=async e=>{await this.setHeaderTextTitle()},this.synchronizeSwitcherValueAndSwitcherValueItem=async e=>{var t,i,o,s,a,n,r;let l=!0;const{switcherValue:d,switcherValueItem:c,data:p}=this.props;if(!this.handelSelectionChangedCalled){if((null==e?void 0:e.switcherValue)!==d){const e=await this.getSelectedValue(d,p);this.props.onSwitcherValueItemChanged(e),l=!1}if((null===(t=null==e?void 0:e.switcherValueItem)||void 0===t?void 0:t.key)!==(null==c?void 0:c.key)&&(this.props.onSwitcherValueChanged(c.key),l=!1),l)if(!(null==e?void 0:e.switcherValue)&&(null===(i=null==e?void 0:e.switcherValueItem)||void 0===i?void 0:i.key))this.props.onSwitcherValueChanged(null===(o=null==e?void 0:e.switcherValueItem)||void 0===o?void 0:o.key);else if((null==e?void 0:e.switcherValue)&&!(null===(s=null==e?void 0:e.switcherValueItem)||void 0===s?void 0:s.key)){const t=await this.getSelectedValue(null==e?void 0:e.switcherValue,p);this.props.onSwitcherValueItemChanged(t)}if(l&&(null===(a=null==e?void 0:e.switcherValueItem)||void 0===a?void 0:a.key)&&!(null===(n=null==e?void 0:e.switcherValueItem)||void 0===n?void 0:n.data)&&(null==e?void 0:e.switcherValue)){const t=await this.getSelectedValue(null===(r=null==e?void 0:e.switcherValueItem)||void 0===r?void 0:r.key,p);this.props.onSwitcherValueItemChanged(t)}}},this.setDataSwitcherElement=e=>{this.dataSwitcherElement=e},this.setDataSwitcherNavDownIconElement=e=>{this.dataSwitcherNavDownIconElement=e},this.setPopupElement=e=>{this.dataSwitcherPopup=e},this.setDialogElement=e=>{this.dataSwitcherDialog=e},this.setListViewElement=e=>{e&&(this.dataSwitcherListViewElement=e)},this.setInputTextElement=e=>{e&&(this.dataSwitcherInputTextElement=e)},this.onBackIconClick=async e=>{e.preventDefault(),await this.closeDialog()},this.rawValueChangeHandler=e=>{const t=e.detail.value.trim(),i=t?{text:t}:null;this.dataLDPV&&(this.dataLDPV.filterCriterion=i)},this.renderListItemTemplate=(e,t)=>{const o={};return Object.entries({primaryText:"itemText",secondaryText:"secondaryText",avatar:"avatar",icon:"icon"}).forEach(([i,s])=>{const a=t[s];if("string"==typeof a&&a in e.data&&e.data[a])o[i]=e.data[a];else if("object"==typeof a){const t=Object.assign({},a);Object.entries(t).forEach(([i,o])=>{o in e.data&&e.data[o]?t[i]=e.data[o]:o&&e.data[o]||delete t[i]}),o[i]=t}}),(0,i.h)("oj-sp-list-item-template",{id:`${this.dataSwitcherListViewItemId}-${e.index}`,columns:[o]})},this.getSelectionKeySet=()=>{const e=new Set,t=this.props.switcherValueItem,i=this.props.switcherValue;return e.clear(),e.add(t?t.key:i),new s.KeySetImpl(e)},this.onResizeWindow=async e=>{(0,l.isMobilePhoneDevice)()||await this.closePopup()},this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.res=Object.assign({},n),this.dataSwitcherId="oj-sp-data-switcher-"+this.uniqueId,this.dataSwitcherNavDownId="oj-sp-data-switcher-nav-down-"+this.uniqueId,this.dataSwitcherPopupId="oj-sp-data-switcher-popup-"+this.uniqueId,this.dataSwitcherListViewId="oj-sp-data-switcher-list-view-"+this.uniqueId,this.dataSwitcherListViewItemId="oj-sp-data-switcher-list-view-item-"+this.uniqueId,this.dataKeyAttributes=(null===(d=null===(r=e.data)||void 0===r?void 0:r.options)||void 0===d?void 0:d.keyAttributes)&&Array.isArray(null===(p=null===(c=e.data)||void 0===c?void 0:c.options)||void 0===p?void 0:p.keyAttributes)?e.itemText:null===(h=null===(u=e.data)||void 0===u?void 0:u.options)||void 0===h?void 0:h.keyAttributes,this.handelSelectionChangedCalled=!1,this.initResponsiveUtils(),this.busyResolve=(0,l.setBusyResolve)(this.dataSwitcherElement,{description:"Data Switcher VComponent Startup - Waiting for data"})}render(e){return(0,i.h)(i.Fragment,null,this.renderDataSwitcherTitle(e),this.isSmallScreen()?this.renderDialog(e):this.renderPopup(e))}componentDidMount(){this._componentDidMount().catch(e=>{a.error(e)})}componentDidUpdate(e){this._componentDidUpdate(e).catch(e=>{a.error(e)})}componentWillUnmount(){a.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} will unmount`),this.removeEventListeners()}async _componentDidMount(){a.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} mounted`),this.dataLDPV=new d(this.props.data),await this.setDataSwitcherDataAndTitle(),this.addEventListeners(),this.busyResolve()}async _componentDidUpdate(e){var t,i,o,s,a,n,r,l,c;await this.synchronizeSwitcherValueAndSwitcherValueItem(e),(null===(t=null==e?void 0:e.switcherValueItem)||void 0===t?void 0:t.key)!=(null===(o=null===(i=this.props)||void 0===i?void 0:i.switcherValueItem)||void 0===o?void 0:o.key)&&(null===(s=this.props.switcherValueItem)||void 0===s?void 0:s.data)&&(this.selectedValue=null===(a=this.props.switcherValueItem.data)||void 0===a?void 0:a[this.dataKeyAttributes],await this.setHeaderTextTitle()),(null===(n=null==e?void 0:e.switcherValueItem)||void 0===n?void 0:n.data)||(null===(r=null==e?void 0:e.switcherValueItem)||void 0===r?void 0:r.data)===(null===(l=this.props.switcherValueItem)||void 0===l?void 0:l.data)||(this.selectedValue=null===(c=this.props.switcherValueItem.data)||void 0===c?void 0:c[this.dataKeyAttributes],await this.setHeaderTextTitle()),(null==e?void 0:e.itemText)!==this.props.itemText&&await this.setHeaderTextTitle(),e.data!==this.props.data&&(this.dataLDPV=new d(this.props.data)),this.handelSelectionChangedCalled=!1}removeEventListeners(){window.removeEventListener("resize",this.onResizeWindow),Array.isArray(this.props.data)||(this.props.data.removeEventListener("mutate",this.dataProviderEvent),this.props.data.removeEventListener("refresh",this.dataProviderEvent))}addEventListeners(){this.props.data&&!Array.isArray(this.props.data)&&(this.props.data.addEventListener("mutate",this.dataProviderEvent),this.props.data.addEventListener("refresh",this.dataProviderEvent)),window.addEventListener("resize",this.onResizeWindow)}async openDataSwitcherView(){this.isSmallScreen()?await this.openDialogOrPopup():(this.setPopupWidth(),this.setPopupPosition(),await this.openDialogOrPopup(!0))}async setDataSwitcherDataAndTitle(){var e,t;this.selectedValue=this.props.switcherValue||(null===(t=null===(e=this.props.switcherValueItem)||void 0===e?void 0:e.data)||void 0===t?void 0:t[this.dataKeyAttributes]),await this.setHeaderTextTitle()}async setHeaderTextTitle(){const e=this.props.switcherValue?this.props.switcherValue:this.selectedValue,{results:t}=await this.props.data.fetchByKeys({keys:new Set([e])}),i=t.get(e),o=null==i?void 0:i.data[this.props.itemText];this.setState({headerText:o||""})}async getSelectedValue(e,t){let i={};if(e){const{results:o}=await t.fetchByKeys({keys:new Set([e])}),s=o.get(e);i=null==s?void 0:s.data}return{data:i,key:e,metadata:{key:e}}}initResponsiveUtils(){this.screenRange=r.createScreenRangeObservable(),this.setState({screenRange:this.screenRange()}),this.screenRange.subscribe(e=>{this.setState({screenRange:e})})}isSmallScreen(){return"sm"===this.state.screenRange}setPopupWidth(){var e,t;const i=null!==(t=null===(e=this.props.popup)||void 0===e?void 0:e.width)&&void 0!==t?t:this.dataSwitcherElement.offsetWidth;this.dataSwitcherPopup.style.width=i+"px"}getPopupHorizontalOffset(){var e,t;return"rtl"===document.dir?Math.round(this.dataSwitcherNavDownIconElement.getBoundingClientRect().x-(null===(e=this.props.popup)||void 0===e?void 0:e.positionOffsetHorizontal)+this.dataSwitcherNavDownIconElement.getBoundingClientRect().width):Math.round(this.dataSwitcherNavDownIconElement.getBoundingClientRect().x-(null===(t=this.props.popup)||void 0===t?void 0:t.positionOffsetHorizontal))}getPopupVerticalOffset(){return Math.round(this.dataSwitcherElement.getBoundingClientRect().bottom-this.dataSwitcherNavDownIconElement.getBoundingClientRect().bottom)}setPopupPosition(){const e=this.getPopupVerticalOffset(),t=this.getPopupHorizontalOffset();this.dataSwitcherPopup.position={of:"#"+this.dataSwitcherNavDownIconElement.id,offset:{x:-t,y:e},collision:"none"}}getClassNames(e){return(0,l.classnames)("oj-sp-data-switcher-title","oj-sp-data-switcher-clickable","oj-sm-align-items-center","oj-sm-padding-0","oj-sm-margin-0",{"oj-typography-bold":"object"===e.switcherType},{"oj-sp-data-switcher-title-sm":"sm"===this.screenRange()})}getDialogListViewClassNames(){return(0,l.classnames)("oj-sm-flex-1","oj-divider-top","oj-sp-helper-overflow-y-auto",{"oj-sm-margin-2x-top":!this.isSearchEnabled()})}getDialogDataSwitcherSearchBarClassNames(){return(0,l.classnames)("oj-sm-width-full","oj-flex","oj-sm-padding-4x-start","oj-sm-padding-3x-end","oj-sm-padding-2x-bottom","oj-sp-data-switcher-search-bar",""+(this.isSearchEnabled()?"oj-sp-helper-padding-1_5x-top":"oj-sm-padding-3x-top"))}getNavDownIconClassNames(){return(0,l.classnames)("oj-ux-ico-chevron-down","oj-sm-margin-2x-start","oj-sp-data-switcher-icon-align",""+("sm"===this.screenRange()?"oj-ux-icon-size-5x":"oj-ux-icon-size-6x"))}renderDataSwitcherTitle(e){return(0,i.h)("h1",{"data-switcher-header-id":"dataSwitcherheader",ref:this.setDataSwitcherElement,id:this.dataSwitcherId,className:this.getClassNames(e),tabIndex:0,role:"presentation","aria-label":this.state.headerText?this.state.headerText:e.labelHint,"aria-haspopup":"true",onClick:this.onDataSwitcherClick,onKeyDown:this.onDataSwitcherKeyDown}," "+this.state.headerText,(0,i.h)("span",{ref:this.setDataSwitcherNavDownIconElement,id:this.dataSwitcherNavDownId,class:this.getNavDownIconClassNames()}))}renderPopup(e){return(0,i.h)("span",null,(0,i.h)("oj-popup",{"data-oj-context":!0,"data-switcher-popup-id":"dataSwitcherPopup",ref:this.setPopupElement,id:this.dataSwitcherPopupId,class:"oj-sp-data-switcher-popup oj-sp-data-switcher-popup-min-width","initial-focus":"firstFocusable"},this.isSearchEnabled()?this.renderPopupInputText(e):this.renderCommonListView(e,!1)))}renderDialog(e){return(0,i.h)("span",null,(0,i.h)("oj-dialog",{"data-oj-context":!0,"data-switcher-dialog-id":"dataSwitcherDialog",class:"oj-sp-data-switcher-sm-dialog oj-sp-helper-overflow-hidden oj-dialog-full",ref:this.setDialogElement},(0,i.h)("div",{class:"oj-sp-helper-full-viewport"},(0,i.h)("div",{class:"oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sp-helper-position-relative oj-sp-data-switcher-sm-dialog-search-view",slot:"search"},(0,i.h)("div",{class:"oj-flex oj-sp-data-switcher-search-bar-wrapper"},(0,i.h)("div",{className:this.getDialogDataSwitcherSearchBarClassNames()},this.renderBackIcon(),this.isSearchEnabled()&&this.renderDialogInputText())),(0,i.h)("div",{className:this.getDialogListViewClassNames()},this.renderCommonListView(e,!0))))))}renderBackIcon(){return(0,i.h)("div",{class:"oj-sm-flex-0 oj-flex oj-sm-align-items-flex-start"},(0,i.h)("a",{"aria-label":this.res.back,class:"oj-sp-helper-margin-1_5x-top oj-text-color-primary oj-sp-helper-text-decoration-none",href:"#",onClick:this.onBackIconClick,title:this.res.back},(0,i.h)("span",{"aria-hidden":"true",class:"oj-ux-ico-chevron-left oj-sp-data-switcher-back-icon",alt:this.res.back})))}renderCommonListView(e,t){const o=t?"oj-sp-data-switcher-list-view":"oj-sp-data-switcher-list-view oj-listview-item-padding-off";return(0,i.h)("oj-list-view",{"data-switcher-list-view-id":"dataSwitcherListView",id:this.dataSwitcherListViewId,ref:this.setListViewElement,class:o,data:this.isSearchEnabled()?this.dataLDPV:e.data,"aria-label":e.labelHint,selected:this.getSelectionKeySet(),"selection-mode":"single",onojItemAction:this.handleSelectedChanged},(0,i.h)("template",{"data-oj-as":"item",slot:"itemTemplate",render:t=>this.renderListItemTemplate(t,e)}))}renderSearchIcon(){return(0,i.h)("div",{slot:"start","aria-hidden":!0,class:"oj-text-field-start-end-icon oj-ux-ico-search",role:"presentation"})}renderCommonInputText(e){const t=e?"oj-sp-data-switcher-input-text oj-sm-flex-1 oj-sp-data-switcher-chromeless-input-text oj-sp-data-switcher-search-bar-input-text":"oj-sp-data-switcher-input-text";return(0,i.h)("oj-input-text",{"data-switcher-input-text-id":"dataSwitcherInputText",ref:this.setInputTextElement,class:t,value:"",placeholder:this.res.search,labelHint:this.res.search,labelEdge:"none",autocomplete:"off",onrawValueChanged:this.rawValueChangeHandler,onKeyDown:this.onInputTextKeyDown},!e&&this.renderSearchIcon())}renderDialogInputText(){return(0,i.h)("div",{class:"oj-sm-flex-1 oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-margin-5x-start oj-sp-helper-overflow-hidden oj-sp-data-switcher-search-bar-content"},(0,i.h)("div",{class:"oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sp-data-switcher-search-bar-input-text-wrapper"},this.renderCommonInputText(!0)))}renderPopupInputText(e){return(0,i.h)(i.Fragment,null,this.renderCommonInputText(!1),this.renderCommonListView(e,!1))}isSearchEnabled(){return(-1===this.state.dataSize||this.state.dataSize>5)&&this.props.displayOptions.search}async openDialog(){var e;null===(e=this.dataSwitcherDialog)||void 0===e||e.open()}async openDialogOrPopup(e=!1){e?this.dataSwitcherPopup.open(this.dataSwitcherElement):await this.openDialog(),this.dataLDPV=new d(this.props.data);const t=await this.props.data.getTotalSize();this.setState({dataSize:t});const i=(0,l.getBusyContext)(e?this.dataSwitcherPopup:this.dataSwitcherDialog);await i.whenReady(),this.isSearchEnabled()?this.dataSwitcherInputTextElement.focus():this.dataSwitcherListViewElement.focus()}closeDialog(){var e;const t=(0,l.getBusyContext)(this.dataSwitcherDialog);return(null===(e=this.dataSwitcherDialog)||void 0===e?void 0:e.isOpen())&&this.dataSwitcherDialog.close(),t.whenReady()}closePopup(){var e;const t=(0,l.getBusyContext)(this.dataSwitcherPopup);return(null===(e=this.dataSwitcherPopup)||void 0===e?void 0:e.isOpen())&&this.dataSwitcherPopup.close(),t.whenReady()}};u.defaultProps=Object.assign({},p),u._metadata={properties:{switcherType:{type:"string",enumValues:["context","object"]},popup:{type:"object",properties:{width:{type:"number"},positionOffsetHorizontal:{type:"number"}}},data:{type:"DataProvider"},itemText:{type:"string"},secondaryText:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},icon:{type:"object",properties:{class:{type:"string"},altText:{type:"string"}}},labelHint:{type:"string"},displayOptions:{type:"object",properties:{search:{type:"boolean"}}},switcherValue:{type:"string|number",writeback:!0},switcherValueItem:{type:"object",properties:{key:{type:"string"},data:{type:"object"}},writeback:!0}},events:{spAction:{}},extension:{_WRITEBACK_PROPS:["switcherValue","switcherValueItem"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},u=__decorate([(0,o.customElement)("oj-sp-data-switcher"),__metadata("design:paramtypes",[Object])],u),t.DataSwitcher=u})),define("oj-sp/data-switcher/loader",["require","exports","./data-switcher"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSwitcher=void 0,Object.defineProperty(t,"DataSwitcher",{enumerable:!0,get:function(){return i.DataSwitcher}})}));__rest=this&&this.__rest||function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};define("oj-sp/header-general-overview/header-general-overview-viewModel",["require","exports","knockout","oj-sp/common-util/common-util","oj-sp/common-util/mobileVerticalSwipeHandler","oj-sp/common/EventDispatcher","oj-sp/common/headerCommonAPI","oj-sp/common/positionUtility","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojanimation","ojs/ojresponsiveknockoututils","ojs/ojcontext","ojs/ojlogger","ojs/ojtranslation","oj-sp/common/private/positionUtilityEnums","oj-sp/css-additions/loader","oj-sp/data-switcher/loader","oj-sp/timestamp/loader","ojs/ojavatar","ojs/ojconveyorbelt","ojs/ojknockout","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGeneralOverviewViewModel=void 0;var g,y,f;!function(e){e.ALL="all",e.NONE="none"}(g||(g={})),function(e){e.DEFAULT="default",e.FULL_STICKY="fullSticky",e.SEMI_STICKY="semiSticky"}(y||(y={})),function(e){e.MEDIUM="md",e.SMALL="sm",e.LARGE="lg"}(f||(f={}));t.HeaderGeneralOverviewViewModel=class{constructor(e){var t;this.primaryActionHandler=e=>{a.EventDispatcher.dispatch("spPrimaryAction",this.composite,void 0)},this.goToParentHandler=e=>{a.EventDispatcher.dispatch("spGoToParent",this.composite,void 0),e.preventDefault()},this.inFlowBackHandler=e=>{a.EventDispatcher.dispatch("spInFlowBack",this.composite,void 0)},this.mobileMenuHandler=e=>{a.EventDispatcher.dispatch("spMobileMenu",this.composite,void 0)},this.menuHandler=e=>{var t;const i=null===(t=e.detail)||void 0===t?void 0:t.selectedValue,o=null==i?void 0:i.split(this.uid)[0],s=o===a.EventDispatcher.SECONDARY_ACTION_EVENT_NAME?{secondaryItem:null==i?void 0:i.split(this.uid)[1]}:void 0;a.EventDispatcher.dispatch(o,this.composite,s)},this.appliedFiltersChangeHandler=e=>{if(e.detail.updatedFrom===o.UPDATED_FROM.INTERNAL){const t=Object.assign({},this.properties.smartFilters);Array.isArray(t.value)?t.value=e.detail.value:t.appliedFilters=e.detail.value,this.properties.smartFilters=t}},this.totalCountChangeHandler=e=>{this.composite.setProperty("smartFilters.totalCount",e.detail.value)},this.secondaryActionHandler=e=>{const t={secondaryItem:e.target.id.split(this.uid)[1]};a.EventDispatcher.dispatch(a.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,t)},this.onDataSwitcherAction=e=>{var t;const i=null===(t=e.detail)||void 0===t?void 0:t.value;"switcherValueChanged"===e.type?this.composite.setProperty("selectContextValue",i):"switcherValueItemChanged"===e.type&&this.composite.setProperty("selectContextValueItem",i)},this.onObjectDataSwitcherAction=e=>{var t;const i=null===(t=e.detail)||void 0===t?void 0:t.value;"switcherValueChanged"===e.type?this.composite.setProperty("selectObjectValue",i):"switcherValueItemChanged"===e.type&&this.composite.setProperty("selectObjectValueItem",i)},this.getSecondaryRowClasses=()=>{let e="oj-sp-header-general-overview-secondary-row ";return this.headerStickyState()===y.DEFAULT||this.headerStickyState()===y.FULL_STICKY?e+="oj-md-margin-4x-top oj-sm-only-padding-2x-top":this.headerStickyState()===y.SEMI_STICKY&&(e+="oj-sm-only-padding-2x-vertical oj-md-padding-4x-vertical"),e},this.elementWhenReady=async e=>{const t=p.getContext(e).getBusyContext();await t.whenReady()},this.processDisplayOptions=e=>{e?(this.contextualInfoLabelVisible(e.contextualInfoLabel),this.inFlowBackVisible(e.inFlowBack),this.goToParentVisible(e.goToParent),this.mobileMenuVisible(e.mobileMenu)):(this.contextualInfoLabelVisible(!1),this.inFlowBackVisible(!1),this.goToParentVisible(!0),this.mobileMenuVisible(!1))},this.processPageTitle=()=>{this.actualPageTitle(this.pageTitle()),this.setDataSwitcherPopupProps()},this.processAvatar=e=>{e?(this.avatarInitials(e.initials),this.avatarSrc(e.src),this.avatarVisible(!(!e.initials&&!e.src))):(this.avatarInitials(null),this.avatarSrc(null),this.avatarVisible(!1))},this.processPrimaryAction=e=>{e?"on"===e.display?(this.primaryActionDisabled(!1),this.primaryActionLabel(e.label?e.label:this.res().submit),this.primaryActionVisible(!0)):"off"===e.display?(this.primaryActionLabel(""),this.primaryActionVisible(!1)):"disabled"===e.display?(this.primaryActionDisabled(!0),this.primaryActionLabel(e.label?e.label:this.res().submit),this.primaryActionVisible(!0)):(this.primaryActionDisabled(e.disabled),this.primaryActionLabel(e.label),this.primaryActionVisible(!0)):(this.primaryActionDisabled(!0),this.primaryActionLabel(""),this.primaryActionVisible(!1)),this.refreshHeaderToolbar()},this.processSecondaryActions=e=>{if(this.secondaryActionsSet.removeAll(),e&&Object.keys(e).length>0)for(let t=0;t<e.length;t++)"disabled"===e[t].display?e[t].disabled=!0:e[t].disabled=!1,"off"!==e[t].display&&this.secondaryActionsSet.push(e[t]);this.refreshHeaderToolbar()},this.refreshHeaderToolbar=()=>{const e=this.composite.querySelector(`#${this.uid}_headerToolbar`);e&&this.elementWhenReady(e).then(()=>{null==e||e.refresh()}).catch(e=>{u.error("Error: "+e)})},this.headerScrollCallback=e=>{this.disconnectResizeObserver(),this.nonSemiStickyContent||(this.nonSemiStickyContent=this.composite.querySelector(".oj-sp-header-general-overview-non-semi-sticky-content")),this.headerStickyState(e)},this.updateStickyState=e=>{if(this.nonSemiStickyContent=this.composite.querySelector(".oj-sp-header-general-overview-non-semi-sticky-content"),!this.nonSemiStickyContent)return;const t=document.querySelector(".oj-sp-data-switcher-popup");e===y.DEFAULT||e===y.FULL_STICKY?(this.nonStickyContent.style.display="flex",this.nonStickyTimestampContent&&(this.nonStickyTimestampContent.style.display="flex")):e===y.SEMI_STICKY&&(this.nonStickyContent.style.display="none",this.nonStickyTimestampContent&&(this.nonStickyTimestampContent.style.display="none"),(null==t?void 0:t.isOpen())&&(null==t||t.close()),(0,o.isMobilePhoneDevice)()||this.closeMenuComponents()),this.placeholder&&(this.placeholder.style.height=this.fullHeaderHeight+"px",this.reconnectResizeObserver())},this.headerResizeCallback=()=>{const e=(0,o.setBusyResolve)(this.composite,{description:"Web Component Resizing"});this.isMediumScreen(this.screenRange()===f.MEDIUM),this.isSmallScreen(this.screenRange()===f.SMALL),this.closeMenuComponents(),this.setDataSwitcherPopupProps(),this.refreshHeaderToolbar(),e()},this.closeMenuComponents=()=>{const e=document.querySelector(`#${this.uid}_menuOverflow`),t=document.querySelector(`#${this.uid}_secondaryActionSetMenu`),i=document.querySelector(`#${this.uid}_secondaryActionSetSubMenu`);null==e||e.close(),null==t||t.close(),null==i||i.close()},this.setHeaderBackgroundMode=async()=>{const e=await(0,n.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.background(e)},this.setHeaderSplitBackground=()=>{if(this.colorStripOnTop()){const e={bubbles:!0,detail:{globalSplitBackgroundPosition:0}};a.EventDispatcher.dispatch(a.EventDispatcher.OVERRIDE_THEME_CONFIG,document.getElementById(this.uid+"_headerContainer"),e.detail,e.bubbles)}else(0,n.evaluateHeaderSplitBackground)(this.composite,document.getElementById(this.uid+"_headerContainer"))},this.handleHgoMobileActionsVisibility=async e=>{const t=this.composite.querySelector(".oj-sp-header-general-overview-mobile-buttons-container");if(!t)return;const i={duration:"300ms",offsetY:"150px",persist:g.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},o={duration:"300ms",offsetY:"150px",persist:g.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},s={duration:"300ms",offsetX:"rtl"===document.dir?"-150px":"150px",persist:g.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},a=window.getComputedStyle(t,null).getPropertyValue("bottom");if(e){if(t&&t.classList.contains("oj-helper-hidden-accessible"))return;t&&await d.slideOut(t,i),t.classList.add("oj-helper-hidden-accessible")}else{if(t&&!t.classList.contains("oj-helper-hidden-accessible"))return;t.classList.remove("oj-helper-hidden-accessible"),"0px"===a?this.tagsSlideInAnimation(t,o):this.tagsSlideInAnimation(t,s)}},this.tagsSlideInAnimation=async(e,t)=>{await d.slideIn(e,t)},this.addSwipeHandlerForMobile=()=>{this.mobileNavigationBarHandler=new s.MobileVerticalSwipeHandler,this.mobileNavigationBarHandler.enableHandler(),this.mobileNavigationBarHandler.addEventListener(s.SWIPE_TYPE.SWIPE_UP,this.handleHgoMobileActionsVisibility,!0),this.mobileNavigationBarHandler.addEventListener(s.SWIPE_TYPE.SWIPE_DOWN,this.handleHgoMobileActionsVisibility,!1)},this.initHeader=e=>{const t=this.composite;if(this.headerContentElement=this.composite.querySelector(`#${this.uid}_headerContent`),this.headerContainerElement=this.composite.querySelector(`#${this.uid}_headerContainer`),this.fullHeaderHeight=this.headerContentElement.getBoundingClientRect().height,this.setDataSwitcherPopupProps(),this.headerContentElement&&this.headerContainerElement){const e={componentName:this.uniqueComponentName,component:this.headerContentElement,offsetCalculationSubscription:{offsetOptions:{position:"top",level:r.PositionUtility.LEVEL_MAP.header},onOffsetChange:e=>{this.headerContentElement.style.top=e.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:this.headerContainerElement},onStickinessChange:e=>{const i=e.isSticky;this.isSticky=i,t.style.position=i?"sticky":"relative"}},scrollDirectionSubscription:{onScrollDirectionChange:e=>{if(this.isSticky){const t=document.documentElement,i=(0,o.isAskOracleEnabled)()?0:parseFloat((0,o.computedStyleOnElement)(t,"--oj-sp-global-header-height")),s=parseFloat((0,o.computedStyleOnElement)(t,"--oj-sp-shell-banner-height")),a=t.scrollTop>=this.fullHeaderHeight+i+s;e.scrollDirection===m.SCROLL_DIRECTION.DOWN&&this.headerStickyState()!==y.SEMI_STICKY&&this.composite.getBoundingClientRect().top<=0&&a&&this.headerScrollCallback(y.SEMI_STICKY),e.scrollDirection===m.SCROLL_DIRECTION.UP&&this.headerStickyState()!==y.FULL_STICKY&&this.headerScrollCallback(y.FULL_STICKY)}}}};r.PositionUtility.subscribe(e)}e.slotCounts.search>0&&this.searchSlotUsed(!0);const i=document.querySelector(`#${this.uid}_badgeContainer`);if(this.updateBadgeContainerWidth(),i){const e={attributes:!0,childList:!0,subtree:!0,characterData:!0};new MutationObserver(()=>{this.updateBadgeContainerWidth()}).observe(i,e)}this.throttledHeaderResizeCallback=(0,o.throttle)(this,this.headerResizeCallback,100),window.addEventListener("resize",this.throttledHeaderResizeCallback)};const b=p.getContext(e.element).getBusyContext();this.busyResolve=b.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.ojTranslate=h;const v=this.properties.translations||{},{inFlowBack:j=""}=v,A=__rest(v,["inFlowBack"]);this.res=i.observable(Object.assign(Object.assign({},l),A)),this.inFlowBackTranslationsString=i.observable(j||this.res().inFlowBack),this.uniqueComponentName=this.uid+"_header-general-overview",this.isSmallScreenOrMobile=o.isSmallScreenOrMobile,this.fullHeaderHeight=0,this.isInAppNavVisible=i.observable(!1),this.contextualInfoLabelVisible=i.observable(!1),this.goToParentVisible=i.observable(!0),this.inFlowBackVisible=i.observable(!1),this.isMediumScreen=i.observable(!1),this.isSmallScreen=i.observable(!1),this.mobileMenuVisible=i.observable(!1),this.popupWidth=i.observable(0),this.popupPositionOffset=i.observable(0),this.processDisplayOptions(this.properties.displayOptions),this.screenRange=c.createScreenRangeObservable(),this.contextualInfoVisible=i.observable((null===(t=this.properties.contextualInfo)||void 0===t?void 0:t.length)>0),this.actualPageTitle=i.observable(""),this.pageTitle=i.observable(e.properties.pageTitle?e.properties.pageTitle:"..."),this.processPageTitle(),this.avatarInitials=i.observable(null),this.avatarSrc=i.observable(null),this.avatarVisible=i.observable(!1),this.processAvatar(this.properties.avatar),this.primaryActionLabel=i.observable(),this.primaryActionDisabled=i.observable(),this.primaryActionVisible=i.observable(!1),this.processPrimaryAction(this.properties.primaryAction),this.headerStickyState=i.observable(y.DEFAULT),this.headerStickyState.subscribe(this.updateStickyState,this),this.secondaryActionsSet=i.observableArray(),this.secondaryActionEvent=i.observable(a.EventDispatcher.SECONDARY_ACTION_EVENT_NAME),this.processSecondaryActions(this.properties.secondaryActions),this.properties.timestamp?this.updateTime=i.observable(new Date(this.properties.timestamp).toISOString()):this.updateTime=i.observable(""),this.smartFiltersVisible=i.observable(!1),this.properties.smartFilters&&Object.keys(this.properties.smartFilters).length>0&&(0,o.dynamicImportPath)("oj-sp/smart-filters/loader",this.composite).then(()=>{this.smartFiltersVisible(!0)}),this.smartFilters$appliedFilters=i.observable(this.properties.smartFilters?this.properties.smartFilters.appliedFilters||this.properties.smartFilters.value:null),this.badgeVisible=i.pureComputed(()=>!1),this.searchSlotUsed=i.observable(!1),this.background=i.observable((0,n.getInitialMode)(this.properties.displayMode)),this.colorStripOnTop=i.observable(this.composite.classList.contains("oj-sp-internal-color-strip-on-top")),this.isHeaderInitialized=!1,this.resizeHeaderObserver=new ResizeObserver(e=>{this.headerStickyState()!==y.SEMI_STICKY&&this.elementWhenReady(this.headerContentElement).then(()=>{this.fullHeaderHeight=this.headerContentElement.getBoundingClientRect().height,this.placeholder.style.height=this.fullHeaderHeight+"px"}).catch(e=>{u.error("Error: "+e)});const t=this.composite.querySelector(`#${this.uid}_pageTitle`);this.elementWhenReady(t).then(()=>{const e=this.composite.querySelector(`#${this.uid}_oj-sp-header-general-overview-title-badge-container`);this.popupPositionOffset("rtl"===document.dir?(null==t?void 0:t.getBoundingClientRect().width)+(null==e?void 0:e.getBoundingClientRect().x):null==e?void 0:e.getBoundingClientRect().x),this.popupWidth(null==e?void 0:e.offsetWidth)}).catch(e=>{u.error("Error: "+e)})}),this.busyResolve()}activated(e){u.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55"),this.initHeaderBadge(e)}connected(e){u.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55"),this.isInAppNavVisible((0,o.isInAppNavExistsInDOM)()),this.isHeaderInitialized&&(this.setHeaderSplitBackground(),this.initHeader(e),this.intializeObserver()),this.isMediumScreen(this.screenRange()===f.MEDIUM),this.isSmallScreen(this.screenRange()===f.SMALL)}bindingsApplied(e){u.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),this.placeholder=this.composite.querySelector(".oj-sp-header-general-overview-placeholder"),this.nonStickyContent=this.composite.querySelector(".oj-sp-header-general-overview-non-semi-sticky-content"),this.nonStickyTimestampContent=this.composite.querySelector(".oj-sp-header-general-overview-timestamp"),this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.initHeader(e),this.intializeObserver(),this.isHeaderInitialized=!0),this.addSwipeHandlerForMobile();const t=this.composite.querySelector(`#${this.uid}_pageTitle`),i=this.composite.querySelector(`#${this.uid}_avatar`),o=this.composite.querySelector(`#${this.uid}_oj-sp-header-general-overview-title-badge-container`);this.popupWidth(null==o?void 0:o.offsetWidth),this.elementWhenReady(i).then(()=>{this.popupPositionOffset("rtl"===document.dir?(null==t?void 0:t.getBoundingClientRect().width)+(null==o?void 0:o.getBoundingClientRect().x):null==o?void 0:o.getBoundingClientRect().x)}).catch(e=>{u.error("Error: "+e)}),this.elementWhenReady(this.headerContentElement).then(()=>{this.fullHeaderHeight=this.headerContentElement.getBoundingClientRect().height,this.placeholder.style.height=this.fullHeaderHeight+"px"}).catch(e=>{u.error("Error: "+e)})}propertyChanged(e){const t=(0,o.setBusyResolve)(this.composite,{description:"Web Component Property Update"});let i="",s="";try{i=JSON.stringify(e.previousValue)}catch(e){i="[Circular structure]"}try{s=JSON.stringify(e.value)}catch(e){s="[Circular structure]"}if(u.log(`%c CCA ${this.uid} '${e.property}' property changed: ${i} ====> ${s}`,"background: #222; color: #bada55"),"displayOptions"===e.property&&e.value&&this.processDisplayOptions(e.value),"pageTitle"===e.property&&(this.pageTitle(e.value&&""!==e.value?e.value:"..."),this.processPageTitle()),"avatar"===e.property&&e.value&&this.processAvatar(e.value),"primaryAction"===e.property&&this.processPrimaryAction(e.value),"contextualInfo"===e.property&&this.contextualInfoVisible(e.value&&e.value.length>0),"secondaryActions"===e.property&&this.processSecondaryActions(e.value),"timestamp"===e.property&&(e.value?this.updateTime(new Date(e.value).toISOString()):this.updateTime("")),"smartFilters"===e.property&&(e.value&&Object.keys(e.value).length>0?(0,o.dynamicImportPath)("oj-sp/smart-filters/loader",this.composite).then(()=>{this.smartFiltersVisible(!0)}):this.smartFiltersVisible(!1),e.updatedFrom===o.UPDATED_FROM.EXTERNAL&&this.smartFilters$appliedFilters(e.value.appliedFilters||e.value.value)),"translations"===e.property){const t=e.value||{},{inFlowBack:i=""}=t,o=__rest(t,["inFlowBack"]);this.inFlowBackTranslationsString(i||this.res().inFlowBack),this.res(Object.assign(Object.assign({},l),o))}"displayMode"===e.property&&this.setHeaderBackgroundMode(),t()}disconnected(e){var t;u.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),window.removeEventListener("resize",this.throttledHeaderResizeCallback),r.PositionUtility.unsubscribe({componentName:this.uniqueComponentName}),this.disconnectResizeObserver(),null===(t=this.mobileNavigationBarHandler)||void 0===t||t.removeHandler()}updateBadgeContainerWidth(){const e=document.documentElement,t=this.composite.querySelector(`#${this.uid}_badgeContainer`),i=parseInt(window.getComputedStyle(document.body).getPropertyValue("font-size"),10);if(t){const o=t.getBoundingClientRect().width/i;e.style.setProperty("--oj-sp-header-general-overview-badge-container-width",o+"rem")}}initHeaderBadge(e){this.badgeVisible=i.pureComputed(()=>{var t;return(null===(t=e.properties)||void 0===t?void 0:t.badge)&&e.properties.badge.text&&e.properties.badge.status}),this.badgeClass=i.pureComputed(()=>{if(this.badgeVisible()){let t="oj-badge";return["danger","warning","success","info"].indexOf(e.properties.badge.status)>-1&&(t+=" oj-badge-"+e.properties.badge.status),this.screenRange()===f.SMALL&&(t+=" oj-badge-sm"),t}return""})}setDataSwitcherPopupProps(){const e=this.composite.querySelector(`#${this.uid}_pageTitle`),t=this.composite.querySelector(`#${this.uid}_oj-sp-header-general-overview-title-badge-container`);this.popupWidth(null==t?void 0:t.getBoundingClientRect().width),this.popupPositionOffset("rtl"===document.dir?(null==e?void 0:e.getBoundingClientRect().width)+(null==t?void 0:t.getBoundingClientRect().x):null==t?void 0:t.getBoundingClientRect().x)}intializeObserver(){this.resizeHeaderObserver.observe(this.headerContentElement)}disconnectResizeObserver(){var e;null===(e=this.resizeHeaderObserver)||void 0===e||e.disconnect()}reconnectResizeObserver(){this.resizeHeaderObserver&&Object.keys(this.resizeHeaderObserver).length<1&&this.intializeObserver()}getAvatarTitleContainerMargin(){var e;const t=()=>0===this.secondaryActionsSet().length,i=()=>!this.inFlowBackVisible()&&this.goToParentVisible(),o=()=>this.screenRange()===f.SMALL;if(o()&&!(()=>this.inFlowBackVisible()||this.goToParentVisible())()&&!t())return"oj-sm-only-margin-4x-end";if(!o()&&!(()=>this.screenRange()===f.MEDIUM)()&&!i()){if(!this.avatarVisible()&&!(null===(e=this.properties)||void 0===e?void 0:e.pageSubtitle)&&this.updateTime())return"oj-lg-padding-12x-end oj-lg-margin-12x-end oj-lg-align-self-flex-start";if(this.primaryActionVisible()||!t()||this.updateTime())return"oj-lg-padding-12x-end oj-lg-margin-12x-end"}return o()||!t()||this.primaryActionVisible()||!i()||this.updateTime()?o()&&t()&&this.primaryActionVisible()&&i()?"oj-sm-only-margin-7x-top":o()&&t()&&!this.primaryActionVisible()&&i()?"oj-sm-only-margin-11x-top":void 0:"oj-md-margin-9x-top  oj-md-padding-2x-top"}getHeaderAlignment(){const e=()=>this.secondaryActionsSet().length>0;return this.goToParentVisible()&&!this.inFlowBackVisible()||(()=>this.screenRange()===f.MEDIUM)()&&(e()||this.primaryActionVisible())||(()=>this.screenRange()===f.SMALL)()&&(this.goToParentVisible()||this.inFlowBackVisible())&&e()?"oj-sp-header-general-overview-avatar-title-buttons-in-new-line":"oj-sp-header-general-overview-avatar-title-buttons-container-side-by-side"}}})),define("css!oj-sp/header-general-overview/header-general-overview-styles",[],(function(){})),define("oj-sp/header-general-overview/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./header-general-overview-view.html","./header-general-overview-viewModel","css!./header-general-overview-styles","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-header-general-overview",{metadata:JSON.parse(o),view:s,viewModel:a.HeaderGeneralOverviewViewModel})}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/collection-detail-page/collection-detail-page",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojvcomponent","preact","ojs/ojresponsiveutils","oj-sp/common/EventDispatcher","oj-sp/collection-detail-page/component/stacker/collection-detail-stacker","css!./collection-detail-page-styles","oj-sp/collection-container/loader","oj-sp/header-general-overview/loader","ojs/ojdrawerpopup"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionDetailPage=void 0;let d=class extends a.Component{constructor(e){var t;super(e),this.state={drawerOpen:!1,isLargeScreen:!0},this.toggleDetailsPanelDrawer=()=>{this.setState({drawerOpen:!this.state.drawerOpen})},this.closeDetailsPanelDrawer=e=>{this.setState({drawerOpen:!1},e)},this.handleDrawerOpenChanged=e=>{!e.detail.value&&this.state.drawerOpen&&this.setState({drawerOpen:!1})},this.setGlobalHeaderHeight=()=>{const e=this.compRefElement,t=document.querySelector(".oj-sp-global-header-panel-container");e&&(t?e.style.setProperty("--oj-sp-collection-detail-global-header-height",t.getBoundingClientRect().height+"px"):e.style.setProperty("--oj-sp-collection-detail-global-header-height","0px"))},this.mediaQueryChangeListener=e=>{this.closeDetailsPanelDrawer(()=>{e.matches?this.setState({isLargeScreen:!1}):this.setState({isLargeScreen:!0})})},this.ref=(0,a.createRef)(),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,s.getUniqueId)(),this.res=Object.assign({},i);const o=n.getFrameworkQuery(n.FRAMEWORK_QUERY_KEY.MD_DOWN);this.mediaQuery=window.matchMedia(o),this.mediaQuery.addEventListener("change",this.mediaQueryChangeListener),this.state.isLargeScreen=!this.mediaQuery.matches}componentDidMount(){o.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} mounted`),this.compRefElement=this.ref.current,this.setGlobalHeaderHeight(),r.EventDispatcher.dispatch(r.EventDispatcher.OVERRIDE_SHELL_BOTTOM_SPACING_EVENT_NANE,this.compRefElement,{fixedLength:!0})}componentDidUpdate(e){this.setGlobalHeaderHeight(),o.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} updated from :`,e,"to:",this.props),this.state.isLargeScreen||1!==this.props.selectedItems.length||!e.selectedItems.every(e=>e)||e.selectedItems.some(e=>JSON.stringify(e)==JSON.stringify(this.props.selectedItems[0]))||this.toggleDetailsPanelDrawer()}componentWillUnmount(){this.mediaQuery.removeEventListener("change",this.mediaQueryChangeListener)}render(e){var t;return(0,a.h)("div",{id:"root",class:"oj-sp-collection-detail-root oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap",ref:this.ref},(0,a.h)("oj-sp-header-general-overview",{id:this.uniqueId+"_h","data-otel-hero":"collectionDetailPageHeader",pageTitle:e.pageTitle,pageSubtitle:e.pageSubtitle,avatar:e.avatar,displayOptions:e.displayOptions,contextualInfo:e.contextualInfo,selectContext:e.selectContext,selectContextValue:e.selectContextValue,selectContextValueItem:e.selectContextValueItem,secondaryActions:e.secondaryActions,timestamp:e.timestamp,badge:e.badge,translations:e.translations,displayMode:e.displayMode,"data-oj-context":!0}),(0,a.h)("div",{id:"mainContent",class:"oj-sp-collection-detail-contents oj-sp-public-primary-content-container"},(0,a.h)("div",{class:"oj-sp-collection-detail-main-area oj-flex oj-sm-flex-direction-row oj-sm-flex-wrap-nowrap"},(0,a.h)("div",{"data-otel-hero":"oj-sp-collection-detail-page.default","data-oj-context":!0,class:"oj-flex-item oj-sm-12 oj-lg-5 oj-xl-3 oj-sp-collection-detail-collection-area\n                          oj-sm-padding-2x-top oj-lg-padding-8x-top"},e.children),(0,a.h)("div",{"data-otel-hero":"oj-sp-collection-detail-page.detailTemplate","data-oj-context":!0,class:"oj-flex-item oj-sm-only-hide oj-md-only-hide oj-lg-7 oj-xl-9 oj-sp-collection-detail-contents-area\n                          oj-sm-flex-direction-row oj-sm-flex-wrap-nowrap oj-sm-padding-8x-top oj-sm-padding-6x-horizontal"},this.state.isLargeScreen&&e.detailTemplate&&(0,a.h)(l.CollectionDetailStacker,{detail:e.detailTemplate,selectedItems:e.selectedItems,noSelection:e.noSelection})))),!this.state.isLargeScreen&&(0,a.h)("div",null,(0,a.h)("oj-drawer-popup",{class:"oj-sp-collection-detail-page-drawer-popup",edge:"end",opened:this.state.drawerOpen,autoDismiss:"none",onopenedChanged:this.handleDrawerOpenChanged},null===(t=e.detailTemplate)||void 0===t?void 0:t.call(e,e.selectedItems[0]))))}};d.defaultProps={},d._metadata={properties:{avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]}}},contextualInfo:{type:"Array<object>"},displayMode:{type:"string",enumValues:["mixed","light"]},displayOptions:{type:"object",properties:{contextualInfoLabel:{type:"boolean"},goToParent:{type:"boolean"},inFlowBack:{type:"boolean"},mobileMenu:{type:"boolean"}}},pageTitle:{type:"string"},pageSubtitle:{type:"string"},secondaryActions:{type:"Array<object>"},selectedItems:{type:"Array<object>"},selectContext:{type:"object",properties:{data:{type:"DataProvider"},itemText:{type:"string"},labelHint:{type:"string"}}},selectContextValue:{type:"object",writeback:!0},selectContextValueItem:{type:"object",writeback:!0},timestamp:{type:"string"},translations:{type:"object",properties:{actions:{type:"string"},goToParent:{type:"string"},avatarHint:{type:"string"}}}},slots:{"":{implicitBusyContext:!0},detailTemplate:{data:{}},noSelection:{}},events:{spSecondaryAction:{},spGoToParent:{},spInFlowBack:{}},extension:{_WRITEBACK_PROPS:["selectContextValue","selectContextValueItem"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},d=__decorate([(0,s.customElement)("oj-sp-collection-detail-page"),__metadata("design:paramtypes",[Object])],d),t.CollectionDetailPage=d})),define("oj-sp/collection-detail-page/loader",["require","exports","./collection-detail-page"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionDetailPage=void 0,Object.defineProperty(t,"CollectionDetailPage",{enumerable:!0,get:function(){return i.CollectionDetailPage}})})),define("oj-sp/collection-toolbar/collection-toolbar-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementType=t.ActionType=void 0,function(e){e.STANDARD="standard",e.PRIMARY="primary",e.SECONDARY="secondary",e.MORE_ACTIONS="more-actions"}(t.ActionType||(t.ActionType={})),function(e){e.BUTTON="BUTTON",e.BUTTON_ICON="BUTTON_ICON",e.BUTTON_ICON_TEXT="BUTTON_ICON_TEXT",e.MENU_BUTTON="MENU_BUTTON"}(t.ElementType||(t.ElementType={}))})),define("oj-sp/collection-toolbar/collection-toolbar-constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OJ_MENU_ACTION=t.OJ_ACTION=t.RESIZE_OBSERVER_DELAY_MS=t.OPEN_OPTIONS=t.BUTTON_DISPLAY_LABEL=t.BUTTON_DISPLAY_ALL=t.MENU_BUTTON_CHROMING_OUTLINED=t.BUTTON_CHROMING_OUTLINED=t.BUTTON_SMALL=t.OVERFLOW_BUTTON_ICON=t.ADD_BUTTON_ICON=t.MAXIMUM_SECONDARY_ACTIONS=t.MAXIMUM_PRIMARY_GROUP_ACTIONS=t.MAXIMUM_PRIMARY_ACTIONS=t.STANDARD_DELETE_ACTION=t.STANDARD_ADD_ACTION=t.STANDARD_DELETE_ID=t.STANDARD_ADD_ID=void 0,t.STANDARD_ADD_ID="add",t.STANDARD_DELETE_ID="delete",t.STANDARD_ADD_ACTION={id:t.STANDARD_ADD_ID,label:"add"},t.STANDARD_DELETE_ACTION={id:t.STANDARD_DELETE_ID,label:"delete"},t.MAXIMUM_PRIMARY_ACTIONS=3,t.MAXIMUM_PRIMARY_GROUP_ACTIONS=6,t.MAXIMUM_SECONDARY_ACTIONS=6,t.ADD_BUTTON_ICON="oj-ux-ico-plus",t.OVERFLOW_BUTTON_ICON="oj-ux-ico-overflow-h",t.BUTTON_SMALL="oj-button-sm",t.BUTTON_CHROMING_OUTLINED="outlined",t.MENU_BUTTON_CHROMING_OUTLINED="outlined",t.BUTTON_DISPLAY_ALL="all",t.BUTTON_DISPLAY_LABEL="label",t.OPEN_OPTIONS={initialFocus:"firstItem",position:{my:{horizontal:"end"},at:{horizontal:"end"}}},t.RESIZE_OBSERVER_DELAY_MS=100,t.OJ_ACTION="ojAction",t.OJ_MENU_ACTION="ojMenuAction"})),define("oj-sp/collection-toolbar/utils/action-converter-utils",["require","exports","../collection-toolbar-constants","../collection-toolbar-types"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionConverterUtils=void 0;t.ActionConverterUtils=class{static mapStandardActionToActionObject(e,t,i){return"off"===t?null:{display:t,id:e.id,label:i[e.label]}}static mapAddActionToButtonModel(e){const t=this.mapActionObjectToButtonModel(e,o.ActionType.STANDARD);return t.icon={class:i.ADD_BUTTON_ICON,display:"icons"},t}static mapDeleteActionToButtonModel(e){return this.mapActionObjectToButtonModel(e,o.ActionType.STANDARD)}static getValidCustomActionGroup(e,t){if(!(null==e?void 0:e.label)||!(null==e?void 0:e.actions))return null;const i=this.getValidCustomActions(e.actions,t);return 0===i.length?null:{label:e.label,actions:i}}static getValidCustomActions(e,t){return e?e.filter(e=>e.id&&e.label&&"off"!==e.display).slice(0,t):[]}static mapPrimaryActionsToButtonsModel(e){return e.map(e=>this.mapCustomActionToButtonModel(e,o.ActionType.PRIMARY))}static mapPrimaryActionGroupToMenuModel(e){return this.mapCustomActionGroupToMenuModel(e,o.ActionType.PRIMARY)}static mapSecondaryActionsToButtonsModel(e){return e.map(e=>this.mapCustomActionToButtonModel(e,o.ActionType.SECONDARY))}static mapMoreMenuActionsToMenuModel(e,t){return{id:o.ActionType.MORE_ACTIONS,label:t,display:"on",actionType:o.ActionType.MORE_ACTIONS,actions:e,hidden:!1}}static mapActionObjectToButtonModel(e,t){return{actionType:t,display:e.display,hidden:!1,id:e.id,label:e.label}}static mapCustomActionToButtonModel(e,t){return Object.assign(Object.assign({},e),{actionType:t,hidden:!1})}static mapCustomActionGroupToMenuModel(e,t){return{id:t,label:e.label,display:"on",actionType:t,actions:e.actions.map(e=>this.mapCustomActionToButtonModel(e,t)),hidden:!1}}}})),define("oj-sp/collection-toolbar/components/toolbar-action-control",["require","exports","preact","../collection-toolbar-constants"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarActionControl=void 0;t.ToolbarActionControl=e=>{var t;return(0,i.h)(i.Fragment,null,(null===(t=e.actionModel.actions)||void 0===t?void 0:t.length)>0?s(e):l(e))};const s=e=>{const{actionModel:t}=e;return t.icon?a(e):n(e)},a=e=>{const{componentId:t,actionModel:s}=e,a=`${t}_${s.actionType}_icon_menu_button`;return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu-button",{key:a,id:a,class:`${o.BUTTON_SMALL} oj-sp-collection-toolbar-${s.actionType}-menu-button`,chroming:o.MENU_BUTTON_CHROMING_OUTLINED,display:s.icon.display},(0,i.h)("span",{slot:"endIcon",className:s.icon.class}),(0,i.h)("span",null,s.label),r(e)))},n=e=>{const{componentId:t,actionModel:s}=e,a=`${t}_${s.actionType}_menu_button`;return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu-button",{key:a,id:a,class:`${o.BUTTON_SMALL} oj-sp-collection-toolbar-${s.actionType}-menu-button`,chroming:o.MENU_BUTTON_CHROMING_OUTLINED},(0,i.h)("span",null,s.label),r(e)))},r=e=>{const{componentId:t,actionModel:s,actionHandler:a}=e;return(0,i.h)(i.Fragment,null,(0,i.h)("oj-menu",{slot:"menu",class:`oj-sp-collection-toolbar-${s.actionType}-menu`,id:`${t}_${s.actionType}_menu`,openOptions:o.OPEN_OPTIONS,onojMenuAction:a},s.actions.map((e,o,s)=>{var a,n,r;const l=(null===(a=e.actions)||void 0===a?void 0:a.length)>0?e.actionType+"_menu_label":`${e.actionType}_${e.id}`;return(0,i.h)(i.Fragment,null,(d=e,p=s,(c=o)>0&&d.actionType!==p[c-1].actionType&&(0,i.h)("oj-option",{class:"oj-sp-collection-toolbar-more-actions-divider"})),(0,i.h)("oj-option",{key:`${t}_${l}`,id:`${t}_${l}`,value:l,disabled:"disabled"===e.display},(0,i.h)("span",null,e.label),(null===(n=e.actions)||void 0===n?void 0:n.length)>0&&(0,i.h)("oj-menu",{class:`oj-sp-collection-toolbar-${e.actionType}-sub-menu`},null===(r=e.actions)||void 0===r?void 0:r.map(e=>{const o=`${e.actionType}_${e.id}`;return(0,i.h)("oj-option",{key:`${t}_${o}`,id:`${t}_${o}`,value:o,disabled:"disabled"===e.display},(0,i.h)("span",null,e.label))}))));var d,c,p})))},l=e=>{const{componentId:t,actionModel:s,actionHandler:a}=e,n=`${t}_${s.actionType}_${s.id}`;return(0,i.h)(i.Fragment,null,(0,i.h)("oj-button",{class:`${o.BUTTON_SMALL} oj-sp-collection-toolbar-${s.actionType}-button`,id:n,disabled:"disabled"===s.display,label:s.label,display:s.icon?s.icon.display:o.BUTTON_DISPLAY_ALL,chroming:o.BUTTON_CHROMING_OUTLINED,onojAction:e=>a(e)},null!=s.icon&&(0,i.h)("span",{slot:"startIcon",className:s.icon.class}),(0,i.h)("span",null,s.label)))}})),define("oj-sp/collection-toolbar/utils/responsive-toolbar-calculator",["require","exports","../collection-toolbar-constants","../collection-toolbar-types"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsiveToolbarCalculator=void 0;class s{constructor(){this.fontStyleMap=new Map,this.buttonsFixedWidthMap=new Map,this.calculateTextWidth=(e,t=this.buttonFont)=>{const i=s.CANVAS.getContext("2d");i.font=t;const o=i.measureText(e);return Math.floor(o.width)},this.calculateElementWidth=(e,t)=>{if(e===o.ElementType.BUTTON_ICON)return this.getElementWidth(e);return this.calculateTextWidth(t)+this.getElementWidth(e)}}calculateControlsFixedWidth(e){this.initializeComponentStyles(e),this.initializeFontValuesMap(),this.initializeButtonsFixedWidthsMap()}calculateControlsFullWidth(e,t){var s;const a=e.find(e=>e.id===i.STANDARD_ADD_ID);if(a){let i=e.some(e=>e.actionType!==o.ActionType.STANDARD);i=i||(null===(s=t.actions)||void 0===s?void 0:s.length)>0,a.icon.display=i?"icons":"all"}e.forEach(e=>{e.width=this.calculateElementWidth(this.getElementType(e),e.label)}),t.width=this.calculateElementWidth(this.getElementType(t),t.label)}getResponsiveToolbar(e,t,i){const o=[],s=Object.assign({},t);let a=0;e.forEach(e=>{a+=e.width,o.push(Object.assign({},e))});let n=t.actions.length;n&&(a+=t.width);let r=o.length-1;for(;a>=i&&r>0;)a-=o[r].width,o[r--].hidden=!0,0===n&&(a+=t.width),n++;return 1===n&&r>=0&&(o[r].hidden=!0,a-=o[r].width),0===r&&a>i&&(s.icon=this.getOverflowButtonIcon()),{toolbarActions:this.getVisibleToolbarActions(o),moreActionsMenu:this.getFinalMoreActionsMenu(o,s)}}initializeComponentStyles(e){this.componentStyles=getComputedStyle(e)}initializeFontValuesMap(){this.buttonFontSize=this.getPropertyValueInPx(s.BUTTON_FONT_SIZE_VAR,s.BUTTON_FONT_SIZE_DEFAULT),this.buttonFont=`${this.buttonFontSize}px ${s.FONT_FAMILY_DEFAULT}`,this.fontStyleMap.set(s.BUTTON_FONT_KEY,this.buttonFont)}initializeButtonsFixedWidthsMap(){this.buttonPadding=this.getPropertyValueInPx(s.BUTTON_TEXT_TO_EDGE_PADDING_VAR,s.BUTTON_PADDING_DEFAULT),this.buttonMargin=this.getPropertyValueInPx(s.TOOLBAR_BUTTON_MARGIN_VAR,s.BUTTON_MARGIN_DEFAULT),this.buttonWidth=2*this.buttonPadding+s.BUTTON_BORDER+2*this.buttonMargin,this.buttonIconContainerWidth=this.getPropertyValueInPx(s.BUTTON_HEIGHT_VAR,s.BUTTON_ICON_CONTAINER_WIDTH_DEFAULT),this.buttonIconWidth=this.buttonIconContainerWidth+2*this.buttonMargin,this.menuButtonTextEdgePadding=this.getPropertyValueInPx(s.BUTTON_TEXT_TO_EDGE_PADDING_VAR,s.BUTTON_TEXT_EDGE_PADDING_DEFAULT),this.menuButtonIconTextPadding=this.getPropertyValueInPx(s.BUTTON_ICON_TO_TEXT_PADDING_VAR,s.BUTTON_ICON_TEXT_PADDING_DEFAULT),this.menuButtonIconEdgePadding=this.getPropertyValueInPx(s.BUTTON_ICON_TO_EDGE_PADDING_VAR,s.BUTTON_ICON_EDGE_PADDING_DEFAULT),this.menuButtonIconSize=this.getPropertyValueInPx(s.BUTTON_ICON_SIZE_VAR,s.BUTTON_ICON_SIZE_DEFAULT),this.menuButtonPadding=this.menuButtonTextEdgePadding+this.menuButtonIconTextPadding+this.menuButtonIconEdgePadding+this.menuButtonIconSize,this.menuButtonWidth=this.menuButtonPadding+s.BUTTON_BORDER+2*this.buttonMargin,this.buttonsFixedWidthMap.set(o.ElementType.BUTTON,this.buttonWidth),this.buttonsFixedWidthMap.set(o.ElementType.BUTTON_ICON,this.buttonIconWidth),this.buttonsFixedWidthMap.set(o.ElementType.BUTTON_ICON_TEXT,this.menuButtonWidth),this.buttonsFixedWidthMap.set(o.ElementType.MENU_BUTTON,this.menuButtonWidth)}getElementType(e){return e.icon?"icons"===e.icon.display?o.ElementType.BUTTON_ICON:o.ElementType.BUTTON_ICON_TEXT:e.actions?o.ElementType.MENU_BUTTON:o.ElementType.BUTTON}getElementWidth(e){var t;return null!==(t=this.buttonsFixedWidthMap.get(e))&&void 0!==t?t:0}convertValueToPixel(e){let t=1;return e.includes("em")||e.includes("rem")?t=16:e.includes("pt")&&(t=1.33),parseFloat(e)*t}getPropertyValueInPx(e,t){const i=this.componentStyles.getPropertyValue(e),o=this.convertValueToPixel(i);return Number.isNaN(o)?t:Math.ceil(o)}getVisibleToolbarActions(e){return e.filter(e=>!e.hidden)}getFinalMoreActionsMenu(e,t){const i=e.filter(e=>e.hidden);return t.actions=i.concat(t.actions),t}getOverflowButtonIcon(){return{class:i.OVERFLOW_BUTTON_ICON,display:"icons"}}}s.CANVAS=document.createElement("canvas"),s.BUTTON_TEXT_TO_EDGE_PADDING_VAR="--oj-button-sm-text-to-edge-padding",s.BUTTON_ICON_TO_TEXT_PADDING_VAR="--oj-button-sm-icon-to-text-padding",s.BUTTON_ICON_TO_EDGE_PADDING_VAR="--oj-button-sm-icon-to-edge-padding",s.TOOLBAR_BUTTON_MARGIN_VAR="--oj-toolbar-button-margin",s.BUTTON_FONT_SIZE_VAR="--oj-button-sm-font-size",s.BUTTON_ICON_SIZE_VAR="--oj-button-sm-icon-size",s.BUTTON_HEIGHT_VAR="--oj-button-sm-height",s.BUTTON_FONT_KEY="BUTTON_FONT",s.FONT_FAMILY_DEFAULT="Oracle sans",s.BUTTON_FONT_SIZE_DEFAULT=14,s.BUTTON_PADDING_DEFAULT=16,s.BUTTON_BORDER=2,s.BUTTON_MARGIN_DEFAULT=8,s.BUTTON_ICON_CONTAINER_WIDTH_DEFAULT=36,s.BUTTON_TEXT_EDGE_PADDING_DEFAULT=16,s.BUTTON_ICON_TEXT_PADDING_DEFAULT=10,s.BUTTON_ICON_EDGE_PADDING_DEFAULT=10,s.BUTTON_ICON_SIZE_DEFAULT=20,t.ResponsiveToolbarCalculator=s})),define("css!oj-sp/collection-toolbar/collection-toolbar-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/collection-toolbar/collection-toolbar",["require","exports","ojs/ojvcomponent","preact","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","./collection-toolbar-types","./utils/action-converter-utils","./collection-toolbar-constants","./components/toolbar-action-control","oj-sp/common-util/common-util","./utils/responsive-toolbar-calculator","ojs/ojcontext","ojs/ojtoolbar","css!./collection-toolbar-styles"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionToolbar=void 0;let h=class extends o.Component{constructor(e,t){var s;super(e,t),this.processAndInitializeActions=e=>{this.processDisplayOptions(e),this.processCustomActions(e),this.initializeToolbarActions(),this.initializeMoreActionsMenu()},this.initializeStateWithEmptyToolbar=()=>{this.state={toolbarActions:[],moreActionsMenu:null}},this.processDisplayOptions=({displayOptions:e})=>{this.standardActionAdd=r.ActionConverterUtils.mapStandardActionToActionObject(l.STANDARD_ADD_ACTION,e.add,this.componentStrings),this.standardActionDelete=r.ActionConverterUtils.mapStandardActionToActionObject(l.STANDARD_DELETE_ACTION,e.delete,this.componentStrings)},this.processCustomActions=e=>{this.customPrimaryActions=r.ActionConverterUtils.getValidCustomActions(e.primaryActions,l.MAXIMUM_PRIMARY_ACTIONS),this.customPrimaryActionGroup=r.ActionConverterUtils.getValidCustomActionGroup(e.primaryActionGroup,l.MAXIMUM_PRIMARY_GROUP_ACTIONS),this.customSecondaryActions=r.ActionConverterUtils.getValidCustomActions(e.secondaryActions,l.MAXIMUM_SECONDARY_ACTIONS)},this.initializeToolbarActions=()=>{this.initialToolbarActions=[],this.standardActionAdd&&this.initialToolbarActions.push(r.ActionConverterUtils.mapAddActionToButtonModel(this.standardActionAdd)),this.customPrimaryActions.length&&this.initialToolbarActions.push(...r.ActionConverterUtils.mapPrimaryActionsToButtonsModel(this.customPrimaryActions)),this.customPrimaryActionGroup&&this.initialToolbarActions.push(r.ActionConverterUtils.mapPrimaryActionGroupToMenuModel(this.customPrimaryActionGroup)),1!==this.customSecondaryActions.length||this.standardActionDelete||this.initialToolbarActions.push(r.ActionConverterUtils.mapSecondaryActionsToButtonsModel(this.customSecondaryActions)[0]),this.standardActionDelete&&0===this.customSecondaryActions.length&&this.initialToolbarActions.push(r.ActionConverterUtils.mapDeleteActionToButtonModel(this.standardActionDelete))},this.initializeMoreActionsMenu=()=>{const e=[],t=this.customSecondaryActions.length+(this.standardActionDelete?1:0)>1;t&&e.push(...r.ActionConverterUtils.mapSecondaryActionsToButtonsModel(this.customSecondaryActions)),this.standardActionDelete&&t&&e.push(r.ActionConverterUtils.mapDeleteActionToButtonModel(this.standardActionDelete)),this.initialMoreActionsMenu=r.ActionConverterUtils.mapMoreMenuActionsToMenuModel(e,this.componentStrings.moreActions)},this.allActionsHandler=e=>{var t,i,o,s,a,r,d,c;const p=this.getActionIdWithType(e);if(p.includes(n.ActionType.STANDARD))p.endsWith(l.STANDARD_ADD_ID)?null===(i=(t=this.props).onSpAdd)||void 0===i||i.call(t):null===(s=(o=this.props).onSpDelete)||void 0===s||s.call(o);else if(p.includes(n.ActionType.PRIMARY)){const e=p.substring(n.ActionType.PRIMARY.length+1);null===(r=(a=this.props).onSpPrimaryAction)||void 0===r||r.call(a,{actionId:e})}else if(p.includes(n.ActionType.SECONDARY)){const e=p.substring(n.ActionType.SECONDARY.length+1);null===(c=(d=this.props).onSpSecondaryAction)||void 0===c||c.call(d,{actionId:e})}},this.propertyChangedHandler=e=>{this.componentStrings=Object.assign(Object.assign({},a),e.translations),this.processAndInitializeActions(e),this.responsiveCalculator.calculateControlsFullWidth(this.initialToolbarActions,this.initialMoreActionsMenu);const t=this.responsiveCalculator.getResponsiveToolbar(this.initialToolbarActions,this.initialMoreActionsMenu,this.toolbarPanelWidth);this.updateStateWithResponsiveToolbar(t)},this.initializeResponsiveToolbar=()=>{this.toolbarPanelWidth=this.getToolbarPanelWidth(),this.responsiveCalculator=new p.ResponsiveToolbarCalculator,this.responsiveCalculator.calculateControlsFixedWidth(this.toolbarPanel),this.responsiveCalculator.calculateControlsFullWidth(this.initialToolbarActions,this.initialMoreActionsMenu);const e=this.responsiveCalculator.getResponsiveToolbar(this.initialToolbarActions,this.initialMoreActionsMenu,this.toolbarPanelWidth);this.updateStateWithResponsiveToolbar(e)},this.initializeResizeObserver=()=>{if(this.toolbarPanel){const e=(0,c.debounce)(this.onToolbarPanelResize,l.RESIZE_OBSERVER_DELAY_MS);this.resizeObserver=new ResizeObserver(()=>requestAnimationFrame(e)),this.resizeObserver.observe(this.toolbarPanel)}},this.onToolbarPanelResize=()=>{const e=this.getToolbarPanelWidth();if(e!==this.toolbarPanelWidth){this.toolbarPanelWidth=e;const t=this.responsiveCalculator.getResponsiveToolbar(this.initialToolbarActions,this.initialMoreActionsMenu,this.toolbarPanelWidth);this.updateStateWithResponsiveToolbar(t)}},this.updateStateWithResponsiveToolbar=e=>{this.setState({toolbarActions:e.toolbarActions,moreActionsMenu:e.moreActionsMenu})},this.refreshToolbar=()=>{if(this.toolbarPanel){const e=this.toolbarPanel.querySelector("oj-toolbar");u.getContext(e).getBusyContext().whenReady().then(()=>e.refresh())}},this.getToolbarPanelWidth=()=>this.toolbarPanel.getBoundingClientRect().width,this.getActionIdWithType=e=>{if(e.type===l.OJ_MENU_ACTION)return e.detail.selectedValue;return e.target.id.substring(this.uniqueId.length+1)},this.disconnectResizeObserver=()=>{this.resizeObserver&&this.resizeObserver.disconnect()},this.uniqueId=null!==(s=e.id)&&void 0!==s?s:(0,i.getUniqueId)(),this.componentStrings=Object.assign(Object.assign({},a),e.translations),this.ref=(0,o.createRef)(),this.standardActionAdd=null,this.standardActionDelete=null,this.customPrimaryActions=[],this.customPrimaryActionGroup=null,this.customSecondaryActions=[],this.processAndInitializeActions(e),this.initializeStateWithEmptyToolbar()}render(e){return(0,o.h)("div",{id:this.uniqueId+"_toolbar-panel",class:"oj-sp-collection-toolbar-panel",role:"group",ref:this.ref},(0,o.h)("oj-toolbar",{"aria-label":"Functional",class:"oj-flex-bar-start oj-sm-flex-wrap-nowrap oj-sp-collection-toolbar-actions"},this.renderToolbarActions(),this.renderMoreActionsMenu()))}componentDidMount(){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} is mounted`),this.toolbarPanel=this.ref.current,this.initializeResponsiveToolbar(),this.initializeResizeObserver()}componentDidUpdate(e,t){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} is updated`),this.props!==e&&this.propertyChangedHandler(this.props),this.refreshToolbar()}componentWillUnmount(){s.log(`Component ${this.constructor.name} with id ${this.uniqueId} will unmount`),this.disconnectResizeObserver()}renderToolbarActions(){return(0,o.h)(o.Fragment,null,this.state.toolbarActions.map(e=>!e.hidden&&(0,o.h)(d.ToolbarActionControl,{key:`${this.uniqueId}_${e.actionType}_${e.id}`,componentId:this.uniqueId,actionModel:e,actionHandler:this.allActionsHandler})))}renderMoreActionsMenu(){var e,t;return(0,o.h)(o.Fragment,null,(null===(t=null===(e=this.state.moreActionsMenu)||void 0===e?void 0:e.actions)||void 0===t?void 0:t.length)>0&&(0,o.h)(d.ToolbarActionControl,{key:`${this.uniqueId}_${this.state.moreActionsMenu.id}`,componentId:this.uniqueId,actionModel:this.state.moreActionsMenu,actionHandler:this.allActionsHandler}))}};h.defaultProps={displayOptions:{add:"off",delete:"off"}},h._metadata={properties:{displayOptions:{type:"object",properties:{add:{type:"string",enumValues:["disabled","on","off"]},delete:{type:"string",enumValues:["disabled","on","off"]}}},primaryActions:{type:"Array<object>"},primaryActionGroup:{type:"object",properties:{label:{type:"string"},actions:{type:"Array<object>"}}},secondaryActions:{type:"Array<object>"},translations:{type:"object",properties:{add:{type:"string"},delete:{type:"string"}}}},events:{spAdd:{},spDelete:{},spPrimaryAction:{},spSecondaryAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},h=__decorate([(0,i.customElement)("oj-sp-collection-toolbar"),__metadata("design:paramtypes",[Object,Object])],h),t.CollectionToolbar=h})),define("oj-sp/collection-toolbar/loader",["require","exports","./collection-toolbar"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionToolbar=void 0,Object.defineProperty(t,"CollectionToolbar",{enumerable:!0,get:function(){return i.CollectionToolbar}})})),define("oj-sp/common-util/flex-util",["oj-dynamic/shared/DynamicInputRegistry","ojs/ojconverterutils-i18n","./common-util","vb/helpers/rest"],(function(e,t,i,o){return new function(){this.transformFlexUIHints=async({field:i,operation:o})=>{const s=i,a=s["x-hints"];if(a){if(("Hide"===a.DISPLAYHINT&&"Show"!==a.FlexClientDisplayHint||"Hide"===a.FlexClientDisplayHint)&&"__FLEX_Context_DisplayValue"!==a.FND_ACFF_AkaAttrName&&"true"!==a.FND_ACFF_IsStructureID)return{remove:!0};const i={sortable:"disabled",validators:[]},n=a.FND_ACFF_IsRequired;"true"===n?i.required=!0:"false"===n&&(i.required=!1);const r=a.FND_ACFF_IsReadOnly;"true"===r?i.readonly=!0:"false"===r&&(i.readonly=!1),"oj-sp-flex-switch"===s.componentType&&e.getInstance().registerCustomElementMapping("oj-sp-flex-switch",{loadPath:"oj-sp/flex-switch/loader"}),"oj-sp-flex-checkbox"===s.componentType&&e.getInstance().registerCustomElementMapping("oj-sp-flex-checkbox",{loadPath:"oj-sp/flex-checkbox/loader"});const l=a.FND_ACFF_MaximumLength;l&&i.validators.push({path:"ojs/ojasyncvalidator-length",options:{max:l}});const d=a.FND_ACFF_DV,c=a.FND_ACFF_IsGlobal;if("create"==o||"edit"==o&&"true"!==c&&"__FLEX_Context_DisplayValue"!==a.FND_ACFF_AkaAttrName)if("C"===a.FND_ACFF_DVT&&"java.lang.String"===a.FND_ACFF_JavaType)i.defaultValue=d;else if("C"===a.FND_ACFF_DVT&&"java.math.BigDecimal"===a.FND_ACFF_JavaType)i.defaultValue="[["+d+"]]";else if("C"===a.FND_ACFF_DVT&&"java.sql.Date"===a.FND_ACFF_JavaType)i.defaultValue=t.IntlConverterUtils.dateToLocalIsoDateString(new Date(Number(d)));else if("C"===a.FND_ACFF_DVT&&"java.sql.Timestamp"===a.FND_ACFF_JavaType)i.defaultValue=this.convertEpochToISOOffsetFormat(d);else if("P"===a.FND_ACFF_DVT)i.defaultValue="[[$componentContext.FLEX_PARAM_"+d+"]]";else if("S"===a.FND_ACFF_DVT)if(a.FlexClientValueLinkVars)i.defaultValue="[[$functions.getDefaultValue($fieldMetadata,$componentContext)]]";else{const e=await this.getDefaultValue(a);i.defaultValue=e}const p=a.FND_ACFF_MaximumValue,u=a.FND_ACFF_MinimumValue;if(p||u){const e={};if("java.sql.Date"===a.FND_ACFF_JavaType)p&&(e.max=t.IntlConverterUtils.dateToLocalIsoDateString(new Date(Number(p)))),u&&(e.min=t.IntlConverterUtils.dateToLocalIsoDateString(new Date(Number(u)))),i.validators.push({path:"ojs/ojasyncvalidator-datetimerange",options:e});else if("java.sql.Timestamp"===a.FND_ACFF_JavaType)p&&(e.max=this.convertEpochToISOOffsetFormat(p)),u&&(e.min=this.convertEpochToISOOffsetFormat(u)),i.validators.push({path:"ojs/ojasyncvalidator-datetimerange",options:e});else if("java.math.BigDecimal"===a.FND_ACFF_JavaType){const e={};p&&(e.max=p),u&&(e.min=u),i.validators.push({path:"ojs/ojasyncvalidator-numberrange",options:e})}}a.FND_ACFF_IsUppercaseOnly&&"true"===a.FND_ACFF_IsUppercaseOnly&&(i.converter={path:"oj-sp/common/flex/converters/FlexUpperCaseConverter",name:"FlexUpperCaseConverter"});const h=[];let m=0;const g=[],y=[];let f=0,b=0;const v=a.FlexClientVsBindVars;if(s.dataProvider){const e=t=>{let i,o;if("object"!=typeof t||null===t)return t;const s=Array.isArray(t)?[]:{};for(o in t)t.hasOwnProperty(o)&&(i=t[o],s[o]=e(i));return s};if(null!=v){const t=v.split(","),o=t.length;for(let e=0;e<o;e++){const i=a["FlexClientVar_"+t[e]+"_VT"];if((t[e].includes("Bind_IndependentValueNumber")||t[e].includes("Bind_IndependentValueDate")||t[e].includes("Bind_IndependentValueTimestamp"))&&i.startsWith("SEGMENT.")){const o=i.substring("SEGMENT.".length);y[b]=o,b++,h[m]=t[e]+"%3D{"+o+"}",m++}if(i.startsWith("PARAMETER.")){const o="FLEX_PARAM_"+i.substring("PARAMETER.".length);g[f]=o,f++,h[m]=t[e]+"%3D{"+o+"}",m++}}if(i.dataProvider=e(s.dataProvider),f>0||b>0){i.dataProvider.parameters[0].uriParameters||(i.dataProvider.parameters[0].uriParameters={});for(let e=0;e<f;e++)i.dataProvider.parameters[0].uriParameters[g[e]]="[[$componentContext."+g[e]+"]]";for(let e=0;e<b;e++)i.dataProvider.parameters[0].uriParameters[y[e]]="[[$value."+y[e]+"]]"}let n=i.dataProvider.parameters[0].endpoint;m>0&&(n+="%2C"+h.join("%2C"),i.dataProvider.parameters[0].endpoint=n);for(let e=0;e<i.dataProvider.parameters[0].searchFields.length;e++)"ValueBigDecimal"!==s.dataProvider.parameters[0].searchFields[e]&&"ValueDate"!==s.dataProvider.parameters[0].searchFields[e]&&(i.dataProvider.parameters[0].searchFields[e]="UPPER("+i.dataProvider.parameters[0].searchFields[e]+")")}else if("radio"!==a.controlType){i.dataProvider=e(s.dataProvider);for(let e=0;e<i.dataProvider.parameters[0].searchFields.length;e++)"ValueBigDecimal"!==s.dataProvider.parameters[0].searchFields[e]&&"ValueDate"!==s.dataProvider.parameters[0].searchFields[e]&&(i.dataProvider.parameters[0].searchFields[e]="UPPER("+i.dataProvider.parameters[0].searchFields[e]+")")}}return{replaceProperties:i}}return null},this.getDefaultValue=(e,t)=>new Promise((s,a)=>{if(window.LocalEndPoints&&window.LocalEndPoints.OJ_FND)o.get("FlexFndApi/doall_defaultValues_FlexFndApi").toUrl().then(i=>{this.fetchDefaultValue(t,e,i,s,a)});else{const o=i.getExternalEndPoints().ORA_FSCM_REST+"resources/11.13.18.05/FlexFndApi/action/defaultValues";this.fetchDefaultValue(t,e,o,s,a)}}),this.fetchDefaultValue=(e,i,o,s,a)=>{let n;const r={link:{}};if(e){n=i.extension;const t=n.FlexClientValueLinkVars.split(","),o={};for(let i=0;i<t.length;i++)o[t[i]]=e[t[i]];r.rowContext=o}else n=i;const l=n.FlexClientValueLink;r.link.uri=l;const d={request:r};fetch(o,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/vnd.oracle.adf.actionresult+json","Content-Type":"application/vnd.oracle.adf.action+json"},body:JSON.stringify(d)}).then(e=>e.json()).then(i=>{const o=l.substr(l.lastIndexOf("#")+1,l.length),a=i.result.rowDefaultValues[o];a?"java.lang.String"===n.FND_ACFF_JavaType?s(a):"java.math.BigDecimal"===n.FND_ACFF_JavaType?s(e?Number(a):"[["+a+"]]"):"java.sql.Date"===n.FND_ACFF_JavaType?s(t.IntlConverterUtils.dateToLocalIsoDateString(new Date(Number(a)))):"java.sql.Timestamp"===n.FND_ACFF_JavaType&&s(this.convertEpochToISOOffsetFormat(a)):s()}).catch(e=>{a(e)})},this.convertEpochToISOOffsetFormat=e=>new Date(Number(e)).toISOString().replace("Z","-00:00"),this.excludeDisplayDffFormFields=(e,t,i,o)=>{let s,a=[],n=o&&e.properties[o]?e.properties[o].properties:e.properties;for(let e of Object.keys(n))s=n[e]["x-hints"],s&&n[e]["x-oj"]&&("Hide"===s.DISPLAYHINT&&"Show"!==s.FlexClientDisplayHint||"Hide"===s.FlexClientDisplayHint)&&(e="!"+e,a.push(e));if(t&&i&&t.properties&&i.__FLEX_Context)for(let e of Object.keys(t.properties))s=t.properties[e]["x-hints"],s&&t.properties[e]["x-oj"]&&("Hide"===s.DISPLAYHINT&&"Show"!==s.FlexClientDisplayHint||"Hide"===s.FlexClientDisplayHint)&&(e="!"+i.__FLEX_Context+"."+e,a.push(e));return a},this.getCategoryMetadata=async(e,t,i,o,s)=>await this.fetchEffCategoryInfoFromRest(i,t,o,s),this.getCategoryPageList=async(e,t,i,o,s)=>(await this.fetchEffCategoryInfoFromRest(i,t,o,s)).page,this.getPageContextMap=async(e,t,i,o,s,a)=>(await this.fetchEffCategoryInfoFromRest(o,t,s,a)).pageContextMap,this.getContextInfoMap=async(e,t,i,o,s,a)=>(await this.fetchEffCategoryInfoFromRest(o,t,s,a)).contextInfoMap,this.fetchEffCategoryInfoFromRest=(e,t,o,s)=>new Promise((a,n)=>{const r=i.getExternalEndPoints().ORA_FSCM_REST+"applcoreApi/latest/bp/"+e+".EFFPageMetadataRestProperties";var l={},d=[],c={},p={},u=null,h=null,m=null,g={method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json"}},y={};s&&(y.Authorization=s,y.Accept="application/json",g.headers=y),fetch(r,g).then(e=>e.json()).then(e=>{for(var i in e&&e.EFFTranslationLabels&&(u=e.EFFTranslationLabels,h=u.PAGE_LABELS,m=u.CONTEXT_LABELS),e){const u=o+"||"+t;if(o&&i===u||!o&&i.includes(t)){var s=e[i],n=s.pages;for(var r in n){r=r.trim(),d.push({code:r,label:h[r]});var g="PAGE_INFO||"+r,y=s[g]?s[g]:s[r],f=[];if(y)for(var b in y){var v=s[b];if(v){var j={};v.ContextCode&&(j.name=v.ContextCode,j.label=m[v.ContextCode]),v.ContextRestAPIName&&(j.apiName=v.ContextRestAPIName),j.order=y[b],v.MultiRowFlag&&(j.multirowFlag=v.MultiRowFlag),v.TranslatableFlag&&(j.translatableFlag=v.TranslatableFlag),c[j.name]=j,f.push(j)}}f.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0}));var A=[];for(var C of f)A.push(C.name);p[r]=A}l.page=d,l.contextInfoMap=c,l.pageContextMap=p,a(l)}}}).catch(e=>{n(e)})})}})),define("oj-sp/common/activitystreamutils",["require","exports","ojs/ojvalidationfactory-base"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityStreamUtils=void 0;t.ActivityStreamUtils=class{static formatDate(e,t,o){if(e){let s,a=i.Validation.converterFactory(o);if(a?s=a.createConverter():(a=i.Validation.converterFactory("datetime"),s=a.createConverter({pattern:t})),!(s instanceof Promise))return s.format(e)}return e}}})),define("oj-sp/common/avatarinfo",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("oj-sp/common/badge",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgePosition=t.BadgeStyle=t.BadgeStatus=void 0,function(e){e.default="default",e.neutral="neutral",e.danger="danger",e.warning="warning",e.success="success",e.info="info"}(t.BadgeStatus||(t.BadgeStatus={})),function(e){e.strong="strong",e.subtle="subtle"}(t.BadgeStyle||(t.BadgeStyle={})),function(e){e.leading="leading",e.trailing="trailing"}(t.BadgePosition||(t.BadgePosition={}))})),define("oj-sp/common/contextualinfo",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("oj-sp/common/footertext",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("oj-sp/common/flex/util/kffpartialutils",["require","exports","oj-dynamic/providers/ServiceMetadataProviderFactory","vb/helpers/rest"],(function(e,t,i,o){"use strict";return class{constructor(){this.kffPartialMetadata={}}getKffPartialMetadata(e,t,s,a,n,r,l,d,c,p){return new Promise((e,s)=>{const c=n?n+":"+a+"/version_representation":a+"/version_representation";o.get(c,{extensionId:n}).toUrl().then(o=>{const a=o+"describe?metadataMode=minimal&resources="+t,n=(new i).createMetadataProvider({service:a,operationId:r});n.getMetadata().then(t=>{n.getMetadataByDiscriminator(t.discriminator,p,null).then(t=>{const i=Object.entries(t.properties),o=[],s={},a=[];let n,r=!1,c=!1;d&&(n=d.labelCode,r="true"===(d.readonly&&d.readonly),c="true"===(d.required&&d.required));for(const[e,t]of i){if("@context"===e||"links"===e||e===l)continue;const i=t["x-hints"],r=i.FND_ACFF_LabelCodeNum;if(n)for(let l=0;l<r;l++){i["FND_ACFF_LabelCode"+l]===n&&(o.push(e),a.push(p+"."+e),s[e]=t.labelHint)}else o.push(e),a.push(p+"."+e),s[e]=t.labelHint}this.kffPartialMetadata.fields=o,this.kffPartialMetadata.fieldMap=s,this.kffPartialMetadata.displayProps=a,e(this.kffPartialMetadata)}).catch(e=>{s(e)})}).catch(e=>{s(e)})}).catch(e=>{s(e)})})}}})),define("oj-sp/common/iconinfo",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("oj-sp/common/imageinfo",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("oj-sp/common/private/positioncontrol",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionControl=void 0;t.PositionControl=class{constructor(e,t){this.height=0,this.changeListeners=new Set,this.destroyListeners=new Set,this.offsetChangedListeners=new Set,this.target=e,this.resize=new ResizeObserver(([e])=>{this.height=e.contentRect.height,this.heightChanged()}),this.resize.observe(e),t.onOffsetChanged&&this.onOffsetChanged(t.onOffsetChanged)}getHeight(){return this.height}setPosition(e,t=null){return this.offsetChangedListeners.size?this.offsetChanged({[e]:t}):this.target.style[e]=null===t?"":t+"px",this}destroy(){this.setPosition("top"),this.setPosition("bottom"),this.resize.disconnect(),this.destroyListeners.forEach(e=>e())}onHeightChanged(e){return this.changeListeners.add(e),()=>{this.changeListeners.delete(e)}}onDestroy(e){return this.destroyListeners.add(e),()=>{this.destroyListeners.delete(e)}}onOffsetChanged(e){return this.offsetChangedListeners.add(e),()=>{this.offsetChangedListeners.delete(e)}}heightChanged(){this.changeListeners.forEach(e=>e())}offsetChanged(e){this.offsetChangedListeners.forEach(t=>t(e))}}})),define("oj-sp/common/private/positionlevel",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionLevel=void 0;t.PositionLevel=class{constructor(){this.columns=[]}add(e,t=-1){if(-1!==t)return void 0===this.columns[t]&&(this.columns[t]=[]),void this.columns[t].push(e)}}})),define("oj-sp/common/private/positionmanagerprivate",["require","exports","./positioncontrol","./positionlevel","ojs/ojlogger"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionManager=t.COLUMN_MAP=t.LEVEL_MAP=void 0,t.LEVEL_MAP={banner:20,content:40,header:10,navigation:10,toast:20,toolbar:30,undefined:30},t.COLUMN_MAP={center:20,end:30,start:10,undefined:20};class a{static register(e,t){if(!e)return void s.error("PositionManager - element is undefined.");if(this.registry.has(e))return void s.info("PositionManager - registry already contains element:",e);const a=(t=this.normalizeOptions(t)).position,n=new i.PositionControl(e,{onOffsetChanged:t.onOffsetChanged});n.onHeightChanged(()=>{this.calculate(a,t.level)}),n.onDestroy(()=>{const e=void 0===t.column?this[a][t.level].stack:this[a][t.level].columns[t.column];e.splice(e.indexOf(n),1),this.calculate(a,t.level)}),void 0===this[a][t.level]&&(this[a][t.level]=new o.PositionLevel),this[a][t.level].add(n,t.column),this.registry.set(e,n)}static unregister(e){const t=this.registry.get(e);t?(t.destroy(),this.registry.delete(e)):s.warn("PositionManager - Could not find element to unregister:",e)}static normalizeOptions(e){return Object.assign(Object.assign({},e),{column:"number"!=typeof e.column?t.COLUMN_MAP[e.column]:e.column,level:"number"!=typeof e.level?t.LEVEL_MAP[e.level]:e.level})}static calculate(e,t){let i=0;this[e].forEach((t,o)=>{let s=0;t.columns.forEach(t=>{let o=0;t.forEach(t=>{t.setPosition(e,o+i),o+=t.getHeight()}),s=Math.max(s,o)}),i+=s})}}a.top=[],a.bottom=[],a.registry=new Map,t.PositionManager=a})),define("oj-sp/common/positionmanager",["require","exports","./private/positionmanagerprivate"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLUMN_MAP=t.LEVEL_MAP=t.PositionManager=void 0,Object.defineProperty(t,"PositionManager",{enumerable:!0,get:function(){return i.PositionManager}}),Object.defineProperty(t,"LEVEL_MAP",{enumerable:!0,get:function(){return i.LEVEL_MAP}}),Object.defineProperty(t,"COLUMN_MAP",{enumerable:!0,get:function(){return i.COLUMN_MAP}})})),define("oj-sp/common/PreviousNextIterator",["require","exports","ojs/ojlogger"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviousNextIterator=void 0;class o{constructor(e,t){this.itemsDataProvider=e,this.itemInfosArray=[],this.asyncIterator=void 0,this.hasMoreToFetch=!0,this.itemLabelAttribute=t}async getPreviousNextItems(e){const t={nextItem:null,previousItem:null};if(!e||!this.itemsDataProvider)return i.warn("currentItemId undefined to getPreviousNextItems."),t;const s=this.itemInfosArray.length;if(this.itemInfosArray&&s>0){const t=this.itemInfosArray.findIndex(t=>t.id===e);if(t>=0&&t<s-1||!this.hasMoreToFetch)return{nextItem:t>=0&&t<s-1?this.itemInfosArray[t+1]:null,previousItem:t>0?this.itemInfosArray[t-1]:null}}this.asyncIterator||(this.asyncIterator=this.itemsDataProvider.fetchFirst({size:o.DEFAULT_FETCH_SIZE})[Symbol.asyncIterator]());const a=(await this.asyncIterator.next()).value,n=a.data,r=a.metadata,l=[];for(let e=0;e<n.length;++e){const t=r[e].key;let i,o;i=t instanceof Array&&t.length>0?""+t[0]:""+t,this.itemLabelAttribute&&(o=n[e][this.itemLabelAttribute]),l.push({id:i,label:o})}return l.length>0&&(this.itemInfosArray=this.itemInfosArray.concat(l)),l.length<o.DEFAULT_FETCH_SIZE&&(this.hasMoreToFetch=!1),this.getPreviousNextItems(e)}}o.DEFAULT_FETCH_SIZE=25,t.PreviousNextIterator=o})),define("oj-sp/common/timelineEventTemplateUtils",["require","exports","ojs/ojlogger"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineEventTemplateUtils=void 0;const o=document.createElement("canvas"),s=o.getContext("2d");o.id="oj-sp-timeline-event-canvas",o.style.display="none";class a{}a.getEventWidth=e=>{const t=document.querySelector("oj-timeline");if(!t)return i.error("No oj-timeline was found. The event width could not be properly calculated."),0;o&&o.parentElement!==t&&t.appendChild(o),s.font="600 0.859rem 'Oracle Sans'";const a=s.measureText(e.primaryText).width;s.font="400 0.859rem 'Oracle Sans'";let n=Math.ceil(Math.max(a,s.measureText(e.secondaryText).width,s.measureText(e.tertiaryText).width));return n+=24,n>800&&(n=800),e.primaryActions&&(n+=52),n},a.getEventHeight=e=>{let t=0;return t=e.tertiaryText?56:40,t+16},t.TimelineEventTemplateUtils=a})),define("oj-sp/common/collectionDetailPageUtils",["require","exports","ojs/ojkeyset"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionDetailPageUtils=void 0;t.CollectionDetailPageUtils=class{static getSelectionDataFromKeySet(e,t,o){if(e instanceof i.KeySetImpl)return Array.from(e.values()).reverse();{const i=t-Array.from(e.deletedValues()).length;return i>0?[o,...new Array(i-1)]:[]}}}})),define("oj-sp/converters/phone/E164Converter",["require","exports","libphonenumber-js/libphonenumber-min"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E164Converter=void 0;class o{constructor(e){this.detail=e}getMessage(){return this.detail}}t.E164Converter=class{constructor(e){e?e&&!e.format?this.options=Object.assign(Object.assign({},e),{format:"E164"}):this.options=e:this.options={format:"E164"}}getOptions(){return this.options}parse(e){var t,s;if(!e)return{};try{const o=i.parsePhoneNumber(e);return{extensionNumber:null!==(t=o.ext)&&void 0!==t?t:"",internationalDialingCode:o.countryCallingCode?"+"+o.countryCallingCode:"",subscriberNumber:null!==(s=o.nationalNumber)&&void 0!==s?s:""}}catch(e){throw new o(e.message)}}format(e){var t,s;if(!e.extensionNumber||!e.internationalDialingCode||!e.subscriberNumber)return"";try{const o=`${null!==(t=e.internationalDialingCode)&&void 0!==t?t:""}${null!==(s=e.subscriberNumber)&&void 0!==s?s:""}`;return"E164WithExtension"===this.options.format?`${i.parsePhoneNumber(o).number}${e.extensionNumber?","+e.extensionNumber:""}`:i.parsePhoneNumber(o).number}catch(e){throw new o("The provided input is not a valid Phone Value object")}}}})),define("oj-sp/common-util/select-smart-dyn-forms-helper",["require","exports","oj-oars/resource/api","ojs/ojlogger"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSuggestions=void 0;t.getSuggestions=e=>{const t={},{metadata:s,metadataProvider:a,fieldName:n,dependentFieldValues:r}=e;if(s&&s["x-recommendations"]){const{context:e,softContext:l,policyHint:d,maxSuggestions:c}=s["x-recommendations"];if((null===i.default||void 0===i.default?void 0:i.default.getContext)&&(null===i.default||void 0===i.default?void 0:i.default.getSuggestions))return t.subject=i.default.getSubject({metadata:s,metadataProvider:a,fieldName:n,dependentFieldValues:r}),t.context=i.default.getContext(e,r),t.softContext=i.default.getContext(l,r),t.policyHint=d,t.maxSuggestions=c,t;o.warn("OARS: OARS api is not loaded/configured")}}})),define("css!oj-sp/dashboard-grid/components/GridLayout",[],(function(){})),define("oj-sp/dashboard-grid/components/GridLayout",["require","exports","preact","preact/hooks","css!./GridLayout"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridLayout=void 0;t.GridLayout=e=>{const[t,s]=(0,o.useState)(e.layout),a=(0,o.useRef)(null),n=(0,o.useRef)(null);let r,l;(0,o.useEffect)(()=>{c(h())},[]),(0,o.useEffect)(()=>{c(h())},[e.primaryPanelWidth,t]);const d=e=>{let t="1fr";for(let i=1;i<e;i++)t+=" 1px 1fr";return t},c=e=>{let i=e,o=1,s='"oj-sp-dashboard-grid-panel-1"';for(let t=2,i=1;t<=e;t++)s+=`\n"division-line-h-${t-i}"`,s+=`\n"oj-sp-dashboard-grid-panel-${t}"`;if(l=0,"small-screen"!==t&&e>1)if(s="","above-fold"===t)switch(e){case 2:{const e=p();i=e.rows,o=e.columns,l=e.divCols,s=e.template;break}case 3:{const e=u();i=e.rows,o=e.columns,l=e.divCols,s=e.template;break}case 4:i=2,o=3,l=e-2,s+='"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1"',s+='"division-line-h-1 division-line-h-1 division-line-h-1 division-line-h-1 division-line-h-1"',s+='"oj-sp-dashboard-grid-panel-2 division-line-v-1 oj-sp-dashboard-grid-panel-3 division-line-v-2 oj-sp-dashboard-grid-panel-4"';break;case 5:i=2,o=3,l=e-2,s+='"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-2"',s+='"division-line-h-1 division-line-h-1 division-line-h-1 division-line-h-1 division-line-h-1"',s+='"oj-sp-dashboard-grid-panel-3 division-line-v-2 oj-sp-dashboard-grid-panel-4 division-line-v-3 oj-sp-dashboard-grid-panel-5"'}else{let t=1;switch(e){case 2:i=2,o=1,s+='"oj-sp-dashboard-grid-panel-1" ',s+='"division-line-h-1" ',s+='"oj-sp-dashboard-grid-panel-2" ';break;case 4:i=3,o=2,l=1,s+='"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1"',s+='"division-line-h-1 division-line-h-1 division-line-h-1"',s+='"oj-sp-dashboard-grid-panel-2 division-line-v-1 oj-sp-dashboard-grid-panel-3"',s+='"division-line-h-2 division-line-h-2 division-line-h-2"',s+='"oj-sp-dashboard-grid-panel-4 oj-sp-dashboard-grid-panel-4 oj-sp-dashboard-grid-panel-4" ';break;default:i=Math.floor(e/2)+1,o=2,l=i-1,s+='"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1"';for(let i=2;i<e;i+=2)s+=`\n"division-line-h-${t} division-line-h-${t} division-line-h-${t}"`,s+=`\n"oj-sp-dashboard-grid-panel-${i} division-line-v-${t} oj-sp-dashboard-grid-panel-${i+1}"`,t++}}r=i,n.current&&(n.current.style.setProperty("--oj-sp-dashboard-grid-template-areas",s),n.current.style.setProperty("--oj-sp-dashboard-grid-template-rows",d(i)),n.current.style.setProperty("--oj-sp-dashboard-grid-template-columns",d(o)))},p=()=>{switch(e.primaryPanelWidth){case"full":return{rows:2,columns:1,divCols:0,template:'"oj-sp-dashboard-grid-panel-1"\n\n                      "division-line-h-1"\n\n                      "oj-sp-dashboard-grid-panel-2"'};case"majority":return{rows:1,columns:3,divCols:1,template:'"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-2"'};default:return{rows:1,columns:2,divCols:1,template:'"oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-2"'}}},u=()=>{switch(e.primaryPanelWidth){case"full":return{rows:2,columns:2,divCols:1,template:'"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1"\n\n                      "division-line-h-1 division-line-h-1 division-line-h-1"\n\n                      "oj-sp-dashboard-grid-panel-2 division-line-v-1 oj-sp-dashboard-grid-panel-3"'};case"half":return{rows:2,columns:2,divCols:1,template:'"oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-2"\n\n                      "oj-sp-dashboard-grid-panel-1 division-line-v-1 division-line-h-1"\n\n                      "oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-3"'};default:return{rows:2,columns:3,divCols:1,template:'"oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-2"\n\n                      "oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 division-line-v-1 division-line-h-1"\n\n                      "oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 oj-sp-dashboard-grid-panel-1 division-line-v-1 oj-sp-dashboard-grid-panel-3"'}}},h=()=>(0,i.toChildArray)(e.componentChildren).length,m=t=>{const i=t||h();if(i&&i>1){const t=n.current.closest("oj-sp-dashboard-grid").getBoundingClientRect().width;let o,a;2===i?(o="above-fold"===e.layout?.5:1,a="above-fold"===e.layout?48:0):(o="hero-plus"===e.layout?.5:1/3,a="above-fold"===e.layout?96:48);let r=(t-a)*o;r>320?s(e.layout):(a=48,o=.5,r=(t-a)*o,s(r>320?"hero-plus":"small-screen"))}};return(0,o.useEffect)(()=>{m(h());const e=new ResizeObserver(()=>{a.current()});a.current=()=>{m(h())};const t=n.current;return e.observe(t),()=>{e.disconnect()}},[]),(0,o.useEffect)(()=>{m(h()),a.current=()=>{m(h())}},[e.layout]),(0,i.h)("div",{ref:n,class:"oj-sp-dashboard-grid-layout-container "+("above-fold"===t?"oj-sp-dashboard-grid-layout-above-fold":"oj-sp-dashboard-grid-layout-unset-height"),"data-otel-hero":"oj-sp-dashboard-grid.default","data-oj-context":!0},(t=>{c(h());const o=[];if(!t)return o;for(const[s,a]of t.entries()){const t=s+1,n="oj-sp-dashboard-grid-panel-"+t;o.push((0,i.h)("div",{id:`${e.uid}_dbg_slot${t}`,class:"oj-sp-dashboard-grid-layout-panel",style:`grid-area: ${n};`},a))}return o})(e.componentChildren),(()=>{const e=[];for(let t=0;t<Math.max(r,l);t++){const o=t+1;t<r-1&&e.push((0,i.h)("div",{class:"oj-sp-dashboard-grid-layout-div",style:`grid-area: division-line-h-${o};`})),t<l&&e.push((0,i.h)("div",{class:"oj-sp-dashboard-grid-layout-div",style:`grid-area: division-line-v-${o};`}))}return e})())}})),define("css!oj-sp/dashboard-grid/components/CollectionLayout",[],(function(){})),define("oj-sp/dashboard-grid/components/CollectionLayout",["require","exports","preact","preact/hooks","oj-sp/common/positionUtility","css!./CollectionLayout"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionLayout=void 0;const a="full";t.CollectionLayout=e=>{const[t,n]=(0,o.useState)(!1),r=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{m(p());const e=new ResizeObserver(()=>{l.current()});l.current=()=>{m(p())};const t=r.current;return e.observe(t),u(),()=>{h(),e.disconnect()}},[]),(0,o.useEffect)(()=>{r.current.getBoundingClientRect().height>0&&(h(),u())},[e.primaryPanelWidth,t]);const p=()=>(0,i.toChildArray)(e.componentChildren).length,u=()=>{const i=e.uid+"_dashboard_collection_secondary_viz",o=d.current;if(o&&!t&&e.primaryPanelWidth!==a&&"collection-advanced"!==e.collectionLayout&&!s.PositionUtility.isComponentSubscribed(i)){const e={componentName:i,component:o,offsetCalculationSubscription:{offsetOptions:{position:"top",isStandaloneComponent:!0,level:s.PositionUtility.LEVEL_MAP.panel},onOffsetChange:e=>{o.style.top=e.top+"px"}},stickinessSubscription:{stickinessOptions:{isStandaloneComponent:!0},onStickinessChange:e=>{e.isSticky?o.style.position="sticky":(o.style.position="sticky",o.style.top="0",r.current.style.setProperty("--oj-sp-dashboard-collection-scoreboard-height","120px"))}}};s.PositionUtility.subscribe(e)}},h=()=>{s.PositionUtility.isComponentSubscribed(e.uid+"_dashboard_collection_secondary_viz")&&s.PositionUtility.unsubscribe({componentName:e.uid+"_dashboard_collection_secondary_viz"})},m=e=>{const t=e||p();if(t&&t>1){const e=r.current.closest("oj-sp-dashboard-grid").getBoundingClientRect().width;n(!((e-48)*.5>320))}},g=()=>{const o=1===p()?"oj-sm-12":t?"oj-sp-dashboard-collection-layout-mobile":e.primaryPanelWidth===a?"oj-sm-12 oj-sp-dashboard-collection-main-panel-full":"oj-lg-8 oj-md-6 oj-sp-dashboard-collection-main-panel-majority",s="collection-advanced"===e.collectionLayout?"oj-sp-dashboard-collection-advanced-layout-main-panel":"oj-sp-dashboard-collection-layout-main-panel";return(0,i.h)("div",{ref:c,class:`oj-flex-item ${o} ${s}`},e.componentChildren[0])},y=o=>{const s=t?"oj-sp-dashboard-collection-layout-mobile":e.primaryPanelWidth===a?"oj-sp-dashboard-collection-layout-full":"oj-sp-dashboard-collection-layout-majority",n=t?"oj-sm-flex-direction-column oj-sm-only-flex-wrap-nowrap":e.primaryPanelWidth===a?"oj-sm-12":"oj-sm-flex-direction-column oj-lg-4 oj-md-6",r=(0,i.h)("div",{class:"oj-flex-item oj-sp-dashboard-collection-layout-panel"},o[1]),l=o[2]?(0,i.h)("div",{class:"oj-flex-item oj-sp-dashboard-collection-layout-panel"},o[2]):null,c=o[2]?t?(0,i.h)("div",{class:"oj-divider-top"}):e.primaryPanelWidth===a?(0,i.h)("div",{class:"oj-divider-start"}):(0,i.h)("div",{class:"oj-divider-top"}):null;return(0,i.h)("div",{ref:d,class:`oj-flex ${s} ${n} `},r,c,l)},f=e.primaryPanelWidth===a||t?"oj-divider-top oj-flex-item":"oj-divider-start oj-flex-item";let b,v;return e.primaryPanelWidth===a||t?(b=p()>1?y(e.componentChildren):null,v=p()>0?g():null):(b=p()>0?g():null,v=p()>1?y(e.componentChildren):null),(0,i.h)("div",{ref:r,class:"oj-sp-dashboard-collection-layout-main-container "+(e.primaryPanelWidth===a||t?"oj-sm-flex-direction-column":"oj-sm-only-flex-direction-column")},b,v?(0,i.h)("div",{class:""+f}):null,v)}})),define("css!oj-sp/dashboard-grid/dashboard-grid-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/dashboard-grid/dashboard-grid",["require","exports","oj-sp/common/positionUtility","oj-sp/common/private/positionUtilityEnums","ojs/ojvcomponent","preact","./components/GridLayout","./components/CollectionLayout","css!./dashboard-grid-styles","css!oj-sp/fa-css/fa-css-additions.css"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardGrid=void 0;let l=class extends a.Component{constructor(e){var t;super(e),this.dashboardGridSearchRef=(0,a.createRef)(),this.dashboardGridPerfTitleRef=(0,a.createRef)(),this.dashboardGridVizRef=(0,a.createRef)(),this.setCssVariables=()=>{this.base.getBoundingClientRect().height<=0||(this.props.search?this.base.style.setProperty("--oj-sp-dashboard-grid-search-height",this.dashboardGridSearchRef.current.getBoundingClientRect().height+"px"):this.base.style.setProperty("--oj-sp-dashboard-grid-search-height","0px"),this.props.performanceTitle?this.base.style.setProperty("--oj-sp-dashboard-grid-performance-title",this.dashboardGridPerfTitleRef.current.getBoundingClientRect().height+"px"):this.base.style.setProperty("--oj-sp-dashboard-grid-performance-title","0px"))},this.getGridLayout=()=>this.props.gridLayout?this.props.gridLayout:this.props.layout,this.handleConnected=e=>{this.registerPositionListeners()},this.handleDisconnected=e=>{this.unregisterPositionListeners()},this.registerPositionListeners=()=>{const e=this.uniqueId+"_dashboard_search_level",t=this.dashboardGridSearchRef.current;if(t&&!i.PositionUtility.isComponentSubscribed(e)){const s={componentName:e,component:t,offsetCalculationSubscription:{offsetOptions:{position:"top",level:i.PositionUtility.LEVEL_MAP.headerNavigation},onOffsetChange:e=>{t.style.top=e.top+"px"}},stickinessSubscription:{onStickinessChange:e=>{t.style.position=e.isSticky?"sticky":"unset"}},scrollDirectionSubscription:{onScrollDirectionChange:e=>{var i,s,a;const n=null===(i=this.dashboardGridSearchRef.current)||void 0===i?void 0:i.getBoundingClientRect(),r=null===(s=this.dashboardGridPerfTitleRef.current)||void 0===s?void 0:s.getBoundingClientRect(),l=null===(a=this.dashboardGridVizRef.current)||void 0===a?void 0:a.getBoundingClientRect(),d=this.dashboardGridPerfTitleRef.current?n.bottom-1>r.top:n.bottom-1>l.top;e.scrollDirection===o.SCROLL_DIRECTION.DOWN&&d?t.classList.add("oj-sp-dashboard-grid-divider"):e.scrollDirection!==o.SCROLL_DIRECTION.UP||d||t.classList.remove("oj-sp-dashboard-grid-divider")}}};i.PositionUtility.subscribe(s)}},this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,s.getUniqueId)()}render(e){return(0,a.h)("div",null,this.renderPositionHelper(),this.renderSearch(),this.props.performanceTitle?this.renderPerformanceTitle():null,(0,a.h)("div",{ref:this.dashboardGridVizRef},"collection"===this.props.gridLayout||"collection-advanced"===this.props.gridLayout?(0,a.h)(r.CollectionLayout,{uid:this.uniqueId,collectionLayout:this.props.gridLayout,primaryPanelWidth:this.props.primaryPanelWidth,componentChildren:this.props.children}):(0,a.h)(n.GridLayout,{uid:this.uniqueId,primaryPanelWidth:this.props.primaryPanelWidth,componentChildren:this.props.children,layout:this.getGridLayout()})))}componentDidMount(){this.setCssVariables(),this.registerPositionListeners()}componentDidUpdate(e){this.setCssVariables()}componentWillUnmount(){this.unregisterPositionListeners()}renderPositionHelper(){return(0,a.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}unregisterPositionListeners(){i.PositionUtility.isComponentSubscribed(this.uniqueId+"_dashboard_search_level")&&i.PositionUtility.unsubscribe({componentName:this.uniqueId+"_dashboard_search_level"})}renderPerformanceTitle(){return(0,a.h)("div",{ref:this.dashboardGridPerfTitleRef,class:"oj-sp-dashboard-grid-performance-title-container oj-sp-helper-truncate oj-sm-padding-6x-bottom"},(0,a.h)("div",{class:"oj-sp-dashboard-grid-performance-title","aria-label":this.props.performanceTitle},(0,a.h)("span",{class:"oj-sp-dashboard-grid-performance-title-content oj-sp-serif-font-family",role:"heading","aria-level":2,title:this.props.performanceTitle},this.props.performanceTitle)))}renderSearch(){return(0,a.h)("div",{ref:this.dashboardGridSearchRef,class:"oj-sp-dashboard-grid-search-container"},this.props.search?(0,a.h)("div",{class:"oj-sm-padding-6x-bottom",slot:"search"},this.props.search):null)}};l.defaultProps={layout:"above-fold",gridLayout:null},l._metadata={properties:{gridLayout:{type:"string"},layout:{type:"string"},performanceTitle:{type:"string"},primaryPanelWidth:{type:"string"}},slots:{"":{},search:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},l=__decorate([(0,s.customElement)("oj-sp-dashboard-grid"),__metadata("design:paramtypes",[Object])],l),t.DashboardGrid=l})),define("oj-sp/dashboard-grid/loader",["require","exports","./dashboard-grid"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardGrid=void 0,Object.defineProperty(t,"DashboardGrid",{enumerable:!0,get:function(){return i.DashboardGrid}})})),define("css!oj-sp/dashboard-landing-page/dashboard-landing-page-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/dashboard-landing-page/dashboard-landing-page",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","oj-sp/common-util/enums","oj-sp/common/positionUtility","ojs/ojresponsiveutils","css!./dashboard-landing-page-styles","oj-sp/header-general-overview/loader","oj-sp/common/position-helper","ojs/ojbutton","ojs/ojselectsingle"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardLandingPage=void 0;let l=class extends s.Component{constructor(e){var t;super(e),this.state={canStick:!1,isSmallScreen:!1,currentAvailableWidth:0,isKpiOnTop:!1,avatar:null},this.headerRef=(0,s.createRef)(),this.kpiScoreboardRef=(0,s.createRef)(),this.pageContentRef=(0,s.createRef)(),this.showPrimaryAction=()=>this.props.primaryAction&&this.props.primaryAction.label&&"off"!==this.props.primaryAction.display,this.getHeaderHeight=()=>{const e=this.headerRef.current;return e?e.getBoundingClientRect().height:0},this.getKpiContainerHeight=()=>96+(this.props.search?23:47),this.setCanStick=()=>{var e;"off"===(null===(e=this.props.displayOptions)||void 0===e?void 0:e.scoreboardSticky)?(this.canStick=!1,this.setState({canStick:!1})):(this.canStick=!0,this.setState({canStick:!0}))},this.registerPositionListeners=()=>{const e=this.getKpiContainerId(),t=this.getKpiContainer();if(t&&this.canStick&&!n.PositionUtility.isComponentSubscribed(e)){const i={componentName:e,component:t,offsetCalculationSubscription:{offsetOptions:{position:"top",level:n.PositionUtility.LEVEL_MAP.banner},onOffsetChange:e=>{this.setDistanceToTopCssVariable(),this.state.canStick&&(t.style.top=e.top+"px",this.props.search||(e.top<this.currentOffset?this.setState({isKpiOnTop:!0}):e.top>this.currentOffset&&this.setState({isKpiOnTop:!1}),this.currentOffset=e.top))}},stickinessSubscription:{onStickinessChange:e=>{this.setState({canStick:e.isSticky})}}};n.PositionUtility.subscribe(i)}},this.handleConnected=e=>{this.registerPositionListeners()},this.handleDisconnected=e=>{this.unregisterPositionListeners()},this.setDistanceToTopCssVariable=()=>{this.state.currentAvailableWidth!==this.base.getBoundingClientRect().width&&requestAnimationFrame(()=>{let e=window.pageYOffset+this.getHeaderHeight();this.state.canStick&&(e+=this.getKpiContainerHeight()),this.base.style.setProperty("--oj-sp-dashboard-page-distance-to-top",e+"px"),this.state.currentAvailableWidth=this.base.getBoundingClientRect().width})},this.selectContextValueItemHandler=e=>{var t,i;null===(i=(t=this.props).onSelectContextValueItemChanged)||void 0===i||i.call(t,e.detail.value),e.stopPropagation()},this.selectContextValueHandler=e=>{var t,i;null===(i=(t=this.props).onSelectContextValueChanged)||void 0===i||i.call(t,e.detail.value),e.stopPropagation()},this.selectObjectValueItemHandler=e=>{var t,i;null===(i=(t=this.props).onSelectObjectValueItemChanged)||void 0===i||i.call(t,e.detail.value),e.stopPropagation()},this.selectObjectValueHandler=e=>{var t,i;null===(i=(t=this.props).onSelectObjectValueChanged)||void 0===i||i.call(t,e.detail.value),e.stopPropagation()},this.mdUpMediaQueryChangeListener=e=>{e.matches?this.setState({isSmallScreen:!1}):this.setState({isSmallScreen:!0}),this.setDistanceToTopCssVariable()},this.updateAvatar=()=>{var e,t,i,o;let s,a,n,r=!1;this.props.selectObjectValueItem?(s=this.props.selectObjectValueItem.data,a=this.props.selectObject.avatar,r=!0):this.props.selectContextValueItem&&(s=this.props.selectContextValueItem.data,a=this.props.selectContext.avatar,r=!0),n=r?{src:null!==(e=null==s?void 0:s[null==a?void 0:a.src])&&void 0!==e?e:void 0,initials:null!==(t=null==s?void 0:s[null==a?void 0:a.initials])&&void 0!==t?t:void 0}:{src:null,initials:null},(null===(i=this.state.avatar)||void 0===i?void 0:i.src)===n.src&&(null===(o=this.state.avatar)||void 0===o?void 0:o.initials)===n.initials||this.setState({avatar:n})},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.uniqueComponentName=this.uniqueId+"_dashboard_landing_page",this.canStick=!1,this.setCanStick(),this.currentOffset=0;const a=r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.MD_UP);this.mdUpMediaQuery=window.matchMedia(a),this.mdUpMediaQuery.matches?this.setState({isSmallScreen:!1}):this.setState({isSmallScreen:!0})}componentDidMount(){this.mdUpMediaQuery.addEventListener("change",this.mdUpMediaQueryChangeListener),this.setDistanceToTopCssVariable(),window.addEventListener("resize",this.setDistanceToTopCssVariable),this.registerPositionListeners()}componentDidUpdate(e){var t,i;const o="off"!==(null===(t=e.displayOptions)||void 0===t?void 0:t.scoreboardSticky),s="off"!==(null===(i=this.props.displayOptions)||void 0===i?void 0:i.scoreboardSticky);if(s!==o){this.setCanStick();const e=this.getHeaderHeight()+(s?this.getKpiContainerHeight():0);this.base.style.setProperty("--oj-sp-dashboard-page-distance-to-top",e+"px"),this.unregisterPositionListeners()}this.updateAvatar()}componentWillUnmount(){this.mdUpMediaQuery.removeEventListener("change",this.mdUpMediaQueryChangeListener),window.removeEventListener("resize",this.setDistanceToTopCssVariable),this.unregisterPositionListeners()}render(){return(0,s.h)("div",{class:"oj-sp-dashboard-page-container"},this.renderPositionHelper(),this.renderHeader(),(0,s.h)("div",{class:"oj-sp-public-primary-content-container"},this.renderContent()))}renderHeader(){return(0,s.h)("oj-sp-header-general-overview",{ref:this.headerRef,class:"oj-sp-dashboard-page-header oj-sp-internal-color-strip-on-top oj-sp-header-general-overview-bg-neutral-10","data-otel-hero":"dashboardLandingPageHeader",id:this.uniqueId+"_header-wrapper",pageTitle:this.props.pageTitle,pageSubtitle:this.props.pageSubtitle,primaryAction:this.showPrimaryAction()?this.props.primaryAction:null,displayOptions:this.props.displayOptions,avatar:this.state.avatar,selectContext:this.props.selectContext,selectContextValue:this.props.selectContextValue,onselectContextValueChanged:this.selectContextValueHandler,selectContextValueItem:this.props.selectContextValueItem,onselectContextValueItemChanged:this.selectContextValueItemHandler,selectObject:this.props.selectObject,selectObjectValue:this.props.selectObjectValue,onselectObjectValueChanged:this.selectObjectValueHandler,selectObjectValueItem:this.props.selectObjectValueItem,onselectObjectValueItemChanged:this.selectObjectValueItemHandler,translations:this.props.translations,displayMode:a.BACKGROUND_MODE.LIGHT,"data-oj-context":!0},this.props.search&&(0,s.h)("div",{slot:"search"},this.props.search))}renderKpiSlot(){const e=this.state.isKpiOnTop?"oj-sm-padding-6x-top":"",t=this.state.canStick?"oj-sp-dashboard-kpi-container-sticky":"";return(0,s.h)("div",{ref:this.kpiScoreboardRef,class:"oj-sp-dashboard-kpi-container oj-bg-neutral-10 \n        "+t},(0,s.h)("div",{id:this.uniqueId+"kpi-slot-wrapper","data-otel-hero":"oj-sp-dashboard-landing-page.kpi","data-oj-context":!0,class:"oj-sp-dashboard-kpi-slot-wrapper oj-sm-padding-6x-bottom "+e},this.props.kpi))}renderDefaultSlot(){return(0,s.h)("div",{ref:this.pageContentRef,"data-otel-hero":"oj-sp-dashboard-landing-page.default","data-oj-context":!0,class:"oj-sp-dashboard-page-content oj-sm-padding-6x-bottom oj-sm-only-padding-4x-horizontal"},this.props.children)}renderContent(){return(0,s.h)("div",{id:this.uniqueId+"_main-slot-wrapper"},(0,s.h)("div",{class:"oj-xl-padding-12x-horizontal oj-md-padding-6x-horizontal"},this.props.kpi?this.renderKpiSlot():null,this.renderDefaultSlot()))}unregisterPositionListeners(){n.PositionUtility.isComponentSubscribed(this.getKpiContainerId())&&n.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_kpi"})}renderPositionHelper(){return(0,s.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}getKpiContainer(){return this.kpiScoreboardRef.current}getKpiContainerId(){return this.uniqueComponentName+"_kpi"}};l.defaultProps={displayOptions:{inFlowBack:!1,scoreboardSticky:"on",switcherSearch:!1},translations:{inFlowBack:"Back"},primaryAction:{display:"on"},selectContext:{labelHint:"Select context"},selectObject:{labelHint:"Select object"}},l._metadata={properties:{displayOptions:{type:"object",properties:{inFlowBack:{type:"boolean"},scoreboardSticky:{type:"string",enumValues:["on","off"]},switcherSearch:{type:"boolean"}}},translations:{type:"object",properties:{inFlowBack:{type:"string"}}},pageTitle:{type:"string"},pageSubtitle:{type:"string"},primaryAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},selectContext:{type:"object",properties:{data:{type:"DataProvider"},itemText:{type:"string"},labelHint:{type:"string"},secondaryText:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},icon:{type:"object",properties:{class:{type:"string"},altText:{type:"string"}}}}},selectContextValue:{type:"any",writeback:!0},selectContextValueItem:{type:"object",properties:{data:{type:"any"},key:{type:"any"},metadata:{type:"object",properties:{indexFromParent:{type:"number"},isLeaf:{type:"boolean"},key:{type:"any"},message:{type:"object",properties:{detail:{type:"string"},severity:{type:"string|number"},summary:{type:"string"}}},parentKey:{type:"any"},suggestion:{type:"object"},treeDepth:{type:"number"}}}},writeback:!0},selectObject:{type:"object",properties:{data:{type:"DataProvider"},itemText:{type:"string"},labelHint:{type:"string"},secondaryText:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},icon:{type:"object",properties:{class:{type:"string"},altText:{type:"string"}}}}},selectObjectValue:{type:"string|number",writeback:!0},selectObjectValueItem:{type:"object",properties:{data:{type:"any"},key:{type:"any"}},writeback:!0}},slots:{"":{implicitBusyContext:!0},kpi:{implicitBusyContext:!0},search:{}},events:{spPrimaryAction:{},spInFlowBack:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["selectContextValue","selectContextValueItem","selectObjectValue","selectObjectValueItem"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},l=__decorate([(0,o.customElement)("oj-sp-dashboard-landing-page"),__metadata("design:paramtypes",[Object])],l),t.DashboardLandingPage=l})),define("oj-sp/dashboard-landing-page/loader",["require","exports","./dashboard-landing-page"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardLandingPage=void 0,Object.defineProperty(t,"DashboardLandingPage",{enumerable:!0,get:function(){return i.DashboardLandingPage}})})),define("css!oj-sp/dashboard-panel/dashboard-panel-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/dashboard-panel/dashboard-panel",["require","exports","ojs/ojvcomponent","preact","oj-sp/common/positionUtility","css!./dashboard-panel-styles","oj-sp/common/position-helper"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardPanel=void 0;let a=class extends o.Component{constructor(e){super(e),this.dashboardPanelTitleRef=(0,o.createRef)(),this.renderTitle=()=>(0,o.h)("div",{ref:this.dashboardPanelTitleRef,class:"oj-sp-dashboard-panel-title-container oj-flex-bar oj-sm-align-items-center"},(0,o.h)("div",{class:"oj-flex-bar-start oj-sp-dashboard-panel-title-container oj-sm-margin-2x-bottom",role:"heading","aria-level":3,"aria-label":this.props.panelTitle},(0,o.h)("span",{class:"oj-sp-dashboard-panel-title oj-typography-subheading-xs oj-sp-dashboard-panel-truncate-1",title:this.props.panelTitle},this.props.panelTitle))),this.renderSubtitle=()=>(0,o.h)("div",{class:"oj-sm-padding-4x-horizontal oj-sp-dashboard-panel-subtitle-container oj-flex-bar oj-sm-align-items-center"},(0,o.h)("div",{"aria-label":this.props.panelSubtitle},(0,o.h)("span",{class:"oj-sp-dashboard-panel-subtitle oj-typography-body-md oj-sp-dashboard-panel-truncate-1",title:this.props.panelSubtitle},this.props.panelSubtitle))),this.handleConnected=e=>{requestAnimationFrame(()=>{this.registerPositionListeners()})},this.handleDisconnected=e=>{this.unregisterPositionListeners()},this.registerPositionListeners=()=>{var e,t,i;const o="oj_sp_collection-dashboard-panel-title",a=this.dashboardPanelTitleRef.current,n=null===(i=null===(t=null===(e=this.base)||void 0===e?void 0:e.closest("oj-sp-dashboard-panel"))||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.classList.contains("oj-sp-dashboard-collection-layout-main-panel");if(a&&n&&!s.PositionUtility.isComponentSubscribed(o)){a.classList.add("oj-sp-dashboard-panel-title-collection-container");const e={componentName:o,component:a,offsetCalculationSubscription:{offsetOptions:{position:"top",level:s.PositionUtility.LEVEL_MAP.panel},onOffsetChange:e=>{a.style.top=e.top+"px"}},stickinessSubscription:{onStickinessChange:e=>{a.style.position=e.isSticky?"sticky":"unset"}}};s.PositionUtility.subscribe(e)}},this.unregisterPositionListeners=()=>{const e=this.base.getBoundingClientRect().height;s.PositionUtility.isComponentSubscribed("oj_sp_collection-dashboard-panel-title")&&e<=0&&s.PositionUtility.unsubscribe({componentName:"oj_sp_collection-dashboard-panel-title"})}}componentDidMount(){this.registerPositionListeners()}componentWillUnmount(){this.unregisterPositionListeners()}render(e){return(0,o.h)("div",{class:"oj-sp-dashboard-panel-container oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column"},this.renderPositionHelper(),this.props.panelTitle?this.renderTitle():null,this.props.panelSubtitle?this.renderSubtitle():null,(0,o.h)("div",{class:"oj-sp-dashboard-panel-content oj-flex-item"},this.props.children))}renderPositionHelper(){return(0,o.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}};a._metadata={properties:{panelTitle:{type:"string"},panelSubtitle:{type:"string"}},slots:{"":{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,i.customElement)("oj-sp-dashboard-panel"),__metadata("design:paramtypes",[Object])],a),t.DashboardPanel=a})),define("oj-sp/dashboard-panel/loader",["require","exports","./dashboard-panel"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardPanel=void 0,Object.defineProperty(t,"DashboardPanel",{enumerable:!0,get:function(){return i.DashboardPanel}})})),define("css!oj-sp/data-management-page/data-management-page-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/data-management-page/data-management-page",["require","exports","oj-sp/common/EventDispatcher","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojvcomponent","preact","ojs/ojresponsiveutils","oj-sp/common-util/common-util","oj-sp/common-util/common-util","css!./data-management-page-styles","oj-sp/header-create-edit/loader","ojs/ojdrawerlayout","ojs/ojdrawerpopup"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";var c,p;Object.defineProperty(t,"__esModule",{value:!0}),t.DataManagementPage=void 0,function(e){e.INNER="inner",e.OUTER="outer",e.NONE="none"}(c||(c={})),function(e){e.REFLOW_MODELESS="reflowModeless",e.OVERLAY_MODAL="overlayModal"}(p||(p={}));let u=class extends n.Component{constructor(e){var t;super(e),this.smMediaQueryChangeListener=e=>{this.setState({isSmallScreen:e.matches})},this.getDrawerRenderState=()=>{const e=this.isPopupBottomDrawerNeeded(),t=this.props.bottomOpened===c.INNER||!this.props.bottomDisplay?p.REFLOW_MODELESS:this.props.bottomDisplay,i=this.props.endOpened===c.INNER||!this.props.endDisplay?p.REFLOW_MODELESS:this.props.endDisplay,o=i===p.REFLOW_MODELESS&&this.props.endOpened===c.OUTER,s=i===p.OVERLAY_MODAL&&this.props.endOpened===c.OUTER,a=i===p.REFLOW_MODELESS&&this.props.endOpened===c.INNER,n=i===p.OVERLAY_MODAL&&this.props.endOpened===c.INNER;let r=!1,l=!1,d=!1,u=!1;return!e||void 0!==this.props.bottomDrawerState&&"closed"!==this.props.bottomDrawerState?(d=this.props.bottomOpened===c.INNER,r=!s&&t===p.OVERLAY_MODAL&&this.props.bottomOpened===c.OUTER):(l=t===p.REFLOW_MODELESS&&this.props.bottomOpened===c.INNER,u=!s&&t===p.OVERLAY_MODAL&&this.props.bottomOpened===c.OUTER),{outerEndReflowOpened:o,outerEndOverlayOpened:s,innerEndReflowOpened:a,innerEndOverlayOpened:n,outerBottomOverlayOpened:r,innerBottomReflowOpened:d,innerBottomOverlayOpenedSmallScreen:l,outerBottomOverlayOpenedSmallScreen:u}},this.onResizeWindow=e=>{this.validateDrawerOpenState(),window.requestAnimationFrame(async()=>{await this.setComponentCalculations()})},this.getContextualInfo=e=>e&&e.length>4?e.slice(0,4):e,this.constructDisplayOptions=e=>Object.assign(Object.assign({},this.props.displayOptions),{goToParent:!1,inFlowBack:!1,next:"unconfigured",feedback:this.props.displayOptions.feedback}),this.isPopupBottomDrawerNeeded=()=>{const e=document.documentElement.clientHeight;return(0,l.isMobilePhoneDevice)()||e<=600},this.getInAppNavHeight=()=>{const e=document.querySelector("oj-sp-in-app-navigation");if(e&&e.visible){const t=e.querySelector("div");if(t)return new Promise(e=>{window.requestAnimationFrame(()=>{const i=t.getBoundingClientRect();e(i.height)})})}return Promise.resolve(0)},this.setBottomDrawerBottom=async()=>{const e=this.compRefElement;if(e){const t=await this.getInAppNavHeight();return e.style.setProperty("--oj-sp-dm-bottom-drawer-bottom",t+"px"),t}return Promise.resolve(0)},this.setHeaderHeight=()=>{const e=this.compRefElement;let t=0;if(e){const i=e.querySelector(".oj-sp-data-management-header");i&&(t=i.getBoundingClientRect().height),e.style.setProperty("--oj-sp-data-management-header-height",t+"px")}return t},this.setGlobalHeaderHeight=()=>{const e=this.compRefElement;let t=0;if(e){const i=document.querySelector(".oj-sp-global-header-panel-container");i&&(t=i.getBoundingClientRect().height),e.style.setProperty("--oj-sp-data-management-global-header-height",t+"px")}return t},this.validateDrawerOpenState=e=>{var t;const i=this.props;if(!i.endOpened&&!i.bottomOpened)return;if(!this.bothDrawersOpened(i))return;const o=window.innerHeight||document.documentElement.clientHeight;if((window.innerWidth||document.documentElement.clientWidth)<1440||o<600)if(e&&e.endOpened!==i.endOpened){"fixed"===(null===(t=i.displayOptions)||void 0===t?void 0:t.bottomDrawerMode)?i.onBottomDrawerStateChanged("minimized"):i.onBottomOpenedChanged(c.NONE)}else i.onEndOpenedChanged(c.NONE)},this.onBeforeClose=e=>{e.preventDefault()},this.onDrawerReflowOpened=e=>{if(!e.detail.value)return;if(this.state.isSmallScreen)return;const t=this.getDrawerRenderState();let i=null;t.innerBottomReflowOpened&&(i=this.drawersRef.reflowBottom.current),t.innerEndReflowOpened&&(i=this.drawersRef.reflowInnerEnd.current),t.outerEndReflowOpened&&(i=this.drawersRef.reflowOuterEnd.current),i&&window.requestAnimationFrame(()=>{const e=(0,l.findAllFocusableElements)(i)[0];null==e||e.focus()})},this.ref=(0,n.createRef)(),this.mainContentAreaRef=(0,n.createRef)(),this.mainContentRef=(0,n.createRef)(),this.messagesSlotRef=(0,n.createRef)(),this.drawersRef={reflowBottom:(0,n.createRef)(),reflowInnerEnd:(0,n.createRef)(),reflowOuterEnd:(0,n.createRef)()},this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,a.getUniqueId)(),this.res=Object.assign({},o);const i=r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.SM_ONLY);this.smMediaQuery=window.matchMedia(i),this.state={isSmallScreen:!!this.smMediaQuery.matches}}componentDidMount(){s.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} mounted`),this.smMediaQuery.addEventListener("change",this.smMediaQueryChangeListener),this.compRefElement=this.ref.current,window.addEventListener("resize",this.onResizeWindow),i.EventDispatcher.dispatch(i.EventDispatcher.OVERRIDE_SHELL_BOTTOM_SPACING_EVENT_NANE,this.compRefElement,{fixedLength:!0});const e=this.compRefElement.querySelector(".oj-sp-data-management-header"),t=this.mainContentRef.current,o=this.messagesSlotRef.current;t.style.setProperty("--oj-sp-data-management-contents-min-height","450px");const a=(0,d.debounce)(()=>{this.setComponentCalculations.bind(this)},300);this.resizeObserver=new ResizeObserver(a.bind(this)),e&&this.resizeObserver.observe(e),this.resizeObserver.observe(t),this.resizeObserver.observe(o),window.requestAnimationFrame(async()=>{await this.setComponentCalculations(),this.validateDrawerOpenState()})}componentDidUpdate(e){const t=e.bottomOpened!==this.props.bottomOpened||e.endOpened!==this.props.endOpened||e.bottomDisplay!==this.props.bottomDisplay||e.endDisplay!==this.props.endDisplay,i=e.bottomDrawerState&&"minimized"===e.bottomDrawerState&&("auto"===this.props.bottomDrawerState||"maximized"===this.props.bottomDrawerState);(t||i)&&this.validateDrawerOpenState(e),window.requestAnimationFrame(async()=>{await this.setComponentCalculations()}),s.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} updated from :`,e,"to:",this.props)}componentWillUnmount(){var e;s.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} will unmount`),window.removeEventListener("resize",this.onResizeWindow),this.smMediaQuery.removeEventListener("change",this.smMediaQueryChangeListener),null===(e=this.resizeObserver)||void 0===e||e.disconnect()}openFeedback(){if(this.props.displayOptions.feedback){const e=this.compRefElement.querySelector("oj-sp-header-create-edit");e&&e.openFeedback()}}render(e,t){const i=this.getDrawerRenderState();return(0,n.h)("div",{id:"root",class:"oj-sp-data-management-root",ref:this.ref},(0,n.h)("oj-drawer-layout",{endOpened:i.outerEndReflowOpened,"end-display":"auto",onojBeforeClose:this.onBeforeClose,onendOpenedChanged:this.onDrawerReflowOpened,class:"oj-sp-data-management-drawer-layout"},(0,n.h)("div",{class:"oj-sp-data-management-main-container oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"},(0,n.h)("div",{class:"oj-sp-data-management-header"},(0,n.h)("oj-sp-header-create-edit",{"data-otel-hero":"dataManagementPageHeaderCreateEdit","data-oj-context":!0,id:this.uniqueId+"_h",pageTitle:e.pageTitle,pageSubtitle:e.pageSubtitle,avatar:e.avatar,badge:e.badge,primaryAction:e.primaryAction,contextualInfo:this.getContextualInfo(this.props.contextualInfo),contextualInfoSticky:e.displayOptions.contextualInfoSticky,displayMode:e.displayMode,displayOptions:this.constructDisplayOptions(this.props.displayOptions),secondaryActions:e.secondaryActions,timestamp:e.timestamp,feedback:e.feedback,translations:e.translations})),(0,n.h)("div",{class:"oj-sp-data-management-messages-slot",ref:this.messagesSlotRef},e.messages),(0,n.h)("div",{id:"mainContent",class:"oj-sp-data-management-contents oj-sp-public-primary-content-container",ref:this.mainContentRef},(0,n.h)("oj-drawer-layout",{endOpened:i.innerEndReflowOpened,"end-display":"auto",bottomOpened:i.innerBottomReflowOpened,"bottom-display":"auto",onbottomOpenedChanged:this.onDrawerReflowOpened,onendOpenedChanged:this.onDrawerReflowOpened,onojBeforeClose:this.onBeforeClose,class:"oj-sp-data-management-drawer-layout"},(0,n.h)("div",{class:"oj-sp-data-management-main-area oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"},(0,n.h)("div",{class:"oj-sp-data-management-contents-area",ref:this.mainContentAreaRef,"data-otel-hero":"oj-sp-data-management-page.default","data-oj-context":!0},e.children)),(0,n.h)("div",{class:"oj-sp-data-management-page-drawer-slot",slot:"bottom",ref:this.drawersRef.reflowBottom},i.innerBottomReflowOpened&&(0,n.h)("div",{"data-otel-hero":"oj-sp-data-management-page.innerBottom","data-oj-context":!0,class:"oj-sp-data-management-bottom-drawer-area oj-sp-bottom-drawer-template-height-provider"},e.innerBottom)),(0,n.h)("div",{class:"oj-sp-data-management-page-drawer-slot",slot:"end",ref:this.drawersRef.reflowInnerEnd},i.innerEndReflowOpened&&(0,n.h)("div",{"data-otel-hero":"oj-sp-data-management-page.innerEnd",class:"oj-sp-data-management-page-drawer-end-slot","data-oj-context":!0},e.innerEnd))))),(0,n.h)("div",{class:"oj-sp-data-management-page-drawer-slot",slot:"end",ref:this.drawersRef.reflowOuterEnd},i.outerEndReflowOpened&&(0,n.h)("div",{"data-otel-hero":"oj-sp-data-management-page.outerEnd",class:"oj-sp-data-management-page-drawer-end-slot","data-oj-context":!0},e.outerEnd))),(0,n.h)("div",null,(0,n.h)("oj-drawer-popup",{class:"oj-sp-data-management-page-drawer-popup-wrapper",edge:"end",opened:i.outerEndOverlayOpened,autoDismiss:"none",onojBeforeClose:this.onBeforeClose},(0,n.h)("div",{class:"oj-sp-data-management-page-drawer-popup"},i.outerEndOverlayOpened&&e.outerEnd))),(0,n.h)("div",null,(0,n.h)("oj-drawer-popup",{edge:"end",opened:i.innerEndOverlayOpened,autoDismiss:"none",onojBeforeClose:this.onBeforeClose},(0,n.h)("div",null,i.innerEndOverlayOpened&&e.innerEnd))),(0,n.h)("div",null,(0,n.h)("oj-drawer-popup",{edge:"bottom",opened:i.outerBottomOverlayOpened,autoDismiss:"none",onojBeforeClose:this.onBeforeClose},(0,n.h)("div",{class:"oj-sp-data-management-page-bottom-drawer-popup"},i.outerBottomOverlayOpened&&e.outerBottom))),(0,n.h)("div",null,(0,n.h)("oj-drawer-popup",{edge:"bottom",modality:"modeless",opened:i.innerBottomOverlayOpenedSmallScreen,autoDismiss:"none",onojBeforeClose:this.onBeforeClose},(0,n.h)("div",{class:"oj-sp-data-management-page-drawer-popup-bottom"},i.innerBottomOverlayOpenedSmallScreen&&e.innerBottom))),(0,n.h)("div",null,(0,n.h)("oj-drawer-popup",{edge:"bottom",modality:"modeless",opened:i.outerBottomOverlayOpenedSmallScreen,autoDismiss:"none",onojBeforeClose:this.onBeforeClose},(0,n.h)("div",{class:"oj-sp-data-management-page-drawer-popup-bottom"},i.outerBottomOverlayOpenedSmallScreen&&e.outerBottom))))}async setComponentCalculations(){const e=await this.setBottomDrawerBottom(),t=this.setHeaderHeight(),i=this.setGlobalHeaderHeight(),o=this.compRefElement,s=this.mainContentRef.current;if(o.classList.remove("oj-sp-data-management-root-pagescroll"),s.getBoundingClientRect().height<=450&&o.classList.add("oj-sp-data-management-root-pagescroll"),this.props.bottomOpened===c.INNER&&o){const o=document.querySelector(".oj-sp-data-management-bottom-drawer-area");if(o){let s="vh";(0,l.isMobilePhoneDevice)()&&(s="dvh");let a=`calc(100${s} - ${i}px - ${t}px - ${e}px)`;this.state.isSmallScreen&&(a=`calc(100${s} - ${i}px - ${e}px)`),o.style.setProperty("--oj-sp-bottom-drawer-template-height-maximized",a)}}}bothDrawersOpened(e){var t;let i=!1,o=!1;if(i=e.endOpened&&e.endOpened!==c.NONE,e.bottomOpened&&e.bottomOpened!==c.NONE){o=!0;"fixed"===(null===(t=e.displayOptions)||void 0===t?void 0:t.bottomDrawerMode)&&(o="minimized"!==e.bottomDrawerState&&"closed"!==e.bottomDrawerState)}return i&&o}};u.defaultProps={displayOptions:{contextualInfoLabel:!1,contextualInfoSticky:!1,save:"off",feedback:"off"},primaryAction:{disabled:!1}},u._metadata={properties:{avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]}}},contextualInfo:{type:"Array<object>"},displayMode:{type:"string",enumValues:["mixed","light"]},displayOptions:{type:"object",properties:{bottomDrawerMode:{type:"string",enumValues:["fixed","closable"]},contextualInfoLabel:{type:"boolean"},contextualInfoSticky:{type:"boolean"},save:{type:"string",enumValues:["disabled","on","off"]},feedback:{type:"string"}}},pageTitle:{type:"string"},endOpened:{type:"string",enumValues:["inner","outer","none"],writeback:!0},endDisplay:{type:"string",enumValues:["reflowModeless","overlayModal"]},bottomOpened:{type:"string",enumValues:["inner","outer","none"],writeback:!0},bottomDrawerState:{type:"string",enumValues:["closed","auto","maximized","minimized"],writeback:!0},bottomDisplay:{type:"string",enumValues:["reflowModeless","overlayModal"]},pageSubtitle:{type:"string"},primaryAction:{type:"object",properties:{label:{type:"string"},disabled:{type:"boolean"}}},feedback:{type:"object",properties:{customFeedback:{type:"Array<object>"},acknowledgmentMessage:{type:"string"},pageVersion:{type:"string"}}},secondaryActions:{type:"Array<object>"},timestamp:{type:"string"},translations:{type:"object",properties:{actions:{type:"string"},avatarHint:{type:"string"}}}},slots:{"":{implicitBusyContext:!0},outerEnd:{implicitBusyContext:!0},innerEnd:{implicitBusyContext:!0},outerBottom:{},innerBottom:{implicitBusyContext:!0},messages:{implicitBusyContext:!0}},events:{spPrimaryAction:{},spCancel:{},spSave:{},spSecondaryAction:{},spFeedbackAction:{}},extension:{_WRITEBACK_PROPS:["endOpened","bottomOpened","bottomDrawerState"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{openFeedback:{}}},u=__decorate([(0,a.customElement)("oj-sp-data-management-page"),__metadata("design:paramtypes",[Object])],u),t.DataManagementPage=u})),define("oj-sp/data-management-page/loader",["require","exports","./data-management-page"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataManagementPage=void 0,Object.defineProperty(t,"DataManagementPage",{enumerable:!0,get:function(){return i.DataManagementPage}})})),define("oj-sp/data-provider/DataProviderUtils",[],()=>{class e{static getSearchTerms(t){if(!t)return null;if(t.text)return t.text;if(Array.isArray(t.criteria)){const{criteria:i}=t;for(let t=0;t<i.length;t++){const o=e.getSearchTerms(i[t]);if(o)return o}}return null}static getExclusionaryFilters(t){if(!t)return null;if("$ne"===t.op&&t.value&&Array.isArray(t.value.filters)&&t.value.filters.length>0)return t.value.filters;if(Array.isArray(t.criteria)){const{criteria:i}=t;for(let t=0;t<i.length;t++){const o=e.getExclusionaryFilters(i[t]);if(o)return o}}return null}static getUriParameters(e){const t=e.indexOf("?"),i={};if(t>-1){const o=e.substring(t+1),s=new RegExp("([^?=&]+)(=([^&]*))?","g");o.replace(s,(function(e,t,o,s){const a=i[t];a?a.push(decodeURIComponent(s)):i[t]=[decodeURIComponent(s)]}))}return i}static updateUriParameters(e,t){let i=e.indexOf("?");const o={};if(i>-1){const t=e.substring(i+1),s=new RegExp("([^?=&]+)(=([^&]*))?","g");t.replace(s,(function(e,t,i,s){const a=o[t];a?a.push(s):o[t]=[s]}))}else i=e.length;let s=Object.keys(t);for(let e=0;e<s.length;e++){const i=s[e];let a=t[i];Array.isArray(a)||(a=[a]);for(let e=0;e<a.length;e++)a[e]=encodeURIComponent(a[e]);o[encodeURIComponent(i)]=a}let a=e.substring(0,i);s=Object.keys(o);for(let e=0;e<s.length;e++){const t=s[e],i=o[t];for(let o=0;o<i.length;o++)a+=[0===e&&0===o?"?":"&",t,"=",i[o]].join("")}return a}static isSmartSearchNameInQueryParametersApi(e){return!!(e&&e.parameters&&e.parameters.query&&e.parameters.query.smartSearchName)}static evalObservables(t){if(null==t)return t;if(Array.isArray(t))return e._evalArray(t);if("function"==typeof t)return e._evalFunc(t);if("object"==typeof t){const i=Object.assign({},t),o=Object.keys(i);for(let t=0;t<o.length;t++){const s=o[t];i[s]=e.evalObservables(i[s])}return i}return t}static _evalFunc(t){return"function"==typeof t?e._evalFunc(t()):t}static _evalArray(t){const i=t.slice(0);for(let t=0;t<i.length;t++)i[t]=e.evalObservables(i[t]);return i}static addEventListener(e,t,i){e._eventListeners||(e._eventListeners=[]),e._eventListeners.push({type:t.toLowerCase(),listener:i})}static removeEventListener(e,t,i){if(e._eventListeners)for(let o=e._eventListeners.length-1;o>=0;o--)e._eventListeners[o].type===t&&e._eventListeners[o].listener===i&&e._eventListeners.splice(o,1)}static dispatchEvent(e,t){let i=!0;if(e._eventListeners){const o=e._eventListeners.slice(0);for(let s=0;s<o.length;s++){const a=o[s];if(a.type===t.type){if(i=a.listener.apply(e,[t]),!1===i)break;i=!0}}}return i}static cloneAndTrimFilters(t){const i=e.evalObservables(t);for(let e=0;e<i.length;e++){const t=i[e],o=Object.keys(t);for(let e=0;e<o.length;e++){const i=o[e];"filter"!==i&&"value"!==i&&delete t[i]}}return i}static cacheIteratorVisitedFetchResults(e,t,i){for(let o=0;o<e.length;o++)i.set(e[o].key,t[o])}static fetchByKeys(e,t,i){return new Promise(o=>{const{keys:s}=e;for(const e of s)if(t.has(e)){const o={metadata:{key:e},data:t.get(e)};i.set(e,o)}o({fetchParameters:e,results:i})})}static containsKeys(e,t,i){return new Promise(o=>{const{keys:s}=e;for(const e of s)t.has(e)&&i.add(e);o({containsParameters:e,results:i})})}}return e}),define("oj-sp/data-provider/AggregateSearchTransforms",["vb/BusinessObjectsTransforms","./DataProviderUtils","./DataProviderBindingContext"],(e,t,i)=>({request:new class{paginate(t,i,o){return e.request.paginate(t,i,o)}sort(t,i,o){return e.request.sort(t,i,o)}filter(t,i,o){return e.request.filter(t,i,o)}query(e){return e}body(e,o,s){const{fetchConfiguration:a}=e,n=a.fetchParameters.filterCriterion,r=i.getInstance().evaluateInContext(s.dpState).filterCriterion,l=t.getSearchTerms(n),d=function e(t){if(!t)return null;if("$eq"===t.op&&t.value&&t.value.selectedFilter)return t.value.selectedFilter;if(Array.isArray(t.criteria)){const{criteria:i}=t;for(let t=0;t<i.length;t++){const o=e(i[t]);if(o)return o}}return null}(r),c=t.getExclusionaryFilters(r),p={selectedFilter:d,filters:[]};return Array.isArray(c)&&(p.filters=t.cloneAndTrimFilters(c)),l&&(p.searchTerms=l),e.initConfig.body=p,e.initConfig.headers["Content-Type"]="application/json",e}},response:new class{paginate(t,i){return e.response.paginate(t,i)}body(e){const t=e.body.items;for(let e=0;e<t.length;e++){const i=t[e];void 0!==i.count&&(i.label=[i.label," (",i.count,")"].join(""))}return e.body}}})),define("oj-sp/data-provider/CompareUtils",[],()=>class{static _compareObjectValues(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;const{hasOwnProperty:i}=Object.prototype,o=Object.keys(e);let s;for(let a=0;a<o.length;a++)if(s=o[a],i.call(e,s)){if(!i.call(t,s))return!1;if(e[s]!==t[s]){if("object"!=typeof e[s])return!1;if(!this._compareObjectValues(e[s],t[s]))return!1}}const a=Object.keys(t);for(let o=0;o<a.length;o++)if(s=a[o],i.call(t,s)&&!i.call(e,s))return!1;return 0!==o.length||0!==a.length||JSON.stringify(e)===JSON.stringify(t)}static _compareArrayValues(e,t){if(e.length!==t.length)return!1;for(let i=0,o=e.length;i<o;i++)if(!this.compareValues(e[i],t[i]))return!1;return!0}static compareValues(e,t){if(e===t)return!0;const i=typeof e;if(i!==typeof t)return!1;if(null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return this._compareArrayValues(e,t);if(e.constructor===Object)return this._compareObjectValues(e,t);if("symbol"===i)return String(e)===String(t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1}}),define("oj-sp/data-provider/BaseKeysHash",["./CompareUtils"],e=>class{constructor(){this._buckets={},this._size=0,Object.defineProperty(this,"size",{get:()=>this._size}),this.clear()}_areKeysEqual(t,i){return e.compareValues(t,i)}_normalizeKeys(e){return Array.isArray(e)?e:[e]}_generateHashForKeys(e){const t=e=>{let i=0;if(this._isNullOrUndefined(e))i+=t(String(e));else if(Array.isArray(e))for(let o=0;o<e.length;o++)i+=t(e[o]);else if("object"==typeof e&&e.getTime)i+=t(e.getTime());else if("object"==typeof e||"function"==typeof e){const o=Object.keys(e);for(let s=0;s<o.length;s++)i+=t(o[s]),i+=t(e[o[s]])}else{const t=String(e);if(0===t.length)return i;for(let e=0;e<t.length;e++){i=(i<<5)-i+(0|t.charCodeAt(e))}}return i},i=[];for(let o=0;o<e.length;o++)i.push(t(e[o]));return i.join("-")}_valuesForObject(e){const t=[],i=Object.keys(e);for(let o=0;o<i.length;o++)t.push(e[i[o]]);return t}_isNullOrUndefined(e){return null==e}_invokeInContext(e,t){const i=this._normalizeKeys(e),o=this._generateHashForKeys(i),s=this._buckets,a=s[o]||[];return t(o,s,a,this._indexOfEntryInBucket(a,i))}_indexOfEntryInBucket(){return-1}clear(){this._buckets={},this._size=0}has(e){return!this._isNullOrUndefined(e)&&this._invokeInContext(e,(e,t,i,o)=>o>-1)}delete(e){return!this._isNullOrUndefined(e)&&this._invokeInContext(e,(e,t,i,o)=>!(o<0)&&(i.splice(o,1),0===i.length?delete t[e]:t[e]=i,this._size-=1,!0))}}),define("oj-sp/data-provider/KeysHashMap",["./BaseKeysHash"],e=>{class t extends e{constructor(e){super(),this[Symbol.toStringTag]="Map",e&&e.forEach(e=>{Array.isArray(e)&&2===e.length&&this.set(e[0],e[1])})}_indexOfEntryInBucket(e,t){for(let i=0;i<e.length;i++){const o=e[i],s=this._normalizeKeys(o[0]);if(this._areKeysEqual(t,s))return i}return-1}set(e,t){return this._isNullOrUndefined(e)?this:this._isNullOrUndefined(t)?(this.delete(e),this):this._invokeInContext(e,(i,o,s,a)=>{const n=[e,t];return a>-1?s[a]=n:s.push(n),o[i]=s,this._size+=1,this})}get(e){if(!this._isNullOrUndefined(e))return this._invokeInContext(e,(e,t,i,o)=>o>-1?i[o][1]:void 0)}keys(){const e=this._valuesForObject(this._buckets);let t=0,i=0;return{next:()=>{let o;if(t<e.length){const s=e[t];o=s[i],i+=1,i>s.length-1&&(i=0,t+=1)}return{done:void 0===o,value:void 0!==o?o[0]:void 0}}}}values(){const e=this._valuesForObject(this._buckets);let t=0,i=0;return{next:()=>{let o;if(t<e.length){const s=e[t];o=s[i],i+=1,i>s.length-1&&(i=0,t+=1)}return{done:void 0===o,value:void 0!==o?o[1]:void 0}}}}[Symbol.iterator](){const e=this._valuesForObject(this._buckets);let t=0,i=0;return{next:()=>{let o;if(t<e.length){const s=e[t];o=s[i],i+=1,i>s.length-1&&(i=0,t+=1)}return{done:void 0===o,value:o}}}}entries(){return this[Symbol.iterator]()}forEach(e){const t=this._valuesForObject(this._buckets);for(let i=0;i<t.length;i++){const o=t[i];for(let t=0;t<o.length;t++)e(o[t][1],o[t][0],this)}}}return t}),define("oj-sp/data-provider/KeysHashSet",["./BaseKeysHash"],e=>{class t extends e{constructor(e){super(),this[Symbol.toStringTag]="Set",e&&e.forEach(e=>{this.add(e)})}_indexOfEntryInBucket(e,t){for(let i=0;i<e.length;i++){const o=e[i],s=this._normalizeKeys(o);if(this._areKeysEqual(t,s))return i}return-1}add(e){return this._isNullOrUndefined(e)?this:this._invokeInContext(e,(t,i,o,s)=>(s>-1?o[s]=e:o.push(e),i[t]=o,this._size+=1,this))}[window.Symbol.iterator](){const e=this._valuesForObject(this._buckets);let t=0,i=0;return{next:()=>{let o;if(t<e.length){const s=e[t];o=s[i],i+=1,i>s.length-1&&(i=0,t+=1)}return{done:void 0===o,value:o}}}}values(){return this[Symbol.iterator]()}keys(){return this[Symbol.iterator]()}entries(){const e=this._valuesForObject(this._buckets);let t=0,i=0;return{next:()=>{let o;if(t<e.length){const s=e[t];o=s[i],i+=1,i>s.length-1&&(i=0,t+=1)}return{done:void 0===o,value:void 0!==o?[o,o]:void 0}}}}forEach(e){const t=this._valuesForObject(this._buckets);for(let i=0;i<t.length;i++){const o=t[i];for(let t=0;t<o.length;t++)e(o[t],o[t],this)}}}return t}),define("oj-sp/data-provider/AggregateSearchDataProvider",["vb/types/extendedType","vb/types/factories/serviceDataProviderFactory","./AggregateSearchTransforms","./DataProviderUtils","./DataProviderBindingContext","ojs/ojdataprovider","./KeysHashMap","./KeysHashSet"],(e,t,i,o,s,a,n,r)=>{const l={itemsPath:"items",keyAttributes:"value",transforms:i,capabilities:{fetchByOffset:{implementation:"randomAccess"}},pagingCriteria:{size:100,iterationLimit:100}},d={searchType:"aggregate"};return class extends e{constructor(e,t,i){let o;super(),i?o=i:t&&t.extensionId&&(o=t,t=null),this._init(e,t,o),this._visitedByIteratorCache=new n}isExtendedType(){return!0}getTypeDefinition(){return{type:{endpoint:"string",uriParameters:{},filterCriterion:{}},resolved:!0}}init(e,t,i,o){this._init(i,void 0,o)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t),this.dispatchEvent(new a.DataProviderRefreshEvent)}hoistValueObjectProperties(){return!1}getWritableOptions(){return{propertiesWritable:"all"}}getCapability(e){if("sort"===e)return{attributes:"none"};if("fetchByKeys"===e)return{caching:"visitedByCurrentIterator",implementation:"batchLookup"};if("fetchFirst"===e)return{caching:"visitedByCurrentIterator",iterationSpeed:"delayed"};if("fetchByOffset"===e)return{implementation:"iteration"};if("fetchCapability"===e){const e=new Set;return e.add("exclusion"),{caching:"visitedByCurrentIterator",iterationSpeed:"delayed",attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}}return"filter"===e?{textFilter:"on",operators:["$co","$eq","$ne"]}:null}getTotalSize(){return Promise.resolve(-1)}isEmpty(){return"unknown"}addEventListener(e,t){o.addEventListener(this,e,t)}removeEventListener(e,t){o.removeEventListener(this,e,t)}dispatchEvent(e){return o.dispatchEvent(this,e)}fetchFirst(e){this._visitedByIteratorCache.clear();const t=new Promise(t=>{this._getDataProvider().then(i=>{const o=i.fetchFirst(e);t(o[window.Symbol.asyncIterator]())})}),i={};return i[window.Symbol.asyncIterator]=()=>({next:()=>t.then(e=>e.next().then(e=>{if(e&&e.value&&e.value.response){const{metadata:t,data:i}=e.value;Array.isArray(t)&&Array.isArray(i)&&o.cacheIteratorVisitedFetchResults(t,i,this._visitedByIteratorCache)}return e}))}),i}fetchByOffset(e){return this._getDataProvider().then(t=>t.fetchByOffset(e))}fetchByKeys(e){const t=this.createOptimizedKeyMap(),i=this._visitedByIteratorCache;return new Promise(s=>{if(0===i.size){this.fetchFirst({size:100})[window.Symbol.asyncIterator]().next().then(()=>{s(o.fetchByKeys(e,i,t))})}else s(o.fetchByKeys(e,i,t))})}containsKeys(e){const t=this.createOptimizedKeySet(),i=this._visitedByIteratorCache;return new Promise(s=>{if(0===i.size){this.fetchFirst({size:100})[window.Symbol.asyncIterator]().next().then(()=>{s(o.containsKeys(e,i,t))})}else s(o.containsKeys(e,i,t))})}createOptimizedKeyMap(e){return new n(e)}createOptimizedKeySet(e){return new r(e)}_init(e,t,i){e&&(this._dpState=e),t&&(this._dpServiceOptions=t),i&&(this._dpVbContext=i)}_getDataProvider(){const e=this._dpServiceOptions,i=o.evalObservables(this._dpState),a=s.getInstance().getUriParameters(),n=s.getInstance().evaluateInContext(i.uriParameters),r=Object.assign({},a,d,n),c=l,p={dpState:i},u={dataProviderOptions:Object.assign({},c,{endpoint:i.endpoint,transformsContext:p,uriParameters:r}),vbContext:this._dpVbContext};return e&&(u.serviceOptions=e),t.createInstance(u)}}}),define("oj-sp/data-provider/AggregateSearchOpenApiTransforms",[],()=>new class{replaceDataProviderMetadata(e){const{field:t}=e,{dataProvider:i}=t;if(!i)return{};if(!Array.isArray(i.parameters)||i.parameters.length<1)return{};const o=i.parameters[0],s=o.endpoint.split("/"),a=o.endpoint,n=s[s.length-3];return{replaceProperties:{dataProvider:{factory:"oj-sp/data-provider/AggregateSearchDataProvider",parameters:[{endpoint:"noopt/noopt",filterCriterion:{op:"$AND",criteria:[{op:"$eq",value:{selectedFilter:"[[ $currentFilter.filter ]]"}},{op:"$ne",value:{filters:"[[ $appliedFilters ]]"}}]},uriParameters:{smartSearchName:s[s.length-2]}},{url:a,operationRef:"#/paths/~1"+n+"~1{smartSearchName}~1{searchType}/post"}]}}}}}),define("oj-sp/data-provider/AutocompleteSearchTransforms",["vb/BusinessObjectsTransforms","./DataProviderUtils"],(e,t)=>{"use strict";return{request:new class{paginate(t,i,o){return e.request.paginate(t,i,o)}sort(t,i,o){return e.request.sort(t,i,o)}filter(i,o,s){const a=t.getSearchTerms(o);if(s.body={filters:[]},t.isSmartSearchNameInQueryParametersApi(i.endpointDefinition))a&&s.body.filters.push({filter:"keyword",text:a});else{const e=t.getExclusionaryFilters(o);Array.isArray(e)&&(s.body.filters=t.cloneAndTrimFilters(e)),a&&(s.body.searchTerms=a)}return e.request.filter(i,o,s)}query(e){return e}body(e,t,i){return e.initConfig.body=i.body,e.initConfig.headers["Content-Type"]="application/json",e}},response:new class{paginate(t,i){return e.response.paginate(t,i)}body(e){const t=e.body.items,i=[];if(Array.isArray(t))for(let e=0;e<t.length;e++){const o=t[e],s={label:o.value,value:o.value,count:o.count,filter:"keyword"};if(o.index&&o.attribute&&o.attributeLabel){const e={index:o.index,attribute:o.attribute,attributeLabel:o.attributeLabel};s.dynamicProps={autocomplete:e}}const a={category:"autocomplete",description:o.value,chips:[s],id:["keyword",o.value].join("|")};i.push(a)}return e.body.items=i,e.body}}}}),define("oj-sp/data-provider/RecentSearchesTransforms",["vb/BusinessObjectsTransforms","./DataProviderUtils"],(e,t)=>{function i(e,t){if(!Array.isArray(e))return!1;if(!Array.isArray(t))return!0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0;e<t.length;e++){const i=t[e];if("keyword"===i.filter&&"keyword"===o.filter){const e=o.value,t=i.value;if(!t||!e)continue;const s=e.match(new RegExp(t,"gi"));if(Array.isArray(s)&&s.length>0)return!0}else if(i.filter===o.filter)return!0}}return!1}return{request:new class{paginate(i,o,s){if("fetchFirst"!==i.fetchConfiguration.capability)return e.request.paginate(i,o,s);let a=t.getUriParameters(i.url),n=Number.NaN,r=0;if(Array.isArray(a.limit)){let e=parseInt(a.limit[0],10);isNaN(e)&&(e=5),n=e}return isNaN(o.offset)||(r=o.offset),a={offset:r},isNaN(n)||(a.limit=n),i.url=t.updateUriParameters(i.url,a),i}sort(t,i,o){return e.request.sort(t,i,o)}filter(i,o,s){if(s.isSmartSearchNameInQueryParametersApi=t.isSmartSearchNameInQueryParametersApi(i.endpointDefinition),s.searchTerms=t.getSearchTerms(o),s.exclusionaryFilters=t.getExclusionaryFilters(o),s.isSmartSearchNameInQueryParametersApi){const e=t.getUriParameters(i.url);let o=5;if(Array.isArray(e.limit)){let t=parseInt(e.limit[0],10);isNaN(t)&&(t=5),o=t}e.limit=5*o,s.limit=o,s.searchTerms&&(e.searchTerms=s.searchTerms),i.url=t.updateUriParameters(i.url,e)}return e.request.filter(i,o,s)}query(e){return e}body(e,t,i){if(!i.isSmartSearchNameInQueryParametersApi){const t={filters:[]};Array.isArray(i.exclusionaryFilters)&&(t.filters=i.exclusionaryFilters),i.searchTerms&&(t.searchTerms=i.searchTerms),e.initConfig.body=t,e.initConfig.headers["Content-Type"]="application/json"}return e}},response:new class{paginate(t,i){return e.response.paginate(t,i)}body(e,t){const o=e.body.items,s=[];if(Array.isArray(o)){const{exclusionaryFilters:e}=t;let{limit:a}=t;isNaN(a)&&(a=o.length);for(let n=0;n<o.length;n++){const r=o[n];if(!r.smartSearchDesc)continue;if(t.isSmartSearchNameInQueryParametersApi&&i(e,r.smartSearchData))continue;if(s.length>=a)break;const l={category:"history",description:r.smartSearchDesc,chips:r.smartSearchData,id:r.id};s.push(l)}}return e.body.items=s,e.body}}}}),define("oj-sp/data-provider/SmartSearchAndFilterTransforms",["vb/BusinessObjectsTransforms","./DataProviderUtils","vb/helpers/rest"],(e,t,i)=>{class o{mergeFilterCriterion(e,i){const o=t.evalObservables(i);let s=[];Array.isArray(o)?s=o.slice():o&&o.value&&o.value.filters&&(s=o.value.filters);const a=t.getSearchTerms(e);return a&&s.push({filter:"keyword",value:a}),s}createRequestBody(e){const t=[];if(Array.isArray(e)&&e.length>0){const i=this.GetAppliedChipConverters(),o=i.default;for(let s=0;s<e.length;s++){const a=e[s];let n;const r=i[a.filter];n=r?r(a):o(a),t.push(n)}}return{filters:t}}saveRecentSearches(e,t,o){const{options:s}=t,{recentSearches:a}=s;if(!a)return;const{endpoint:n}=a;if(!n)return;const r={smartSearchName:s.parameters.smartSearchName},l=this._defaultSmartSearchNameBuilder(e);if(!l)return;const d={smartSearchDesc:l,smartSearchData:e};i.get(n,o).parameters(r).body(JSON.stringify(d)).fetch()}_defaultSmartSearchNameBuilder(e){const t=[];for(let i=0;i<e.length;i++){const o=e[i];"keyword"===o.filter?t.push(o.value):(o.filterLabel&&t.push(o.filterLabel),o.label&&t.push(o.label))}return t.join(" ")}GetAppliedChipConverters(){return{default:e=>({filter:e.filter,value:e.value}),keyword:e=>{const t={filter:e.filter};if("keyword"===e.filter&&e.dynamicProps&&e.dynamicProps.autocomplete){const i={text:e.value,attribute:e.dynamicProps.autocomplete.attribute,index:e.dynamicProps.autocomplete.index};t.value=i}else t.value=e.value;return t}}}}class s extends o{GetAppliedChipConverters(){return{keyword:e=>({text:e.value,filter:e.filter}),default:e=>({filter:e.filter,value:e.value})}}}return{request:new class{paginate(t,i,o){return e.request.paginate(t,i,o)}sort(t,i,o){return e.request.sort(t,i,o)}filter(t,i,o){return e.request.filter(t,i,o)}query(e){return e}body(e,i,a){const{fetchConfiguration:n}=a.fetchConfiguration?a:e;if(e.initConfig.headers["Content-Type"]="application/json","fetchFirst"===n.capability||"fetchByOffset"===n.capability){t.isSmartSearchNameInQueryParametersApi(e.endpointDefinition)?a.utils=new s:a.utils=new o;const i=n.fetchParameters.filterCriterion,r=a.dpState.options.filterCriterion;a.filters=a.utils.mergeFilterCriterion(i,r);const l=a.utils.createRequestBody(a.filters);e.initConfig.body=l,a.eventDetail={toUrl:Promise.resolve(e.url),operation:n.capability,fetchParameters:n.fetchParameters};const d=Object.assign({body:l},a.eventDetail);a.dispatchEvent("beforefetch",d)}else{const{keys:t}=n.fetchParameters;let{keyAttributes:i}=a.dpState.options;const o=[],s={filters:[]};Array.isArray(i)||(i=[i]);for(let e of t){const t=[];Array.isArray(e)||(e=[e]);for(let o=0;o<i.length;o++){const s={op:"$eq",attribute:i[o],value:e[o]};t.push(s)}if(t.length>1){const e={op:"$and",criteria:t};o.push(e)}else o.push(t[0])}if(o.length>1){const e={op:"$or",criteria:o};s.filters.push(e)}else s.filters.push(o[0]);e.initConfig.body=s}return e}},response:new class{paginate(t,i){return e.response.paginate(t,i)}body(e,t){const{fetchConfiguration:i}=t.fetchConfiguration?t:e;if("fetchFirst"===i.capability||"fetchByOffset"===i.capability){const i=Object.assign({},t.eventDetail,{data:e.body.items,fetchSize:e.body.totalResults,searchContext:e.body.context});t.dispatchEvent("afterfetch",i),t.utils.saveRecentSearches(t.filters,t.dpState,t.vbContext),delete t.eventDetail,delete t.filters,delete t.utils}return e.body}}}}),define("oj-sp/data-provider/SmartSearchAndFilterDataProvider",["vb/types/extendedType","vb/types/factories/serviceDataProviderFactory","./SmartSearchAndFilterTransforms","./DataProviderUtils","ojs/ojdataprovider","./KeysHashMap","./KeysHashSet"],(e,t,i,o,s,a,n)=>{const r={itemsPath:"items",keyAttributes:["_id"],transforms:i,capabilities:{fetchByOffset:{implementation:"randomAccess"}},pagingCriteria:{size:100,iterationLimit:100}},l={searchType:"search"};class d{constructor(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}class c extends d{constructor(e){super("beforefetch",e)}}class p extends d{constructor(e){super("afterfetch",e)}}return class extends e{constructor(e){super(),this._init(e)}getCapability(e){if("sort"===e)return{attributes:"multiple"};if("fetchByKeys"===e)return null;if("fetchByOffset"===e)return{implementation:"randomAccess"};if("fetchCapability"===e){const e=new Set;return e.add("exclusion"),{attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}}return"filter"===e?{textFilter:"on",operators:["$co","$eq","$ne"]}:null}getTotalSize(){const e=isNaN(this._fetchSize)?-1:this._fetchSize;return Promise.resolve(e)}isEmpty(){return"unknown"}addEventListener(e,t){o.addEventListener(this,e,t)}removeEventListener(e,t){o.removeEventListener(this,e,t)}dispatchEvent(e){return o.dispatchEvent(this,e)}fetchFirst(e){const t=new Promise(t=>{this._getDataProvider().then(i=>{const o=i.fetchFirst(e);t(o[window.Symbol.asyncIterator]())})}),i={};return i[window.Symbol.asyncIterator]=()=>({next:()=>t.then(e=>e.next().then(e=>Promise.resolve(e)))}),i}fetchByOffset(e){return this._getDataProvider().then(t=>t.fetchByOffset(e))}fetchByKeys(e){if((e=Object.assign({},e)).keys=this.createOptimizedKeySet(e.keys),0===e.keys.size)return{fetchParameters:e,results:this.createOptimizedKeyMap()};this._fetchConfiguration={capability:"fetchByKeys",fetchParameters:e};const t={size:e.keys.size};return this.fetchFirst(t)[window.Symbol.asyncIterator]().next().then(t=>{const i=this.createOptimizedKeyMap();if(t&&t.value&&t.value.response){const{metadata:e,data:o}=t.value;if(Array.isArray(e)&&Array.isArray(o))for(let t=0;t<e.length;t++){const s={metadata:e[t],data:o[t]};i.set(e[t].key,s)}}return{fetchParameters:e,results:i}})}containsKeys(e){if((e=Object.assign({},e)).keys=this.createOptimizedKeySet(e.keys),0===e.keys.size)return{fetchParameters:e,results:this.createOptimizedKeySet()};this._fetchConfiguration={capability:"containsKeys",fetchParameters:e};const t={size:e.keys.size};return this.fetchFirst(t)[window.Symbol.asyncIterator]().next().then(t=>{const i=this.createOptimizedKeySet();if(t&&t.value&&t.value.response){const{metadata:e}=t.value;if(Array.isArray(e))for(let t=0;t<e.length;t++)i.add(e[t].key)}return{fetchParameters:e,results:i}})}createOptimizedKeyMap(e){return new a(e)}createOptimizedKeySet(e){return new n(e)}getWritableOptions(){return{propertiesWritable:"all"}}isExtendedType(){return!0}getTypeDefinition(){return{type:{endpoint:"string",options:{keyAttributes:"any",parameters:"object",filterCriterion:"object",sortCriteria:[{attribute:"string",direction:"string"}],recentSearches:{endpoint:"string"}}},resolved:!0}}init(e,t,i,o){this._init(i,o)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t),this.dispatchEvent(new s.DataProviderRefreshEvent)}hoistValueObjectProperties(){return!1}_init(e,t){e&&(this._dpState=e),t&&(this._dpVbContext=t)}_getDataProvider(){const e=o.evalObservables(this._dpState),i={dpState:e,dispatchEvent:(e,t)=>{let i;"beforefetch"===e?i=new c({detail:t}):"afterfetch"===e&&(this._fetchSize=t.fetchSize,i=new p({detail:t})),this.dispatchEvent(i)}};i.fetchConfiguration=this._fetchConfiguration,delete this._fetchConfiguration,this._dpVbContext&&(i.vbContext=this._dpVbContext);const s=Object.assign({},l,e.options.parameters),a=r,n=Object.assign({},a,{endpoint:e.endpoint,uriParameters:s,transformsContext:i});Array.isArray(e.options.sortCriteria)&&(n.sortCriteria=e.options.sortCriteria);const{keyAttributes:d}=e.options;(Array.isArray(d)||"string"==typeof d)&&d.length>0&&(n.keyAttributes=d);const u={dataProviderOptions:n,vbContext:this._dpVbContext};return t.createInstance(u)}}}),define("oj-sp/data-provider/SuggestionFiltersTransforms",["vb/BusinessObjectsTransforms","./DataProviderUtils"],(e,t)=>{"use strict";return{request:new class{paginate(t,i,o){return e.request.paginate(t,i,o)}sort(t,i,o){return e.request.sort(t,i,o)}filter(t,i,o){return e.request.filter(t,i,o)}query(e){return e}body(e,i,o){const{fetchConfiguration:s}=e,{filterCriterion:a}=s.fetchParameters,n=t.getSearchTerms(a),r=t.getExclusionaryFilters(a),l={filters:[]};return Array.isArray(r)&&(l.filters=t.cloneAndTrimFilters(r)),n&&(l.searchTerms=n),e.initConfig.body=l,e.initConfig.headers["Content-Type"]="application/json",o.eventDetail={toUrl:Promise.resolve(e.url),operation:s.capability,fetchParameters:s.fetchParameters},e}},response:new class{paginate(t,i){return e.response.paginate(t,i)}body(e,t){if("SmartSuggestionChipsDataProvider"===t.dpName){const t=e.body.items,i=[];if(Array.isArray(t))for(let e=0;e<t.length;e++){const o=t[e],s={category:"suggestion",description:o.label,chips:[o],id:[o.filter,o.label].join("|")};i.push(s)}e.body.items=i}else if("SuggestionFiltersDataProvider"===t.dpName){const i=Object.assign({},t.eventDetail,{data:e.body.items,fetchSize:e.body.totalResults});t.dispatchEvent("afterfetch",i)}return e.body}}}}),define("oj-sp/data-provider/SmartSuggestionChipsDataProvider",["vb/types/extendedType","vb/types/factories/serviceDataProviderFactory","./RecentSearchesTransforms","./AutocompleteSearchTransforms","./SuggestionFiltersTransforms","./DataProviderUtils","ojs/ojdataprovider","./KeysHashMap","./KeysHashSet","ojs/ojlogger"],(e,t,i,o,s,a,n,r,l,d)=>{const c={recentSearches:{itemsPath:"items",keyAttributes:"id",transforms:i,capabilities:{fetchByOffset:{implementation:"randomAccess"}},pagingCriteria:{size:100,iterationLimit:100}},autocompleteSearch:{itemsPath:"items",keyAttributes:"id",transforms:o},suggestionFiltersSearch:{itemsPath:"items",keyAttributes:"id",transforms:s,transformsContext:{dpName:"SmartSuggestionChipsDataProvider"}}},p={recentSearches:{},autocompleteSearch:{searchType:"autocomplete"},suggestionFiltersSearch:{searchType:"filters"}},u=["recentSearches","suggestionFiltersSearch","autocompleteSearch"],h=["recentSearches","suggestionFiltersSearch"];return class extends e{constructor(e){super(),this._visitedByIteratorCache=new r,this._init(e)}isExtendedType(){return!0}getTypeDefinition(){return{type:{dataProviders:{recentSearches:{endpoint:"string",uriParameters:{}},autocompleteSearch:{endpoint:"string",uriParameters:"object"},suggestionFiltersSearch:{endpoint:"string",uriParameters:"object"}}},resolved:!0}}init(e,t,i,o){this._init(i,o)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t),this.dispatchEvent(new n.DataProviderRefreshEvent)}hoistValueObjectProperties(){return!1}getWritableOptions(){return{propertiesWritable:"all"}}getCapability(e){if("sort"===e)return{attributes:"none"};if("fetchByKeys"===e)return{caching:"visitedByCurrentIterator",implementation:"batchLookup"};if("fetchFirst"===e)return{caching:"visitedByCurrentIterator",iterationSpeed:"delayed"};if("fetchByOffset"===e)return{implementation:"randomAccess",caching:"visitedByCurrentIterator",iterationSpeed:"delayed"};if("fetchCapability"===e){const e=new Set;return e.add("exclusion"),{caching:"visitedByCurrentIterator",iterationSpeed:"delayed",attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}}return"filter"===e?{textFilter:"on",operators:["$co","$eq","$ne"]}:null}getTotalSize(){return Promise.resolve(-1)}isEmpty(){return"unknown"}addEventListener(e,t){a.addEventListener(this,e,t)}removeEventListener(e,t){a.removeEventListener(this,e,t)}dispatchEvent(e){return a.dispatchEvent(this,e)}fetchFirst(e){let t;this._visitedByIteratorCache.clear();const{filterCriterion:i}=e;return t=a.getSearchTerms(i)?this._federatedFetchFirst(u,e,!0):this._federatedFetchFirst(h,e,!0),t}fetchByOffset(e){return this._getDataProvider("recentSearches").then(t=>t.fetchByOffset(e))}createOptimizedKeyMap(e){return new r(e)}createOptimizedKeySet(e){return new l(e)}fetchByKeys(e){const t=this.createOptimizedKeyMap(),i=this._visitedByIteratorCache;return new Promise(o=>{if(0===i.size){this.fetchFirst({size:100})[window.Symbol.asyncIterator]().next().then(()=>{o(a.fetchByKeys(e,i,t))})}else o(a.fetchByKeys(e,i,t))})}containsKeys(e){const t=this.createOptimizedKeySet(),i=this._visitedByIteratorCache;return new Promise(o=>{if(0===i.size){this.fetchFirst({size:100})[window.Symbol.asyncIterator]().next().then(()=>{o(a.containsKeys(e,i,t))})}else o(a.containsKeys(e,i,t))})}_init(e,t){if(this._dpStates||(this._dpStates={}),this._dpInstances||(this._dpInstances={}),t&&(this._dbVbContext=t),e){const t=e.dataProviders;if(!t)return;for(let e=0;e<u.length;e++){const i=u[e];this._dpStates[i]=t[i],delete this._dpInstances[i]}}}_getDataProvidersIterators(e,t,i){return new Promise(o=>{if(Array.isArray(i.dpIterators))return void o(i.dpIterators);i.dpIterators=[];const{dpIterators:s}=i,a=[];for(let t=0;t<e.length;t++){const i=this._getDataProvider(e[t]);a.push(i)}Promise.all(a).then(e=>{const i=[];for(let t=0;t<e.length;t++)e[t]&&i.push(e[t]);const a=Math.round(t.size/i.length);(t=Object.assign({},t)).size=a;for(let e=0;e<i.length;e++){const o=i[e].fetchFirst(t)[window.Symbol.asyncIterator]();s.push(o)}o(s)})})}_federatedFetchFirst(e,t,i){const o={},s={};return o[window.Symbol.asyncIterator]=()=>{let o=!1;return{next:()=>new Promise(n=>{this._getDataProvidersIterators(e,t,s).then(e=>{const s=[];for(let t=0;t<e.length;t++){const i=new Promise(i=>{e[t].next().then(e=>i(e)).catch(e=>{d.error("oj-sp/data-provider/SmartSuggestionChipsDataProvider error: "+e),i({done:!0,value:{data:[],metadata:[]}})})});s.push(i)}Promise.all(s).then(s=>{const r=[],l=[],d=[];for(let e=0;e<s.length;e++){const t=s[e],{metadata:i,data:o}=t.value;if(t.done)d.push(e);else for(let e=0;e<o.length;e++)r.push(i[e]),l.push(o[e])}for(let t=d.length-1;t>-1;t--)e.splice(d[t],1);a.cacheIteratorVisitedFetchResults(r,l,this._visitedByIteratorCache),i&&(e.length=0),n({done:o,value:{metadata:r,data:l,fetchParameters:t}}),o||(o=0===e.length)})})})}},o}_getDataProvider(e){let i=Promise.resolve(null);const o=this._dpInstances;if(o[e])i=Promise.resolve(o[e]);else{const s=this._dpStates,n=a.evalObservables(s[e]);if(n&&n.endpoint){const s=Object.assign({},p[e],n.uriParameters),a=c[e],r={dataProviderOptions:Object.assign({},a,n,{uriParameters:s}),vbContext:this._dbVbContext};i=t.createInstance(r).then(t=>(o[e]=t,Promise.resolve(t)))}}return i}}}),define("oj-sp/data-provider/SuggestionFiltersDataProvider",["vb/types/extendedType","vb/types/factories/serviceDataProviderFactory","./SuggestionFiltersTransforms","./DataProviderUtils","./DataProviderBindingContext","ojs/ojdataprovider","./KeysHashMap","./KeysHashSet"],(e,t,i,o,s,a,n,r)=>{const l={itemsPath:"items",keyAttributes:["filter","value"],transforms:i,transformsContext:{dpName:"SuggestionFiltersDataProvider"},capabilities:{fetchByOffset:{implementation:"randomAccess"}}},d={searchType:"filters"};class c extends class{constructor(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}{constructor(e){super("afterfetch",e)}}return class extends e{constructor(e,t){super(),this._visitedByIteratorCache=new n,this._init(e,t)}isExtendedType(){return!0}getTypeDefinition(){return{type:{endpoint:"string",uriParameters:{}},resolved:!0}}init(e,t,i,o){this._init(i,o.availableContexts,o)}handlePropertyVariableChangeEvent(e){const t=e.value;this._init(t),this.dispatchEvent(new a.DataProviderRefreshEvent)}hoistValueObjectProperties(){return!1}getWritableOptions(){return{propertiesWritable:"all"}}getCapability(e){if("sort"===e)return{attributes:"none"};if("fetchByKeys"===e)return{caching:"visitedByCurrentIterator",implementation:"batchLookup"};if("fetchFirst"===e)return{caching:"visitedByCurrentIterator",iterationSpeed:"delayed"};if("fetchByOffset"===e)return{implementation:"iteration"};if("fetchCapability"===e){const e=new Set;return e.add("exclusion"),{caching:"visitedByCurrentIterator",iterationSpeed:"delayed",attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}}return"filter"===e?{textFilter:"on",operators:["$co","$eq","$ne"]}:null}getTotalSize(){return Promise.resolve(-1)}isEmpty(){return"unknown"}addEventListener(e,t){o.addEventListener(this,e,t)}removeEventListener(e,t){o.removeEventListener(this,e,t)}dispatchEvent(e){return o.dispatchEvent(this,e)}fetchFirst(e){this._visitedByIteratorCache.clear();const t=new Promise(t=>{this._getDataProvider().then(i=>{const o=i.fetchFirst(e);t(o[window.Symbol.asyncIterator]())})}),i={};return i[window.Symbol.asyncIterator]=()=>({next:()=>t.then(e=>e.next().then(e=>{if(e&&e.value&&e.value.response){const{metadata:t,data:i}=e.value;Array.isArray(t)&&Array.isArray(i)&&o.cacheIteratorVisitedFetchResults(t,i,this._visitedByIteratorCache)}return Promise.resolve(e)}))}),i}fetchByOffset(e){return this._getDataProvider().then(t=>t.fetchByOffset(e))}createOptimizedKeyMap(e){return new n(e)}createOptimizedKeySet(e){return new r(e)}fetchByKeys(e){const t=this.createOptimizedKeyMap(),i=this._visitedByIteratorCache;return new Promise(s=>{if(0===i.size){this.fetchFirst({size:100})[window.Symbol.asyncIterator]().next().then(()=>{s(o.fetchByKeys(e,i,t))})}else s(o.fetchByKeys(e,i,t))})}containsKeys(e){const t=this.createOptimizedKeySet(),i=this._visitedByIteratorCache;return new Promise(s=>{if(0===i.size){this.fetchFirst({size:100})[window.Symbol.asyncIterator]().next().then(()=>{s(o.containsKeys(e,i,t))})}else s(o.containsKeys(e,i,t))})}_init(e,t,i){e&&(this._dpState=e,delete this._dpInstance),t&&s.getInstance().assignAvailableContext(t),i&&(this._dpVbContext=i)}_getDataProvider(){let e;if(this._dpInstance)e=Promise.resolve(this._dpInstance);else{const i=o.evalObservables(this._dpState);if(i&&i.endpoint){const o=Object.assign({},d,i.uriParameters),a=l,n=Object.assign({},a.transformsContext);n.dispatchEvent=(e,t)=>{let i;"afterfetch"===e&&(this._fetchSize=t.fetchSize,i=new c({detail:t})),this.dispatchEvent(i)};const r=Object.assign({},a,i,{transformsContext:n,uriParameters:o});s.getInstance().assignUriParameters(r.uriParameters);const p={dataProviderOptions:r,vbContext:this._dpVbContext};e=t.createInstance(p).then(e=>(this._dpInstance=e,Promise.resolve(e)))}}return e}}}),define("css!oj-sp/detail-panel/detail-panel-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/detail-panel/detail-panel",["require","exports","ojs/ojlogger","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common/EventDispatcher","oj-sp/common/positionUtility","ojs/ojresponsiveutils","ojs/ojcontext","css!./detail-panel-styles","ojs/ojbutton","ojs/ojtoolbar","oj-sp/common/position-helper"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailPanel=void 0;let c=class extends s.Component{constructor(e){var t;super(e),this.headerRef=(0,s.createRef)(),this.detailPanelContentRef=(0,s.createRef)(),this.detailPanelFooterRef=(0,s.createRef)(),this.onResizeWindow=()=>{this.checkDividerDisplay()},this.onScroll=()=>{this.checkDividerDisplay()},this.handleClose=e=>{const t=document.querySelector(".oj-sp-collection-detail-page-drawer-popup");n.EventDispatcher.dispatch("openedChanged",t,{})},this.editActionHandler=e=>{var t;this.props.onEditModeChanged("off"===(null===(t=this.props)||void 0===t?void 0:t.editMode)?"on":"off")},this.cancelActionHandler=e=>{n.EventDispatcher.dispatch("spCancel",e.target,{})},this.updateActionHandler=e=>{n.EventDispatcher.dispatch("spUpdate",e.target,{})},this.setDetailPanelFocus=()=>{const e=this.detailPanelContentRef.current;if(e&&this.state.mdDownScreen){d.getContext(e).getBusyContext().whenReady().then(()=>{var t;null===(t=this.getAllFocusableList(e)[0])||void 0===t||t.focus({preventScroll:!0})})}},this.getAllFocusableList=e=>null==e?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',"video"),this.mdDownMediaQueryChangeListener=e=>{const t=e.matches;this.setState({mdDownScreen:t})},this.handleConnected=e=>{this.mdDownMediaQuery.matches&&this.subscribeToPositionUtil()},this.handleDisconnected=e=>{this.unsubscribeFromPositionUtil()},this.ref=(0,s.createRef)(),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.res=Object.assign({},a);const i=l.getFrameworkQuery(l.FRAMEWORK_QUERY_KEY.MD_DOWN);this.mdDownMediaQuery=window.matchMedia(i);const r=this.mdDownMediaQuery.matches;this.state={showDivider:!1,mdDownScreen:r,headerSticky:!0}}getFooterElement(){return this.detailPanelFooterRef.current}getDetailPanelSlotContent(){return this.detailPanelContentRef.current}checkDividerDisplay(){const e=this.getFooterElement();if(e){const t=e.getBoundingClientRect(),i=this.getDetailPanelSlotContent().getBoundingClientRect();this.setState({showDivider:i.top+i.height>t.top+1})}}componentDidMount(){this.detailPanelContentRef.current.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeWindow),this.mdDownMediaQuery.addEventListener("change",this.mdDownMediaQueryChangeListener),i.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} mounted`)}subscribeToPositionUtil(){const e=this.uniqueId+"_detailPanelHeader";if(!r.PositionUtility.isComponentSubscribed(e)){const t={componentName:e,component:this.headerRef.current,offsetCalculationSubscription:{offsetOptions:{position:"top",level:r.PositionUtility.LEVEL_MAP.header},onOffsetChange:e=>{this.headerRef.current&&(this.headerRef.current.style.top=e.top+"px")}},stickinessSubscription:{onStickinessChange:e=>{const t=e.isSticky;this.setState({headerSticky:t})}}};r.PositionUtility.subscribe(t)}}unsubscribeFromPositionUtil(){const e=this.uniqueId+"_detailPanelHeader";r.PositionUtility.isComponentSubscribed(e)&&r.PositionUtility.unsubscribe({componentName:e})}componentDidUpdate(e){var t;i.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} updated from :`,e,"to:",this.props),(null===(t=this.props)||void 0===t?void 0:t.editMode)!==(null==e?void 0:e.editMode)&&this.state.mdDownScreen&&this.setDetailPanelFocus()}componentWillUnmount(){const e=this.detailPanelContentRef.current;e&&e.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeWindow),this.mdDownMediaQuery.removeEventListener("change",this.mdDownMediaQueryChangeListener),i.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} will unmount`)}renderPositionHelper(){return(0,s.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}render(e,t){var i,o;const a=this.state.mdDownScreen&&this.state.headerSticky?"oj-sp-detail-panel-small-screen-view":"";return(0,s.h)("div",{ref:this.detailPanelContentRef,class:"oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sp-detail-panel-content oj-xs-padding-4x-horizontal\n                  oj-sm-padding-6x-horizontal oj-lg-padding-6x-horizontal"},this.renderPositionHelper(),(0,s.h)("div",{ref:this.headerRef,class:"oj-flex-item oj-sm-flex-0 oj-sm-padding-4x-top oj-sp-detail-panel-header oj-sp-detail-panel-header-padding-bottom "+a},(0,s.h)("div",{class:"oj-flex-bar"},(0,s.h)("div",{class:"oj-flex-bar-start"},(0,s.h)("div",{id:"oj-sp-detail-panel-title",role:"heading","aria-level":2,"aria-label":e.panelTitle,title:null==e?void 0:e.panelTitle,class:"oj-sp-detail-panel-title oj-text-color-primary oj-typography-subheading-lg"},e.panelTitle)),(0,s.h)("div",{class:"oj-flex-bar-end"},e.displayOptions&&"on"===(null===(i=e.displayOptions)||void 0===i?void 0:i.edit)&&"off"===(null==e?void 0:e.editMode)&&!this.state.mdDownScreen&&(0,s.h)("div",{class:"oj-sp-detail-panel-edit-btn"},(0,s.h)("div",{class:"oj-xs-padding-2x-left"},(0,s.h)("oj-button",{id:this.uniqueId+"_edit",class:"oj-button-sm",onojAction:this.editActionHandler},(0,s.h)("span",{slot:"startIcon",class:"oj-ux-ico-edit"}),this.res.edit))))),(0,s.h)("div",{class:"oj-flex-bar"},(0,s.h)("span",{title:null==e?void 0:e.panelSubtitle,class:"oj-sp-detail-panel-subtitle oj-text-color-primary oj-typography-subheading-sm oj-xs-padding-4x-bottom oj-lg-padding-0-bottom"},null==e?void 0:e.panelSubtitle))),(0,s.h)("div",{class:"oj-flex-item oj-sm-flex-1 oj-sp-detail-panel-slot-content oj-xs-padding-4x-top oj-sm-padding-6x-top oj-lg-padding-12x-top"},(0,s.h)("div",null,e.children)),(0,s.h)("div",{class:"oj-flex-item oj-sm-flex-0 oj-sp-detail-panel-footer",ref:this.detailPanelFooterRef},this.state.showDivider&&(0,s.h)("div",{class:"oj-flex-bar oj-sp-detail-panel-footer-divider"}),this.state.mdDownScreen&&"off"===(null==e?void 0:e.editMode)&&(0,s.h)("div",{class:"oj-sm-padding-4x oj-md-padding-6x oj-sm-only-padding-4x-start"},(0,s.h)("oj-toolbar",{id:this.uniqueId+"footerToolbar","data-oj-clickthrough":"disabled","aria-label":"Footer Process Buttons","aria-controls":"controlled",class:"oj-sm-only-width-full oj-flex-item oj-clickthrough-disabled oj-flex oj-sm-only-flex-direction-column oj-md-justify-content-flex-end oj-sm-flex-wrap-nowrap oj-md-flex-items-0"},(0,s.h)("oj-button",{class:"oj-clickthrough-disabled oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-3x-bottom oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end",onojAction:this.handleClose,id:this.uniqueId+"_close"},(0,s.h)("span",null,this.res.cancel)),e.displayOptions&&"on"===(null===(o=e.displayOptions)||void 0===o?void 0:o.edit)&&(0,s.h)("oj-button",{class:"oj-sp-detail-panel-footer-edit-btn oj-clickthrough-disabled oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end",chroming:"callToAction",onojAction:this.editActionHandler,id:this.uniqueId+"_footer_edit"},(0,s.h)("span",null,this.res.edit)))),"on"===(null==e?void 0:e.editMode)&&(0,s.h)("div",{class:"oj-sm-padding-4x oj-md-padding-6x oj-sm-only-padding-4x-start"},(0,s.h)("oj-toolbar",{id:this.uniqueId+"editFooterToolbar","data-oj-clickthrough":"disabled",class:"oj-sm-only-width-full oj-flex-item oj-clickthrough-disabled oj-flex oj-sm-only-flex-direction-column oj-md-justify-content-flex-end oj-sm-flex-wrap-nowrap oj-md-flex-items-0","aria-label":"Footer Process Buttons","aria-controls":"controlled"},(0,s.h)("oj-button",{class:"oj-clickthrough-disabled oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-3x-bottom oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end",onojAction:this.cancelActionHandler,id:this.uniqueId+"_cancel"},(0,s.h)("span",null,this.res.cancel)),(0,s.h)("oj-button",{class:"oj-clickthrough-disabled oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end",chroming:"callToAction",onojAction:this.updateActionHandler,id:this.uniqueId+"_update"},(0,s.h)("span",null,this.res.update))))))}};c.defaultProps={displayOptions:{edit:"off"}},c._metadata={properties:{panelTitle:{type:"string"},panelSubtitle:{type:"string"},displayOptions:{type:"object",properties:{edit:{type:"string",enumValues:["on","off"]}}},editMode:{type:"string",enumValues:["on","off"],writeback:!0}},events:{spCancel:{},spUpdate:{}},slots:{"":{}},extension:{_WRITEBACK_PROPS:["editMode"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},c=__decorate([(0,o.customElement)("oj-sp-detail-panel"),__metadata("design:paramtypes",[Object])],c),t.DetailPanel=c})),define("oj-sp/detail-panel/loader",["require","exports","./detail-panel"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailPanel=void 0,Object.defineProperty(t,"DetailPanel",{enumerable:!0,get:function(){return i.DetailPanel}})})),define("oj-sp/diagram-builder/utils/diagram-builder-text-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramBuilderTextUtils=void 0;t.DiagramBuilderTextUtils=class{constructor(e){this.ELLIPSIS="â¦",this.CONTEXT=document.createElement("canvas").getContext("2d");const t=(e?e.fontStyle:null)||"normal",i=(e?e.fontVariant:null)||"normal",o=(e?e.fontWeight:null)||"normal",s=(e?e.fontFamily:null)||"Oracle Sans",a=(e?e.fontSize:null)||"0.859rem";this.CONTEXT.font=t+" "+i+" "+o+" "+a+" "+s,this.cachedMetrics={}}_getTextWidth(e){return parseFloat(this.CONTEXT.measureText(e).width.toFixed(2))}getTextMetrics(e,t,i){const o=this.cachedMetrics[i];if(o&&o.originalString===e&&o.originalMaxWidth===t)return o.textMetrics;const s=this._truncateOutputText(e,t);return this.cachedMetrics[i]={originalString:e,originalMaxWidth:t,textMetrics:s},s}_getTextLength(e){return e.length}_truncateOutputText(e,t){if(t<=0)return{resultText:"",isTruncated:!0,textWidth:0};let i=this._getTextWidth(e);if(i<=t)return{resultText:e,isTruncated:!1,textWidth:i};const o=i/this._getTextLength(e);let s=Math.max(Math.floor(t/o)-2,0),a=e.substring(0,s)+this.ELLIPSIS;for(i=this._getTextWidth(a);i>t;){if(s<=0){a="",i=0;break}s-=1,a=e.substring(0,s)+this.ELLIPSIS,i=this._getTextWidth(a)}return{resultText:a,isTruncated:a!==e,textWidth:i}}}})),define("oj-sp/diagram-node/diagram-node-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramNodeUtils=void 0;class i{}i.remFontSize=-1,i.CONTEXT=document.createElement("canvas").getContext("2d"),i.MAX_ROWS=3,i._initializeUtils=()=>{if(-1!==i.remFontSize)return;const e=window.getComputedStyle(document.body).getPropertyValue("font-size").match(/^(\d*\.?\d*)px$/);if(e&&e.length>=2){const t=Number(e[1]);i.remFontSize=isNaN(t)?16:t,i._updateValuesRelatedToRemFontSize()}},i._getTextFontSize=()=>12===i.remFontSize||14===i.remFontSize?12:.859*i.remFontSize,i._updateValuesRelatedToRemFontSize=()=>{i.VERTICAL_OFFSETS={bottom:i._adjustPixelValue(20),top:i._adjustPixelValue(20)},i.HORIZONTAL_OFFSETS=i._adjustPixelValue(25),i.HORIZONTAL_CONTAINER_OFFSET=i._adjustPixelValue(20),i.VERTICAL_CONTAINER_OFFSET=i._adjustPixelValue(20),i.CONTAINER_HEADER_HEIGHT=2*i._getTextFontSize()*1.2+1.75*i.remFontSize,i.CONTEXT.font=i._getTextFontSize()+"px Oracle Sans"},i._adjustPixelValue=e=>isNaN(e)?null:e/16*i.remFontSize,i.VERTICAL_OFFSETS={bottom:20,top:20},i.HORIZONTAL_OFFSETS=25,i.HORIZONTAL_CONTAINER_OFFSET=20,i.VERTICAL_CONTAINER_OFFSET=20,i.CONTAINER_HEADER_HEIGHT=60,i._getRows=(e="",t)=>{let o=1,s=0;const a=e.trim().split(" ");for(const e of a){const a=parseFloat(i.CONTEXT.measureText(e).width.toFixed(2));if(0===s&&a<=t)s=a;else if(a>t){0!==s&&o++;const e=a/t,i=Math.floor(e);s=(e-i)*t,o+=i}else a+s+3.66>t?(o++,s=a):s+=a+3.66;if(o>=i.MAX_ROWS)return i.MAX_ROWS}return o},i.getShape=(e="normal",t={})=>"unconfigured"===e||(null==t?void 0:t.src)?"rectangle":(null==t?void 0:t.icon)?"container"===e?"rectangle":(null==t?void 0:t.shape)||"rectangle":"no-icon",i.estimateDimensions=({nodeTitle:e,nodeText:t,nodeState:o,size:s,leadingVisual:a})=>{i._initializeUtils();let n=0,r=0;const l=i.getShape(o,a);if("compact"===s)n=i._adjustPixelValue(50);else if(e&&"container"!==o){const e="no-icon"===l?i._adjustPixelValue(164):i._adjustPixelValue(140),o=i._getRows(t,e);n=(Math.min(o,3)+1)*i._getTextFontSize()*1.2+1.75*i.remFontSize}else n=i.CONTAINER_HEADER_HEIGHT;return r="compact"===s?"no-icon"===l?i._adjustPixelValue(175):i._adjustPixelValue(210):"no-icon"===l?i._adjustPixelValue(200):i._adjustPixelValue(220),{height:n,offsets:i._getOffsetSpacing(),width:r}},i.getTotalNodeWidth=e=>{if(i._initializeUtils(),e.state.expanded)return 2*i.HORIZONTAL_CONTAINER_OFFSET+e.content.w;{const t=i.estimateDimensions(e.itemData);return t.width+t.offsets.left+t.offsets.right}},i.getTotalNodeHeight=e=>{if(i._initializeUtils(),e.state.expanded)return 2*i.VERTICAL_CONTAINER_OFFSET+i.CONTAINER_HEADER_HEIGHT+e.content.h;{const t=i.estimateDimensions(e.itemData);return t.height+t.offsets.top+t.offsets.bottom}},i.getContainerHorizontalOffset=()=>(i._initializeUtils(),i.HORIZONTAL_CONTAINER_OFFSET),i.getContainerVerticalOffset=e=>(i._initializeUtils(),i.VERTICAL_CONTAINER_OFFSET+i.CONTAINER_HEADER_HEIGHT),i.getCSSTextStyle=e=>{var t;i._initializeUtils();let o=`margin: ${i.VERTICAL_OFFSETS.top}px ${i.HORIZONTAL_OFFSETS}px ${i.VERTICAL_OFFSETS.bottom}px ${i.HORIZONTAL_OFFSETS}px`;if("container"===(null===(t=null==e?void 0:e.itemData)||void 0===t?void 0:t.nodeState)&&(null==e?void 0:e.state.expanded)){const t=i.estimateDimensions(e.itemData),s=e.state.expanded?e.content.w:t.width;o+=`; height: ${e.state.expanded?e.content.h+i._adjustPixelValue(80):t.height}px; width: ${s}px`}return o},i._getOffsetSpacing=()=>({bottom:i.VERTICAL_OFFSETS.bottom,left:i.HORIZONTAL_OFFSETS,right:i.HORIZONTAL_OFFSETS,top:i.VERTICAL_OFFSETS.top}),i.getVerticalOffsets=()=>(i._initializeUtils(),i.VERTICAL_OFFSETS),i.getRemFontSize=()=>(i._initializeUtils(),i.remFontSize),i.getHorizontalOffsets=()=>(i._initializeUtils(),{x:i.HORIZONTAL_OFFSETS,y:(i.VERTICAL_OFFSETS.bottom-i.VERTICAL_OFFSETS.top)/2}),t.DiagramNodeUtils=i})),define("oj-sp/diagram-builder/placeholder-node/diagram-placeholder-node",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{let t;!function(e){e.ENTER="Enter",e.SPACE=" "}(t||(t={}));const s=Object.assign({},o);return(0,i.h)("div",{id:e.nodeId,"aria-disabled":e.readonly,class:(()=>{let t="oj-flex oj-sm-flex-wrap-nowrap oj-sp-diagram-placeholder-node-container oj-sp-diagram-placeholder-node-";return t+=(e.size?e.size:"dynamic")+(e.selected?" oj-sp-diagram-placeholder-node-selected":"")+(!e.selected&&e.focused?" oj-sp-diagram-placeholder-node-focused":"")+("add"!==e.type?" oj-sp-diagram-link-create-end":""),t})(),style:e.nodeStyle,tabIndex:"add"===e.type?0:null,role:"add"!==e.type||e.readonly?null:"button","aria-haspopup":"add"===e.type&&e.hasAddMenu&&!e.readonly?"menu":null,"aria-label":(()=>{let t;switch(e.type){case"add":t=e.label||s.addNode;break;case"start":t=s.flowStart;break;case"end":t=s.flowEnd}return t})(),onClick:t=>{var i;"add"===e.type&&(t.preventDefault(),t.stopPropagation(),null===(i=e.onSpAdd)||void 0===i||i.call(e))},onKeyUp:i=>{var o;const{key:s}=i;s!==t.ENTER&&s!==t.SPACE||"add"===e.type&&(i.preventDefault(),i.stopPropagation(),null===(o=e.onSpAdd)||void 0===o||o.call(e))}},(0,i.h)("div",{class:"oj-sp-diagram-placeholder-node-outline-"+(e.size?e.size:"dynamic")}),(0,i.h)("div",{class:"oj-sp-diagram-placeholder-node-icon oj-sp-diagram-placeholder-node-icon-size"},(0,i.h)("div",{class:"oj-sp-diagram-placeholder-node-icon-content oj-sp-diagram-placeholder-node-icon-content-font "+(()=>{const{type:t}=e;return"end"===t?"oj-ux-ico-stop":"add"===t?"oj-ux-ico-plus":"start"===t?"oj-ux-ico-play":""})()})))}})),define("oj-sp/diagram-builder/placeholder-node/diagram-placeholder-node-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramPlaceholderNodeUtils=void 0;class i{}i.remFontSize=-1,i.VERTICAL_OFFSETS={bottom:10,top:10},i.HORIZONTAL_OFFSETS=10,i._adjustPixelValue=e=>isNaN(e)?null:e/16*i.remFontSize,i._initializeUtils=()=>{if(-1!==i.remFontSize)return;const e=window.getComputedStyle(document.body).getPropertyValue("font-size").match(/^(\d*\.?\d*)px$/);if(e&&e.length>=2){const t=Number(e[1]);i.remFontSize=isNaN(t)?16:t,i._updateValuesRelatedToRemFontSize()}},i._updateValuesRelatedToRemFontSize=()=>{i.VERTICAL_OFFSETS={bottom:i._adjustPixelValue(10),top:i._adjustPixelValue(10)},i.HORIZONTAL_OFFSETS=i._adjustPixelValue(10)},i.calculateDimensions=e=>{i._initializeUtils();let t=0,o=0;return"standalone"===e?(t=3.25*i.remFontSize,o=t):"compact"===e?(t=2*i.remFontSize,o=t):(t=3*i.remFontSize,o=t),{height:t,offsets:i._getOffsetSpacing(),width:o}},i._getOffsetSpacing=()=>({bottom:i.VERTICAL_OFFSETS.bottom,left:i.HORIZONTAL_OFFSETS,right:i.HORIZONTAL_OFFSETS,top:i.VERTICAL_OFFSETS.top}),i.getVerticalOffsets=()=>(i._initializeUtils(),i.VERTICAL_OFFSETS),i.getHorizontalOffsets=()=>(i._initializeUtils(),{x:i.HORIZONTAL_OFFSETS,y:(i.VERTICAL_OFFSETS.bottom-i.VERTICAL_OFFSETS.top)/2}),t.DiagramPlaceholderNodeUtils=i})),define("oj-sp/diagram-builder/utils/abstract-diagram-builder-layout-strategy",["require","exports","preact","oj-sp/diagram-node/diagram-node-utils","../placeholder-node/diagram-placeholder-node","../placeholder-node/diagram-placeholder-node-utils"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractDiagramBuilderLayoutStrategy=void 0;t.AbstractDiagramBuilderLayoutStrategy=class{constructor(e){this.uid=e}renderNode(e,t,i,o){return"container"===e.itemData.nodeState?this._getContainerEl(e,t,i):this._getNodeEl(e,t,i,o)}_getNodeEl(e,t,i,o){switch(e.itemData.type){case"add":case"end":case"start":return this._getNodeElIcon(e,i,o);default:return this._getNodeElSpectra(e,t,i)}}_getNodeElIcon(e,t,o){const n=a.DiagramPlaceholderNodeUtils.calculateDimensions(t.nodeCount>1?t.nodeSize:"standalone"),r=n.width+n.offsets.left+n.offsets.right,l=n.height+n.offsets.top+n.offsets.bottom,d=null==o?void 0:o["n"+e.id];return(0,i.h)("svg",{width:r,height:l},(0,i.h)("foreignObject",{x:"0",y:"0",width:"100%",height:"100%"},(0,i.h)(s.default,{nodeId:this.uid+"-node-"+e.id,type:e.itemData.type,size:t.nodeCount>1?t.nodeSize:"standalone",nodeStyle:`margin: ${n.offsets.top}px ${n.offsets.right}px ${n.offsets.bottom}px ${n.offsets.left}px`,focused:e.state.focused,selected:e.state.selected,label:null==d?void 0:d.label,hasAddMenu:t.hasAddMenu,readonly:t.readonly,onSpAdd:()=>t.onAdd(e)})))}_getNodeElSpectra(e,t,s){const a=this._findDiagramNode(null==t?void 0:t(e));if(!a)return null;const n=o.DiagramNodeUtils.estimateDimensions(Object.assign(Object.assign({},e.itemData),{size:s.nodeSize})),r=n.width+n.offsets.left+n.offsets.right,l=n.height+n.offsets.top+n.offsets.bottom;return(0,i.h)("svg",{width:r,height:l},(0,i.h)("foreignObject",{x:"0",y:"0",width:"100%",height:"100%"},(0,i.cloneElement)(a,{style:{margin:`${n.offsets.top}px ${n.offsets.right}px ${n.offsets.bottom}px ${n.offsets.left}px`},id:this.uid+"-node-"+e.id,size:s.nodeSize,focused:e.state.focused,selected:e.state.selected,inActionableMode:e.state.inActionableMode,readonly:s.readonly,addMenuType:s.hasAddMenu?"menu":"none",onspAdd:t=>s.onAdd(e,t),onspAddPathStart:t=>s.onAddPathStart(e,t)})))}_getContainerEl(e,t,s){const a=this._findDiagramNode(null==t?void 0:t(e));if(!a)return null;const n=o.DiagramNodeUtils.estimateDimensions(Object.assign(Object.assign({},e.itemData),{size:s.nodeSize})),r=e.state.expanded?e.content.w:n.width,l=e.state.expanded?o.DiagramNodeUtils.getTotalNodeHeight(e):n.height,d=r+n.offsets.left+n.offsets.right,c=l+n.offsets.top+n.offsets.bottom;return(0,i.h)("svg",{width:d,height:c},(0,i.h)("g",null,(0,i.h)("foreignObject",{x:"0",y:"0",width:d,height:c},(0,i.cloneElement)(a,{style:{width:r,height:l,margin:`${n.offsets.top}px ${n.offsets.right}px ${n.offsets.bottom}px ${n.offsets.left}px`},id:this.uid+"-node-"+e.id,size:s.nodeSize,selected:e.state.selected,expanded:e.state.expanded,focused:e.state.focused,inActionableMode:e.state.inActionableMode,readonly:s.readonly,addMenuType:s.hasAddMenu?"menu":"none",onspExpand:t=>s.onExpand(e),onspCollapse:t=>s.onCollapse(e),onspAdd:t=>s.onAdd(e,t),onspAddPathStart:t=>s.onAddPathStart(e,t)})),(0,i.h)("g",{transform:`translate(${o.DiagramNodeUtils.getContainerHorizontalOffset()}, ${o.DiagramNodeUtils.getContainerVerticalOffset(e)})`},(0,i.h)("oj-diagram-child-content",null))))}_findDiagramNode(e){var t;let o=(0,i.toChildArray)(e),s=null==o?void 0:o.find(({type:e})=>"oj-sp-diagram-node"===e||"function"==typeof e);return"function"==typeof(null==s?void 0:s.type)&&(o=(0,i.toChildArray)(null===(t=s.props)||void 0===t?void 0:t.children),s=null==o?void 0:o.find(({type:e})=>"oj-sp-diagram-node"===e)),s}}})),define("oj-sp/diagram-builder/utils/diagram-builder-workflow-layout-strategy",["require","exports","./abstract-diagram-builder-layout-strategy","oj-sp/diagram-node/diagram-node-utils","../placeholder-node/diagram-placeholder-node-utils"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramBuilderWorkflowStrategy=void 0;class a extends i.AbstractDiagramBuilderLayoutStrategy{constructor(e){super(e),this.currentAlignment=void 0,this.PADDING=110,this.TURN_PERCENTAGE=.33,this.renderLayout=(e,t,i)=>{this._renderLayoutHelper(t,e,i)},this._initializeLinkCountMap4NodesInContainer=(e,t,i)=>{if(e){t.set(i?e.getId():e.id,{start:0,end:0,top:0,bottom:0});const o=i?e.getData().nodes:e.nodes;if(Array.isArray(o))for(let e=0;e<o.length;e++)this._initializeLinkCountMap4NodesInContainer(o[e],t,!1)}}}_renderLayoutHelper(e,t,i){const o=e.getNodeCount(),s=new Map,a=new Map,n=[];for(let t=0;t<o;t++){const i=e.getNodeByIndex(t);n.push(i),this._initializeLinkCountMap4NodesInContainer(i,a,!0)}this._layoutSparseGrid(n,!1,s,e.isLocaleR2L());const r=e.getLinkCount();for(let t=0;t<r;t++)this._calculateLinkCountMap(e,e.getLinkByIndex(t),a);for(let t=0;t<r;t++)this._createLink(e,e.getLinkByIndex(t),a,i);const l=t&&t.alignment?t.alignment:"center",d=t&&t.addedNodeIds?t.addedNodeIds:[];this._setAlignment(e,l,d,n)}_getDiagramBounds(e){let t=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,s=-Number.MAX_VALUE;const a=e.getNodeCount();for(let n=0;n<a;n++){const a=e.getNodeByIndex(n),r=this._getLeftX(a.getPosition(),0),l=this._getRightX(a.getPosition(),a.getBounds(),0),d=this._getTopY(a.getPosition(),0),c=this._getBottomY(a.getPosition(),a.getBounds(),0);t>r&&(t=r),o>d&&(o=d),i<l&&(i=l),s<c&&(s=c)}return{bottom:s,h:s-o,left:t,right:i,top:o,w:i-t}}_setCalculatedLayoutContext(e,t,i,o,s,a,n,r){e&&(this.calculatedLayoutContext||(this.calculatedLayoutContext=new Map),this.calculatedLayoutContext.set(e,{minCol:t,maxCol:i,minRow:o,numColumns:s,numRows:a,columnWidths:n,rowHeights:r}))}_getCalculatedLayoutContext(e){return e&&this.calculatedLayoutContext?this.calculatedLayoutContext.get(e):null}_layoutSparseGrid(e,t,i,o){const s=e.length;let a=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=Number.MAX_VALUE,l=0,d=0;for(let t=0;t<s;t++){const i=this._getMaxMinValues(e[t],n,a,r);a=i.minCol,n=i.maxCol,r=i.minRow}const c=[];for(let p=0;p<s;p++){const s=this._getBoundsForEachNode({isRtl:o,minRow:r,minCol:a,autoLayout:t,nodePositionMap:i,maxCol:n},c,e[p],d,l);d=s.numRows,l=s.numColumns}const p=new Array(l+1).fill(0),u=new Array(d+1).fill(0);for(let e=0;e<s;e++){const{row:t}=c[e],{column:i}=c[e];c[e].w+this.PADDING>p[i]&&(p[i]=c[e].w+this.PADDING),c[e].h+this.PADDING>u[t]&&(u[t]=c[e].h+this.PADDING)}for(let t=0;t<s;t++){const i=e[t];this._setCalculatedLayoutContext(i.getId(),a,n,r,l,d,p,u);let o=0,s=0;for(let e=0;e<c[t].column;e++)o+=p[e];for(let e=0;e<c[t].row;e++)s+=u[e];i.setPosition({x:o+(p[c[t].column]-this.PADDING-c[t].w)/2,y:s+(u[c[t].row]-this.PADDING-c[t].h)/2})}}_getMaxMinValues(e,t,i,o){const s=e.getData();return s.position.col>t&&(t=s.position.col),s.position.row<o&&(o=s.position.row),s.position.col<i&&(i=s.position.col),{maxCol:t,minRow:o,minCol:i}}_getBoundsForEachNode(e,t,i,o,s){i.isDisclosed()&&i.getChildNodes()&&this._layoutSparseGrid(i.getChildNodes(),e.autoLayout,e.nodePositionMap,e.isRtl);const a=i.getContentBounds(),n=i.getData();let r=s,l=o;return a.row=n.position.row-e.minRow,a.column=e.isRtl?e.maxCol-n.position.col:n.position.col-e.minCol,a.row>o&&(l=a.row),a.column>s&&(r=a.column),t.push(a),{numRows:l,numColumns:r}}_getTopX(e,t){return e.x+.5*t.w}_getTopY(e,t){return e.y-t}_getBottomX(e,t){return e.x+.5*t.w}_getBottomY(e,t,i){return e.y+t.h+i}_getLeftX(e,t){return e.x-t}_getLeftY(e,t){return e.y+.5*t.h}_getRightX(e,t,i){return e.x+t.w+i}_getRightY(e,t){return e.y+.5*t.h}_updateNodeAddIconProperty(e,t){const i=document.querySelector("#"+this.uid+"-node-"+t);if(i)switch(e){case"top":i.setProperty("topAddIcon","off");break;case"bottom":i.setProperty("bottomAddIcon","off");break;case"start":i.setProperty("startAddIcon","off");break;case"end":i.setProperty("endAddIcon","off")}}_getEndEdge(e,t,i,o){let s;const a=o.getNodeById(t),n=o.getNodeById(i),r=o.getCommonContainer(t,i),l=a.getRelativePosition(r),d=n.getRelativePosition(r),c=a.getBounds(),p=n.getBounds(),u=Math.round(l.y+c.h/2),h=Math.round(d.y+p.h/2),m=Math.round(l.x+c.w/2),g=Math.round(d.x+p.w/2);switch(e){case"top":s=u>h?"bottom":u===h?"top":m<g?"start":"end";break;case"bottom":s=u<h?"top":u===h?"bottom":m<g?"start":"end";break;case"start":s=m>g?"end":m===g?"start":u<h?"top":"bottom";break;case"end":s=m<g?"start":m===g?"end":u<h?"top":"bottom"}return s}_isStraightLine(e,t,i,o){const s=o.getNodeById(t),a=o.getNodeById(i),n=o.getCommonContainer(t,i),r=s.getRelativePosition(n),l=a.getRelativePosition(n),d=s.getBounds(),c=a.getBounds(),p=Math.round(r.y+d.h/2),u=Math.round(l.y+c.h/2),h=Math.round(r.x+d.w/2),m=Math.round(l.x+c.w/2);switch(e){case"top":return p>u&&h===m;case"bottom":return p<u&&h===m;case"start":return h>m&&p===u;case"end":return h<m&&p===u}return!0}_updateLinkCountMap(e,t,i){if(!i||"start"!==e&&"end"!==e&&"top"!==e&&"bottom"!==e)return;const o=i.get(t);o&&o[e]++}_getPath4LeftSourceEdge(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds();n=Math.round(c.x+u.w/2)<Math.round(p.x+h.w/2)?this._computeLeftPathForN1LessThanN2(e,t,i,o,s):this._computeLeftPathForN2LessThanN1(e,t,i,o,s,a),this._isRegularNode(l.getData())&&this._updateNodeAddIconProperty(n,t)}_isRegularNode(e){return!e.type||"regular"===e.type}_getHorizontalOffsets(e){return"start"===e||"end"===e||"add"===e?s.DiagramPlaceholderNodeUtils.getHorizontalOffsets():o.DiagramNodeUtils.getHorizontalOffsets()}_getVerticalOffsets(e){return"start"===e||"end"===e||"add"===e?s.DiagramPlaceholderNodeUtils.getVerticalOffsets():o.DiagramNodeUtils.getVerticalOffsets()}_computeLeftPathForN1LessThanN2(e,t,i,o,s){let a;const n=o.getNodeById(e),r=o.getNodeById(t),l=o.getCommonContainer(e,t),d=n.getRelativePosition(l),c=r.getRelativePosition(l);s.setCoordinateSpace(l);const p=n.getBounds(),u=r.getBounds(),h=Math.round(d.y+p.h/2),m=Math.round(c.y+u.h/2),{y:g,x:y}=this._getHorizontalOffsets(n.getData().type),{top:f,bottom:b}=this._getVerticalOffsets(r.getData().type),v={x:this._getLeftX(d,s.getStartConnectorOffset())+y,y:this._getLeftY(d,p)-g};let j;h>=m?(j={x:this._getBottomX(c,u),y:this._getBottomY(c,u,s.getEndConnectorOffset())-b},a="bottom"):(j={x:this._getTopX(c,u),y:this._getTopY(c,s.getEndConnectorOffset())+f},a="top");const A=o.isLocaleR2L(),C={x:v.x-this._getHorizontalTurnOffset(n,A),y:v.y},E=h>=m?{x:v.x-this._getHorizontalTurnOffset(n,A),y:j.y+this._getVerticalTurnOffset(r,"bottom")}:{x:v.x-this._getHorizontalTurnOffset(n,A),y:j.y-this._getVerticalTurnOffset(r,"top")},T=h>=m?{x:j.x,y:j.y+this._getVerticalTurnOffset(r,"bottom")}:{x:j.x,y:j.y-this._getVerticalTurnOffset(r,"top")};return i.push(v),i.push(C),i.push(E),i.push(T),i.push(j),a}_computeLeftPathForN2LessThanN1(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds(),m=Math.round(c.x+u.w/2),g=Math.round(p.x+h.w/2),{y:y,x:f}=this._getHorizontalOffsets(r.getData().type),{y:b,x:v}=this._getHorizontalOffsets(l.getData().type),j={x:this._getLeftX(c,s.getStartConnectorOffset())+f,y:this._getLeftY(c,u)-y};let A;m===g?(A={x:this._getLeftX(p,s.getEndConnectorOffset())+v,y:this._getLeftY(p,h)-b},n=o.isLocaleR2L()?"end":"start"):(A={x:this._getRightX(p,h,s.getEndConnectorOffset())-v,y:this._getRightY(p,h)-b},n=o.isLocaleR2L()?"start":"end");const C=o.isLocaleR2L(),E=!!a||this._leftPathTurnEarlier(e,t,o),T={x:a?(j.x+A.x)/2:E?j.x-this._getHorizontalTurnOffset(r,C):A.x+this._getComplementaryHorizontalTurnOffset(l,C),y:j.y},_={x:a?(j.x+A.x)/2:E?j.x-this._getHorizontalTurnOffset(r,C):A.x+this._getComplementaryHorizontalTurnOffset(l,C),y:A.y};return i.push(j),i.push(T),i.push(_),i.push(A),n}_getPath4TopSourceEdge(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds();n=Math.round(c.y+u.h/2)<Math.round(p.y+h.h/2)?this._computeTopPathForN1LessThanN2(e,t,i,o,s):this._computeTopPathForN2LessThanN1(e,t,i,o,s,a),this._isRegularNode(l.getData())&&this._updateNodeAddIconProperty(n,t)}_computeTopPathForN1LessThanN2(e,t,i,o,s){let a;const n=o.getNodeById(e),r=o.getNodeById(t),l=o.getCommonContainer(e,t),d=n.getRelativePosition(l),c=r.getRelativePosition(l);s.setCoordinateSpace(l);const p=n.getBounds(),u=r.getBounds(),h=Math.round(d.x+p.w/2),m=Math.round(c.x+u.w/2),{y:g,x:y}=this._getHorizontalOffsets(r.getData().type),{top:f}=this._getVerticalOffsets(n.getData().type),b={x:this._getTopX(d,p),y:this._getTopY(d,s.getStartConnectorOffset())+f};let v;h>=m?(v={x:this._getRightX(c,u,s.getEndConnectorOffset())-y,y:this._getRightY(c,u)-g},a=o.isLocaleR2L()?"start":"end"):(v={x:this._getLeftX(c,s.getEndConnectorOffset())+y,y:this._getLeftY(c,u)-g},a=o.isLocaleR2L()?"end":"start");const j=o.isLocaleR2L(),A={x:b.x,y:b.y-this._getVerticalTurnOffset(n,"top")},C=h>=m?{x:v.x+this._getHorizontalTurnOffset(r,j),y:b.y-this._getVerticalTurnOffset(n,"top")}:{x:v.x-this._getHorizontalTurnOffset(r,j),y:b.y-this._getVerticalTurnOffset(n,"top")},E=h>=m?{x:v.x+this._getHorizontalTurnOffset(r,j),y:v.y}:{x:v.x-this._getHorizontalTurnOffset(r,j),y:v.y};return i.push(b),i.push(A),i.push(C),i.push(E),i.push(v),a}_computeTopPathForN2LessThanN1(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds(),m=Math.round(c.y+u.h/2),g=Math.round(p.y+h.h/2),{top:y}=this._getVerticalOffsets(r.getData().type),{top:f,bottom:b}=this._getVerticalOffsets(l.getData().type),v={x:this._getTopX(c,u),y:this._getTopY(c,s.getStartConnectorOffset())+y};let j;m===g?(j={x:this._getTopX(p,h),y:this._getTopY(p,s.getEndConnectorOffset())+f},n="top"):(j={x:this._getBottomX(p,h),y:this._getBottomY(p,h,s.getEndConnectorOffset())-b},n="bottom");const A=!!a||this._topPathTurnEarlier(e,t,o),C={x:v.x,y:a?(v.y+j.y)/2:A?v.y-this._getVerticalTurnOffset(r,"top"):j.y+this._getComplementaryVerticalTurnOffset(l,"bottom")},E={x:j.x,y:a?(v.y+j.y)/2:A?v.y-this._getVerticalTurnOffset(r,"top"):j.y+this._getComplementaryVerticalTurnOffset(l,"bottom")};return i.push(v),i.push(C),i.push(E),i.push(j),n}_getPath4BottomSourceEdge(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds();n=Math.round(c.y+u.h/2)>Math.round(p.y+h.h/2)?this._computeBottomPathForN2LessThanN1(e,t,i,o,s):this._computeBottomPathForN1LessThanN2(e,t,i,o,s,a),this._isRegularNode(l.getData())&&this._updateNodeAddIconProperty(n,t)}_computeBottomPathForN2LessThanN1(e,t,i,o,s){let a;const n=o.getNodeById(e),r=o.getNodeById(t),l=o.getCommonContainer(e,t),d=n.getRelativePosition(l),c=r.getRelativePosition(l);s.setCoordinateSpace(l);const p=n.getBounds(),u=r.getBounds(),h=Math.round(d.x+p.w/2),m=Math.round(c.x+u.w/2),{y:g,x:y}=this._getHorizontalOffsets(r.getData().type),{bottom:f}=this._getVerticalOffsets(n.getData().type),b={x:this._getBottomX(d,p),y:this._getBottomY(d,p,s.getStartConnectorOffset())-f};let v;h>=m?(v={x:this._getRightX(c,u,s.getEndConnectorOffset())-y,y:this._getRightY(c,u)-g},a=o.isLocaleR2L()?"start":"end"):(v={x:this._getLeftX(c,s.getEndConnectorOffset())+y,y:this._getLeftY(c,u)-g},a=o.isLocaleR2L()?"end":"start");const j=o.isLocaleR2L(),A={x:b.x,y:b.y+this._getVerticalTurnOffset(n,"bottom")},C=h>=m?{x:v.x+this._getHorizontalTurnOffset(r,j),y:b.y+this._getVerticalTurnOffset(n,"bottom")}:{x:v.x-this._getHorizontalTurnOffset(r,j),y:b.y+this._getVerticalTurnOffset(n,"bottom")},E=h>=m?{x:v.x+this._getHorizontalTurnOffset(r,j),y:v.y}:{x:v.x-this._getHorizontalTurnOffset(r,j),y:v.y};return i.push(b),i.push(A),i.push(C),i.push(E),i.push(v),a}_computeBottomPathForN1LessThanN2(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds(),m=Math.round(c.y+u.h/2),g=Math.round(p.y+h.h/2),{bottom:y}=this._getVerticalOffsets(r.getData().type),{top:f,bottom:b}=this._getVerticalOffsets(l.getData().type),v={x:this._getBottomX(c,u),y:this._getBottomY(c,u,s.getStartConnectorOffset())-y};let j;m===g?(j={x:this._getBottomX(p,h),y:this._getBottomY(p,h,s.getEndConnectorOffset())-b},n="bottom"):(j={x:this._getTopX(p,h),y:this._getTopY(p,s.getEndConnectorOffset())+f},n="top");const A=!!a||this._bottomPathTurnEarlier(e,t,o),C={x:v.x,y:a?(v.y+j.y)/2:A?v.y+this._getVerticalTurnOffset(r,"bottom"):j.y-this._getComplementaryVerticalTurnOffset(l,"top")},E={x:j.x,y:a?(v.y+j.y)/2:A?v.y+this._getVerticalTurnOffset(r,"bottom"):j.y-this._getComplementaryVerticalTurnOffset(l,"top")};return i.push(v),i.push(C),i.push(E),i.push(j),n}_getPath4RightSourceEdge(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds();n=Math.round(c.x+u.w/2)>Math.round(p.x+h.w/2)?this._computeRightPathForN2LessThanN1(e,t,i,o,s):this._computeRightPathForN1LessThanN2(e,t,i,o,s,a),this._isRegularNode(l.getData())&&this._updateNodeAddIconProperty(n,t)}_computeRightPathForN2LessThanN1(e,t,i,o,s){let a;const n=o.getNodeById(e),r=o.getNodeById(t),l=o.getCommonContainer(e,t),d=n.getRelativePosition(l),c=r.getRelativePosition(l);s.setCoordinateSpace(l);const p=n.getBounds(),u=r.getBounds(),h=Math.round(d.y+p.h/2),m=Math.round(c.y+u.h/2),{y:g,x:y}=this._getHorizontalOffsets(n.getData().type),{top:f,bottom:b}=this._getVerticalOffsets(r.getData().type),v={x:this._getRightX(d,p,s.getStartConnectorOffset())-y,y:this._getRightY(d,p)-g};let j;h>=m?(j={x:this._getBottomX(c,u),y:this._getBottomY(c,u,s.getEndConnectorOffset())-b},a="bottom"):(j={x:this._getTopX(c,u),y:this._getTopY(c,s.getEndConnectorOffset())+f},a="top");const A=o.isLocaleR2L(),C={x:v.x+this._getHorizontalTurnOffset(n,A),y:v.y},E=h>=m?{x:v.x+this._getHorizontalTurnOffset(n,A),y:j.y+this._getVerticalTurnOffset(r,"bottom")}:{x:v.x+this._getHorizontalTurnOffset(n,A),y:j.y-this._getVerticalTurnOffset(r,"top")},T=h>=m?{x:j.x,y:j.y+this._getVerticalTurnOffset(r,"bottom")}:{x:j.x,y:j.y-this._getVerticalTurnOffset(r,"top")};return i.push(v),i.push(C),i.push(E),i.push(T),i.push(j),a}_hasNodeAt(e,t,i){var o,s;const a=i.getNodeCount();for(let n=0;n<a;n++){const a=i.getNodeByIndex(n);if((null===(o=a.getData().position)||void 0===o?void 0:o.col)===e&&(null===(s=a.getData().position)||void 0===s?void 0:s.row)===t)return!0}return!1}_computeRightPathForN1LessThanN2(e,t,i,o,s,a){let n;const r=o.getNodeById(e),l=o.getNodeById(t),d=o.getCommonContainer(e,t),c=r.getRelativePosition(d),p=l.getRelativePosition(d);s.setCoordinateSpace(d);const u=r.getBounds(),h=l.getBounds(),m=Math.round(c.x+u.w/2),g=Math.round(p.x+h.w/2),{y:y,x:f}=this._getHorizontalOffsets(r.getData().type),{y:b,x:v}=this._getHorizontalOffsets(l.getData().type),j={x:this._getRightX(c,u,s.getStartConnectorOffset())-f,y:this._getRightY(c,u)-y};let A;m===g?(A={x:this._getRightX(p,h,s.getEndConnectorOffset())-v,y:this._getRightY(p,h)-b},n=o.isLocaleR2L()?"start":"end"):(A={x:this._getLeftX(p,s.getEndConnectorOffset())+v,y:this._getLeftY(p,h)-b},n=o.isLocaleR2L()?"end":"start");const C=o.isLocaleR2L(),E=!!a||this._rightPathTurnEarlier(e,t,o),T={x:a?(j.x+A.x)/2:E?j.x+this._getHorizontalTurnOffset(r,C):A.x-this._getComplementaryHorizontalTurnOffset(l,C),y:j.y},_={x:a?(j.x+A.x)/2:E?j.x+this._getHorizontalTurnOffset(r,C):A.x-this._getComplementaryHorizontalTurnOffset(l,C),y:A.y};return i.push(j),i.push(T),i.push(_),i.push(A),n}_rightPathTurnEarlier(e,t,i){var o,s,a,n;const r=i.getNodeById(e),l=i.getNodeById(t),d=null===(o=r.getData().position)||void 0===o?void 0:o.col,c=null===(s=r.getData().position)||void 0===s?void 0:s.row,p=null===(a=l.getData().position)||void 0===a?void 0:a.col,u=null===(n=l.getData().position)||void 0===n?void 0:n.row;if(isNaN(d)||isNaN(p)||isNaN(c)||isNaN(u))return!0;let h=0,m=0;if(p-d>=2)for(let e=d+1;e<p;e++)this._hasNodeAt(e,c,i)&&h++,this._hasNodeAt(e,u,i)&&m++;return m<=h}_leftPathTurnEarlier(e,t,i){var o,s,a,n;const r=i.getNodeById(e),l=i.getNodeById(t),d=null===(o=r.getData().position)||void 0===o?void 0:o.col,c=null===(s=r.getData().position)||void 0===s?void 0:s.row,p=null===(a=l.getData().position)||void 0===a?void 0:a.col,u=null===(n=l.getData().position)||void 0===n?void 0:n.row;if(isNaN(d)||isNaN(p)||isNaN(c)||isNaN(u))return!0;let h=0,m=0;if(d-p>=2)for(let e=p+1;e<d;e++)this._hasNodeAt(e,c,i)&&h++,this._hasNodeAt(e,u,i)&&m++;return m<=h}_topPathTurnEarlier(e,t,i){var o,s,a,n;const r=i.getNodeById(e),l=i.getNodeById(t),d=null===(o=r.getData().position)||void 0===o?void 0:o.col,c=null===(s=r.getData().position)||void 0===s?void 0:s.row,p=null===(a=l.getData().position)||void 0===a?void 0:a.col,u=null===(n=l.getData().position)||void 0===n?void 0:n.row;if(isNaN(d)||isNaN(p)||isNaN(c)||isNaN(u))return!0;let h=0,m=0;if(c-u>=2)for(let e=u+1;e<c;e++)this._hasNodeAt(d,e,i)&&h++,this._hasNodeAt(p,2,i)&&m++;return m<=h}_bottomPathTurnEarlier(e,t,i){var o,s,a,n;const r=i.getNodeById(e),l=i.getNodeById(t),d=null===(o=r.getData().position)||void 0===o?void 0:o.col,c=null===(s=r.getData().position)||void 0===s?void 0:s.row,p=null===(a=l.getData().position)||void 0===a?void 0:a.col,u=null===(n=l.getData().position)||void 0===n?void 0:n.row;if(isNaN(d)||isNaN(p)||isNaN(c)||isNaN(u))return!0;let h=0,m=0;if(u-c>=2)for(let e=c+1;e<u;e++)this._hasNodeAt(d,e,i)&&h++,this._hasNodeAt(p,2,i)&&m++;return m<=h}_createLink(e,t,i,o){const s=[],a=t.getStartId(),n=t.getEndId();let r;r=t&&t.isPromoted()&&Array.isArray(t.getData())&&t._data.length>0?t.getData()[0].startEdge:t._data.startEdge,r||(r="end");const l=this._isStraightLine(r,a,n,e);"top"===r?this._getPath4TopSourceEdge(a,n,s,e,t,l):"bottom"===r?this._getPath4BottomSourceEdge(a,n,s,e,t,l):"start"===r&&!e.isLocaleR2L()||"start"!==r&&e.isLocaleR2L()?this._getPath4LeftSourceEdge(a,n,s,e,t,l):this._getPath4RightSourceEdge(a,n,s,e,t,l);let d=2;const c=i.get(a)[r],p=i.get(n)[this._getEndEdge(r,a,n,e)];c<2&&p<2||c>=2&&p>=2?d=1:c<2&&p>=2&&(d=0),t.setPoints(this._createOrthogonalLinkPath2(s,d,l,o,t._id));const u=t.getLabelBounds();if(u){const e=s[0].x,i=s[0].y-u.h;t.setLabelPosition({x:e,y:i})}}_calculateLinkCountMap(e,t,i){const o=t.getStartId(),s=t.getEndId();if(t&&t.isPromoted())return;let a=t._data.startEdge;a||(a="end"),this._updateLinkCountMap(a,o,i),this._updateLinkCountMap(this._getEndEdge(a,o,s,e),s,i)}_createOrthogonalLinkPath2(e,t,i,o,s){const a=[];if(!Array.isArray(e)||e.length<2)return a;s&&!s.name&&(this._saveAddIconPosition(e,a,t,i,o,s),this._saveMaxLabelWidth(e,a,t,i,o,s));for(let t=0;t<e.length;t++)this._computeOrthogonalLinkPath(t,e,a);return a}_saveAddIconPosition(e,t,i,o,s,a){4===e.length?s[a]=o?Object.assign(Object.assign({},s[a]),{x1:(e[0].x+e[3].x)/2,y1:(e[0].y+e[3].y)/2}):Object.assign(Object.assign({},s[a]),{x1:(e[i].x+e[i+1].x)/2,y1:(e[i].y+e[i+1].y)/2}):5===e.length&&(s[a]=Object.assign(Object.assign({},s[a]),{x1:(e[2].x+e[3].x)/2,y1:(e[2].y+e[3].y)/2}))}_saveMaxLabelWidth(e,t,i,o,s,a){if(4===e.length)if(o){const t=Math.abs(e[3].x-e[0].x);s[a]=Object.assign(Object.assign({},s[a]),{x2:0===t?200:t-28,y2:Math.abs(e[3].y-e[0].y)})}else{const t=Math.abs(e[i].x-e[i+1].x);s[a]=Object.assign(Object.assign({},s[a]),{x2:0===t?200:t-28,y2:Math.abs(e[i].y-e[i+1].y)})}else if(5===e.length){const t=Math.abs(e[4].x-e[0].x);s[a]=Object.assign(Object.assign({},s[a]),{x2:0===t?200:t-28,y2:Math.abs(e[4].y-e[0].y)})}}_computeOrthogonalLinkPath(e,t,i){0===e?(i.push("M"),i.push(t[e].x),i.push(t[e].y)):e===t.length-1?(i.push("L"),i.push(t[e].x),i.push(t[e].y)):this._computeTurnPointValues(e,t,i)}_computeTurnPointValues(e,t,i){const o=t[e].x>t[e-1].x?t[e].x-15:t[e].x+15,s=t[e].x===t[e-1].x?t[e].x:o,a=t[e].y>t[e-1].y?t[e].y-15:t[e].y+15,n=t[e].y===t[e-1].y?t[e].y:a,r=t[e].x>t[e+1].x?t[e].x-15:t[e].x+15,l=t[e].x===t[e+1].x?t[e].x:r,d=t[e].y>t[e+1].y?t[e].y-15:t[e].y+15,c=t[e].y===t[e+1].y?t[e].y:d;i.push("L"),i.push(s),i.push(n),i.push("C"),i.push(s),i.push(n),i.push(t[e].x),i.push(t[e].y),i.push(l),i.push(c)}_createDirectLinkPath(e,t,i,o){const s=["M",e,t];return s.push("L"),s.push(i),s.push(o),s}_createPolylinkPath(e){if(!Array.isArray(e)||e.length<2)return[];const t=["M",e[0].x,e[0].y];for(let i=1;i<e.length;i++)t.push("L"),t.push(e[i].x),t.push(e[i].y);return t}_setAlignment(e,t,i,o){if(e){const o=e.getCurrentViewport();if(o&&t===this.currentAlignment){const t=[];for(let o=0;o<i.length;o++)t.push(e.getNodeById(i[o]));const s={minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:-Number.MAX_SAFE_INTEGER,maxY:-Number.MAX_SAFE_INTEGER};for(let e=0;e<t.length;e++)s.minX>t[e].getPosition().x&&(s.minX=t[e].getPosition().x),s.maxX<t[e].getPosition().x+t[e].getContentBounds().w&&(s.maxX=t[e].getPosition().x+t[e].getContentBounds().w),s.minY>t[e].getPosition().y&&(s.minY=t[e].getPosition().y),s.maxY<t[e].getPosition().y+t[e].getContentBounds().h&&(s.maxY=t[e].getPosition().y+t[e].getContentBounds().h);return s.maxX-s.minX<=o.w&&s.maxY-s.minY<=o.h?(s.maxX>o.x+o.w?o.x+=s.maxX-(o.x+o.w):s.minX<o.x&&(o.x=s.minX),s.maxY>o.y+o.h?o.y+=s.maxY-(o.y+o.h):s.minY<o.y&&(o.y=s.minY)):(s.maxX-s.minX)/o.w>(s.maxY-s.minY)/o.h?(o.w=s.maxX-s.minX,o.h=o.h*((s.maxX-s.minX)/o.w),s.minX<o.x&&(o.x=s.minX),s.minY<o.y&&(o.y=s.minY)):(o.h=s.maxY-s.minY,o.w=o.w*((s.maxY-s.minY)/o.h),s.minX<o.x&&(o.x=s.minX),s.minY<o.y&&(o.y=s.minY)),e.setViewport(o),void(i.length=0)}this.currentAlignment=t;const s=this._getDiagramBounds(e),a=e.getComponentSize(),n=20,r=30;let l=a;l=e.isLocaleR2L()?this._setAlignmentFromRTL(l,s,n,r,t,a):this._setAlignmentFromLTR(l,s,n,r,t,a),e.setViewport(l)}}_setAlignmentFromRTL(e,t,i,o,s,a){return"topStart"===s?(e.x=t.w-a.w+i,e.y=t.top-o):"center"===s?(e.x=(t.w-a.w+i)/2,e.y=(t.h-a.h-o)/2):"centerStart"===s&&(e.x=t.w-a.w+i,e.y=(t.h-a.h-o)/2),e}_setAlignmentFromLTR(e,t,i,o,s,a){return"topStart"===s?(e.x=t.left-i,e.y=t.top-o):"center"===s?(e.x=(t.w-a.w)/2,e.y=(t.h-a.h)/2):"centerStart"===s&&(e.x=t.left-i,e.y=(t.h-a.h)/2),e}_getVerticalTurnOffset(e,t){if(!e)return this.PADDING*this.TURN_PERCENTAGE;const i=e.getData();if(!i)return this.PADDING*this.TURN_PERCENTAGE;const o=this._getCalculatedLayoutContext(e.getId());if(!o)return this.PADDING*this.TURN_PERCENTAGE;const s=e.getBounds();if(!s)return this.PADDING*this.TURN_PERCENTAGE;if("top"!==t&&"bottom"!==t)return this.PADDING*this.TURN_PERCENTAGE;const a=i.position.row-o.minRow;return a<0||a>=o.numRows?this.PADDING*this.TURN_PERCENTAGE:"top"===t?(o.rowHeights[a]-s.h)*this.TURN_PERCENTAGE+this._getVerticalOffsets(i.type).top:(o.rowHeights[a]-s.h)*this.TURN_PERCENTAGE+this._getVerticalOffsets(i.type).bottom}_getComplementaryVerticalTurnOffset(e,t){const i=1-this.TURN_PERCENTAGE;if(!e)return this.PADDING*i;const o=e.getData();if(!o)return this.PADDING*i;const s=this._getCalculatedLayoutContext(e.getId());if(!s)return this.PADDING*i;const a=e.getBounds();if(!a)return this.PADDING*i;if("top"!==t&&"bottom"!==t)return this.PADDING*i;const n=o.position.row-s.minRow;return n<0||n>=s.numRows?this.PADDING*i:"top"===t?(s.rowHeights[n]-a.h)*i+this._getVerticalOffsets(o.type).top:(s.rowHeights[n]-a.h)*i+this._getVerticalOffsets(o.type).bottom}_getHorizontalTurnOffset(e,t){if(!e)return this.PADDING*this.TURN_PERCENTAGE;const i=e.getData();if(!i)return this.PADDING*this.TURN_PERCENTAGE;const o=this._getCalculatedLayoutContext(e.getId());if(!o)return this.PADDING*this.TURN_PERCENTAGE;const s=e.getBounds();if(!s)return this.PADDING*this.TURN_PERCENTAGE;const a=t?o.maxCol-i.position.col:i.position.col-o.minCol;return a<0||a>=o.numColumns?this.PADDING*this.TURN_PERCENTAGE:(o.columnWidths[a]-s.w)*this.TURN_PERCENTAGE+this._getHorizontalOffsets(i.type).x}_getComplementaryHorizontalTurnOffset(e,t){const i=1-this.TURN_PERCENTAGE;if(!e)return this.PADDING*i;const o=e.getData();if(!o)return this.PADDING*i;const s=this._getCalculatedLayoutContext(e.getId());if(!s)return this.PADDING*i;const a=e.getBounds();if(!a)return this.PADDING*i;const n=t?s.maxCol-o.position.col:o.position.col-s.minCol;return n<0||n>=s.numColumns?this.PADDING*i:(s.columnWidths[n]-a.w)*i+this._getHorizontalOffsets(o.type).x}}t.DiagramBuilderWorkflowStrategy=a})),define("oj-sp/diagram-builder/components/add-menu/add-menu",["require","exports","preact","preact/compat"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=(0,o.memo)(e=>{var t;return(0,i.h)("div",{id:e.addMenuId,"data-oj-context":!0},null===(t=e.addMenuTemplate)||void 0===t?void 0:t.call(e,e.addMenuContext))});t.default=s})),define("css!oj-sp/diagram-builder/diagram-builder",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/diagram-builder/diagram-builder",["require","exports","ojs/ojvcomponent","preact","ojs/ojarraydataprovider","ojs/ojarraytreedataprovider","ojs/ojcontext","oj-sp/common-util/common-util","ojs/ojtranslation","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","./utils/diagram-builder-text-utils","./utils/diagram-builder-workflow-layout-strategy","./components/add-menu/add-menu","oj-sp/common-util/common-util","css!./diagram-builder","ojs/ojdiagram","ojs/ojarraydataprovider","ojs/ojmenu","ojs/ojoption"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramBuilder=void 0;let m=class extends o.Component{constructor(e){var t;super(e),this.SVG_NAMESPACE="http://www.w3.org/2000/svg",this.SVG_STROKE_WIDTH="stroke-width",this.SVG_MARKER_END="marker-end",this.SVG_VECTOR_EFFECT="vector-effect",this.diagramReference=(0,o.createRef)(),this.tooltipRenderer={renderer:()=>({preventDefault:!0})},this.componentWillUnmount=()=>{this.props.data&&(this.props.data.removeEventListener("mutate",this.dataProviderEvent),this.props.data.removeEventListener("refresh",this.dataProviderEvent))},this.dataProviderEvent=async e=>{if(this.addedNodeIds.length=0,e&&e.detail){let t=[];if(e.detail.add&&(t=e.detail.add.data),e.detail.update){const i=e.detail.update.data;for(let e=0;e<i.length;e++)"container"===i[e].nodeState&&Array.isArray(i[e].nodes)&&i[e].nodes.length>0&&t.push(i[e])}if(t)for(let e=0;e<t.length;e++)this.addedNodeIds.push(t[e].id)}await this.processNodesLinks(e)},this.renderLink=e=>(0,o.h)("oj-diagram-link",{startNode:e.data.startNode,endNode:e.data.endNode,shortDesc:e.data.shortDesc,color:"rgb(117, 110, 105)",width:2,startConnectorType:"none",endConnectorType:"arrowOpen"}),this.linkStateRenderer=e=>{var t;let i=e.rootElement;if(i){const o=null===(t=null==i?void 0:i.childNodes)||void 0===t?void 0:t[0];o&&this.updateLinkPath(e,o,i)}else i=document.createElementNS(this.SVG_NAMESPACE,"g"),this.addLinkPath(i,this.getPathStrokeColor(e),"2",this.getPathFromPoints(e.points),e);return{insert:i}},this.updateLinkPath=async(e,t,i)=>{var o,s,a;if(!e)return;t.setAttribute(this.SVG_STROKE_WIDTH,"2"),t.setAttribute(this.SVG_VECTOR_EFFECT,"none"),t.setAttribute("stroke",this.getPathStrokeColor(e)||"rgb(117, 110, 105)"),t.setAttribute(this.SVG_VECTOR_EFFECT,"non-scaling-stroke");const n=e.state.hovered||e.state.selected||e.state.focused;if("promotedLink"===e.type)t.setAttribute("class","oj-sp-diagram-builder-stroke-dasharray");else{t.setAttribute(this.SVG_MARKER_END,"url("+(document.URL+(n?"#hover-arrow":"#arrow")+this.uid));const a=await this.getTargetNode(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.endNode);if(!this.props.readonly&&"on"===(null===(s=this.props.editOptions)||void 0===s?void 0:s.addNodeToPath)&&"add"!==(null==a?void 0:a.type)){const t=i.getElementsByTagName("circle");this.createAddIcon(e,i,t)}}const r="promotedLink"===e.type?"":i.querySelector("#"+this.uid+"-labelRect-"+e.id);r&&(n&&(this.props.readonly||"off"===(null===(a=this.props.editOptions)||void 0===a?void 0:a.addNodeToPath)||void 0===this.props.readonly||void 0===this.props.editOptions)?r.setAttribute("fill","black"):r.setAttribute("fill","rgb(var(--oj-palette-neutral-rgb-100))"))},this.getTargetNode=async e=>{var t,i,o,s;const a=new Set;a.add(e);const n=await(null===(i=null===(t=null==this?void 0:this.props)||void 0===t?void 0:t.data)||void 0===i?void 0:i.fetchByKeys({keys:a}));let r=void 0;return(null===(o=null==n?void 0:n.results)||void 0===o?void 0:o.has(e))&&(r=null===(s=n.results.get(e))||void 0===s?void 0:s.data),r},this.createAddIcon=(e,t,i)=>{var o;if(e.state.hovered||e.state.focused||e.state.selected){if(!i.length){const i=document.createElementNS(this.SVG_NAMESPACE,"circle"),s=document.createElementNS(this.SVG_NAMESPACE,"use"),a=document.createElementNS(this.SVG_NAMESPACE,"rect"),n=null===(o=this.additionalDataContext)||void 0===o?void 0:o[e.id];i.setAttribute("id",this.uid+"-addicon-"+e.id),i.setAttribute("cx",parseInt(null==n?void 0:n.x1,10).toString()),i.setAttribute("cy",parseInt(null==n?void 0:n.y1,10).toString()),i.setAttribute("r","12"),i.setAttribute("fill","black"),i.setAttribute("tabindex","0"),i.setAttribute("role","button"),this.hasAddMenu()&&i.setAttribute("aria-haspopup","menu"),i.setAttribute("aria-label",this.res.addNodeBetween),t.appendChild(i);const r=document.createElementNS(this.SVG_NAMESPACE,"text"),l=document.createTextNode("+");r.setAttribute("class","oj-sp-diagram-builder-svg-plus-text"),r.setAttribute("font-size","30px"),h.getDirectionality()===h.DIRECTIONALITY.RIGHT_TO_LEFT?r.setAttribute("x",(parseInt(null==n?void 0:n.x1,10)+9).toString()):r.setAttribute("x",(parseInt(null==n?void 0:n.x1,10)-9).toString()),r.setAttribute("y",(parseInt(null==n?void 0:n.y1,10)+11).toString()),r.setAttribute("id",this.uid+"-addIconText-"+e.id),r.appendChild(l),a.setAttribute("id",this.uid+"-rect-"+e.id),a.setAttribute("x",(parseInt(null==n?void 0:n.x1,10)-16).toString()),a.setAttribute("y",(parseInt(null==n?void 0:n.y1,10)-16).toString()),a.setAttribute("width","32"),a.setAttribute("height","32"),a.setAttribute("fill","transparent"),a.setAttribute("class","oj-sp-diagram-builder-clickable-rect"),s.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+e.id),s.setAttribute("id",this.uid+"-addIconUseTag-"+e.id),this.removePathLabel(e,t),t.appendChild(s),t.appendChild(r),t.appendChild(a),a.addEventListener("click",this.addNodeOnClick.bind(this,e),!1),i.addEventListener("keypress",this.addNodeOnKeyPress.bind(this,e),!1)}}else this.removeAddIcon(e,t)},this.addLabelToPathSVG=(e,t)=>{var i;const o=null===(i=this.additionalDataContext)||void 0===i?void 0:i[e.id],s=null==o?void 0:o.x2,a=e.itemData.label,n=this.linkLabelTextUtils.getTextMetrics(a,s-8,e.id),r=s>n.textWidth+8?(s-(n.textWidth+8))/2+(parseInt(null==o?void 0:o.x1,10)-s/2):parseInt(null==o?void 0:o.x1,10)-s/2,l=r.toString(),d=document.createElementNS(this.SVG_NAMESPACE,"use"),c=document.createElementNS(this.SVG_NAMESPACE,"rect"),p=document.createElementNS(this.SVG_NAMESPACE,"rect"),u=document.createElementNS(this.SVG_NAMESPACE,"text"),m=document.createTextNode(n.resultText);u.setAttribute("class","oj-sp-diagram-builder-svg-label-text"),u.setAttribute("font-family","Oracle Sans Cd"),h.getDirectionality()===h.DIRECTIONALITY.RIGHT_TO_LEFT?u.setAttribute("x",(r+(n.textWidth+4)).toString()):u.setAttribute("x",(r+4).toString()),u.setAttribute("y",(parseInt(null==o?void 0:o.y1,10)+4).toString()),u.setAttribute("id",this.uid+"-labelText-"+e.id),u.appendChild(m),c.setAttribute("id",this.uid+"-labelRect-"+e.id),c.setAttribute("x",l),c.setAttribute("y",(parseInt(null==o?void 0:o.y1,10)-8).toString()),c.setAttribute("width",n.textWidth+8),c.setAttribute("height","16"),c.setAttribute("fill","rgb(var(--oj-palette-neutral-rgb-100))"),c.setAttribute("rx","4"),p.setAttribute("id",this.uid+"-labelRectInvisible-"+e.id),p.setAttribute("x",l),p.setAttribute("y",(parseInt(null==o?void 0:o.y1,10)-8).toString()),p.setAttribute("width",n.textWidth+8),p.setAttribute("height","20"),p.setAttribute("fill","transparent"),p.setAttribute("rx","4");const g=t.querySelector("#"+this.uid+"-titleForLabel-"+e.id);if(n.isTruncated&&!g){const i=document.createElementNS(this.SVG_NAMESPACE,"title");i.textContent=a,i.setAttribute("id",this.uid+"-titleForLabel-"+e.id),t.appendChild(i)}d.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+e.id),d.setAttribute("id",this.uid+"-labelUseTag-"+e.id);const y=t.querySelector("#"+this.uid+"-labelUseTag-"+e.id),f=t.querySelector("#"+this.uid+"-labelText-"+e.id),b=t.querySelector("#"+this.uid+"-labelRect-"+e.id);y||t.appendChild(d),f||t.appendChild(c),b||t.appendChild(u);t.querySelector("#"+this.uid+"-labelRectInvisible-"+e.id)||t.appendChild(p)},this.addLinkPath=(e,t,i,o,s)=>{const a=document.createElementNS(this.SVG_NAMESPACE,"path"),n=document.createElementNS(this.SVG_NAMESPACE,"path");a.setAttribute(this.SVG_STROKE_WIDTH,i),a.setAttribute("stroke",t||"rgb(117, 110, 105)"),a.setAttribute("d",o),a.setAttribute("fill","none"),n.setAttribute(this.SVG_STROKE_WIDTH,"14"),n.setAttribute("stroke","#000000"),n.setAttribute("d",o),n.setAttribute("fill","none"),n.setAttribute("stroke-opacity","0"),a.setAttribute(this.SVG_VECTOR_EFFECT,"non-scaling-stroke"),s&&s.type&&"promotedLink"!==s.type&&a.setAttribute(this.SVG_MARKER_END,"url("+(document.URL+"#arrow"+this.uid)),a.setAttribute("id",this.uid+"-path-"+s.id),s&&s.type&&"promotedLink"===s.type&&a.setAttribute("class","oj-sp-diagram-builder-stroke-dasharray"),e.appendChild(a),e.appendChild(n),s&&s.itemData&&s.itemData.label&&this.addLabelToPathSVG(s,e)},this.addNodeOnKeyPress=(e,t)=>{"Enter"!==t.code&&"Space"!==t.code||(t.stopPropagation(),t.preventDefault(),this.onAddNode(e,t))},this.addNodeOnClick=(e,t)=>{t.stopPropagation(),this.onAddNode(e,t)},this.getPathFromPoints=e=>4===e.length?"M "+e[0]+" "+e[1]+" L "+e[2]+" "+e[3]:e.join(" "),this.linkRenderer={renderer:this.linkStateRenderer,hoverRenderer:this.linkStateRenderer,focusRenderer:this.linkStateRenderer,selectionRenderer:this.linkStateRenderer},this.generateShortDesc=e=>this.nodeShortDesc(e.itemData,!1),this.nodeShortDesc=(e,t)=>{let i="";if(!e)return i;if(e.type&&"regular"!==e.type)switch(e.type){case"add":i=this.res.addNode;break;case"start":i=this.res.flowStart;break;case"end":i=this.res.flowEnd}else{let o=e.nodeTitle;o||"unconfigured"!==e.nodeState||(o=this.res.nodeUntitled);let s=e.nodeText;s||"unconfigured"!==e.nodeState||(s=this.res.nodeLabel),i=null!=o?o:"",o&&s&&!t&&(i+=" "),(t&&!o||!t)&&(i+=null!=s?s:"")}return e.paths&&!t&&(i+=" "+this.res.accHasPaths),i},this.renderJetNode=e=>{const t="add"===e.data.type?"off":"auto";return(0,o.h)("oj-diagram-node",{shortDesc:this.generateShortDesc,showDisclosure:"off",selectable:t})},this.onNodeExpand=e=>{var t,i;const o=this.props.expanded.add([e.id]);null===(i=(t=this.props).onExpandedChanged)||void 0===i||i.call(t,o)},this.onNodeCollapse=e=>{var t,i;const o=this.props.expanded.delete([e.id]);null===(i=(t=this.props).onExpandedChanged)||void 0===i||i.call(t,o)},this.handleExpandedChange=e=>{var t,i;"internal"===e.detail.updatedFrom&&(this.skipRender=!0,null===(i=(t=this.props).onExpandedChanged)||void 0===i||i.call(t,e.detail.value))},this.handleSelectionChange=e=>{var t,i;"internal"===e.detail.updatedFrom&&(this.skipRender=!0,null===(i=(t=this.props).onSelectionChanged)||void 0===i||i.call(t,e.detail.value))},this.hasAddMenu=()=>{var e;return(null===(e=this.props.addNodeMenuTemplate)||void 0===e?void 0:e.length)>0},this.onAddNode=async(e,t)=>{var i,o,s,a,r,l,d;if(this.addInProgress||"busy"===this.props.busyState||this.props.readonly)return;this.addInProgress=!0;const c=n.getContext(this.base).getBusyContext();this.busyResolve=c.addBusyState({description:"Diagram Builder opening add node menu"}),this.addMenuReference&&(null===(i=this.addMenuReference)||void 0===i||i.close(),await n.getContext(this.addMenuReference).getBusyContext().whenReady(),this.addMenuReference=void 0);const p={from:"link"===(null==e?void 0:e.type)?"path":null==e?void 0:e.type,fromId:null==e?void 0:e.id,edge:"node"===(null==e?void 0:e.type)?null===(o=null==t?void 0:t.detail)||void 0===o?void 0:o.edge:null===(s=null==e?void 0:e.itemData)||void 0===s?void 0:s.startEdge,sourceId:null===(a=null==e?void 0:e.itemData)||void 0===a?void 0:a.startNode,targetId:null===(r=null==e?void 0:e.itemData)||void 0===r?void 0:r.endNode};if(this.hasAddMenu()){this.setState({currentMenuContext:p});const i=document.querySelector("#"+this.uid+"_addMenuContainer");let o;await n.getContext(i).getBusyContext().whenReady(),o="node"===(null==e?void 0:e.type)?this.uid+"-node-"+e.id:this.uid+"-addicon-"+e.id,this.launchAddMenu(t?t.target:o,null==e?void 0:e.type),this.addMenuReference&&await n.getContext(this.addMenuReference).getBusyContext().whenReady()}else null===(d=(l=this.props).onSpAddNode)||void 0===d||d.call(l,p);this.busyResolve(),this.addInProgress=!1},this.onAddPathStart=async(e,t)=>{var i;this.addInProgress||"busy"===this.props.busyState||this.props.readonly||(this.addPathContext.startNodeId?this.resetAddPathContext():(this.addPathContext.startNodeId=e.id,this.addPathContext.pathStartEdge=null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.edge))},this.onAddPathEnd=async(e,t)=>{var i,o;this.addInProgress||"busy"===this.props.busyState||this.props.readonly||(this.addPathContext.endNodeId=e.id,this.addPathContext.startNodeId&&this.addPathContext.pathStartEdge&&this.addPathContext.endNodeId&&this.addPathContext.startNodeId!==this.addPathContext.endNodeId&&(null===(o=(i=this.props).onSpAddPath)||void 0===o||o.call(i,this.addPathContext)),this.resetAddPathContext())},this.resetAddPathContext=()=>{this.addPathContext={startNodeId:"",pathStartEdge:"end",endNodeId:""}},this.onAddPath=async(e,t)=>{var i,o;if(this.addInProgress||"busy"===this.props.busyState||this.props.readonly)return;this.addInProgress=!0;const s=n.getContext(this.base).getBusyContext();this.busyResolve=s.addBusyState({description:"Diagram Builder opening add node menu"});const a=JSON.parse(t.dataTransfer.getData("text/ports")),r={startNodeId:null==a?void 0:a.dataContext.id,pathStartEdge:this.getStartEdge(t.dataTransfer.types),endNodeId:e.dataContext.id};null===(o=(i=this.props).onSpAddPath)||void 0===o||o.call(i,r),this.busyResolve(),this.addInProgress=!1},this.cacheLayoutFunction=()=>(this.oldAlignment===this.props.alignment&&this.oldNodeSize===this.props.nodeSize||this.generateLayoutFunction(),this.oldLayoutFunction),this.cacheNodeRenderFunction=()=>(this.oldNodeSize===this.props.nodeSize&&this.oldNodeCount===this.nodeCount&&this.oldReadonly===this.props.readonly||this.generateNodeRenderFunction(),this.oldNodeRenderFunction),this.linkFeedbackStyle=()=>({svgStyle:{"stroke-width":"2"},svgClassName:"oj-sp-diagram-builder-link-feedback"}),this.cacheDnD=()=>{var e;const t=null===(e=this.props.editOptions)||void 0===e?void 0:e.addPath;return this.oldAddPath!==t&&(this.dndCache="on"===t?{drag:{ports:{dataTypes:["text/ports"],selector:".oj-sp-diagram-node-add-icon-drag-port",linkStyle:this.linkFeedbackStyle,dragStart:this.onDragStart}},drop:{ports:{selector:".oj-sp-diagram-link-create-end",drop:this.onDrop,dragEnter:this.verifyDrag,dragOver:this.verifyDrag}}}:{drag:{ports:{}},drop:{ports:{}}},this.oldAddPath=t),this.dndCache},this.onDragStart=(e,t)=>{const i=t.ports.portElement;let o="end";i&&(i.classList.contains("oj-sp-diagram-node-add-node-click-zone-top")?o="top":i.classList.contains("oj-sp-diagram-node-add-node-click-zone-bottom")?o="bottom":i.classList.contains("oj-sp-diagram-node-add-node-click-zone-start")&&(o="start")),e.dataTransfer.setData("nodeid/"+t.ports.dataContext.id,t.ports.dataContext.id),e.dataTransfer.setData("startEdge/"+o,o)},this.verifyDrag=(e,t)=>{const i="nodeid/"+t.dataContext.id.toLowerCase();for(let t=0;t<e.dataTransfer.types.length;t++)if(e.dataTransfer.types[t]===i)return;e.preventDefault()},this.onDrop=(e,t)=>{e.dataTransfer.getData("text/ports")&&(e.stopPropagation(),this.onAddPath(t,e))},this.getStartEdge=e=>{if(e&&Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t].split("/");if(2===i.length&&"startedge"===i[0])return"start"===i[1]?"start":"top"===i[1]?"top":"bottom"===i[1]?"bottom":"end"}return"end"},this.diagramKeyDownHandler=async e=>{const{key:t}=e;if("Enter"===t&&this.addPathContext.startNodeId){const t=e.target,i=t.getAttribute("aria-activedescendant"),o=t.querySelector("#"+i),s=t.getContextByNode(o);if("oj-diagram-node"===(null==s?void 0:s.subId)){const t=o.querySelector("foreignObject").children[0],i=t.id.slice(t.id.indexOf("-node-")+6);if("oj-sp-diagram-node"===t.tagName.toLowerCase())this.onAddPathEnd({id:i},e);else{"add"!==(await this.getTargetNode(i)).type&&this.onAddPathEnd({id:i},e)}}}},this.uid=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.res=Object.assign({},d),this.skipRender=!1,this.nodeCount=0,this.oldNodeCount=0,this.addMenuReference=void 0,this.addInProgress=!1,this.needFocus=!1,this.hadFocus=!1,this.initialLoad=!0,this.additionalDataContext={},this.addPathContext={startNodeId:"",pathStartEdge:"end",endNodeId:""},this.oldAddPath="off",this.addedNodeIds=[],this.layout=new p.DiagramBuilderWorkflowStrategy(this.uid),this.generateLayoutFunction(),this.generateNodeRenderFunction();this.linkLabelTextUtils=new c.DiagramBuilderTextUtils({fontStyle:"normal",fontVariant:"normal",fontWeight:"bold",fontFamily:"Oracle Sans Cd",fontSize:"0.6875rem"}),this.state={nodeProvider:void 0,linkProvider:void 0,currentMenuContext:void 0}}shouldComponentUpdate(){return!this.skipRender||(this.skipRender=!1,!1)}async componentDidMount(){this.props.data&&(this.props.data.addEventListener("mutate",this.dataProviderEvent),this.props.data.addEventListener("refresh",this.dataProviderEvent)),await this.processNodesLinks(void 0)}componentDidUpdate(e,t){var i;this.hadFocus&&this.needFocus&&!this.initialLoad&&(null===(i=this.diagramReference.current)||void 0===i||i.focus()),this.initialLoad=!1,this.needFocus=!1}async processNodesLinks(e){var t;this.additionalDataContext={};let i=!1,o=void 0,n=void 0,l=[];this.props.data&&(l=await(0,r.dataProviderToArray)(this.props.data),this.nodeCount=l.length);let d=[];const c=await this.getLinksRecursively(d,l);d=this.sortLinks(d,l),o=new s(d,{keyAttributes:"id"}),(null===(t=this.props.data)||void 0===t?void 0:t.getChildDataProvider)&&(i=!0),n=i||c?new a(l,{keyAttributes:"id",childrenAttribute:"nodes"}):new s(l,{keyAttributes:"id"}),this.setState({nodeProvider:n,linkProvider:o}),this.needFocus=!0}async getLinksRecursively(e,t){if(!t||!t.length)return!1;let i=!1;for(const o of t){const t=o,s=t.paths;if(s&&Array.isArray(s))for(const i of s)await this.processPath(i,t,e);Array.isArray(t.nodes)&&"container"===t.nodeState&&(i=!0,await this.getLinksRecursively(e,t.nodes))}return i}sortLinks(e,t){if(!Array.isArray(e))return[];const i=[],o=[];for(const s of e)this.isStraightLineLink(s,t)?i.push(JSON.parse(JSON.stringify(s))):o.push(JSON.parse(JSON.stringify(s)));return o.concat(i)}isStraightLineLink(e,t){if(!e)return!1;const i=this.getNodeById(e.startNode,t),o=this.getNodeById(e.endNode,t);return!!(i&&i.position&&o&&o.position)&&("top"===e.startEdge&&i.position.col===o.position.col&&i.position.row>o.position.row||"bottom"===e.startEdge&&i.position.col===o.position.col&&i.position.row<o.position.row||"start"===e.startEdge&&i.position.row===o.position.row&&i.position.col>o.position.col||("end"===e.startEdge||!e.startEdge)&&i.position.row===o.position.row&&i.position.col<o.position.col)}getNodeById(e,t){for(const i of t)if(i.id===e)return i;return null}async processPath(e,t,i){if(e){const o=await this.getTargetNode(e.targetId),s=this.nodeShortDesc(t,!0),a=this.nodeShortDesc(o,!0),n=l.applyParameters(this.res.pathFromNodeToNode,{pathStyle:"",pathLabel:e.label?e.label:"",nodeTitle1:s,nodeTitle2:a});if(o&&"add"===o.type){let t=void 0;t=e.label?l.applyParameters(this.res.addNodeConnectedToNodePath,{nodeTitle:s,pathTitle:e.label}):l.applyParameters(this.res.addNodeConnectedToNode,{nodeTitle:s}),this.additionalDataContext["n"+o.id]={label:t}}i.push({id:e.id,startNode:t.id,endNode:e.targetId,startEdge:e.edge,shortDesc:n,label:e.label})}}getPathStrokeColor(e){return e.state.hovered||e.state.selected||e.state.focused?"rgb(var(--oj-palette-neutral-rgb-190))":e.data.color}removeAddIcon(e,t){const i=t.querySelector("#"+this.uid+"-addicon-"+e.id),o=t.querySelector("#"+this.uid+"-addIconUseTag-"+e.id),s=t.querySelector("#"+this.uid+"-addIconText-"+e.id),a=t.querySelector("#"+this.uid+"-rect-"+e.id);i&&t.removeChild(i),o&&t.removeChild(o),s&&t.removeChild(s),a&&t.removeChild(a),e&&e.itemData&&e.itemData.label&&this.addLabelToPathSVG(e,t)}removePathLabel(e,t){const i=t.querySelector("#"+this.uid+"-labelUseTag-"+e.id),o=t.querySelector("#"+this.uid+"-labelText-"+e.id),s=t.querySelector("#"+this.uid+"-labelRect-"+e.id);i&&t.removeChild(i),o&&t.removeChild(o),s&&t.removeChild(s)}launchAddMenu(e,t){var i,o;if((null===(i=this.props.addNodeMenuTemplate)||void 0===i?void 0:i.length)>0){const t=null===(o=this.base)||void 0===o?void 0:o.querySelector("#"+this.uid+"_addMenuContainer"),i=null==t?void 0:t.querySelector("oj-menu");if(this.addMenuReference=i,i){const t={initialFocus:"firstItem",launcher:e,position:{at:{horizontal:"end",vertical:"center"},my:{horizontal:"start",vertical:"center"},offset:{x:4,y:0}}};i.open(null,t)}}}generateLayoutFunction(){const e={alignment:this.props.alignment,uid:this.uid,addedNodeIds:this.addedNodeIds};this.oldLayoutFunction=t=>this.layout.renderLayout(e,t,this.additionalDataContext)}generateNodeRenderFunction(){const e={onExpand:this.onNodeExpand,onCollapse:this.onNodeCollapse,onAdd:this.onAddNode,onAddPathStart:this.onAddPathStart,nodeSize:this.props.nodeSize,nodeCount:this.nodeCount,readonly:this.props.readonly,hasAddMenu:this.hasAddMenu()};this.oldNodeRenderFunction=t=>this.layout.renderNode(t,this.props.nodeTemplate,e,this.additionalDataContext)}generateDom(){return(0,o.h)("div",{"data-oj-context":!0,class:"oj-sp-diagram-builder-full-height"},(0,o.h)("div",{class:"oj-sp-diagram-builder-link-header-container"},(0,o.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"0",height:"0"},(0,o.h)("defs",null,(0,o.h)("marker",{id:"arrow"+this.uid,markerUnits:"userSpaceOnUse",viewBox:"0 0 12 12",refX:"6",refY:"6",markerWidth:"12",markerHeight:"12",orient:"auto"},(0,o.h)("polyline",{points:"-4.585786437626905 -6 1.4142135623730951 0 -4.585786437626905 6",class:"marker-arrow","stroke-width":"2",transform:"matrix(1,0,0,1,6,6)",fill:"none",stroke:"rgb(117, 110, 105)"})),(0,o.h)("marker",{id:"hover-arrow"+this.uid,markerUnits:"userSpaceOnUse",viewBox:"0 0 12 12",refX:"6",refY:"6",markerWidth:"12",markerHeight:"12",orient:"auto"},(0,o.h)("polyline",{points:"-4.585786437626905 -6 1.4142135623730951 0 -4.585786437626905 6",class:"marker-arrow","stroke-width":"2",transform:"matrix(1,0,0,1,6,6)",fill:"none",stroke:"rgb(var(--oj-palette-neutral-rgb-190))"}))))),(0,o.h)("oj-diagram",{id:this.uid+"_diagram",animationOnDataChange:"auto",animationOnDisplay:"none",nodeData:this.state.nodeProvider,linkData:this.state.linkProvider,layout:this.cacheLayoutFunction(),maxZoom:1,promotedLinkBehavior:"full",tooltip:this.tooltipRenderer,expanded:this.props.expanded,onexpandedChanged:this.handleExpandedChange,selection:this.props.selection,selectionMode:this.props.selectionMode,onselectionChanged:this.handleSelectionChange,zooming:"auto",panning:"auto",class:"oj-sp-diagram-builder-canvas oj-sp-diagram-builder-full-height",linkContent:this.linkRenderer,dnd:this.cacheDnD(),ref:this.diagramReference,onKeyDown:this.diagramKeyDownHandler},(0,o.h)("template",{slot:"linkTemplate",render:this.renderLink}),(0,o.h)("template",{slot:"nodeContentTemplate",render:this.cacheNodeRenderFunction()}),(0,o.h)("template",{slot:"nodeTemplate",render:this.renderJetNode})),(0,o.h)(u.default,{addMenuId:this.uid+"_addMenuContainer",addMenuTemplate:this.props.addNodeMenuTemplate,addMenuContext:this.state.currentMenuContext}))}render(){var e,t;if(!this.state.nodeProvider||!this.state.linkProvider)return(0,o.h)("div",null);(null===(e=this.base)||void 0===e?void 0:e.contains(document.activeElement))||(null===(t=this.addMenuReference)||void 0===t?void 0:t.contains(document.activeElement))?this.hadFocus=!0:this.hadFocus=!1;const i=this.generateDom();return this.oldNodeSize=this.props.nodeSize,this.oldNodeCount=this.nodeCount,this.oldAlignment=this.props.alignment,this.oldReadonly=this.props.readonly,i}};m.defaultProps={alignment:"center",nodeSize:"dynamic",selectionMode:"none",busyState:"ready",editOptions:{addNodeToPath:"off",addPath:"off"}},m._metadata={properties:{data:{type:"DataProvider"},expanded:{type:"KeySet",writeback:!0},selection:{type:"Array<string>",writeback:!0},selectionMode:{type:"string",enumValues:["none","multiple","single"]},alignment:{type:"string",enumValues:["center","centerStart","topStart"]},nodeSize:{type:"string",enumValues:["compact","dynamic"]},busyState:{type:"string",enumValues:["ready","busy"]},readonly:{type:"boolean"},editOptions:{type:"object",properties:{addNodeToPath:{type:"string",enumValues:["on","off"]},addPath:{type:"string",enumValues:["on","off"]}}}},slots:{nodeTemplate:{data:{}},addNodeMenuTemplate:{data:{}}},events:{spAddNode:{},spAddPath:{}},extension:{_WRITEBACK_PROPS:["expanded","selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},m=__decorate([(0,i.customElement)("oj-sp-diagram-builder"),__metadata("design:paramtypes",[Object])],m),t.DiagramBuilder=m})),define("oj-sp/diagram-builder/loader",["require","exports","./diagram-builder"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramBuilder=void 0,Object.defineProperty(t,"DiagramBuilder",{enumerable:!0,get:function(){return i.DiagramBuilder}})})),define("oj-sp/diagram-node/components/status-icon-tooltip/status-icon-tooltip",["require","exports","preact","preact/compat"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=(0,o.memo)(e=>(0,i.h)("div",null,(0,i.h)("oj-popup",{id:e.statusIconTooltipId,class:"oj-sp-diagram-node-status-icon-tooltip",position:{at:{horizontal:"end",vertical:"center"},my:{horizontal:"start",vertical:"bottom"},collision:"flip"},tail:"simple",ref:e.statusIconTooltipRef},e.statusIconTooltipContent)));t.default=s})),define("css!oj-sp/diagram-node/diagram-node",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/diagram-node/diagram-node",["require","exports","preact","ojs/ojvcomponent","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","oj-sp/common/EventDispatcher","./diagram-node-utils","./components/status-icon-tooltip/status-icon-tooltip","css!./diagram-node","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css","ojs/ojbutton","ojs/ojoption","ojs/ojmenu","ojs/ojpopup"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";var c,p;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramNode=void 0,function(e){e[e.REGULAR=0]="REGULAR",e[e.LABEL=1]="LABEL",e[e.LABEL_BOLD=2]="LABEL_BOLD"}(c||(c={})),function(e){e.ENTER="Enter",e.SPACE=" ",e.M="m"}(p||(p={}));const u={initialFocus:"firstItem"};let h=class extends i.Component{constructor(e){var t;super(e),this.Variation=c,this.statusIconTooltipRef=(0,i.createRef)(),this.elementCache=new Map,this.getContainerClass=()=>{let e="oj-flex oj-sm-flex-wrap-nowrap oj-sp-diagram-node-container oj-sp-diagram-node-";return e+=(this.isCompact()?"compact":"regular")+" "+(this.configured?"":"oj-sp-diagram-node-unconfigured")+(this.state.isMenuOpen?" oj-sp-diagram-node-menu-open":"")+(this.isActionMenuVisible?" oj-sp-diagram-node-mobile":"")+(this.props.selected?" oj-sp-diagram-node-selected":"")+(this.props.selected||!this.props.focused&&!this.props.inActionableMode?"":" oj-sp-diagram-node-focused")+(this.props.focused||this.props.inActionableMode?" oj-sp-diagram-node-focused-state":"")+(this.isContainer?" oj-sp-diagram-node-is-container":"")+(this.isContainer&&this.props.expanded?" oj-sp-diagram-node-container-is-expanded":"")+" oj-sp-diagram-link-create-end",e},this.isOuterIcon=()=>{var e;const{leadingVisual:t}=this.props;return this.configured&&!this.isContainer&&"rectangle"!==(null!==(e=null==t?void 0:t.shape)&&void 0!==e?e:"rectangle")&&!(null==t?void 0:t.src)&&!!(null==t?void 0:t.icon)},this.hasStatusIcon=()=>{const{statusIconEnabled:e,statusIcon:t,displayOptions:i}=this.props;return(e||(null==i?void 0:i.statusIconEnabled))&&"none"!==t&&!!this.props.statusIconTooltip},this.onMenuOpen=e=>{this.setState({isMenuOpen:!0})},this.onMenuClose=e=>{this.setState({isMenuOpen:!1})},this.secondaryActionHandler=e=>{var t,i;const o=e.detail.selectedValue;null===(i=(t=this.props).onSpSecondaryAction)||void 0===i||i.call(t,{actionId:o})},this.preventDefault=e=>{e.preventDefault(),e.stopPropagation()},this.expandActionHandler=e=>{var t,i,o,s;e.preventDefault(),e.stopPropagation(),this.props.expanded?null===(i=(t=this.props).onSpCollapse)||void 0===i||i.call(t):null===(s=(o=this.props).onSpExpand)||void 0===s||s.call(o)},this.dispatchAddNodeEvent=(e,t)=>{r.EventDispatcher.dispatch(r.EventDispatcher.ADD_ACTION_EVENT_NAME,e.target,{edge:t})},this.dispatchAddPathStartEvent=(e,t)=>{var i,o;null===(o=(i=this.props).onSpAddPathStart)||void 0===o||o.call(i,{edge:t})},this.getStatusIconClass=()=>{var e;const t=this.props.statusIcon;return(this.props.statusIconEnabled||(null===(e=this.props.displayOptions)||void 0===e?void 0:e.statusIconEnabled))&&t&&"none"!==t?"alert"===t?"oj-icon-color-danger oj-ux-ico-error-s":"warning"===t?"oj-icon-color-warning oj-ux-ico-warning-s":"success"===t?"oj-icon-color-success oj-ux-ico-success-s":"info"===t?"oj-icon-color-info oj-ux-ico-information-s":void 0:""},this.getStatusIconLabel=()=>{var e;const t=this.props.statusIcon;return(this.props.statusIconEnabled||(null===(e=this.props.displayOptions)||void 0===e?void 0:e.statusIconEnabled))&&t&&"none"!==t?"alert"===t?this.res.errorIcon:"warning"===t?this.res.warningIcon:"success"===t?this.res.successIcon:"info"===t?this.res.infoIcon:void 0:""},this.plusIconKeyDownHandler=e=>{const{key:t,ctrlKey:i}=e;if(t!==p.SPACE){if(i&&t===p.M){e.preventDefault(),e.stopPropagation();const t=e.target.parentElement;let i="end";t&&(t.classList.contains("oj-sp-diagram-node-add-node-top-box")?i="top":t.classList.contains("oj-sp-diagram-node-add-node-bottom-box")?i="bottom":t.classList.contains("oj-sp-diagram-node-add-node-start-box")&&(i="start")),this.dispatchAddPathStartEvent(e,i)}}else this.preventDefault(e)},this.statusIconKeyUpHandler=e=>{const{key:t}=e;t!==p.ENTER&&t!==p.SPACE||(this.preventDefault(e),this.openStatusIconTooltip(e))},this.statusIconKeyDownHandler=e=>{const{key:t}=e;t!==p.ENTER&&t!==p.SPACE||this.preventDefault(e)},this.statusIconClickHandler=e=>{this.preventDefault(e),this.openStatusIconTooltip(e)},this.openStatusIconTooltip=e=>{this.statusIconTooltipRef.current.isOpen()||this.statusIconTooltipRef.current.open(e.target)},this.addIconClickHandler=e=>t=>{t.preventDefault(),t.stopPropagation(),this.dispatchAddNodeEvent(t,e)},this.addIconKeyUpHandler=e=>t=>{const{key:i}=t;i!==p.ENTER&&i!==p.SPACE||(t.preventDefault(),t.stopPropagation(),this.dispatchAddNodeEvent(t,e))},this.getSecondaryActions=e=>{var t;const i=[];if(e&&(null===(t=this.props.displayOptions)||void 0===t?void 0:t.secondaryActionsEnabled))for(let t=0;t<e.length;t++){const o=e[t];if(o)if(o.id&&o.label){if(void 0===o.display||"off"!==o.display){if(10===i.length){n.warn("Only 10 secondary actions are allowed, the rest will be ignored");break}i.push(o)}}else n.error("Invalid secondary action - id and label are all required - id: "+o.id+" label: "+o.label)}return i},this.onContainerHover=e=>async t=>{const i=this.base.querySelector(".oj-sp-diagram-icon-bg-texture");if(i){i.classList.forEach(e=>{e.includes("oj-ux-texture-")&&i.classList.remove(e)});this.getTextureClass(e)&&i.classList.add(this.getTextureClass(e))}const o=document.getElementById(this.uid+"toolTipText");if(e){const e=await this.computeTooltip();o.title=e}},this.getTextureClass=e=>{var t,i;switch(null!==(i=null===(t=this.props.leadingVisual)||void 0===t?void 0:t.background)&&void 0!==i?i:"neutral"){case"ocean":return"oj-ux-texture-ocean-opacity-"+(e?"10":"20");case"plum":return"oj-ux-texture-plum-opacity-"+(e?"10":"20");case"sienna":return"oj-ux-texture-sienna-opacity-"+(e?"12":"20");case"pine":return"oj-ux-texture-pine-opacity-"+(e?"10":"20");case"rose":return"oj-ux-texture-rose-opacity-"+(e?"20":"30");case"slate":return"oj-ux-texture-slate-opacity-"+(e?"08":"10")}return""},this.isRtl=()=>s.getDirectionality()===s.DIRECTIONALITY.RIGHT_TO_LEFT,this.uid=null!==(t=e.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.res=Object.assign({},a),this.isActionMenuVisible=!s.isHoverSupported()}get variation(){return"unconfigured"===this.props.nodeState||this.props.nodeTitle?c.REGULAR:"emphasized"===this.props.nodeTextStyle?c.LABEL_BOLD:c.LABEL}get configured(){return"unconfigured"!==this.props.nodeState}isCompact(){return"compact"===this.props.size}setContainerIcon(){return this.props.expanded?"oj-ux-ico-chevron-down":"oj-ux-ico-chevron-right"}get isContainer(){return"container"===this.props.nodeState}getBodyShape(){const{leadingVisual:e,nodeState:t}=this.props;return l.DiagramNodeUtils.getShape(t,e)}async computeTooltip(){var e,t;let i=null===(e=this.props.nodeTitle)||void 0===e?void 0:e.trim();i&&!this.isTruncated(this.queryEl(".oj-sp-diagram-title"))&&(i="");let o=null===(t=this.props.nodeText)||void 0===t?void 0:t.trim();o&&!this.isTruncated(this.queryEl(".oj-sp-diagram-node-text"))&&(o="");return""+((i||"")+(i&&o?" - ":"")+(o||""))}isTruncated(e){if(!e)return!1;const t=e.getBoundingClientRect(),i=e.firstElementChild.getBoundingClientRect();if(Math.abs(i.height-t.height)>5)return!0;const o=this.queryEl(`#${this.uid}_actions`);if(o){const e=o.getBoundingClientRect();if(s.getDirectionality()===s.DIRECTIONALITY.LEFT_TO_RIGHT&&i.x+i.width>e.x||s.getDirectionality()===s.DIRECTIONALITY.RIGHT_TO_LEFT&&e.x+e.width>i.x)return!0}return!1}queryEl(e){return this.base.querySelector(e)}getRootClass(e){return"container"===e.nodeState&&e.expanded?"oj-sp-diagram-node-expanded":""}renderMenuButton(e){const{uid:t}=this;return(0,i.h)(i.Fragment,null,e&&e.length>0&&(0,i.h)("div",{className:"oj-sp-diagram-node-actions-gradient"},(0,i.h)("oj-menu-button",{id:t+"_more1",class:"oj-sp-diagram-node-actions-menu",chroming:"borderless",display:"icons","aria-label":this.res.actions,onClick:this.preventDefault},(0,i.h)("oj-menu",{id:t+"_more-actions-menu",slot:"menu",onojMenuAction:this.secondaryActionHandler,onojBeforeOpen:this.onMenuOpen,onojClose:this.onMenuClose,"aria-label":this.res.actions,openOptions:u},e.map(e=>(0,i.h)("oj-option",{id:t+"_"+e.id,value:e.id,disabled:"disabled"===e.display},e.label))))))}getAddIconAria(e){switch(e){case"top":return this.res.addNodeAbove;case"bottom":return this.res.addNodeBelow;case"end":return this.isRtl()?this.res.addNodeLeft:this.res.addNodeRight;case"start":return this.isRtl()?this.res.addNodeRight:this.res.addNodeLeft;default:return""}}getContainerGroupAria(){let e=this.props.nodeTitle?this.props.nodeTitle:this.props.nodeText;return e||"unconfigured"!==this.props.nodeState||(e=this.res.nodeUntitled),e}renderAddIcon(e){const t="top"===e||"bottom"===e?"vertical":"horizontal";return(0,i.h)("div",{className:"oj-sp-diagram-node-add-node-click-zone-"+e+" oj-sp-diagram-node-add-node-"+t+" oj-sp-diagram-node-add-node-display oj-sp-diagram-node-add-icon-drag-port"},(0,i.h)("div",{className:"oj-sp-diagram-node-add-node-"+e+"-box oj-sp-diagram-node-add-node-"+t+"-target",onClick:this.addIconClickHandler(e),"data-oj-clickthrough":"disabled"},(0,i.h)("span",{className:"oj-sp-diagram-node-add-icon oj-sp-diagram-node-white oj-text-color-primary",tabIndex:0,onKeyUp:this.addIconKeyUpHandler(e),onKeyDown:this.plusIconKeyDownHandler,role:"button","aria-haspopup":"none"===this.props.addMenuType?null:"menu","aria-label":this.getAddIconAria(e)},(0,i.h)("span",{className:"oj-ux-ico-plus"}))))}renderTitleAndText(){return(0,i.h)("div",{id:this.uid+"toolTipText"},!this.isCompact()&&this.variation!==c.REGULAR&&(0,i.h)("div",{className:"oj-sp-diagram-node-text oj-typography-body-sm oj-sm-margin-0-vertical oj-text-color-primary oj-line-clamp-"+("emphasized"===this.props.nodeTextStyle?"2 ":"3 ")+(this.variation===c.LABEL_BOLD?"oj-typography-bold":"")},(0,i.h)("span",null,this.props.nodeText)),!this.isCompact()&&this.variation===c.REGULAR&&(0,i.h)("div",null,(0,i.h)("div",{className:"oj-sp-diagram-title oj-typography-body-sm oj-sm-margin-0-vertical oj-typography-bold oj-text-color-primary oj-line-clamp-1"},(0,i.h)("span",null,this.configured||this.props.nodeTitle?this.props.nodeTitle:this.res.nodeUntitled)),(0,i.h)("p",{className:"oj-sp-diagram-node-text oj-typography-body-sm oj-sm-margin-0-vertical oj-sm-margin-1x-top oj-text-color-secondary oj-line-clamp-"+(this.isContainer?"1":"3")},(0,i.h)("span",null,this.configured||this.props.nodeText?this.props.nodeText:this.res.nodeLabel))),this.isCompact()&&this.variation!==c.REGULAR&&(0,i.h)("div",{className:"oj-sp-diagram-node-text oj-typography-body-xs oj-sm-margin-0-vertical oj-text-color-primary oj-line-clamp-2 "+(this.variation===c.LABEL_BOLD?"oj-typography-bold":"")},(0,i.h)("span",null,this.props.nodeText)),this.isCompact()&&this.variation===c.REGULAR&&(0,i.h)("div",null,(0,i.h)("div",{className:"oj-sp-diagram-title oj-typography-body-xs oj-sm-margin-0-vertical oj-typography-bold oj-text-color-primary oj-line-clamp-1"},(0,i.h)("span",null,this.configured||this.props.nodeTitle?this.props.nodeTitle:this.res.nodeUntitled)),(0,i.h)("p",{className:"oj-sp-diagram-node-text oj-sp-diagram-node-text-padding oj-typography-body-xs oj-sm-margin-0-vertical oj-text-color-secondary oj-line-clamp-1"},(0,i.h)("span",null,this.configured||this.props.nodeText?this.props.nodeText:this.res.nodeLabel))))}render(e){var t,s;const{uid:a}=this,n=this.getSecondaryActions(this.props.secondaryActions);return(0,i.h)(o.Root,{class:this.getRootClass(e),id:a},(0,i.h)("div",{id:a+"_container",className:this.getContainerClass(),role:"group","aria-label":this.getContainerGroupAria(),onMouseEnter:this.onContainerHover(!0),onMouseLeave:this.onContainerHover(!1),"data-oj-context":!0},this.isOuterIcon()&&(0,i.h)("div",null,(0,i.h)("div",{id:a+"_icon_outline",className:"oj-sp-diagram-node-icon-outline-"+this.getBodyShape()}),(0,i.h)("div",{className:"oj-sp-diagram-icon-container"},(0,i.h)("div",{className:"oj-sp-diagram-icon oj-sp-diagram-icon-shape-"+this.props.leadingVisual.shape+" oj-sp-diagram-icon-bg oj-sp-diagram-icon-bg-"+this.props.leadingVisual.background},(0,i.h)("div",{className:"oj-sp-diagram-icon-bg-texture "+this.getTextureClass(!1)}),(0,i.h)("div",{className:"oj-sp-diagram-icon-content oj-sp-diagram-icon-content-"+this.props.leadingVisual.shape+" "+this.props.leadingVisual.icon,role:this.props.leadingVisual.altText?"img":void 0,"aria-label":this.props.leadingVisual.altText||void 0})))),(0,i.h)("div",{id:a+"_wrap",className:"oj-sp-diagram-node-wrap oj-sp-diagram-node-wrap-"+this.getBodyShape()},(0,i.h)("div",{className:"oj-sp-diagram-node-body"},!this.isOuterIcon()&&this.configured&&this.props.leadingVisual&&this.props.leadingVisual.src?(0,i.h)("div",{className:"oj-sp-diagram-icon-shape-rectangle"+(this.isContainer?"-in-container":"")+" oj-divider-end"},(0,i.h)("div",{className:"oj-sp-diagram-icon-content oj-sp-diagram-icon-content-rectangle"},(0,i.h)("img",{id:a+"_img1",className:"oj-sp-diagram-node-image",src:this.props.leadingVisual.src,alt:this.props.leadingVisual.altText||""}))):"",!this.isOuterIcon()&&this.configured&&(!this.props.leadingVisual||!this.props.leadingVisual.src)&&(0,i.h)("div",{className:"oj-sp-diagram-icon-shape-rectangle"+(this.isContainer?"-in-container":"")+(this.props.expanded?" oj-sp-diagram-icon-shape-rectangle-container-expanded":"")+" oj-sp-diagram-icon-bg oj-sp-diagram-icon-bg-"+(this.props.leadingVisual&&this.props.leadingVisual.background?this.props.leadingVisual.background:"ocean")},(0,i.h)("div",{className:"oj-sp-diagram-icon-bg-texture "+this.getTextureClass(!1)}),this.props.leadingVisual&&this.props.leadingVisual.icon?(0,i.h)("div",{className:"oj-sp-diagram-icon-content oj-sp-diagram-icon-content-rectangle "+this.props.leadingVisual.icon,role:this.props.leadingVisual.altText?"img":void 0,"aria-label":this.props.leadingVisual.altText||void 0}):""),this.isContainer&&(0,i.h)("div",{className:"oj-sp-diagram-container-btn-shape-rectangle"+(this.props.expanded?"-expanded":"")+" oj-sp-diagram-container-btn-bg oj-sp-diagram-container-btn-bg-"+(this.props.leadingVisual&&this.props.leadingVisual.background?this.props.leadingVisual.background:"ocean"),onClick:this.expandActionHandler},(0,i.h)("div",{className:"oj-sp-diagram-container-btn-content-rectangle "+this.setContainerIcon()})),!this.configured&&(0,i.h)("div",{className:"oj-sp-diagram-icon-shape oj-sp-diagram-icon-shape-rectangle oj-sp-diagram-icon-bg-neutral"},(0,i.h)("div",{className:"oj-sp-diagram-icon-content oj-sp-diagram-icon-content-rectangle oj-ux-ico-default-view"})),(0,i.h)("div",{className:"oj-sp-diagram-node-content "+(this.isOuterIcon()?"oj-sm-padding-3x-end ":"oj-sm-padding-3x-horizontal ")+"oj-sm-padding-"+(this.isCompact()?"2x":"3x")+"-vertical"},this.renderTitleAndText(),(this.hasStatusIcon()||n&&n.length>0)&&(0,i.h)("div",{id:a+"_actions",className:"oj-sp-diagram-node-end-region"+(this.props.statusIconEnabled||(null===(t=this.props.displayOptions)||void 0===t?void 0:t.statusIconEnabled)?"":" oj-sp-diagram-node-status-disabled")+((null===(s=this.props.displayOptions)||void 0===s?void 0:s.secondaryActionsEnabled)?"":" oj-sp-diagram-node-actions-disabled")},this.hasStatusIcon()&&(0,i.h)("div",{className:"oj-sp-diagram-node-status-icon-gradient"},(0,i.h)("div",{id:a+"_status-icon-container",className:"oj-sp-diagram-node-status-icon-container",tabIndex:0,onClick:this.statusIconClickHandler,onKeyUp:this.statusIconKeyUpHandler,onKeyDown:this.statusIconKeyDownHandler,"data-oj-clickthrough":"disabled",role:"button","aria-haspopup":"dialog","aria-label":this.getStatusIconLabel()},(0,i.h)("span",{className:this.getStatusIconClass()}))),this.renderMenuButton(n)))),this.isContainer&&this.props.expanded&&(0,i.h)("div",{className:"oj-bg-neutral-30 oj-divider-top oj-sp-diagram-node-jar"+(12===l.DiagramNodeUtils.getRemFontSize()?" oj-sp-diagram-node-jar-margin-bottom":"")})),"on"===this.props.topAddIcon&&!this.props.readonly&&this.renderAddIcon("top"),"on"===this.props.endAddIcon&&!this.props.readonly&&this.renderAddIcon("end"),"on"===this.props.bottomAddIcon&&!this.props.readonly&&this.renderAddIcon("bottom"),"on"===this.props.startAddIcon&&!this.props.readonly&&this.renderAddIcon("start"),(0,i.h)(d.default,{statusIconTooltipId:a+"_popup",statusIconTooltipRef:this.statusIconTooltipRef,statusIconTooltipContent:this.props.statusIconTooltip})))}};h.defaultProps={addMenuType:"menu",statusIcon:"none",nodeTextStyle:"none",nodeState:"normal",readonly:!1,size:"dynamic",statusIconEnabled:!1,startAddIcon:"off",endAddIcon:"off",topAddIcon:"off",bottomAddIcon:"off",displayOptions:{statusIconEnabled:!1,secondaryActionsEnabled:!0},leadingVisual:{src:void 0,altText:void 0,icon:void 0,shape:"rectangle",background:"neutral"}},h._metadata={properties:{nodeTitle:{type:"string"},nodeText:{type:"string"},nodeTextStyle:{type:"string",enumValues:["none","emphasized"]},nodeState:{type:"string",enumValues:["container","unconfigured","normal"]},expanded:{type:"boolean"},focused:{type:"boolean"},selected:{type:"boolean"},inActionableMode:{type:"boolean"},readonly:{type:"boolean"},size:{type:"string",enumValues:["compact","dynamic"]},leadingVisual:{type:"object",properties:{src:{type:"string"},altText:{type:"string"},icon:{type:"string"},shape:{type:"string",enumValues:["circle","rectangle","diamond"]},background:{type:"string",enumValues:["neutral","slate","sienna","plum","rose","pine","ocean"]}}},secondaryActions:{type:"Array<object>"},statusIconEnabled:{type:"boolean"},statusIcon:{type:"string",enumValues:["alert","none","warning","success","info"]},startAddIcon:{type:"string",enumValues:["on","off"]},endAddIcon:{type:"string",enumValues:["on","off"]},topAddIcon:{type:"string",enumValues:["on","off"]},bottomAddIcon:{type:"string",enumValues:["on","off"]},addMenuType:{type:"string",enumValues:["none","menu"]},displayOptions:{type:"object",properties:{statusIconEnabled:{type:"boolean"},secondaryActionsEnabled:{type:"boolean"}}}},events:{spSecondaryAction:{},spExpand:{},spCollapse:{},spAdd:{},spAddPathStart:{}},slots:{statusIconTooltip:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},h=__decorate([(0,o.customElement)("oj-sp-diagram-node"),__metadata("design:paramtypes",[Object])],h),t.DiagramNode=h})),define("oj-sp/diagram-node/loader",["require","exports","./diagram-node"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramNode=void 0,Object.defineProperty(t,"DiagramNode",{enumerable:!0,get:function(){return i.DiagramNode}})})),define("css!oj-sp/foldout-layout/components/Header/HeaderNavigation",[],(function(){})),define("text!oj-sp/header-navigation/component.json",[],(function(){return'{"name":"header-navigation","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Navigation Page Header","description":"Page header is the area on the top of the page, separated from content, which provides users with general information about the page as well as page level actions.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-css-additions":"2404.0.0"},"properties":{"nextStep":{"displayName":"Next Step","description":"Describes the details of the Next Button. If there is no Next button, set to null.","type":"object","properties":{"id":{"type":"string","displayName":"Next Step ID","description":"A unique ID which will be passed back in the spNext callback"},"label":{"type":"string","displayName":"Next Step Label","description":"The label to be displayed in the Next step"}}},"previousStep":{"displayName":"Previous Step","description":"Describes the details of the Previous Button. If there is no Previous button, set to null.","type":"object","properties":{"id":{"type":"string","displayName":"Previous Step ID","description":"A unique ID which will be passed back in the spPrevious callback"},"label":{"type":"string","displayName":"Previous Step Label","description":"The label to be displayed in the Previous step"}}},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","type":"object","properties":{"bidirectionalNavigation":{"description":"Defines whether Navigation is bi-directional","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go to Parent action is visible","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether In-flow Back action is visible","type":"boolean","value":false},"background":{"description":"Defines whether In-flow Back action is visible","type":"string","value":"default","enumValues":["transparent","default"],"propertyEditorValues":{"transparent":{"displayName":"Transparent","description":"The header background color is transparent. The other colors of the header are controlled by displayMode"},"default":{"displayName":"Default","description":"The header background color is controlled by the displayMode property."}}}}},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"goToParent":{"type":"string"},"inFlowBack":{"type":"string"},"contentExpanded":{"type":"string"}}},"contentExpanded":{"displayName":"Content Expanded","description":"True if the content is expanded to replace whole page","type":"boolean","value":false},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}}},"methods":{},"events":{"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked","bubbles":true,"cancelable":false},"spContentCollapse":{"displayName":"spContentCollapse event","description":"Triggered when the Back button in expanded view is clicked","bubbles":true,"cancelable":false},"spPrevious":{"displayName":"spPrevious event","description":"Triggered when the previous action is clicked","bubbles":true,"cancelable":false},"spNext":{"displayName":"spNext event","description":"Triggered when the next action is clicked","bubbles":true,"cancelable":false}},"slots":{"search":{"description":"This is the slot for search components in the header.","displayName":"search slot"}},"extension":{"catalog":{"status":"Pre-production","tags":["oj-sp","Redwood","Early-Adopter","header-navigation"],"docUrl":"http://design.oraclecorp.com/page-header-item-overview"},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/header-navigation/header-navigation-view.html",[],(function(){return'<html><head></head><body><header :id="[[ uid + \'_headerContainer\' ]]"data-oj-context=""><div :id="[[uid + \'_headerContent\']]"class="oj-sp-header-container":class="[[{\n    \'oj-color-invert oj-sp-color-invert-bg\': displayMode() === \'mixed\',\n    \'oj-sp-header-navigation-bg-light\': displayMode()  === \'light\',\n    \'oj-sp-header-navigation-bg-transparent\': $properties.displayOptions.background === \'transparent\',\n    \'oj-sp-header-navigation-has-search-slot\': searchSlotUsed,\n    \'oj-sp-header-navigation-has-no-header-items-and-search-field\': !hasHeaderItems() &amp;&amp; !hasSearchField(),\n    \'oj-sp-header-navigation-container oj-sm-padding-4x-end oj-md-padding-1x-start oj-md-padding-2x-end oj-lg-padding-7x-horizontal oj-sm-padding-2x-top oj-sm-padding-2x-bottom oj-md-padding-4x-top oj-md-padding-4x-bottom\': true\n  }]]"><div class="oj-flex-bar oj-sm-align-items-center oj-md-padding-1x-horizontal"><div class="oj-flex-bar-start"><oj-bind-if test="[[ (goToParentVisible() &amp;&amp; !inFlowBackVisible() &amp;&amp; !properties.contentExpanded) ]]"><oj-button :id="[[ uid + \'_goToParent_md\' ]]"class="oj-sp-header-navigation-goToParent-btn-md oj-sm-only-hide oj-button-sm"chroming="borderless"display="[[ searchSlotUsed() ? \'icons\' : \'all\' ]]"on-oj-action="[[ goToParentHandler ]]"><span slot="startIcon"class="oj-ux-ico-up-parent"></span><span><oj-bind-text value="[[ goToParentTranslationsString() ]]"></oj-bind-text></span></oj-button><oj-button :id="[[ uid + \'_goToParent_sm\' ]]"class="oj-sp-header-navigation-goToParent-btn-sm oj-md-hide oj-button-sm"display="icons"chroming="borderless"on-oj-action="[[ goToParentHandler ]]"><span><oj-bind-text value="[[ goToParentTranslationsString() ]]"></oj-bind-text></span><span slot="startIcon"class="oj-ux-ico-up-parent"></span></oj-button></oj-bind-if><oj-bind-if test="[[ (inFlowBackVisible() &amp;&amp; !properties.contentExpanded) ]]"><oj-button :id="[[ uid + \'_inFlowBack_md\' ]]"class="oj-sp-header-navigation-inFlowBack-btn-md oj-sm-only-hide oj-button-sm"chroming="borderless"display="[[ searchSlotUsed() ? \'icons\' : \'all\' ]]"on-oj-action="[[ inFlowBackHandler ]]"><span slot="startIcon"class="oj-ux-ico-nav-left"></span><span><oj-bind-text value="[[ inFlowBackTranslationsString() ]]"></oj-bind-text></span></oj-button><oj-button :id="[[ uid + \'_inFlowBack_sm\' ]]"class="oj-sp-header-navigation-inFlowBack-btn-sm oj-md-hide oj-button-sm"display="icons"chroming="borderless"on-oj-action="[[ inFlowBackHandler ]]"><span><oj-bind-text value="[[ inFlowBackTranslationsString() ]]"></oj-bind-text></span><span slot="startIcon"class="oj-ux-ico-nav-left"></span></oj-button></oj-bind-if><oj-bind-if test="[[ properties.contentExpanded ]]"><oj-button :id="[[ uid + \'_inViewBack\' ]]"class="oj-sp-header-navigation-contentExp-btn oj-button-sm oj-sm-only-margin-4x-horizontal"chroming="borderless"display="icons"on-oj-action="[[ inViewBackHandler ]]"><span slot="startIcon"class="oj-ux-ico-nav-left"></span><span><oj-bind-text value="[[ contentExpandedTranslationsString() ]]"></oj-bind-text></span></oj-button></oj-bind-if></div><oj-bind-if test="[[ searchSlotUsed ]]"><div :id="[[ uid + \'_searchSlotContainer\' ]]"class="oj-flex-bar-middle oj-sp-header-navigation-search-slot-container"><oj-bind-slot name="search"></oj-bind-slot></div></oj-bind-if><div class="oj-flex-bar-end"><oj-bind-if test="[[ !properties.contentExpanded &amp;&amp; (properties.previousStep || properties.nextStep) ]]"><oj-toolbar :id="[[ uid + \'_headerToolbar\' ]]"class="oj-sm-padding-0 oj-sp-header-navigation-sm-fit-content-width"aria-label="Header"aria-controls=""><oj-bind-if test="[[ bidirectional ]]"><oj-button :id="[[ uid + \'_previous\' ]]"disabled="[[ !properties.previousStep ]]"chroming="borderless"class="oj-sp-header-navigation-previous-btn oj-button-sm"on-oj-action="[[ previousHandler ]]"display="icons"><span><oj-bind-text value="[[ properties.previousStep &amp;&amp; properties.previousStep.label ? properties.previousStep.label : res().previous ]]"></oj-bind-text></span><span slot="startIcon"class="oj-ux-ico-arrow-left"></span></oj-button><oj-button :id="[[ uid + \'_next\' ]]"disabled="[[ !properties.nextStep ]]"chroming="borderless"class="oj-sp-header-navigation-next-btn oj-button-sm"on-oj-action="[[ nextHandler ]]"display="icons"><span><oj-bind-text value="[[ properties.nextStep &amp;&amp; properties.nextStep.label ? properties.nextStep.label : res().next ]]"></oj-bind-text></span><span slot="startIcon"class="oj-ux-ico-arrow-right"></span></oj-button></oj-bind-if><oj-bind-if test="[[ !bidirectional() &amp;&amp; properties.nextStep ]]"><oj-button :id="[[ uid + \'_next_uni\' ]]"chroming="borderless"class="oj-sp-header-navigation-nextUni-btn oj-button-sm"on-oj-action="[[ nextHandler ]]"><span><oj-bind-text value="[[ properties.nextStep.label ]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-toolbar></oj-bind-if></div></div></div></header></body></html>'})),define("oj-sp/header-navigation/header-navigation-viewModel",["require","exports","oj-sp/common/EventDispatcher","oj-sp/common/headerCommonAPI","knockout","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveutils","ojs/ojtranslation","ojs/ojbutton","oj-sp/css-additions/loader"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNavigationViewModel=void 0;function p(e){return a.isObject(e)?0!==Object.keys(e).length:null!==e}t.HeaderNavigationViewModel=class{constructor(e){this.goToParentHandler=e=>{i.EventDispatcher.dispatch("spGoToParent",this.composite,void 0)},this.inFlowBackHandler=e=>{i.EventDispatcher.dispatch("spInFlowBack",this.composite,void 0)},this.inViewBackHandler=e=>{i.EventDispatcher.dispatch(i.EventDispatcher.VIEW_BACK_ACTION_EVENT_NAME,this.composite,void 0)},this.previousHandler=e=>{i.EventDispatcher.dispatch("spPrevious",this.composite,{id:this.previousStepId()})},this.nextHandler=e=>{i.EventDispatcher.dispatch("spNext",this.composite,{id:this.nextStepId()})},this.processDisplayOptions=e=>{e?(this.goToParentVisible(e.goToParent),this.inFlowBackVisible(e.inFlowBack),this.bidirectional(e.bidirectionalNavigation)):(this.goToParentVisible(!0),this.inFlowBackVisible(!1),this.bidirectional(!1))},this.setHeaderBackgroundMode=async()=>{const e=await(0,o.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.displayMode(e)},this.setHeaderSplitBackground=()=>{(0,o.evaluateHeaderSplitBackground)(this.composite,document.getElementById(this.uid+"_headerContainer"))};const t=r.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.ojTranslate=c,this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.goToParentVisible=s.observable(!0),this.inFlowBackVisible=s.observable(!1),this.bidirectional=s.observable(!1),this.searchSlotUsed=s.observable(!1),this.hasSearchField=s.observable(!1),this.previousStepId=s.observable(this.properties.previousStep?this.properties.previousStep.id:null),this.nextStepId=s.observable(this.properties.nextStep?this.properties.nextStep.id:null),this.processDisplayOptions(this.properties.displayOptions),this.res=s.observable(Object.assign(Object.assign({},n),this.properties.translations)),this.responsiveUtils=d,this.displayMode=s.observable((0,o.getInitialMode)(this.properties.displayMode)),this.isHeaderInitialized=!1,this.goToParentTranslationsString=s.observable(this.res().goToParent),this.contentExpandedTranslationsString=s.observable(this.res().contentExpanded),this.inFlowBackTranslationsString=s.observable(this.res().inFlowBack),this.busyResolve()}activated(e){this.initHasHeaderItems(e),l.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){this.isHeaderInitialized&&this.setHeaderSplitBackground(),l.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55")}bindingsApplied(e){this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.isHeaderInitialized=!0),l.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),e.slotCounts.search>0&&(this.searchSlotUsed(!0),this.hasSearchField(!0)),this.initMutationObserver()}propertyChanged(e){l.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"displayOptions"===e.property&&e.value?this.processDisplayOptions(e.value):"translations"===e.property?(this.goToParentTranslationsString(void 0!==e.value.goToParent?e.value.goToParent:this.res().goToParent),this.contentExpandedTranslationsString(void 0!==e.value.contentExpanded?e.value.contentExpanded:this.res().contentExpanded),this.inFlowBackTranslationsString(void 0!==e.value.inFlowBack?e.value.inFlowBack:this.res().inFlowBack)):"previousStep"===e.property?this.previousStepId(e.value?e.value.id:null):"nextStep"===e.property&&this.nextStepId(e.value?e.value.id:null)}disconnected(e){l.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),this.destroyMutationObserver()}initHasHeaderItems(e){this.hasHeaderItems=s.pureComputed(()=>this.getHasHeaderItems(e))}initMutationObserver(){this.destroyMutationObserver(),this.mutationObserver=new MutationObserver(()=>this.hasSearchField(!!this.getHasSearchFieldEle())),this.mutationObserver.observe(this.composite,{childList:!0,subtree:!0})}destroyMutationObserver(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}getHasHeaderItems(e){const t=e.properties.displayOptions;return t.bidirectionalNavigation||t.goToParent||t.inFlowBack||e.properties.contentExpanded||p(e.properties.previousStep)||p(e.properties.nextStep)}getHasSearchFieldEle(){return this.composite.querySelector("#search1")}}})),define("css!oj-sp/header-navigation/header-navigation-styles",[],(function(){})),define("oj-sp/header-navigation/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./header-navigation-view.html","./header-navigation-viewModel","css!./header-navigation-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-header-navigation",{metadata:JSON.parse(o),view:s,viewModel:a.HeaderNavigationViewModel})})),define("oj-sp/foldout-layout/components/Header/HeaderNavigation",["require","exports","preact","css!./HeaderNavigation","oj-sp/header-navigation/loader"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNavigation=void 0;t.HeaderNavigation=e=>(0,i.h)("div",{class:"oj-sp-foldout-layout-header-"+e.orientation},(0,i.h)("oj-sp-header-navigation",{class:"oj-sp-foldout-layout-header-navigation oj-sp-header-navigation-bg-neutral-0",displayOptions:e.displayOptions,translations:e.translations,nextStep:e.nextStep,previousStep:e.previousStep,displayMode:e.displayMode},e.search))})),define("css!oj-sp/foldout-layout/components/Content/FoldoutContentDirectChildren",[],(function(){})),define("oj-sp/foldout-layout/components/Content/FoldoutContentDirectChildren",["require","exports","preact","preact/hooks","../FoldoutLayoutUtils","css!./FoldoutContentDirectChildren"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutContentDirectChildren=void 0;t.FoldoutContentDirectChildren=e=>{const t=(0,o.useRef)(null),a=(0,o.useRef)([]),n=(0,o.useRef)(e.selectedPanel);(0,o.useEffect)(()=>{r()},[e.children]);const r=()=>{(0,s.hasDynamicContainer)(t.current)?e.onPanelsReady(null,!0):(a.current=(()=>{const e=[].slice.call(t.current.children);return 1===e.length&&"OJ-DYNAMIC-CONTAINER"===e[0].firstChild.nodeName?[]:e})(),requestAnimationFrame(()=>{t.current&&(t.current.style.visibility="visible"),d(a.current)}))},l=()=>{const t=n.current>=0;e.onPanelsReady(t)},d=t=>{"auto"!==e.animate||(0,s.isSmallScreen)()?(t.forEach(e=>{e.classList.add("open")}),l()):c([...t])},c=e=>{if(0===e.length)l();else{e.shift().classList.add("open","animate"),setTimeout(()=>{c(e)},s.FOLDOUT_PANEL_ANIMATION_DELAY)}},p=t=>{var i;t>=0&&(n.current=t,null===(i=e.onSelectedPanelChanged)||void 0===i||i.call(e,t))};return(0,i.h)("div",{ref:t,class:"oj-sp-foldout-layout-panel-container",onKeyDown:t=>(t=>{t.stopImmediatePropagation(),a.current&&((0,s.keyDownValidateEdges)(n.current,a.current.length,t.key)?t.preventDefault():(0,s.keyDownToNextPanel)(a.current.length,n.current,t,t=>{var i;null===(i=e.onScrollPanelIntoView)||void 0===i||i.call(e,{index:t,animate:!1});a.current[t].focus({preventScroll:!0})}))})(t)},(()=>{const t=(0,i.toChildArray)(e.children),o=[];let a=!0;for(const[e,n]of t.entries()){const r=a?"even":"odd",l=e===t.length-1?s.FOLDOUT_LAST_PANEL:"";a=!a;const d=n.key;o.push((0,i.h)(i.Fragment,{key:d},(0,i.h)("div",{class:`${s.FOLDOUT_ANIMATION_CONTAINER} ${s.FOLDOUT_PANEL_WRAPPER} ${r} ${l}`,tabIndex:0,onClick:t=>p(e),onFocus:t=>p(e)},n)))}return o})())}})),define("css!oj-sp/foldout-layout/components/Content/FoldoutContentDynamicContainer",[],(function(){})),define("oj-sp/foldout-layout/components/Content/FoldoutContentDynamicContainer",["require","exports","preact","preact/hooks","../FoldoutLayoutUtils","css!./FoldoutContentDynamicContainer"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutContentDynamicContainer=void 0;t.FoldoutContentDynamicContainer=e=>{const t=(0,o.useRef)(null),a=(0,o.useRef)([]),n=(0,o.useRef)(e.selectedPanel),r=(0,o.useRef)([]),[l,d]=(0,o.useState)([]),c=(0,o.useRef)(!1);(0,o.useEffect)(()=>{const e=(0,s.getDynamicContainer)(t.current),i=t=>p(e,{layout:t.detail.previousValue}),o=t=>p(e,{layoutProvider:t.detail.previousValue});return e&&(e.classList.add("oj-sp-foldout-layout-dynamic-container"),e.addEventListener("layoutChanged",i),e.addEventListener("layoutProviderChanged",o),p(e)),()=>{if(e){const{layout:t,layoutProvider:s}=e;s&&s.unobserveLayout(t,u),e.removeEventListener("layoutChanged",i),e.removeEventListener("layoutProviderChanged",o)}}},[]),(0,o.useEffect)(()=>{var i;if(0===l.length)return;const o=(0,s.getDynamicContainer)(t.current);return c.current?(null===(i=e.onContainerLayoutUpdate)||void 0===i||i.call(e,l),h(!0,o)):h(!1,o),()=>{a.current.forEach((e,t)=>{r.current[t]&&(e.classList.remove("open","animate"),e.removeEventListener("click",r.current[t]),e.removeEventListener("focus",r.current[t]))})}},[l]),(0,o.useEffect)(()=>{const e=t.current;return e.addEventListener("keydown",j),()=>{e.removeEventListener("keydown",j)}},[]);const p=(e,t)=>{const i=e.layoutProvider,o=e.layout;o&&i&&(t&&(t.layout&&t.layout!==o&&i.unobserveLayout(t.layout,u),t.layoutProvider&&t.layoutProvider!==i&&t.layoutProvider.unobserveLayout(o,u)),i.observeLayout(o,u))},u=e=>{const t=null==e?void 0:e.displayProperties;if(t){const e=[];t.forEach(t=>{const i=Object.keys(t)[0];e.push(i)}),d(t=>(t.length>0&&(c.current=!0),e))}},h=(e,i)=>{const o=t.current;a.current=(0,s.getPanels)(o),a.current&&0!==a.current.length&&(m(a.current),g(i),requestAnimationFrame(()=>{o.style.visibility="visible",y([...a.current],e)}))},m=e=>{let t=!0,i=0;e.forEach(e=>{0!==e.clientWidth&&0!==e.clientHeight||e.classList.add(s.FOLDOUT_PANEL_EMPTY),e.classList.remove("even","odd"),e.classList.add(s.FOLDOUT_PANEL_WRAPPER),e.classList.add(t?"even":"odd"),t=!t,e.setAttribute("tabindex","0"),e.setAttribute("data-panel-key",i.toString());const o=v.bind(this,i);r.current.push(o),e.addEventListener("click",o,!0),e.addEventListener("focus",o),i++})},g=e=>{if(!e)return;const t=e.children;let i=t.length,o=t[i-1];for(;o.classList.contains("oj-subtree-hidden")&&i>=0;)i-=1,o=t[i];o&&o.classList.add(s.FOLDOUT_LAST_PANEL)},y=(t,i)=>{i||"auto"!==e.animate||(0,s.isSmallScreen)()?(t.forEach(e=>{e.classList.contains("open")||e.classList.add("open")}),f()):b(t)},f=()=>{var t;const i=n.current>=0;null===(t=e.onPanelsReady)||void 0===t||t.call(e,i)},b=e=>{if(0===e.length)return void f();e.shift().classList.add("open","animate"),setTimeout(()=>{b(e)},s.FOLDOUT_PANEL_ANIMATION_DELAY)},v=t=>{var i;t>=0&&(n.current=t,null===(i=e.onSelectedPanelChanged)||void 0===i||i.call(e,t))},j=t=>{t.stopImmediatePropagation(),a.current&&((0,s.keyDownValidateEdges)(n.current,a.current.length,t.key)?t.preventDefault():(0,s.keyDownToNextPanel)(a.current.length,n.current,t,t=>{var i;null===(i=e.onScrollPanelIntoView)||void 0===i||i.call(e,{index:t,animate:!1});a.current[t].focus({preventScroll:!0})}))};return(0,i.h)("div",{ref:t,class:"oj-sp-foldout-layout-panel-container"},e.children)}})),define("oj-sp/foldout-layout/components/Content/FoldoutContent",["require","exports","preact","preact/hooks","ojs/ojcontext","./FoldoutContentDirectChildren","./FoldoutContentDynamicContainer"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutContent=void 0;t.FoldoutContent=e=>{const[t,r]=(0,o.useState)(!0),l=(0,o.useRef)(null),d=(0,o.useRef)([]);(0,o.useEffect)(()=>{p()},[e.children]);const c=(t,i)=>{var o;i?r(!1):(null===(o=e.onPanelsReady)||void 0===o||o.call(e,t),d.current.pop()())},p=()=>{const e=s.getContext(l.current).getBusyContext();d.current.push(e.addBusyState({description:"wait for panels to be open."}))};return(0,i.h)("div",{"data-oj-context":!0,ref:l},t&&(0,i.h)(a.FoldoutContentDirectChildren,{animate:e.animate,children:e.children,selectedPanel:e.selectedPanel,onSelectedPanelChanged:e.onSelectedPanelChanged,onScrollPanelIntoView:e.onScrollPanelIntoView,onPanelsReady:c}),!t&&(0,i.h)(n.FoldoutContentDynamicContainer,{animate:e.animate,children:e.children,selectedPanel:e.selectedPanel,onSelectedPanelChanged:e.onSelectedPanelChanged,onContainerLayoutUpdate:()=>{p()},onScrollPanelIntoView:e.onScrollPanelIntoView,onPanelsReady:c}))}})),define("css!oj-sp/foldout-layout/components/Horizontal/HorizontalLayout",[],(function(){})),define("oj-sp/foldout-layout/components/Horizontal/HorizontalLayout",["require","exports","preact","../Header/HeaderNavigation","preact/hooks","oj-sp/foldout-layout/components/FoldoutLayoutUtils","../Content/FoldoutContent","css!./HorizontalLayout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalLayout=void 0;t.HorizontalLayout=e=>{const t=(0,s.useRef)(null),r=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)(null),c=(0,s.useRef)(null),p=(0,s.useRef)(0),u=(0,s.useRef)(!1),h=(0,s.useRef)(0),m=(0,s.useRef)();(0,s.useEffect)(()=>{var e,t;return null===(e=l.current)||void 0===e||e.addEventListener("wheel",b,!1),null===(t=r.current)||void 0===t||t.addEventListener("wheel",b,!0),window.addEventListener("scroll",y),window.addEventListener("resize",g),p.current=window.scrollY,u.current=!1,h.current=0,f(),()=>{var e,t;null===(e=l.current)||void 0===e||e.removeEventListener("wheel",b),null===(t=r.current)||void 0===t||t.removeEventListener("wheel",b),window.removeEventListener("scroll",y),window.removeEventListener("resize",g)}},[]),(0,s.useEffect)(()=>{const e=new ResizeObserver(f);return e.observe(l.current),()=>{e.disconnect()}},[]),(0,s.useEffect)(()=>{(0,a.isSmallScreen)()&&!1===m.current&&!0===e.drilldownEnabled&&(document.documentElement.scrollTop=0),m.current=e.drilldownEnabled},[e.drilldownEnabled]);const g=e=>{f()},y=function(){const e=l.current.querySelector(".oj-sp-foldout-layout-header-horizontal");if(l.current&&e){if(window.scrollY>0?(l.current.classList.add("oj-panel-shadow-md"),l.current.classList.add("oj-sp-foldout-layout-helper-sticky-placeholder")):(l.current.classList.remove("oj-panel-shadow-md"),l.current.classList.remove("oj-sp-foldout-layout-helper-sticky-placeholder")),window.scrollY>p.current)if(u.current){if(h.current>0&&window.scrollY>=h.current){const t=e.getBoundingClientRect().height,i=(0,a.isSmallScreen)()?12:16;l.current.style.setProperty("--oj-sp-foldout-layout--horizontal-header-top",-t+i+"px"),h.current=0}}else h.current=Math.max(p.current+48,1),u.current=!0;else u.current&&(h.current=Math.max(p.current-48,0)),u.current&&0!==window.scrollY||window.scrollY<=h.current&&(l.current.style.setProperty("--oj-sp-foldout-layout--horizontal-header-top","0px"),h.current=0),u.current=!1;p.current=window.scrollY}},f=()=>{requestAnimationFrame(()=>{const e=r.current;(0,a.setFoldableHeight)(e)})},b=e=>{(0,a.isSmallScreen)()||m.current||(requestAnimationFrame(()=>{const t=(0,a.getWheelInfo)(e);(0,a.updateHorizontalScrollPosition)(t.delta,r.current)}),e.preventDefault(),e.stopPropagation())},v=(e,t)=>{(0,a.isSmallScreen)()?(0,a.scrollPanelIntoViewWithDelta)(e=>{(0,a.updateVerticalScrollPosition)(e,document.documentElement)},e,null,"y",{top:l.current.clientHeight},t):(0,a.scrollPanelIntoViewWithDelta)(e=>{(0,a.updateHorizontalScrollPosition)(e,r.current)},e,r.current,"x",null,t)};return(0,i.h)("div",{ref:t,class:"oj-sp-foldout-layout-horizontal"},(()=>{const{search:t,displayOptions:s,translations:a,nextStep:n,previousStep:r,displayMode:d}=e;return(0,i.h)("div",{ref:l,"data-otel-hero":"foldoutLayoutHorizontalHeader",class:"oj-sp-foldout-horizontal-header-panel","data-oj-context":!0},(0,i.h)(o.HeaderNavigation,{search:t,displayOptions:s,displayMode:d,translations:a,nextStep:n,previousStep:r,orientation:"horizontal"}),e.overview)})(),(0,i.h)("div",{ref:r,class:"oj-sp-foldout-layout-main-container"},(e.drilldownAlwaysRendered||e.drilldownEnabled)&&(0,i.h)("div",{ref:c,class:"oj-sp-foldout-layout-drill-down-wrapper"},e.drilldown),!e.drilldownEnabled&&(0,i.h)("div",{ref:d,class:"oj-sp-foldout-layout-panels-wrapper"},(()=>{const{animate:o,children:s,selectedPanel:r,onSelectedPanelChanged:l}=e;return(0,i.h)(n.FoldoutContent,{animate:o,selectedPanel:r,onPanelsReady:i=>{if(null==t?void 0:t.current){const o=t.current.classList;let s=i;if((0,a.isSmallScreen)()&&(s=i&&!o.contains("oj-sp-foldout-layout-horizontal-ready")),s){const i=(0,a.getPanels)(t.current)[e.selectedPanel];i&&v(i.getBoundingClientRect(),!0)}o.contains("oj-sp-foldout-layout-horizontal-ready")||o.add("oj-sp-foldout-layout-horizontal-ready")}},onScrollPanelIntoView:e=>{const i=(0,a.getPanels)(t.current)[e.index];v(i.getBoundingClientRect(),e.animate)},onSelectedPanelChanged:e=>{l(e)}},s)})())))}})),define("css!oj-sp/foldout-layout/components/EditPopup/EditPopup",[],(function(){})),define("oj-sp/foldout-layout/components/EditPopup/EditPopup",["require","exports","preact","preact/hooks","ojs/ojlogger","../FoldoutLayoutUtils","oj-sp/common-util/common-util","css!./EditPopup","ojs/ojpopup"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditPopup=void 0;const r={my:{horizontal:"start",vertical:"top"},at:{horizontal:"start",vertical:"top"},collision:"fit"};t.EditPopup=e=>{const t=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(null),p=(0,o.useRef)(null),u=(0,o.useRef)(null),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{e.open?l.current||(c.current=e.container,d.current=e.launcher,m()):!0===l.current&&(c.current=null,d.current=null,g())},[e.open]),(0,o.useEffect)(()=>{const e=(0,n.debounce)(()=>{null!==h.current?l.current&&t.current&&(y(!0),t.current.setProperty("position",u.current)):h.current=!0},a.FOLDOUT_EVENT_DEBOUNCE_THRESHOLD+50);return p.current=new ResizeObserver(e),()=>{p.current.disconnect()}},[]);const m=()=>{var i;d.current?!1!==(null===(i=e.onBeforeOpen)||void 0===i?void 0:i.call(e))&&(y(!0),t.current.open(d.current)):s.log("Needed to define the launcher to open popup")},g=()=>{p.current.unobserve(document.documentElement),l.current=!1,t.current.close()},y=e=>{var i,o,s,n;if(t.current)if(e){const e=(()=>{const e=document.documentElement.clientHeight,t=document.documentElement.clientWidth,i=d.current.getBoundingClientRect();let o="function"==typeof c.current?c.current():c.current;o||(o=document.documentElement.getBoundingClientRect());const s=Math.max(0,o.width<i.width?o.x:i.x),n=Math.max(0,i.y),r=Math.min(Math.min(i.width,t),o.width),l=Math.min(Math.min(i.height,e),o.height),p=new DOMRect(s,n,r,l),u={left:p.left,right:p.right,top:p.top,bottom:p.bottom,height:l,width:r,offset:null};return o.width<i.width&&(u.offset={x:(0,a.isRtl)()?-o.x:o.x,y:o.y}),u})(),i={x:(0,a.isRtl)()?e.right:e.left,y:e.top},o={x:0,y:0};let s=Object.assign(Object.assign({},r),{of:i,offset:o});null!==e.offset&&(s=Object.assign(Object.assign({},r),{offset:e.offset,of:"window"}));let n=e.width+"px",l=e.height+"px";u.current=s,(0,a.isSmallScreen)()||(0,a.isLandscape)()?(n="100vw",l="100dvh",t.current.classList.add("oj-sp-foldout-layout-oj-popup-content-full-screen")):t.current.classList.add("oj-sp-foldout-layout-oj-popup-content"),t.current.style.setProperty("--oj-sp-foldout-layout-edit-popup-width",n),t.current.style.setProperty("--oj-sp-foldout-layout-edit-popup-height",l)}else null===(i=t.current)||void 0===i||i.classList.remove("oj-sp-foldout-layout-oj-popup-content"),null===(o=t.current)||void 0===o||o.classList.remove("oj-sp-foldout-layout-oj-popup-content-full-screen"),null===(s=t.current)||void 0===s||s.style.removeProperty("--oj-sp-foldout-layout-edit-popup-width"),null===(n=t.current)||void 0===n||n.style.removeProperty("--oj-sp-foldout-layout-edit-popup-height")};return(0,i.h)("div",null,(0,i.h)("oj-popup",{ref:t,tail:"none",modality:"modal",position:r,"auto-dismiss":"none","initial-focus":"firstFocusable",onojOpen:()=>{var e;null===(e=p.current)||void 0===e||e.observe(document.documentElement),l.current=!0},onojBeforeClose:e=>{l.current&&e.target===t.current&&e.preventDefault()},onojClose:e=>{e.target===t.current&&e.preventDefault()}},e.children))}})),define("css!oj-sp/foldout-layout/components/Vertical/VerticalMobileLayout",[],(function(){})),define("oj-sp/foldout-layout/components/Vertical/VerticalMobileLayout",["require","exports","oj-sp/foldout-layout/components/FoldoutLayoutUtils","preact","preact/hooks","../EditPopup/EditPopup","css!./VerticalMobileLayout"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalMobileLayout=void 0;const n="oj-sp-foldout-layout-selected-and-visible";t.VerticalMobileLayout=({content:e,staticPanel:t,editPanel:r,edit:l,panels:d,scrolledPanel:c,selectedPanel:p,onSelectedPanelChanged:u})=>{const h=(0,s.useRef)(),m=(0,s.useRef)(),g=(0,s.useRef)(0),y=(0,s.useRef)(-1),f=(0,s.useRef)(),b=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!d)return;const e=new Map;d.length>0&&(e.set(-1,m.current),d.forEach((t,i)=>e.set(i,t)),f.current=e);const t=e.get(y.current);t&&(null==t||t.classList.add(n))},[d]),(0,s.useEffect)(()=>{O()},[c]),(0,s.useEffect)(()=>(b.current=new i.FoldoutTouchInteraction,g.current=document.documentElement.clientWidth,h.current.addEventListener("touchstart",v),h.current.addEventListener("touchmove",j),h.current.addEventListener("touchend",A),h.current.addEventListener("touchcancel",C),()=>{h.current.removeEventListener("touchstart",v),h.current.removeEventListener("touchmove",j),h.current.removeEventListener("touchend",A),h.current.removeEventListener("touchcancel",C)}),[]);const v=e=>{b.current.startInteraction(e)},j=e=>{if(e.touches.length>1||!x())return;const t=b.current.updateInteraction(e,"x");if("y"===t.axis)return;document.documentElement.classList.add(i.CONTAINER_TOUCH_ACTION_CSS_CLASS),e.cancelable&&e.preventDefault();const o={x:Math.abs(t.deltaX),y:Math.abs(t.deltaY)};if((0,i.isDiagonalGesture)("x",o))return;const s=S(y.current,t.coefficient);if(null===s)return;const a=(0,i.getTouchXDirectionCoefficient)(t.deltaX),n=t.coefficient!==a,r={coefficient:t.coefficient,changed:n},l=E(s,y.current),d=_(h.current.scrollLeft,r,l);if(d===l.start||d===l.end)h.current.scrollLeft=d;else{const e=l.start+t.delta;h.current.scrollLeft=e}},A=e=>{document.documentElement.classList.remove(i.CONTAINER_TOUCH_ACTION_CSS_CLASS);const t=b.current.getInteraction(),o=S(y.current,t.coefficient);if(null===o)return void b.current.resetInteraction();if(h.current.scrollLeft===E(o).end)b.current.endInteraction(e,()=>{T(o)});else{const i=t.coefficient;b.current.endInteraction(e,(e,t)=>{if(isNaN(e))return;if(t){const e=Math.abs(h.current.scrollLeft),t=Math.round(e/g.current)-1,i=E(t).end;return T(t),void(h.current.scrollLeft=i)}const s=Math.round(e),a=h.current.scrollLeft+s,n={coefficient:i,changed:i!==(e<0?1:-1)},r=E(o,y.current),l=_(a,n,r,0);r.end===l||r.start===l?h.current.scrollLeft=l:h.current.scrollLeft+=s},{distance:h.current.scrollLeft,dimension:g.current})}},C=()=>{document.documentElement.classList.remove(i.CONTAINER_TOUCH_ACTION_CSS_CLASS),b.current.resetInteraction()},E=(e,t)=>{e++;let o=++t>=0?g.current*t:null,s=g.current*e;return o=(0,i.isRtl)()?-o:o,s=(0,i.isRtl)()?-s:s,{start:o,end:s}},T=e=>{if(y.current===e)return;const t=f.current.get(y.current),i=f.current.get(e);t.classList.remove(n),i.classList.add(n),y.current=e,document.documentElement.scrollTop=0,u(e)},_=(e,t,i,o=50)=>{if(-1===t.coefficient){if(e>=i.end)return i.end;if(t.changed&&null!==i.start){if(e<=i.start+o)return i.start}return null}if(t.changed&&null!==i.start){if(e>=i.start-o)return i.start}return e<=i.end?i.end:null},S=(e,t)=>{let o=(0,i.isRtl)()?e+t:e-t;return(o>=f.current.size-1||o<-1)&&(o=null),o},x=()=>{const e=2*g.current;return h.current.scrollWidth>=e&&f.current&&f.current.size>=2},O=()=>{if(!c)return;if(!f.current||0===f.current.size)return;const e=f.current.get(y.current),t=f.current.get(p);e.classList.remove(n),t.classList.add(n),y.current=p,(0,i.scrollPanelIntoViewWithDelta)(e=>{(0,i.updateHorizontalScrollPosition)(e,h.current)},t.getBoundingClientRect(),h.current,"x")};return(0,o.h)("div",{class:"oj-sp-foldout-layout-vertical-mobile",ref:h},(0,o.h)("div",{class:"oj-sp-foldout-layout-static-panel-wrapper",ref:m},t),(0,o.h)("div",{class:"oj-sp-foldout-layout-panels-wrapper"},e),(()=>{var e;const t=d?d[null==r?void 0:r.panel]:null,i=!!t&&(null==r?void 0:r.enabled);let s=null;return(null==r?void 0:r.enabled)&&(s=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect()),(0,o.h)(a.EditPopup,{open:i,container:s,launcher:t},l)})())}})),define("css!oj-sp/foldout-layout/components/Vertical/VerticalDesktopLayout",[],(function(){})),define("oj-sp/foldout-layout/components/Vertical/VerticalDesktopLayout",["require","exports","oj-sp/common-util/common-util","oj-sp/foldout-layout/components/FoldoutLayoutUtils","preact","preact/hooks","../EditPopup/EditPopup","css!./VerticalDesktopLayout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalDesktopLayout=void 0;t.VerticalDesktopLayout=({content:e,staticPanel:t,editPanel:r,scrolledPanel:l,panels:d,edit:c,selectedPanel:p})=>{const u=(0,a.useRef)(),h=(0,a.useRef)(),m=(0,a.useRef)(),g=(0,a.useRef)(null),y=(0,a.useRef)(null),f=(0,a.useRef)(),b=(0,a.useRef)(),v=(0,a.useRef)(null),j=(0,a.useRef)(null),A=(0,a.useRef)(null);(0,a.useEffect)(()=>(g.current=new o.FoldoutTouchInteraction(u.current),y.current=new o.FoldoutStaticPanelAnimation(u.current),u.current.addEventListener("keydown",S),u.current.addEventListener("wheel",_),u.current.addEventListener("touchstart",x),u.current.addEventListener("touchmove",O),u.current.addEventListener("touchend",w),u.current.addEventListener("touchcancel",I),()=>{u.current.removeEventListener("keydown",S),u.current.removeEventListener("wheel",_),u.current.removeEventListener("touchstart",x),u.current.removeEventListener("touchmove",O),u.current.removeEventListener("touchend",w),u.current.removeEventListener("touchcancel",I)}),[]),(0,a.useEffect)(()=>{d&&(f.current=[...d],b.current=p)},[d,p]),(0,a.useEffect)(()=>{const e=(0,i.debounce)(()=>{D()},o.FOLDOUT_EVENT_DEBOUNCE_THRESHOLD),t=()=>{A.current&&(A.current.disconnect(),A.current=null),e()};return C(),A.current=new ResizeObserver(T),window.addEventListener("resize",t),()=>{A.current&&(A.current.disconnect(),A.current=null),E(),window.removeEventListener("resize",t)}},[]),(0,a.useEffect)(()=>{if(null===l)return;let e=null;e=-1===l.index?h.current:f.current?f.current[l.index]:null,e&&N(e.getBoundingClientRect(),l.animate)},[l]);const C=()=>{if((0,o.isSmallScreen)())return;const e=document.documentElement;requestAnimationFrame(()=>{(0,o.isScaleThreshold)()?e.classList.add("oj-scale-md"):e.classList.remove("oj-scale-md")})},E=()=>{if((0,o.isSmallScreen)())return;const e=document.documentElement;(0,o.isScaleThreshold)()&&e.classList.remove("oj-scale-md")},T=()=>{const e=f.current[b.current];e&&N(e.getBoundingClientRect(),!1)},_=e=>{var t;if((0,o.isSmallScreen)())return;e.preventDefault(),e.stopPropagation(),y.current.start(null===(t=h.current)||void 0===t?void 0:t.clientWidth,h.current);const i=(0,o.getWheelInfo)(e);P({delta:i.delta,axis:"x"}),y.current.end()},S=e=>{var t;if((0,o.isSmallScreen)())return;if(e.defaultPrevented)return;y.current.start(null===(t=h.current)||void 0===t?void 0:t.clientWidth,h.current);const i=e.target,s=e.currentTarget,a=s.classList.contains("oj-sp-foldout-layout-vertical-mode-desktop")&&s.classList.contains("sticky"),n=["oj-sp-foldout-layout-static-panel","oj-sp-foldout-layout-panel-wrapper"].some(e=>i.classList.contains(e)),r=!n&&a&&"INPUT"!==i.tagName;if(n||r){let t=0;switch(e.key){case"ArrowRight":case"ArrowDown":t=-o.KEY_SCROLL_DELTA;break;case"ArrowLeft":case"ArrowUp":t=o.KEY_SCROLL_DELTA}0!==t&&(e.preventDefault(),e.stopPropagation(),t=(0,o.isRtl)()?-t:t,P({delta:t,axis:"x"}),y.current.end())}},x=e=>{var t;(0,o.isSmallScreen)()||0!==e.changedTouches.length&&(g.current.startInteraction(e),y.current.startOnTouch(null===(t=h.current)||void 0===t?void 0:t.clientWidth,h.current))},O=e=>{if((0,o.isSmallScreen)())return;const t=g.current.updateInteraction(e,"x",!0);if(!t||!t.axis)return;if(document.documentElement.classList.add(o.CONTAINER_TOUCH_ACTION_CSS_CLASS),e.cancelable&&e.preventDefault(),"y"===t.axis)return;const i={x:Math.abs(t.deltaX),y:Math.abs(t.deltaY)};(0,o.isDiagonalGesture)("x",i)||R(t)},w=()=>{document.documentElement.classList.remove(o.CONTAINER_TOUCH_ACTION_CSS_CLASS),g.current.resetInteraction(),y.current.endOnTouch()},I=()=>{g.current.resetInteraction(),y.current.endOnTouch()},D=()=>{if(C(),L(),!(0,o.isSmallScreen)()&&j.current){const e=f.current?f.current[b.current]:null;e&&N(e.getBoundingClientRect(),!1)}},N=(e,t)=>{var i,s;if((0,o.isSmallScreen)())return void(0,o.scrollPanelIntoViewWithDelta)((e,t)=>{var i;(0,o.updateVerticalScrollPosition)(e,document.documentElement),t&&Math.abs(e)>0&&(null===(i=A.current)||void 0===i||i.observe(m.current))},e,null,"y",null,t);y.current.start(null===(i=null==h?void 0:h.current)||void 0===i?void 0:i.clientWidth,h.current);let a=null;if((0,o.isStickyScreen)()){const e=null===(s=h.current)||void 0===s?void 0:s.offsetWidth;a={},(0,o.isRtl)()?a.right=e:a.left=e}(0,o.scrollPanelIntoViewWithDelta)((e,t)=>{var i;P({delta:e,axis:"x"}),t&&(Math.abs(e)>0&&(null===(i=A.current)||void 0===i||i.observe(m.current)),y.current.end())},e,u.current,"x",a,t)},P=e=>{null===v.current&&L(!0),(0,o.isStickyScreen)()?y.current.move(e,(t,i)=>{var s;if(t===o.SCROLL_DIR.LEFT&&i>o.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH)return;const a=i===y.current.getInitialWidth()&&0===(null===(s=u.current)||void 0===s?void 0:s.scrollLeft);t===o.SCROLL_DIR.RIGHT&&a?k():(0,o.updateHorizontalScrollPosition)(e.delta,u.current)}):(0,o.updateHorizontalScrollPosition)(e.delta,u.current)},R=e=>{const t=Math.round(e.deltaX);(0,o.isStickyScreen)()?y.current.moveOnTouch(e,(i,s)=>{var a,n;if(null===v.current&&L(!0),i===o.SCROLL_DIR.LEFT&&s>o.FOLDOUT_VERTICAL_STATIC_PANEL_COLUMN_WIDTH)return void g.current.setContainerPosition(t);const r=null===(a=null==h?void 0:h.current)||void 0===a?void 0:a.firstElementChild,l=s===(null==r?void 0:r.clientWidth)&&0===(null===(n=u.current)||void 0===n?void 0:n.scrollLeft);i===o.SCROLL_DIR.RIGHT&&l?k():u.current.scrollLeft=e.containerPosition-t}):u.current.scrollLeft=e.containerPosition-t},L=e=>{v.current=(0,o.isStickyScreen)(),v.current?M(e):F()},M=e=>{var t,i;const s=y.current.getCurrentWidth();if(0===(null===(t=u.current)||void 0===t?void 0:t.scrollLeft)&&!e)return void(v.current=null);if(!u.current||!h.current)return;const a=u.current.classList,n=h.current.classList;n.contains("sticky")||n.add("sticky"),a.contains("sticky")||a.add("sticky");const r=(null===(i=null==h?void 0:h.current)||void 0===i?void 0:i.firstElementChild).clientWidth;s>r&&y.current.reset(r),u.current.style.setProperty(o.STATIC_PANEL_OFFSET_INITIAL_WIDTH,r+"px")},F=()=>{if(!u.current||!h.current)return;const e=u.current.classList,t=h.current.classList;t.contains("sticky")&&t.remove("sticky"),e.contains("sticky")&&e.remove("sticky"),u.current.style.removeProperty(o.STATIC_PANEL_OFFSET_INITIAL_WIDTH)},k=()=>{F(),v.current=null};return(0,s.h)("div",{class:"oj-sp-foldout-layout-vertical oj-sp-foldout-layout-vertical-mode-desktop",ref:u},(0,s.h)("div",{class:o.FOLDOUT_STATIC_PANEL_WRAPPER,ref:h},t),(0,s.h)("div",{class:"oj-sp-foldout-layout-panels-wrapper",ref:m},e),(()=>{const e=f.current?f.current[null==r?void 0:r.panel]:null;j.current=!!e&&(null==r?void 0:r.enabled);return(0,s.h)(n.EditPopup,{onBeforeOpen:()=>{N(e.getBoundingClientRect(),!1)},open:j.current,container:()=>{var e;const t=u.current.getBoundingClientRect();if(!(0,o.isSmallScreen)()&&(0,o.isStickyScreen)()){const i=null===(e=h.current)||void 0===e?void 0:e.clientWidth;t.x=i,t.width=t.width-i}return t},launcher:e},c)})())}})),define("css!oj-sp/foldout-layout/components/Pagination/Pagination",[],(function(){})),define("oj-sp/foldout-layout/components/Pagination/Pagination",["require","exports","preact","ojs/ojtranslation","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common-util/common-util","css!./Pagination"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;t.Pagination=e=>{if(e.items&&0!==e.items.length)return(0,i.h)("div",{class:"oj-sp-foldout-layout-pagination oj-sm-padding-2x"},(()=>{const t=[];return e.items.sort((e,t)=>e.index-t.index).forEach(n=>{t.push((t=>{const n=o.applyParameters(s.goToPanel,{panelName:t.title}),r=e.visibleItems.includes(t.index)?"oj-ux-ico-circle-s":"oj-ux-ico-circle",l=(0,i.h)("div",{className:r}),d=(0,i.h)("a",{role:"link",tabIndex:0,class:"pagination-dot oj-flex oj-sm-padding-1x"},l);return d.props.onClick=()=>e.onSelectionChanged(t),d.props.onKeyPress=()=>e.onSelectionChanged(t),(0,a.isMobilePhoneDevice)()||(d.props.title=t.title),t.ariaLabelBy?d.props["aria-labelledby"]=t.ariaLabelBy:d.props.ariaLabel=n,d})(n))}),t})())}})),define("oj-sp/foldout-layout/components/Pagination/FoldoutPagination",["require","exports","preact","preact/hooks","./Pagination","oj-sp/foldout-layout/components/FoldoutLayoutUtils"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutPagination=void 0;t.FoldoutPagination=e=>{const[t,n]=(0,o.useState)([]),[r,l]=(0,o.useState)([]),d=(0,o.useRef)([]);(0,o.useEffect)(()=>{const t=[];e.panels.forEach(e=>{t.push({title:e.title,index:e.index,ariaLabelBy:e.ariaLabelBy})}),n(t);const i=c();return()=>{i.disconnect()}},[e.panels]);const c=()=>{let t="";t=(0,a.isStickyScreen)()?(0,a.isRtl)()?"0px -410px 0px 0px":"0px  0px 0px -410px":"0px";const i=new IntersectionObserver(t=>{let i=!1;const o=[...d.current];t.forEach(t=>{const s=e.panels.find(e=>t.target===e.panel),a=null==s?void 0:s.index;if(t.isIntersecting&&!o.includes(a)&&(t.intersectionRect.width>=205||t.intersectionRatio>=.5))o.push(a),i=!0;else if((!t.isIntersecting||t.intersectionRect.width<205&&t.intersectionRatio<.5)&&o.includes(a)){const e=o.indexOf(a);o.splice(e,1),i=!0}}),i&&(d.current=o.sort(),l([...o.sort()]))},{root:null,rootMargin:t,threshold:[.125,.25,.5,.75,.875]});return e.panels.forEach(e=>{i.observe(e.panel)}),i};return(0,i.h)(s.Pagination,{items:t,visibleItems:r,onSelectionChanged:t=>{e.onPaginationSelection(t.index)}})}})),define("css!oj-sp/foldout-layout/components/Vertical/VerticalLayout",[],(function(){})),define("oj-sp/foldout-layout/components/Vertical/VerticalLayout",["require","exports","oj-sp/foldout-layout/components/FoldoutLayoutUtils","preact","preact/hooks","../Header/HeaderNavigation","./VerticalMobileLayout","./VerticalDesktopLayout","../Pagination/FoldoutPagination","../Content/FoldoutContent","ojs/ojtranslation","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common-util/common-util","oj-sp/common/positionUtility","css!./VerticalLayout"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalLayout=void 0;t.VerticalLayout=e=>{const t=(0,s.useRef)(),m=(0,s.useRef)(),g=(0,s.useRef)(),y=(0,s.useRef)(),f=(0,s.useRef)(null),[b,v]=(0,s.useState)(null),[j,A]=(0,s.useState)(null),[C,E]=(0,s.useState)(null),[T,_]=(0,s.useState)([]),[S,x]=(0,s.useState)(!0),O=e.uid;(0,s.useEffect)(()=>(M(),k(),window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R),V()}),[C]),(0,s.useEffect)(()=>{j&&0!==j.length&&P(j,e.sectionLabels)},[e.sectionLabels,j]);const w=t=>{F(),L();const o=(0,i.getPanels)(m.current);if(o&&o.length>0&&A(o),t){let t=e.selectedPanel;(0,i.isStickyScreen)()||0!==e.selectedPanel||(t=-1,e.onSelectedPanelChanged(t));o[t]&&v({index:e.selectedPanel,animate:!0})}},I=e=>{v(e)},D=t=>{var i;if(t===e.selectedPanel)return;(null===(i=T.find(e=>e.index===t))||void 0===i?void 0:i.panel)&&v({index:t,animate:!0}),e.onSelectedPanelChanged(t)},N=(e,t,i)=>{const o=null==e?void 0:e.querySelector(t),s=null==o?void 0:o.getAttribute("title");let a="";return a=o&&s?s:c.applyParameters(p.defaultPanelName,{panelIndex:i}),a},P=(e,t)=>{if((0,i.isSmallScreen)()&&!(0,i.isPortrait)())return;if(!e)return;const o=e.map((e,i)=>{let o=N(e,".oj-sp-foldout-panel-title",i);return t&&t.length>0&&t[i]&&(o=t[i]),{title:o,index:i,panel:e}});if(!(0,i.isStickyScreen)()&&y.current){const e=-1,t="oj-sp-vertical-overview-1_title1",i=N(y.current,"#"+t,e);o.push({title:i,index:e,panel:y.current,ariaLabelBy:t})}_(o)},R=(0,u.debounce)(()=>{(()=>{M(),L();const t=(0,i.isStickyScreen)();if(f.current!==t){const o=(0,i.getPanels)(m.current);P(o,e.sectionLabels),(0,i.isSmallScreen)()&&!(0,i.isPortrait)()?f.current=null:f.current=t}})()},300),L=()=>{(0,i.setFoldableHeight)(t.current,(0,i.isPortrait)());const e=(0,i.isSmallScreen)()&&!(0,i.isPortrait)();x(!e)},M=()=>{let e=null;e=(0,i.isPortrait)()?"mobile":"desktop",e!==C&&(null!==C&&A([]),E(e))},F=()=>{var e;document.activeElement&&"BODY"!==document.activeElement.tagName||null===(e=y.current)||void 0===e||e.focus({preventScroll:!0})},k=function(){const e={componentName:O+"_pagination",component:g.current,scrollSubscription:{onScrollChange:e=>{x(e.isElementVisible)}},stickinessSubscription:{onStickinessChange:e=>{e.isSticky?g.current.classList.add("oj-sp-foldout-pagination-sticky"):g.current.classList.remove("oj-sp-foldout-pagination-sticky")}},offsetCalculationSubscription:{offsetOptions:{level:"CTAButtons",position:"bottom"},onOffsetChange:()=>{}}};g.current&&(0,i.isPortrait)()&&h.PositionUtility.subscribe(e)},V=function(){g.current&&(0,i.isPortrait)()&&h.PositionUtility.unsubscribe({componentName:O+"_pagination"})},B=()=>(0,o.h)("div",{class:i.FOLDOUT_STATIC_PANEL_INNER,ref:y,tabIndex:0},(()=>{const{search:t,displayOptions:i,translations:s,nextStep:n,previousStep:r,displayMode:l}=e;return(0,o.h)(a.HeaderNavigation,{search:t,displayOptions:i,displayMode:l,translations:s,nextStep:n,previousStep:r,orientation:"vertical"})})(),e.overview),U=()=>{const{animate:t,children:i,selectedPanel:s,onSelectedPanelChanged:a}=e;return(0,o.h)(d.FoldoutContent,{animate:t,selectedPanel:s,onScrollPanelIntoView:I,onSelectedPanelChanged:e=>{a(e)},onPanelsReady:w},i)};return(0,o.h)("div",{ref:t},S?(0,o.h)("div",{ref:g,class:"oj-sp-foldout-layout-pagination-container"},(0,o.h)(l.FoldoutPagination,{panels:T,onPaginationSelection:D})):null,(0,o.h)("div",{class:"oj-sp-foldout-layout-main-container",ref:m},(()=>{switch(C){case"desktop":return(0,o.h)(r.VerticalDesktopLayout,{selectedPanel:e.selectedPanel,scrolledPanel:b,content:U(),staticPanel:B(),editPanel:e.editPanel,edit:e.edit,panels:j});case"mobile":return(0,o.h)(n.VerticalMobileLayout,{selectedPanel:e.selectedPanel,onSelectedPanelChanged:e.onSelectedPanelChanged,content:U(),staticPanel:B(),edit:e.edit,editPanel:e.editPanel,panels:j,scrolledPanel:b})}})()))}}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/dynamic-foldout-page/dynamic-foldout-page",["require","exports","oj-sp/common/EventDispatcher","ojs/ojvcomponent","preact","oj-sp/foldout-layout/components/Horizontal/HorizontalLayout","oj-sp/foldout-layout/components/Vertical/VerticalLayout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicFoldoutPage=void 0;let r=class extends s.Component{constructor(e){var t;super(e),this.layoutHandler=e=>{const t=this.generateSectionLayouts(e);this.currentSections=this.getSectionNodes(t),this.setState(i=>(this.previousLayoutState=i,this.previousActiveView=this.props.activeView,{renderedLayout:e,sectionLayouts:t}))},this.onSelectedPanelChanged=e=>{var t,i;null===(i=(t=this.props).onSelectedPanelChanged)||void 0===i||i.call(t,e)},this.getSectionLabels=e=>e.map(e=>{const t=e.getPropertyValue("labelHint");return t||e.sectionName}),this.getSectionNodes=e=>e.map(e=>(0,s.h)(s.Fragment,{key:`${this.uid}_${e.sectionName}`},e.getNodes())),this.isLayoutChanged=(e,t)=>(null==e?void 0:e.length)!==(null==t?void 0:t.length)||(e.forEach((e,i)=>{if(e.sectionName!==t[i].sectionName)return!0}),!1),this.uid=null!==(t=e.id)&&void 0!==t?t:(0,o.getUniqueId)()}componentDidMount(){this.createRenderedLayout(),i.EventDispatcher.dispatch(i.EventDispatcher.OVERRIDE_SHELL_BOTTOM_SPACING_EVENT_NANE,this.base,{fixedLength:!0})}createRenderedLayout(){const{layoutProvider:e,layout:t}=this.props;e.observeLayout(t,this.layoutHandler)}updateRenderedLayout(e,t){const{layout:i,layoutProvider:o}=this.props;null==t||t.unobserveLayout(e,this.layoutHandler),null==o||o.observeLayout(i,this.layoutHandler)}componentWillUnmount(){const e=this.props.layoutProvider,t=this.props.layout;null==e||e.unobserveLayout(t,this.layoutHandler)}componentDidUpdate(e,t,i){e.layout===this.props.layout&&e.layoutProvider===this.props.layoutProvider||this.updateRenderedLayout(e.layout,e.layoutProvider)}generateSectionLayouts(e){const t=[],i=e.displayProperties;return null==i||i.forEach((e,i)=>{t.push(this.createSectionLayout(e))}),t}createSectionLayout(e){const t=Object.keys(e)[0],i=e[t];return{sectionName:t,getPropertyValue:e=>"labelHint"===e?i.labelHint:null,getNodes:()=>{var e;return i.getNodes(null===(e=this.base)||void 0===e?void 0:e.parentElement)}}}render(e){var t,i;const{sectionLayouts:o}=this.state;if((null==o?void 0:o.length)>0){const r=(null===(i=null===(t=this.previousLayoutState)||void 0===t?void 0:t.sectionLayouts)||void 0===i?void 0:i.length)>0&&this.isLayoutChanged(this.previousLayoutState.sectionLayouts,o)&&"foldout"===this.previousActiveView?"none":e.animate;switch(e.orientation){case"horizontal":return(0,s.h)("div",{class:"oj-sp-foldout-layout"},(0,s.h)(a.HorizontalLayout,{uid:this.uid,animate:r,selectedPanel:e.selectedPanel,onSelectedPanelChanged:this.onSelectedPanelChanged,nextStep:e.nextStep,previousStep:e.previousStep,displayOptions:e.displayOptions,displayMode:e.displayMode,overview:e.overview,search:e.search,drilldown:e.drilldown,drilldownEnabled:"drilldown"===e.activeView,drilldownAlwaysRendered:!1,onSpGoToParent:e.onSpGoToParent,onSpInFlowBack:e.onSpInFlowBack,onSpPrevious:e.onSpPrevious,onSpNext:e.onSpNext},this.currentSections));case"vertical":{const t=this.getSectionLabels(o);return(0,s.h)("div",{class:"oj-sp-foldout-layout"},(0,s.h)(n.VerticalLayout,{uid:this.uid,animate:r,selectedPanel:e.selectedPanel,onSelectedPanelChanged:this.onSelectedPanelChanged,nextStep:e.nextStep,previousStep:e.previousStep,displayOptions:e.displayOptions,displayMode:e.displayMode,overview:e.overview,search:e.search,edit:e.edit,sectionLabels:t,editPanel:{panel:e.selectedPanel,enabled:"edit"===e.activeView},onSpGoToParent:e.onSpGoToParent,onSpInFlowBack:e.onSpInFlowBack,onSpPrevious:e.onSpPrevious,onSpNext:e.onSpNext},this.currentSections))}}}return(0,s.h)("div",null)}};r.defaultProps={animate:"auto",selectedPanel:0,orientation:"horizontal",displayOptions:{bidirectionalNavigation:!1,goToParent:!0,inFlowBack:!1,background:"default"},activeView:"foldout"},r._metadata={properties:{animate:{type:"string",enumValues:["none","auto"]},selectedPanel:{type:"number",writeback:!0},nextStep:{type:"object",properties:{id:{type:"string"},label:{type:"string"}}},previousStep:{type:"object",properties:{id:{type:"string"},label:{type:"string"}}},displayOptions:{type:"object",properties:{bidirectionalNavigation:{type:"boolean"},goToParent:{type:"boolean"},inFlowBack:{type:"boolean"},background:{type:"string",enumValues:["default","transparent"]}}},translations:{type:"object",properties:{goToParent:{type:"string"}}},orientation:{type:"string",enumValues:["vertical","horizontal"]},displayMode:{type:"string",enumValues:["mixed","light"]},activeView:{type:"string",enumValues:["edit","foldout","drilldown"]},layout:{type:"string"},layoutProvider:{type:"object"}},slots:{overview:{},search:{},drilldown:{},edit:{}},events:{spGoToParent:{},spInFlowBack:{},spPrevious:{},spNext:{}},extension:{_WRITEBACK_PROPS:["selectedPanel"],_READ_ONLY_PROPS:[]}},r=__decorate([(0,o.customElement)("oj-sp-dynamic-foldout-page"),__metadata("design:paramtypes",[Object])],r),t.DynamicFoldoutPage=r})),define("oj-sp/dynamic-foldout-page/loader",["require","exports","./dynamic-foldout-page"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicFoldoutPage=void 0,Object.defineProperty(t,"DynamicFoldoutPage",{enumerable:!0,get:function(){return i.DynamicFoldoutPage}})})),define("css!oj-sp/dynamic-dashboard-grid/dynamic-dashboard-grid-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/dynamic-dashboard-grid/dynamic-dashboard-grid",["require","exports","oj-sp/dashboard-grid/loader","ojs/ojvcomponent","preact","css!./dynamic-dashboard-grid-styles","oj-sp/dashboard-grid/loader"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicDashboardGrid=void 0;let a=class extends s.Component{constructor(e){var t;super(e),this.state={renderedLayout:null},this.layoutHandler=e=>{this.setState({renderedLayout:e})},this.setRef=e=>{this.element=e},this.uniqueId=null!==(t=e.id)&&void 0!==t?t:(0,o.getUniqueId)()}render(e){return(0,s.h)("div",{ref:this.setRef},this.renderDashboardGrid(e))}componentDidMount(){const{layout:e,layoutProvider:t}=this.props;t.observeLayout(e,this.layoutHandler)}updateRenderedLayout(e,t){const{layout:i,layoutProvider:o}=this.props;null==t||t.unobserveLayout(e,this.layoutHandler),o.observeLayout(i,this.layoutHandler)}componentWillUnmount(){const e=this.props.layoutProvider,t=this.props.layout;null==e||e.unobserveLayout(t,this.layoutHandler)}componentDidUpdate(e){e.layout===this.props.layout&&e.layoutProvider===this.props.layoutProvider||this.updateRenderedLayout(e.layout,e.layoutProvider)}renderDashboardGrid(e){var t,o;const a=null===(t=this.state.renderedLayout)||void 0===t?void 0:t.displayProperties;if(a){const t=[],n=null===(o=this.base)||void 0===o?void 0:o.parentElement;return a.forEach(i=>{const o=Object.keys(i)[0],a=i[o].getNodes(n),r=(0,s.h)(s.Fragment,{key:`${e.id}_${o}`},a);t.push(r)}),(0,s.h)(i.DashboardGrid,{id:this.uniqueId+"_dashboard_grid_layout",gridLayout:e.gridLayout,performanceTitle:e.performanceTitle,primaryPanelWidth:e.primaryPanelWidth,search:e.search},t)}return null}};a.defaultProps={},a._metadata={properties:{layout:{type:"string"},layoutProvider:{type:"object"},gridLayout:{type:"string"},performanceTitle:{type:"string"},primaryPanelWidth:{type:"string"}},slots:{search:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,o.customElement)("oj-sp-dynamic-dashboard-grid"),__metadata("design:paramtypes",[Object])],a),t.DynamicDashboardGrid=a})),define("oj-sp/dynamic-dashboard-grid/loader",["require","exports","./dynamic-dashboard-grid"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicDashboardGrid=void 0,Object.defineProperty(t,"DynamicDashboardGrid",{enumerable:!0,get:function(){return i.DynamicDashboardGrid}})})),define("css!oj-sp/dynamic-scoreboard/dynamic-scoreboard-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/dynamic-scoreboard/dynamic-scoreboard",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","ojs/ojarraydataprovider","css!./dynamic-scoreboard-styles","ojs/ojbutton","ojs/ojtoolbar","ojs/ojconveyorbelt","ojs/ojlistitemlayout","ojs/ojlistview","ojs/ojnavigationlist","oj-dynamic/providers/DynamicLayoutProvider","ojs/ojarraydataprovider"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicScoreboard=void 0;let n=class extends s.Component{constructor(e){var t;super(e),this.state={sectionsArray:null},this.layoutHandler=e=>{var t;const i=null==e?void 0:e.displayProperties;if(i){const e=[],o=null===(t=this.base)||void 0===t?void 0:t.parentElement;i.forEach(t=>{const i=Object.keys(t)[0],a=t[i].getNodes(o),n=(0,s.h)(s.Fragment,{key:i},a);e.push(n)});const n=new a(e.map(e=>({key:e.key,nodes:e})),{keyAttributes:"key"});this.setState({sectionsArray:n})}},this.renderKpiCard=e=>{const t="single"===this.props.selectionMode&&e.key===this.props.selection?"oj-sp-scoreboard-selected":"",i=0===e.index?"oj-sp-scoreboard-vertical-divider-hidden":"",o=(0,s.h)("div",{id:e.key+"_divider",class:"oj-sp-scoreboard-vertical-divider "+i});return(0,s.h)(s.Fragment,null,o,(0,s.h)("div",{class:"oj-sp-scoreboard-card-container "+t,id:`${this.uniqueId}_kpi_${e.key}`},e.data.nodes))},this.handleAnimateStart=e=>{e.preventDefault(),e.detail.endCallback()},this.setRef=e=>{this.element=e},this.setSelection=e=>{if(this.element){const t=e.detail.value[0];this.removeSelectionClass(),this.setSelectionClass(t);const i=this.element.querySelector(`#${this.uniqueId}_cb`),o=this.element.querySelector("#oj-sp-scoreboard_kpi_"+t);o&&i.scrollElementIntoView(o)}},this.removeSelectionClass=()=>{this.element.querySelectorAll("oj-sp-dynamic-scoreboard .oj-sp-scoreboard-selected").forEach(e=>{e.classList.remove("oj-sp-scoreboard-selected")})},this.setSelectionClass=e=>{var t,i;const o=this.element.querySelector(`#${this.uniqueId}_kpi_${e}`);o&&(o.classList.add("oj-sp-scoreboard-selected"),null===(i=(t=this.props).onSelectionChanged)||void 0===i||i.call(t,e))},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)()}shouldComponentUpdate(e,t){return!(this.props.selection!==e.selection)}render(e){return(0,s.h)("div",null,this.renderScoreboard(e))}componentDidMount(){const{layout:e,layoutProvider:t}=this.props;t.observeLayout(e,this.layoutHandler)}componentWillUnmount(){const e=this.props.layoutProvider,t=this.props.layout;null==e||e.unobserveLayout(t,this.layoutHandler)}componentDidUpdate(e){e.layout===this.props.layout&&e.layoutProvider===this.props.layoutProvider||this.updateRenderedLayout(e.layout,e.layoutProvider)}updateRenderedLayout(e,t){const{layout:i,layoutProvider:o}=this.props;null==t||t.unobserveLayout(e,this.layoutHandler),o.observeLayout(i,this.layoutHandler)}renderScoreboard(e){return this.state.sectionsArray?(0,s.h)("div",{ref:this.setRef,class:"oj-sp-scoreboard-contents"},(0,s.h)("oj-conveyor-belt",{id:this.uniqueId+"_cb",class:"scoreboard-modified-variables",tabIndex:0,"arrow-visibility":"auto",role:"group","aria-label":this.res.listOfScoreCards},(0,s.h)("oj-list-view",{id:"listview",class:"oj-sp-scoreboard-list-view",display:"card","aria-label":"list with static data",data:this.state.sectionsArray,onojAnimateStart:this.handleAnimateStart,onselectionChanged:this.setSelection,selectionMode:e.selectionMode},(0,s.h)("template",{slot:"itemTemplate",render:this.renderKpiCard})))):null}};n.defaultProps={selectionMode:"single"},n._metadata={properties:{layout:{type:"string"},layoutProvider:{type:"object"},selection:{type:"string",writeback:!0},selectionMode:{type:"string",enumValues:["none","single"]}},extension:{_WRITEBACK_PROPS:["selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},n=__decorate([(0,o.customElement)("oj-sp-dynamic-scoreboard"),__metadata("design:paramtypes",[Object])],n),t.DynamicScoreboard=n})),define("oj-sp/dynamic-scoreboard/loader",["require","exports","./dynamic-scoreboard"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicScoreboard=void 0,Object.defineProperty(t,"DynamicScoreboard",{enumerable:!0,get:function(){return i.DynamicScoreboard}})})),define("oj-sp/email-address-chip/logger-utils",["require","exports","ojs/ojlogger"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;t.Logger=class{constructor(e="",t=i){this.log=e?this.addPrefix(t.log,e):t.log,this.info=e?this.addPrefix(t.info,e):t.info,this.warn=e?this.addPrefix(t.warn,e):t.warn,this.error=e?this.addPrefix(t.error,e):t.error,this.option=t.option}addPrefix(e,t){return function(i,...o){"string"==typeof i?e(t+" "+i,...o):e(t,i,...o)}}}})),define("oj-sp/email-address-chip/email-address-classifier",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailAddressTypeForOracle=t.createRegexEmailAddressClassifier=t.ADDRESS_TYPE=void 0,function(e){e.INTERNAL="internal",e.EXTERNAL="external"}(i=t.ADDRESS_TYPE||(t.ADDRESS_TYPE={}));t.createRegexEmailAddressClassifier=e=>t=>t&&t.trim().match(e)?i.INTERNAL:i.EXTERNAL,t.getEmailAddressTypeForOracle=(0,t.createRegexEmailAddressClassifier)(/@oracle\.com$/)})),define("oj-sp/email-address-chip/email-address",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.isValidAddressString=t.emailAddressValueOps=t.renderEmailAddressAsString=t.RENDER_STRATEGY=void 0,function(e){e.NAME_OR_ADDRESS="nameOrAddress",e.NAME_AND_ADDRESS="nameAndAddress",e.ADDRESS_ONLY="addressOnly"}(i=t.RENDER_STRATEGY||(t.RENDER_STRATEGY={})),t.renderEmailAddressAsString=function(e,{address:t,displayName:o}){return t?e===i.NAME_OR_ADDRESS&&o?"":e===i.NAME_AND_ADDRESS&&o?function(e){return"<"+e+">"}(t):t:""};class o{constructor(e){this.emailAddressClassifier=e}toValue(e){var t,i;const o=e.split(/^((?:[^"]*"[^"]*")*[^"]*)</);if(o.length>1){const e=null===(t=o[o.length-1])||void 0===t?void 0:t.split(">")[0];return{displayName:null===(i=o[1])||void 0===i?void 0:i.trim(),address:e,addressType:this.getAddressType(e)}}const s=o[0];return{address:s,addressType:this.getAddressType(s)}}isTextAcceptable(e){return!!e}toText(e){return e.displayName?`${e.displayName} <${e.address}>`:e.address}getAddressType(e){return this.emailAddressClassifier(e)}}t.emailAddressValueOps=e=>new o(e);t.isValidAddressString=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})$/.test(String(e).toLowerCase())})),define("css!oj-sp/email-address-chip/email-address-chip-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/email-address-chip/email-address-chip",["require","exports","oj-sp/common-util/common-util","./logger-utils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","./email-address-classifier","./email-address","css!./email-address-chip-styles"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailAddressChip=void 0;const d={addressType:r.ADDRESS_TYPE.INTERNAL,selected:!1},c={isChipFocused:!1,isChipHovered:!1,isRemoveAnchorHovered:!1};let p=class extends n.Component{constructor(e){var t;super(e),this.renderStrategy=l.RENDER_STRATEGY.NAME_OR_ADDRESS,this.componentDidMount=()=>{},this.componentDidUpdate=(e,t)=>{},this.componentWillUnmount=()=>{},this.make_setState=e=>()=>{this.setState(e)},this.handleChipMouseEnter=this.make_setState({isChipHovered:!0}),this.handleChipMouseLeave=this.make_setState({isChipHovered:!1}),this.handleRemoveAnchorMouseEnter=this.make_setState({isRemoveAnchorHovered:!0}),this.handleRemoveAnchorMouseLeave=this.make_setState({isRemoveAnchorHovered:!1}),this.handleChipDblClick=e=>{var t,i;e.stopPropagation(),null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,u(this.props))},this.handleRemoveAnchorClick=e=>{e.preventDefault(),e.stopPropagation(),this.handleRemove()},this.handleKeyDown=e=>{var t,o;const{key:s}=e;s===i.KEY_NAME.BACKSPACE?(e.preventDefault(),e.stopPropagation(),this.handleRemove()):s!==i.KEY_NAME.ENTER&&s!==i.KEY_NAME.SPACE||(e.preventDefault(),e.stopPropagation(),null===(o=(t=this.props).onSpAction)||void 0===o||o.call(t,this.props))},this.handleChipFocus=e=>{var t,i;this.logger.log("Focus gained"),this.setState({isChipFocused:!0}),null===(i=(t=this.props).onSpFocus)||void 0===i||i.call(t,u(this.props))},this.handleChipBlur=e=>{var t,i;this.logger.log("Focus lost"),this.setState({isChipFocused:!1}),null===(i=(t=this.props).onSpBlur)||void 0===i||i.call(t,u(this.props))},this.handleRemove=()=>{var e,t;this.isRemoveEnabled()&&(null===(t=(e=this.props).onSpRemove)||void 0===t||t.call(e,u(this.props)))},this.res=Object.assign(Object.assign({},s),e.translations),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:"email_address_chip"+(0,a.getUniqueId)(),this.logger=new o.Logger(`[email-address-chip:${this.uniqueId}:${this.props.address}]`),this.divRef=(0,n.createRef)(),this.state=Object.assign({},c)}static getDerivedStateFromProps(e,t){return null}render(){const e=["oj-sp-email-address-chip","oj-sp-email-address-chip-var-"+this.getAddressTypeVariant(),this.props.selected&&"oj-selected",!this.isValid()&&"oj-sp-email-address-chip-invalid"].filter(Boolean).join(" ");return(0,n.h)("div",{class:e,ref:this.divRef,id:this.uniqueId,onKeyDown:this.handleKeyDown,onFocus:this.handleChipFocus,onBlur:this.handleChipBlur,onMouseEnter:this.handleChipMouseEnter,onMouseLeave:this.handleChipMouseLeave,tabIndex:-1,"aria-pressed":this.props.selected},(0,n.h)("div",{class:"oj-sp-email-address-chip__chrome"},(0,n.h)("div",{class:["oj-flex","oj-sm-flex-wrap-nowrap","oj-sm-align-items-center","oj-sm-padding-2x-start","oj-typography-body-sm","oj-sp-helper-white-space-nowrap","oj-sp-email-address-chip--clickable",this.state.isChipFocused&&"oj-focus",this.isRemoveEnabled()?"oj-sm-padding-1x-end":"oj-sm-padding-2x-end"].filter(Boolean).join(" ")},(0,n.h)("div",{class:["oj-flex-item","oj-sp-email-address-chip__content","oj-flex","oj-sm-flex-wrap-nowrap","oj-sm-align-items-center"].join(" "),onDblClick:this.handleChipDblClick},[this.maybeRenderInvalidAddressIcon(),this.maybeRenderAddressTypeIcon(),this.maybeRenderDisplayName(),this.maybeRenderAddress(),this.maybeRenderDivider()].filter(Boolean)),[this.maybeRenderRemoveAnchor()].filter(Boolean))))}focus(){var e,t;null===(t=null===(e=this.divRef)||void 0===e?void 0:e.current)||void 0===t||t.focus()}maybeRenderInvalidAddressIcon(){if(this.isValid())return null;const e=["oj-flex-item","oj-ux-ico-error-s",!this.props.selected&&"oj-icon-color-danger","oj-sm-padding-1x-end"].filter(Boolean).join(" ");return(0,n.h)("span",{"aria-hidden":"true",class:e})}maybeRenderAddressTypeIcon(){const e=(0===this.getAddressTypeVariant()?["oj-flex-item","oj-ux-ico-circle","oj-sm-padding-1x-end"]:[]).filter(Boolean).join(" ");return e&&(0,n.h)("span",{"aria-hidden":"true",class:e})}maybeRenderDisplayName(){return this.props.displayName&&this.renderStrategy!==l.RENDER_STRATEGY.ADDRESS_ONLY?(0,n.h)("span",{class:["oj-flex-item","oj-sp-email-address-chip__display-name"].filter(Boolean).join(" ")},this.props.displayName):null}maybeRenderAddress(){if(this.props.displayName&&this.renderStrategy===l.RENDER_STRATEGY.NAME_OR_ADDRESS)return null;const e=["oj-flex-item",this.props.displayName&&this.renderStrategy===l.RENDER_STRATEGY.NAME_AND_ADDRESS&&"oj-sm-margin-1x-start"].filter(Boolean).join(" ");return(0,n.h)("span",{class:e},(0,l.renderEmailAddressAsString)(this.renderStrategy,this.props))}maybeRenderDivider(){return this.isRemoveEnabled()?(0,n.h)("div",{"aria-orientation":"vertical",class:["oj-flex-item","oj-divider-start","oj-sp-email-address-chip__divider",this.props.selected&&"oj-color-invert","oj-sm-margin-2x-start"].filter(Boolean).join(" "),role:"separator"}):null}maybeRenderRemoveAnchor(){if(!this.isRemoveEnabled())return null;const e=["oj-flex-item","oj-sp-email-address-chip__remove-anchor","oj-sm-margin-1x-start","oj-sp-helper-text-decoration-none"].join(" "),t=["oj-ux-ico-close","oj-ux-icon-size-6x",this.props.selected&&"oj-color-invert",this.state.isRemoveAnchorHovered?"oj-icon-color-primary":"oj-icon-color-secondary"].filter(Boolean).join(" ");return(0,n.h)("a",{"aria-label":this.res.emailAddressChipRemove,class:e,id:this.uniqueId+"__remove-anchor",href:"#",onClick:this.handleRemoveAnchorClick,onMouseEnter:this.handleRemoveAnchorMouseEnter,onMouseLeave:this.handleRemoveAnchorMouseLeave,tabIndex:-1,title:this.res.emailAddressChipRemove},(0,n.h)("span",{"aria-hidden":"true",class:t}))}isRemoveEnabled(){return!0}isValid(){return(0,l.isValidAddressString)(this.props.address)}getAddressTypeVariant(){return this.props.addressType===r.ADDRESS_TYPE.INTERNAL?0:1}};function u(e){return{address:e.address,displayName:e.displayName}}p.defaultProps=Object.assign({},d),p._metadata={properties:{displayName:{type:"string"},address:{type:"string"},addressType:{type:"string",enumValues:["internal","external"]},selected:{type:"boolean"},translations:{type:"object",properties:{emailAddressChipRemove:{type:"string"}}}},events:{spAction:{},spRemove:{},spFocus:{},spBlur:{}}},p=__decorate([(0,a.customElement)("oj-sp-email-address-chip"),__metadata("design:paramtypes",[Object])],p),t.EmailAddressChip=p})),define("oj-sp/email-address-chip/loader",["require","exports","./email-address-chip"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailAddressChip=void 0,Object.defineProperty(t,"EmailAddressChip",{enumerable:!0,get:function(){return i.EmailAddressChip}})})),define("css!oj-sp/emo-button/emo-button-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/emo-button/emo-button",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojarraydataprovider","ojs/ojtranslation","ojs/ojresponsiveknockoututils","oj-sp/common-util/common-util","ojs/ojtracer","ojs/ojvcomponent","preact","css!./emo-button-styles","oj-sp/general-drawer-template/loader","ojs/ojbutton","ojs/ojcheckboxset","ojs/ojdefer","ojs/ojdrawerpopup","ojs/ojdialog","ojs/ojformlayout","ojs/ojmessage","ojs/ojvcomponent"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmoButton=void 0;const c="oj-sp-emojibtn-animate-full",p="bad",u="oj-sp-emo-btn-disabled",h="good",m="https://www.oracle.com/legal/terms.html",g="https://www.oracle.com/legal/privacy/privacy-policy.html",y="oj-sp-emojibtn-dummy-inner-hover",f="okay",b="oj-sp-emojibtn-dummy-outer-hover",v="oj-sp-emojibtn-popup-show";var j;!function(e){e.SUBMITTED="_emoji_feedback_submitted",e.CANCELLED="_emoji_feedback_cancelled"}(j||(j={}));const A=Symbol.for("trigger"),C="ojsp_emojibutton",E=window.Trace;let T=class extends d.Component{constructor(e){var t;super(e),this.screenRange=a.createScreenRangeObservable(),this.state={dynamicStatus:"",drawerOpenState:!1,emoMessage:[{closeAffordance:"none",severity:"confirmation",summary:this.props.acknowledgmentMessage?this.props.acknowledgmentMessage:i.emoDefaultAcknowledgementMessage}],emoPreviousResponse:"none",emotionResponse:"none",emotionResponseString:"none",happyDisplay:!1,isTracerFound:!(!E||!E.activeTracer),neutralDisplay:!1,screenRange:this.screenRange(),staticStatusPostfix:"",staticStatusPrefix:"",styleName:"",unhappyDisplay:!1,value:[]},this._getHelpHitMessage=e=>{const t=document.createElement("span");let i=e.replace(/\{emoTermsofUse\}/gi,`<a href='${m}' target='_blank'>${this.res.emoTermsofUse}</a>`);return i=i.replace(/\{emoPrivacyPolicy\}/gi,`<a href='${g}' target='_blank'>${this.res.emoPrivacyPolicy}</a>`),t.innerHTML=i,t},this._renderByScreen=()=>"sm"!==this.state.screenRange?[(0,d.h)("div",{class:"oj-sp-emojibtn-dummy-cta",role:"button","aria-disabled":this.props.disabled},(0,d.h)("span",{class:"oj-sp-dummy-btn-txt"},this.props.label)),(0,d.h)("oj-buttonset-one",{class:this.props.disabled?"oj-helper-hidden":"oj-sp-emojibtn-many",id:this.uniqueId+"_emo_btn_set","aria-label":this.res.emobuttonProximalAriaText,onvalueChanged:this._triggerDrawer,disabled:this.props.disabled,focusManagement:"none",ref:this.refEmoButtonSetOne},(0,d.h)("oj-option",{id:this.uniqueId+"_emo_btn_bad","aria-label":`${this.props.label} ${this.currentAriaEmotionMessage(this.res.emoUnhappy)}`,onMouseEnter:this._handleMouseenter,onMouseLeave:this._handleMouseleave,onfocusin:this._handleFocusIn.bind(this),onfocusout:this._handleFocusOut.bind(this),value:p,tabIndex:0,"aria-haspopup":"true",role:"button"}),(0,d.h)("oj-option",{id:this.uniqueId+"_emo_btn_okay","aria-label":`${this.props.label} ${this.currentAriaEmotionMessage(this.res.emoNeutral)}`,onMouseEnter:this._handleMouseenter,onMouseLeave:this._handleMouseleave,onfocusin:this._handleFocusIn.bind(this),onfocusout:this._handleFocusOut.bind(this),value:f,tabIndex:0,"aria-haspopup":"true",role:"button"}),(0,d.h)("oj-option",{id:this.uniqueId+"_emo_btn_good","aria-label":`${this.props.label} ${this.currentAriaEmotionMessage(this.res.emoHappy)}`,onMouseEnter:this._handleMouseenter,onMouseLeave:this._handleMouseleave,onfocusin:this._handleFocusIn.bind(this),onfocusout:this._handleFocusOut.bind(this),value:h,tabIndex:0,"aria-haspopup":"true",role:"button"})),(0,d.h)("div",{class:this.props.disabled?"oj-helper-hidden":"oj-sp-emoji-content"},(0,d.h)("span",{id:this.uniqueId+"_emo_btnicon_bad",class:"oj-sp-emoji-icon oj-ux-comp-emobutton-unhappy"}),(0,d.h)("span",{id:this.uniqueId+"_emo_btnicon_okay",class:"oj-sp-emoji-icon oj-ux-comp-emobutton-okay"}),(0,d.h)("span",{id:this.uniqueId+"_emo_btnicon_good",class:"oj-sp-emoji-icon oj-ux-comp-emobutton-happy"}))]:[(0,d.h)("oj-button",{id:this.uniqueId+"_emo_btn_sm_screen_cta",chroming:"callToAction",onojAction:this._triggerSmScreenDialog,class:"oj-button-sm oj-flex-item oj-sm-padding-4x-horizontal oj-sm-margin-4x-bottom",disabled:this.props.disabled,"aria-haspopup":"dialog",label:this.props.label})],this._emoResponseDialogByScreenMobile=()=>{if("sm"===this.state.screenRange)return(0,d.h)("oj-dialog",{id:this.uniqueId+"_emo_feedbackDialog_smscreen",class:"oj-sp-emojibtn-dialog oj-sp-emojibtn-sm-dialog oj-sp-emojibtn-dialog-smscreen",ref:this.refEmoSmScreenDialog,tabIndex:-1},(0,d.h)("div",{slot:"header",class:"oj-sp-emo-dialog-header"},(0,d.h)("oj-messages",{id:this.uniqueId+"_emo_mobile_messages_id",messages:this.state.emoMessage,displayOptions:this.computedCategoryOption})),(0,d.h)("div",{slot:"body",class:"oj-sp-emojibtn-dialog-body"},(0,d.h)("h1",{id:this.uniqueId+"_emo_dialog_smscreen_title_id",class:"oj-typography-heading-sm oj-sm-margin-1x-top oj-sm-margin-8x-bottom"},this.res.emoMobileDrawerTitle),(0,d.h)("oj-button",{id:`${this.uniqueId}_emo_iconbtn_smscreen_${p}`,onojAction:this._changeDecisionHandlerSmScreen,class:"oj-button-lg oj-sp-dialog-btn",display:"icons",tabIndex:0,label:this.res.emoUnhappyLabel},(0,d.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-dialog oj-ux-comp-emobutton-unhappy"})),(0,d.h)("oj-button",{id:`${this.uniqueId}_emo_iconbtn_smscreen_${f}`,onojAction:this._changeDecisionHandlerSmScreen,class:"oj-button-lg oj-sp-dialog-btn",display:"icons",tabIndex:0,label:this.res.emoNeutralLabel},(0,d.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-dialog oj-ux-comp-emobutton-okay"})),(0,d.h)("oj-button",{id:`${this.uniqueId}_emo_iconbtn_smscreen_${h}`,onojAction:this._changeDecisionHandlerSmScreen,class:"oj-button-lg oj-sp-dialog-btn",display:"icons",tabIndex:0,label:this.res.emoHappyLabel},(0,d.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-dialog oj-ux-comp-emobutton-happy"}))))},this._emoResponseDrawerByScreen=()=>(0,d.h)("oj-drawer-popup",{id:this.uniqueId+"_emo_feedbackDrawer",class:"oj-sp-feedback-drawer",edge:"end",modality:"modal",opened:this.state.drawerOpenState,"auto-dismiss":"none","close-gesture":"none",onojBeforeClose:this._stopClosing},(0,d.h)("oj-sp-general-drawer-template",{id:this.uniqueId+"_emo_feedbackDrawer_template","drawer-size":"sm","drawer-title":this._feedbackDrawerTitle(),primaryAction:{label:this.res.emoSendFeedback,display:"on"},closeAction:{label:this.res.emoCancelFeedback,display:"on"},onspClose:this._cancelFeedback,onspPrimaryAction:this._sendFeedback},(0,d.h)("p",{id:this.uniqueId+"_emo_drawer_title_id",class:"oj-typography-body-xl oj-sm-margin-1x-top"},this.res.emoDrawerTitle),(0,d.h)("p",{id:this.uniqueId+"_emo_drawer_responed_title_id",role:"alert",class:"oj-typography-body-md oj-text-color-secondary oj-sm-margin-6x-vertical"},this.state.emotionResponseString),(0,d.h)("div",{class:"oj-sm-margin-10x-bottom",id:this.uniqueId+"_emo_drawer_buttonset","aria-labelledby":`${this.uniqueId}_emo_drawer_title_id ${this.uniqueId}_emo_drawer_responed_title_id`,role:"radiogroup"},(0,d.h)("oj-button",{id:`${this.uniqueId}_emo_iconbtn_${p}`,onojAction:this._changeDecisionHandler,onfocusin:this._handleChangeDecisionFocusIn,class:this.state.unhappyDisplay?`oj-button-lg oj-sp-drawer-btn oj-sp-${this.state.emotionResponse}-drawer-btn`:"oj-button-lg oj-sp-drawer-btn",display:this.state.unhappyDisplay?"all":"icons","aria-label":this.currentAriaEmotionMessage(this.res.emoUnhappy),role:"radio","aria-checked":this.state.unhappyDisplay?"true":"false",tabIndex:-1,label:this.res.emoUnhappyLabel},(0,d.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-drawer oj-ux-comp-emobutton-unhappy"})),(0,d.h)("oj-button",{id:`${this.uniqueId}_emo_iconbtn_${f}`,onojAction:this._changeDecisionHandler,onfocusin:this._handleChangeDecisionFocusIn,class:this.state.neutralDisplay?`oj-button-lg oj-sp-drawer-btn oj-sp-${this.state.emotionResponse}-drawer-btn`:"oj-button-lg oj-sp-drawer-btn",display:this.state.neutralDisplay?"all":"icons","aria-label":this.currentAriaEmotionMessage(this.res.emoNeutral),role:"radio","aria-checked":this.state.neutralDisplay?"true":"false",tabIndex:-1,label:this.res.emoNeutralLabel},(0,d.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-drawer oj-ux-comp-emobutton-okay"})),(0,d.h)("oj-button",{id:`${this.uniqueId}_emo_iconbtn_${h}`,onojAction:this._changeDecisionHandler,onfocusin:this._handleChangeDecisionFocusIn,class:this.state.happyDisplay?`oj-button-lg oj-sp-drawer-btn oj-sp-${this.state.emotionResponse}-drawer-btn`:"oj-button-lg oj-sp-drawer-btn",display:this.state.happyDisplay?"all":"icons","aria-label":this.currentAriaEmotionMessage(this.res.emoHappy),role:"radio","aria-checked":this.state.happyDisplay?"true":"false",tabIndex:-1,label:this.res.emoHappyLabel},(0,d.h)("span",{slot:"startIcon",class:"oj-sp-emoji-icon-drawer oj-ux-comp-emobutton-happy"}))),(0,d.h)("oj-form-layout",{"max-columns":"1",direction:"row"},(0,d.h)("oj-checkboxset",{id:this.uniqueId+"_emo_btn_drawer_checkboxvalue",options:this.feedbackValues,value:this.state.value,onvalueChanged:this.feebackChangeHandler,"aria-describedby":this.uniqueId+"_emo_addition_check_group"})),(0,d.h)("p",{class:"oj-typography-body-xs oj-text-color-secondary oj-sm-margin-7x-top",ref:this.refhelpHint}))),this._stopClosing=e=>{e.preventDefault()},this.feebackChangeHandler=e=>{this.setState({value:e.detail.value})},this.datacCollectionMethod=()=>{var e,t;const i=null!==(t=null===(e=this.props.customFeedback)||void 0===e?void 0:e.slice(0,2))&&void 0!==t?t:[];return this.feedbackContent.slice(0,this.feedbackContent.length-i.length).concat(i)},this.currentAriaEmotionMessage=e=>s.applyParameters(this.res.emobuttonAssistiveText,{mood:e}),this.mouseEnterEmoTarget=e=>{!this.props.disabled&&"sm"!==this.state.screenRange&&this.emoBtnPopup&&this.outerTarget?(this.outerTarget.classList.add(b),this.emoBtnPopup.classList.add(v),this.setState({dynamicStatus:"",staticStatusPostfix:"",staticStatusPrefix:this.res.emobuttonProximalAriaText}),e.preventDefault()):this.props.disabled&&this.outerTarget&&this.outerTarget.classList.add(u)},this.mouseLeaveEmoTarget=e=>{var t,i,o;this.emoBtnPopup&&(null===(t=this.outerTarget)||void 0===t?void 0:t.classList.contains(b))&&(null===(i=this.outerTarget)||void 0===i||i.classList.remove(b),null===(o=this.emoBtnPopup)||void 0===o||o.classList.remove(v)),e.preventDefault()},this.focusOutEmoTarget=e=>{var t,i;try{const o=document.getElementById(e.target.id);o&&!o.closest("oj-sp-emojibtn-container")&&(null===(t=this.outerTarget)||void 0===t||t.classList.remove(b),null===(i=this.emoBtnPopup)||void 0===i||i.classList.remove(v))}catch(e){}},this.currentEmotionMessage=e=>{const t=e.split("{mood}"),i=t.shift();return{assistivePostfix:t.pop(),assistivePrefix:i}},this.assistiveTextAsign=e=>{e!==f?this.setState({dynamicStatus:` ${e} `,staticStatusPostfix:this.currentEmotionMessage(this.res.emobuttonAssistiveText).assistivePostfix,staticStatusPrefix:this.currentEmotionMessage(this.res.emobuttonAssistiveText).assistivePrefix,styleName:"oj-sp-emojibtn-assistive-text-"+e}):this.setState({dynamicStatus:` ${e} `,staticStatusPostfix:this.currentEmotionMessage(this.res.emobuttonAssistiveNeutralText).assistivePostfix,staticStatusPrefix:this.currentEmotionMessage(this.res.emobuttonAssistiveNeutralText).assistivePrefix,styleName:"oj-sp-emojibtn-assistive-text-"+e})},this._handleKeyPress=e=>{var t,i,o;if(!this.props.disabled){const s=e.target.value;"Enter"!==e.code&&"Space"!==e.code||(this.bgButton.value=s,null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,{actionId:e.target.value,feedbackEnabled:this.state.isTracerFound,target:e.target}),this.outerTarget.blur()),this.emoBtnPopup&&(null===(o=this.outerTarget)||void 0===o?void 0:o.classList.contains(b))&&(this.outerTarget.classList.remove(b),this.emoBtnPopup.classList.remove(v)),removeEventListener("keypress",this._handleKeyPress,!1)}},this._handleDrawerButtonKeyPress=e=>{const t=e.target.title,i=s.applyParameters(this.res.emoDrawerModifiedResponseText,{mood:t.toLowerCase()});"Enter"!==e.code&&"Space"!==e.code||this.setSelectionState(i,t),removeEventListener("keypress",this._handleDrawerButtonKeyPress,!1)},this._handleFocusIn=e=>{if(!this.props.disabled&&"sm"!==this.state.screenRange){const t=e.target,i=t.parentElement.nextSibling;try{-1!==i.tabIndex&&(i.tabIndex=-1,i.setAttribute("role","presentation"))}catch(e){}"sm"!==this.state.screenRange&&t.id!==this.uniqueId+"_emo_btn_one_wrapper"&&(t.id===this.uniqueId+"_emo_btn_one_wrapper"?this.mouseEnterEmoTarget(e):this._handleMouseenter(e),t.addEventListener("keypress",this._handleKeyPress))}},this._handleFocusOut=e=>{var t,i;if(!this.props.disabled&&"sm"!==this.state.screenRange){const o=e.target;"sm"!==this.state.screenRange&&o.id!==this.uniqueId+"_emo_btn_one_wrapper"&&(o.id===this.uniqueId+"_emo_btn_one_wrapper"?this.mouseLeaveEmoTarget(e):this._handleMouseleave(e),null===(t=this.outerTarget)||void 0===t||t.classList.remove(b),null===(i=this.emoBtnPopup)||void 0===i||i.classList.remove(v),removeEventListener("keypress",this._handleKeyPress,!1))}},this._handleChangeDecisionFocusIn=e=>{const t=e.target;"sm"!==this.state.screenRange&&t.addEventListener("keypress",this._handleDrawerButtonKeyPress)},this._handleMouseenter=e=>{if(!this.props.disabled||"sm"!==this.state.screenRange){this.timeTrackSwitch||(this.startTime=+new Date,this.timeTrackSwitch=!0);const t=e.target.value,i=document.getElementById(`${this.uniqueId}_emo_btnicon_${t}`);this.bgButton.classList.add("oj-sp-emojibtn-dummy-cta-"+t),this.outerTarget.classList.contains(b)&&(this.emoBtnPopup.classList.remove(v),this.outerTarget.classList.remove(b)),this.outerTarget.classList.contains(y)||(this.emoBtnPopup.classList.add(v),this.outerTarget.classList.add(y)),i.classList.add(c),this.assistiveTextAsign(t)}e.stopPropagation()},this._handleMouseleave=e=>{if(!this.props.disabled||"sm"!==this.state.screenRange){const t=e.target.value,i=document.getElementById(`${this.uniqueId}_emo_btnicon_${t}`);this.outerTarget.classList.contains(y)&&this.outerTarget.classList.remove(y),this.outerTarget.classList.contains(b)||this.outerTarget.classList.add(b),t===h&&this.outerTarget.classList.contains(b)&&(this.outerTarget.classList.remove(b),this.emoBtnPopup.classList.remove(v)),this.bgButton.classList.remove("oj-sp-emojibtn-dummy-cta-"+t),i.classList.remove(c),this.setState({dynamicStatus:"",staticStatusPostfix:"",staticStatusPrefix:this.res.emobuttonProximalAriaText,styleName:""})}e.stopPropagation()},this._changeDecisionHandlerSmScreen=e=>{const t=e.target.id.split("_").pop().trim();this.setState({emoPreviousResponse:t}),this.setSelectionState(this.res.emoDrawerResponseText,t),this.emoBtnSmScreenDialog.close(),this.setState({drawerOpenState:!0})},this._changeDecisionHandler=e=>{const t=e.target.id.split("_").pop().trim(),i=e.target.label,o=s.applyParameters(this.res.emoDrawerModifiedResponseText,{mood:i.toLowerCase()});this.setSelectionState(o,t)},this.setSelectionState=(e,t)=>{switch(t){case h:this.setState({emotionResponse:t,emotionResponseString:e,happyDisplay:!0,neutralDisplay:!1,unhappyDisplay:!1});break;case f:this.setState({emotionResponse:t,emotionResponseString:e,happyDisplay:!1,neutralDisplay:!0,unhappyDisplay:!1});break;case p:this.setState({emotionResponse:t,emotionResponseString:e,happyDisplay:!1,neutralDisplay:!1,unhappyDisplay:!0});break;default:this.setState({emotionResponse:"none",emotionResponseString:"none",happyDisplay:!1,neutralDisplay:!1,unhappyDisplay:!1})}},this._cancelFeedback=e=>{var t,i;const o=e.target.id;null===(i=(t=this.props).onSpFeedbackAction)||void 0===i||i.call(t,{actionId:o+j.CANCELLED,feedbackEnabled:this.state.isTracerFound,target:e.target}),this.telemetryComponentEvent("onSpFeedbackAction",e=>{e.setAttribute(C+"_feedback",this.state.emoPreviousResponse),e.setAttribute(C+"_hoverTiming",this.endTime),e.setAttribute(C+"_submitTiming",this.submitEndTime),e.setAttribute(C+"_feedbackDetails",null),e.setAttribute(C+"_feedbackPrevious",this.state.emoPreviousResponse),e.setAttribute(C+"_id",`${o}${j.CANCELLED}`),e.end()}),this.setState({value:[],drawerOpenState:!1})},this._triggerDrawer=e=>{var t,i;if(this.bgButton.value){null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,{actionId:e.target.value,feedbackEnabled:this.state.isTracerFound,target:e.target}),this.timeTrackSwitch&&(this.endTime=+new Date-this.startTime,this.submitStartTime=+new Date,this.timeTrackSwitch=!1);const o=e.target.value;this.setState({emoPreviousResponse:o}),this.setSelectionState(this.res.emoDrawerResponseText,o)}this.bgButton.value=null,e.stopPropagation()},this._triggerJetCtaClick=e=>{var t,i;null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,{actionId:e.target.value,feedbackEnabled:this.state.isTracerFound,target:e.target})},this._triggerSmScreenDialog=e=>{var t,i;null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,{actionId:"emoButtonMobile",feedbackEnabled:this.state.isTracerFound,target:e.target}),this.setState({emotionResponse:"none",emotionResponseString:this.res.emoDrawerResponseText,happyDisplay:!1,neutralDisplay:!1,unhappyDisplay:!1})},this._sendFeedback=e=>{var t,i;const o=e.target.id,s=this.feedbackValues.data,a=this.state.value,n=[];this.submitEndTime=+new Date-this.submitStartTime,null===(i=(t=this.props).onSpFeedbackAction)||void 0===i||i.call(t,{actionId:o+j.SUBMITTED,feedbackEnabled:this.state.isTracerFound,target:e.target}),a&&a.forEach(e=>{s.forEach(t=>{t.value===e&&n.push(t)})}),this.telemetryComponentEvent("onSpFeedbackAction",e=>{e.setAttribute(C+"_feedback",this.state.emotionResponse),e.setAttribute(C+"_hoverTiming",this.endTime),e.setAttribute(C+"_submitTiming",this.submitEndTime),n.length>0?n.forEach((t,i)=>{e.setAttribute(`${C}_feedbackDetails__${i}__label`,t.label),e.setAttribute(`${C}_feedbackDetails__${i}__value`,t.value)}):e.setAttribute(C+"_feedbackDetails","none"),e.setAttribute(C+"_feedbackPrevious",this.state.emoPreviousResponse),e.setAttribute(C+"_id",`${o}${j.SUBMITTED}`),e.end()}),this.setState({value:[],drawerOpenState:!1})},this.refEmoWrapperDiv=e=>{this.outerTarget=e},this.refEmoButtonSetOne=e=>{this.bgButton=e},this.refEmoSmScreenDialog=e=>{this.emoBtnSmScreenDialog=e},this.refhelpHint=e=>{this.helpHint=e},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,l.getUniqueId)(),this.timeTrackSwitch=!1,this.mountBusyResolve=(0,n.setBusyResolve)(this.outerTarget,{description:"Emobutton - with feedback render"}),this.tracer=(0,r.getTracerProvider)().getTracer(C);const A=new Map;this.oTelcontext={getValue:e=>A.get(e),setValue(e,t){return A.set(e,t),this},deleteValue(e){return A.delete(e),this}},this.computedCategoryOption={category:"none"},this.feedbackContent=[{label:this.res.emoResponseItemEasy,value:this.res.emoResponseItemEasy.replace(/\s/g,"").toLocaleLowerCase()},{label:this.res.emoResponseItemAppealing,value:this.res.emoResponseItemAppealing.replace(/\s/g,"").toLocaleLowerCase()},{label:this.res.emoResponseItemCouldBetter,value:this.res.emoResponseItemCouldBetter.replace(/\s/g,"").toLocaleLowerCase()},{label:this.res.emoResponseItem1,value:this.res.emoResponseItem1.replace(/\s/g,"").toLocaleLowerCase()},{label:this.res.emoResponseItem2,value:this.res.emoResponseItem2.replace(/\s/g,"").toLocaleLowerCase()}],this.feedbackValues=new o(this.datacCollectionMethod(),{keyAttributes:"value"})}static getDerivedStateFromProps(e,t){t=Object.assign({},t);const{acknowledgmentMessage:o}=e;return o!==t.emoMessage[0].summary&&(t.emoMessage=o?[{closeAffordance:"none",severity:"confirmation",summary:o}]:[{closeAffordance:"none",severity:"confirmation",summary:i.emoDefaultAcknowledgementMessage}]),t}render(e){const t=(0,d.h)("div",{id:this.uniqueId+"_emo_assistive_popup",class:"sm"!==this.state.screenRange&&"end"===e.assistivePosition?"oj-sp-emobtn-assistive-popup oj-sp-emobtn-assistive-popup-end":"oj-sp-emobtn-assistive-popup oj-sp-emobtn-assistive-popup-start"},(0,d.h)("span",{class:"oj-typography-body-xs"},this.state.staticStatusPrefix,(0,d.h)("span",{class:this.state.styleName},this.state.dynamicStatus),this.state.staticStatusPostfix));return this.state.isTracerFound&&(0,n.isClsTraceEnabled)()?(0,d.h)("div",{class:"sm"===this.state.screenRange?"oj-sp-emojibtn-wrapper oj-sp-emojibtn-sm-screen":"oj-sp-emojibtn-wrapper"},(0,d.h)("div",null,(0,d.h)("div",{class:e.disabled?"oj-sp-emojibtn-container oj-sp-emo-btn-disabled":"oj-sp-emojibtn-container",id:this.uniqueId+"_emo_btn_one_wrapper",onfocusin:this._handleFocusIn.bind(this),onfocusout:this._handleFocusOut.bind(this),ref:this.refEmoWrapperDiv,"aria-label":this.res.emobuttonProximalAriaText},this._renderByScreen()),t),(0,d.h)("div",null,this._emoResponseDrawerByScreen()),(0,d.h)("div",null,this._emoResponseDialogByScreenMobile())):(0,d.h)("div",{class:"sm"===this.state.screenRange?"oj-sp-emojibtn-wrapper oj-sp-emojibtn-sm-screen":"oj-sp-emojibtn-wrapper"},(0,d.h)("div",{class:"sm"===this.state.screenRange?"oj-sp-emojibtn-container":""},(0,d.h)("oj-button",{id:this.uniqueId+"_emo_btn_jet_cta",class:"sm"===this.state.screenRange?"oj-sp-emo-button-plain oj-button-sm oj-flex-item oj-sm-padding-4x-horizontal oj-sm-margin-4x-bottom":"oj-sp-emo-button-plain",chroming:"callToAction",onojAction:this._triggerJetCtaClick,disabled:this.props.disabled},this.props.label)))}openFeedback(){var e;this.outerTarget&&("sm"!==this.state.screenRange?(this.setState({drawerOpenState:!0}),this.bgButton.value=null):null===(e=this.emoBtnSmScreenDialog)||void 0===e||e.open(),this.outerTarget.classList.remove(b),this.emoBtnPopup.classList.remove(v))}componentDidMount(){var e;if(this.state.isTracerFound&&(0,n.isClsTraceEnabled)()&&(null===(e=this.helpHint)||void 0===e||e.appendChild(this._getHelpHitMessage(this.res.emoLegalDisclaimer)),this.emoBtnPopup=this.outerTarget.nextElementSibling,"sm"!==this.state.screenRange))try{this.outerTarget.addEventListener("mouseenter",this.mouseEnterEmoTarget),this.outerTarget.addEventListener("mouseleave",this.mouseLeaveEmoTarget),document.body.addEventListener("click",this.focusOutEmoTarget)}catch(e){}this.screenRange.subscribe(e=>{this.setState({screenRange:e})}),this.mountBusyResolve()}componentDidUpdate(e,t){this._isCustomerFeedbackChanged(e)&&(this.feedbackValues=new o(this.datacCollectionMethod(),{keyAttributes:"value"}))}componentWillUnmount(){var e,t;null===(e=this.outerTarget)||void 0===e||e.removeEventListener("mouseenter",this.mouseEnterEmoTarget,!0),null===(t=this.outerTarget)||void 0===t||t.removeEventListener("mouseleave",this.mouseLeaveEmoTarget,!0),document.body.removeEventListener("click",this.focusOutEmoTarget,!0)}telemetryComponentEvent(e,t){return this.oTelcontext.setValue(A,e),this.tracer.startActiveSpan("onSpFeedbackAction",{},this.oTelcontext,t)}_isCustomerFeedbackChanged(e){var t;let i=!1;return null===(t=this.props.customFeedback)||void 0===t||t.forEach((t,o)=>{var s,a;t.value===(null===(s=e.customFeedback[o])||void 0===s?void 0:s.value)&&t.label===(null===(a=e.customFeedback[o])||void 0===a?void 0:a.label)||(i=!0)}),i}_feedbackDrawerTitle(){return"sm"!==this.state.screenRange?this.props.acknowledgmentMessage?this.props.acknowledgmentMessage:i.emoDefaultAcknowledgementMessage:this.res.emoMobileDrawerAcknowledgement}};T.defaultProps={assistivePosition:"end",disabled:!1,label:i.submit},T._metadata={properties:{label:{type:"string"},disabled:{type:"boolean"},assistivePosition:{type:"string",enumValues:["start","end"]},acknowledgmentMessage:{type:"string"},customFeedback:{type:"Array<object>"}},events:{spAction:{},spFeedbackAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]},methods:{openFeedback:{}}},T=__decorate([(0,l.customElement)("oj-sp-emo-button"),__metadata("design:paramtypes",[Object])],T),t.EmoButton=T})),define("oj-sp/emo-button/loader",["require","exports","./emo-button"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmoButton=void 0,Object.defineProperty(t,"EmoButton",{enumerable:!0,get:function(){return i.EmoButton}})})),define("oj-sp/expandable-list-item/components/CollapsibleHeader",["require","exports","preact","preact/compat","preact/hooks","oj-sp/common/badge","oj-sp/list-item-template/loader"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=(0,o.memo)(e=>{const t=(0,s.useMemo)(()=>{let t;return e.badge&&(t=e.badge,t.position=a.BadgePosition.trailing),t},[e.badge]),o=(0,s.useMemo)(()=>{var t;const i=[];let o;const s={primaryText:e.itemTitle,secondaryText:e.itemSubtitle};let a;(null===(t=e.icon)||void 0===t?void 0:t.class)&&(s.icon={class:e.icon.class,altText:e.itemTitle+" "+e.icon.altText,circleColor:"neutral"}),e.additionalInfo||e.secondaryText?a={metaText:e.metaText,primaryText:e.additionalInfo,secondaryText:e.secondaryText}:s.metaText=e.metaText,i.push(s),a?(i.push(a),o={columnLayout:"two-split6-6"}):o={columnLayout:"one"};return{columns:i,displayOptions:o}},[e.itemTitle,e.itemSubtitle,e.metaText,e.additionalInfo,e.secondaryText,e.icon]),n=(0,s.useMemo)(()=>{let t;return e.navigationAction&&(t=e.navigationAction,t.applyTo="column2-secondary"),t},[e.navigationAction]);return(0,i.h)("oj-sp-list-item-template",{class:"oj-sm-12 oj-sp-expandable-lit-dyn-pad-override",columns:o.columns,badge:t,displayOptions:o.displayOptions,navigationAction:n,secondaryActions:e.secondaryActions,onspSecondaryAction:t=>{var i,o;const s=null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.actionId;null===(o=e.onSpSecondaryAction)||void 0===o||o.call(e,{actionId:s}),t.stopPropagation()},onspNavigationAction:t=>{var i;null===(i=e.onSpNavigationAction)||void 0===i||i.call(e),t.stopPropagation()}})});t.default=n})),define("oj-sp/expandable-list-item/components/ExpandableToolbar",["require","exports","preact","preact/compat","preact/hooks","ojs/ojlogger","oj-sp/common/action","oj-sp/list-item-template/loader"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=(0,o.memo)(e=>{const{toolbarAriaLabel:t,detailActions:o,isSmallScreen:r,toolBarId:l,onSpDetailAction:d,detailToolbarRef:c}=e,p=(0,s.useMemo)(()=>{if(o){const e=[];let t=!1;for(let i=0;i<o.length&&e.length<3;i++){const s=Object.assign({},o[i]);s&&(s.id&&s.label?void 0!==s.display&&"off"===s.display||(s.type===n.ActionType.PROMOTED&&(t?(a.warn("Only one detail action can be promoted. The others will be set to be default."),s.type=n.ActionType.DEFAULT):t=!0),e.push(s)):a.error("Invalid detail action - id and label are required - id: "+s.id+" label: "+s.label))}const i=[];for(let t=0;t<e.length;t++)e[t].type===n.ActionType.PROMOTED&&i.push(e[t]);for(let t=0;t<e.length;t++)e[t].type===n.ActionType.DEFAULT&&i.push(e[t]);for(let t=0;t<e.length;t++)e[t].type===n.ActionType.DEEMPHASIZED&&i.push(e[t]);return i}},[e.detailActions]),u=e=>(0,i.h)("oj-button",{id:`${l}_detail_${e.id}`,disabled:"disabled"===e.display,chroming:e.type&&"promoted"!==e.type?"default"===e.type?"solid":"borderless":"outlined",onojAction:e=>(e=>{null==d||d(e),e.stopPropagation()})(e),class:r?"oj-sm-width-full":""},(0,i.h)("span",null,e.label));return(0,i.h)("div",null,(null==p?void 0:p.length)>0&&(0,i.h)("oj-toolbar",{"aria-label":t,class:"oj-sm-padding-0 oj-sp-template-wrapper oj-sp-expandable-list-full-width "+(r?" oj-sm-flex oj-sm-flex-direction-column ":" oj-sm-flex-wrap-nowrap"),ref:c},p.map((e,t)=>r?(0,i.h)("div",{class:"oj-flex-item oj-sm-width-full"+(t===p.length-1?"":" oj-sm-padding-4x-bottom")},u(e)):u(e))))});t.default=r})),define("css!oj-sp/expandable-list-item/expandable-list-item",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/expandable-list-item/expandable-list-item",["require","exports","preact","ojs/ojvcomponent","ojs/ojcontext","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","./components/CollapsibleHeader","./components/ExpandableToolbar","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojcollapsible","ojs/ojtoolbar","css!./expandable-list-item"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandableListItem=void 0;let c=class extends i.Component{constructor(e){var t;super(e),this.expandableContainerRef=(0,i.createRef)(),this.headerRef=(0,i.createRef)(),this.detailToolbarRef=(0,i.createRef)(),this.state={screenRange:null},this.beforeExpandHandler=e=>{var t,i;e.detail.originalEvent&&(null===(i=(t=this.props).onSpBeforeDetailExpand)||void 0===i||i.call(t),e.preventDefault())},this.beforeCollapseHandler=e=>{var t,i;e.detail.originalEvent&&(null===(i=(t=this.props).onSpBeforeDetailCollapse)||void 0===i||i.call(t),e.preventDefault())},this.detailActionHandler=async e=>{var t,i;const o=s.getContext(this.base).getBusyContext();this.busyResolve=o.addBusyState({description:"Expandable List Item detail action handling"});const a=e.target.id,n=a.slice(a.indexOf("_detail_")+8);this.expandableContainerRef.current&&await s.getContext(this.expandableContainerRef.current).getBusyContext().whenReady(),null===(i=(t=this.props).onSpDetailAction)||void 0===i||i.call(t,{actionId:n}),this.busyResolve()},this.navigationActionHandler=()=>{var e,t;null===(t=(e=this.props).onSpNavigationAction)||void 0===t||t.call(e)},this.secondaryActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpSecondaryAction)||void 0===i||i.call(t,e)},this.onExpandedChanged=e=>{var t,i;null===(i=(t=this.props).onExpandedChanged)||void 0===i||i.call(t,e.detail.value)},this.onHoverHandler=e=>{var t,i;"mouseenter"===e.type?null===(t=this.base)||void 0===t||t.classList.add("oj-sp-expandable-list-item-container-hover"):"mouseleave"===e.type&&(null===(i=this.base)||void 0===i||i.classList.remove("oj-sp-expandable-list-item-container-hover"))},this.componentDidUpdate=(e,t)=>{this.refreshToolbar()},this.refreshToolbar=async()=>{var e;const t=this.base;t&&(await s.getContext(t).getBusyContext().whenReady(),this.detailToolbarRef.current&&(null===(e=this.detailToolbarRef.current)||void 0===e||e.refresh()))},this.isSmallScreen=()=>d.compare(this.screenRange(),d.SCREEN_RANGE.SM)<=0,this.uid=null!==(t=this.props.id)&&void 0!==t?t:"eli_"+(0,o.getUniqueId)(),this.res=Object.assign({},a),this.initResponsiveUtils(),this.isExpandedUpdatedFromInternal=!1}initResponsiveUtils(){this.screenRange=l.createScreenRangeObservable(),this.setState({screenRange:this.screenRange()}),this.screenRange.subscribe(e=>{this.setState({screenRange:e})})}async setExpandStatus(e){var t,i;null===(i=(t=this.props).onExpandedChanged)||void 0===i||i.call(t,e);const o=this.base;o&&await s.getContext(o).getBusyContext().whenReady()}render(e){const{uid:t,res:o}=this;return(0,i.h)("div",{"data-oj-context":!0,class:"oj-sp-expandable-list-item-container oj-sp-template-wrapper",ref:e=>this.base=e},(0,i.h)("oj-collapsible",{expanded:!!this.props.expanded,onexpandedChanged:this.onExpandedChanged,onojBeforeExpand:this.beforeExpandHandler,onojBeforeCollapse:this.beforeCollapseHandler},(0,i.h)("div",{slot:"header",class:"oj-sm-flex-wrap-nowrap oj-flex oj-sm-padding-4x-start oj-sm-padding-3x-vertical","aria-label":e.itemTitle,ref:this.headerRef,onMouseEnter:this.onHoverHandler,onMouseLeave:this.onHoverHandler},(0,i.h)(n.default,{itemTitle:e.itemTitle,itemSubtitle:e.itemSubtitle,metaText:e.metaText,additionalInfo:e.additionalInfo,secondaryText:e.secondaryText,icon:e.icon,badge:e.badge,navigationAction:e.navigationAction,secondaryActions:e.secondaryActions,onSpSecondaryAction:this.secondaryActionHandler,onSpNavigationAction:this.navigationActionHandler})),(0,i.h)("div",{"data-oj-context":!0,class:"oj-bg-neutral-10 oj-sp-expandable-list-item-detail oj-lg-padding-8x-vertical oj-sm-padding-6x-vertical",ref:this.expandableContainerRef},e.children,(0,i.h)(r.default,{isSmallScreen:this.isSmallScreen(),detailActions:this.props.detailActions,toolBarId:t,onSpDetailAction:this.detailActionHandler,detailToolbarRef:this.expandableContainerRef,toolbarAriaLabel:o.actions}))))}};c.defaultProps={expanded:!1},c.observedAttributes=["id"],c._metadata={properties:{expanded:{type:"boolean",writeback:!0},itemTitle:{type:"string"},itemSubtitle:{type:"string"},icon:{type:"object",properties:{class:{type:"string"},altText:{type:"string"}}},additionalInfo:{type:"string"},secondaryText:{type:"string"},metaText:{type:"string"},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]}}},navigationAction:{type:"object",properties:{display:{type:"string",enumValues:["disabled","on","off"]}}},secondaryActions:{type:"Array<object>"},detailActions:{type:"Array<object>"}},events:{spSecondaryAction:{bubbles:!0},spDetailAction:{bubbles:!0},spNavigationAction:{},spBeforeDetailExpand:{bubbles:!0},spBeforeDetailCollapse:{bubbles:!0}},slots:{"":{}},extension:{_WRITEBACK_PROPS:["expanded"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{setExpandStatus:{}}},c=__decorate([(0,o.customElement)("oj-sp-expandable-list-item"),__metadata("design:paramtypes",[Object])],c),t.ExpandableListItem=c})),define("oj-sp/expandable-list-item/loader",["require","exports","./expandable-list-item"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandableListItem=void 0,Object.defineProperty(t,"ExpandableListItem",{enumerable:!0,get:function(){return i.ExpandableListItem}})})),define("oj-sp/expanded-hover-card/components/RatingGuage",["require","exports","preact","oj-c/rating-gauge"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=isNaN(e.rating.value)?0:e.rating.value,o=isNaN(e.rating.count)?0:e.rating.count,s=t.toFixed(1),a=o<1e3?"("+o+")":"(999+)";return t>0&&(0,i.h)("div",{class:"oj-sp-expanded-hover-card-rating-container"},(0,i.h)("span",{class:"oj-typography-body-sm oj-text-color-secondary oj-sp-expanded-hover-card-rating-value",title:t.toString()},s),(0,i.h)("oj-c-rating-gauge",{size:"sm",value:t,max:5,readonly:!0,"aria-label":e.rating.label}),o>0&&(0,i.h)("span",{class:"oj-typography-body-sm oj-text-color-secondary oj-sp-expanded-hover-card-rating-count",title:o.toString()},a))}})),define("oj-sp/expanded-hover-card/components/MetaText",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t="oj-typography-body-xs oj-text-color-primary oj-line-clamp-1 ";return(0,i.h)(i.Fragment,null,(0,i.h)("span",{class:"oj-sp-expanded-hover-card-meta-text "+t,title:e.metaText},e.metaText),e.metaText2&&(0,i.h)("span",{class:"oj-sp-expanded-hover-card-meta-text "+t,title:e.metaText2},e.metaText2),e.metaText3&&(0,i.h)("span",{class:"oj-sp-expanded-hover-card-meta-text "+t,title:e.metaText3},e.metaText3),(0,i.h)("span",{class:"oj-sp-expanded-hover-card-long-text "+t,title:e.longMetaText},e.longMetaText),e.longMetaText2&&(0,i.h)("span",{class:"oj-sp-expanded-hover-card-long-text "+t,title:e.longMetaText2},e.longMetaText2))}})),define("oj-sp/expanded-hover-card/components/Keywords",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(()=>{const t=e.keywords;let i=0;const o=[];for(let e=0;e<t.length&&i<8;e++){const s=t[e];s.label&&(o.push(s),i++)}return o})().map((function(e){return e.label})).join(", ");return t&&(0,i.h)("div",{class:"oj-lg-padding-3x-top oj-sm-padding-2x-top oj-typography-body-xs oj-text-color-primary oj-line-clamp-2 oj-sp-expanded-hover-card-keywords",title:t},t)}})),define("oj-sp/expanded-hover-card/components/ExpandedContentBlock",["require","exports","preact","./RatingGuage","./MetaText","./Keywords","ojs/ojgauge"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>(0,i.h)("div",{class:"oj-sp-expanded-content-block-container oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal oj-sm-padding-1x-vertical oj-lg-padding-2x-vertical"},(0,i.h)("div",{class:"oj-sp-expanded-hover-card-rating-text-container"},e.rating&&e.rating.value&&(0,i.h)(o.default,{rating:e.rating}),(0,i.h)(s.default,{metaText:e.metaText,metaText2:e.metaText2,metaText3:e.metaText3,longMetaText:e.longMetaText,longMetaText2:e.longMetaText2})),e.keywords&&e.keywords.length>0&&(0,i.h)(a.default,{keywords:e.keywords}),e.additionalInfo&&(0,i.h)("div",{class:"oj-lg-padding-3x-top oj-sm-padding-2x-top oj-sp-expanded-hover-card-additional-info"},(0,i.h)("div",{class:"oj-typography-body-xs oj-text-color-primary oj-line-clamp-1"},e.additionalInfoHeading),(0,i.h)("div",{class:"oj-typography-body-xs oj-text-color-secondary oj-sp-expanded-hover-card-2px-padding-top oj-line-clamp-2",title:e.additionalInfo},e.additionalInfo)))})),define("oj-sp/expanded-hover-card/components/ExpandedContentDialog",["require","exports","preact","preact/compat","preact/hooks"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=(0,o.memo)(e=>{const[t,o]=(0,s.useState)({open:!1}),a=(0,s.useCallback)(()=>{o({open:!0})},[]),n=(0,s.useCallback)(()=>{e.onPopupOpen()},[]),r=(0,s.useCallback)(()=>{o({open:!1})},[]);return(0,i.h)("div",null,(0,i.h)("oj-dialog",{class:"oj-sm-padding-0 oj-sm-margin-0 oj-dialog-full oj-sp-expanded-hover-card-dialog-popup",id:e.uid+"_expandedCardPopup",ref:e.popupRef,modality:"modal","data-oj-context":!0,"aria-label":e.primaryText,onojBeforeOpen:a,onojClose:r,onojOpen:n},(0,i.h)("div",{slot:"header"}),(0,i.h)("div",{slot:"body"},(0,i.h)("div",{class:"oj-sp-expanded-hover-card-full-container"},(0,i.h)("div",{class:"oj-sm-padding-0 oj-sp-expanded-hover-card-parent-container oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column"},t.open&&e.dialogPopupContent))),(0,i.h)("div",{slot:"footer"},t.open&&e.dialogPopupFooter)))});t.default=a})),define("oj-sp/common-strings/resources/nls/common-shell-strings",{ar:!0,"ar-XB":!0,cs:!0,da:!0,de:!0,el:!0,"en-XA":!0,"en-XC":!0,es:!0,et:!0,fi:!0,fr:!0,"fr-CA":!0,he:!0,hr:!0,hu:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nl:!0,no:!0,pl:!0,pt:!0,"pt-PT":!0,ro:!0,root:!0,ru:!0,sk:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-Hans":!0,"zh-Hant":!0}),define("css!oj-sp/expanded-hover-card/expanded-hover-card-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/expanded-hover-card/expanded-hover-card",["require","exports","ojs/ojvcomponent","preact","oj-sp/card-footer/loader","oj-sp/internal-resources/components/card-common/CardCommon","./components/ExpandedContentBlock","./components/ExpandedContentDialog","ojL10n!oj-sp/common-strings/resources/nls/common-shell-strings","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","css!./expanded-hover-card-styles.css","css!oj-sp/internal-resources/components/card-common/card-common-styles","ojs/ojdialog","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandedHoverCard=void 0;let p=class extends o.Component{isFooterAvailable(e){return e.displayOptions&&"on"===e.displayOptions.footer||(e.displayOptions&&"off"!==e.displayOptions.footer||!e.displayOptions)&&this.hasFooterPropertyDefined(e)}constructor(e){var t;super(e),this.res=Object.assign({},l),this.popupRef=(0,o.createRef)(),this.getCardContainer=()=>this.contentElem.querySelector(".oj-sp-expanded-hover-card-parent-container"),this.onCardClick=(e,t)=>{var i,o;this.state.isSmallScreen&&!t?this.expandOnSmallScreen():this.props.onSpCardAction&&(null===(o=(i=this.props).onSpCardAction)||void 0===o||o.call(i),e.preventDefault(),e.stopPropagation())},this.focusOnCard=()=>{this.getCardContainer().classList.add("oj-sp-expanded-hover-card-title-ring-parent")},this.removeFocusFromCard=()=>{this.getCardContainer().classList.remove("oj-sp-expanded-hover-card-title-ring-parent")},this.cardKeyPressHandler=()=>{var e,t;null===(t=(e=this.props).onSpCardAction)||void 0===t||t.call(e)},this.updateCardHeight=e=>{if(this.state.isSmallScreen)return void("keydown"===e.type&&this.onCardClick(e,!1));if(!this.contentElem)return;const t=this.contentElem.getBoundingClientRect(),i=t?t.width:0,o=this.getImageHeight(i);this.contentElem&&(this.contentElem.style.height=o+"px")},this.resetCardHeight=()=>{this.contentElem&&(this.contentElem.style.height="auto")},this.onCardMouseOver=e=>{e.currentTarget.classList.add("oj-panel-shadow-sm"),this.updateCardHeight(e)},this.onCardMouseOut=e=>{e.currentTarget.classList.remove("oj-panel-shadow-sm"),this.resetCardHeight()},this.handleTabbingForExtraCardContent=e=>{var t;const i=this.contentElem.querySelector(".oj-sp-expanded-hover-card-extra-info");null===(t=(0===e?[null==i?void 0:i.querySelectorAll('a[href], button, [tabindex="-1"]')]:[null==i?void 0:i.querySelectorAll('a[href], button, [tabindex]:not([tabindex="-1"])')])[0])||void 0===t||t.forEach(t=>{t.setAttribute("tabindex",e.toString())})},this.onKeyDownHandler=e=>{const t=this.getCardContainer();t.classList.contains("oj-sp-expanded-hover-card-keyboard-focus")||this.handleTabbingForExtraCardContent(-1),e.shiftKey&&"F2"===e.key&&(!t.classList.contains("oj-sp-expanded-hover-card-keyboard-focus")||this.popupRef&&this.popupRef.current&&!this.popupRef.current.isOpen())&&(this.handleTabbingForExtraCardContent(0),t.classList.add("oj-panel-shadow-sm"),t.classList.add("oj-sp-expanded-hover-card-keyboard-focus"),this.updateCardHeight(e),e.preventDefault(),e.stopPropagation()),"Escape"===e.key&&(t.classList.remove("oj-sp-expanded-hover-card-keyboard-focus"),t.classList.remove("oj-panel-shadow-sm"),this.handleTabbingForExtraCardContent(-1),this.resetCardHeight())},this.createRef=e=>{this.contentElem=e},this.primaryActionHandler=e=>{var t,i;if(e){const o=e.actionId;null===(i=(t=this.props).onSpPrimaryAction)||void 0===i||i.call(t,{actionId:o})}},this.secondaryActionHandler=e=>{var t,i;if(e){const o=e.actionId;null===(i=(t=this.props).onSpSecondaryAction)||void 0===i||i.call(t,{actionId:o})}},this.expandOnSmallScreen=()=>{const e=document.documentElement,t=null==e?void 0:e.getBoundingClientRect(),i=null==t?void 0:t.width,o=this.getImageHeight(i);this.setExpandedContentHeightOnPopup(window.innerHeight-o),this.popupRef&&this.popupRef.current&&!this.popupRef.current.isOpen()&&this.popupRef.current.open()},this.getImageHeight=e=>{var t;let i=0;switch(null===(t=this.props.image)||void 0===t?void 0:t.aspectRatio){case"1-1":i=e;break;case"4-3":i=3*e/4;break;default:i=9*e/16}return i},this.computeHeightForExpandedContentOnPopup=()=>{if(this.popupRef&&this.popupRef.current&&this.popupRef.current.isOpen()){const e=document.documentElement,t=null==e?void 0:e.getBoundingClientRect(),i=null==t?void 0:t.width,o=this.getImageHeight(i),s=document.querySelector(".oj-sp-expanded-hover-card-footer-small-screen").clientHeight,a=document.querySelector(".oj-sp-expanded-content-block-container").clientHeight,n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);n<o+s+a?this.setExpandedContentHeightOnPopup(a):this.setExpandedContentHeightOnPopup(n-(o+s))}},this.setExpandedContentHeightOnPopup=e=>{document.documentElement.style.setProperty("--oj-expanded-hover-card-expanded-image-height",e+"px")},this.collapseOnSmallScreen=e=>{this.popupRef&&this.popupRef.current&&this.popupRef.current.close(),e.stopPropagation(),e.preventDefault()},this.collapseButton=()=>(0,o.h)("div",{class:"oj-sp-expanded-hover-card-popup-back-button-placement oj-sp-expanded-hover-card-popup-back-button-container"},(0,o.h)("oj-button",{class:"oj-button-sm",chroming:"borderless",display:"icons",onojAction:this.collapseOnSmallScreen},this.res.back,(0,o.h)("span",{slot:"startIcon",class:"oj-ux-ico-chevron-left"}))),this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.screenRange=d.createScreenRangeObservable(),this.screenRangeSub=this.screenRange.subscribe(e=>{const t=this.screenRange()===c.SCREEN_RANGE.SM;this.state.isSmallScreen!==t&&(this.setState({isSmallScreen:t}),t||this.popupRef.current&&this.popupRef.current.close())}),this.state={isSmallScreen:this.screenRange()===c.SCREEN_RANGE.SM}}componentWillUnmount(){this.screenRangeSub.dispose(),window.removeEventListener("resize",this.computeHeightForExpandedContentOnPopup)}componentDidMount(){window.addEventListener("resize",this.computeHeightForExpandedContentOnPopup)}getFooterTemplate(e){return(0,o.h)("div",{class:"oj-flex-item oj-sm-flex-initial"+(this.state.isSmallScreen?" oj-sp-expanded-hover-card-footer-small-screen oj-color-invert":"")},(0,o.h)(s.CardFooter,{id:this.uid+"_footer",emphasized:!1,primaryActions:e.primaryActions,secondaryActions:e.secondaryActions,onSpPrimaryAction:this.primaryActionHandler,onSpSecondaryAction:this.secondaryActionHandler}))}getExpandedCardBody(e,t,i){return(0,o.h)(o.Fragment,null,t?this.collapseButton():"",(0,o.h)("div",{onClick:e=>this.onCardClick(e,t),class:"oj-sp-expanded-hover-card-container"},(0,o.h)(a.default,{secondaryText:e.secondaryText,primaryText:e.primaryText,badge:e.badge,overlineText:e.overlineText,image:e.image,imageSize:"full",onSpAddFocusRing:this.focusOnCard,onSpRemoveFocusRing:this.removeFocusFromCard,onSpCardAction:this.cardKeyPressHandler,disableRoundedCorners:t,showFocusRing:t})),(i&&!this.state.isSmallScreen||!i)&&(0,o.h)("div",{class:"oj-color-invert oj-colorscheme-dependent"+(t?" oj-sp-expanded-hover-card-extra-info-small-screen":" oj-sp-expanded-hover-card-extra-info")},(0,o.h)("div",{onClick:e=>this.onCardClick(e,t)},(0,o.h)(n.default,{rating:e.rating,metaText:e.metaText,metaText2:e.metaText2,metaText3:e.metaText3,longMetaText:e.longMetaText,longMetaText2:e.longMetaText2,additionalInfoHeading:e.additionalInfoHeading,additionalInfo:e.additionalInfo,keywords:e.keywords})),!t&&this.isFooterAvailable(e)&&this.getFooterTemplate(e)))}hasFooterPropertyDefined(e){return!!e.primaryActions||!!e.secondaryActions}render(e){return(0,o.h)(i.Root,{ref:this.createRef,id:this.props.id},(0,o.h)("div",{class:"oj-panel oj-sm-padding-0 oj-sp-expanded-hover-card-parent-container oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column",onMouseEnter:this.onCardMouseOver,onMouseLeave:this.onCardMouseOut,onKeyDown:this.onKeyDownHandler,role:"group","aria-label":e.primaryText},this.getExpandedCardBody(e,!1,!0)),this.state.isSmallScreen&&(0,o.h)(r.default,{uid:this.uid,popupRef:this.popupRef,primaryText:e.primaryText,dialogPopupContent:this.getExpandedCardBody(e,!0,!1),dialogPopupFooter:this.isFooterAvailable(e)?this.getFooterTemplate(e):null,onPopupOpen:this.computeHeightForExpandedContentOnPopup}))}};p.defaultProps={badge:{status:"neutral",style:"strong",text:void 0},displayOptions:{footer:"auto"}},p._metadata={properties:{badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]},style:{type:"string",enumValues:["strong","subtle"]}}},overlineText:{type:"string"},primaryText:{type:"string"},secondaryText:{type:"string"},image:{type:"object",properties:{src:{type:"string"},position:{type:"string",enumValues:["top","center","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight"]},aspectRatio:{type:"string",enumValues:["1-1","4-3","16-9","21-9"]}}},displayOptions:{type:"object",properties:{footer:{type:"string",enumValues:["auto","on","off"]}}},primaryActions:{type:"Array<object>"},secondaryActions:{type:"Array<object>"},keywords:{type:"Array<object>"},metaText:{type:"string"},metaText2:{type:"string"},metaText3:{type:"string"},longMetaText:{type:"string"},longMetaText2:{type:"string"},additionalInfo:{type:"string"},additionalInfoHeading:{type:"string"},rating:{type:"object",properties:{value:{type:"number"},label:{type:"string"},count:{type:"number"}}}},events:{spPrimaryAction:{},spCardAction:{},spSecondaryAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},p=__decorate([(0,i.customElement)("oj-sp-expanded-hover-card"),__metadata("design:paramtypes",[Object])],p),t.ExpandedHoverCard=p})),define("oj-sp/expanded-hover-card/loader",["require","exports","./expanded-hover-card"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandedHoverCard=void 0,Object.defineProperty(t,"ExpandedHoverCard",{enumerable:!0,get:function(){return i.ExpandedHoverCard}})})),define("text!oj-sp/flex-filter-chip/component.json",[],(function(){return'{"name":"flex-filter-chip","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Flex Filter Chip","description":"Flex filter chip allows user to quickly filter results in the Input Key Flex Field component. NOTE: This component has been explicitly developed to be used in conjunction with the Input Key Flex Field component.","type":"composite","subcomponentType":"packPrivate","icon":{"iconPath":"extension/catalog/images/ico-input-key-flex-field.svg"},"dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-fa-css":"2404.0.0"},"extension":{"catalog":{"tags":["Redwood","KFF"],"coverImage":"extension/catalog/images/ico-input-key-flex-field.svg"}},"properties":{"active":{"type":"boolean","displayName":"Active","description":"The filter chip becomes active if set to true.","value":false},"chroming":{"type":"string","displayName":"Chroming","description":"Indicates in what states the filter chip has chrome (background and border).","value":"solid","enumValues":["outlined","solid"],"propertyEditorValues":{"outlined":{"displayName":"Outlined","description":"Outlined filter chips are salient, but lighter weight than solid filter chips."},"solid":{"displayName":"Solid","description":"Solid filter chips stand out."}}},"closeIcon":{"type":"string","displayName":"Close Icon","description":"Specifies if an icon to close the filter chip should be visible.","value":"never","enumValues":["always","never"],"propertyEditorValues":{"always":{"displayName":"Always","description":"The close icon is always visible."},"never":{"displayName":"Never","description":"The close icon is never visible."}}},"disabled":{"type":"boolean","displayName":"Disabled","description":"Disables the filter chip if set to true.","value":false},"label":{"type":"string","displayName":"Label","description":"Label to show in the filter chip.","required":true},"translations":{"type":"object","description":"A collection of translated resources from the translation bundle, or null if this component has no resources. Resources may be accessed and overridden individually or collectively.","properties":{"close":{"type":"string"}}},"value":{"type":"string","displayName":"Value","description":"Value to show in the filter chip."}},"events":{"spAction":{"description":"Triggered when the filter chip is clicked. This will be triggered by keyboard events as well as mouse/touch events.","bubbles":true,"cancelable":false},"spBlur":{"description":"Triggered when the filter chip looses focus.","bubbles":true,"cancelable":false},"spClose":{"description":"Triggered when the filter chip is closed.","bubbles":true,"cancelable":false},"spFocus":{"description":"Triggered when the filter chip gets focus.","bubbles":true,"cancelable":false}}}'})),define("text!oj-sp/flex-filter-chip/flex-filter-chip.html",[],(function(){return'<html><head></head><body><div :aria-disabled="[[$props.disabled]]":aria-pressed="[[$props.active]]"class="oj-sp-flex-filter-chip":class="[[{\n      \'oj-active\': $props.active,\n      \'oj-disabled\': $props.disabled,\n      \'oj-focus\': hasFocus,\n      \'oj-sp-flex-filter-chip-full-chrome\': $props.chroming === CHROMING.SOLID,\n      \'oj-sp-flex-filter-chip-outlined-chrome\': $props.chroming === CHROMING.OUTLINED,\n      \'oj-sp-flex-filter-chip-with-close-icon\': $props.closeIcon === CLOSE_ICON.ALWAYS\n     }]]"on-blur="[[onBlur]]"on-click="[[onClick]]"on-focus="[[onFocus]]"on-keyup="[[onKeyUp]]"aria-haspopup="true":tabindex="[[$props.disabled ? -1 : 0]]"><div class="oj-sp-flex-filter-chip-overlay oj-sp-flex-filter-chip-overlay-1"role="presentation"></div><div class="oj-sp-flex-filter-chip-overlay oj-sp-flex-filter-chip-overlay-2"role="presentation"></div><div class="oj-sm-align-items-center oj-sm-flex-wrap-nowrap oj-sp-flex-filter-chip-content"><oj-bind-if test="[[$props.label]]"><span class="oj-typography-body-sm oj-sp-flex-filter-chip-label"><oj-bind-text value="[[$props.label]]"></oj-bind-text></span></oj-bind-if><oj-bind-if test="[[$props.value]]"><div aria-orientation="vertical"class="oj-sm-margin-2x-start oj-divider-start oj-sp-flex-filter-chip-divider"role="separator"></div><span class="oj-sm-margin-2x-start oj-typography-body-sm oj-typography-semi-bold oj-sp-flex-filter-chip-value"><oj-bind-text value="[[$props.value]]"></oj-bind-text></span></oj-bind-if><oj-bind-if test="[[$props.closeIcon === CLOSE_ICON.ALWAYS]]"><a :aria-label="[[clearAriaLabelString]]"class="oj-flex oj-sm-align-items-center oj-sm-justify-content-center oj-sm-margin-3x-start oj-sp-helper-text-decoration-none oj-sp-flex-filter-chip-close-icon-anchor"href="#"on-click="[[onCloseIconAnchorClick]]"tabindex="-1":title="[[!$props.disabled &amp;&amp; res.clearValue]]"><span aria-hidden="true"class="oj-ux-ico-cancel-s oj-ux-icon-size-5x oj-sp-flex-filter-chip-close-icon"></span></a></oj-bind-if></div></div></body></html>'})),define("oj-sp/flex-filter-chip/flex-filter-chip",["require","exports","knockout","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojcomposite","ojs/ojknockout"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OjSpFlexFilterChipViewModel=void 0;const n={OUTLINED:"outlined",SOLID:"solid"},r={ALWAYS:"always",NEVER:"never"};var l;!function(e){e.ACTION="spAction",e.BLUR="spBlur",e.CLOSE="spClose",e.FOCUS="spFocus"}(l||(l={}));t.OjSpFlexFilterChipViewModel=class{constructor(e){this.CHROMING=n,this.CLOSE_ICON=r,this.action=()=>{this.dispatchEvent(l.ACTION)},this.close=()=>{const{closeIcon:e,disabled:t}=this.properties;e!==r.NEVER&&this.dispatchEvent(l.CLOSE)},this.dispatchEvent=(e,t)=>{this.compositeElem.dispatchEvent(new CustomEvent(e,{bubbles:!0}))},this.onBlur=e=>{e.stopPropagation(),this.hasFocus(!1),this.dispatchEvent(l.BLUR)},this.onClick=e=>{e.stopPropagation(),this.action()},this.onCloseIconAnchorClick=e=>{e.preventDefault(),e.stopPropagation(),this.close()},this.onFocus=e=>{e.stopPropagation(),this.hasFocus(!0),this.dispatchEvent(l.FOCUS)},this.onKeyUp=e=>{e.stopPropagation();const{key:t}=e;t===o.KEY_NAME.ENTER?this.action():t===o.KEY_NAME.BACKSPACE&&this.close()};const{element:t,properties:d}=e;this.compositeElem=t,this.properties=d,this.res=Object.assign(Object.assign({},s),this.properties.translations),this.hasFocus=i.observable(!1),this.clearAriaLabelString=i.computed(()=>a.applyParameters(this.res.clearSegmentValue,{0:this.properties.label}),this)}connected(){}}})),define("css!oj-sp/flex-filter-chip/flex-filter-chip",[],(function(){})),define("oj-sp/flex-filter-chip/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./flex-filter-chip.html","./flex-filter-chip","css!./flex-filter-chip.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-flex-filter-chip",{metadata:JSON.parse(o),view:s,viewModel:a.OjSpFlexFilterChipViewModel})})),define("text!oj-sp/flex-switch/component.json",[],(function(){return'{"name":"flex-switch","description":"Flex switch is an internal component which is used to render a switch for Descriptive FlexFields.","subcomponentType":"packPrivate","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Flex switch","pack":"oj-sp","type":"composite","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","extension":{"catalog":{"tags":["Redwood"]}},"properties":{"metadata":{"displayName":"Metadata","description":"Metadata from Dynamic UI","type":"Object","writeback":false},"labelHint":{"displayName":"Label Hint","description":"Represents a hint to render a label on the editable component.","type":"string","writeback":false},"labelEdge":{"displayName":"Label alignment control","description":"Specifies how the label of the component is created when the label-hint attribute is set on the component.","type":"string","value":"provided","enumValues":["inside","none","provided"],"propertyEditorValues":{"inside":{"description":"The label floats over the input element but moves up on focus or when the component has a value.","displayName":"inside"},"none":{"description":"The component will not have a label, regardless of whether it\'s in an oj-form-layout or not.","displayName":"none"},"provided":{"description":"Label is provided by the parent if the parent is an oj-form-layout.","displayName":"provided"}}},"readonly":{"displayName":"Readonly","description":"Read only mode of operation","type":"boolean","value":false,"writeback":false},"value":{"displayName":"Value","description":"flex-switch value e.g YES(true),No(false).","type":"string","writeback":true},"describedBy":{"description":"Provides a descriptive label for flex switch.","displayName":"Described By","type":"string","writeback":false},"disabled":{"displayName":"Disable Flex Switch","description":"Disable Flex Switch.","type":"boolean","value":false,"writeback":false},"helpHints":{"displayName":"Help Hints","description":"Represents hints for oj-form-layout element to render help information on the label of the component","type":"object","properties":{"definition":{"description":"Hint for help definition text associated with the label","type":"string"},"source":{"description":"Hint for help source link associated with the label.","type":"string"}}},"labelledBy":{"displayName":"Labelled By","description":"The oj-label sets the labelledBy property programmatically on the form component to make it easy for the form component to find its oj-label component","type":"string","writeback":false},"messagesCustom":{"displayName":"Messages Custom","description":"List of messages an app would add to the component when it has business/custom validation errors that it wants the component to show","type":"Array","writeback":true},"valid":{"displayName":"Valid","description":"Valid property that is updated as the internal state of the component changes.","type":"string","value":"valid","enumValues":["invalidHidden","invalidShown","valid"],"readOnly":true,"writeback":true},"userAssistanceDensity":{"displayName":"User Assistance Density","description":"","type":"string","enumValues":["reflow","efficient","compact"]}}}'})),define("text!oj-sp/flex-switch/flex-switch-view.html",[],(function(){return'<html><head></head><body><div><oj-switch :id="[[$uniqueId + \'_switch\']]"value="{{currentValue}}"described-by="[[$properties.describedBy]]"label-hint="[[$properties.labelHint]]"readonly="{{readOnly}}"disabled="[[$properties.disabled]]"help-hints.definition="[[$properties.helpHints?.definition ? $properties.helpHints.definition : \'\']]"help-hints.source="[[$properties.helpHints?.source ? $properties.helpHints.source : \'\']]"label-edge="[[$properties.labelEdge]]"labelled-by="[[$properties.labelledBy]]"user-assistance-density="[[$properties.userAssistanceDensity]]"on-value-changed="[[valueChanged]]"messages-custom="[[$properties.messagesCustom]]":title="[[$properties.value]]"></oj-switch></div></body></html>'})),define("oj-sp/flex-switch/flex-switch-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojknockout","ojs/ojlabel","ojs/ojswitch"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexSwitchViewModel=void 0;t.FlexSwitchViewModel=class{constructor(e){this.currentValue=i.observable(),this.readOnly=i.observable(!1),this.map=new Map,this.valueChanged=e=>{this.properties.value=this.getByValue(this.map,e.detail.value)};const t=o.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"});const s=e.properties;this.composite=e.element,this.properties=e.properties,this.uid=e.uniqueId,s.labelHint&&(this.labelHint=s.labelHint),s.metadata.extension&&(this.map.set(s.metadata.extension.FND_ACFF_CheckboxCheckedValue,!0),this.map.set(s.metadata.extension.FND_ACFF_CheckboxUncheckedValue,!1),!s.value&&"C"===s.metadata.extension.FND_ACFF_DVT&&s.metadata.extension.FND_ACFF_DV?(this.currentValue(this.map.get(s.metadata.extension.FND_ACFF_DV)),this.properties.value=this.getByValue(this.map,this.currentValue())):this.currentValue(this.map.get(s.value)),"true"===s.metadata.extension.FND_ACFF_IsReadOnly?this.readOnly(!0):"false"===s.metadata.extension.FND_ACFF_IsReadOnly?this.readOnly(!1):this.readOnly(s.readonly)),this.busyResolve()}activated(e){s.log("activated")}connected(e){s.log("connected")}bindingsApplied(e){s.log("bindings applied")}getByValue(e,t){for(const[i,o]of e.entries())if(o===t)return i}propertyChanged(e){"value"===e.property?this.currentValue(this.map.get(e.value)):"readonly"===e.property&&this.readOnly(e.value)}}})),define("css!oj-sp/flex-switch/flex-switch-styles",[],(function(){})),define("oj-sp/flex-switch/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./flex-switch-view.html","./flex-switch-viewModel","css!./flex-switch-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-flex-switch",{metadata:JSON.parse(o),view:s,viewModel:a.FlexSwitchViewModel})})),define("oj-sp/foldout-layout/components/FoldoutInnerLayout",["require","exports","preact","preact/hooks","ojs/ojcontext","ojs/ojlogger"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutInnerLayout=void 0;t.FoldoutInnerLayout=({uid:e,layoutDefinition:t,parentProps:n})=>{const r=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(!1),[c,p]=(0,o.useState)({enabled:null,panel:null});(0,o.useEffect)(()=>{const e=s.getContext(l.current).getBusyContext(),t=new MutationObserver(m),i={attributes:!0,childList:!0,subtree:!0};return e.whenReady().then(()=>{r.current=u(),r.current&&(t.observe(r.current,i),p({panel:n.selectedPanel,enabled:!h(r.current)}))},e=>a.log("Wait for inner elements to render:"+e)),()=>{t.disconnect()}},[]);const u=()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.querySelector('[slot="drilldown"]')},h=e=>{if("hidden"===e.style.visibility||"none"===e.style.display)return!0;let t=Array.from(e.children);if(0===t.length)return!0;const i=e.querySelector("oj-vb-content > oj-module");i&&(t=Array.from(i.children));return 0===t.filter(e=>"hidden"!==e.style.visibility&&"none"!==e.style.display).length},m=()=>d.current&&h(r.current)?(d.current=!1,void p({enabled:d.current,panel:null})):d.current||h(r.current)?void 0:(d.current=!0,void p({enabled:d.current,panel:null}));return(0,i.h)("div",{"data-oj-context":!0,class:"oj-sp-foldout-layout",ref:l},(()=>{const o=t;let s=null;if("vertical"===n.orientation&&(s=Object.assign(Object.assign({uid:e},n),{edit:n.drilldown,editPanel:{enabled:c.enabled,panel:n.selectedPanel}})),"horizontal"===n.orientation){let t=!1;n.drilldown&&(t=null===c.enabled||c.enabled),s=Object.assign(Object.assign({uid:e},n),{drilldownEnabled:t,drilldownAlwaysRendered:!0})}return(0,i.h)(o,Object.assign({},s))})())}})),define("css!oj-sp/foldout-layout/foldout-layout-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/foldout-layout/foldout-layout",["require","exports","ojs/ojvcomponent","preact","./components/Horizontal/HorizontalLayout","./components/Vertical/VerticalLayout","oj-sp/common/EventDispatcher","./components/FoldoutInnerLayout","css!./foldout-layout-styles"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutLayout=void 0;let l=class extends o.Component{constructor(e){var t;super(e),this.dataType="foldout",this.uid=null!==(t=e.id)&&void 0!==t?t:(0,i.getUniqueId)()}renderInnerLayout(e){const t=this.getLayout(e.orientation);return(0,o.h)(r.FoldoutInnerLayout,{uid:this.uid,layoutDefinition:t,parentProps:e})}getLayout(e){switch(e){case"horizontal":return s.HorizontalLayout;case"vertical":return a.VerticalLayout}}componentDidMount(){n.EventDispatcher.dispatch(n.EventDispatcher.OVERRIDE_SHELL_BOTTOM_SPACING_EVENT_NANE,this.base,{fixedLength:!0})}componentWillUnmount(){}componentDidUpdate(e){}render(e){return this.renderInnerLayout(e)}refresh(){}};l.defaultProps={animate:"auto",selectedPanel:0,orientation:"horizontal",displayOptions:{bidirectionalNavigation:!1,goToParent:!0,inFlowBack:!1,background:"default"}},l._metadata={properties:{animate:{type:"string",enumValues:["none","auto"]},selectedPanel:{type:"number",writeback:!0},nextStep:{type:"object",properties:{id:{type:"string"},label:{type:"string"}}},previousStep:{type:"object",properties:{id:{type:"string"},label:{type:"string"}}},displayOptions:{type:"object",properties:{bidirectionalNavigation:{type:"boolean"},goToParent:{type:"boolean"},inFlowBack:{type:"boolean"},background:{type:"string",enumValues:["default","transparent"]}}},translations:{type:"object",properties:{goToParent:{type:"string"},inFlowBack:{type:"string"},contentExpanded:{type:"string"}}},orientation:{type:"string",enumValues:["vertical","horizontal"]},displayMode:{type:"string",enumValues:["mixed","light"]},contentParent:{type:"string"}},slots:{"":{},overview:{},drilldown:{},search:{}},events:{spGoToParent:{},spInFlowBack:{},spPrevious:{},spNext:{},ojSpOverrideShellBottomSpacing:{bubbles:!0,cancelable:!0}},extension:{_WRITEBACK_PROPS:["selectedPanel"],_READ_ONLY_PROPS:[]},methods:{refresh:{}}},l=__decorate([(0,i.customElement)("oj-sp-foldout-layout"),__metadata("design:paramtypes",[Object])],l),t.FoldoutLayout=l})),define("oj-sp/foldout-layout/loader",["require","exports","./foldout-layout"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutLayout=void 0,Object.defineProperty(t,"FoldoutLayout",{enumerable:!0,get:function(){return i.FoldoutLayout}})})),define("text!oj-sp/foldout-panel/component.json",[],(function(){return'{"name":"foldout-panel","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Foldout Panel","description":"Foldout Panel is used to lay out summarized and overflowing content within a pane of a foldout layout.","status":[{"type":"deprecated","since":"2301.0.0","description":"This component is deprecated (since 2301.0.0). Use oj-sp-foldout-panel-overflow or oj-sp-foldout-panel-summarizing instead."}],"type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0"},"properties":{"panelTitle":{"displayName":"Title","description":"Title of the foldout panel.","propertyGroup":"common","type":"string","writeback":false,"required":true,"translatable":true,"extension":{"vbdt":{"placeholderValue":"Panel Title"}}},"secondaryActions":{"displayName":"Header Actions","propertyGroup":"common","description":"Displays a list of actions in the panel header. When there is only one action, it\'ll be displayed as a button. Otherwise, the actions will be displayed in an overflow menu.","type":"Array<object>","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}}}}},"methods":{},"events":{"spAction":{"displayName":"Action Event","description":"Fired when the user interacts with one of the panel actions.","bubbles":true,"cancelable":true,"detail":{"actionId":{"description":"The action id.","type":"string"}}}},"slots":{"noData":{"displayName":"Empty State Slot","description":"Provides empty state display","maxItems":1,"preferredContent":["SpEmptyStateElement"]},"summary":{"displayName":"Summary Slot","description":"Summary Section of the panel.","extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}},"":{"displayName":"Foldout Panel Default Slot","description":"Content of the foldout panel.","minItems":1,"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}}},"extension":{"catalog":{"category":"Redwood Layouts","status":"Deprecated","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-foldout-panel.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Foldout%20Panel%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrafoldoutpanel.html"},"vbdt":{"componentPalette":{"visibility":"never"}}},"icon":{"iconPath":"extension/catalog/images/ico-foldout-panel.svg"}}'})),define("text!oj-sp/foldout-panel/foldout-panel-view.html",[],(function(){return'<html><head></head><body><div data-oj-context="":class="[[ `${ verticalResponsivePadding() }` ]]"class="oj-sp-foldout-panel-root oj-sm-12"><div class="oj-sp-foldout-panel-container oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column"><div :class="[[ `${ horizontalResponsivePadding() }`]]"class="oj-sp-foldout-panel-header oj-flex-item oj-flex-bar oj-sm-align-items-center"><div :class="[[ {\n        \'oj-flex-bar-start\': true,\n        \'oj-sp-foldout-panel-title-container\': visibleActions().length === 0,\n        \'oj-sp-foldout-panel-title-container-actions-visible\': visibleActions().length > 0,\n      } ]]"role="heading"aria-level="2":aria-label="[[ $properties.panelTitle ]]"><span class="oj-sp-foldout-panel-title oj-typography-heading-sm oj-sp-foldout-panel-truncate-1":title="[[ $properties.panelTitle ]]"><oj-bind-text value="[[ $properties.panelTitle ]]"></oj-bind-text></span></div><div class="oj-flex-bar-end"><oj-bind-if test="[[ !hasOverflowMenu() ]]"><oj-bind-for-each data="[[ visibleActions() ]]"><template><oj-button :id="[[uid +\'_icon_\'+ $current.data.id]]"display="icons"chroming="borderless"disabled="[[ $current.data.display === \'disabled\' ]]"class="oj-clickthrough-disabled"on-oj-action="[[ function(e) { headerActionHandler(e, $current.data)} ]] "><span slot="startIcon":class="[[ $current.data.icon ]]"></span><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-button></template></oj-bind-for-each></oj-bind-if><oj-bind-if test="[[ hasOverflowMenu() ]]"><oj-menu-button class="oj-sp-foldout-panel-overflow-menu-button oj-clickthrough-disabled"chroming="borderless"display="icons"on-oj-action="[[ openActionMenu ]]"aria-haspopup="true"><div slot="startIcon"class="oj-ux-ico-overflow-horiz"></div><oj-bind-text value="[[ res.moreActions ]]"></oj-bind-text></oj-menu-button></oj-bind-if></div></div><div :class="[[ `${ horizontalResponsivePadding() }` ]]"><div class="oj-sp-foldout-panel-title-underline oj-sm-margin-2x-top"></div></div><oj-bind-if test="[[ hasSummary() &amp;&amp; !showEmptyState() ]]"><div :class="[[ `${ horizontalResponsivePadding() } ${summaryIsEmpty() ? \'oj-sp-foldout-panel-empty-summary\' : \'oj-sm-margin-6x-top\'}` ]]"class="oj-sp-foldout-panel-summary oj-flex-item"><oj-bind-if test="[[ isInView() ]]"><div><oj-bind-slot name="summary"></oj-bind-slot></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[ !showEmptyState() ]]"><oj-bind-if test="[[ isOverflowPanel() ]]"><div :class="[[ `${ horizontalResponsivePadding() }`]]"class="oj-sp-foldout-panel-content oj-flex-item oj-sm-margin-6x-top"><div class="oj-sp-foldout-panel-content-inner"><oj-bind-if test="[[ isInView() ]]"><div><oj-bind-slot></oj-bind-slot></div></oj-bind-if></div><oj-bind-if test="[[ isViewMoreVisible ]]"><div :class="[[ `${ horizontalResponsivePadding() }`]]"class="oj-sp-foldout-panel-view-more-container"><a :title="[[ res.fpViewMore ]]"href="#"class="oj-md-margin-6x-start oj-lg-margin-12x-start oj-sp-foldout-panel-view-more-link oj-link-standalone"on-click="[[viewMoreHandler]]"><oj-bind-text value="[[ res.fpViewMore ]]"></oj-bind-text></a></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[ !isOverflowPanel() ]]"><div :class="[[ `${ horizontalResponsivePadding() }`]]"class="oj-flex-item oj-sm-margin-6x-top"><div class="oj-sp-foldout-panel-content"><oj-bind-if test="[[ isInView() ]]"><div class="oj-sp-foldout-panel-slot-wrapper"><oj-bind-slot></oj-bind-slot></div></oj-bind-if></div></div></oj-bind-if></oj-bind-if><oj-bind-if test="[[ showEmptyState() ]]"><div class="oj-sp-foldout-panel-content oj-flex-item"><oj-bind-slot name="noData"></oj-bind-slot></div></oj-bind-if></div></div><oj-bind-if test="[[ hasOverflowMenu() ]]"><oj-menu :id="[[ uid + \'_more-actions-menu\' ]]"class="oj-sp-foldout-panel-overflow-menu":aria-label="[[ res.actions ]]"open-options.initial-focus="firstItem"on-oj-menu-action="[[ headerActionHandler ]]"><oj-bind-for-each data="[[ visibleActions() ]]">\'\'<template><oj-option :id="[[uid + \'_secondary_\' + $current.data.id]]"class="oj-clickthrough-disabled"value="[[ $current.data.id ]]":disabled="[[ $current.data.display === \'disabled\' ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span><span class="oj-sp-foldout-panel-label"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></template></oj-bind-for-each></oj-menu></oj-bind-if></body></html>'})),define("oj-sp/foldout-panel/foldout-panel-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/common-util/common-util","oj-sp/common/EventDispatcher","ojs/ojbutton","ojs/ojknockout","ojs/ojmenu"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldoutPanelViewModel=void 0;t.FoldoutPanelViewModel=class{constructor(e){this.skipResize=!1,this.SM_ONLY=n.createMediaQueryObservable(r.getFrameworkQuery(r.FRAMEWORK_QUERY_KEY.SM_ONLY)),this.headerActionHandler=(e,t,i)=>{const o=t&&t.id||e.detail.selectedValue;if(!o)throw new Error("foldout-panel is unable to fire the action event, unable to determine the action id");d.EventDispatcher.dispatch(d.EventDispatcher.CUSTOM_ACTION_EVENT_NAME,this.composite,{actionId:o})},this.openActionMenu=e=>{const t=this.composite.querySelector(`#${this.uid}_more-actions-menu`);if(!t)return;const i={launcher:e.target};t.open(e,i)},this.viewMoreHandler=e=>{this.SM_ONLY()?this.expandSmallScreenOverflowPanel():(this.currentMaxColumnCount(this.currentMaxColumnCount()+2),this.resizeOverflowPanel().then(()=>{this.getViewMoreLink()&&this.getViewMoreLink().scrollIntoView()})),e.preventDefault(),e.stopPropagation()};const t=s.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.properties=e.properties,this.res=o,this.uid=e.uniqueId,this.currentMaxColumnCount=i.observable(2),this.contentColumnCount=i.observable(1),this.horizontalResponsivePadding=i.observable("oj-sm-padding-4x-horizontal oj-md-padding-6x-horizontal oj-lg-padding-12x-horizontal"),this.verticalResponsivePadding=i.observable(""),this.isInView=i.observable(this.composite.classList.contains("oj-sp-foldout-panel-render-immediate")),this.initPanelActions(),this.initPanelSummary(),this.initScreenSizeBehavior(),this.initViewMoreLink(),this.initEmptyState(e),this.busyResolve()}activated(e){a.log(`oj-sp-foldout-panel ${this.uid} activated`)}connected(e){var t;a.log(`oj-sp-foldout-panel ${this.uid} connected`),this.initContentSizeHelpers(),this.initKeyboardSupport(),this.setupIntersectionObserver(),null===(t=this.mutationObserver)||void 0===t||t.observe(this.composite,{childList:!0,subtree:!0})}bindingsApplied(e){a.log(`oj-sp-foldout-panel ${this.uid} bindingsApplied`)}propertyChanged(e){a.log(`oj-sp-foldout-panel ${this.uid} propertyChanged`)}disconnected(e){var t;a.log(`oj-sp-foldout-panel ${this.uid} disconnected`),this.disconnectIntersectionObserver(),null===(t=this.mutationObserver)||void 0===t||t.disconnect()}async resizePanel(){this.isOverflowPanel()?await this.resizeOverflowPanel():this.resizeNonOverflowPanel()}setupIntersectionObserver(){if(!this.intersectionObserver&&!this.isInView()){const e={rootMargin:"0px",threshold:.05};this.intersectionObserver=new IntersectionObserver(e=>{for(const t of e)if(!this.isInView()&&t.isIntersecting){const e=s.getContext(this.composite).getBusyContext().addBusyState({description:"Foldout Panel "+this.uid+"- Rendering slot contents"});this.isInView(!0),this.resizePanel().then(e,e)}this.isInView()&&this.disconnectIntersectionObserver()},e),this.intersectionObserver.observe(this.composite)}}disconnectIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}initPanelActions(){this.visibleActions=i.computed(()=>this.properties.secondaryActions instanceof Array?this.properties.secondaryActions.filter(this.isActionVisible):[]),this.hasOverflowMenu=i.computed(()=>this.visibleActions().length>1)}initScreenSizeBehavior(){this.maxSmContentHeight=i.observable(0),this.maxSmContentHeight.subscribe(e=>{this.setCssVariable("--oj-foldout-panel-max-sm-content-height",e+"px")});const e=e=>{e?this.composite.classList.add("oj-sp-foldout-panel-sm-screen"):this.composite.classList.remove("oj-sp-foldout-panel-sm-screen")};e(this.SM_ONLY()),this.SM_ONLY.subscribe(e)}initViewMoreLink(){this.didViewMoreSmallScreenExpand=i.observable(!1),this.SM_ONLY.subscribe(e=>{e||this.didViewMoreSmallScreenExpand(!1)}),this.didViewMoreSmallScreenExpand.subscribe(e=>{e?this.composite.classList.add("oj-sp-foldout-panel-sm-expanded"):this.composite.classList.remove("oj-sp-foldout-panel-sm-expanded")}),this.isViewMoreVisible=i.computed(()=>{var e;if(!this.isOverflowPanel())return!1;if(this.SM_ONLY()){const t=(null===(e=this.getContent())||void 0===e?void 0:e.scrollHeight)+32>=this.maxSmContentHeight();return!this.didViewMoreSmallScreenExpand()&&t}return this.contentColumnCount()>this.currentMaxColumnCount()})}initKeyboardSupport(){this.composite.addEventListener("keydown",e=>{e.target===this.composite||document.activeElement===this.composite||this.composite.closest("oj-popup")||-1!==["arrowdown","arrowup"].indexOf(e.key.toLowerCase())&&(e.stopImmediatePropagation(),e.preventDefault())}),this.isOverflowPanel()&&(this.getContent().onscroll=e=>{e.target.scrollTo(0,0),this.getContent().querySelectorAll("oj-list-view").forEach(e=>{const t=e.querySelector("li");if(t){const i=e.getContextByNode(t);i&&e.setProperty("currentItem",i.key||null)}})})}initContentSizeHelpers(){this.screenRange=n.createScreenRangeObservable(),this.screenRange.subscribe(()=>this.updateScreenRange()),this.updateScreenRange(),this.isOverflowPanel()?(this.resizeOverflowPanel(),this.observeElements(()=>this.resizeOverflowPanel(),[this.composite,this.getContent(),this.getContentInner()]),this.SM_ONLY.subscribe(()=>this.resizeOverflowPanel()),s.getContext(this.composite).getBusyContext().whenReady().then(()=>{this.resizeOverflowPanel()})):(this.resizeNonOverflowPanel(),this.SM_ONLY.subscribe(()=>this.resizeNonOverflowPanel()),this.observeElements(()=>this.resizeNonOverflowPanel(),[this.composite]))}initEmptyState(e){this.showEmptyState=i.observable(!1);const t=()=>{let t=!1;const i=e.slotCounts.noData;if(i&&i>0){if(1===e.slotCounts[""]){const e=Array.from(this.composite.querySelectorAll("oj-sp-list-section"));if(1===e.length){!!e[0].querySelector(".oj-sp-list-section-no-data")&&(t=!0)}}}this.showEmptyState()!==t&&(this.showEmptyState(t),this.updateResponsivePadding())};"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(()=>requestAnimationFrame(t))),t()}resizeNonOverflowPanel(){const e=s.getContext(this.composite).getBusyContext().addBusyState({description:"Foldout Panel "+this.uid+"- Resizing non-overflow"});this.updateResponsivePadding();this.getContent().style.width="100%";this.composite.querySelector(".oj-sp-foldout-panel-container").style.width=this.SM_ONLY()?"100%":"394px",this.SM_ONLY()&&(this.composite.style.width="100%",this.setMaxContentHeight()),e()}async updateScreenRange(){await new Promise(e=>requestAnimationFrame(e)),this.setCssVariable("--oj-sp-foldout-panel-column-width","362px"),this.setCssVariable("--oj-sp-foldout-panel-column-gap",this.getCurrentColumnGap()+"px"),await this.resizePanel()}getCurrentColumnGap(){const e=this.screenRange().toLowerCase();return"sm"===e?32:"md"===e?48:96}async resizeOverflowPanel(){const e=s.getContext(this.composite).getBusyContext().addBusyState({description:"Foldout Panel "+this.uid+"- Resizing overflow"}),t=this.getContent(),i=this.getFoldoutPanelContainer();if(this.updateResponsivePadding(),this.SM_ONLY())return t.style.width="100%",t.style.columnCount="initial",t.style.columnWidth="initial",i.style.width="100%",i.style.maxWidth="100%",this.setMaxContentHeight(),this.updateViewMoreLink(),this.getContentInner()&&(0,l.removeOverflowFocusSM)(t,this.getContentInner()),void e();const o=this.getCurrentColumnGap();t.style.width="362px",t.style.columnCount="unset";const a=this.getContentInner();if(!a||0===a.clientHeight)return i.style.width=`calc(${t.style.width} + 32px)`,void e();if(a.clientHeight>t.clientHeight){const e=Math.floor(a.clientHeight/t.clientHeight),i=Math.min(e,this.currentMaxColumnCount());t.style.width=362*i+o*i+"px",t.style.columnCount=String(i),t.style.columnGap="var(--oj-sp-foldout-panel-column-gap)",t.style.columnWidth="362px"}let n=Math.floor(a.clientHeight/t.clientHeight);const r=Math.min(n,this.currentMaxColumnCount());if(a.getClientRects().length>1&&a.getClientRects().length!==r){n=a.getClientRects().length;const e=Math.min(n,this.currentMaxColumnCount());t.style.width=362*e+o*e+"px",t.style.columnCount=String(e)}this.contentColumnCount(n),i.style.width=`calc(${t.style.width} + 32px)`,this.updateViewMoreLink(),(0,l.removeOverflowFocus)(t,a),e()}setMaxContentHeight(){if(this.SM_ONLY()){const e=this.getHeader().offsetHeight+this.getUnderline().offsetWidth+(this.getSummary()?this.getSummary().offsetHeight:0);this.maxSmContentHeight(0),this.maxSmContentHeight(900-e-96)}}updateResponsivePadding(){const e=this.composite.offsetHeight<=432?"oj-sm-padding-6x-top":"oj-sm-padding-12x-top",t=(0,l.isAskOracleEnabled)()?"oj-sm-padding-12x-bottom":"oj-sm-padding-6x-bottom",i=this.showEmptyState()?e:e+" "+t;this.verticalResponsivePadding(i)}async updateViewMoreLink(){for(let e=0;e<3;++e)await this.hideElementsUnderViewMoreLink(),await new Promise(e=>setTimeout(e,200))}async hideElementsUnderViewMoreLink(){await new Promise(e=>requestAnimationFrame(e)),this.composite.querySelectorAll(".oj-sp-foldout-panel-under-view-more").forEach(e=>{e.classList.remove("oj-sp-foldout-panel-under-view-more")});for(const e of await this.getElementsUnderViewMoreLink())e.classList.add("oj-sp-foldout-panel-under-view-more")}async getElementsUnderViewMoreLink(){const e=[];if(!this.getViewMoreLink())return[];const t=this.getViewMoreLink().getBoundingClientRect(),i=document.elementsFromPoint(t.x,t.y).concat(document.elementsFromPoint(t.x+t.width,t.y)).concat(document.elementsFromPoint(t.x,t.y+t.height)).concat(document.elementsFromPoint(t.x+t.width,t.y+t.height));for(const o of i){if(-1!==o.className.indexOf("oj-sp-foldout-panel-view-more-container")||-1!==o.className.indexOf("oj-sp-foldout-panel-view-more-link"))continue;const i=o.getBoundingClientRect();Math.abs(i.x-t.x)<50&&Math.abs(i.y-t.y)<200&&e.push(o)}return e}isOverflowPanel(){return-1!==this.composite.className.indexOf("oj-sp-foldout-panel-handle-overflow")}initPanelSummary(){const e=this.composite.querySelector("[slot='summary']");this.hasSummary=i.observable(!!e),this.summaryIsEmpty=i.observable(e&&0===e.childElementCount&&0===e.innerText.trim().length),e&&this.observeElements(()=>{this.summaryIsEmpty(0===e.childElementCount&&0===e.innerText.trim().length)},[e])}isActionVisible(e){return!("off"===e.display||!e.label)}async expandSmallScreenOverflowPanel(){this.storeScrollerPosition(),this.didViewMoreSmallScreenExpand(!0),await this.restoreScrollerPosition(),await(await new Promise(e=>setTimeout(e,200))),await this.restoreScrollerPosition()}storeScrollerPosition(){const e=this.getImmediateScrollingParent();this.storedScrollPosition=null===e?window.scrollY+50:e.scrollTop+50}async restoreScrollerPosition(){const e=this.getImmediateScrollingParent();null===e?window.scrollTo({top:this.storedScrollPosition}):e.scrollTop=this.storedScrollPosition}getImmediateScrollingParent(){let e=this.composite.parentElement;do{if(e.scrollHeight>e.clientHeight&&e.scrollTop>0){const t=getComputedStyle(e).overflow;if("auto"===t||"scroll"===t)break}e=e.parentElement}while(e);return e}observeElements(e,t){if("undefined"==typeof ResizeObserver||this.composite.classList.contains("oj-sp-foldout-panel-disable-resize-observer"))for(const i of t){i.classList.add("oj-sp-foldout-panel-resize-observed");const t=document.createElement("iframe");t.onload=()=>{t.contentWindow.onresize=()=>{this.skipResize||(this.skipResize=!0,requestAnimationFrame(()=>{e.call(this),setTimeout(()=>this.skipResize=!1,100)}))}},t.src="about:blank",t.classList.add("oj-sp-foldout-panel-resize-helper"),i.appendChild(t)}else{const i=new ResizeObserver(()=>requestAnimationFrame(e));for(const e of t)i.observe(e)}}setCssVariable(e,t){this.composite.style.setProperty(e,t)}getViewMoreLink(){return this.composite.querySelector(".oj-sp-foldout-panel-view-more-link")}getHeader(){return this.composite.querySelector(".oj-sp-foldout-panel-header")}getUnderline(){return this.composite.querySelector(".oj-sp-foldout-panel-title-underline")}getSummary(){return this.composite.querySelector(".oj-sp-foldout-panel-summary")}getContent(){return this.composite.querySelector(".oj-sp-foldout-panel-content")}getContentInner(){return this.composite.querySelector(".oj-sp-foldout-panel-content-inner")}getFoldoutPanelContainer(){return this.composite.querySelector(".oj-sp-foldout-panel-container")}}})),define("css!oj-sp/foldout-panel/foldout-panel-styles",[],(function(){})),define("oj-sp/foldout-panel/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./foldout-panel-view.html","./foldout-panel-viewModel","css!./foldout-panel-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-foldout-panel",{metadata:JSON.parse(o),view:s,viewModel:a.FoldoutPanelViewModel})})),define("css!oj-sp/foldout-panel-overflow/foldout-panel-overflow-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/foldout-panel-overflow/foldout-panel-overflow",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","css!./foldout-panel-overflow-styles","oj-sp/foldout-panel/loader"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowFoldoutPanel=void 0;let a=class extends s.Component{constructor(e){var t;super(e),this.panelActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,e.detail),e.stopPropagation()},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.state={isInView:!1}}render(e){const{isInView:t}=this.state,{panelTitle:i,secondaryActions:o,noData:a,summary:n,children:r}=e;return(0,s.h)("oj-sp-foldout-panel",{class:"oj-sp-foldout-panel-handle-overflow oj-sp-foldout-panel-render-immediate",panelTitle:i,secondaryActions:o,onspAction:this.panelActionHandler},n&&(0,s.h)("div",{slot:"summary"},n),a&&(0,s.h)("div",{slot:"noData",class:"oj-sp-foldout-panel-no-data"},a),(0,s.h)("div",{class:"oj-sp-foldout-panel-overflow-children"},t&&r))}componentDidMount(){var e,t;const i=null===(e=this.base)||void 0===e?void 0:e.parentElement,o=null===(t=null==i?void 0:i.classList)||void 0===t?void 0:t.contains("oj-sp-foldout-panel-render-immediate");this.setState({isInView:o}),this.registerIntersectionObserver()}componentWillUnmount(){this.disconnectIntersectionObserver()}registerIntersectionObserver(){const{isInView:e}=this.state;if(!this.intersectionObserver&&!e){const t={rootMargin:"0px",threshold:.05};this.intersectionObserver=new IntersectionObserver(t=>{if(!e){let e=!1;for(const i of t)if(i.isIntersecting){e=!0;break}e&&(this.disconnectIntersectionObserver(),this.setState({isInView:!0}))}},t),this.intersectionObserver.observe(this.base)}}disconnectIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}};a._metadata={properties:{panelTitle:{type:"string"},secondaryActions:{type:"Array<object>"}},slots:{"":{},noData:{},summary:{}},events:{spAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,o.customElement)("oj-sp-foldout-panel-overflow"),__metadata("design:paramtypes",[Object])],a),t.OverflowFoldoutPanel=a})),define("oj-sp/foldout-panel-overflow/loader",["require","exports","./foldout-panel-overflow"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverflowFoldoutPanel=void 0,Object.defineProperty(t,"OverflowFoldoutPanel",{enumerable:!0,get:function(){return i.OverflowFoldoutPanel}})})),define("css!oj-sp/foldout-panel-summarizing/foldout-panel-summarizing-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/foldout-panel-summarizing/foldout-panel-summarizing",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","css!./foldout-panel-summarizing-styles","oj-sp/foldout-panel/loader","oj-sp/summarizing-collection/loader"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummarizingFoldoutPanel=void 0;let a=class extends s.Component{constructor(e){var t;super(e),this.overflowActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpOverflowAction)||void 0===i||i.call(t,e.detail),e.preventDefault(),e.stopPropagation()},this.panelActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpAction)||void 0===i||i.call(t,e.detail),e.stopPropagation()},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.state={isInView:!1}}render(e){const{panelTitle:t,secondaryActions:i,overflowActionLabel:o,overflowActionHref:a,noData:n,summary:r,children:l}=e,{isInView:d}=this.state;return(0,s.h)("oj-sp-foldout-panel",{id:this.uniqueId+"-p",class:"oj-sp-foldout-panel-summarizing-panel oj-sp-foldout-panel-render-immediate",panelTitle:t,secondaryActions:i,onspAction:this.panelActionHandler},r&&(0,s.h)("div",{slot:"summary"},r),n&&(0,s.h)("div",{slot:"noData",class:"oj-sp-foldout-panel-no-data"},n),(0,s.h)("div",{class:"oj-sp-foldout-panel-summarizing-children"},d&&(0,s.h)("oj-sp-summarizing-collection",{id:this.uniqueId+"-sc",class:"oj-sp-foldout-panel-summarizing-collection",overflowActionLabel:o,overflowActionHref:a,onspOverflowAction:this.overflowActionHandler,"data-oj-binding-provider":"preact"},l)))}componentDidMount(){var e,t;const i=null===(e=this.base)||void 0===e?void 0:e.parentElement,o=null===(t=null==i?void 0:i.classList)||void 0===t?void 0:t.contains("oj-sp-foldout-panel-render-immediate");this.setState({isInView:o}),this.registerIntersectionObserver()}componentWillUnmount(){this.disconnectIntersectionObserver()}registerIntersectionObserver(){const{isInView:e}=this.state;if(!this.intersectionObserver&&!e){const t={rootMargin:"0px",threshold:.05};this.intersectionObserver=new IntersectionObserver(t=>{if(!e){let e=!1;for(const i of t)if(i.isIntersecting){e=!0;break}e&&(this.disconnectIntersectionObserver(),this.setState({isInView:!0}))}},t),this.intersectionObserver.observe(this.base)}}disconnectIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}};a._metadata={properties:{panelTitle:{type:"string"},overflowActionLabel:{type:"string"},overflowActionHref:{type:"string"},secondaryActions:{type:"Array<object>"}},slots:{"":{},noData:{},summary:{}},events:{spAction:{},spOverflowAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,o.customElement)("oj-sp-foldout-panel-summarizing"),__metadata("design:paramtypes",[Object])],a),t.SummarizingFoldoutPanel=a})),define("oj-sp/foldout-panel-summarizing/loader",["require","exports","./foldout-panel-summarizing"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummarizingFoldoutPanel=void 0,Object.defineProperty(t,"SummarizingFoldoutPanel",{enumerable:!0,get:function(){return i.SummarizingFoldoutPanel}})})),define("text!oj-sp/general-overview-page/component.json",[],(function(){return'{"name":"general-overview-page","version":"2404.0.0","pack":"oj-sp","type":"composite","subcomponentType":"patternImpl","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"General Overview Page Template","description":"General overview is used to view information related to a simple business object.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-header-general-overview":"2404.0.0"},"icon":{"iconPath":"extension/catalog/images/ico-overview-page-template.svg"},"properties":{"avatar":{"displayName":"Avatar Image","description":"The avatar of the person who is required in the context of the page.","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}}}},"contextualInfo":{"displayName":"Contextual Info","description":"A list of contextual informations for the page. This supports up to 4 contextual informations.","type":"Array<object>","propertyGroup":"data","extension":{"vbdt":{"itemProperties":{"label":{"description":"Contextual Info Label","type":"string"},"value":{"description":"Contextual Info Value","type":"string"}}}},"required":false},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","type":"object","propertyGroup":"common","properties":{"contextualInfoLabel":{"description":"Defines whether the contextual info label is visible","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether In Flow Back action is visible","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go To Parent action is visible","type":"boolean","value":false},"promoteInfoSlot":{"type":"boolean","description":"Additional information slot stacks on the top of main slot","displayName":"Promote Additional Information Slot","value":false},"responsivePadding":{"type":"string","description":"Specify if dynamic paddings should be on or off","displayName":"Dynamic Paddings Enabled","enumValues":["on","off"],"status":[{"target":"propertyValue","type":"deprecated","since":"2307.0.0","description":"Enum value \'off\' is deprecated. Use \'on\' instead.","value":["off"]}],"propertyEditorValues":{"on":{"displayName":"On","description":"Dynamic paddings are on."},"off":{"displayName":"Off","description":"Dynamic paddings are off."}}},"switcherSearch":{"description":"Defines whether data switcher search is visible.","displayName":"Switcher Search","type":"boolean","value":false}},"required":false},"pageSubtitle":{"displayName":"Page Subtitle","type":"string","description":"A translatable sub title for CCA","propertyGroup":"common","translatable":true,"required":false,"extension":{"vbdt":{"placeholderValue":"Your Page Subtitle here"}}},"pageTitle":{"displayName":"Page Title","type":"string","description":"A translatable title for CCA","propertyGroup":"common","translatable":true,"required":false,"extension":{"vbdt":{"placeholderValue":"Your Page Title here"}}},"primaryAction":{"displayName":"Primary Action ","description":"The primary action object of the page.","type":"object","propertyGroup":"common","required":false,"writeback":true,"properties":{"label":{"displayName":"Primary Action Label","description":"The label of primary action of the page. Default is Submit.","translatable":true,"type":"string"},"disabled":{"displayName":"Primary Action Disabled status","description":"The disabled state of the primary action of the page.","type":"boolean","status":[{"type":"deprecated","since":"2210.0.0","description":"Use value display property instead."}]},"display":{"type":"string","displayName":"Display option for the primary action","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The primary Action is visible and enabled"},"off":{"displayName":"Off","description":"The primary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The primary Action is visible and disabled"}}}}},"secondaryActions":{"displayName":"Secondary Actions array","description":"A list of secondary actions of the page. Each action has [label, id, icon, display].","type":"Array<object>","required":false,"extension":{"vbdt":{"itemProperties":{"label":{"type":"string","displayName":"label of the secondary item"},"id":{"type":"string","displayName":"id of the secondary item","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"icon":{"type":"string","displayName":"icon for the secondary item"},"display":{"type":"string","displayName":"Display option for the secondary action","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled"},"off":{"displayName":"Off","description":"The secondary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled"}}}}}}},"selectContext":{"displayName":"Select Context","description":"The context selector.","type":"object","properties":{"data":{"description":"The data for the context selector.","type":"oj.DataProvider"},"itemText":{"description":"The item text for the context selector.","type":"string"},"labelHint":{"description":"The label hint for context selector.","type":"string","value":"Select context"},"secondaryText":{"description":"Secondary Text","displayName":"The secondary text for the object selector.","type":"string","required":false},"avatar":{"displayName":"Avatar Image","description":"The Avatar displayed as column leading visual for object selector","type":"object","required":false,"properties":{"src":{"description":"URL of the source avatar image.","displayName":"Src","type":"string"},"initials":{"description":"Initials to display in the absence of source image.","displayName":"Intials","type":"string"}}},"icon":{"displayName":"Icon","description":"The icon leading visual for object selector","type":"object","required":false,"properties":{"class":{"description":"Redwood icon gallery class","displayName":"Class","type":"string"},"altText":{"description":"Alternate image text for screen reader","displayName":"AltText","type":"string"}}}},"required":false},"selectContextValue":{"displayName":"Select Context Value","description":"The value of the context selector.","type":"V|null","required":false,"writeback":true},"selectContextValueItem":{"displayName":"Select Context Value Item","description":"The value item of the context selector.","type":"object","required":false,"writeback":true},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp"},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"actions":{"type":"string"},"avatarHint":{"type":"string"},"goToParent":{"type":"string"}}},"selectObject":{"displayName":"Select Object","description":"The object selector","type":"object","properties":{"data":{"description":"The data for the object selector.","type":"oj.DataProvider"},"itemText":{"description":"The item text for the object selector.","type":"string"},"labelHint":{"description":"The label hint for object selector.","type":"string"},"secondaryText":{"description":"Secondary Text","displayName":"The secondary text for the object selector.","type":"string","required":false},"avatar":{"displayName":"Avatar Image","description":"The Avatar displayed as column leading visual for object selector","type":"object","required":false,"properties":{"src":{"description":"URL of the source avatar image.","displayName":"Src","type":"string"},"initials":{"description":"Initials to display in the absence of source image.","displayName":"Intials","type":"string"}}},"icon":{"displayName":"Icon","description":"The icon leading visual for object selector","type":"object","required":false,"properties":{"class":{"description":"Redwood icon gallery class","displayName":"Class","type":"string"},"altText":{"description":"Alternate image text for screen reader","displayName":"AltText","type":"string"}}}}},"selectObjectValue":{"displayName":"Select Object Value","description":"The value of the object selector.","type":"V|null","writeback":true},"selectObjectValueItem":{"displayName":"Select Object Value Item","description":"The value item of the object selector.","type":"object","writeback":true},"dataSwitcherType":{"displayName":"Data Switcher Type","description":"The value of the data switcher type.","type":"string","value":"context","status":[{"type":"deprecated","since":"2307.0.0","description":"Data switcher type will be defined from pageTitle, selectObject and selectContext. If selectObject and pageTitle are provided then selectObject takes the precedence."}],"enumValues":["context","object"],"propertyEditorValues":{"context":{"description":"Select Context","displayName":"Context"},"object":{"description":"Select object","displayName":"Object"}}}},"methods":{},"events":{"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked.","bubbles":false,"cancelable":false,"eventGroup":"common"},"spPrimaryAction":{"displayName":"spectraPrimaryAction event","description":"Triggered when the primary action is clicked","bubbles":false,"cancelable":false,"eventGroup":"common"},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked","bubbles":false,"cancelable":false,"eventGroup":"common"},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when a secondary action is clicked","bubbles":false,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the selected secondary action","type":"string"}},"eventGroup":"common"}},"slots":{"main":{"description":"This is the slot for main slot","displayName":"Main slot","implicitBusyContext":true,"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}},"info":{"description":"Slot for adding additional information content","displayName":"Info slot","implicitBusyContext":true,"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}}},"extension":{"catalog":{"category":"Redwood Page Templates","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-overview-page-template.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=General%20Overview%20Page%20Template&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrageneraloverviewpage.html","screenshots":{}},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"data":{"customizers":[{"type":"heading","displayName":"Select Object"},{"propertyName":"selectObjectValue","displayName":"Value"},{"propertyName":"selectObjectValueItem","displayName":"Value Item"},{"propertyName":"selectObject.data","displayName":"Data"},{"propertyName":"selectObject.itemText","translatable":true,"displayName":"Item Text"},{"propertyName":"selectObject.labelHint","translatable":true,"displayName":"Label Hint"},{"type":"heading","displayName":"Select Context"},{"propertyName":"selectContextValue","displayName":"Value"},{"propertyName":"selectContextValueItem","displayName":"Value Item"},{"propertyName":"selectContext.data","displayName":"Data"},{"propertyName":"selectContext.itemText","translatable":true,"displayName":"Item Text"},{"propertyName":"selectContext.labelHint","translatable":true,"displayName":"Label Hint"}]},"general":{"customizers":[{"propertyName":"pageTitle"},{"propertyName":"pageSubtitle"},{"propertyName":"displayMode","type":"enumeration"},{"type":"heading","displayName":"Display Options"},{"propertyName":"displayOptions.contextualInfoLabel","displayName":"Contextual Info Label"},{"propertyName":"displayOptions.goToParent","displayName":"Go to Parent"},{"propertyName":"displayOptions.inFlowBack","displayName":"In Flow Back"},{"propertyName":"displayOptions.promoteInfoSlot","displayName":"Promote Additional Information Slot"},{"propertyName":"displayOptions.responsivePadding","displayName":"Dynamic Paddings Enabled"},{"propertyName":"displayOptions.switcherSearch","displayName":"Switcher Search"},{"type":"heading","displayName":"Primary Action"},{"propertyName":"primaryAction.label","displayName":"Primary Action Label"},{"propertyName":"primaryAction.display","type":"enumeration","displayName":"Primary Action Display"},{"type":"heading","displayName":"Avatar"},{"propertyName":"avatar.src","displayName":"Avatar Src"},{"propertyName":"avatar.initials","displayName":"Avatar Initials"},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"actions"}},{"type":"drill-to-layout","label":"Badge","layout":"badgePanel"},{"type":"drill-to-layout","label":"Contextual Info","layout":"contextualInfoPanel"}]},"badgePanel":{"customizers":[{"propertyName":"badge.text","translatable":true,"displayName":"Text"},{"propertyName":"badge.status","displayName":"Status"}]},"contextualInfoPanel":{"customizers":[{"propertyName":"displayOptions.contextualInfoLabel","displayName":"Contextual Info Label"},{"propertyName":"contextualInfo","displayName":"contextual Info Items","singleName":"Item","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"label":{},"value":{}},"drill":{"layout":"contextualInfoItems"}}]},"contextualInfoItems":{"customizers":[{"propertyName":"contextualInfo.label"},{"propertyName":"contextualInfo.value"},{"type":"delete","propertyName":"contextualInfo","delete":"arrayIndex"}]},"actions":{"customizers":[{"propertyName":"secondaryActions.id"},{"propertyName":"secondaryActions.label"},{"propertyName":"secondaryActions.icon"},{"propertyName":"secondaryActions.display"},{"type":"delete","propertyName":"secondaryActions","delete":"arrayIndex"}]}},"events":{"suggestions":[{"name":"spPrimaryAction","type":"component"},{"name":"spSecondaryAction","type":"component","mappings":[{"variableName":"actionId","expression":"{{$event.detail.secondaryItem}}","type":"string"}]},{"name":"spInFlowBack","type":"component"}]}}}}}'})),define("text!oj-sp/general-overview-page/general-overview-page-view.html",[],(function(){return'<html><head></head><body><div data-oj-context=""><oj-sp-header-general-overview data-otel-hero="generalOverviewPageHeader":id="[[uid+\'_h\']]"page-title="[[properties.pageTitle]]"page-subtitle="[[properties.pageSubtitle]]"primary-action.label="[[ properties.primaryAction?.label]]"primary-action.display="[[ primaryActionDisplay]]"display-options.contextual-info-label="[[$properties.displayOptions?.contextualInfoLabel]]"display-options.go-to-parent="[[$properties.displayOptions?.goToParent]]"display-options.in-flow-back="[[$properties.displayOptions?.inFlowBack]]"display-options.switcher-search="[[ properties.displayOptions.switcherSearch ]]"secondary-actions="[[properties.secondaryActions]]"contextual-info="[[ contextualInfo ]]"translations="[[headerTranslations]]"badge.text="[[properties.badge?.text]]"badge.status="[[properties.badge?.status]]"display-mode="[[properties.displayMode]]"timestamp="[[properties.timestamp]]"avatar="[[headerAvatar]]"select-context.data="[[properties.selectContext?.data]]"select-context.item-text="[[properties.selectContext?.itemText]]"select-context.label-hint="[[properties.selectContext?.labelHint]]"select-context.secondary-text="[[properties.selectContext?.secondaryText]]"select-context.avatar="[[properties.selectContext?.avatar]]"select-context.icon="[[properties.selectContext?.icon]]"select-context-value="{{properties.selectContextValue}}"select-context-value-item="{{properties.selectContextValueItem}}"select-object.data="[[properties.selectObject?.data]]"select-object.item-text="[[properties.selectObject?.itemText]]"select-object.label-hint="[[properties.selectObject?.labelHint]]"select-object.secondary-text="[[properties.selectObject?.secondaryText]]"select-object.avatar="[[properties.selectObject?.avatar]]"select-object.icon="[[properties.selectObject?.icon]]"select-object-value="{{properties.selectObjectValue}}"select-object-value-item="{{properties.selectObjectValueItem}}"data-oj-context=""></oj-sp-header-general-overview><div class="oj-sp-public-primary-content-container"><div id="main_Info_slots":class="[[{\n        \'oj-flex oj-sm-flex-wrap-nowrap oj-sp-general-overview-page-slots\': true,\n        \'oj-sp-general-overview-page-infoSlot-reverse\': properties.displayOptions?.promoteInfoSlot,\n        \'oj-sp-general-overview-page-infoSlot\': !properties.displayOptions?.promoteInfoSlot\n      }]]"><div data-otel-hero="oj-sp-general-overview-page.main"id="main_slot"role="main":class="[[{\n        \'oj-sm-only-padding-4x-horizontal oj-md-only-padding-6x-horizontal oj-lg-padding-12x-horizontal oj-sm-only-padding-6x-top oj-md-only-padding-6x-top oj-lg-padding-12x-top\': respPadding() === \'off\',\n        \'oj-sp-general-overview-page-top-slot-bottom-padding\': !properties.displayOptions?.promoteInfoSlot,\n        \'oj-flex-item oj-bg-neutral-10 oj-sp-general-overview-page-main-slot\': true\n      }]]"data-oj-context=""><oj-bind-if test="[[ !properties.displayOptions?.promoteInfoSlot || isInView() ]]"><oj-bind-slot name="main"></oj-bind-slot></oj-bind-if></div><oj-bind-if test="[[slotCounts &amp;&amp; slotCounts[\'info\'] > 0]]"><div id="info_slot"role="complementary"class="oj-flex-item oj-bg-neutral-20 oj-sp-general-overview-page-infoSlot-width"><div data-otel-hero="oj-sp-general-overview-page.info":class="[[{\n            \'oj-sm-only-padding-4x-horizontal oj-md-only-padding-6x-horizontal oj-lg-padding-12x-horizontal oj-sm-only-padding-6x-top oj-md-only-padding-6x-top oj-lg-padding-12x-top\' : respPadding() === \'off\',\n            \'oj-sp-general-overview-page-top-slot-bottom-padding\': properties.displayOptions?.promoteInfoSlot\n          }]]"data-oj-context=""><oj-bind-if test="[[ properties.displayOptions?.promoteInfoSlot || isInView() ]]"><oj-bind-slot name="info"></oj-bind-slot></oj-bind-if></div></div></oj-bind-if></div></div><div :class="[[{\'oj-sp-general-overview-page-mobile-bottom-container oj-md-hide\': primaryActionDisplay() !== \'off\'}]]"></div></div></body></html>'})),define("oj-sp/general-overview-page/general-overview-page-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojtranslation","oj-sp/header-general-overview/loader","ojs/ojbinddom","ojs/ojknockout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralOverviewPageViewModel=void 0;const r="background: #222; color: #bada55";t.GeneralOverviewPageViewModel=class{constructor(e){var t;this.responsivePaddingHandler=()=>{this.composite&&("on"===this.respPadding()?this.composite.classList.add("oj-sp-responsive-paddings-on"):this.composite.classList.remove("oj-sp-responsive-paddings-on"))},this.onContextualInfoChanged=e=>{this.contextualInfo(e&&e.length>4?e.slice(0,4):e)},this.onScroll=e=>{this.updateMainContentHeight(!1)},this.onResizeWindow=e=>{this.updateMainContentHeight(!0)},this.updateMainContentHeight=e=>{window.requestAnimationFrame(()=>{const t=this.composite.querySelector("#main_Info_slots"),i=this.composite.querySelector(".oj-sp-header-general-overview-header-strip"),o=i&&i.getBoundingClientRect().bottom>0?i.getBoundingClientRect().bottom:0,s=this.composite.querySelector(".oj-sp-general-overview-page-mobile-bottom-container");if(s&&"off"!==this.primaryActionDisplay()&&s.style.setProperty("--oj-sp-general-overview-page-mobile-bottom-container",this.getBottomSpacing()+"px"),e){const e=`calc(${window.innerHeight-o}px - var(--oj-sp-shell-fixed-bottom, 0px))`;t.style.minHeight=e,this.composite.style.setProperty("--oj-sp-page-template-content-height",e)}})},this.getBottomSpacing=()=>{const e=document.querySelector(".oj-sp-header-general-overview-mobile-buttons-container"),t=document.querySelector(".oj-sp-rw-ask-oracle-button"),i=t?t.getBoundingClientRect().height:0,o=e?e.getBoundingClientRect().height:0;return 0!=o?o-i:0},this.processPrimaryAction=e=>{e?e.display?this.primaryActionDisplay(e.display):this.primaryActionDisplay(e.disabled?"disabled":"on"):this.primaryActionDisplay("off")};const a=s.getContext(e.element).getBusyContext();this.busyResolve=a.addBusyState({description:"Web Component Startup - Waiting for data"}),this.ojTranslate=n,this.composite=e.element,this.uid=e.uniqueId,this.slotCounts=e.slotCounts,this.properties=e.properties,this.res=o,this.respPadding=i.observable((null===(t=this.properties)||void 0===t?void 0:t.displayOptions)&&"on"===this.properties.displayOptions.responsivePadding?"on":"off"),this.contextualInfo=i.observableArray(),this.onContextualInfoChanged(this.properties.contextualInfo),this.primaryActionDisplay=i.observable(),this.processPrimaryAction(this.properties.primaryAction),this.isInView=i.observable(!1),this.headerAvatar=i.computed(()=>this.properties.avatar?Object.assign({},this.properties.avatar):void 0),this.headerTranslations=i.computed(()=>Object.assign({},this.properties.translations)),this.busyResolve()}activated(e){a.log(`%c CCA ${this.uid} activated`,r)}connected(e){a.log(`%c CCA ${this.uid} connected`,r),window.addEventListener("resize",this.onResizeWindow),window.addEventListener("scroll",this.onScroll),window.innerWidth<1024?this.setupIntersectionObserver():this.isInView(!0)}bindingsApplied(e){a.log(`%c CCA ${this.uid} bindingsApplied`,r),this.responsivePaddingHandler(),this.updateMainContentHeight(!0)}propertyChanged(e){a.log(`%c CCA ${this.uid} propertyChanged: ${e.property}`,r),"contextualInfo"===e.property&&e.value&&this.onContextualInfoChanged(e.value),"primaryAction"===e.property&&(this.processPrimaryAction(e.value),this.updateMainContentHeight(!0)),"displayOptions"===e.property&&e.value&&e.value.responsivePadding&&(this.respPadding("on"===e.value.responsivePadding?"on":"off"),this.responsivePaddingHandler())}disconnected(e){a.log(`%c CCA ${this.uid} disconnected`,r),window.removeEventListener("resize",this.onResizeWindow),window.removeEventListener("scroll",this.onScroll),this.disconnectIntersectionObserver()}setupIntersectionObserver(){var e;if(!this.intersectionObserver&&!this.isInView()){const e={rootMargin:"0px",threshold:.05};this.intersectionObserver=new IntersectionObserver(e=>{for(const t of e)!this.isInView()&&t.isIntersecting&&this.isInView(!0);this.isInView()&&this.disconnectIntersectionObserver()},e)}let t=this.composite.querySelector("#info_slot");(null===(e=this.properties.displayOptions)||void 0===e?void 0:e.promoteInfoSlot)&&(t=this.composite.querySelector("#main_slot")),t&&this.intersectionObserver.observe(t)}disconnectIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0)}}})),define("css!oj-sp/general-overview-page/general-overview-page-styles",[],(function(){})),define("oj-sp/general-overview-page/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./general-overview-page-view.html","./general-overview-page-viewModel","css!./general-overview-page-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-general-overview-page",{metadata:JSON.parse(o),view:s,viewModel:a.GeneralOverviewPageViewModel})})),define("text!oj-sp/guided-process/component.json",[],(function(){return'{"name":"guided-process","version":"2404.0.0","pack":"oj-sp","type":"composite","subcomponentType":"patternImpl","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Guided Process Page Template","description":"Guided process is a fullscreen layout with the intention of breaking up a complex process into smaller tasks.","dependencies":{"oj-sp-css-additions":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-timestamp":"2404.0.0"},"icon":{"iconPath":"extension/catalog/images/ico-page-template.svg"},"properties":{"processTitle":{"displayName":"Process Title","type":"string","description":"A translatable title for the whole guided process","propertyGroup":"common","translatable":true,"required":true,"extension":{"vbdt":{"placeholderValue":"Guided Process Title"}}},"processSubtitle":{"displayName":"Process Subtitle","type":"string","description":"A translatable subtitle to help explain the whole process to user","translatable":true,"required":false,"extension":{"vbdt":{"placeholderValue":"Guided Process Subtitle"}}},"avatar":{"propertyGroup":"common","displayName":"Avatar","description":"The avatar of the person who is required in the context of the page.","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"steps":{"displayName":"Steps","description":"Guided Process Steps","type":"Array<object>","propertyGroup":"common","required":true,"extension":{"vbdt":{"itemProperties":{"id":{"displayName":"ID","description":"A unique Id for the guided process step.","type":"string","writeback":false,"required":true},"title":{"displayName":"Step Title","description":"Title of the guided process step.","type":"string","writeback":false,"required":true},"description":{"displayName":"Step Description","description":"Decription of the guided process step.","type":"string","writeback":false,"required":false},"display":{"type":"string","displayName":"Display option of the guided process step","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Step is visible and enabled"},"off":{"displayName":"Off","description":"Step is not visible"},"disabled":{"displayName":"Disabled","description":"Step is visible and disabled"}}},"status":{"type":"string","displayName":"Status option of the guided process step","value":"none","enumValues":["error","success","none"],"propertyEditorValues":{"error":{"displayName":"Error","description":"Step has an error and needs to be reviewed"},"success":{"displayName":"Success","description":"Step is done successfully"},"none":{"displayName":"None","description":"Step doesn\'t have a status"}}},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp","writeback":false,"required":false},"optional":{"type":"boolean","description":"The Indicator for any step that can be skipped (optional step)","displayName":"Optional","value":"false","writeback":false,"required":false},"checklist":{"type":"Array<object>","displayName":"Checklist","description":"Array of checklist items","extension":{"vbdt":{"itemProperties":{"label":{"displayName":"Label","description":"Label of this checklist item.","type":"string","writeback":false,"required":true},"checked":{"displayName":"Checked","description":"The indicator of whether this checklist item is completed or not.","type":"boolean","writeback":false,"required":true}}}}}},"placeholderValue":"[[[{\\"id\\":\\"step1\\",\\"title\\":\\"Step1 title\\",\\"description\\":\\"Step1 description\\"},{\\"id\\":\\"step2\\",\\"title\\":\\"Step2 title\\",\\"description\\":\\"step 2 Description\\"}]]]"}}},"currentStep":{"displayName":"Current Step ","description":"The id of the currently selected guided process step or blank, meaning no step is expanded","type":"string","writeback":true,"required":false,"value":""},"resumeStepId":{"displayName":"Resume from Step ","description":"The id of the step that continuation of guided process should start from","type":"string","writeback":false,"required":false,"value":""},"primaryAction":{"displayName":"Primary Action","description":"The primary action button.","type":"object","propertyGroup":"common","properties":{"label":{"displayName":"Primary Action Label","description":"The label for the primary action button of the page.","translatable":true,"type":"string"},"disabled":{"displayName":"Primary Action Disabled status","description":"The disabled state of the primary action button.","type":"boolean"},"availableFromStep":{"displayName":"Primary Action Available From Step","description":"Id of the starting step from which primary action is available.","type":"string"},"progressState":{"description":"The state of the progress, can be on/off","type":"string","value":"off","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Progress is going on."},"off":{"displayName":"Off","description":"Progress is off."}}}},"required":true},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","propertyGroup":"common","type":"object","properties":{"save":{"description":"Defines whether Save action is visible","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Save button is visible and enabled"},"off":{"displayName":"Off","description":"Save button is not visible"},"disabled":{"displayName":"Disabled","description":"Save button is visible and disabled"}}},"saveAndClose":{"description":"Defines whether Save and Close action is visible","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Save and close button is visible and enabled"},"off":{"displayName":"Off","description":"Save and close button is not visible"},"disabled":{"displayName":"Disabled","description":"Save and close button is visible and disabled"}}},"checklistDisplay":{"description":"Defines whether to display the all checklists","type":"string","value":"current","enumValues":["current","all"],"propertyEditorValues":{"current":{"displayName":"Current","description":"Only show current step checklist"},"all":{"displayName":"All","description":"Always show all steps checklists"}}},"avatar":{"type":"string","description":"Control the visibility of the avatar","displayName":"Show Avatar","value":"on","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Avatar is visible"},"off":{"displayName":"Off","description":"Avatar is not visible"}},"required":false},"responsivePadding":{"type":"string","description":"Specify if dynamic paddings should be on or off","displayName":"Dynamic Paddings Enabled","enumValues":["on","off"],"status":[{"target":"propertyValue","type":"deprecated","since":"2310.0.0","description":"Enum value \'off\' is deprecated. Use \'on\' instead.","value":["off"]}],"propertyEditorValues":{"on":{"displayName":"On","description":"Dynamic paddings are on."},"off":{"displayName":"Off","description":"Dynamic paddings are off."}}},"overviewAnimation":{"type":"string","description":"This property determines whether we show an animation of the overview page or not","displayName":"Overview Page Enabled","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Overview animations are on."},"off":{"displayName":"Off","description":"Overview animations are off."}},"required":false}},"required":false},"completionStatus":{"description":"The state of the completion status. If on displays completion slot.","type":"string","value":"off","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Completion status is going on."},"off":{"displayName":"Off","description":"Completion status is off."}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Will be fired when primary action is invoked.","bubbles":false,"cancelable":false,"eventGroup":"common"},"spBeforeNext":{"displayName":"spBeforeNext event","description":"","bubbles":true,"cancelable":true,"status":[{"type":"deprecated","since":"2210.0.0","description":"Use ojSpBeforeStepNavigate event instead."}]},"spBeforeStepNavigate":{"displayName":"spBeforeStepNavigate event","description":"Fired when next(continue) action is invoked or when navigate to another step is triggered through the table of contents","bubbles":true,"cancelable":true,"eventGroup":"common"},"spCancel":{"displayName":"spCancel event","description":"This event is triggered when cancel button is clicked.","bubbles":false,"cancelable":true,"eventGroup":"common"},"ojSpOverrideShellBottomSpacing":{"displayName":"ojSpOverrideShellBottomSpacing event","description":"A shell related event for removing bottom spacing.","bubbles":true,"cancelable":true},"spSave":{"displayName":"spSave event","description":"Triggered when the save action is clicked.","bubbles":false,"cancelable":true,"eventGroup":"common"},"spSaveAndClose":{"displayName":"spSaveAndClose event","description":"Triggered when the save and close action is clicked.","bubbles":false,"cancelable":true,"eventGroup":"common"},"spSkip":{"displayName":"spSkip event","description":"Triggered when the skip action is clicked.","bubbles":false,"cancelable":true,"detail":{"skippedStepId":{"description":"The id of Skipped step","type":"string"}},"eventGroup":"common"}},"slots":{"":{"displayName":"Default","description":"Allows the consumer to control detail information for guided process step. Use one subflow component to host details","implicitBusyContext":true,"maxItems":1,"minItems":1},"completionStep":{"displayName":"CompletionStep","description":"Allows consumer to add a completion panel to guided process. This panel will be displayed when completionStatus is set to on","maxItems":1,"minItems":0}},"extension":{"catalog":{"category":"Redwood Page Templates","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-page-template.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Guided%20Process%20Page%20Template&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraguidedprocess.html","screenshots":{}},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"data":{"customizers":[{"propertyName":"steps","displayName":"Steps","singleName":"Step","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"title":{}},"drill":{"layout":"stepsLayout"}}]},"general":{"customizers":[{"propertyName":"processTitle"},{"propertyName":"processSubtitle"},{"propertyName":"currentStep"},{"propertyName":"displayOptions.save","displayName":"Save Enabled","type":"enumeration"},{"propertyName":"displayOptions.saveAndClose","displayName":"Save And Close Enabled","type":"enumeration"},{"propertyName":"displayOptions.avatar","displayName":"Avatar Display","type":"enumeration"},{"propertyName":"avatar.src","displayName":"Avatar Source"},{"propertyName":"avatar.initials","displayName":"Avatar Initials"},{"propertyName":"primaryAction.label","translatable":true,"displayName":"Primary Action Label"},{"propertyName":"primaryAction.disabled","displayName":"Primary Action Disabled"},{"propertyName":"primaryAction.availableFromStep","displayName":"Primary Action Available From Step"}]},"stepsLayout":{"customizers":[{"propertyName":"steps.id","displayName":"ID"},{"propertyName":"steps.title","displayName":"Title"},{"propertyName":"steps.description","displayName":"Description"},{"propertyName":"steps.display","displayName":"Display","type":"enumeration"},{"propertyName":"steps.status","displayName":"Status","type":"enumeration"},{"propertyName":"steps.optional","displayName":"Step Is Optional"},{"propertyName":"steps.timestamp","displayName":"Timestamp","type":"default-datetime"}]},"actions":{"customizers":[]}},"events":{"suggestions":[{"type":"component","name":"spPrimaryAction","mappings":[]},{"type":"component","name":"spBeforeStepNavigate","mappings":[]},{"type":"component","name":"spCancel","mappings":[]},{"type":"component","name":"spSave","mappings":[]},{"type":"component","name":"spSaveAndClose","mappings":[]},{"type":"component","name":"spSkip","mappings":[]}]}}}}}'})),define("text!oj-sp/guided-process/guided-process-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-guided-process-container"role="main"data-oj-context=""><div class="oj-sp-guided-process-stripe"></div><oj-bind-if test="[[!currentStep() &amp;&amp; !displayCompletionStep()]]"><div class="oj-sp-guided-process-main-view-container"><oj-bind-if test="[[!isVerticalLayout() &amp;&amp; $properties.displayOptions.overviewAnimation !== \'on\']]"><header class="oj-sp-guided-process-header"tabindex="0"><div :id="[[ uid + \'_processTitle\' ]]":title="[[$properties.processTitle]]"role="heading"aria-level="1":aria-label="[[$properties.processTitle]]"class="oj-line-clamp-2 oj-sp-serif-font-family oj-sp-guided-process-page-title oj-sm-margin-12x-horizontal"><oj-bind-text value="[[$properties.processTitle]]"></oj-bind-text></div><oj-bind-if test="[[ properties.processSubtitle ]]"><div :title="[[$properties.processSubtitle]]"role="heading"aria-level="2":aria-label="[[$properties.processSubtitle]]"class="oj-line-clamp-3 oj-sp-guided-process-page-subtitle oj-sm-margin-12x-horizontal"><oj-bind-text value="[[$properties.processSubtitle]]"></oj-bind-text></div></oj-bind-if></header></oj-bind-if><div data-otel-hero="oj-sp-guided-process.overview"class="oj-flex oj-sp-guided-process-step-container oj-sm-flex-wrap-nowrap"data-oj-context=""><oj-bind-for-each data="[[steps()]]"><template data-oj-as="step"><oj-bind-if test="[[ $properties.displayOptions.overviewAnimation !== \'on\' ]]"><div :class="[[\'oj-sm-padding-12x-horizontal oj-color-invert oj-sp-guided-process-step oj-sp-gp-step-bg-color-\' + (step.index + 1)]]"tabindex="0"><oj-bind-if test="[[isVerticalLayout()]]"><oj-bind-if test="[[step.index === 0]]"><header class="oj-sp-guided-process-header"><div :id="[[ uid + \'_processTitle\' ]]":title="[[$properties.processTitle]]"role="heading"aria-level="1":aria-label="[[$properties.processTitle]]"class="oj-line-clamp-3 oj-sp-serif-font-family oj-sp-guided-process-page-title"><oj-bind-text value="[[$properties.processTitle]]"></oj-bind-text></div><oj-bind-if test="[[ properties.processSubtitle ]]"><div :title="[[$properties.processSubtitle]]"role="heading"aria-level="2":aria-label="[[$properties.processSubtitle]]"class="oj-line-clamp-3 oj-sp-guided-process-page-subtitle"><oj-bind-text value="[[$properties.processSubtitle]]"></oj-bind-text></div></oj-bind-if></header></oj-bind-if></oj-bind-if><div class="oj-sp-guided-process-step-inner-container"><div class="oj-sp-serif-font-family oj-sp-guided-process-step-label oj-sm-padding-4x-bottom":aria-label="[[ getStepIndicatorText(step.index) ]]"role="heading"aria-level="2"><oj-bind-text value="[[(\'\'+(step.index+1)).padStart(2, \'0\')]]"></oj-bind-text></div><div class="oj-sp-guided-process-step-content"><div class="oj-line-clamp-3 oj-sp-guided-process-step-title":title="[[step.data.title]]"><oj-bind-text value="[[step.data.title]]"></oj-bind-text></div><div class="oj-line-clamp-3 oj-sp-guided-process-step-description oj-sm-margin-1x-top":title="[[step.data.description]]"><oj-bind-text value="[[step.data.description]]"></oj-bind-text></div></div><div class="oj-sp-guided-process-step-bottom-container"><oj-bind-if test="[[ step.data.status &amp;&amp; step.data.status !== \'none\' ]]"><div class="oj-sm-margin-6x-top"><div class="oj-sp-guided-process-status oj-typography-body-sm oj-text-color-primary":aria-label="[[ getStatusText(step.data.status) ]]"><span class="oj-sp-guided-process-status-icon":class="[[ getStatusIcon(step.data.status) ]]"></span><oj-bind-text value="[[ getStatusText(step.data.status) ]]"></oj-bind-text></div></div></oj-bind-if><oj-bind-if test="[[step.index === 0 ]]"><div class="oj-sm-margin-10x-top"><oj-button class="oj-button-sm oj-sp-guided-process-button-interactive"chroming="callToAction"on-oj-action="[[ startProcess ]]":id="[[ uid + \'_start\' ]]"><span><oj-bind-if test="[[ !(getStepIndexFromId($properties.resumeStepId) > 0) ]]"><oj-bind-text value="[[res.start]]"></oj-bind-text></oj-bind-if><oj-bind-if test="[[ getStepIndexFromId($properties.resumeStepId) > 0 ]]"><oj-bind-text value="[[res.resume]]"></oj-bind-text></oj-bind-if></span></oj-button><oj-button class="oj-button-sm oj-sm-padding-1x-start"chroming="borderless":id="[[ uid + \'_cancel\']]"on-oj-action="[[ cancelActionHandler ]]"><span><oj-bind-text value="[[res.cancel]]"></oj-bind-text></span></oj-button></div></oj-bind-if></div><div class="oj-sp-guided-process-step-bottom-place-holder"></div></div></div></oj-bind-if><oj-bind-if test="[[ step.index >= numberResumeStepId &amp;&amp; $properties.displayOptions.overviewAnimation === \'on\' ]]"><div :class="[[\'oj-sm-padding-12x-horizontal oj-color-invert oj-sp-guided-process-step oj-sp-gp-step-bg-color-\' + (step.index + 1)]]"tabindex="0"><oj-bind-if test="[[isVerticalLayout()]]"><oj-bind-if test="[[ step.index === numberResumeStepId ]]"><header class="oj-sp-guided-process-header"><div :id="[[ uid + \'_processTitle\' ]]":title="[[$properties.processTitle]]"role="heading"aria-level="1":aria-label="[[$properties.processTitle]]"class="oj-line-clamp-3 oj-sp-serif-font-family oj-sp-guided-process-page-title"><oj-bind-text value="[[$properties.processTitle]]"></oj-bind-text></div><oj-bind-if test="[[ properties.processSubtitle ]]"><div :title="[[$properties.processSubtitle]]"role="heading"aria-level="2":aria-label="[[$properties.processSubtitle]]"class="oj-line-clamp-3 oj-sp-guided-process-page-subtitle"><oj-bind-text value="[[$properties.processSubtitle]]"></oj-bind-text></div></oj-bind-if></header></oj-bind-if></oj-bind-if><div class="oj-sp-guided-process-step-inner-container"><div class="oj-sp-serif-font-family oj-sp-guided-process-step-label oj-sm-padding-4x-bottom":aria-label="[[ getStepIndicatorText(step.index) ]]"role="heading"aria-level="2"><oj-bind-text value="[[(\'\'+(step.index+1)).padStart(2, \'0\')]]"></oj-bind-text></div><div class="oj-sp-guided-process-step-content"><div class="oj-line-clamp-3 oj-sp-guided-process-step-title":title="[[step.data.title]]"><oj-bind-text value="[[step.data.title]]"></oj-bind-text></div><div class="oj-line-clamp-3 oj-sp-guided-process-step-description oj-sm-margin-1x-top":title="[[step.data.description]]"><oj-bind-text value="[[step.data.description]]"></oj-bind-text></div></div><div class="oj-sp-guided-process-step-bottom-container"><oj-bind-if test="[[ step.data.status &amp;&amp; step.data.status !== \'none\' ]]"><div class="oj-sm-margin-6x-top"><div class="oj-sp-guided-process-status oj-typography-body-sm oj-text-color-primary":aria-label="[[ getStatusText(step.data.status) ]]"><span class="oj-sp-guided-process-status-icon":class="[[ getStatusIcon(step.data.status) ]]"></span><oj-bind-text value="[[ getStatusText(step.data.status) ]]"></oj-bind-text></div></div></oj-bind-if></div><div class="oj-sp-guided-process-step-bottom-place-holder"></div></div></div></oj-bind-if></template></oj-bind-for-each></div></div></oj-bind-if><oj-bind-if test="[[currentStep() &amp;&amp; !displayCompletionStep()]]"><div class="oj-sp-guided-process-step-details-container"><div class="oj-sp-guided-process-step-details"><div :class="[[{\n          \'oj-sp-guided-process-step-details-content\': true, \n          \' oj-sm-padding-4x-horizontal oj-md-padding-6x-horizontal oj-lg-padding-12x-horizontal\': respPadding() === \'off\'\n        }]]"><div class="oj-sp-guided-process-step-details-sticky-content oj-sm-padding-6x-top oj-md-padding-12x-top"><header :aria-labelledby="[[ uid + \'_stepTitle\' ]]":class="[[{\n              \'oj-sp-template-wrapper\': respPadding() === \'on\'\n            }]]"><div class="oj-flex oj-sp-guided-process-step-details-header oj-sm-flex-wrap-nowrap"><div class="oj-flex-item oj-flex oj-sm-flex-direction-column oj-lg-padding-12x-end"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-flex-item oj-sm-flex-direction-row oj-sm-align-items-center oj-sm-margin-2x-bottom oj-lg-margin-4x-bottom"><div class="oj-sp-guided-process-step-details-page-title oj-flex-item"><span class="oj-line-clamp-2"role="heading"aria-level="2":aria-label="[[$properties.processTitle]]"><oj-bind-text value="[[$properties.processTitle]]"></oj-bind-text></span></div><div class="oj-flex-item oj-lg-hide oj-sm-padding-4x-bottom oj-md-padding-4x-bottom oj-sp-guided-process-step-number-ltr"><a href="#"class="oj-sp-guided-process-details-step-number-link"on-click="[[showRightPanel]]"on-keydown="[[ showRightPanelWithKey ]]":title="[[ stepIndicator() ]]"><div class="oj-sp-sm-guided-process-step-numbers oj-flex oj-sm-flex-wrap-nowrap oj-sm-justify-content-flex-end oj-sm-padding-4x-start":aria-label="[[ stepIndicator() ]]"><div class="oj-sp-serif-font-family oj-sp-guided-process-step-number"><oj-bind-text value="[[(getCurrentStepIndex() + 1)]]"></oj-bind-text></div><div class="oj-sp-guided-process-step-number-separator"></div><div class="oj-sp-serif-font-family oj-sp-guided-process-step-count oj-sm-padding-4x-top"><oj-bind-text value="[[steps().length]]"></oj-bind-text></div></div></a></div><div class="oj-lg-hide oj-sm-padding-4x-bottom oj-md-padding-4x-bottom oj-sp-guided-process-step-number-rtl"><a href="#"class="oj-sp-guided-process-details-step-number-link"on-click="[[showRightPanel]]"on-keydown="[[ showRightPanelWithKey ]]":title="[[ stepIndicator() ]]"><div class="oj-sp-sm-guided-process-step-numbers oj-flex oj-sm-flex-wrap-nowrap oj-sm-justify-content-flex-end oj-sm-padding-4x-start":aria-label="[[ stepIndicator() ]]"><div class="oj-sp-serif-font-family oj-sp-guided-process-step-count oj-sm-padding-4x-top"><oj-bind-text value="[[steps().length]]"></oj-bind-text></div><div class="oj-sp-guided-process-step-number-separator"></div><div class="oj-sp-serif-font-family oj-sp-guided-process-step-number"><oj-bind-text value="[[(getCurrentStepIndex() + 1)]]"></oj-bind-text></div></div></a></div></div><div class="oj-flex oj-sm-flex-wrap-nowrap oj-md-flex-wrap-nowrap oj-lg-flex-wrap-nowrap oj-flex-item oj-sm-flex-direction-row oj-md-flex-direction-row oj-lg-flex-direction-row"><oj-bind-if test="[[ avatarVisible ]]"><div class="oj-flex-item oj-sm-flex-0 oj-sm-padding-4x-end"><oj-avatar :id="[[ uid + \'_avatar\' ]]":aria-label="[[ avatarLabel ]]":title="[[ avatarLabel ]]"role="img"size="[[ avatarSize ]]"initials="[[ avatarInitials ]]"src="[[ avatarSrc ]]"></oj-avatar></div></oj-bind-if><div class="oj-flex oj-flex-item oj-sm-flex-direction-column oj-sm-padding-2x-top"><div class="oj-flex-item"><span :id="[[ uid + \'_stepTitle\' ]]"tabindex="0"class="oj-sp-serif-font-family oj-sp-guided-process-step-details-title oj-line-clamp-2"role="heading"aria-level="1":aria-label="[[ojTranslate.applyParameters(res.stepTitle, {currentStep: (getCurrentStepIndex()+1), totalSteps: steps().length, stepTitle: getCurrentStep()?.title})]]"><oj-bind-text value="[[getCurrentStep()?.title]]"></oj-bind-text></span></div><div class="oj-flex-item"><span class="oj-sp-guided-process-step-details-description oj-line-clamp-3"><oj-bind-text value="[[getCurrentStep()?.description]]"></oj-bind-text></span></div></div></div></div></div></header><div data-otel-hero="oj-sp-guided-process.detail"class="oj-sp-guided-process-step-details-slot-content oj-sm-padding-6x-top oj-md-padding-10x-top"aria-live="polite"data-oj-context=""><oj-bind-slot></oj-bind-slot></div></div></div><div :class="[[{\n          \'oj-sp-guided-process-step-details-footer oj-md-padding-6x-horizontal oj-sp-transactional-page-actions\': true,\n          \'oj-md-padding-6x-horizonta oj-lg-padding-12x-horizontal\': respPadding() === \'off\',\n          \'oj-sp-template-wrapper\': respPadding() === \'on\'\n        }]]"><oj-bind-if test="[[ showDivider() ]]"><div class="oj-sp-guided-process-step-details-footer-divider"></div></oj-bind-if><div class="oj-flex oj-sm-only-flex-direction-column oj-sm-padding-4x-vertical oj-md-padding-6x-vertical oj-sm-only-padding-4x-start oj-sm-only-padding-11x-end oj-md-only-padding-12x-end"><oj-bind-if test="[[getCurrentStep()?.timestamp]]"><div class="oj-flex-item oj-sm-only-padding-4x-bottom oj-sp-guided-process-timestamp oj-typography-body-xs oj-text-color-secondary"><oj-sp-timestamp value="[[getCurrentStep()?.timestamp]]"interval="60"></oj-sp-timestamp></div></oj-bind-if><div class="oj-flex-item oj-flex oj-sp-guided-process-step-buttons-container oj-md-flex-wrap-nowrap"><oj-bind-if test="[[ !isMediumScreen() ]]"><oj-menu-button class="oj-clickthrough-disabled oj-sm-padding-2x-end oj-button-sm"chroming="borderless":id="[[ uid + \'_menuButton\' ]]"display="icons"><span><oj-bind-text value="[[ res.moreActions ]]"></oj-bind-text></span><span slot="endIcon"class="oj-ux-ico-overflow-horiz oj-button-icon oj-end"></span><oj-menu :id="[[ uid + \'_menu\' ]]"on-oj-menu-action="[[ menuActionHandler ]]"slot="menu"><oj-option :id="[[ uid + \'_cancelOption\' ]]"class="oj-clickthrough-disabled"value="spCancel"><span><oj-bind-text value="[[ res.cancel ]]"></oj-bind-text></span></oj-option><oj-bind-if test="[[ saveIsOn() ]]"><oj-option :id="[[ uid + \'_saveOption\' ]]"class="oj-clickthrough-disabled"disabled="[[ saveDisabled() ]]"value="spSave":class="[[{\'oj-helper-hidden\': !(isCurrentStepOptional() || isSmallScreen()) }]]"><span><oj-bind-text value="[[ res.save ]]"></oj-bind-text></span></oj-option></oj-bind-if><oj-bind-if test="[[ saveAndCloseIsOn() ]]"><oj-option :id="[[ uid + \'_saveAndCloseOption\' ]]"class="oj-clickthrough-disabled"disabled="[[ saveAndCloseDisabled() ]]"value="spSaveAndClose":class="[[{\'oj-helper-hidden\': !(isCurrentStepOptional() || isSmallScreen()) }]]"><span><oj-bind-text value="[[ res.saveAndClose ]]"></oj-bind-text></span></oj-option></oj-bind-if><oj-bind-if test="[[ isCurrentStepOptional() ]]"><oj-option :id="[[ uid + \'_skipOption\' ]]"class="oj-clickthrough-disabled"value="spSkip":class="[[{\'oj-helper-hidden\': !(!saveIsOn() || isSmallScreen()) }]]"><span><oj-bind-text value="[[ res.skip ]]"></oj-bind-text></span></oj-option></oj-bind-if><oj-bind-if test="[[ isPrimaryActionMenuOptionVisible() ]]"><oj-option class="oj-clickthrough-disabled"value="spPrimaryAction"disabled="[[ getPrimaryActionDisabledState() ]]":id="[[ uid + \'_primaryActionOption\']]"><span><oj-bind-text value="[[$properties.primaryAction.label]]"></oj-bind-text></span></oj-option></oj-bind-if></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ !isContentChanging() ]]"><div class="oj-sp-guided-process-step-buttons-toolbar oj-sm-only-padding-4x-end"><oj-toolbar :id="[[ uid + \'footerToolbar\']]"data-oj-clickthrough="disabled"aria-label="Footer Process Buttons"aria-controls="controlled"><oj-bind-if test="[[ isMediumScreen() ]]"><oj-button class="oj-clickthrough-disabled oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end"chroming="borderless"on-oj-action="[[ cancelActionHandler ]]":id="[[ uid + \'_cancelOnExpand\']]"><span><oj-bind-text value="[[res.cancel]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ saveIsOn() &amp;&amp; !saveAndCloseIsOn() &amp;&amp; !isSmallScreen() &amp;&amp; (!getCurrentStep()?.optional || isMediumScreen()) ]]"><oj-button class="oj-clickthrough-disabled oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end"chroming="borderless"disabled="[[ saveDisabled() ]]"on-oj-action="[[ saveActionHandler ]]":id="[[ uid + \'_save\']]"><span><oj-bind-text value="[[res.save]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ saveAndCloseIsOn() &amp;&amp; !saveIsOn() &amp;&amp; !isSmallScreen() &amp;&amp; (!getCurrentStep()?.optional || isMediumScreen()) ]]"><oj-button class="oj-clickthrough-disabled oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end"chroming="borderless"disabled="[[ saveAndCloseDisabled() ]]"on-oj-action="[[ saveAndCloseActionHandler ]]":id="[[ uid + \'_saveAndClose\']]"><span><oj-bind-text value="[[res.saveAndClose]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ saveIsOn() &amp;&amp; saveAndCloseIsOn() &amp;&amp; !isSmallScreen() &amp;&amp; (!getCurrentStep()?.optional || isMediumScreen()) ]]"><oj-menu-button :id="[[ uid + \'_savebuttons\' ]]"class="oj-clickthrough-disabled oj-button-sm"><oj-bind-text value="[[ res.save ]]"></oj-bind-text><oj-menu :id="[[ uid + \'_menu\' ]]"on-oj-menu-action="[[ menuActionHandler ]]"slot="menu"><oj-option :id="[[ uid + \'_saveOption\' ]]"class="oj-clickthrough-disabled"disabled="[[ saveDisabled() ]]"value="spSave"><span><oj-bind-text value="[[ res.save ]]"></oj-bind-text></span></oj-option><oj-option :id="[[ uid + \'_saveAndCloseOption\' ]]"class="oj-clickthrough-disabled"disabled="[[ saveAndCloseDisabled() ]]"value="spSaveAndClose"><span><oj-bind-text value="[[ res.saveAndClose ]]"></oj-bind-text></span></oj-option></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ getCurrentStep()?.optional &amp;&amp; !isSmallScreen() ]]"><oj-button class="oj-clickthrough-disabled oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end"chroming="borderless"on-oj-action="[[ skipStep ]]":id="[[ uid + \'_skip\']]"><span><oj-bind-text value="[[res.skip]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ getCurrentStepIndex() < steps().length - 1 ]]"><oj-button class="oj-clickthrough-disabled oj-button-sm oj-md-margin-1x-start oj-md-margin-1x-end oj-sm-only-margin-0-horizontal oj-sm-only-width-full"chroming="outlined"on-oj-action="[[ nextStep ]]":id="[[ uid + \'_continue\']]"><span><oj-bind-text value="[[res.continue]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ isPrimaryActionButtonVisible() ]]"><oj-button class="oj-clickthrough-disabled oj-button-sm oj-sm-only-width-full oj-md-margin-1x-start oj-md-margin-0-end oj-sm-only-margin-0-horizontal oj-sm-only-margin-1x-top"chroming="callToAction"on-oj-action="[[ submit ]]"disabled="[[ getPrimaryActionDisabledState() ]]":id="[[ uid + \'_primaryAction\']]"><span><oj-bind-text value="[[$properties.primaryAction.label]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-toolbar></div></oj-bind-if></div></div></div></div><div :class="[[\'oj-color-invert oj-sp-guided-process-right-panel oj-sp-gp-step-bg-color-\' + (getCurrentStepIndex() + 1)]]"><div class="oj-sp-guided-process-right-panel-top-container":class="[[\'oj-sp-gp-step-bg-color-\' + (getCurrentStepIndex() + 1)]]"><div class="oj-flex oj-sm-padding-4x-horizontal oj-sp-guided-process-reflow-padding-1x-vertical oj-sm-only-padding-6x-vertical oj-md-padding-6x-top oj-md-padding-4x-bottom"><div class="oj-flex-item oj-md-padding-2x-start oj-lg-padding-8x-start oj-md-padding-6x-top oj-sm-padding-4x-bottom"><header :aria-labelledby="[[ uid + \'_stepNumber\' ]]"><a href="#"class="oj-sp-guided-process-step-number-link"on-click="[[showHideNavList]]"on-keydown="[[ showHideNavListWithKey ]]":title="[[ stepIndicator() ]]"><div role="heading"aria-level="2":id="[[ uid + \'_stepNumber\' ]]"class="oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sp-guided-process-step-number-ltr":aria-label="[[ stepIndicator() ]]"><div class="oj-sp-serif-font-family oj-sp-guided-process-step-number"><oj-bind-text value="[[(getCurrentStepIndex() + 1)]]"></oj-bind-text></div><div class="oj-sp-guided-process-step-number-separator"></div><div class="oj-sp-serif-font-family oj-sp-guided-process-step-count oj-sm-padding-4x-top"><oj-bind-text value="[[steps().length]]"></oj-bind-text></div></div><div role="heading"aria-level="2":id="[[ uid + \'_stepNumber\' ]]"class="oj-sp-guided-process-step-number-rtl oj-flex-item oj-flex oj-sm-flex-wrap-nowrap":aria-label="[[ stepIndicator() ]]"><div class="oj-sp-guided-process-step-count oj-sm-padding-4x-top"><oj-bind-text value="[[steps().length]]"></oj-bind-text></div><div class="oj-sp-guided-process-step-number-separator"></div><div class="oj-sp-guided-process-step-number"><oj-bind-text value="[[(getCurrentStepIndex() + 1)]]"></oj-bind-text></div></div></a></header></div><div class="oj-flex-item oj-lg-hide oj-md-padding-4x-start oj-lg-padding-6x-start oj-md-padding-6x-top oj-sm-padding-4x-bottom"><oj-button class="oj-button-md oj-sm-float-end oj-sp-guided-process-close-button-navlist"chroming="borderless"display="icons"on-oj-action="[[ hideRightPanel ]]"tabindex="0"on-keydown="[[ hideRightPanelWithKey ]]"><span slot="startIcon"class="oj-ux-ico-close"></span><oj-bind-text value="[[ res.close ]]"></oj-bind-text></oj-button></div></div></div><div class="oj-sp-guided-process-right-panel-navigation-list oj-color-invert"><oj-navigation-list class="oj-navigationlist-item-text-wrap oj-navigationlist-nofollow-link oj-sp-guided-process-nav-override"selection="[[currentStep()]]"on-selection-changed="[[onSelectionChanged]]"on-oj-before-select="[[onBeforeSelection]]"data="[[navigationDataDP]]":aria-label="[[stepIndicator()]]"data-oj-context=""><template slot="itemTemplate"data-oj-as="step"><li :id="[[uid + step.data.id]]":aria-label="[[step.data.title + \'. \' + getStatusTooltip(step.data) + \'. \' + getChecklistLabel(step.data)]]":aria-labelledby="[[uid + step.data.id + \'_checklist\']]"class="oj-sp-guided-process-right-panel-navigation-list-step":class="[[ \'oj-sm-padding-5x-vertical \' + ((step.data.display !== \'on\') ? \'oj-disabled\' : \'\')]]":style.animation-delay="[[(step.index + 1) * 30 + \'ms\']]"><span :id="[[uid + step.data.id + \'_step_content\']]":title="[[step.data.title]]"class="oj-sm-align-items-baseline"><div class="oj-flex oj-sp-guided-process-label-container"><span class="oj-sp-arrow-indicator oj-ux-ico-triangle-right-alt-s oj-ux-icon-size-5x"></span><span class="oj-sp-guided-process-step-details-navigation-item oj-line-clamp-3"><oj-bind-text value="[[step.data.title]]"></oj-bind-text></span><oj-bind-if test="[[(step.data.status &amp;&amp; step.data.status !== \'none\') || step.data.checklist?.length]]"><span class="oj-sp-guided-process-status-indicator":class="[[ getStatusClass(step.data) ]]":title="[[ getStatusTooltip(step.data) ]]"></span></oj-bind-if></div><oj-bind-if test="[[isCheckListVisible(step.data)]]"><div class="oj-sm-padding-2x-top":id="[[uid + step.data.id + \'_checklist\']]"role="list"><oj-bind-for-each data="[[getChecklistItems(step.data)]]"><template data-oj-as="item"><div :aria-label="[[item.data.label + \' \' + ($current.index + 1) + \' of \' + step.data.checklist.length]]"class="oj-sp-guided-process-checklist-item-container oj-sm-padding-2x-top"><span :class="[[(item.data.checked ? \'oj-ux-ico-check\' : \'oj-ux-ico-small-dot\')]]"></span><span class="oj-sm-padding-1x-start oj-typography-body-sm oj-sp-guided-process-checklist-item":title="[[item.data.label]]"><oj-bind-text value="[[item.data.label]]"></oj-bind-text></span></div></template></oj-bind-for-each></div></oj-bind-if></span></li><li class="oj-navigationlist-category-divider oj-sp-guided-process-navigation-list-devider"></li></template></oj-navigation-list></div></div></div></oj-bind-if><oj-bind-if test="[[displayCompletionStep()]]"><div class="oj-sp-guided-process-completion-panel-container"><oj-bind-slot name="completionStep"></oj-bind-slot></div></oj-bind-if></div></body></html>'})),define("oj-sp/guided-process/guided-process-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojmutablearraydataprovider","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","oj-sp/common/EventDispatcher","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/common-util/common-util","oj-sp/common/positionUtility","ojs/ojbutton","ojs/ojknockout","ojs/ojnavigationlist","ojs/ojtoolbar","ojs/ojavatar","ojs/ojmenu","oj-sp/timestamp/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GuidedProcessViewModel=void 0;const h="background: #222; color: #bada55";var m,g;!function(e){e.SUCCESS="success",e.ERROR="error",e.NONE="none"}(m||(m={})),function(e){e.ON="on",e.OFF="off",e.DISABLED="disabled"}(g||(g={}));t.GuidedProcessViewModel=class{constructor(e){var t,s,h;this.responsivePaddingHandler=()=>{this.composite&&("on"===this.respPadding()?this.composite.classList.add("oj-sp-responsive-paddings-on"):this.composite.classList.remove("oj-sp-responsive-paddings-on"))},this.menuActionHandler=e=>{switch(e.detail.selectedValue){case"spSkip":this.skipStep(e);break;case"spPrimaryAction":this.submit(e);break;case"spSave":this.saveActionHandler(e);break;case"spSaveAndClose":this.saveAndCloseActionHandler(e);break;case"spCancel":this.cancelActionHandler(e)}},this.cancelActionHandler=e=>{l.EventDispatcher.dispatch("spCancel",this.composite,void 0,!1)},this.saveActionHandler=e=>{l.EventDispatcher.dispatch("spSave",this.composite,void 0,!1)},this.saveAndCloseActionHandler=e=>{l.EventDispatcher.dispatch("spSaveAndClose",this.composite,void 0,!1)},this.getStep=e=>this.steps().find(t=>t.id===e),this.getCurrentStep=()=>this.getStep(this.properties.currentStep),this.processAvatar=(e,t)=>{let i=null,o=null,s=!1;e&&(i=e.initials,o=e.src,s=void 0===t?!(!e.initials&&!e.src):t===g.ON),this.avatarInitials(i),this.avatarSrc(o),this.avatarVisible(s)},this.getStepIndexFromId=e=>this.steps().findIndex(t=>t.id===e),this.getCurrentStepIndex=()=>this.getStepIndexFromId(this.properties.currentStep),this.getNextEnabledStep=e=>{const t=this.steps();e<0&&(e=0);for(let i=e;i<t.length;i++)if(t[i].display!==g.OFF&&t[i].display!==g.DISABLED)return t[i]},this.registerPositionListeners=()=>{let e=null,t=null;const i=this.getStripeElement();if(!i||this.isPositionArchSubsOnStripe)return;const o={componentName:this.uniqueComponentName+"_stripe",component:i,offsetCalculationSubscription:{offsetOptions:{position:"top",level:u.PositionUtility.LEVEL_MAP.header},onOffsetChange:e=>{const t=e.top;this.composite.style.setProperty("--oj-sp-guided-process-stripe-top",t+"px")}},scrollSubscription:{onScrollChange:o=>{t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{e=this.getCalculatedScrollStripHeight(o,i),this.composite.style.setProperty("--oj-sp-guided-process-stripe-top",e),this.updateLayout()})}}};if(this.isPositionArchSubsOnStripe=u.PositionUtility.subscribe(o),this.currentStep()){let e=null,t=null;const i=this.getFooterElement();if(!i||this.isPositionArchSubsOnFooter)return;const o={componentName:this.uniqueComponentName+"_footer",component:i,offsetCalculationSubscription:{offsetOptions:{position:"bottom",level:u.PositionUtility.LEVEL_MAP.CTAButtons},onOffsetChange:e=>{const t=e.bottom;this.composite.style.setProperty("--oj-sp-guided-process-step-details-footer-bottom",t+"px")}},scrollSubscription:{onScrollChange:o=>{t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{e=this.getCalculatedScrollFooterHeight(o,i),this.composite.style.setProperty("--oj-sp-guided-process-step-details-footer-bottom",e)})}}};this.isPositionArchSubsOnFooter=u.PositionUtility.subscribe(o)}},this.getCalculatedScrollStripHeight=(e,t)=>{let i=null;return i=e.isElementVisible?"0px":`-${null==t?void 0:t.getBoundingClientRect().height}px`,i},this.getCalculatedScrollFooterHeight=(e,t)=>{let i=null;return i=e.isElementVisible?"0px":`-${null==t?void 0:t.getBoundingClientRect().height}px`,i},this.unregisterPositionListeners=()=>{this.isPositionArchSubsOnStripe&&(u.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_stripe"}),this.isPositionArchSubsOnStripe=!1),this.currentStep()&&this.isPositionArchSubsOnFooter&&(u.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_footer"}),this.isPositionArchSubsOnFooter=!1)},this.getChecklistItems=e=>e.checklist?e.checklist.slice(0,5):[],this.getNumCheckedItems=e=>e.filter(e=>e.checked).length,this.startProcess=async e=>{const t=this.composite.querySelector(".oj-sp-guided-process-step-container"),i=o.getContext(t).getBusyContext().addBusyState({description:"Web Component Navigation to Detail View"});this.composite.removeEventListener("keydown",this.keyDown),this.isVerticalLayout()||this.isSmallScreen()?(t.addEventListener("transitionend",function e(o){if(o.target===t){let o=0;this.properties.resumeStepId&&(o=this.steps().findIndex(e=>e.id===this.properties.resumeStepId)),this.composite.setProperty("currentStep",this.getNextEnabledStep(o).id),t.removeEventListener("transitionend",e),i()}}.bind(this)),t.style.transitionDuration="600ms",this.isSmallScreen()||this.isVerticalLayout()?t.style.transform=`translateX(${window.innerWidth}px)`:t.style.transform=`translateX(${window.innerWidth-464}px)`):(await this.endAnimation(),i());const s=this.composite.querySelector(".oj-sp-guided-process-step-inner-container");s&&s.classList.add("oj-sp-guided-process-fade-out");const a=this.composite.querySelector(".oj-sp-guided-process-header");a&&(a.style.visibility="hidden")},this.nextStep=e=>{const t=this.getNextEnabledStep(this.getCurrentStepIndex()+1),i={currentStep:this.properties.currentStep,nextStep:t?t.id:this.properties.currentStep},o=new CustomEvent("spBeforeNext",{bubbles:!1,cancelable:!0,detail:i});this.composite.dispatchEvent(o);const s=new CustomEvent("spBeforeStepNavigate",{bubbles:!1,cancelable:!0,detail:i});this.composite.dispatchEvent(s);const a=(0,p.findAllFocusableElements)(this.composite)[0];null==a||a.focus(),o.defaultPrevented||s.defaultPrevented||!t||(this.composite.setProperty("currentStep",t.id),this.refresh())},this.skipStep=e=>{const t=this.getNextEnabledStep(this.getCurrentStepIndex()+1);if(t){const e=this.properties.currentStep;this.composite.setProperty("currentStep",t.id),this.refresh();const i={skippedStepId:e};l.EventDispatcher.dispatch("spSkip",this.composite,i,!1)}},this.submit=e=>{"on"!==this.properties.primaryAction.progressState&&l.EventDispatcher.dispatch("spPrimaryAction",this.composite,void 0)},this.onSelectionChanged=e=>{(this.isSmallScreen()||this.isVerticalLayout())&&this._hideRightPanel()},this.onBeforeSelection=e=>{const t=e.detail.key;if(t&&this.properties.currentStep!==t){const i={currentStep:this.properties.currentStep,nextStep:t},o=new CustomEvent("spBeforeStepNavigate",{bubbles:!1,cancelable:!0,detail:i});this.composite.dispatchEvent(o),o.defaultPrevented?e.preventDefault():this.composite.setProperty("currentStep",t)}},this.wheelListener=e=>{if(!this.getCurrentStep()&&!this.isVerticalLayout()){const t=this.composite.querySelector(".oj-sp-guided-process-step-container");t&&(t.scrollLeft-=this.getWheelDelta(e),e.preventDefault(),e.stopPropagation())}},this.keyDown=e=>{var t,i;if(113===e.keyCode){const t=this.composite.querySelector(`#${this.uid}_start`);t&&(t.focus(),e.preventDefault(),e.stopPropagation())}const o=this.getStepsContainerElements(),s=Array.prototype.indexOf.call(o,null==e?void 0:e.srcElement);null!=s&&(39===e.keyCode&&(null===(t=o[s+1])||void 0===t||t.focus()),37===e.keyCode&&(null===(i=o[s-1])||void 0===i||i.focus()))},this.onResizeWindow=()=>{this.updateLayout(),this.handleHeightTwoPanels()},this.setGlobalHeaderHeight=()=>{let e=0;const t=document.querySelector(".oj-sp-global-header-panel-container");t&&(e=t.getBoundingClientRect().height),this.composite.style.setProperty("--oj-sp-guided-process-global-header-height",e+"px")},this.processSaveButton=e=>{e&&e.save?e.save===g.ON?(this.saveIsOn(!0),this.saveDisabled(!1)):e.save===g.OFF?(this.saveIsOn(!1),this.saveDisabled(!0)):(this.saveIsOn(!0),this.saveDisabled(!0)):this.saveIsOn(!1)},this.processSaveAndCloseButton=e=>{e&&e.saveAndClose?e.saveAndClose===g.ON?(this.saveAndCloseIsOn(!0),this.saveAndCloseDisabled(!1)):e.saveAndClose===g.OFF?(this.saveAndCloseIsOn(!1),this.saveAndCloseDisabled(!0)):(this.saveAndCloseIsOn(!0),this.saveAndCloseDisabled(!0)):this.saveAndCloseIsOn(!1)},this.showHideNavList=e=>{e.preventDefault();const t=this.composite.querySelector(".oj-sp-guided-process-step-details-container").offsetWidth;this.composite.style.setProperty("--oj-sp-guided-process-parent-width-container",t+"px");const i=this.composite.querySelector(".oj-sp-guided-process-step-details"),o=this.composite.querySelector(".oj-sp-guided-process-right-panel-navigation-list");window.innerWidth>1024&&(this.isRightPanelVisible()?(o.classList.remove("oj-sp-guided-process-right-panel-navigation-list-animation-text-open"),i.classList.remove("oj-sp-guided-process-detail-container-animation-open"),o.classList.add("oj-sp-guided-process-right-panel-navigation-list-animation-text-close"),i.classList.add("oj-sp-guided-process-detail-container-animation-close"),this.isRightPanelVisible(!1)):(o.classList.remove("oj-sp-guided-process-right-panel-navigation-list-animation-text-close"),i.classList.remove("oj-sp-guided-process-detail-container-animation-close"),o.classList.add("oj-sp-guided-process-right-panel-navigation-list-animation-text-open"),i.classList.add("oj-sp-guided-process-detail-container-animation-open"),this.isRightPanelVisible(!0)))},this.showHideNavListWithKey=e=>{if(13===e.keyCode)return this.showHideNavList(e)},this.showRightPanel=e=>{e.preventDefault();this.composite.querySelector(".oj-sp-guided-process-right-panel").classList.add("show")},this.showRightPanelWithKey=e=>{if(13===e.keyCode){const t=this.composite.querySelector(".oj-sp-guided-process-close-button-navlist");return null==t||t.focus(),this.showRightPanel(e)}},this.hideRightPanel=e=>{e.preventDefault(),this._hideRightPanel()},this.hideRightPanelWithKey=e=>{if(13===e.keyCode){const t=this.composite.querySelector(".oj-sp-guided-process-details-step-number-link");return null==t||t.focus(),this.hideRightPanel(e)}},this._hideRightPanel=()=>{const e=this.composite.querySelector(".oj-sp-guided-process-right-panel");e&&e.classList.remove("show")},this.refresh=()=>{const e=this.composite.querySelector("oj-navigation-list");e&&requestAnimationFrame(()=>e.refresh())},this.getStepIndicatorText=e=>this.ojTranslate.applyParameters(this.res.stepIndicator,{0:e+1,1:this.steps().length}),this.updateStepIndicator=()=>this.getStepIndicatorText(this.getCurrentStepIndex()),this.getStepsContainerElements=()=>this.composite.querySelectorAll(".oj-sp-guided-process-step"),this.updateStepContainers=()=>{const e=this.getStepsContainerElements();this.composite.style.setProperty("--oj-sp-guided-process-steps-count",e.length);for(let t=0;t<e.length;t++)e.length<=2?(e[t].classList.remove("oj-guided-process-double-panels"),e[t].classList.remove("oj-guided-process-multiple-panels"),e[t].classList.add("oj-guided-process-single-panels")):e.length>2&&e.length<=4?(e[t].classList.remove("oj-guided-process-single-panels"),e[t].classList.remove("oj-guided-process-multiple-panels"),e[t].classList.add("oj-guided-process-double-panels")):e.length>4&&(e[t].classList.remove("oj-guided-process-single-panels"),e[t].classList.remove("oj-guided-process-double-panels"),e[t].classList.add("oj-guided-process-multiple-panels"))},this.setGlobalBackgroundTheme=()=>{const e={bubbles:!0,detail:{globalSplitBackgroundPosition:0}};l.EventDispatcher.dispatch(l.EventDispatcher.OVERRIDE_THEME_CONFIG,this.composite,e.detail,e.bubbles)},this.onScroll=()=>{this.updateLayout()},this.getPrimaryActionDisabledState=()=>{if(this.properties.primaryAction){if(void 0!==this.properties.primaryAction.disabled&&!0===this.properties.primaryAction.disabled)return!0;if("on"===this.properties.primaryAction.progressState)return!0;if(this.properties.primaryAction.availableFromStep){const e=this.getStepIndexFromId(this.properties.primaryAction.availableFromStep);return this.getCurrentStepIndex()<e}}return!1},this.isPrimaryActionButtonVisible=()=>{var e;return!(this.getCurrentStepIndex()!==this.steps().length-1)||!this.isSmallScreen()&&!!(null===(e=this.properties.primaryAction)||void 0===e?void 0:e.availableFromStep)},this.isPrimaryActionMenuOptionVisible=()=>{var e;const t=this.getCurrentStepIndex()!==this.steps().length-1,i=!!(null===(e=this.properties.primaryAction)||void 0===e?void 0:e.availableFromStep);return t&&i},this.getChecklistLabel=e=>this.isCheckListVisible(e)?this.res.accChecklist:"",this.isCheckListVisible=e=>{var t;return(null===(t=e.checklist)||void 0===t?void 0:t.length)&&"on"===e.display&&(e.id===this.currentStep()||"all"===this.properties.displayOptions.checklistDisplay&&"success"!==e.status)},this.isCurrentStepOptional=()=>{const e=this.getCurrentStep();return!!(null==e?void 0:e.optional)&&e.optional};const m=o.getContext(e.element).getBusyContext();this.busyResolve=m.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.uniqueComponentName=this.uid+"_guided-process",this.properties=e.properties,this.res=n,this.isRightPanelVisible=i.observable(!0),this.isSmallScreen=d.createMediaQueryObservable(c.getFrameworkQuery(c.FRAMEWORK_QUERY_KEY.SM_ONLY)),this.isVerticalLayout=d.createMediaQueryObservable("(max-width: 767px), (max-height: 767px)"),this.isMediumScreen=d.createMediaQueryObservable("(min-width: 768px)"),this.isLargeScreen=d.createMediaQueryObservable("(min-width: 1024px)"),this.ojTranslate=r,this.currentStep=i.observable(this.properties.currentStep);const y=null===(t=this.properties.steps)||void 0===t?void 0:t.filter(e=>e.display!==g.OFF);if(this.steps=i.observableArray(y),this.navigationDataDP=new a(y,{keyAttributes:"id"}),this.stepIndicator=i.observable(this.updateStepIndicator()),this.avatarInitials=i.observable(null),this.avatarSrc=i.observable(null),this.avatarVisible=i.observable(!1),this.numberResumeStepId=this.getStepIndexFromId(this.properties.resumeStepId),this.avatarLabel=i.observable(this.ojTranslate.applyParameters(this.res.avatarHint,{pageTitle:this.properties.processTitle})),this.respPadding=i.observable((null===(s=this.properties)||void 0===s?void 0:s.displayOptions)&&"on"===this.properties.displayOptions.responsivePadding?"on":"off"),this.processAvatar(this.properties.avatar,null===(h=this.properties.displayOptions)||void 0===h?void 0:h.avatar),this.isSmallScreen()?this.avatarSize=i.observable("sm"):this.avatarSize=i.observable("md"),this.properties.currentStep){const e=this.getCurrentStepIndex();if(e>=0){const t=this.getNextEnabledStep(e);t.id!==this.properties.currentStep&&(this.composite.setProperty("currentStep",t.id),this.currentStep(t.id))}else this.composite.setProperty("currentStep",""),this.currentStep("")}this.displayCompletionStep=i.observable("on"===this.properties.completionStatus),this.saveIsOn=i.observable(!1),this.saveDisabled=i.observable(!1),this.saveAndCloseIsOn=i.observable(!1),this.saveAndCloseDisabled=i.observable(!1),this.showDivider=i.observable(!1),this.isContentChanging=i.observable(!1),this.isPositionArchSubsOnFooter=!1,this.isPositionArchSubsOnStripe=!1,this.processSaveButton(this.properties.displayOptions),this.processSaveAndCloseButton(this.properties.displayOptions),this.setGlobalBackgroundTheme(),this.busyResolve()}activated(e){s.log(`%c CCA ${this.uid} activated`,h)}connected(e){s.log(`%c CCA ${this.uid} connected`,h),this.composite.addEventListener("wheel",this.wheelListener),this.composite.addEventListener("keydown",this.keyDown),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResizeWindow),this.isSmallScreenSubscription=this.isSmallScreen.subscribe(e=>{e?this.avatarSize("sm"):this.avatarSize("md")}),this.setGlobalHeaderHeight()}async bindingsApplied(e){s.log(`%c CCA ${this.uid} bindingsApplied`,h),this.handleFocusOnStep();const t=this.composite.querySelector(".oj-sp-guided-process-step-container");if(t){this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-one-time","navigationListAnimation 500ms cubic-bezier(0.175, 0.17, 0, 1)"),this.handleHeightTwoPanels(),t.scrollLeft=t.scrollWidth,await this.startAnimation();const e=this.composite.querySelector(".oj-sp-guided-process-step-title"),i={description:"Web Component Entrance to Step View"},s=o.getContext(t).getBusyContext().addBusyState(i),a=e||t;t.scrollLeft=t.scrollWidth;const n=async e=>{e.target===a&&(a.removeEventListener("animationend",n),this.registerPositionListeners(),"on"===this.properties.displayOptions.overviewAnimation?(await this.startProcess(null),s()):(t.scroll({left:0,top:0,behavior:"smooth"}),s()))};a.addEventListener("animationend",n)}else this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-one-time","none"),this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-opacity","1"),window.requestAnimationFrame(()=>{this.registerPositionListeners()});this.composite.dispatchEvent(new CustomEvent("ojSpOverrideShellBottomSpacing",{bubbles:!0,detail:{fixedLength:!0}})),this.responsivePaddingHandler(),window.requestAnimationFrame(this.onResizeWindow)}propertyChanged(e){var t,i;s.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,h);if(this.composite.querySelector(".oj-sp-guided-process-step-container")?(this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-one-time","navigationListAnimation 500ms cubic-bezier(0.175, 0.17, 0, 1)"),this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-opacity","0")):(this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-one-time","none"),this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-opacity","1")),"steps"===e.property&&e.value){const t=e.value.filter(e=>e.display!==g.OFF);if(this.steps(t),this.navigationDataDP.data=t,this.currentStep()){const e=this.getCurrentStep();e&&e.display!==g.OFF&&e.display!==g.DISABLED||(this.composite.setProperty("currentStep",""),this.currentStep(""))}this.stepIndicator(this.updateStepIndicator()),this.refresh(),this.updateStepContainers()}else if("currentStep"===e.property){this.isContentChanging(!0);const t=!e.previousValue||!e.value;t&&this.unregisterPositionListeners();const i=this.getStep(e.value);i&&i.display!==g.OFF&&i.display!==g.DISABLED?(this.currentStep(e.value),this.stepIndicator(this.updateStepIndicator())):(e.value&&this.composite.setProperty("currentStep",""),this.currentStep("")),t&&this.registerPositionListeners(),this.updateLayout()}else"displayOptions"===e.property?(this.processAvatar(this.properties.avatar,null===(t=e.value)||void 0===t?void 0:t.avatar),this.processSaveButton(e.value),this.processSaveAndCloseButton(e.value),e.value&&e.value.responsivePadding&&(this.respPadding("on"===e.value.responsivePadding?"on":"off"),this.responsivePaddingHandler())):"avatar"===e.property?this.processAvatar(e.value,null===(i=this.properties.displayOptions)||void 0===i?void 0:i.avatar):"completionStatus"===e.property?(this.displayCompletionStep("on"===e.value),this.displayCompletionStep()&&window.scrollTo({top:0,behavior:"smooth"})):"resumeStepId"===e.property&&(this.numberResumeStepId=this.getStepIndexFromId(this.properties.resumeStepId));this.isContentChanging(!1)}disconnected(e){var t;s.log(`%c CCA ${this.uid} disconnected`,h),this.composite.removeEventListener("wheel",this.wheelListener),this.composite.removeEventListener("keydown",this.keyDown),window.removeEventListener("resize",this.onResizeWindow),window.removeEventListener("scroll",this.onScroll),null===(t=this.isSmallScreenSubscription)||void 0===t||t.dispose(),this.unregisterPositionListeners()}handleHeightTwoPanels(){const e=this.getStepsContainerElements();let t;e&&this.isVerticalLayout&&e.length<3&&(1===e.length&&(e[0].style.minHeight="calc(100vh - var(--oj-sp-guided-process-stripe-height, 0) - var(--oj-sp-guided-process-global-header-height, 0))"),2===e.length&&(e[0].style.minHeight="396px",t=e[0].offsetHeight,e[1].style.minHeight="calc(100vh - var(--oj-sp-guided-process-stripe-height, 0) - var(--oj-sp-guided-process-global-header-height, 0) - "+t+"px)"))}getWheelDelta(e){let t=0;return e.deltaX||e.deltaY?t=Math.abs(e.deltaY)>Math.abs(e.deltaX)?-e.deltaY:-e.deltaX:e.wheelDelta&&(t=Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)?e.wheelDeltaY:e.wheelDeltaX),e.deltaMode===WheelEvent.DOM_DELTA_LINE&&(t*=32),t}getStripeElement(){return this.composite.querySelector(".oj-sp-guided-process-stripe")}getFooterElement(){return this.composite.querySelector(".oj-sp-guided-process-step-details-footer")}updateLayout(){const e=this.composite.querySelector(".oj-sp-guided-process-step-details"),t=this.composite.querySelector(".oj-sp-guided-process-right-panel-navigation-list"),i=this.getStripeElement().getBoundingClientRect(),o=window.innerHeight,s=o-i.bottom;if(this.composite.style.setProperty("--oj-sp-guided-process-inner-content-height",s+"px"),this.currentStep()&&!this.displayCompletionStep()){const e=this.composite.querySelector(".oj-sp-guided-process-right-panel-top-container").clientHeight;this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-height",s-e+"px"),this.composite.style.setProperty("--oj-sp-guided-process-right-panel-top",i.bottom+"px");const t=this.composite.querySelector(".oj-sp-guided-process-step-details-sticky-content"),a=this.composite.querySelector(".oj-sp-guided-process-right-panel-navigation-list");if(t.clientHeight>a.clientHeight){t.classList.remove("oj-sp-guided-process-content-sticky"),a.classList.add("oj-sp-guided-process-content-sticky");const s=Math.min(o-a.clientHeight,i.bottom)+e;this.composite.style.setProperty("--oj-sp-guided-process-content-sticky-top",s+"px")}else if(t.clientHeight<a.clientHeight){a.classList.remove("oj-sp-guided-process-content-sticky"),t.classList.add("oj-sp-guided-process-content-sticky");const e=Math.min(o-t.clientHeight-this.getFooterElement().clientHeight,i.bottom);this.composite.style.setProperty("--oj-sp-guided-process-content-sticky-top",e+"px")}this.checkDividerDisplay(),this.setGlobalHeaderHeight()}e&&window.innerWidth<=1024&&(e.classList.remove("oj-sp-guided-process-detail-container-animation-open"),e.classList.remove("oj-sp-guided-process-detail-container-animation-close"),t.classList.remove("oj-sp-guided-process-right-panel-navigation-list-animation-text-open"),t.classList.remove("oj-sp-guided-process-right-panel-navigation-list-animation-text-close"))}handleFocusOnStep(){if((0,p.getDeviceOrientation)()===p.ORIENTATION.LANDSCAPE)return;const e=this.composite.querySelectorAll(".oj-sp-guided-process-step");for(const t of e)t.addEventListener("focus",e=>{t.scrollIntoView();const i=t.querySelector(".oj-sp-guided-process-step-description");i&&i.classList.add("focus")}),t.addEventListener("blur",e=>{const i=t.querySelector(".oj-sp-guided-process-step-description");i&&i.classList.remove("focus")})}async startAnimation(){const e=this.getStepsContainerElements();this.composite.style.setProperty("--oj-sp-guided-process-steps-count",e.length);let t,i=e.length,o=-30;for(let s=0;s<e.length;s++)e[s].style.zIndex=""+i,e.length<=2?e[s].classList.add("oj-guided-process-single-panels"):e.length>2&&e.length<=4?e[s].classList.add("oj-guided-process-double-panels"):e.length>4&&e[s].classList.add("oj-guided-process-multiple-panels"),e[s].style.animationTimingFunction="cubic-bezier(0.17, 0.17, 0.2, 1)",this.isSmallScreen()||this.isVerticalLayout()?e[s].animate([{marginTop:"-100px"},{marginTop:"0"}],{duration:600,iterations:1}):(t="translateX("+o+"vw)",e[s].animate([{transform:t},{transform:"translateX(0)"}],{duration:600,iterations:1}),o-=5),i--}async endAnimation(){const e=this.getStepsContainerElements();this.composite.style.setProperty("--oj-sp-guided-process-navigation-list-animation-one-time","navigationListAnimation 500ms cubic-bezier(0.175, 0.17, 0, 1)");const t=this.composite.querySelectorAll(".oj-sp-guided-process-step-inner-container");let i=Promise.resolve(null);const o=this.composite.querySelector(".oj-sp-guided-process-step"),s=840+40*(e.length-2);let a=0;const n=440/e[0].offsetWidth;let r=100*(e.length-1),l=e[0].offsetWidth;for(const i of e){t[a].classList.add("oj-sp-guided-process-fade-out"),i.style.animationName=null;const o=s-40*a;i.style.transitionDuration=o+"ms",i.style.transitionTimingFunction="cubic-bezier(0.66, 0, 0.36, 1)",i.style.animation=`animationWidth ${o}ms cubic-bezier(0.17, 0.07, 0.62, 0.99)`,i.style.transformOrigin="100% 50%","on"===this.properties.displayOptions.overviewAnimation?i.style.transform=`translateX(${r}%) scaleX(${n})`:i.style.transform=`translateX(calc(100vw - ${l}px)) scaleX(${n})`,a++,r-=100,l+=e[0].offsetWidth}return i=new Promise((e,t)=>{o.addEventListener("transitionend",function t(i){if(i.target===o){let i=0;this.properties.resumeStepId&&(i=this.steps().findIndex(e=>e.id===this.properties.resumeStepId)),this.composite.setProperty("currentStep",this.getNextEnabledStep(i).id),o.removeEventListener("transitionend",t),e(!0)}}.bind(this))}),i}getStatusText(e){switch(e){case m.ERROR:return this.res.stepError;case m.SUCCESS:return this.res.stepSuccess}}getStatusIcon(e){switch(e){case m.ERROR:return"oj-ux-ico-error-s";case m.SUCCESS:return"oj-ux-ico-success-s"}}getStatusTooltip(e){if(e.status&&"none"!==e.status)return this.getStatusText(e.status);{const t=this.getChecklistItems(e);if(t.length){return this.getNumCheckedItems(t)===t.length?this.getStatusText(m.SUCCESS):this.res.stepInProgress}return""}}getStatusClass(e){if(e.status&&"none"!==e.status)return this.getStatusIcon(e.status);{const t=this.getChecklistItems(e);if(t.length){return this.getNumCheckedItems(t)===t.length?"oj-ux-ico-success-s":"oj-ux-ico-circle-half-h"}return""}}getDetailsContent(){return this.composite.querySelector(".oj-sp-guided-process-step-details-slot-content")}checkDividerDisplay(){const e=this.getFooterElement();if(e){const t=e.getBoundingClientRect(),i=this.getDetailsContent().getBoundingClientRect();this.showDivider(i.top+i.height>t.top+1),this.composite.style.setProperty("--oj-sp-guided-process-details-footer-height",e.clientHeight+"px")}}}})),define("css!oj-sp/guided-process/guided-process-styles",[],(function(){})),define("oj-sp/guided-process/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./guided-process-view.html","./guided-process-viewModel","css!./guided-process-styles","css!oj-sp/css-additions/css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-guided-process",{metadata:JSON.parse(o),view:s,viewModel:a.GuidedProcessViewModel})})),define("oj-sp/internal-resources/components/vertical-navigator/vertical-navigator-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationItemDisplay=t.NavigationItemStatus=t.NavigationItemType=void 0,function(e){e.Required="required",e.Optional="optional"}(t.NavigationItemType||(t.NavigationItemType={})),function(e){e.None="none",e.Success="success",e.Error="error"}(t.NavigationItemStatus||(t.NavigationItemStatus={})),function(e){e.On="on",e.Off="off",e.Disabled="disabled"}(t.NavigationItemDisplay||(t.NavigationItemDisplay={}))})),define("css!oj-sp/internal-resources/components/vertical-navigator/vertical-navigator-styles",[],(function(){})),define("oj-sp/internal-resources/components/vertical-navigator/VerticalNavigator",["require","exports","preact","preact/hooks","./vertical-navigator-types","ojs/ojmutablearraydataprovider","css!./vertical-navigator-styles.css","ojs/ojnavigationlist"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalNavigator=void 0;t.VerticalNavigator=e=>{var t;const{currentItem:n,navigationItems:r}=e,l=(0,o.useRef)(null),d=(0,o.useMemo)(()=>new a(r,{keyAttributes:"id"}),[r]);(0,o.useEffect)(()=>{const e=l.current;e&&e.setProperty("selection",n)},[n,r]);const c=(null===(t=r.find(e=>e.id===n))||void 0===t?void 0:t.status)===s.NavigationItemStatus.Error;return(0,i.h)("oj-navigation-list",{class:"oj-sp-vertical-navigator-nav-override oj-navigationlist-nofollow-link oj-sp-vertical-navigator-navigation-list",selection:n,currentItem:n,onojBeforeSelect:e=>{c&&e.preventDefault()},onojSelectionAction:t=>e.onNavListSelectionAction(t),data:d,ref:l},(0,i.h)("template",{slot:"itemTemplate","data-oj-as":"item",render:t=>{const o=t.data,a=o.id===n,r=o.status===s.NavigationItemStatus.Success,l=o.display===s.NavigationItemDisplay.Disabled;return(0,i.h)("li",{id:o.id,class:"oj-sp-vertical-navigator-list-item "+(l?"oj-disabled":"")},(0,i.h)("a",{href:"#",class:"oj-sp-vertical-navigator-item-link"},(0,i.h)("div",{class:`oj-flex oj-sm-align-items-center ${a?"oj-typography-semi-bold":""} ${l?"":"oj-text-color-primary"}`},a&&(0,i.h)("span",{class:"oj-flex-item oj-ux-ico-triangle-right-alt-s oj-ux-icon-size-5x oj-sp-vertical-navigator-icon-position oj-sp-vertical-navigator-current-item-indicator-position"}),(0,i.h)("span",{class:"oj-flex-item oj-line-clamp-2 oj-sp-vertical-navigator-item-label",title:o.title},o.title),r&&(0,i.h)("span",{class:"oj-flex-item oj-navigationlist-item-end oj-sm-margin-4x-horizontal oj-ux-ico-success-s\n                                                    oj-ux-icon-size-5x oj-sp-vertical-navigator-icon-position\n                                                    oj-sp-vertical-navigator-end-item-indicator-position\n                                                    "+(l?"":"oj-text-color-primary"),"aria-label":e.res.stepSuccess,role:"img"}))))}}))}})),define("css!oj-sp/internal-resources/components/dropdown/dropdown-styles",[],(function(){})),define("oj-sp/internal-resources/components/dropdown/Dropdown",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","ojs/ojcontext","css!./dropdown-styles.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=void 0;const n={at:{horizontal:"start",vertical:"bottom"},offset:{y:8,x:0}};t.Dropdown=e=>{const{drawerContent:t,openDropdown:l,launcherRef:d,setOpenDropdown:c}=e,p=(0,s.isMobilePhoneDevice)(),u=(0,o.useRef)(null),h=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const e=u.current,t=d.current;e&&t&&!p&&a.getContext(e).getBusyContext().whenReady().then(()=>{const i=e.isOpen();!l||i?i&&e.close():e.open(t)})},[l,p]),p?(0,i.h)("div",null,(0,i.h)("oj-drawer-popup",{class:"oj-sp-dropdown-mobile-drawer-popup",edge:"bottom",ref:h,opened:l,onojBeforeClose:()=>r(c,l,d)},t)):(0,i.h)("div",null,(0,i.h)("oj-popup",{"auto-dismiss":"focusLoss",onojBeforeClose:()=>r(c,l,d),class:"oj-sp-dropdown-desktop-popup oj-sm-padding-2x-vertical oj-sp-dropdown-desktop-popup-override","initial-focus":"firstFocusable",modality:"modeless",position:n,ref:u},t))};const r=(e,t,i)=>{const o=i.current;o&&o.focus(),t&&e(!1)}})),define("css!oj-sp/guided-process-drawer-template/components/step-counter-styles",[],(function(){})),define("oj-sp/guided-process-drawer-template/components/step-counter",["require","exports","preact","preact/hooks","oj-sp/internal-resources/components/vertical-navigator/VerticalNavigator","oj-sp/internal-resources/components/dropdown/Dropdown","css!./step-counter-styles.css","ojs/ojbutton","ojs/ojnavigationlist","ojs/ojdrawerpopup"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepCounter=void 0;t.StepCounter=e=>{const[t,s]=(0,o.useState)(!1),l=(0,o.useCallback)(e=>{e.preventDefault(),s(!t)},[t]);return(0,i.h)(i.Fragment,null,(0,i.h)("a",{class:"oj-sp-guided-process-drawer-template-counter-link oj-sp-serif-font-family oj-typography-subheading-lg",role:"button","aria-haspopup":"true",href:"#",ref:e.anchorLinkRef,onClick:e=>l(e),title:e.res.stepsMenu,"aria-label":e.res.stepsMenu},r(e)),(0,i.h)(a.Dropdown,{drawerContent:n(e,s),launcherRef:e.anchorLinkRef,openDropdown:t,setOpenDropdown:s}))};const n=(e,t)=>{const{steps:o,currentStep:a}=e;return(0,i.h)(s.VerticalNavigator,{navigationItems:o,currentItem:a,res:e.res,onNavListSelectionAction:i=>l(i,e,t)})},r=e=>{const{steps:t}=e,o=d(e);return(0,i.h)("span",{class:"oj-sp-guided-process-drawer-template-counter-link oj-sp-serif-font-family oj-typography-subheading-lg"},(0,i.h)("span",{class:"oj-sp-guided-process-drawer-template-counter-current-step"},o),(0,i.h)("span",{class:"oj-sp-guided-process-drawer-template-counter-seprator oj-sm-margin-1x-horizontal"}),(0,i.h)("span",{class:"oj-sp-guided-process-drawer-template-counter-total-steps"},t.length))},l=(e,t,i)=>{if(e.detail.value!==e.detail.previousValue){const o=e.detail.value;t.updateCurrentStep(o),i(!1)}},d=e=>{const{currentStep:t,steps:i}=e,o=i.findIndex(e=>e.id===t);return o>=0?o+1:0}})),define("oj-sp/guided-process-drawer-template/guided-process-drawer-template-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationActionID=t.StepDisplay=t.StepStatus=t.StepType=void 0,function(e){e.Required="required",e.Optional="optional"}(t.StepType||(t.StepType={})),function(e){e.None="none",e.Success="success",e.Error="error"}(t.StepStatus||(t.StepStatus={})),function(e){e.On="on",e.Off="off",e.Disabled="disabled"}(t.StepDisplay||(t.StepDisplay={})),function(e){e.Navigation="Navigation",e.Continue="Continue"}(t.NavigationActionID||(t.NavigationActionID={}))})),define("css!oj-sp/guided-process-drawer-template/components/guided-process-drawer-footer-styles",[],(function(){})),define("oj-sp/guided-process-drawer-template/components/guided-process-drawer-footer",["require","exports","preact","preact/hooks","../guided-process-drawer-template-types","oj-sp/common-util/common-util","oj-sp/internal-resources/components/drawer-common/drawer-template-types","css!./guided-process-drawer-footer-styles","ojs/ojbutton","ojs/ojmenu","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GuidedProcessDrawerFooter=void 0;t.GuidedProcessDrawerFooter=e=>{const{setCssVariable:t}=e,s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const{current:e}=s,i=new ResizeObserver(()=>g(t,e));return i.observe(e),()=>i.disconnect()},[e.currentStep]),(0,i.h)("div",{ref:s,class:"oj-sp-guided-process-drawer-template-footer oj-bg-neutral-10 oj-sm-padding-4x oj-md-padding-6x-horizontal"},r(e,e.toolbarRef))};const r=(e,t)=>{const o=e.steps.find(t=>t.id===e.currentStep),n=y(e.currentStep,e.steps),r=!n&&o&&o.type===s.StepType.Optional,c=e.screenRange===a.SCREEN_RANGE.SMALL&&r&&!n;return(0,i.h)("oj-toolbar",{ref:t,class:`oj-sm-only-width-full oj-clickthrough-disabled oj-flex oj-sm-only-flex-direction-${c?"row":"column"}\n                      ${c?"":"oj-md-justify-content-flex-end"} oj-sm-flex-wrap-nowrap oj-md-flex-items-0`},c&&l(e),!c&&d(e,n,r))},l=e=>[c(e),h(e)],d=(e,t,i)=>[p(e),i&&!t&&m(e),!t&&h(e),!i&&t&&u(e)],c=e=>(0,i.h)("oj-menu-button",{class:"oj-sp-guided-process-drawer-template-footer-menu oj-button-sm",chroming:"outlined",display:"icons"},(0,i.h)("oj-menu",{slot:"menu",onojMenuAction:t=>e.onSpAction(t.detail.selectedValue,t)},(0,i.h)("oj-option",{value:n.ActionId.Cancel},e.res.cancel),(0,i.h)("oj-option",{value:n.ActionId.Skip},e.res.skip))),p=e=>(0,i.h)("oj-button",{class:"oj-sp-guided-process-drawer-template-cancel-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-3x-bottom oj-button-sm",display:"all",chroming:"borderless",onojAction:t=>e.onSpAction(n.ActionId.Cancel,t)},(0,i.h)("span",null,e.res.cancel)),u=e=>(0,i.h)("oj-button",{class:"oj-sp-guided-process-drawer-template-primary-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-sm-only-margin-3x-bottom oj-button-sm",display:"all",chroming:"callToAction",onojAction:t=>e.onSpAction(n.ActionId.Primary,t)},(0,i.h)("span",null,e.primaryAction.label)),h=e=>(0,i.h)("oj-button",{class:"oj-sp-guided-process-drawer-template-continue-action oj-sm-only-width-full oj-flex-item oj-sm-only-margin-0 oj-button-sm",display:"all",chroming:"outlined",onojAction:t=>e.onSpAction(n.ActionId.Continue,t)},(0,i.h)("span",null,e.res.continue)),m=e=>(0,i.h)("oj-button",{class:"oj-sp-guided-process-drawer-template-skip-action oj-flex-item oj-button-sm",display:"all",chroming:"outlined",onojAction:t=>e.onSpAction(n.ActionId.Skip,t)},(0,i.h)("span",null,e.res.skip)),g=(e,t)=>{if(t){e("--oj-sp-drawer-template-footer-height",t.getBoundingClientRect().height+"px")}},y=(e,t)=>!!(e&&t&&t.length>0)&&e===t[t.length-1].id})),define("oj-sp/guided-process-drawer-template/components/error-banner",["require","exports","preact","preact/hooks","ojs/ojmutablearraydataprovider","ojs/ojmessagebanner"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBanner=void 0;t.ErrorBanner=e=>{const t=(0,o.useMemo)(()=>new s([{id:e.uid+"-error-banner-message",closeAffordance:"off",severity:"error",summary:e.res.someIssuesSummary}],{keyAttributes:"id"}),[]);return(0,i.h)("div",{class:"guided-process-drawer-template-error-banner-container oj-sm-only-margin-4x-bottom oj-md-margin-6x-bottom"},(0,i.h)("oj-message-banner",{type:"section",data:t}))}})),define("css!oj-sp/guided-process-drawer-template/guided-process-drawer-template-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/guided-process-drawer-template/guided-process-drawer-template",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","ojs/ojresponsiveutils","oj-sp/internal-resources/components/drawer-common/drawer-template-header","oj-sp/common/positionUtility","./components/step-counter","./components/guided-process-drawer-footer","./guided-process-drawer-template-types","ojs/ojlogger","oj-sp/common-util/common-util","oj-sp/internal-resources/components/drawer-common/drawer-template-types","ojs/ojtranslation","./components/error-banner","ojs/ojcontext","css!oj-sp/internal-resources/components/drawer-common/drawer-template-styles","css!./guided-process-drawer-template-styles","oj-sp/common/position-helper"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GuidedProcessDrawerTemplate=void 0;let f=class extends s.Component{constructor(e){var t;super(e),this.HEADER_VERTICAL_PADDING="oj-sm-only-padding-4x-vertical oj-md-padding-6x-vertical",this.state={screenRange:(0,u.isSmallScreenOrMobile)()?u.SCREEN_RANGE.SMALL:u.SCREEN_RANGE.MEDIUM},this.actionHandler=async e=>{var t,i,o,s,a,n;switch(e){case h.ActionId.Cancel:null===(i=(t=this.props).onSpCancel)||void 0===i||i.call(t);break;case h.ActionId.Skip:null===(s=(o=this.props).onSpSkip)||void 0===s||s.call(o);break;case h.ActionId.Primary:null===(n=(a=this.props).onSpPrimaryAction)||void 0===n||n.call(a);break;case h.ActionId.Continue:{const e=this.getNextStepID();if(!e)throw new Error("Next Step not found");try{await this.setCurrentStep(e,c.NavigationActionID.Continue)}catch(e){p.error("Step could not be updated")}break}default:throw new Error("Unidentified action triggered")}},this.handleConnected=e=>{this.subscribeHeaderToPositionUtil(),this.subscribeFooterToPositionUtil()},this.handleDisconnected=e=>{this.unsubscribePositionUtil()},this.smMediaQueryChangeListener=e=>{e.matches&&this.setState({screenRange:u.SCREEN_RANGE.SMALL})},this.mdMediaQueryChangeListener=e=>{e.matches&&this.setState({screenRange:u.SCREEN_RANGE.MEDIUM})},this.lgMediaQueryChangeListener=e=>{e.matches&&this.setState({screenRange:u.SCREEN_RANGE.LARGE})},this.setInitialView=()=>{this.smMediaQuery.matches?this.setState({screenRange:u.SCREEN_RANGE.SMALL}):this.mdMediaQuery.matches?this.setState({screenRange:u.SCREEN_RANGE.MEDIUM}):this.setState({screenRange:u.SCREEN_RANGE.LARGE})},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.headerRef=(0,s.createRef)(),this.headerComponentName=this.uniqueId+"_guided-process-header",this.initResponsiveUtils(),this.footerRef=(0,s.createRef)(),this.footerComponentName=this.uniqueId+"_guided-process-footer",this.toolbarRef=(0,s.createRef)(),this.anchorLinkRef=(0,s.createRef)()}async componentDidMount(){this.smMediaQuery.addEventListener("change",this.smMediaQueryChangeListener),this.mdMediaQuery.addEventListener("change",this.mdMediaQueryChangeListener),this.lgMediaQuery.addEventListener("change",this.lgMediaQueryChangeListener),this.setInitialView(),this.subscribeHeaderToPositionUtil(),this.subscribeFooterToPositionUtil()}componentWillUnmount(){this.smMediaQuery.removeEventListener("change",this.smMediaQueryChangeListener),this.mdMediaQuery.removeEventListener("change",this.mdMediaQueryChangeListener),this.lgMediaQuery.removeEventListener("change",this.lgMediaQueryChangeListener),this.unsubscribePositionUtil()}async componentDidUpdate(e,t,i){e.currentStep!==this.props.currentStep&&(await this.refreshToolbar(),await this.refocusStepCounter())}render(e){const{drawerSize:t,displayErrorMessageBanner:i}=e;return(0,s.h)("div",{class:`oj-sp-guided-process-drawer-template-main-container oj-bg-neutral-10\n        ${"oj-sp-drawer-template-width-"+t}\n      `},(0,s.h)("div",{class:"oj-sp-guided-process-drawer-header-wrapper",ref:this.headerRef},this.renderHeader()),(0,s.h)("div",{class:"oj-sp-guided-process-drawer-template-content-container"},this.renderBody()),(0,s.h)("div",{class:"oj-sp-guided-process-drawer-footer-wrapper",ref:this.footerRef},this.renderFooter()),this.renderPositionHelper())}renderHeader(){const e=this.getCurrentStep(),t=this.getVisibleSteps();return(0,s.h)(n.DrawerTemplateHeader,{uid:this.uniqueId,res:this.res,drawerTitle:e?e.title:"",drawerSubtitle:this.props.processTitle,previousItem:null,nextItem:null,setCssVariable:(e,t)=>this.setCssVariable(e,t),endSlot:(0,s.h)(l.StepCounter,{steps:t,currentStep:this.props.currentStep,updateCurrentStep:e=>this.setCurrentStep(e,c.NavigationActionID.Navigation),res:this.res,anchorLinkRef:this.anchorLinkRef}),drawerTitleAriaLabel:this.getDrawerTitleAriaLabel(),verticalPadding:this.HEADER_VERTICAL_PADDING})}renderFooter(){return(0,s.h)(d.GuidedProcessDrawerFooter,{uid:this.uniqueId,res:this.res,steps:this.props.steps,currentStep:this.props.currentStep,screenRange:this.state.screenRange,setCssVariable:(e,t)=>this.setCssVariable(e,t),onSpAction:e=>this.actionHandler(e),primaryAction:this.props.primaryAction,toolbarRef:this.toolbarRef})}renderPositionHelper(){return(0,s.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}setCssVariable(e,t){this.base.style.setProperty(e,t)}renderBody(){const e="oj-sm-padding-4x-vertical oj-md-padding-6x-vertical "+n.HEADER_HORIZONTAL_PADDING,{displayErrorMessageBanner:t}=this.props;return(0,s.h)("div",{class:"oj-sp-guided-process-drawer-template-body oj-bg-neutral-10 "+e},t&&this.renderBanner(),this.props.children)}renderBanner(){return(0,s.h)(g.ErrorBanner,{res:this.res,uid:this.uniqueId})}subscribeHeaderToPositionUtil(){const e=this.headerRef.current;if(e&&!r.PositionUtility.isComponentSubscribed(this.headerComponentName)){const t={componentName:this.headerComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"top",level:r.PositionUtility.LEVEL_MAP.header},onOffsetChange:t=>{e.style.top=t.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:e},onStickinessChange:t=>{const i=t.isSticky;e.style.position=i?"sticky":"unset"}}};r.PositionUtility.subscribe(t)}}async refreshToolbar(){const e=this.footerRef.current;if(e){await y.getContext(e).getBusyContext().whenReady();const t=this.toolbarRef.current;t&&t.refresh()}}async refocusStepCounter(){const e=this.headerRef.current;if(e){await y.getContext(e).getBusyContext().whenReady();const t=this.anchorLinkRef.current;t&&t.focus()}}subscribeFooterToPositionUtil(){const e=this.footerRef.current;if(e&&!r.PositionUtility.isComponentSubscribed(this.footerComponentName)){const t={componentName:this.footerComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"bottom",level:r.PositionUtility.LEVEL_MAP.footerNavigation},onOffsetChange:t=>{e.style.top=t.top+"px"}},stickinessSubscription:{stickinessOptions:{expandedComponent:e},onStickinessChange:t=>{const i=t.isSticky;e.style.position=i?"sticky":"unset"}}};r.PositionUtility.subscribe(t)}}unsubscribePositionUtil(){r.PositionUtility.isComponentSubscribed(this.headerComponentName)&&r.PositionUtility.unsubscribe({componentName:this.headerComponentName}),r.PositionUtility.isComponentSubscribed(this.footerComponentName)&&r.PositionUtility.unsubscribe({componentName:this.footerComponentName})}initResponsiveUtils(){const e=a.getFrameworkQuery(a.FRAMEWORK_QUERY_KEY.SM_ONLY),t=a.getFrameworkQuery(a.FRAMEWORK_QUERY_KEY.MD_ONLY),i=a.getFrameworkQuery(a.FRAMEWORK_QUERY_KEY.LG_ONLY);this.smMediaQuery=window.matchMedia(e),this.mdMediaQuery=window.matchMedia(t),this.lgMediaQuery=window.matchMedia(i)}getNextStepID(){var e;const t=this.getVisibleSteps(),i=t.findIndex(e=>e.id===this.props.currentStep);return null===(e=t[i+1])||void 0===e?void 0:e.id}getVisibleSteps(){return this.props.steps.filter(e=>e.display!=c.StepDisplay.Off)}async setCurrentStep(e,t){var i,o,s,a,n,r;const l=e||this.props.currentStep;if(this.props.onSpBeforeStepNavigate)try{const e={currentStepID:this.props.currentStep,nextStepID:l,actionID:t};await(null===(o=(i=this.props).onSpBeforeStepNavigate)||void 0===o?void 0:o.call(i,{detail:e}));t===c.NavigationActionID.Continue?null===(a=(s=this.props).onSpContinue)||void 0===a||a.call(s):this.updateSteps(this.props.currentStep,l)}catch(e){p.info("SpBeforeStepNavigate promise rejected")}else t===c.NavigationActionID.Continue?null===(r=(n=this.props).onSpContinue)||void 0===r||r.call(n):this.updateSteps(this.props.currentStep,l)}getCurrentStep(){const{steps:e,currentStep:t}=this.props;return e.find(e=>e.id===t)}updateSteps(e,t){var i,o;const{steps:s}=this.props,a=s.findIndex(e=>e.id===t);void 0!==a&&(this.props.steps[a].display=c.StepDisplay.On),null===(o=(i=this.props).onCurrentStepChanged)||void 0===o||o.call(i,t)}getCurrentStepIndex(){var e;const{currentStep:t}=this.props,i=null===(e=this.getVisibleSteps())||void 0===e?void 0:e.findIndex(e=>e.id===t);return-1===i?0:i}getDrawerTitleAriaLabel(){var e,t;const{steps:i}=this.props,o=this.getCurrentStepIndex()+1,s=null===(e=this.getCurrentStep())||void 0===e?void 0:e.title;return m.applyParameters(this.res.stepTitle,{currentStep:o,totalSteps:null===(t=this.getVisibleSteps())||void 0===t?void 0:t.length,stepTitle:s})}};f.defaultProps={drawerSize:"sm",steps:[],primaryAction:{label:""}},f._metadata={properties:{processTitle:{type:"string"},primaryAction:{type:"object",properties:{label:{type:"string"}}},drawerSize:{type:"string",enumValues:["xl","lg","md","sm"]},steps:{type:"Array<object>"},displayErrorMessageBanner:{type:"boolean"},currentStep:{type:"string",writeback:!0}},events:{spBeforeStepNavigate:{cancelable:!0},spSkip:{},spCancel:{},spPrimaryAction:{},spContinue:{}},slots:{"":{}},extension:{_WRITEBACK_PROPS:["currentStep"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},f=__decorate([(0,o.customElement)("oj-sp-guided-process-drawer-template"),__metadata("design:paramtypes",[Object])],f),t.GuidedProcessDrawerTemplate=f})),define("oj-sp/guided-process-drawer-template/loader",["require","exports","./guided-process-drawer-template"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GuidedProcessDrawerTemplate=void 0,Object.defineProperty(t,"GuidedProcessDrawerTemplate",{enumerable:!0,get:function(){return i.GuidedProcessDrawerTemplate}})})),define("css!oj-sp/completion-panel/completion-panel-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/completion-panel/completion-panel",["require","exports","ojs/ojvcomponent","preact","css!./completion-panel-styles.css","ojs/ojbutton"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionPanel=void 0;let s=class extends o.Component{constructor(e){var t;if(super(e),this.incrementBackgroundIndex=()=>{var e,t;const i=this.props.backgroundImageIndex,o=i===this.backgroundClasses.length-1?0:i+1;null===(t=(e=this.props).onBackgroundImageIndexChanged)||void 0===t||t.call(e,o)},this.primaryActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpPrimaryAction)||void 0===i||i.call(t),e.preventDefault(),e.stopPropagation()},this.navigationActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpNavigationAction)||void 0===i||i.call(t),e.preventDefault(),e.stopPropagation()},this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.backgroundClasses=["illustration-background-humming-bird","illustration-background-abstract-1","illustration-background-abstract-2","illustration-background-abstract-3","illustration-background-abstract-4","illustration-background-abstract-5","illustration-background-abstract-6"],this.props.backgroundImageIndex>=0&&this.props.backgroundImageIndex<this.backgroundClasses.length)this.selectedBackgroundClass=this.backgroundClasses[this.props.backgroundImageIndex],this.incrementBackgroundIndex();else{const e=Math.floor(Math.random()*this.backgroundClasses.length);this.selectedBackgroundClass=this.backgroundClasses[e]}}render(e){return(0,o.h)("div",{class:"oj-sp-completion-panel",className:"oj-sp-completion-panel "+this.selectedBackgroundClass,"aria-live":"polite",id:this.uid+"_completionPanel"},(0,o.h)("div",{class:"oj-sp-completion-panel-content"},(0,o.h)("div",{class:"oj-flex-item oj-sp-typography-display-6 oj-sp-completion-panel-title"},(0,o.h)("span",{id:this.uid+"_completionStepTitle",role:"heading","aria-level":1,tabIndex:0,"aria-label":this.props.panelTitle},this.props.panelTitle)),e.panelSubtitle&&(0,o.h)("div",{class:"oj-flex-item oj-sp-completion-panel-subtitle","aria-label":this.props.panelSubtitle,tabIndex:0},this.props.panelSubtitle),e.primaryActionLabel&&e.onSpPrimaryAction&&(0,o.h)("div",{class:"oj-flex-item"},(0,o.h)("oj-button",{class:"oj-sp-completion-panel-primary-button",chroming:"callToAction",id:this.uid+"_primaryAction",onojAction:this.primaryActionHandler},e.primaryActionLabel)),e.navigationActionLabel&&e.onSpNavigationAction&&(0,o.h)("div",{class:"oj-flex-item"},(0,o.h)("a",{href:"#",class:"oj-link-standalone oj-sp-completion-panel-nav-action",onClick:this.navigationActionHandler,id:this.uid+"_navigationLink"},e.navigationActionLabel))),(0,o.h)("div",{class:"oj-sp-completion-panel-illustration-cover-container"},(0,o.h)("div",{class:"oj-sp-completion-panel-illustration-cover"},"Â ")))}};s._metadata={properties:{panelTitle:{type:"string"},panelSubtitle:{type:"string"},primaryActionLabel:{type:"string"},navigationActionLabel:{type:"string"},backgroundImageIndex:{type:"number",writeback:!0}},events:{spPrimaryAction:{},spNavigationAction:{}},extension:{_WRITEBACK_PROPS:["backgroundImageIndex"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},s=__decorate([(0,i.customElement)("oj-sp-completion-panel"),__metadata("design:paramtypes",[Object])],s),t.CompletionPanel=s})),define("oj-sp/completion-panel/loader",["require","exports","./completion-panel"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionPanel=void 0,Object.defineProperty(t,"CompletionPanel",{enumerable:!0,get:function(){return i.CompletionPanel}})})),define("text!oj-sp/header-create-edit-2/component.json",[],(function(){return'{"name":"header-create-edit-2","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Create and Edit Page Header 2","description":"Page header is the area on the top of the page, separated from content, which provides users with general information about the page as well as page level actions. This component has outlined buttons instead of borderless.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-fa-css":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-common":"2404.0.0"},"properties":{"pageTitle":{"displayName":"Page Title","description":"The title of the page.","type":"string","translatable":true,"required":true},"pageTitlePlaceholder":{"displayName":"Page Title Placeholder","description":"The placeholder that will be displayed if page title is blank.","required":false,"type":"string","value":"New Page"},"pageSubtitle":{"displayName":"Page Subtitle","description":"Additional supporting information to the page title.","type":"string","translatable":true,"required":false},"avatar":{"displayName":"Avatar Image","description":"The avatar of the person who is required in the context of the page.","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component.","type":"object","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info are visible.","type":"boolean","value":false},"goToParent":{"description":"Defines whether the Go to Parent action is visible.","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether the In-Flow Back action is visible.","type":"boolean","value":false},"next":{"description":"Defines whether the Next action is on, off or unconfigured.","type":"string","value":"unconfigured","enumValues":["on","off","unconfigured"],"propertyEditorValues":{"on":{"displayName":"On","description":"Next sequence is rendered."},"off":{"displayName":"Off","description":"Next sequence is configured but not rendered."},"unconfigured":{"displayName":"Unconfigured","description":"Next sequence is not configured."}}},"save":{"description":"Defines whether the Save action is on, off or disabled.","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Save button is visible and enabled."},"off":{"displayName":"Off","description":"Save button is not visible."},"disabled":{"displayName":"Disabled","description":"Save button is visible and disabled."}}}}},"primaryAction":{"displayName":"Primary Action","description":"The primary action button.","type":"object","properties":{"label":{"description":"The label for the primary action button of the page.","type":"string","value":"Submit"},"disabled":{"description":"The disabled state of the primary action button.","type":"boolean","value":true}},"required":false},"contextualInfo":{"displayName":"Contextual Info","description":"The contextual information to be displayed.","type":"Array<object>","properties":{"label":{"description":"Contextual Info Label.","type":"string"},"value":{"description":"Contextual Info Value.","type":"string"}},"required":false},"contextualInfoSticky":{"displayName":"Sticky Contextual Info","description":"Defines whether contextual information is visible in the sticky header.","type":"boolean","required":false,"value":false},"secondaryActions":{"displayName":"Secondary Actions","description":"A list of secondary actions of the page. This supports up to 10 actions. If there are more than 10, it will only render the first 10. Each action has [label, id, icon, display].","type":"Array<object>","required":false,"properties":{"label":{"type":"string","displayName":"Secondary Action label."},"id":{"type":"string","displayName":"Secondary Action ID.","description":"This is a unique ID associated with the secondary action. When the user clicks on the secondary action, this ID is passed as a payload with the spSecondaryAction event."},"icon":{"type":"string","displayName":"Secondary Action icon."},"display":{"type":"string","displayName":"Display option for the secondary item.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled."},"off":{"displayName":"Off","description":"The secondary Action is not visible."},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled."}}}}},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}}}},"translations":{"description":"Instance Overrides of Strings.","type":"object","properties":{"actions":{"type":"string"},"avatarHint":{"type":"string"},"goToParent":{"type":"string"},"next":{"type":"string"}}},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content."},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Triggered when the primary action is clicked.","bubbles":true,"cancelable":false},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when the secondary action is clicked.","bubbles":true,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the secondary item clicked.","type":"string"}}},"spCancel":{"displayName":"spCancel event","description":"Triggered when the cancel action is clicked.","bubbles":true,"cancelable":false},"spSave":{"displayName":"spSave event","description":"Triggered when the save action is clicked.","bubbles":true,"cancelable":false},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked.","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked.","bubbles":true,"cancelable":false},"spNext":{"displayName":"spNext event","description":"Triggered when the next action is clicked.","bubbles":true,"cancelable":false}},"slots":{},"extension":{"catalog":{"status":"Deprecated","visibility":"hidden","tags":["oj-sp","Redwood","Early-Adopter","header-create-edit"],"docUrl":"http://design.oraclecorp.com/page-header-create-edit"},"vbdt":{"componentPalette":{"visibility":"never"}},"webelement":{}}}'})),define("text!oj-sp/header-create-edit-2/header-create-edit-2-view.html",[],(function(){return'<html><head></head><body><header :id="[[uid + \'_headerContainer\']]"data-oj-context=""><div :id="[[uid + \'_headerContent\']]"class="oj-sp-header-container":class="[[{\n    \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n    \'oj-sp-header-create-edit-2-bg-light\': background() === \'light\',\n    \'oj-sp-header-create-edit-sticky-container\': true\n  }]]"><div class="oj-sp-header-create-edit-spacing-container oj-md-padding-1x-start oj-md-padding-2x-end oj-lg-padding-9x-horizontal oj-sm-padding-3x-top oj-sm-padding-3x-bottom oj-sp-create-edit-md-padding-5x-top oj-md-padding-5x-bottom"><oj-bind-if test="[[ nextConfigured ]]"><div class="oj-flex-bar oj-sm-align-items-center oj-sm-only-hide oj-md-padding-5x-bottom oj-md-padding-1x-horizontal oj-sp-header-create-edit-sticky-hide"><div class="oj-flex-bar-start"><oj-bind-if test="[[ goToParentVisible() &amp;&amp; !inFlowBackVisible() ]]"><oj-button :id="[[ uid + \'_goToParent_md\' ]]"class="oj-button-sm"chroming="borderless"on-oj-action="[[ goToParentHandler ]]"><div slot="startIcon"class="oj-ux-ico-up-parent"></div><span><oj-bind-text value="[[ res().goToParent ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ inFlowBackVisible ]]"><oj-button :id="[[ uid + \'_inFlowBack_md\' ]]"class="oj-button-sm"chroming="borderless"on-oj-action="[[ inFlowBackHandler ]]"><div slot="startIcon"class="oj-ux-ico-chevron-left"></div><span><oj-bind-text value="[[ res().back ]]"></oj-bind-text></span></oj-button></oj-bind-if></div><div class="oj-flex-bar-end"><oj-bind-if test="[[ nextIsOn ]]"><oj-button :id="[[ uid + \'_next\' ]]"chroming="borderless"class="oj-button-sm"on-oj-action="[[ nextHandler ]]"><div slot="endIcon"class="oj-ux-ico-chevron-right"></div><span><oj-bind-text value="[[ res().next ]]"></oj-bind-text></span></oj-button></oj-bind-if></div></div></oj-bind-if><div class="oj-sp-header-create-edit-grid-3 oj-sm-align-items-center oj-sp-header-create-edit-sticky-content"><div class="oj-flex"><div class="oj-flex-item"><oj-bind-if test="[[ goToParentVisible() &amp;&amp; !inFlowBackVisible() ]]"><oj-button :id="[[ uid + \'_goToParent_sm\' ]]":class="[[ nextConfigured() ? \'oj-md-hide oj-sm-padding-2x-end\' : \'oj-sm-padding-2x-end\' ]]"chroming="borderless"display="icons"on-oj-action="[[ goToParentHandler ]]"><div slot="startIcon"class="oj-ux-ico-arrow-up"></div><span><oj-bind-text value="[[ res().goToParent ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ inFlowBackVisible ]]"><oj-button :id="[[ uid + \'_inFlowBack_sm\' ]]":class="[[ nextConfigured() ? \'oj-md-hide oj-sm-padding-2x-end\' : \'oj-sm-padding-2x-end\' ]]"chroming="borderless"display="icons"on-oj-action="[[ inFlowBackHandler ]]"><div slot="startIcon"class="oj-ux-ico-chevron-left"></div><span><oj-bind-text value="[[ res().back ]]"></oj-bind-text></span></oj-button></oj-bind-if></div><div :class="[[ (goToParentVisible() || inFlowBackVisible()) &amp;&amp; (!nextConfigured()) ? \'oj-flex-item\' : ((goToParentVisible() || inFlowBackVisible()) &amp;&amp; nextConfigured() ? \'oj-md-padding-5x-start oj-flex-item\' : \'oj-sm-padding-4x-start oj-md-padding-5x-start oj-flex-item\') ]]"><oj-bind-if test="[[ avatarVisible ]]"><oj-avatar :id="[[ uid + \'_avatar\' ]]":aria-label="[[ ojTranslate.applyParameters(res().avatarHint, {pageTitle: actualPageTitle()}) ]]":title="[[ ojTranslate.applyParameters(res().avatarHint, {pageTitle: actualPageTitle()}) ]]"role="img"size="[[ avatarSize ]]"initials="[[ avatarInitials ]]"src="[[ avatarSrc ]]"class="oj-sm-only-hide oj-md-margin-4x-end"></oj-avatar></oj-bind-if></div></div><div :class="[[ (goToParentVisible() || inFlowBackVisible() || nextConfigured() || avatarVisible()) ? \'oj-sm-align-items-center oj-sp-helper-truncate\' : \'oj-sm-align-items-center oj-sp-helper-truncate\' ]]":title="[[ actualPageTitle ]]"><h1 :id="[[ uid + \'_pageTitle\' ]]"class="oj-header oj-sp-typography-display-6 oj-sp-helper-truncate oj-sm-padding-0 oj-sm-margin-0"><oj-bind-text value="[[ actualPageTitle ]]"></oj-bind-text></h1><oj-bind-if test="[[ properties.pageSubtitle ]]"><div :id="[[ uid + \'_pageSubtitle\' ]]"class="oj-typography-body-sm oj-md-margin-1x-bottom oj-sp-helper-truncate":title="[[ properties.pageSubtitle ]]"><oj-bind-text value="[[ properties.pageSubtitle ]]"></oj-bind-text></div></oj-bind-if></div><div><oj-toolbar :id="[[ uid + \'_headerToolbar\' ]]"aria-label="Header Toolbar"aria-controls=""class="oj-sm-margin-3x-start oj-md-margin-6x-start oj-md-margin-4x-end oj-lg-margin-5x-end oj-sm-flex-wrap-nowrap"><oj-button :id="[[ uid + \'_cancel\' ]]"chroming="outlined"class="oj-md-down-hide"on-oj-action="[[ cancelHandler ]]"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-button><oj-bind-if test="[[ saveIsOn ]]"><oj-button :id="[[ uid + \'_save\' ]]"chroming="outlined"disabled="[[ saveDisabled ]]"class="oj-md-down-hide"on-oj-action="[[ saveHandler ]]"><span><oj-bind-text value="[[ res().save ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length > 1 ]]"><oj-menu-button :id="[[ uid + \'_secondaryActionSet\' ]]"chroming="outlined"class="oj-md-down-hide"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetMenu\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-create-edit-secondary-option":id="[[ uid + $current.data.id ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ (secondaryActionsSet().length === 1 &amp;&amp; secondaryActionsSet()[0].display !== \'off\') ]]"><oj-button class="oj-md-down-hide":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-menu-button :id="[[ uid + \'_borderlessMenuWithoutStartIcon\' ]]"display="icons":class="[[{\n              \'oj-sm-only-hide\': (smallScreen &amp;&amp; (!saveIsOn || !nextConfigured || secondaryActionsSet().length === 0)),\n              \'oj-lg-hide\': true\n            }]]"><span><oj-bind-text value="[[ res().more ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_menuOverflow\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-option :id="[[ uid + \'_cancelOption\' ]]"class="oj-sm-only-hide"value="spCancel"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-option><oj-bind-if test="[[ saveIsOn ]]"><oj-option :id="[[ uid + \'_saveOption\' ]]"disabled="[[ saveDisabled ]]"value="spSave"><span><oj-bind-text value="[[ res().save ]]"></oj-bind-text></span></oj-option></oj-bind-if><oj-bind-if test="[[ (nextConfigured() &amp;&amp; nextIsOn()) ]]"><oj-option :id="[[ uid + \'_nextOption\' ]]"class="oj-md-hide"value="spNext"><span><oj-bind-text value="[[ res().next ]]"></oj-bind-text></span></oj-option></oj-bind-if><oj-bind-if test="[[ (secondaryActionsSet().length === 1 &amp;&amp; secondaryActionsSet()[0].display !== \'off\') ]]"><oj-option :id="[[ uid + secondaryActionsSet()[0].id ]]"value="[[ secondaryActionEvent() ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; !mobileDevice() ) ]]"><oj-option :id="[[ uid + \'_secondaryActionSetOption\' ]]"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetSubMenu\' ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-create-edit-secondary-option":id="[[ uid + $current.data.id + \'_overflow\' ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; mobileDevice() ) ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-create-edit-secondary-option":id="[[ uid + $current.data.id + \'_overflow\' ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-bind-if></oj-menu><span slot="endIcon"class="oj-ux-ico-overflow-horiz"></span></oj-menu-button><oj-button :id="[[ uid + \'_primaryAction\' ]]"class="oj-md-padding-0-end oj-sm-only-hide"disabled="{{ primaryActionDisabled }}"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></oj-toolbar></div></div><oj-bind-if test="[[ badgeVisible() || contextualInfoVisible() ]]"><div :id="[[ uid + \'_badgeCtxInfoContainer\' ]]":class="[[ badgeVisible() ? \'oj-flex-bar oj-sm-align-items-center oj-sm-padding-4x-start oj-md-padding-1x-end oj-sp-create-edit-sm-padding-4x-top\' : \'oj-flex-bar oj-md-padding-1x-horizontal oj-sp-create-edit-sm-padding-4x-top\' ]]"><oj-bind-if test="[[ badgeVisible() ]]"><div class="oj-flex-bar-start oj-sp-header-create-edit-no-wrap"><span :id="[[ uid + \'_badge\' ]]":class="[[badgeClass]]"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></span></div></oj-bind-if><oj-bind-if test="[[ contextualInfoVisible ]]"><div :id="[[ uid + \'_contextualInfo\' ]]"class="oj-flex-bar-middle"><oj-conveyor-belt tabindex="0"class="oj-sp-header-create-edit-contextual-conveyor"data-oj-binding-provider="none"><div class="oj-flex oj-sm-flex-items-initial"><oj-bind-for-each data="[[ properties.contextualInfo ]]"><template><oj-bind-if test="[[ $current.index < 4 ]]"><div :class="[[ $current.index === 0 ? \'oj-sm-padding-3x-start oj-md-padding-4x-start oj-sm-padding-3x-end oj-md-padding-4x-end oj-flex-item\' : \'oj-sm-padding-3x-end oj-md-padding-4x-end oj-flex-item\' ]]"><oj-bind-if test="[[ contextualInfoLabelVisible() ]]"><div :id="[[ uid + \'_contextualInfo\' + $current.index + \'-labelled-by\' ]]"class="oj-typography-body-xs oj-text-color-secondary oj-sm-padding-1x-bottom"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></div></oj-bind-if><div :id="[[ uid + \'_contextualInfo\' + $current.index ]]"class="oj-typography-body-xs"><oj-bind-text value="[[ $current.data.value ]]"></oj-bind-text></div></div></oj-bind-if></template></oj-bind-for-each></div></oj-conveyor-belt></div></oj-bind-if></div></oj-bind-if></div><div class="oj-sp-header-create-edit-header-strip"></div></div><div class="oj-sp-header-create-edit-hidden-space-holder"></div></header><div :class="[[{\n  \'oj-color-invert oj-sp-color-invert-bg\': background === \'mixed\',\n  \'oj-sp-header-create-edit-2-bg-light\': background === \'light\',\n  \'oj-sp-header-create-edit-mobile-buttons-bottom\': bottomClass,\n  \'oj-sp-header-create-edit-mobile-buttons-ask-oracle-spacing\': askOracleIsVisible,\n  \'oj-sp-header-create-edit-mobile-buttons-container oj-flex oj-sm-flex-direction-column oj-md-hide oj-divider-top\': true\n}]]"><oj-button :id="[[ uid + \'_cancelMobile\' ]]"chroming="outlined"class="oj-button-sm oj-flex-item oj-sm-margin-4x"on-oj-action="[[ cancelHandler ]]"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-button><oj-button :id="[[ uid + \'_primaryActionMobile\' ]]"class="oj-button-sm oj-flex-item oj-sm-padding-4x-horizontal oj-sm-margin-4x-bottom"disabled="{{ primaryActionDisabled }}"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></div></body></html>'})),define("oj-sp/header-create-edit-2/header-create-edit-2-viewModel",["require","exports","oj-sp/common-util/common-util","oj-sp/common-util/enums","oj-sp/common/EventDispatcher","oj-sp/common/headerCommonAPI","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojtranslation","ojs/ojavatar","ojs/ojconveyorbelt","ojs/ojknockout","ojs/ojmenu","ojs/ojtoolbar","oj-sp/css-additions/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreateEditViewModel=void 0;t.HeaderCreateEditViewModel=class{constructor(e){var t,d,h;this.primaryActionHandler=e=>{s.EventDispatcher.dispatch("spPrimaryAction",this.composite,void 0)},this.cancelHandler=e=>{s.EventDispatcher.dispatch("spCancel",this.composite,void 0)},this.goToParentHandler=e=>{s.EventDispatcher.dispatch("spGoToParent",this.composite,void 0)},this.inFlowBackHandler=e=>{s.EventDispatcher.dispatch("spInFlowBack",this.composite,void 0)},this.nextHandler=e=>{s.EventDispatcher.dispatch("spNext",this.composite,void 0)},this.saveHandler=e=>{s.EventDispatcher.dispatch("spSave",this.composite,void 0)},this.menuHandler=e=>{var t;const i=e.target,o=null===(t=e.detail)||void 0===t?void 0:t.selectedValue,a=o===s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME?{secondaryItem:i.id.split(this.uid)[1]}:void 0;s.EventDispatcher.dispatch(o,this.composite,a)},this.secondaryActionHandler=e=>{const t={secondaryItem:e.target.id.split(this.uid)[1]};s.EventDispatcher.dispatch(s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,t)},this.processDisplayOptions=e=>{e?("on"===e.save?(this.saveIsOn(!0),this.saveDisabled(!1)):"off"===e.save?(this.saveIsOn(!1),this.saveDisabled(!0)):(this.saveIsOn(!0),this.saveDisabled(!0)),"on"===e.next?(this.nextIsOn(!0),this.nextConfigured(!0)):"off"===e.next?(this.nextIsOn(!1),this.nextConfigured(!0)):(this.nextIsOn(!1),this.nextConfigured(!1)),this.inFlowBackVisible(e.inFlowBack),this.goToParentVisible(e.goToParent),this.contextualInfoLabelVisible(e.contextualInfoLabel)):(this.saveIsOn(!1),this.nextIsOn(!1),this.goToParentVisible(!0),this.inFlowBackVisible(!1),this.contextualInfoLabelVisible(!1))},this.processAvatar=e=>{e?(this.avatarInitials(e.initials),this.avatarSrc(e.src),this.avatarVisible(!(!e.initials&&!e.src))):(this.avatarInitials(null),this.avatarSrc(null),this.avatarVisible(!1))},this.processPageTitle=()=>{this.actualPageTitle(this.pageTitle()?this.pageTitle():this.pageTitlePlaceholder())},this.processPrimaryAction=e=>{e?(this.primaryActionDisabled(e.disabled),this.primaryActionLabel(e.label?e.label:"Submit")):(this.primaryActionDisabled(!0),this.primaryActionLabel("Submit"))},this.processSecondaryActions=e=>{if(this.secondaryActionsSet.removeAll(),e&&Object.keys(e).length>0)for(let t=0;t<e.length&&t<10;t++)"disabled"===e[t].display?e[t].disabled=!0:e[t].disabled=!1,"off"!==e[t].display&&this.secondaryActionsSet.push(e[t])},this.didHeaderScrollFromViewport=e=>{const t=this.setBusyResolve({description:"Web Component Scrolling"});this.spHeader.parentElement.getBoundingClientRect().y<0?this.isSticky(!0):this.isSticky(!1),t()},this.didHeaderResize=()=>{const e=this.setBusyResolve({description:"Web Component Resizing"});this.headerSticky(this.isSticky());const t=document.querySelector(`#${this.uid}_menuOverflow`),i=document.querySelector(`#${this.uid}_secondaryActionSetMenu`),o=document.querySelector(`#${this.uid}_secondaryActionSetSubMenu`);t&&t.close(),i&&i.close(),o&&o.close(),e()},this.startObservingScroll=()=>{window.addEventListener("scroll",this.didHeaderScrollFromViewport),window.addEventListener("resize",this.didHeaderResize)},this.calcHeaderHeightWhenSticky=()=>{const e=document.querySelector(".oj-sp-header-create-edit-sticky-content"),t=document.querySelector(`#${this.uid}_badgeCtxInfoContainer`),i=this.properties.contextualInfo&&this.properties.contextualInfoSticky?t.offsetHeight:0,o=this.smallScreen()?6:12;return parseInt(this.paddingStyle.getPropertyValue("padding-top"),10)+parseInt(this.paddingStyle.getPropertyValue("padding-bottom"),10)+e.offsetHeight+i+o+"px"},this.headerSticky=e=>{e?(this.avatarSize("xs"),this.hiddenSpaceHolder.style.height=this.calcHeaderHeightWhenSticky(),this.spHeader.style.width=this.composite.getBoundingClientRect().width+"px",this.spHeader.style.left=this.composite.getBoundingClientRect().x+"px",this.spHeader.classList.add("oj-sp-header-create-edit-sticky"),this.contextualInfoVisible(!(!this.properties.contextualInfo||!this.properties.contextualInfoSticky)),this.badgeVisible(!(!this.badgeVisible()||!this.properties.contextualInfoSticky))):(this.avatarSize("sm"),this.hiddenSpaceHolder.style.height="0",this.spHeader.style.width="inherit",this.spHeader.style.left="initial",this.spHeader.classList.remove("oj-sp-header-create-edit-sticky"),this.contextualInfoVisible(!!this.properties.contextualInfo),this.badgeVisible(!!(this.properties.badge&&this.properties.badge.text&&this.properties.badge.status)))},this.setBusyResolve=e=>l.getContext(this.composite).getBusyContext().addBusyState(e),this.addPaddingToMobileButtons=()=>{this.bottomClass(!0)},this.removePaddingToMobileButtons=()=>{this.bottomClass(!1)},this.setHeaderBackgroundMode=async()=>{const e=await(0,a.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.background(e)},this.setHeaderSplitBackground=()=>{(0,a.evaluateHeaderSplitBackground)(this.composite,document.getElementById(this.uid+"_headerContainer"))};l.getContext(e.element).getBusyContext();const m=this.setBusyResolve({description:"Web Component Startup - Waiting for data"});this.ojTranslate=u,this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.saveIsOn=n.observable(!1),this.saveDisabled=n.observable(!1),this.nextIsOn=n.observable(!1),this.nextConfigured=n.observable(!1),this.goToParentVisible=n.observable(!0),this.inFlowBackVisible=n.observable(!1),this.contextualInfoLabelVisible=n.observable(!1),this.processDisplayOptions(this.properties.displayOptions),this.avatarInitials=n.observable(null),this.avatarSrc=n.observable(null),this.avatarVisible=n.observable(!1),this.processAvatar(this.properties.avatar),this.contextualInfoVisible=n.observable((null===(t=this.properties.contextualInfo)||void 0===t?void 0:t.length)>0),this.actualPageTitle=n.observable(""),this.pageTitle=n.observable(e.properties.pageTitle),this.pageTitlePlaceholder=n.observable(e.properties.pageTitlePlaceholder),this.processPageTitle(),this.primaryActionLabel=n.observable(),this.primaryActionDisabled=n.observable(),this.processPrimaryAction(this.properties.primaryAction),this.res=n.observable(Object.assign(Object.assign({},r),this.properties.translations)),this.isSticky=n.observable(!1).extend({rateLimit:100}),this.avatarSize=n.observable("sm"),this.screenRange=c.createScreenRangeObservable(),this.smallScreen=n.pureComputed(()=>p.compare(this.screenRange(),p.SCREEN_RANGE.SM)<=0,this),this.secondaryActionsSet=n.observableArray(),this.secondaryActionEvent=n.observable(s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME),this.processSecondaryActions(this.properties.secondaryActions),this.badgeVisible=n.observable(!1),this.initHeaderBadge(this.properties.badge),this.mobileDevice=n.observable((0,i.checkMobile)()),this.isSticky.subscribe(this.headerSticky),this.background=n.observable(o.BACKGROUND_MODE.LIGHT),this.ian=document.querySelector("oj-sp-in-app-navigation"),null===(d=this.ian)||void 0===d||d.addEventListener("spShow",this.addPaddingToMobileButtons),null===(h=this.ian)||void 0===h||h.addEventListener("spHide",this.removePaddingToMobileButtons),this.bottomClass=n.observable(!1),this.askOracleIsVisible=n.observable();document.querySelector("oj-sp-ask-oracle")?this.askOracleIsVisible(!0):this.askOracleIsVisible(!1),this.isHeaderInitialized=!1,m()}activated(e){d.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){this.isHeaderInitialized&&this.setHeaderSplitBackground(),d.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55")}bindingsApplied(e){this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.isHeaderInitialized=!0),d.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),this.hiddenSpaceHolder=document.querySelector(".oj-sp-header-create-edit-hidden-space-holder"),this.spHeader=document.querySelector(".oj-sp-header-create-edit-sticky-container"),this.paddingStyle=getComputedStyle(document.querySelector(".oj-sp-header-create-edit-spacing-container")),this.startObservingScroll()}propertyChanged(e){d.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"displayOptions"===e.property&&e.value&&this.processDisplayOptions(e.value),"avatar"===e.property&&e.value&&this.processAvatar(e.value),"pageTitle"===e.property&&(this.pageTitle(e.value),this.processPageTitle()),"pageTitlePlaceholder"===e.property&&(this.pageTitlePlaceholder(e.value?e.value:"New Page"),this.processPageTitle()),"primaryAction"===e.property&&this.processPrimaryAction(e.value),"contextualInfo"===e.property&&this.contextualInfoVisible(e.value&&e.value.length>0),"secondaryActions"===e.property&&this.processSecondaryActions(e.value),"translations"===e.property&&this.res(Object.assign(Object.assign({},r),e.value)),"badge"===e.property&&this.initHeaderBadge(e.value)}disconnected(e){var t,i;d.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),window.removeEventListener("scroll",this.didHeaderScrollFromViewport),window.removeEventListener("resize",this.didHeaderResize),null===(t=this.ian)||void 0===t||t.removeEventListener("spShow",this.addPaddingToMobileButtons),null===(i=this.ian)||void 0===i||i.removeEventListener("spHide",this.removePaddingToMobileButtons)}initHeaderBadge(e){e&&e.text&&e.status?this.badgeVisible(!0):this.badgeVisible(!1),this.badgeClass=n.computed(()=>{if(this.badgeVisible()){let t="oj-badge";return["danger","warning","success","info"].indexOf(e.status)>-1&&(t+=" oj-badge-"+e.status),this.smallScreen()&&(t+=" oj-badge-sm"),t}return""})}}})),define("css!oj-sp/header-create-edit-2/header-create-edit-2-styles",[],(function(){})),define("oj-sp/header-create-edit-2/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./header-create-edit-2-view.html","./header-create-edit-2-viewModel","css!./header-create-edit-2-styles","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-header-create-edit-2",{metadata:JSON.parse(o),view:s,viewModel:a.HeaderCreateEditViewModel})})),define("text!oj-sp/header-general-overview-2/component.json",[],(function(){return'{"name":"header-general-overview-2","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"General Overview Page Header","description":"Page header is the area on the top of the page, separated from content, which provides users with general information about the page as well as page level actions. This header contains a slot for search related components.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-smart-filters":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-fa-css":"2404.0.0"},"properties":{"pageTitle":{"displayName":"Page Title","description":"The title of the page.","type":"string","translatable":true,"required":true},"pageSubtitle":{"displayName":"Page Subtitle","description":"Additional supporting information to the page title.","type":"string","translatable":true,"required":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component.","type":"object","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info is visible.","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go to Parent action is visible.","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether In-flow Back action is visible.","type":"boolean","value":false},"mobileMenu":{"description":"Defines whether Mobile Menu action is visible.","type":"boolean","value":false}}},"primaryAction":{"displayName":"Primary Action","description":"This controls the primary action button.","type":"object","properties":{"label":{"description":"The label for the primary action button of the page.","type":"string"},"disabled":{"description":"The disabled state of the primary action button.","type":"boolean"}},"required":false},"contextualInfo":{"displayName":"Contextual Info","description":"The contextual information to be displayed.","type":"Array<object>","properties":{"label":{"description":"Contextual Info Label.","type":"string"},"value":{"description":"Contextual Info Value.","type":"string"}},"required":false},"selectContext":{"displayName":"Select Context","description":"The context selector.","type":"object","properties":{"data":{"description":"The data for the context selector.","type":"oj.DataProvider"},"itemText":{"description":"The item text for the context selector.","type":"string"},"labelHint":{"description":"The label hint for context selector.","type":"string","value":"Select context"}},"required":false},"selectContextValue":{"displayName":"Select Context Value","description":"Select Context Value.","type":"V|null","required":false,"writeback":true},"selectContextValueItem":{"displayName":"Select Context Value Item","description":"The value item of the context selector.","type":"object","required":false,"writeback":true},"secondaryActions":{"displayName":"Secondary Actions","description":"A list of secondary actions of the page. This supports upto 4 actions. If there are more than 4, only render the first 4. Each action has [label, id, icon, display].","type":"Array<object>","required":false,"properties":{"label":{"type":"string","displayName":"label of the secondary item"},"id":{"type":"string","displayName":"label of the secondary item","description":"This is a unique id associated wit hthe secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"icon":{"type":"string","displayName":"icon for the secondary item"},"display":{"type":"string","displayName":"Display option for the secondary item","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled"},"off":{"displayName":"Off","description":"The secondary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled"}}}}},"smartFilters":{"displayName":"Smart Filters","description":"Properties for smart filters.","required":false,"writeback":true,"type":"object","properties":{"appliedFilters":{"type":"Array","description":"Currently applied filters.","displayName":"Applied Filters","status":[{"type":"deprecated","since":"2101.0.0","description":"Use value property instead."}]},"askHint":{"type":"string","description":"Current ask hint.","displayName":"Ask Hint"},"autofocus":{"type":"boolean","description":"Autofocus is a Boolean that reflects the autofocus attribute, if it is set to true then the associated component will get input focus when the page is loaded. Setting this property doesn\'t set the focus to the component: it tells the browser to focus to it when the element is inserted in the document.","displayName":"Autofocus"},"expanded":{"description":"Expanded.","displayName":"Expanded","type":"string","enumValues":["auto","false","true"],"propertyEditorValues":{"auto":{"description":"Default value. Expanded on medium-to-up screens and collapsed on small screens if there are no applied filters. Expanded if there are applied filters.","displayName":"Auto"},"false":{"description":"Collapsed on all screens if there are no applied filters.","displayName":"False"},"true":{"description":"Expanded on all screens irrespective of applied filters.","displayName":"True"}}},"filtersMetadata":{"description":"Metadata defining filters.","displayName":"Filters Metadata","type":"object"},"resultsData":{"description":"Current results data.","displayName":"Results Data","type":"SmartSearchAndFilterDataProvider"},"suggestionFilters":{"description":"Current suggestion filters.","displayName":"Suggestion Filters","writeback":true,"type":"SuggestionFiltersDataProvider"},"suggestions":{"type":"SmartSuggestionChipsDataProvider","description":"Current suggestions.","displayName":"Suggestions"},"totalCount":{"type":"number","description":"Total count.","displayName":"Total Count","readOnly":true},"translations":{"type":"object","description":"A collection of translated resources from the translation bundle, or null if this component has no resources. Resources may be accessed and overridden individually or collectively.","properties":{"msgNoData":{"type":"string"}}},"value":{"description":"Current applied filters.","displayName":"Value","writeback":true,"type":"Array"}}},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}}}},"translations":{"description":"Instance Overrides of Strings.","type":"object","properties":{"goToParent":{"type":"string"}}},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}}},"methods":{},"events":{"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when the secondary action is clicked.","bubbles":true,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the secondary item clicked.","type":"string"}}},"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Triggered when the primary action is clicked.","bubbles":true,"cancelable":false},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked.","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked.","bubbles":true,"cancelable":false},"spMobileMenu":{"displayName":"spMobileMenu event","description":"Triggered when the Mobile Menu action is clicked.","bubbles":true,"cancelable":false}},"slots":{"search":{"description":"This is the slot for search components.","displayName":"search slot"}},"extension":{"catalog":{"status":"Deprecated","visibility":"hidden","tags":["oj-sp","Redwood","Early-Adopter","header-general-overview"],"docUrl":"http://design.oraclecorp.com/page-header-general-overview"},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/header-general-overview-2/header-general-overview-2-view.html",[],(function(){return'<html><head></head><body><header :id="[[ uid + \'_headerContainer\' ]]"data-oj-context=""><div :id="[[uid + \'_headerContent\']]"class="oj-sp-header-container":class="[[{\n    \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n    \'oj-sp-header-general-overview-2-bg-light\': background() === \'light\',\n    \'oj-sp-header-general-overview-sticky-container\': true\n  }]]"><div :class="[[{\n      \'oj-sp-general-overview-sm-padding-4x-top oj-sm-padding-4x-bottom oj-sp-general-overview-md-padding-5x-top oj-md-padding-7x-bottom\': showContainerPadding(),\n      \'oj-md-padding-1x-start oj-md-padding-2x-end oj-lg-padding-8x-horizontal\': true\n    }]]"><div class="oj-sp-header-general-overview-grid-3 oj-sm-align-items-center oj-sp-header-general-overview-sticky-content"><oj-bind-if test="[[ !(mobileDevice() &amp;&amp; mobileMenuVisible()) ]]"><oj-bind-if test="[[ goToParentVisible() &amp;&amp; !inFlowBackVisible() ]]"><oj-button :id="[[ uid + \'_goToParent\' ]]"class="oj-sm-padding-2x-end"chroming="borderless"display="icons"on-oj-action="[[ goToParentHandler ]]"><div slot="startIcon"class="oj-ux-ico-arrow-up"></div><span><oj-bind-text value="[[ res().goToParent ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ inFlowBackVisible() ]]"><oj-button :id="[[ uid + \'_inFlowBack\' ]]"class="oj-sm-padding-2x-end"chroming="borderless"display="icons"on-oj-action="[[ inFlowBackHandler ]]"><div slot="startIcon"class="oj-ux-ico-chevron-left"></div><span><oj-bind-text value="[[ res().inFlowBack ]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-bind-if><oj-bind-if test="[[ mobileDevice() &amp;&amp; mobileMenuVisible() ]]"><oj-button :id="[[ uid + \'_mobileMenu\' ]]"class="oj-sm-padding-2x-end"chroming="borderless"display="icons"on-oj-action="[[ mobileMenuHandler ]]"><div slot="startIcon"class="oj-ux-ico-menu-overflow"></div><span><oj-bind-text value="[[ res().menu ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ (!goToParentVisible() &amp;&amp; !inFlowBackVisible()) ]]"><div class="oj-sm-padding-2x-horizontal"></div></oj-bind-if><div class="oj-sm-align-items-center oj-sp-helper-truncate"><h1 :id="[[ uid + \'_pageTitle\' ]]"class="oj-header oj-sp-typography-display-6 oj-sp-helper-truncate oj-sm-padding-0 oj-sm-margin-0"><oj-bind-text value="[[ actualPageTitle ]]"></oj-bind-text></h1><oj-bind-if test="[[ properties.pageSubtitle ]]"><div :id="[[ uid + \'_pageSubtitle\' ]]"class="oj-typography-body-sm oj-md-margin-1x-bottom oj-sp-helper-truncate":title="[[ properties.pageSubtitle ]]"><oj-bind-text value="[[ properties.pageSubtitle ]]"></oj-bind-text></div></oj-bind-if></div><div class="oj-flex oj-sm-align-items-center"><oj-bind-if test="[[properties.selectContext &amp;&amp; properties.selectContext.data &amp;&amp; (Object.keys(properties.selectContext.data).length > 0)]]"><div class="oj-flex-item oj-form-control-inherit oj-sm-text-align-end oj-sp-header-general-overview-context-selector"><oj-select-single :id="[[ uid + \'_selectContext\' ]]"value="{{ properties.selectContextValue }}"value-item="{{ properties.selectContextValueItem }}"data="[[ properties.selectContext.data ]]"item-text="[[ properties.selectContext.itemText ]]"label-hint="[[ properties.selectContext.labelHint ]]"label-edge="none"></oj-select-single></div></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 0 || primaryActionVisible() ) ]]"><oj-toolbar :id="[[ uid + \'_headerToolbar\' ]]"aria-label="Header Toolbar"aria-controls=""class="oj-flex-item oj-sm-margin-3x-start oj-md-margin-6x-start oj-md-margin-4x-end oj-lg-margin-5x-end oj-sm-flex-wrap-nowrap"><oj-bind-if test="[[ secondaryActionsSet().length > 0 ]]"><oj-menu-button :id="[[ uid + \'_borderlessMenuWithoutStartIcon\' ]]"display="icons"class="oj-lg-hide"><span><oj-bind-text value="[[ res().more ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_menuOverflow\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-if test="[[ (secondaryActionsSet().length === 1 &amp;&amp; secondaryActionsSet()[0].display !== \'off\') ]]"><oj-option :id="[[ uid + secondaryActionsSet()[0].id + \'_overflow\' ]]":data-secondary-action-id="[[ secondaryActionsSet()[0].id ]]"value="[[ secondaryActionEvent() ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; !mobileDevice() ) ]]"><oj-option :id="[[ uid + \'_secondaryActionSetOption\' ]]"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetSubMenu\' ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id + \'_overflow\' ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-option></oj-bind-if><oj-bind-if test="[[ ( secondaryActionsSet().length > 1 &amp;&amp; mobileDevice() ) ]]"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id+ \'_overflow\' ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></oj-option></oj-bind-if></template></oj-bind-for-each></oj-bind-if></oj-menu><span slot="endIcon"class="oj-ux-ico-overflow-horiz"></span></oj-menu-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length > 1 &amp;&amp; primaryActionVisible() ]]"><oj-menu-button :id="[[ uid + \'_secondaryActionSet\' ]]"chroming="outlined"class="oj-md-down-hide"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetMenu\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.data.display !== \'off\' ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length > 2 &amp;&amp; !primaryActionVisible() ]]"><oj-menu-button :id="[[ uid + \'_secondaryActionSet\' ]]"chroming="outlined"class="oj-md-down-hide"><span><oj-bind-text value="[[ res().actions ]]"></oj-bind-text></span><oj-menu :id="[[ uid + \'_secondaryActionSetMenu\' ]]"on-oj-menu-action="[[ menuHandler ]]"slot="menu"open-options.position.my.horizontal="end"open-options.position.at.horizontal="end"><oj-bind-for-each data="[[ secondaryActionsSet ]]"><template><oj-bind-if test="[[ $current.index !== 0 ]]"><oj-option class="oj-sp-header-general-overview-secondary-option":id="[[ uid + $current.data.id ]]":data-secondary-action-id="[[ $current.data.id ]]"value="[[ secondaryActionEvent ]]"disabled="[[ $current.data.disabled ]]"><oj-bind-if test="[[ $current.data.icon ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span></oj-bind-if><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></oj-bind-if></template></oj-bind-for-each></oj-menu></oj-menu-button><oj-button class="oj-md-down-hide":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length === 1 ]]"><oj-button class="oj-md-down-hide":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryActionsSet().length === 2 &amp;&amp; !primaryActionVisible() ]]"><oj-button class="oj-md-down-hide":id="[[ uid + secondaryActionsSet()[0].id ]]"disabled="[[ secondaryActionsSet()[0].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[0].icon ]]"><span :class="[[ secondaryActionsSet()[0].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[0].label ]]"></oj-bind-text></span></oj-button><oj-button class="oj-md-down-hide":id="[[ uid + secondaryActionsSet()[1].id ]]"disabled="[[ secondaryActionsSet()[1].disabled ]]"chroming="outlined"on-oj-action="[[ secondaryActionHandler ]]"><oj-bind-if test="[[ secondaryActionsSet()[1].icon ]]"><span :class="[[ secondaryActionsSet()[1].icon ]]"slot="startIcon"></span></oj-bind-if><span><oj-bind-text value="[[ secondaryActionsSet()[1].label ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ primaryActionVisible ]]"><oj-button :id="[[ uid + \'_primaryAction\' ]]"class="oj-sm-only-hide"disabled="{{ primaryActionDisabled }}"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-toolbar></oj-bind-if></div></div><oj-bind-if test="[[ (badgeVisible() || contextualInfoVisible()) &amp;&amp; !smartFiltersVisible() &amp;&amp; !searchSlotUsed() ]]"><div :id="[[uid + \'_contextualInfoContainer\']]":class="[[{\n        \'oj-sm-align-items-center oj-sm-padding-4x-start oj-md-padding-1x-end\': badgeVisible(),\n        \'oj-flex-bar oj-sm-padding-3x-top oj-sp-header-general-overview-ci-container oj-sm-padding-4x-start oj-sm-padding-4x-end oj-md-padding-4x-top\': true\n     }]]"><oj-bind-if test="[[badgeVisible()]]"><div class="oj-flex-bar-start oj-sp-header-general-overview-no-wrap"><span :id="[[ uid + \'_badge\' ]]":class="[[badgeClass]]"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></span></div></oj-bind-if><oj-bind-if test="[[ contextualInfoVisible ]]"><div :id="[[ uid + \'_contextualInfo\' ]]"><oj-conveyor-belt tabindex="0"class="oj-sp-header-contextual-conveyor"data-oj-binding-provider="none"><oj-bind-for-each data="[[ properties.contextualInfo ]]"><template><oj-bind-if test="[[ $current.index < 4 ]]"><div :class="[[ $current.index === 0 ? \'oj-sm-padding-3x-start oj-md-padding-4x-start oj-sm-padding-3x-end oj-md-padding-4x-end oj-flex-item\' : \'oj-sm-padding-3x-end oj-md-padding-4x-end oj-flex-item\' ]]"><oj-bind-if test="[[ contextualInfoLabelVisible() ]]"><div :id="[[ uid + \'_contextualInfo\' + $current.index + \'-labelled-by\']]"class="oj-typography-body-xs oj-text-color-secondary"><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></div></oj-bind-if><div :id="[[ uid + \'_contextualInfo\' + $current.index ]]"class="oj-typography-body-xs"><oj-bind-text value="[[ $current.data.value ]]"></oj-bind-text></div></div></oj-bind-if></template></oj-bind-for-each></oj-conveyor-belt></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[ (smartFiltersVisible() &amp;&amp; !searchSlotUsed()) ]]"><div :id="[[ uid + \'_smartfilters\' ]]"class="oj-sm-padding-1x-horizontal oj-sm-padding-3x-top oj-md-padding-5x-end oj-md-padding-4x-top oj-typography-body-xs oj-sp-header-general-overview-smart-filter-container"><oj-sp-smart-filters value="{{ properties.smartFilters.appliedFilters }}"on-value-changed="[[ appliedFiltersChangeHandler ]]"ask-hint="[[ properties.smartFilters.askHint ]]"autofocus="[[ properties.smartFilters.autofocus ]]"display-options.expanded="[[ properties.smartFilters.expanded ]]"filters-metadata="[[ properties.smartFilters.filtersMetadata ]]"results-data="[[ properties.smartFilters.resultsData ]]"suggestion-filters="[[ properties.smartFilters.suggestionFilters ]]"suggestions="[[ properties.smartFilters.suggestions ]]"total-count="[[ properties.smartFilters.totalCount ]]"on-total-count-changed="[[ totalCountChangeHandler ]]"translations="[[ properties.smartFilters.translations ]]"></oj-sp-smart-filters></div></oj-bind-if><oj-bind-if test="[[ searchSlotUsed ]]"><div :id="[[ uid + \'_smartfilters\' ]]"class="oj-sm-padding-1x-start oj-sm-padding-4x-end oj-md-padding-5x-end oj-typography-body-xs oj-sm-padding-2x-top oj-sp-general-overview-md-padding-5x-top oj-sp-header-general-overview-smart-filter-container"><oj-bind-slot name="search"></oj-bind-slot></div></oj-bind-if></div><div class="oj-sp-header-general-overview-header-strip"></div></div><div class="oj-sp-header-general-overview-hidden-space-holder"></div></header><oj-bind-if test="[[ primaryActionVisible ]]"><div :class="[[{\n    \'oj-color-invert oj-sp-color-invert-bg\': background === \'mixed\',\n    \'oj-sp-header-general-overview-2-bg-light\': background === \'light\',\n    \'oj-sp-header-general-overview-mobile-buttons-bottom\': bottomClass,\n    \'oj-sp-header-general-overview-mobile-buttons-ask-oracle-spacing\': askOracleIsVisible,\n    \'oj-sp-header-general-overview-mobile-buttons-container oj-flex oj-sm-flex-direction-column oj-md-hide oj-divider-top\': true\n  }]]"><oj-button :id="[[ uid + \'_primaryActionMobile\' ]]"class="oj-button-sm oj-flex-item oj-sm-margin-4x"disabled="{{ primaryActionDisabled }}"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></div></oj-bind-if></body></html>'})),define("oj-sp/header-general-overview-2/header-general-overview-2-viewModel",["require","exports","oj-sp/common-util/common-util","oj-sp/common-util/enums","oj-sp/common/EventDispatcher","oj-sp/common/headerCommonAPI","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojtranslation","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css","ojs/ojarraydataprovider","ojs/ojconveyorbelt","ojs/ojknockout","ojs/ojselectsingle","ojs/ojtoolbar","ojs/ojbutton","ojs/ojmenu","ojs/ojoption"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGeneralOverviewViewModel=void 0;t.HeaderGeneralOverviewViewModel=class{constructor(e){var t,d,u;this.primaryActionHandler=e=>{s.EventDispatcher.dispatch("spPrimaryAction",this.composite,void 0)},this.goToParentHandler=e=>{s.EventDispatcher.dispatch("spGoToParent",this.composite,void 0)},this.inFlowBackHandler=e=>{s.EventDispatcher.dispatch("spInFlowBack",this.composite,void 0)},this.mobileMenuHandler=e=>{s.EventDispatcher.dispatch("spMobileMenu",this.composite,void 0)},this.menuHandler=e=>{var t;const i=e.target,o=null===(t=e.detail)||void 0===t?void 0:t.selectedValue,a=i.dataset.secondaryActionId,n=o===s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME?{secondaryItem:a}:void 0;s.EventDispatcher.dispatch(o,this.composite,n)},this.secondaryActionHandler=e=>{const t={secondaryItem:e.target.id.split(this.uid)[1]};s.EventDispatcher.dispatch(s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,t)},this.processDisplayOptions=e=>{e?(this.contextualInfoLabelVisible(e.contextualInfoLabel),this.inFlowBackVisible(e.inFlowBack),this.goToParentVisible(e.goToParent),this.mobileMenuVisible(e.mobileMenu)):(this.contextualInfoLabelVisible(!1),this.inFlowBackVisible(!1),this.goToParentVisible(!0),this.mobileMenuVisible(!1))},this.processPageTitle=()=>{this.actualPageTitle(this.pageTitle())},this.processPrimaryAction=e=>{e?(this.primaryActionDisabled(e.disabled),this.primaryActionLabel(e.label),this.primaryActionVisible(!0)):(this.primaryActionDisabled(!0),this.primaryActionLabel(""),this.primaryActionVisible(!1))},this.processSecondaryActions=e=>{if(this.secondaryActionsSet.removeAll(),e&&Object.keys(e).length>0)for(let t=0;t<e.length;t++)"disabled"===e[t].display?e[t].disabled=!0:e[t].disabled=!1,"off"!==e[t].display&&this.secondaryActionsSet.push(e[t])},this.appliedFiltersChangeHandler=e=>{this.composite.setProperty("smartFilters.value",e.detail.value),this.composite.setProperty("smartFilters.appliedFilters",e.detail.value)},this.totalCountChangeHandler=e=>{this.composite.setProperty("smartFilters.totalCount",e.detail.value)},this.makeHeaderSemiSticky=()=>{const e=document.querySelector(".oj-sp-header-general-overview-sticky-content");!this.isSticky()||this.isSticky()&&this.scrollingUp()?e.style.display="grid":e.style.display="none"},this.didHeaderScrollFromViewport=e=>{const t=this.setBusyResolve({description:"Web Component Scrolling"}),i=this.spHeader.parentElement.getBoundingClientRect().y;this.scrollingUp(i>=this.lastY),this.isSticky(i<0),this.lastY=i,t()},this.didHeaderResize=()=>{const e=this.setBusyResolve({description:"Web Component Resizing"});this.headerSticky(this.isSticky());const t=document.querySelector(`#${this.uid}_menuOverflow`),i=document.querySelector(`#${this.uid}_secondaryActionSetMenu`),o=document.querySelector(`#${this.uid}_secondaryActionSetSubMenu`);null==t||t.close(),null==i||i.close(),null==o||o.close(),e()},this.startObservingScroll=()=>{window.addEventListener("scroll",this.didHeaderScrollFromViewport),window.addEventListener("resize",this.didHeaderResize)},this.spHeaderWidth=()=>{const e=this.composite.getBoundingClientRect().width;return e>0&&(this.lastWidth=e),this.lastWidth+"px"},this.headerSticky=e=>{e?(this.hiddenSpaceHolder.style.height=this.spHeader.offsetHeight+"px",this.showContainerPadding(!1),this.spHeader.style.width=this.spHeaderWidth(),this.spHeader.style.left=this.composite.getBoundingClientRect().x+"px",this.spHeader.classList.add("oj-sp-header-general-overview-sticky"),this.contextualInfoVisible(!(!(this.properties.contextualInfo&&this.properties.contextualInfo.length>0)||this.smartFiltersVisible()||this.searchSlotUsed())),this.contextualInfoVisible()&&document.querySelector(`#${this.uid}_contextualInfoContainer`).classList.remove("oj-sm-padding-6x-top")):(this.showContainerPadding(!0),this.spHeader.style.width="inherit",this.spHeader.style.left="initial",this.spHeader.classList.remove("oj-sp-header-general-overview-sticky"),this.hiddenSpaceHolder.style.height="0",this.contextualInfoVisible(!(!(this.properties.contextualInfo&&this.properties.contextualInfo.length>0)||this.smartFiltersVisible()||this.searchSlotUsed())),this.contextualInfoVisible()&&document.querySelector(`#${this.uid}_contextualInfoContainer`).classList.add("oj-sm-padding-6x-top"))},this.setBusyResolve=e=>l.getContext(this.composite).getBusyContext().addBusyState(e),this.addPaddingToMobileButtons=()=>{this.bottomClass(!0)},this.removePaddingToMobileButtons=()=>{this.bottomClass(!1)},this.setHeaderBackgroundMode=async()=>{const e=await(0,a.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.background(e)},this.setHeaderSplitBackground=()=>{(0,a.evaluateHeaderSplitBackground)(this.composite,document.getElementById(this.uid+"_headerContainer"))};const h=l.getContext(e.element).getBusyContext();this.busyResolve=h.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.ojTranslate=p,this.mobileDevice=n.observable((0,i.checkMobile)()),this.contextualInfoLabelVisible=n.observable(!1),this.goToParentVisible=n.observable(!0),this.inFlowBackVisible=n.observable(!1),this.mobileMenuVisible=n.observable(!1),this.processDisplayOptions(this.properties.displayOptions),this.contextualInfoVisible=n.observable((null===(t=this.properties.contextualInfo)||void 0===t?void 0:t.length)>0),this.actualPageTitle=n.observable(""),this.pageTitle=n.observable(e.properties.pageTitle),this.processPageTitle(),this.primaryActionLabel=n.observable(),this.primaryActionDisabled=n.observable(),this.primaryActionVisible=n.observable(!1),this.processPrimaryAction(this.properties.primaryAction),this.res=n.observable(Object.assign(Object.assign({},r),this.properties.translations)),this.isSticky=n.observable(!1).extend({rateLimit:100}),this.lastY=0,this.lastWidth=this.composite.getBoundingClientRect().width,this.scrollingUp=n.observable(!1).extend({rateLimit:100}),this.screenRange=c.createScreenRangeObservable(),this.secondaryActionsSet=n.observableArray(),this.secondaryActionEvent=n.observable(s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME),this.processSecondaryActions(this.properties.secondaryActions),this.smartFiltersVisible=n.observable(!1),this.properties.smartFilters&&Object.keys(this.properties.smartFilters).length>0&&(0,i.dynamicImportPath)("oj-sp/smart-filters/loader",this.composite).then(()=>{this.smartFiltersVisible(!0)}),this.showContainerPadding=n.observable(!0),this.badgeVisible=n.observable(!1),this.initHeaderBadge(this.properties.badge),this.searchSlotUsed=n.observable(!1),this.isSticky.subscribe(this.headerSticky),this.background=n.observable(o.BACKGROUND_MODE.LIGHT),this.ian=document.querySelector("oj-sp-in-app-navigation"),null===(d=this.ian)||void 0===d||d.addEventListener("spShow",this.addPaddingToMobileButtons),null===(u=this.ian)||void 0===u||u.addEventListener("spHide",this.removePaddingToMobileButtons),this.bottomClass=n.observable(!1),this.askOracleIsVisible=n.observable();document.querySelector("oj-sp-ask-oracle")?this.askOracleIsVisible(!0):this.askOracleIsVisible(!1),this.isHeaderInitialized=!1,this.busyResolve()}activated(e){d.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){this.isHeaderInitialized&&this.setHeaderSplitBackground(),d.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55")}bindingsApplied(e){this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.isHeaderInitialized=!0),d.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55"),e.slotCounts.search>0&&this.searchSlotUsed(!0),this.hiddenSpaceHolder=document.querySelector(".oj-sp-header-general-overview-hidden-space-holder"),this.spHeader=document.querySelector(".oj-sp-header-general-overview-sticky-container"),this.startObservingScroll()}propertyChanged(e){d.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"displayOptions"===e.property&&e.value&&this.processDisplayOptions(e.value),"pageTitle"===e.property&&(this.pageTitle(e.value),this.processPageTitle()),"primaryAction"===e.property&&this.processPrimaryAction(e.value),"contextualInfo"===e.property&&this.contextualInfoVisible(e.value&&e.value.length>0),"secondaryActions"===e.property&&this.processSecondaryActions(e.value),"smartFilters"===e.property&&(e.value&&Object.keys(e.value).length>0?(0,i.dynamicImportPath)("oj-sp/smart-filters/loader",this.composite).then(()=>{this.smartFiltersVisible(!0)}):this.smartFiltersVisible(!1)),"translations"===e.property&&this.res(Object.assign(Object.assign({},r),e.value)),"badge"===e.property&&this.initHeaderBadge(e.value)}disconnected(e){var t,i;d.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),window.removeEventListener("scroll",this.didHeaderScrollFromViewport),window.removeEventListener("resize",this.didHeaderResize),null===(t=this.ian)||void 0===t||t.removeEventListener("spShow",this.addPaddingToMobileButtons),null===(i=this.ian)||void 0===i||i.removeEventListener("spHide",this.removePaddingToMobileButtons)}initHeaderBadge(e){e&&e.text&&e.status?this.badgeVisible(!0):this.badgeVisible(!1),this.badgeClass=n.computed(()=>{if(this.badgeVisible()){let t="oj-badge";return["danger","warning","success","info"].indexOf(e.status)>-1&&(t+=" oj-badge-"+e.status),t}return""})}}})),define("css!oj-sp/header-general-overview-2/header-general-overview-2-styles",[],(function(){})),define("oj-sp/header-general-overview-2/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./header-general-overview-2-view.html","./header-general-overview-2-viewModel","css!./header-general-overview-2-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-header-general-overview-2",{metadata:JSON.parse(o),view:s,viewModel:a.HeaderGeneralOverviewViewModel})})),define("text!oj-sp/header-welcome-banner/component.json",[],(function(){return'{"name":"header-welcome-banner","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-fa-css":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-internal-resources":"2404.0.0"},"implements":["SpHeaderWelcomeBannerElement"],"displayName":"Welcome Banner Header","description":"Welcome Banner header is placed at the top of Welcome Page and provides the users with an overview of the flow and important tasks they can perform.","type":"composite","subcomponentType":"packPrivate","properties":{"displayOptions":{"displayName":"Display options","description":"Configure display options of header welcome banner.","type":"object|null","properties":{"imageStretch":{"type":"string","displayName":"Image Stretch","description":"Specifies the background image stretching","value":"none","enumValues":["none","full"],"propertyEditorValues":{"none":{"displayName":"None","description":"Stretched to the edge"},"full":{"displayName":"Full","description":"Full bleed image"}}},"mobileImage":{"type":"string","description":"Specify if image is displayed in mobile view.","displayName":"Display Mobile Image","value":"on","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Image is displayed in mobile view."},"off":{"displayName":"Off","description":"Image is not displayed in mobile view."}}},"inFlowBack":{"description":"Defines whether In-flow Back action is visible","type":"boolean","value":false},"responsivePadding":{"type":"string","description":"Specify if responsive padding should be on or off","displayName":"Responsive Padding","enumValues":["on","off"],"status":[{"target":"propertyValue","type":"deprecated","since":"2307.0.0","description":"Enum value \'off\' is no longer supported, and will be removed in a future release. Use \'on\' instead.","value":["off"]}],"propertyEditorValues":{"on":{"displayName":"On","description":"Responsive padding is on."},"off":{"displayName":"Off","description":"Responsive padding is off."}}}}},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"inFlowBack":{"type":"string","value":"Back"}}},"pageTitle":{"displayName":"Page Title","description":"Page title or a personalized message of the page.","translatable":true,"type":"string","required":true},"overlineText":{"displayName":"Overline","description":"Overline is used to introduce a headline at the top of page title.","translatable":true,"type":"string","required":false},"descriptionText":{"displayName":"Description","description":"Additional supporting information to the page title.","translatable":true,"type":"string","required":false},"backgroundColor":{"type":"string","displayName":"Background Color","description":"The background color can be one of the predefined colors or an option to use the dominant color of the illustration","value":"dark-ocean","enumValues":["dark-ocean","dark-pine","dark-lilac","dark-teal","dark-rose","dark-pebble","dark-slate","dark-plum","dark-sienna","auto"],"propertyEditorValues":{"dark-ocean":{"displayName":"Dark Ocean","description":"Dark Ocean Background Color (NetSuite)"},"dark-pine":{"displayName":"Dark Pine","description":"Dark Pine Background Color (OCI)"},"dark-lilac":{"displayName":"Dark Lilac","description":"Dark Lilac Background Color (GBUs)"},"dark-teal":{"displayName":"Dark Teal","description":"Dark Teal Background Color (Finance)"},"dark-rose":{"displayName":"Dark Rose","description":"Dark Rose Background Color (HCM)"},"dark-pebble":{"displayName":"Dark Pebble","description":"Dark Pebble Background Color (Dev Tools)"},"dark-slate":{"displayName":"Dark Slate","description":"Dark Slate Background Color (Database)"},"dark-plum":{"displayName":"Dark Plum","description":"Dark Plum Background Color (CX)"},"dark-sienna":{"displayName":"Dark Sienna","description":"Dark Sienna Background Color (SCM)"},"auto":{"displayName":"Auto","description":"Use Dominant Color of Illustration"}}},"illustrationBackground":{"displayName":"Illustration background source URL","description":"The source URL for the illustration background image, together with the background color to form the background image layer.","type":"string","required":false},"illustrationForeground":{"displayName":"Illustration foreground source URL","description":"The source URL for the illustration foreground image.","type":"string","required":false},"primaryAction":{"displayName":"Primary Action","description":"Primary Action","type":"object|null","properties":{"label":{"type":"string","displayName":"Label","description":"Label describing the action."},"icon":{"type":"string","displayName":"Icon","description":"Optional icon for the action."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"secondaryAction":{"displayName":"Secondary Action","description":"Secondary Action","type":"object|null","status":[{"type":"deprecated","since":"2401.0.0","description":"The secondaryAction property is deprecated. Use secondaryActions instead."}],"properties":{"label":{"type":"string","displayName":"Label","description":"Label describing the action."},"icon":{"type":"string","displayName":"Icon","description":"Optional icon for the action."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"secondaryActions":{"displayName":"Secondary Actions","description":"A list of secondary actions of the page. This supports up to 6 actions. Each action has [id, label, icon, display].","type":"Array<object>","required":false,"properties":{"id":{"type":"string","displayName":"ID","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"label":{"type":"string","displayName":"Label","translatable":true,"description":"Label describing the action."},"icon":{"type":"string","displayName":"Icon","description":"Optional icon for the action."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled"},"off":{"displayName":"Off","description":"The action is not visible"},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled"}}}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"Primary action event","description":"Dispatched when the primary actions is triggered.","bubbles":false,"cancelable":false},"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when the secondary actions is triggered.","bubbles":false,"cancelable":false,"detail":{"actionId":{"description":"The ID of the secondary action clicked.","type":"string"}}},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked","bubbles":false,"cancelable":false}},"slots":{"search":{"description":"Slot for adding a component implementing search functionality.","displayName":"Search slot","maxItems":1,"preferredContent":["InputSearchElement"]}},"extension":{"catalog":{"category":"Redwood Headers","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Header%20Welcome%20Banner%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectraheaderwelcomebanner.html","coverImage":"extension/catalog/images/ico-page-header.svg"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-page-header.svg"}}'})),define("text!oj-sp/header-welcome-banner/header-welcome-banner-view.html",[],(function(){return'<html><head></head><body><div :class="[[{\'oj-color-invert oj-sp-color-invert-bg\': backgroundColorTheme() === \'dark\'}]]"class="oj-sp-header-welcome-banner-container oj-flex"><oj-bind-if test="[[$properties.displayOptions.mobileImage !== \'on\' &amp;&amp; !isSmallScreen() || $properties.displayOptions.mobileImage === \'on\']]"><div :class="[[$properties.displayOptions.imageStretch === \'none\' ? \'oj-sp-header-welcome-banner-image-panel oj-flex-item oj-md-order-1\' : \'oj-sp-header-welcome-banner-full-bleed-image-panel oj-flex-item\']]"><oj-bind-if test="[[ $properties.illustrationBackground &amp;&amp; $properties.displayOptions.imageStretch !== \'full\']]"><div class="oj-sp-header-welcome-banner-texture oj-sp-header-welcome-banner-gradient"></div></oj-bind-if><oj-bind-if test="[[$properties.illustrationForeground]]"><div :class="[[$properties.displayOptions.imageStretch === \'none\' ? \'oj-sp-header-welcome-banner-image-container\' : \'oj-sp-header-welcome-banner-full-bleed-image-container oj-sm-align-self-center\']]"><img :class="[[ `oj-sp-header-welcome-banner-background-${$properties.backgroundColor} ` + `${$properties.displayOptions.imageStretch === \'none\' ? \' oj-sm-align-self-center oj-sp-header-welcome-banner-image oj-sp-header-welcome-banner-gradient \' : \' oj-sp-header-welcome-banner-full-bleed-image \'}` ]]":src="[[ $properties.illustrationForeground ]]"alt=""><oj-bind-if test="[[$properties.displayOptions.imageStretch === \'full\' &amp;&amp; !isAbstractImage()]]"><div class="oj-sp-header-welcome-banner-scrim-image"></div></oj-bind-if></div></oj-bind-if></div></oj-bind-if><div class="oj-sp-header-welcome-banner-main-panel oj-flex oj-sm-align-self-center oj-sm-flex-direction-column oj-md-order-0 oj-sm-padding-7x-vertical oj-lg-padding-12x-vertical oj-sp-template-wrapper"><oj-bind-if test="[[inFlowBackVisible]]"><div :id="[[uid +\'_inFlowBack\']]"class="oj-sp-header-welcome-banner-inflow oj-sm-margin-1x-bottom"><oj-button :id="[[ uid + \'_inFlowBack_md\' ]]"class="oj-button-sm oj-lg-padding-2x-end oj-md-padding-2x-end"chroming="borderless"display="icons"on-oj-action="[[ inFlowBackHandler ]]"><div slot="startIcon"class="oj-ux-ico-chevron-left"></div><oj-bind-text value="[[ res().inFlowBack ]]"></oj-bind-text></oj-button></div></oj-bind-if><oj-bind-if test="[[$properties.overlineText]]"><div :id="[[uid +\'_overline\']]"class="oj-typography-body-sm oj-typography-bold oj-sm-margin-1x-bottom":title="[[$properties.overlineText]]"><oj-bind-text value="[[$properties.overlineText]]"></oj-bind-text></div></oj-bind-if><div :id="[[uid +\'_title\']]"><h1 class="oj-header oj-sp-typography-display-6 oj-sm-padding-0 oj-sm-margin-0"><oj-bind-text value="[[$properties.pageTitle]]"></oj-bind-text></h1></div><oj-bind-if test="[[$properties.descriptionText]]"><div :id="[[uid +\'_description\']]"class="oj-typography-body-md oj-sm-margin-2x-top oj-md-margin-1x-top":title="[[$properties.descriptionText]]"><oj-bind-text value="[[$properties.descriptionText]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[ slotCounts &amp;&amp; slotCounts[\'search\'] > 0 ]]"><div :id="[[uid +\'_search\']]"class="oj-sp-header-welcome-banner-search-panel oj-sm-margin-5x-top"><oj-bind-slot name="search"></oj-bind-slot></div></oj-bind-if><oj-bind-if test="[[ ! (slotCounts &amp;&amp; slotCounts[\'search\'] > 0) &amp;&amp; (primaryAction() || secondaryActions()[0]) ]]"><oj-bind-if test="[[isSmallScreen()]]"><oj-bind-if test="[[ !showSecondaryActions() ]]"><div id="toolbars"class="oj-flex oj-sm-flex-direction-column oj-sm-margin-6x-top"><oj-bind-if test="[[  primaryAction() ]]"><oj-toolbar chroming="outlined"class="oj-sm-padding-0 oj-sm-margin-0"><oj-button :id="[[primaryAction().id]]":disabled="[[primaryAction().disabled]]"class="oj-flex-item"chroming="callToAction"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[  primaryAction().icon ]]"><span :class="[[  primaryAction().icon ]]"role="presentation"></span></oj-bind-if></span><span><oj-bind-text value="[[ primaryAction().label]]"></oj-bind-text></span></oj-button></oj-toolbar><oj-bind-if test="[[ secondaryActions()[0] ]]"><oj-bind-if test="[[  primaryAction() ]]"><div class="oj-sm-margin-0-horizontal oj-sm-margin-4x-bottom"></div></oj-bind-if><oj-toolbar class="oj-sm-padding-0 oj-sm-margin-0"><oj-button :id="[[secondaryActions()[0].id]]":disabled="[[secondaryActions()[0].disabled]]"class="oj-flex-item"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[0].icon ]]"><span :class="[[ secondaryActions()[0].icon ]]"role="presentation"></span></oj-bind-if></span><span><oj-bind-text value="[[ secondaryActions()[0].label ]]"></oj-bind-text></span></oj-button></oj-toolbar></oj-bind-if></oj-bind-if><oj-bind-if test="[[ !primaryAction() &amp;&amp; secondaryActions()[0] ]]"><oj-toolbar chroming="outlined"class="oj-sm-padding-0 oj-sm-margin-0"><oj-button :id="[[secondaryActions()[0].id]]":disabled="[[secondaryActions()[0].disabled]]"class="oj-flex-item"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[0].icon ]]"><span :class="[[ secondaryActions()[0].icon ]]"role="presentation"></span></oj-bind-if></span><span><oj-bind-text value="[[ secondaryActions()[0].label]]"></oj-bind-text></span></oj-button></oj-toolbar><oj-bind-if test="[[ secondaryActions()[1] ]]"><oj-bind-if test="[[  secondaryActions()[0] ]]"><div class="oj-sm-margin-0-horizontal oj-sm-margin-4x-bottom"></div></oj-bind-if><oj-toolbar class="oj-sm-padding-0 oj-sm-margin-0"><oj-button :id="[[secondaryActions()[1].id]]":disabled="[[secondaryActions()[1].disabled]]"class="oj-flex-item"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[1].icon ]]"><span :class="[[ secondaryActions()[1].icon ]]"role="presentation"></span></oj-bind-if></span><span><oj-bind-text value="[[ secondaryActions()[1].label ]]"></oj-bind-text></span></oj-button></oj-toolbar></oj-bind-if></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[ showSecondaryActions() ]]"><oj-toolbar :aria-label="[[res.actions]]"chroming="outlined"class="oj-flex oj-sm-flex-wrap-nowrap oj-sp-header-welcome-banner-toolbar oj-sm-margin-6x-top"><oj-bind-if test="[[ primaryAction() ]]"><oj-button :id="[[primaryAction().id]]"class="oj-sp-header-welcome-banner-primary-action-sm":disabled="[[primaryAction().disabled]]"chroming="callToAction"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ primaryAction().icon ]]"><div :class="[[ primaryAction().icon ]]"role="presentation"></div></oj-bind-if></span><span><oj-bind-text value="[[primaryAction().label]]"></oj-bind-text></span></oj-button><oj-menu-button :id="[[uid + \'_secondaryActions\']]"display="icons"><oj-bind-text value="[[ res().moreActions]]"></oj-bind-text><oj-menu :id="[[uid + \'_secondaryActionsMenu\']]"slot="menu"on-oj-menu-action="[[actionHandler]]"><oj-bind-for-each data="[[secondaryActions]]"><template><oj-option value="[[$current.data.id]]"disabled="[[$current.data.disabled]]":id="[[$current.data.id]]"><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[!primaryAction()]]"><oj-button :id="[[secondaryActions()[0].id]]"class="oj-sp-header-welcome-banner-primary-action-sm":disabled="[[secondaryActions()[0].disabled]]"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[0].icon ]]"><div :class="[[secondaryActions()[0].icon ]]"role="presentation"></div></oj-bind-if></span><span><oj-bind-text value="[[secondaryActions()[0].label]]"></oj-bind-text></span></oj-button><oj-menu-button :id="[[uid + \'_secondaryActions\']]"display="icons"><oj-bind-text value="[[ res().moreActions]]"></oj-bind-text><oj-menu :id="[[uid + \'_secondaryActionsMenu\']]"slot="menu"on-oj-menu-action="[[actionHandler]]"><oj-bind-for-each data="[[secondaryActions.slice(1)]]"><template><oj-option value="[[$current.data.id]]"disabled="[[$current.data.disabled]]":id="[[$current.data.id]]"><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if></oj-toolbar></oj-bind-if></oj-bind-if><oj-bind-if test="[[!isSmallScreen()]]"><oj-bind-if test="[[ !showSecondaryActions() ]]"><oj-toolbar :aria-label="[[res.actions]]"chroming="outlined"class="oj-flex oj-sm-flex-wrap-nowrap oj-sp-header-welcome-banner-toolbar oj-md-margin-5x-top"><oj-bind-if test="[[ primaryAction() ]]"><oj-button :id="[[ primaryAction().id]]":disabled="[[primaryAction().disabled]]"chroming="callToAction"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[  primaryAction().icon ]]"><div :class="[[ primaryAction().icon ]]"role="presentation"></div></oj-bind-if></span><span><oj-bind-text value="[[primaryAction().label]]"></oj-bind-text></span></oj-button><oj-bind-if test="[[ secondaryActions()[0] ]]"><oj-button :id="[[ secondaryActions()[0].id]]":disabled="[[secondaryActions()[0].disabled]]"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[0].icon ]]"><span :class="[[ secondaryActions()[0].icon ]]"role="presentation"></span></oj-bind-if></span><span><oj-bind-text value="[[secondaryActions()[0].label]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-bind-if><oj-bind-if test="[[ !primaryAction() &amp;&amp; secondaryActions()[0] ]]"><oj-button :id="[[secondaryActions()[0].id]]":disabled="[[secondaryActions()[0].disabled]]"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[0].icon ]]"><div :class="[[ secondaryActions()[0].icon ]]"role="presentation"></div></oj-bind-if></span><span><oj-bind-text value="[[secondaryActions()[0].label]]"></oj-bind-text></span></oj-button><oj-bind-if test="[[ secondaryActions()[1] ]]"><oj-button :id="[[ secondaryActions()[1].id]]":disabled="[[secondaryActions()[1].disabled]]"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[1].icon ]]"><span :class="[[ secondaryActions()[1].icon ]]"role="presentation"></span></oj-bind-if></span><span><oj-bind-text value="[[secondaryActions()[1].label]]"></oj-bind-text></span></oj-button></oj-bind-if></oj-bind-if></oj-toolbar></oj-bind-if><oj-bind-if test="[[ showSecondaryActions() ]]"><oj-toolbar :aria-label="[[res.actions]]"chroming="outlined"class="oj-flex oj-sm-flex-wrap-nowrap oj-sp-header-welcome-banner-toolbar oj-md-margin-5x-top"><oj-bind-if test="[[ primaryAction() ]]"><oj-button :id="[[ primaryAction().id]]":disabled="[[primaryAction().disabled]]"chroming="callToAction"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[  primaryAction().icon ]]"><div :class="[[ primaryAction().icon ]]"role="presentation"></div></oj-bind-if></span><span><oj-bind-text value="[[primaryAction().label]]"></oj-bind-text></span></oj-button><div class="oj-sm-margin-0-horizontal oj-sm-margin-4x-bottom"></div><oj-menu-button :id="[[uid + \'_secondaryActions\']]"display="icons"><oj-bind-text value="[[ res().moreActions]]"></oj-bind-text><oj-menu :id="[[uid + \'_secondaryActionsMenu\']]"on-oj-menu-action="[[ actionHandler ]]"slot="menu"><oj-bind-for-each data="[[secondaryActions]]"><template><oj-option value="[[$current.data.id]]"disabled="[[$current.data.disabled]]":id="[[$current.data.id]]"><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if><oj-bind-if test="[[ !primaryAction() &amp;&amp; secondaryActions()[0] ]]"><oj-button :id="[[secondaryActions()[0].id]]":disabled="[[secondaryActions()[0].disabled]]"chroming="outlined"on-oj-action="[[actionHandler]]"><span slot="startIcon"><oj-bind-if test="[[ secondaryActions()[0].icon ]]"><div :class="[[ secondaryActions()[0].icon ]]"role="presentation"></div></oj-bind-if></span><span><oj-bind-text value="[[secondaryActions()[0].label]]"></oj-bind-text></span></oj-button><oj-menu-button :id="[[uid + \'_secondaryActions\']]"display="icons"><oj-bind-text value="[[ res().moreActions]]"></oj-bind-text><oj-menu :id="[[uid + \'_secondaryActionsMenu\']]"on-oj-menu-action="[[ actionHandler ]]"slot="menu"><oj-bind-for-each data="[[secondaryActions.slice(1)]]"><template><oj-option value="[[$current.data.id]]"disabled="[[$current.data.disabled]]":id="[[$current.data.id]]"><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-menu></oj-menu-button></oj-bind-if></oj-toolbar></oj-bind-if></oj-bind-if></oj-bind-if></div></div></body></html>'})),define("oj-sp/internal-resources/components/color-thief/quantize",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={map:function(e,t){const i={};return t?e.map((function(e,o){return i.index=o,t.call(i,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},max:function(e,t){return Math.max.apply(null,t?i.map(e,t):e)}},o=function(){function e(e,t,i){return(e<<10)+(t<<5)+i}function t(e){const t=[];let i=!1;return{push:function(e){t.push(e),i=!1},pop:function(){return i||(t.sort(e),i=!0),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)}}}function o(e,t,i,o,s,a,n){this.r1=e,this.r2=t,this.g1=i,this.g2=o,this.b1=s,this.b2=a,this.histo=n}function s(){this.vboxes=t((function(e,t){return i.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function a(t,o){if(!o.count())return;const s=o.r2-o.r1+1,a=o.g2-o.g1+1,n=o.b2-o.b1+1,r=i.max([s,a,n],null);if(1==o.count())return[o.copy()];let l=0;const d=[],c=[];let p,u,h,m,g;if(r==s)for(p=o.r1;p<=o.r2;p++){for(m=0,u=o.g1;u<=o.g2;u++)for(h=o.b1;h<=o.b2;h++)g=e(p,u,h),m+=t[g]||0;l+=m,d[p]=l}else if(r==a)for(p=o.g1;p<=o.g2;p++){for(m=0,u=o.r1;u<=o.r2;u++)for(h=o.b1;h<=o.b2;h++)g=e(u,p,h),m+=t[g]||0;l+=m,d[p]=l}else for(p=o.b1;p<=o.b2;p++){for(m=0,u=o.r1;u<=o.r2;u++)for(h=o.g1;h<=o.g2;h++)g=e(u,h,p),m+=t[g]||0;l+=m,d[p]=l}function y(e){const t=e+"1",i=e+"2";let s,a,n,r,u,h=0;for(p=o[t];p<=o[i];p++)if(d[p]>l/2){for(n=o.copy(),r=o.copy(),s=p-o[t],a=o[i]-p,u=s<=a?Math.min(o[i]-1,~~(p+a/2)):Math.max(o[t],~~(p-1-s/2));!d[u];)u++;for(h=c[u];!h&&d[u-1];)h=c[--u];return n[i]=u,r[t]=n[i]+1,[n,r]}}return d.forEach((function(e,t){c[t]=l-e})),y(r==s?"r":r==a?"g":"b")}return o.prototype={volume:function(e){const t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){const i=this,o=i.histo;if(!i._count_set||t){let t,s,a,n,r=0;for(t=i.r1;t<=i.r2;t++)for(s=i.g1;s<=i.g2;s++)for(a=i.b1;a<=i.b2;a++)n=e(t,s,a),r+=o[n]||0;i._count=r,i._count_set=!0}return i._count},copy:function(){return new o(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(t){const i=this,o=i.histo;if(!i._avg||t){let t=0;const s=8;let a,n,r,l,d,c=0,p=0,u=0;for(n=i.r1;n<=i.r2;n++)for(r=i.g1;r<=i.g2;r++)for(l=i.b1;l<=i.b2;l++)d=e(n,r,l),a=o[d]||0,t+=a,c+=a*(n+.5)*s,p+=a*(r+.5)*s,u+=a*(l+.5)*s;i._avg=t?[~~(c/t),~~(p/t),~~(u/t)]:[~~(s*(i.r1+i.r2+1)/2),~~(s*(i.g1+i.g2+1)/2),~~(s*(i.b1+i.b2+1)/2)]}return i._avg}},s.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))}},{quantize:function(n,r){if(!n.length||r<2||r>256)return!1;const l=function(t){const i=new Array(32768);let o,s,a,n;return t.forEach((function(t){s=t[0]>>3,a=t[1]>>3,n=t[2]>>3,o=e(s,a,n),i[o]=(i[o]||0)+1})),i}(n);l.forEach((function(){0}));let d=function(e,t){let i,s,a,n=1e6,r=0,l=1e6,d=0,c=1e6,p=0;return e.forEach((function(e){i=e[0]>>3,s=e[1]>>3,a=e[2]>>3,i<n?n=i:i>r&&(r=i),s<l?l=s:s>d&&(d=s),a<c?c=a:a>p&&(p=a)})),new o(n,r,l,d,c,p,t)}(n,l);const c=t((function(e,t){return i.naturalOrder(e.count(),t.count())}));function p(e,t){let i=1,o=0;for(;o<1e3;){if(d=e.pop(),!d.count()){e.push(d),o++;continue}const s=a(l,d),n=s[0],r=s[1];if(!n)return;if(e.push(n),r&&(e.push(r),i++),i>=t)return;if(o++>1e3)return}}c.push(d),p(c,.75*r);const u=t((function(e,t){return i.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));for(;c.size();)u.push(c.pop());p(u,r-u.size());const h=new s;for(;u.size();)h.push(u.pop());return h}}}();t.default=o.quantize})),define("oj-sp/internal-resources/components/color-thief/core",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={createPixelArray:function(e,t,i){const o=e,s=[];for(let e,a,n,r,l,d=0;d<t;d+=i)e=4*d,a=o[e+0],n=o[e+1],r=o[e+2],l=o[e+3],(void 0===l||l>=125)&&(a>250&&n>250&&r>250||s.push([a,n,r]));return s},validateOptions:function(e){let{colorCount:t,quality:i}=e;if(void 0!==t&&Number.isInteger(t)){if(1===t)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return(void 0===i||!Number.isInteger(i)||i<1)&&(i=10),{colorCount:t,quality:i}}}})),define("oj-sp/internal-resources/components/color-thief/color-thief",["require","exports","./quantize","./core"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.naturalWidth,this.height=this.canvas.height=e.naturalHeight,this.context.drawImage(e,0,0,this.width,this.height)};s.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};const a=function(){};a.prototype.getColor=function(e,t=10){return this.getPalette(e,5,t)[0]},a.prototype.getPalette=function(e,t,a){const n=o.default.validateOptions({colorCount:t,quality:a}),r=new s(e),l=r.getImageData(),d=r.width*r.height,c=o.default.createPixelArray(l.data,d,n.quality),p=(0,i.default)(c,n.colorCount);return p?p.palette():null},t.default=a})),define("oj-sp/common/color",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLightOrDark=t.fgColorFor=t.contrast=t.luminanace=t.cssForColor=t.toAlpha=void 0;t.toAlpha=(e,t)=>[e[0],e[1],e[2],null!=t?t:0];t.cssForColor=e=>4===e.length?`rgba(${e.join(", ")})`:`rgb(${e.join(", ")})`;t.luminanace=([e,t,i])=>{const o=[e,t,i].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*o[0]+.7152*o[1]+.0722*o[2]};t.contrast=(e,i)=>{const o=(0,t.luminanace)(e),s=(0,t.luminanace)(i);return(Math.max(o,s)+.05)/(Math.min(o,s)+.05)};t.fgColorFor=(e,i,o)=>{let s=i,a=o;const n=(0,t.contrast)(s,e),r=(0,t.contrast)(a,e);return Math.max(n,r)<4.5&&(s=[255,255,255],a=[0,0,0]),n>r?s:a};t.isLightOrDark=e=>Math.sqrt(e[0]*e[0]*.299+e[1]*e[1]*.587+e[2]*e[2]*.114)>127.5?"light":"dark"})),define("oj-sp/header-welcome-banner/header-welcome-banner-viewModel",["require","exports","oj-sp/common/EventDispatcher","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","oj-sp/internal-resources/components/color-thief/color-thief","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/common/color","ojs/ojbutton","ojs/ojknockout","ojs/ojmenu","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderBannerViewModel=void 0;var p;!function(e){e.Light="light",e.Dark="dark"}(p||(p={}));const u="background: #222; color: #bada55",h="--oj-sp-header-welcome-banner-background-color",m="--oj-sp-header-welcome-banner-background-color-darker-shade",g=/hcm-journey-headers-abstract-final-\d*.{1}png/;class y{constructor(e){var t;this.actionHandler=e=>{var t;const o=("ojAction"===e.type?e.target.id:null===(t=e.detail)||void 0===t?void 0:t.selectedValue).substring(this.uid.length+1),s="primaryAction"===o?i.EventDispatcher.PRIMARY_ACTION_EVENT_NAME:i.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,a="primaryAction"!==o?{actionId:o}:null;i.EventDispatcher.dispatch(s,this.composite,a)},this.inFlowBackHandler=e=>{i.EventDispatcher.dispatch("spInFlowBack",this.composite,void 0)},this.inFlowBackSwitchHandler=e=>{this.inFlowBackVisible(e)},this.refreshToolbar=async()=>{const e=this.composite.querySelector(".oj-sp-header-welcome-banner-container");if(e){await a.getContext(e).getBusyContext().whenReady();const t=this.composite.querySelector(".oj-sp-header-welcome-banner-toolbar");t&&t.refresh()}},this.initAction=(e,t)=>{if(!e)return null;let i=null;const o=t?"primaryAction":"secondaryAction";return e&&e.label&&(void 0===e.display||"off"!==e.display)&&(i={label:"",disabled:!1,id:`${this.uid}_${o}`},i.label=e.label,i.icon=e.icon,i.disabled=!(!e||"disabled"!==e.display)),i},this.processActions=(e,t)=>{const i=[];if(e&&!t){const t=this.initAction(e,!1);i.push(t)}t&&t.forEach(e=>{if("off"!==e.display){const t="disabled"===e.display,o={id:e.id?`${this.uid}_${e.id}`:this.uid+"_secondaryAction",label:e.label,disabled:t};i.push(o)}}),this.properties.secondaryAction&&t&&t.length>0&&n.warn("[oj-sp-header-welcome-banner] secondaryAction property is deprecated since 2401.0.0. Use secondaryActions property instead.");let o=i.length;this.primaryAction()||o--,o>=2?this.showSecondaryActions(!0):this.showSecondaryActions(!1),this.secondaryActions(i)},this.updateBackgroundColor=()=>{const e=this.getContainer();e&&(this.backgroundColor(this.properties.backgroundColor?this.properties.backgroundColor:y.BACKGROUND_COLOR_DEFAULT),y.BACKGROUND_COLORS[this.backgroundColor()]&&"full"!==this.properties.displayOptions.imageStretch&&(e.style.setProperty(h,y.BACKGROUND_COLORS[this.backgroundColor()].color),e.style.setProperty(m,y.BACKGROUND_COLORS[this.backgroundColor()].shade)))},this.updateBackgroundImage=async()=>{const e=this.getContainer();if(e){let t=null;await this.whenImageLoaded(),this.backgroundColor()===y.BACKGROUND_COLOR_AUTO||"full"===this.properties.displayOptions.imageStretch?(this.composite.classList.add("oj-sp-header-welcome-banner-background-auto"),t=this.computeBackgroundStylesFromImage(),this.checkForAbstractImage()):(this.composite.classList.remove("oj-sp-header-welcome-banner-background-auto"),t=y.BACKGROUND_COLORS[this.backgroundColor()],this.backgroundColorTheme("dark")),this.fgColor(t.fgColor),"none"!==this.properties.displayOptions.imageStretch?(this.isAbstractImage()||this.getScrimImage(),e.style.setProperty(h,this.isAbstractImage()?t.color:t.themeColor),e.style.setProperty(m,this.isAbstractImage()?t.color:t.themeColor),e.style.setProperty("--oj-sp-header-scrim-opacity","light"===t.themeMode?"lighten":"multiply")):(e.style.setProperty(h,t.color),e.style.setProperty(m,t.shade))}},this.checkForAbstractImage=()=>{const e=this.properties.illustrationForeground.split("/");this.isAbstractImage(g.test(e[e.length-1]))},this.computeBackgroundStylesFromImage=()=>{const e=this.getImage(),t=(new r.default).getColor(e),i=(0,c.fgColorFor)(t,y.COLOR_LIGHT,y.COLOR_DARK)===y.COLOR_LIGHT?p.Light:p.Dark,o=(0,c.isLightOrDark)(t);this.backgroundColorTheme(o);const s=`rgb(${t[0]}, ${t[1]}, ${t[2]})`;return{color:s,fgColor:i,shade:s,themeColor:"dark"===o?y.DARK_THEME:y.LIGHT_THEME,themeMode:o}},this.updateBackgroundTexture=async()=>{await this.whenImageLoaded();const e=this.getContainer();if(e&&this.properties.illustrationBackground){const t=`url(${this.properties.illustrationBackground})`;e.style.setProperty("--oj-sp-header-welcome-banner-texture-src",t)}},this.getContainer=()=>this.composite.querySelector(".oj-sp-header-welcome-banner-container"),this.getImage=()=>{if("off"===this.properties.displayOptions.mobileImage){const e=new Image;return e.src=this.properties.illustrationForeground,e}return"none"===this.properties.displayOptions.imageStretch?this.composite.querySelector(".oj-sp-header-welcome-banner-image"):"full"===this.properties.displayOptions.imageStretch?this.composite.querySelector(".oj-sp-header-welcome-banner-full-bleed-image"):void 0},this.getScrimImage=()=>{const e=this.getContainer();let t="resources/img/Co-branding-scrim-";switch(this.screenRange()){case"sm":t+="FullWidth-600-"+this.backgroundColorTheme()+"-20.png";break;case"md":t+="FixedWidth-1024-"+this.backgroundColorTheme()+".png";break;default:t+="FixedWidth-1440-"+this.backgroundColorTheme()+".png"}e&&e.style.setProperty("--oj-sp-header-welcome-banner-scrim-url",`url(${t})`),this.scrimImagePath(t)},this.updateScreenRange=()=>{this.composite.classList.remove("oj-sp-header-welcome-banner-sm"),this.composite.classList.remove("oj-sp-header-welcome-banner-md"),this.composite.classList.remove("oj-sp-header-welcome-banner-lg"),this.composite.classList.add("oj-sp-header-welcome-banner-"+this.screenRange())},this.whenImageLoaded=async()=>new Promise(e=>{const t=this.getImage();t?t.complete?e():t.addEventListener("load",e,{once:!0}):"off"===this.properties.displayOptions.mobileImage&&e()}),this.evaluateHeaderBackgroundMode=()=>{const e={bubbles:!0,detail:{globalSplitBackgroundPosition:0,mode:"light"}};return i.EventDispatcher.dispatch(i.EventDispatcher.OVERRIDE_THEME_CONFIG,this.composite,e.detail,e.bubbles),"light"},this.dynamicPaddingsHandler=()=>{this.composite&&this.properties.displayOptions&&("off"===this.properties.displayOptions.responsivePadding?this.composite.classList.add("oj-sp-dynamic-paddings-off"):this.composite.classList.remove("oj-sp-dynamic-paddings-off"))},this.properties=e.properties,this.slotCounts=e.slotCounts;const u=a.getContext(e.element).getBusyContext();this.busyResolve=u.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.res=o.observable(Object.assign(Object.assign({},s),this.getPropsTranslations(this.properties.translations))),this.scrimImagePath=o.observable(null),this.backgroundColor=o.observable(null),this.isAbstractImage=o.observable(!1),this.backgroundColorTheme=o.observable("dark"),this.inFlowBackVisible=o.observable(!!(null===(t=this.properties.displayOptions)||void 0===t?void 0:t.inFlowBack)),this.screenRange=l.createScreenRangeObservable(),this.screenRange.subscribe(e=>{this.updateScreenRange(),this.getScrimImage(),this.isSmallScreen(e===d.SCREEN_RANGE.SM)}),this.isSmallScreen=o.observable(this.screenRange()===d.SCREEN_RANGE.SM),this.updateScreenRange();const f=this.evaluateHeaderBackgroundMode();this.fgColor=o.observable("light"===f?p.Light:p.Dark),this.primaryAction=o.observable(null),this.secondaryActions=o.observableArray([]),this.showSecondaryActions=o.observable(!1),this.busyResolve()}activated(e){n.log(`%c CCA ${this.uid} activated`,u)}connected(e){n.log(`%c CCA ${this.uid} connected`,u)}bindingsApplied(e){n.log(`%c CCA ${this.uid} bindingsApplied`,u),this.primaryAction(this.initAction(this.properties.primaryAction,!0)),this.processActions(this.properties.secondaryAction,this.properties.secondaryActions),this.refreshToolbar().catch(e=>{n.error(e)}),this.updateBackgroundColor(),this.updateBackgroundImage().catch(e=>{n.error(e)}),this.updateBackgroundTexture().catch(e=>{n.error(e)}),this.dynamicPaddingsHandler()}async propertyChanged(e){if(n.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,u),"translations"===e.property&&this.res(Object.assign(Object.assign({},s),e.value)),"backgroundColor"===e.property&&this.updateBackgroundColor(),"illustrationForeground"===e.property&&this.updateBackgroundImage().catch(e=>{n.error(e)}),"displayOptions"===e.property&&(this.updateBackgroundImage().catch(e=>{n.error(e)}),this.inFlowBackSwitchHandler(e.value.inFlowBack),this.dynamicPaddingsHandler()),"illustrationBackground"===e.property&&this.updateBackgroundTexture().catch(e=>{n.error(e)}),"primaryAction"===e.property){this.primaryAction(this.initAction(e.value,!0));let t=this.secondaryActions().length;this.primaryAction()||t--,t>=2?this.showSecondaryActions(!0):this.showSecondaryActions(!1),this.refreshToolbar().catch(e=>{n.error(e)})}if("secondaryAction"===e.property){if(this.properties.secondaryActions)return;this.processActions(e.value,this.properties.secondaryActions),this.refreshToolbar().catch(e=>{n.error(e)})}"secondaryActions"===e.property&&this.processActions(this.properties.secondaryAction,e.value)}disconnected(e){n.log(`%c CCA ${this.uid} disconnectd`,u)}getPropsTranslations(e){const t={},i=Object.keys(this.properties.translations);return i.length>0&&i.forEach(i=>{void 0!==e[i]&&null!==e[i]&&(t[i]=e[i])}),t}}y.BACKGROUND_COLOR_DEFAULT="dark-ocean",y.BACKGROUND_COLOR_AUTO="auto",y.COLOR_DARK=[0,0,0],y.COLOR_LIGHT=[255,255,255],y.DARK_THEME="rgb(49, 45, 42)",y.LIGHT_THEME="rgb(251, 249, 248)",y.BACKGROUND_COLORS={"dark-lilac":{color:"rgb(var(--oj-sp-rw-lilac-rgb-120))",shade:"rgb(var(--oj-sp-rw-lilac-rgb-130))"},"dark-ocean":{color:"rgb(var(--oj-sp-rw-blue-rgb-100))",shade:"rgb(var(--oj-sp-rw-blue-rgb-110))"},"dark-pebble":{color:"rgb(var(--oj-sp-rw-pebble-rgb-110))",shade:"rgb(var(--oj-sp-rw-pebble-rgb-120))"},"dark-pine":{color:"rgb(var(--oj-sp-rw-pine-rgb-100))",shade:"rgb(var(--oj-sp-rw-pine-rgb-110))"},"dark-plum":{color:"rgb(var(--oj-sp-rw-plum-rgb-110))",shade:"rgb(var(--oj-sp-rw-plum-rgb-120))"},"dark-rose":{color:"rgb(var(--oj-sp-rw-rose-rgb-120))",shade:"rgb(var(--oj-sp-rw-rose-rgb-130))"},"dark-sienna":{color:"rgb(var(--oj-sp-rw-sienna-rgb-100))",shade:"rgb(var(--oj-sp-rw-sienna-rgb-110))"},"dark-slate":{color:"rgb(var(--oj-sp-rw-slate-rgb-110))",shade:"rgb(var(--oj-sp-rw-slate-rgb-120))"},"dark-teal":{color:"rgb(var(--oj-sp-rw-teal-rgb-110))",shade:"rgb(var(--oj-sp-rw-teal-rgb-120))"},"dominant-color":{color:"#227E9E",shade:"#0E7295"}},t.HeaderBannerViewModel=y})),define("css!oj-sp/header-welcome-banner/header-welcome-banner-styles",[],(function(){})),define("oj-sp/header-welcome-banner/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./header-welcome-banner-view.html","./header-welcome-banner-viewModel","css!./header-welcome-banner-styles","css!oj-sp/common/common-style.css","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-header-welcome-banner",{metadata:JSON.parse(o),view:s,viewModel:a.HeaderBannerViewModel})})),define("oj-sp/hierarchy-card/hierarchy-card-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPEN_OPTIONS=void 0,t.OPEN_OPTIONS={initialFocus:"firstItem",position:{my:{horizontal:"end"},at:{horizontal:"end"}}}})),define("oj-sp/hierarchy-card/components/ChildViews",["require","exports","preact","preact/hooks","ojs/ojlogger","ojs/ojarraydataprovider","oj-sp/common-util/common-util","ojs/ojconverter-datetime"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildViews=void 0;t.ChildViews=e=>{const t=(0,o.useRef)(null);(0,o.useEffect)(()=>{const{current:e}=t;e&&e.refresh()},[e.views]);const l=(0,o.useMemo)(()=>{var t;let i,o=e.selectedChildView,n=!0;if((null===(t=e.views)||void 0===t?void 0:t.length)>0){e.views.length>8&&s.warn("Only 8 child views are allowed, the rest will be ignored");const t=e.views.slice(0,8);i=new a(t,{keyAttributes:"id"}),-1===t.findIndex(t=>t.id===e.selectedChildView)&&(o=t[0].id)}else i=new a([],{keyAttributes:"id"}),n=!1,o="";return{hasChildViews:n,childViewTabArrayDP:i,selectedChildView:o}},[e.views,e.selectedChildView]),d=(0,o.useMemo)(()=>{var t;const i=e.timeZone;if(!i)return void s.log("%c CCA Provide property time zone to display timestamp.");const o=`E ${null!==(t=(0,n.getTimeFormatPattern)())&&void 0!==t?t:"h:mm a"} (z)`;return new r.IntlDateTimeConverter({pattern:o,timeZone:i}).format((new Date).toISOString())},[e.timeZone]),c=t=>{var i;(null==e?void 0:e.views)&&(null===(i=e.onSpChildViewChange)||void 0===i||i.call(e,{id:t.detail.value}))},p=e=>(0,i.h)("li",null,(0,i.h)("a",{href:"#"},e.data.label,(0,i.h)("div",{class:"oj-badge oj-badge-subtle oj-sm-margin-2x-start",title:-1===e.data.count?"â¦":e.data.count},-1===e.data.count?"â¦":e.data.count)));return(()=>{let o="oj-flex oj-sm-flex-wrap-nowrap oj-sm-padding-4x-start oj-sm-padding-4x-end oj-lg-padding-6x-horizontal oj-sp-hierarchy-card-hide-in-animation ";return o+=l.hasChildViews||d?"oj-sm-padding-x-top oj-md-padding-x-top oj-lg-padding-10x-top":"oj-sm-padding-5x-top oj-sm-padding-5x-top oj-sm-padding-5x-top",(0,i.h)("div",null,e.showProgressiveBars&&(0,i.h)("div",{class:"oj-flex oj-sm-margin-3x-top oj-sm-padding-6x-start"},(0,i.h)("div",{class:"oj-flex-item oj-sm-5 oj-md-2 oj-lg-1 oj-sm-margin-3x-end oj-md-margin-3x-end"},(0,i.h)("div",{class:"oj-sp-hierarchy-card-progress-bar"})),(0,i.h)("div",{class:"oj-flex-item oj-sm-5 oj-md-2 oj-lg-1 oj-sm-margin-3x-end oj-md-margin-3x-end"},(0,i.h)("div",{class:"oj-sp-hierarchy-card-progress-bar"})),(0,i.h)("div",{class:"oj-flex-item oj-sm-2 oj-md-2 oj-lg-1 oj-sm-margin-3x-end oj-md-margin-3x-end oj-sp-hierarchy-card-hide-for-small-screen oj-sp-hierarchy-card-show"},(0,i.h)("div",{class:"oj-sp-hierarchy-card-progress-bar"})),(0,i.h)("div",{class:"oj-flex-item oj-sm-2 oj-md-2 oj-lg-1 oj-sm-margin-3x-end oj-md-margin-3x-end oj-sp-hierarchy-card-hide-for-small-screen oj-sp-hierarchy-card-show"},(0,i.h)("div",{class:"oj-sp-hierarchy-card-progress-bar"}))),(0,i.h)("div",{class:o},l.hasChildViews&&(0,i.h)("oj-conveyor-belt",{arrowVisibility:"visible",class:"oj-flex-item oj-sp-hierarchy-card-conveyor"},!e.showProgressiveBars&&(0,i.h)("oj-tab-bar",{edge:"top",layout:"condense",selection:l.selectedChildView,onselectionChanged:c,data:l.childViewTabArrayDP,ref:t},(0,i.h)("template",{slot:"itemTemplate",render:p}))),e.isLargeScreen&&d&&(0,i.h)("div",{class:"oj-sp-hierarchy-card-timestamp oj-flex oj-sm-align-items-center oj-sm-flex-wrap-nowrap oj-flex-item oj-sm-flex-initial oj-sm-padding-6x-start oj-sm-padding-2x-end oj-sm-padding-1x-bottom oj-helper-margin-start-auto oj-flex-item oj-text-color-secondary"},d)))})()}})),define("oj-sp/hierarchy-card/components/LeadingVisual",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeadingVisual=void 0;t.LeadingVisual=e=>{const t=()=>{var t,i;return(null===(t=e.avatar)||void 0===t?void 0:t.src)||(null===(i=e.avatar)||void 0===i?void 0:i.initials)};return(()=>{var o,s,a;const n="oj-flex"+(()=>{let i="";return t()&&e.avatar.src&&!e.avatar.initials&&(i=" oj-sp-hierarchy-card-avatar"),i})(),r=(null===(o=e.avatar)||void 0===o?void 0:o.src)?`url('${e.avatar.src}')`:void 0;return(0,i.h)("div",{class:"oj-sm-flex-wrap-nowrap"},t()&&(0,i.h)("div",{id:e.uid+"_avatarContainer1",class:e.divClass},(0,i.h)("oj-avatar",{id:e.uid+"_avatar1",class:n,size:e.avatarSize,initials:e.avatar?e.avatar.initials:"",src:(null===(s=e.avatar)||void 0===s?void 0:s.initials)?e.avatar.src:"",style:{"--oj-sp-hierarchy-card-avatar-src":r}})),(null===(a=e.image)||void 0===a?void 0:a.src)&&!t()&&(0,i.h)("div",{id:e.uid+"_imageContainer1",class:e.divClass},(0,i.h)("img",{id:e.uid+"_image1",src:e.image.src,class:e.imageClass,alt:e.altText})))})()}})),define("oj-sp/hierarchy-card/hierarchy-card-animation-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationUtils=void 0;t.AnimationUtils=class{constructor(e){this.resizeImageDuringAnimation=e=>{if(!this.largeScreen)return;const t=this.containerElement.querySelector(`#${this.uid}_avatar1`),i=this.containerElement.querySelector(`#${this.uid}_avatarContainer1`),o=this.containerElement.querySelector(`#${this.uid}_image1`),s=this.containerElement.querySelector(`#${this.uid}_imageContainer1`);e?o?(o.animate([{height:"46px",width:"46px"},{height:"98px",width:"98px"}],{duration:this.aniDur,fill:"forwards",iterations:1}),s.animate([{transform:"translate(0px, 0px)"},{transform:"rtl"===document.dir?"translate(-8px, 8px)":"translate(8px, 8px)"}],{duration:this.aniDur,fill:"forwards",iterations:1})):t&&i&&(t.animate([{transform:"scale(1.0)"},{transform:"rtl"===document.dir?"translate(-4px, -8px) scale(2.13)":"translate(4px, -8px) scale(2.13)"}],{duration:this.aniDur,fill:"forwards",iterations:1}),i.animate([{transform:"translate(0px, 0px)",height:"46px",width:"62px",offset:0},{transform:"rtl"===document.dir?"translate(-16px, 18px)":"translate(16px, 18px)",height:"72px",width:"92px",offset:.49},{transform:"rtl"===document.dir?"translate(-24px, 23px)":"translate(24px, 23px)",height:"72px",width:"92px",offset:.51},{transform:"rtl"===document.dir?"translate(-60px, 46px)":"translate(60px, 46px)",height:"98px",width:"122px",offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1})):o?(o.animate([{height:"98px",width:"98px"},{height:"46px",width:"46px"}],{duration:this.aniDur,fill:"forwards",iterations:1}),s.animate([{transform:"translate(0px, 0px)"},{transform:"rtl"===document.dir?"translate(2px, -2px)":"translate(-2px, -2px)"}],{duration:this.aniDur,fill:"forwards",iterations:1})):t&&i&&(t.animate([{transform:"rtl"===document.dir?"translate(12px, -24px) scale(1.0)":"translate(-12px, -24px) scale(1.0)",offset:0},{transform:"translate(-4px, 0px) scale(0.47)",offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1}),i.animate([{transform:"rtl"===document.dir?"translate(-12px, 24px)":"translate(12px, 24px)",height:"98px",width:"122px",offset:0},{transform:"rtl"===document.dir?"translate(24px, -24px)":"translate(-24px, -24px)",height:"46px",width:"122px",offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1}))},this.fadeOutAndInDuringAnimation=e=>{const t=this.containerElement.getElementsByClassName("oj-sp-hierarchy-card-hide-in-animation");for(let e=0;e<t.length;e++){const i=t[e];i&&i.animate([{opacity:1,offset:0},{opacity:0,offset:.49},{opacity:0,offset:.51},{opacity:1,offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1})}const i=this.containerElement.querySelector(`#${this.uid}_title_subtitle_container1`);this.largeScreen&&(e?i.animate([{transform:"translate(0px, 0px)",offset:0},{transform:(document.dir,"translate(0px, -4px)"),offset:.49},{transform:"rtl"===document.dir?"translate(-5px, 6px)":"translate(5px, 6px)",offset:.51},{transform:"rtl"===document.dir?"translate(-6px, 12px)":"translate(6px, 12px)",offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1}):i.animate([{transform:"rtl"===document.dir?"translate(2px, 0px)":"translate(-2px, 0px)",offset:0},{transform:"rtl"===document.dir?"translate(24px, 0px)":"translate(-24px, 0px)",offset:.49},{transform:"rtl"===document.dir?"translate(24px, 0px)":"translate(-24px, 0px)",offset:.51},{transform:"rtl"===document.dir?"translate(60px, -6px)":"translate(-60px, -6px)",offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1}))},this.uid=e}setAnimationConfig(e,t,i){this.aniDur=e,this.largeScreen=t,this.containerElement=i}focusToParent(e,t){const i={avatarImageContainerClass:"oj-md-padding-6x-horizontal oj-md-padding-6x-top oj-sm-padding-4x-horizontal oj-sm-padding-4x-top",avatarSize:this.largeScreen?"lg":"xs",cardContainerClass:"oj-sp-hierarchy-card-container",imageClass:"oj-sp-hierarchy-card-image",titleSubtitleContainerClass:""};return this.containerElement.animate([{transform:"translate(0px, 0px)",width:e.width+"px",height:e.height+"px"},{height:t.height+"px",transform:"translate("+("rtl"===document.dir?t.x+t.width-e.x-e.width:t.x-e.x)+"px, "+(t.y-e.y)+"px)",width:t.width+"px"}],{duration:this.aniDur,fill:"forwards",iterations:1}),this.resizeImageDuringAnimation(!1),this.fadeOutAndInDuringAnimation(!1),i}focusToChild(e,t){const i={avatarImageContainerClass:"oj-md-padding-6x-horizontal oj-md-padding-6x-top oj-sm-padding-4x-horizontal oj-sm-padding-4x-top",avatarSize:this.largeScreen?"lg":"xs",cardContainerClass:"oj-sp-hierarchy-card-container",imageClass:"oj-sp-hierarchy-card-image",titleSubtitleContainerClass:""};return this.containerElement.animate([{transform:"translate(0px, 0px)",width:e.width+"px",height:e.height+"px"},{height:t.height+"px",transform:"translate("+("rtl"===document.dir?t.x+t.width-e.x-e.width:t.x-e.x)+"px, "+(t.y-e.y)+"px)",width:t.width+"px"}],{duration:this.aniDur,fill:"forwards",iterations:1}),this.resizeImageDuringAnimation(!1),this.fadeOutAndInDuringAnimation(!1),i}childToFocus(e,t){return this.containerElement.animate([{transform:"translate(0px, 0px)",width:e.width+"px",height:e.height+"px"},{height:t.height+"px",transform:"translate("+("rtl"===document.dir?t.x+t.width-e.x-e.width:t.x-e.x)+"px, "+(t.y-e.y)+"px)",width:t.width+"px"}],{duration:this.aniDur,fill:"forwards",iterations:1}),this.resizeImageDuringAnimation(!0),this.fadeOutAndInDuringAnimation(!0),{avatarImageContainerClass:"oj-sm-padding-4x-horizontal oj-sm-padding-4x-top",avatarSize:"xs",cardContainerClass:"oj-sp-hierarchy-card-container-small",imageClass:"oj-sp-hierarchy-card-image-small",titleSubtitleContainerClass:" oj-sp-hierarchy-card-title-small"}}parentToFocus(e,t){return this.containerElement.animate([{transform:"translate(0px, 0px)",width:e.width+"px",height:e.height+"px"},{height:t.height+"px",transform:"translate("+("rtl"===document.dir?t.x+t.width-e.x-e.width:t.x-e.x)+"px, "+(t.y-e.y)+"px)",width:t.width+"px"}],{duration:this.aniDur,fill:"forwards",iterations:1}),this.resizeImageDuringAnimation(!0),this.fadeOutAndInDuringAnimation(!0),{avatarImageContainerClass:"oj-sm-padding-4x-horizontal oj-sm-padding-4x-top",avatarSize:"xs",cardContainerClass:"oj-sp-hierarchy-card-container-small",imageClass:"oj-sp-hierarchy-card-image-small",titleSubtitleContainerClass:" oj-sp-hierarchy-card-title-small"}}fadeOutToBeParent(){this.containerElement.animate([{transform:"translateY(0px)",opacity:1,offset:0},{transform:"translateY(0px)",opacity:0,offset:.99},{transform:"translateY(-2000px)",opacity:0,offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1})}fadeOutToBeChild(){this.containerElement.animate([{transform:"translateY(0px)",opacity:1,offset:0},{transform:"translateY(0px)",opacity:0,offset:.99},{transform:"translateY(2000px)",opacity:0,offset:1}],{duration:this.aniDur,fill:"forwards",iterations:1})}}})),define("oj-sp/hierarchy-card/components/StatusIconTooltip",["require","exports","preact","preact/compat"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusIconTooltip=void 0,t.StatusIconTooltip=(0,o.memo)(({id:e,iconVisualTooltip:t})=>(0,i.h)("div",null,(0,i.h)("oj-popup",{id:e+"_popup",class:"oj-sp-hierarchy-card-icon-visual-tooltip"},t)))})),define("css!oj-sp/hierarchy-card/hierarchy-card-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/hierarchy-card/hierarchy-card",["require","exports","ojs/ojvcomponent","preact","./hierarchy-card-types","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","./components/ChildViews","./components/LeadingVisual","./hierarchy-card-animation-utils","ojs/ojcontext","ojs/ojresponsiveutils","ojs/ojresponsiveknockoututils","./components/StatusIconTooltip","css!./hierarchy-card-styles","ojs/ojbutton","ojs/ojconveyorbelt","ojs/ojavatar","ojs/ojnavigationlist","ojs/ojpopup","ojs/ojarraydataprovider","ojs/ojtimezonedata"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h){"use strict";var m,g;Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyCard=void 0,function(e){e.ENTER="Enter",e.SPACE=" "}(g||(g={}));let y=m=class extends o.Component{constructor(e){var t;super(e),this.containerElementRef=(0,o.createRef)(),this.calcSecondaryActions=e=>{const t=[];if(e)for(let i=0;i<e.length;i++){const o=e[i];if(o)if(o.id&&o.label){if(void 0===o.display||"off"!==o.display){if(6===t.length){n.warn("Only 6 secondary actions are allowed, the rest will be ignored");break}t.push(o)}}else n.error("Invalid secondary action - id and label are all required - id: "+o.id+" label: "+o.label)}this.allActions=t},this.navigationActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpNavigationAction)||void 0===i||i.call(t),e.preventDefault()},this.titleFocusHandler=e=>{var t;if("focus"!==this.props.type){const e=null===(t=this.containerElementRef)||void 0===t?void 0:t.current;e&&e.classList.add("oj-sp-hierarchy-card-container-small-ring")}},this.titleBlurHandler=e=>{var t;if("focus"!==this.props.type){const e=null===(t=this.containerElementRef)||void 0===t?void 0:t.current;e&&e.classList.remove("oj-sp-hierarchy-card-container-small-ring")}},this.iconClickHandler=e=>{e.preventDefault(),e.stopPropagation()},this.iconKeyClickHandler=e=>{const{key:t}=e;t!==g.ENTER&&t!==g.SPACE||(e.preventDefault(),e.stopPropagation())},this.openIconVisualTooltip=e=>{this.popupTransitioning||(this.popupTransitioning=!0,"mouseenter"===e.type&&(this.lastMouseEnterTime=performance.now()),this.makeBusyResolve("Web Component opening status icon tooltip"),setTimeout(()=>{var t;if("mouseenter"!==e.type||!this.lastMouseLeaveTime||this.lastMouseLeaveTime<this.lastMouseEnterTime||this.lastMouseLeaveTime>this.lastMouseEnterTime+m.SHOW_TOOLTIP_MIN_STAY_TIME){const i=null===(t=this.containerElementRef.current)||void 0===t?void 0:t.querySelector("#"+this.uid+"_popup");i&&!i.isOpen()&&(i.removeAttribute("initial-focus"),i.open(e.target))}this.busyResolve(),this.popupTransitioning=!1},m.OPEN_TOOLTIP_DELAY))},this.closeIconVisualTooltip=()=>{this.popupTransitioning||(this.popupTransitioning=!0,this.lastMouseLeaveTime=performance.now(),this.makeBusyResolve("Web Component closing status icon tooltip"),setTimeout(()=>{const e=document.querySelector("#"+this.uid+"_popup");e&&e.isOpen()&&e.close(),this.busyResolve(),this.popupTransitioning=!1},m.CLOSE_TOOLTIP_DELAY))},this.handleIconVisualTooltip=e=>{if(e.key===g.ENTER||e.key===g.SPACE){const t=document.querySelector("#"+this.uid+"_popup");t&&t.isOpen()?(t.close(),t.removeAttribute("initial-focus")):(t.setAttribute("initial-focus","popup"),t.open(e.target))}},this.cardClickHandler=e=>{this.cardActionHandler(),e.preventDefault(),e.stopPropagation()},this.cardKeyDownHandler=e=>{const{key:t}=e;"focus"===this.props.type||t!==g.ENTER&&t!==g.SPACE||(e.preventDefault(),e.stopPropagation())},this.cardKeyUpHandler=e=>{const{key:t}=e;"focus"===this.props.type||t!==g.ENTER&&t!==g.SPACE||(this.cardActionHandler(),e.preventDefault(),e.stopPropagation())},this.cardActionHandler=()=>{var e,t,i;if(!(null===(e=this.base)||void 0===e?void 0:e.parentElement.classList.contains("oj-sp-hierarchy-card-in-animation"))&&"focus"!==(null===(t=this.props)||void 0===t?void 0:t.type)){null===(i=this.base)||void 0===i||i.parentElement.classList.add("oj-sp-hierarchy-card-to-be-focus");const e={context:this.props.context,template:this.props.template,type:this.props.type};this.props.onSpFocusAction(e)}},this.handleChildViewChanged=e=>{var t,i;this.selectedView=e.id,null===(i=(t=this.props).onSpChildViewChange)||void 0===i||i.call(t,e)},this.secondaryActionHandler=e=>{var t,i;const o=e.detail.selectedValue;null===(i=(t=this.props).onSpSecondaryAction)||void 0===i||i.call(t,{actionId:o}),e.preventDefault(),e.stopPropagation()},this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.res=Object.assign({},a),this.allActions=[],this.popupTransitioning=!1,this.inAnimationSettings={},this.animationUtils=new d.AnimationUtils(this.uid),this.selectedView="",this.screenRange=u.createScreenRangeObservable(),this.screenRange.subscribe(e=>{const t=p.compare(this.screenRange(),p.SCREEN_RANGE.MD)>0;this.state.isLargeScreen!==t&&this.setState({isLargeScreen:t})}),this.state={isLargeScreen:p.compare(this.screenRange(),p.SCREEN_RANGE.MD)>0,isProgressBarPresent:!1,hideAdditionalInfoCompact:!1}}shouldComponentUpdate(e,t,i){return e.selectedChildView!==this.selectedView||(this.selectedView="",!1)}componentDidMount(){const e=getComputedStyle(this.base);"1"===e.getPropertyValue("--oj-sp-hierarchy-card-progressive-bars")&&this.setState({isProgressBarPresent:!0});"1"===e.getPropertyValue("--oj-sp-hierarchy-card-hide-additional-info-compact")&&this.setState({hideAdditionalInfoCompact:!0})}focus(e){var t;const i=null===(t=this.containerElementRef)||void 0===t?void 0:t.current;i&&i.focus()}playAnimation(e,t,i,o){var s;const a=null===(s=this.containerElementRef)||void 0===s?void 0:s.current;if(!a)return Promise.resolve();const n=this.props&&e>100?e:100;if(this.animationUtils.setAnimationConfig(n,this.state.isLargeScreen,a),"focusToParent"===t&&i&&o)this.inAnimationSettings=this.animationUtils.focusToParent(i,o),setTimeout(()=>{this.changeCardType("parent")},.5*n);else if("focusToChild"===t&&i&&o)this.inAnimationSettings=this.animationUtils.focusToChild(i,o),setTimeout(()=>{this.changeCardType("child")},.5*n);else if("childToFocus"===t&&i&&o)this.inAnimationSettings=this.animationUtils.childToFocus(i,o),setTimeout(()=>{this.changeCardType("focus")},.5*n);else if("parentToFocus"===t&&i&&o)this.inAnimationSettings=this.animationUtils.parentToFocus(i,o),setTimeout(()=>{this.changeCardType("focus")},.5*n);else if("fadeOutToBeParent"===t)this.animationUtils.fadeOutToBeParent();else if("fadeOutToBeChild"===t)this.animationUtils.fadeOutToBeChild();else if("hideAdditionalInfoCompact"===t){const e=this.getAdditionalInfoCompactSlot();e&&(e.style.display="none",this.setState({hideAdditionalInfoCompact:!0}))}else if("showAdditionalInfoCompact"===t){const e=this.getAdditionalInfoCompactSlot();e&&(e.style.display="block",this.setState({hideAdditionalInfoCompact:!1}))}return new Promise(e=>{setTimeout(e,n)})}getTitleElement(){var e;return null===(e=this.base)||void 0===e?void 0:e.querySelector("#"+this.uid+"_title1")}getAdditionalInfoCompactSlot(){var e;return null===(e=this.base)||void 0===e?void 0:e.querySelector(".oj-sp-hierarchy-card-compact-slot")}changeCardType(e){var t,i;null===(t=this.props)||void 0===t||t.onTypeChanged(e);const o=null===(i=this.containerElementRef)||void 0===i?void 0:i.current,s=this.getTitleElement();o&&s&&("focus"===e?o.classList.replace("oj-sp-hierarchy-card-container-small","oj-sp-hierarchy-card-container"):o.classList.replace("oj-sp-hierarchy-card-container","oj-sp-hierarchy-card-container-small"))}render(e,t){var s;this.calcSecondaryActions(e.secondaryActions);const{isProgressBarPresent:a,hideAdditionalInfoCompact:n}=this.state;return(0,o.h)(i.Root,{id:this.uid,onClick:this.cardClickHandler,onKeyUp:this.cardKeyUpHandler,onKeyDown:this.cardKeyDownHandler},(0,o.h)("div",{ref:this.containerElementRef,id:this.uid+"_container1",class:"oj-panel oj-sm-padding-0 "+(this.inAnimationSettings.cardContainerClass?this.inAnimationSettings.cardContainerClass:("focus"===e.type?"oj-sp-hierarchy-card-container":"oj-sp-hierarchy-card-container-small oj-sp-hierarchy-card-"+e.relationship)+("child"===e.type?" oj-sp-hierarchy-card-container-child":"")),role:"group","aria-label":"focus"===e.type?e.cardTitle:"","data-oj-clickthrough":"disabled",tabIndex:-1,"data-oj-context":!0},(0,o.h)("div",{class:this.getHeaderRegionClass(e,n)},this.renderAvatar(e,t),(0,o.h)("div",{id:this.uid+"_title_subtitle_container1",class:"oj-sp-hierarchy-card-shrink oj-flex-item oj-sp-hierarchy-card-hide-in-animation"+(this.inAnimationSettings.titleSubtitleContainerClass?this.inAnimationSettings.titleSubtitleContainerClass:"")},this.renderTitle(e,t),e.cardSubtitle&&this.renderSubtitle(e,t),"focus"!==e.type&&e.tertiaryText&&this.renderTertiary(e,t),"focus"===e.type&&(0,o.h)("div",{class:"oj-sp-hierarchy-card-detail"},!a&&this.renderAdditionalInfoSlot(e,t),a&&this.renderAdditionalInfoProgressBars())),(0,o.h)("div",{class:"oj-flex-item oj-sm-flex-initial oj-sp-hierarchy-card-hide-in-animation"},"focus"===e.type&&this.allActions.length>0&&!a&&this.renderActions(e),"child"===e.type&&"flag"===(null===(s=e.iconVisual)||void 0===s?void 0:s.icon)&&this.hasIconVisualTooltipSlot(e)&&!this.hasCompactSlot(e)&&this.renderStatusIcon(e))),"focus"!==e.type&&this.hasCompactSlot(e)&&!n&&this.renderAdditionalInfoCompactSlot(e),"focus"===e.type&&this.renderChildView(e,t,a),(0,o.h)(h.StatusIconTooltip,{id:this.uid,iconVisualTooltip:e.iconVisualTooltip})))}hasCompactSlot(e){return(0,o.toChildArray)(e.additionalInfoCompact).length>0}hasIconVisualTooltipSlot(e){return(0,o.toChildArray)(e.iconVisualTooltip).length>0}getHeaderRegionClass(e,t){const i=" oj-sm-padding-3x-vertical oj-lg-padding-5x-vertical";let o="oj-sp-hierarchy-card-header oj-flex oj-sm-flex-wrap-nowrap ";return this.inAnimationSettings.avatarImageContainerClass?o+=this.inAnimationSettings.avatarImageContainerClass:"focus"===e.type?o+="oj-sm-padding-4x-horizontal oj-sm-padding-4x-top oj-lg-padding-6x-start oj-lg-padding-4x-end oj-lg-padding-6x-top ":(o+="oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal oj-sm-align-items-center ",this.hasCompactSlot(e)?o+=t?i:" oj-sm-padding-3x-top oj-lg-padding-5x-top oj-sm-padding-2x-bottom":o+=i+" oj-sp-hierarchy-card-small-header-height"),o}hasLink(e){return"on"===e.navigationAction}renderAvatar(e,t){const i="oj-flex-item oj-sm-flex-initial "+("focus"===e.type?"oj-sm-padding-4x-end oj-lg-padding-6x-end":"oj-sm-padding-4x-end"),s=this.inAnimationSettings.avatarSize?this.inAnimationSettings.avatarSize:t.isLargeScreen&&"focus"===e.type?"lg":"xs",a=this.inAnimationSettings.imageClass?this.inAnimationSettings.imageClass:"focus"===e.type?"oj-sp-hierarchy-card-image":"oj-sp-hierarchy-card-image-small";return(0,o.h)(l.LeadingVisual,{divClass:i,uid:this.uid,avatarSize:s,imageClass:a,image:e.image,avatar:e.avatar,altText:e.cardTitle})}renderTitle(e,t){var i;const s="oj-sp-hierarchy-card-break-word"+(t.isLargeScreen?" oj-typography-heading-xs":" oj-typography-body-lg oj-typography-bold")+(e.cardSubtitle?" oj-line-clamp-1":" oj-line-clamp-2");let a;return a="focus"===e.type?this.hasLink(e)?(0,o.h)("a",{id:this.uid+"_title1",class:"oj-sp-hierarchy-card-title-link "+s,href:"#",onClick:this.navigationActionHandler,title:e.cardTitle},e.cardTitle):(0,o.h)("div",{id:this.uid+"_title1",class:s,title:e.cardTitle},e.cardTitle):this.hasCompactSlot(e)?(0,o.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap"},(0,o.h)("div",{class:"oj-flex-item"},this.renderParentChildTitle(e)),(0,o.h)("div",{class:"oj-flex-item oj-sm-flex-initial"},"child"===e.type&&"flag"===(null===(i=e.iconVisual)||void 0===i?void 0:i.icon)&&this.hasIconVisualTooltipSlot(e)&&this.renderStatusIcon(e))):this.renderParentChildTitle(e),a}renderParentChildTitle(e){return(0,o.h)("div",{id:this.uid+"_title1",class:"oj-sp-hierarchy-card-break-word oj-sp-hierarchy-card-title-ring oj-line-clamp-1 oj-typography-body-md oj-typography-bold",title:e.cardTitle,role:"link",tabIndex:0,onFocus:this.titleFocusHandler,onBlur:this.titleBlurHandler},e.cardTitle)}renderSubtitle(e,t){let i="oj-sp-hierarchy-card-break-word oj-sp-hierarchy-card-subtitle oj-line-clamp-1";return"focus"!==e.type&&(i+=" oj-sp-hierarchy-card-hide-in-animation",t.isLargeScreen||(i+=" oj-typography-body-sm")),(0,o.h)("div",{id:this.uid+"_subtitle1",class:i,title:e.cardSubtitle},e.cardSubtitle)}renderTertiary(e,t){let i=t.isLargeScreen?"oj-typography-body-sm":"oj-typography-body-xs";return i+=e.tertiaryTextEmphasized?" oj-text-color-primary oj-typography-bold":" oj-text-color-secondary",i+=" oj-sp-hierarchy-card-subtitle oj-sp-hierarchy-card-break-word oj-line-clamp-1 oj-sp-hierarchy-card-hide-in-animation",(0,o.h)("div",{id:this.uid+"_tertiary1",class:i,title:e.tertiaryText},e.tertiaryText)}renderStatusIcon(e){return(0,o.h)("div",{id:this.uid+"_icon-visual-container",class:"oj-sp-hierarchy-card-icon-visual-container oj-sm-margin-4x-start",tabIndex:0,onClick:this.iconClickHandler,onKeyDown:this.handleIconVisualTooltip,onKeyUp:this.iconKeyClickHandler,onMouseEnter:this.openIconVisualTooltip,onMouseLeave:this.closeIconVisualTooltip,"data-oj-clickthrough":"disabled","aria-label":this.res.itemEmphasisMessage,role:"button","aria-haspopup":"dialog"},(0,o.h)("span",{class:"oj-ux-ico-flagged-s "+("danger"===e.iconVisual.status?"oj-icon-color-danger":"oj-icon-color-primary")}))}renderAdditionalInfoSlot(e,t){var i,s,a;return(0,o.h)("div",{class:"oj-flex oj-sm-padding-3x-top oj-sp-hierarchy-card-hide-in-animation"+((null===(i=e.image)||void 0===i?void 0:i.src)||(null===(s=e.avatar)||void 0===s?void 0:s.src)||(null===(a=e.avatar)||void 0===a?void 0:a.initials)?" oj-sp-hierarchy-card-detail-container":"")},e.additionalInfo)}renderAdditionalInfoCompactSlot(e){return(0,o.h)("div",{class:"oj-flex oj-sp-hierarchy-card-compact-slot oj-sp-hierarchy-card-hide-in-animation oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal oj-sm-margin-4x-bottom oj-lg-margin-6x-bottom"},e.additionalInfoCompact)}renderAdditionalInfoProgressBars(){return(0,o.h)("div",{class:"oj-sp-hierarchy-card-detail oj-sm-margin-3x-top oj-sm-margin-3x-bottom oj-lg-margin-4x-top oj-lg-margin-4x-bottom oj-lg-padding-7x-bottom"},(0,o.h)("div",{class:"oj-flex"},(0,o.h)("div",{class:"oj-flex-item oj-sm-8 oj-md-3 oj-sm-margin-3x-end oj-md-margin-10x-end"},(0,o.h)("div",{class:"oj-sp-hierarchy-card-progress-bar oj-sm-margin-3x-bottom oj-sm-6"}),(0,o.h)("div",{class:"oj-sp-hierarchy-card-progress-bar"})),(0,o.h)("div",{class:"oj-flex-item oj-sm-5 oj-md-3 oj-sp-hierarchy-card-hide-for-small-screen oj-sp-hierarchy-card-hide-for-medium-screen"},(0,o.h)("div",{class:"oj-sp-hierarchy-card-progress-bar oj-sm-margin-3x-bottom oj-sm-6"}),(0,o.h)("div",{class:"oj-sp-hierarchy-card-progress-bar"}))))}renderChildView(e,t,i){return(0,o.h)("div",{class:"oj-sp-hierarchy-card-tabbar-container"},(0,o.h)(r.ChildViews,{isLargeScreen:t.isLargeScreen,selectedChildView:e.selectedChildView,showProgressiveBars:i,timeZone:e.timeZone,views:e.childViews,onSpChildViewChange:this.handleChildViewChanged}))}renderActions(e){return(0,o.h)("div",{class:"oj-sm-padding-4x-start oj-lg-padding-12x-start oj-lg-padding-2x-top"},(0,o.h)("oj-menu-button",{id:this.uid+"_more1",chroming:"borderless",display:"icons",class:"oj-button-sm"},this.res.actions,(0,o.h)("oj-menu",{id:this.uid+"_more-actions-menu",slot:"menu",onojMenuAction:this.secondaryActionHandler,"aria-label":this.res.actions,openOptions:s.OPEN_OPTIONS},this.allActions.map(e=>(0,o.h)("oj-option",{key:e.id,id:this.uid+"_"+e.id,value:e.id,disabled:"disabled"===e.display},e.label)))))}makeBusyResolve(e){const t=c.getContext(this.base).getBusyContext();this.busyResolve=t.addBusyState({description:e})}};y.defaultProps={navigationAction:"off",relationship:"normal",tertiaryTextEmphasized:!1,iconVisual:{status:"neutral",icon:"none"}},y.OPEN_TOOLTIP_DELAY=500,y.CLOSE_TOOLTIP_DELAY=500,y.SHOW_TOOLTIP_MIN_STAY_TIME=250,y._metadata={properties:{type:{type:"string",writeback:!0},template:{type:"string"},context:{type:"any"},selectedChildView:{type:"string"},cardTitle:{type:"string"},cardSubtitle:{type:"string"},tertiaryText:{type:"string"},tertiaryTextEmphasized:{type:"boolean"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},image:{type:"object",properties:{src:{type:"string"}}},navigationAction:{type:"string",enumValues:["on","off"]},secondaryActions:{type:"Array<object>"},childViews:{type:"Array<object>"},timeZone:{type:"string"},relationship:{type:"string",enumValues:["normal","dotted"]},iconVisual:{type:"object",properties:{status:{type:"string",enumValues:["danger","neutral"]},icon:{type:"string",enumValues:["none","flag"]}}}},slots:{additionalInfo:{},additionalInfoCompact:{},iconVisualTooltip:{}},events:{spNavigationAction:{},spSecondaryAction:{},spFocusAction:{bubbles:!0},spChildViewChange:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["type"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{focus:{},playAnimation:{}}},y=m=__decorate([(0,i.customElement)("oj-sp-hierarchy-card"),__metadata("design:paramtypes",[Object])],y),t.HierarchyCard=y})),define("oj-sp/hierarchy-card/loader",["require","exports","./hierarchy-card"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyCard=void 0,Object.defineProperty(t,"HierarchyCard",{enumerable:!0,get:function(){return i.HierarchyCard}})})),define("css!oj-sp/hierarchy-card-info/hierarchy-card-info-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/hierarchy-card-info/hierarchy-card-info",["require","exports","ojs/ojvcomponent","preact","css!./hierarchy-card-info-styles"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyCardInfo=void 0;const s="oj-typography-subheading-sm oj-line-clamp-1 oj-sm-margin-4x-bottom oj-sp-hierarchy-card-info-title";let a=class extends o.Component{constructor(e){var t;super(e),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)()}render(){const{additionalInfo:e,cardTitle:t,children:i,navigationAction:a,onSpNavigationAction:n}=this.props;return(0,o.h)("div",{class:"oj-panel oj-sm-padding-0","data-oj-context":!0},(0,o.h)("div",{className:"oj-sm-padding-4x oj-lg-padding-6x oj-bg-body"},"on"===a?(0,o.h)("a",{href:"#",className:s,title:t,onClick:this.linkActionHandler.bind(this)},t):(0,o.h)("div",{className:s,title:t},t),(0,o.h)("div",null,e)),i&&(0,o.h)("div",{className:"oj-sm-padding-4x oj-lg-padding-6x"},i))}linkActionHandler(e){var t,i;null===(i=(t=this.props).onSpNavigationAction)||void 0===i||i.call(t),e.preventDefault()}};a.defaultProps={navigationAction:"off"},a._metadata={slots:{additionalInfo:{},"":{}},properties:{cardTitle:{type:"string"},navigationAction:{type:"string",enumValues:["on","off"]}},events:{spNavigationAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,i.customElement)("oj-sp-hierarchy-card-info"),__metadata("design:paramtypes",[Object])],a),t.HierarchyCardInfo=a})),define("oj-sp/hierarchy-card-info/loader",["require","exports","./hierarchy-card-info"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyCardInfo=void 0,Object.defineProperty(t,"HierarchyCardInfo",{enumerable:!0,get:function(){return i.HierarchyCardInfo}})})),define("text!oj-sp/hierarchy-viewer/component.json",[],(function(){return'{"name":"hierarchy-viewer","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"displayName":"Hierarchy Viewer","description":"Hierarchy Viewer is an component that helps organize and present a set of data in a hierarchical manner.","properties":{"parentItemTemplate":{"displayName":"Parent Template","description":"Parent template name.","type":"string","required":true},"parentItemData":{"displayName":"Parent Data","description":"The data provider to retrieve parent item data.","type":"oj.DataProvider","required":true,"propertyGroup":"data"},"parentHierarchyItemData":{"displayName":"Parent Hierarchy Item Data","description":"The data provider to retrieve parent hierarchy item data. The list should be sorted such that the parent furthest from the current item is first in the list, while the one closest to the current item is last.  The parent included in the parentItemData should be included in this list but not the currentItemData which the viewer will insert for you.","type":"oj.DataProvider","propertyGroup":"data"},"currentItemTemplate":{"displayName":"Focus Template","description":"Focus template name.","type":"string","required":true},"currentItemData":{"displayName":"Current Data","description":"The data provider to retrieve currently focused item data.","type":"oj.DataProvider","required":true,"propertyGroup":"data"},"currentItemValue":{"displayName":"Focus Data Value","description":"The object retrieved from the focus card data.","type":"object","writeback":true,"readOnly":true},"currentChildViews":{"displayName":"Child Views","description":"Child view configuration for the focus card, specifies up to eight child views.","type":"Array<object>","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"View id","description":"A unique ID by which to identify this view when selected."},"label":{"type":"string","displayName":"View label","description":"View display label.","translatable":true},"count":{"type":"number","displayName":"View child count","description":"Number of children in that view. If count is -1, it means count calculation is pending and the count badge will show \'...\'."},"template":{"type":"string","displayName":"Child card template","description":"The template to use to display the child card."},"data":{"type":"oj.DataProvider","displayName":"Child data provider","description":"The data provider to retrieve child card data."}}}}},"selectedChildView":{"displayName":"Selected Child View","description":"The key of the child view that should be selected.","type":"string","writeback":true}},"methods":{},"events":{"spChangeFocusAction":{"displayName":"Focus change event","description":"Dispatched when a parent/child card in the hierarchy becomes new focus card.","cancelable":false,"detail":{"template":{"type":"string","description":"The template associated with this card."},"context":{"type":"any","description":"The context object associated with this card."}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-ethernet.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Hierarchy%20Viewer&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrahierarchyviewer.html"},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"general":{"customizers":[{"propertyName":"parentItemTemplate"},{"propertyName":"currentItemTemplate"},{"propertyName":"currentChildViews","displayName":"Child Views","singleName":"View","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{},"template":{}},"drill":{"layout":"childviews"}}]},"childviews":{"customizers":[{"propertyName":"currentChildViews.id","displayName":"ID"},{"propertyName":"currentChildViews.label","displayName":"Label"},{"propertyName":"currentChildViews.template","displayName":"Template"},{"propertyName":"currentChildViews.data","displayName":"Data"},{"propertyName":"currentChildViews.count","displayName":"Count"}]}}}}},"icon":{"iconPath":"extension/catalog/images/ico-ethernet.svg"}}'})),define("text!oj-sp/hierarchy-viewer/hierarchy-viewer-view.html",[],(function(){return'<html><head></head><body><div data-oj-context=""class="oj-sm-padding-4x-horizontal oj-sp-template-wrapper oj-sp-hierarchy-wrap"><div class="oj-sp-hierarchy-viewer-wrapper"><div class="oj-sp-hierarchy-viewer-parent-hierarchy-top-connection-container oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><div class="oj-sp-top-horizontal-divider oj-sm-margin-6x-top"></div><div class="oj-sp-hierarchy-viewer-vert-connection"></div></div><oj-bind-if test="[[showTopTConnection()]]"><div :id="[[uid +\'_rootContainer\']]":class="[[\'oj-sm-width-full oj-flex oj-sm-justify-content-center oj-sm-align-items-center oj-sm-flex-direction-column\']]"><oj-bind-if test="[[showRootCard()]]"><div :id="[[uid +\'_rootCard\']]":class="[[\'oj-sp-level-count-container oj-sm-padding-4x-horizontal oj-sm-padding-2x-vertical \']]"><div class="oj-flex oj-sm-flex-wrap-nowrap"><div class="oj-flex-item oj-sm-align-items-center oj-sp-hierarchy-view-root-card-shrink"><div class="oj-text-color-primary oj-typography-semi-bold oj-line-clamp-1 oj-sp-hierarchy-view-root-card-text":title="[[(getTranslatedText(rootCount()))]]"><oj-bind-text value="[[ (getTranslatedText(rootCount()))]]"></oj-bind-text></div></div></div></div></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[showTopTConnection() &amp;&amp; showRootCard()]]"><div class="oj-sp-hierarchy-viewer-parent-connection-container oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><div class="oj-sp-hierarchy-viewer-vert-connection"></div></div></oj-bind-if><div :id="[[uid +\'_container1\']]"class="oj-sp-hierarchy-viewer-container"><div class="oj-sp-hierarchy-viewer-main-subview-container"><div :id="[[uid +\'_parentContainer\']]"class="oj-sp-hierarchy-viewer-top-section oj-sm-width-full oj-flex oj-sm-justify-content-center"><div :class="[[\'oj-sp-hierarchy-viewer-parent-container\' + (parentListVisible() ? \' oj-sp-hierarchy-viewer-scrollable-top-list\' : (!hasParent()  ? \' oj-sp-hierarchy-viewer-on-top-most-card\' : \' \'))]]"><div class="oj-sp-hierarchy-viewer-parent-scrollable"><div class="oj-flex oj-sm-flex-direction-column"><oj-bind-if test="[[parentListVisible()]]"><div :class="[[\'oj-flex oj-sm-flex-direction-column\']]"><oj-bind-if test="[[parentHierarchyADP]]"><oj-bind-for-each data="[[parentHierarchyADP]]"><template><oj-bind-if test="[[$current.index < parentHierarchyArray.length - (hasOneParent()? 2 : 1)]]"><div class="oj-sm-margin-3x-bottom"><oj-bind-template-slot name="[[$properties.parentItemTemplate]]"data="{{ {type: \'parent\', template: $properties.parentItemTemplate, data: $current.data} }}"></oj-bind-template-slot></div><div on-click="[[ preventClickOnCard]]"class="oj-sp-hierarchy-viewer-card-mask"></div></oj-bind-if></template></oj-bind-for-each></oj-bind-if></div></oj-bind-if></div></div><oj-bind-if test="[[!parentListVisible() || hasOneParent()]]"><oj-conveyor-belt :id="[[uid +\'_conveyorBelt1\']]":class="[[\'oj-sp-hierarchy-viewer-parent-conveyer\' + (parentListVisible() ? \' oj-sp-hierarchy-viewer-parent-conveyer-scrollable\' : \'\')]]"arrow-visibility="visible"content-parent=".oj-sp-hierarchy-view-parent-belt"><div :class="[[\'oj-sp-hierarchy-view-parent-belt \' + (hasParent() ? \' oj-sm-padding-3x-horizontal\' : \'\') ]]"><oj-bind-if test="[[parentADP]]"><oj-bind-for-each data="[[parentADP]]"><template><oj-bind-template-slot name="[[$properties.parentItemTemplate]]"data="{{ {type: \'parent\', template: $properties.parentItemTemplate, data: $current.data} }}"></oj-bind-template-slot><oj-bind-if test="[[setHasParent(true)]]"></oj-bind-if></template><template slot="noData"><oj-bind-if test="[[setHasParent(false)]]"></oj-bind-if></template></oj-bind-for-each></oj-bind-if></div></oj-conveyor-belt></oj-bind-if></div></div><oj-bind-if test="[[hasParent()]]"><div class="oj-sp-hierarchy-viewer-parent-connection-container oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><oj-bind-if test="[[!parentListVisible()]]"><div class="oj-sp-hierarchy-viewer-vert-connection"></div></oj-bind-if></div></oj-bind-if><div class="oj-sp-hierarchy-viewer-sticky-filler"></div><div :id="[[uid +\'_focusContainer\']]"class="oj-sp-hierarchy-viewer-focus-header"><div :class="[[\'oj-sp-hierarchy-viewer-lens-container\' + (parentListVisible() ? \' oj-sp-hierarchy-viewer-lens-container-in-scrollable-mode\' : \' oj-sp-hierarchy-viewer-lens-container-main\')]]"><div class="oj-sp-hierarchy-viewer-lens-scrollable"><div class="oj-flex oj-sm-flex-direction-column"><oj-bind-if test="[[parentListVisible()]]"><div :class="[[\'oj-flex oj-sm-flex-direction-column\']]"><oj-bind-if test="[[parentHierarchyADP]]"><oj-bind-for-each data="[[parentHierarchyADP]]"><template><oj-bind-if test="[[$current.index > 0 &amp;&amp; $current.index < (parentHierarchyArray.length)]]"><div class="oj-sp-hierarchy-viewer-skeleton-card"><oj-bind-template-slot name="[[$properties.currentItemTemplate]]"data="{{ {type: \'focus\', template: $properties.currentItemTemplate, data: $current.data} }}"></oj-bind-template-slot></div></oj-bind-if></template></oj-bind-for-each></oj-bind-if></div></oj-bind-if><div data-oj-context="":class="[[\'oj-sp-hierarchy-viewer-focus-card\' + (parentListVisible() ? \' oj-sp-hierarchy-viewer-focus-card-in-lens\' : \'\')]]"><oj-bind-if test="[[focusADP]]"><oj-bind-for-each data="[[focusADP]]"><template><oj-bind-template-slot name="[[$properties.currentItemTemplate]]"data="{{ {type: \'focus\', selectedChildView: selectedChildView, template: $properties.currentItemTemplate, childviews: currentChildViews, data: $current.data} }}"></oj-bind-template-slot><oj-sp-hierarchy-viewer-ci on-initialized="[[ setFocusCard ]]"></oj-sp-hierarchy-viewer-ci><oj-bind-if test="[[ setCurrentItem($current.data) ]]"></oj-bind-if></template></oj-bind-for-each></oj-bind-if></div></div></div></div></div><div :id="[[uid +\'_childviewContainer\']]"class="oj-sp-hierarchy-viewer-bottom-view-container"><oj-bind-if test="[[parentListVisible()]]"><div :class="[[\'oj-sp-hierarchy-viewer-bottom-parent-container oj-flex oj-sm-justify-content-center\']]"><div class="oj-sp-hierarchy-viewer-bottom-parent-scrollable-container oj-sp-hierarchy-viewer-bottom-parent-scrollable-container-width"><div class="oj-sp-hierarchy-viewer-bottom-parent-scrollable"><div class="oj-flex oj-sm-flex-direction-column"><oj-bind-if test="[[parentHierarchyADP]]"><oj-bind-for-each data="[[parentHierarchyADP]]"><template><oj-bind-if test="[[$current.index > 1 &amp;&amp; $current.index < (parentHierarchyArray.length)]]"><div class="oj-sm-margin-3x-bottom"><oj-bind-template-slot name="[[$properties.parentItemTemplate]]"data="{{ {type: \'parent\', template: $properties.parentItemTemplate, data: $current.data} }}"></oj-bind-template-slot></div><div on-click="[[ preventClickOnCard]]"class="oj-sp-hierarchy-viewer-card-mask"></div></oj-bind-if></template></oj-bind-for-each></oj-bind-if></div></div></div><div class="oj-sp-hierarchy-viewer-bottom-parent-scrim"></div></div></oj-bind-if><div class="oj-sp-hierarchy-viewer-child-view-container"><oj-bind-if test="[[!parentListVisible()]]"><oj-bind-if test="[[ hasChildren() &amp;&amp; childViewData() ]]"><div class="oj-sp-hierarchy-viewer-children-connection-container oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-sm-align-items-center"><div class="oj-sp-hierarchy-viewer-vert-connection"></div></div></oj-bind-if><oj-bind-if test="[[ childViewData() &amp;&amp; showSwitcher ]]"><oj-switcher value="[[childViewId]]"><oj-bind-for-each data="[[currentListViews]]"><template data-oj-as="childView"><div :id="[[uid + \'_\' + $current.data.id + \'_subtree\']]":slot="[[$current.data.id]]"><oj-bind-if test="[[ childViewId() === childView.data.id || viewedChildViews.has(childView.data.id) ]]"><oj-list-view data="[[ $current.data.data]]"scroll-policy="loadMoreOnScroll"scroll-policy-options.fetch-size="[[ childViewFetchSize ]]"scroll-policy-options.scroller="[[document.documentElement]]":aria-label="[[ childViewLabel ]]"display="{{childrenLayout}}"class="oj-sp-hierarchy-viewer-children oj-sp-hierarchy-viewer-child-list-view-gutters"style="overflow:auto;scroll-behavior:auto;scrollbar-width:none"on-oj-animate-start="[[handleChildrenAnimateStart]]":id="[[uid + \'_\' + $current.data.id + \'_listview\']]"on-oj-item-action="[[handleChildCardAction]]"><template slot="noData"><oj-bind-if test="[[setHasChildren(false)]]"></oj-bind-if><div class="oj-sp-list-section-no-data"></div></template><template slot="itemTemplate"><oj-bind-if test="[[setHasChildren(true)]]"></oj-bind-if><li :class="[[\'oj-sp-hierarchy-viewer-child-container \' + childViewListClass()]]"><oj-bind-template-slot name="[[ childView.data.template ]]"data="{{ {type: \'child\', template: childView.data.template, data: $current.data, index: $current.index } }}"></oj-bind-template-slot><oj-sp-hierarchy-viewer-scttp></oj-sp-hierarchy-viewer-scttp></li></template></oj-list-view></oj-bind-if></div></template></oj-bind-for-each></oj-switcher></oj-bind-if></oj-bind-if></div></div></div></div><div class="oj-sp-hierarchy-viewer-animation-container"></div></div></div></body></html>'})),define("oj-sp/hierarchy-viewer/utils/collapse-details-handler",["require","exports","ojs/ojcontext"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyViewerCollapseDetailsHandler=void 0;const o="oj-sp-hierarchy-card-detail-collapsed";t.HierarchyViewerCollapseDetailsHandler=class{constructor(e){this.composite=e,this.liftingBar=0,this.lastScrollTop=0,this.transitioning=!1,this.transitionDuration=0,this.scrollHandler=()=>{const e=this.filler.getBoundingClientRect().y;if(e>0)return void this.show();if(!this.setDetailElements())return;const t=window.pageYOffset;t>this.lastScrollTop?this.collapsed?this.liftingBar=e:Math.abs(e-this.liftingBar)>8&&this.hide():this.collapsed?Math.abs(e-this.liftingBar)>8&&this.show():this.liftingBar=e,this.lastScrollTop=t},document.addEventListener("scroll",this.scrollHandler)}get collapsed(){return this.detailsContainer.classList.contains(o)}get filler(){return this.composite.querySelector(".oj-sp-hierarchy-viewer-sticky-filler")}reset(){this.detailsContainer=null,this.filler.style.height="0"}dispose(){document.removeEventListener("scroll",this.scrollHandler)}show(){if(!this.setDetailElements()||this.transitioning||!this.collapsed)return;this.addBusyContext(),this.transitioning=!0;const e=this.details.scrollHeight;this.detailsContainer.style.visibility="visible",this.detailsContainer.style.height="0",this.filler.style.height=e+"px",this.detailsContainer.style.height=e+"px",this.filler.style.height="0",this.detailsContainer.classList.remove(o),setTimeout(()=>{this.detailsContainer&&(this.detailsContainer.style.height=""),this.transitioning=!1,this.busyResolve()},this.transitionDuration)}hide(){if(!this.setDetailElements()||this.transitioning||this.collapsed)return;this.addBusyContext(),this.transitioning=!0;const e=this.details.scrollHeight;this.detailsContainer.style.height=e+"px",this.filler.style.height="0",this.reflow(),this.detailsContainer.style.height="0",this.filler.style.height=e+"px",this.detailsContainer.classList.add(o),setTimeout(()=>{this.detailsContainer.style.visibility="hidden",this.transitioning=!1,this.busyResolve()},this.transitionDuration)}addBusyContext(){const e=i.getContext(this.composite).getBusyContext();this.busyResolve=e.addBusyState({description:"Hierarchy Viewer animation"})}reflow(){return this.detailsContainer.offsetHeight}setDetailElements(){return!!this.detailsContainer||(this.detailsContainer=this.composite.querySelector(".oj-sp-hierarchy-card-detail"),!!this.detailsContainer&&(this.details=this.composite.querySelector(".oj-sp-hierarchy-card-detail-container"),this.transitionDuration=1e3*Number.parseFloat(getComputedStyle(this.detailsContainer).transitionDuration),!0))}}}));const CLASS_MAP={"OJ-SP-HIERARCHY-CARD-INFO":"oj-sp-hierarchy-card-info","OJ-SP-HIERARCHY-CARD":"oj-sp-hierarchy-card"};class SetChildTypeToParent extends HTMLElement{connectedCallback(){var e;const t=CLASS_MAP[null===(e=this.previousElementSibling)||void 0===e?void 0:e.tagName];t&&this.parentElement.classList.add(t)}}customElements.define("oj-sp-hierarchy-viewer-scttp",SetChildTypeToParent),define("oj-sp/hierarchy-viewer/utils/set-child-to-parent-type",(function(){}));class ComponentInitialized extends HTMLElement{connectedCallback(){const e=this.previousElementSibling,t=this.dispatchEvent.bind(this);e&&t(new CustomEvent("initialized",{detail:{target:e}}))}}customElements.define("oj-sp-hierarchy-viewer-ci",ComponentInitialized),define("oj-sp/hierarchy-viewer/utils/component-initialized",(function(){})),define("oj-sp/hierarchy-viewer/hierarchy-viewer-viewModel",["require","exports","ojs/ojarraydataprovider","oj-sp/common-util/common-util","knockout","oj-sp/common/EventDispatcher","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojanimation","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojtranslation","./utils/collapse-details-handler","oj-sp/common/touch-velocity","oj-sp/common/snapping","oj-sp/common/positionUtility","oj-sp/common-util/common-util","ojs/ojarraydataprovider","ojs/ojbutton","ojs/ojconveyorbelt","ojs/ojknockout","ojs/ojlistview","ojs/ojswitcher","ojs/ojdataprovider","./utils/set-child-to-parent-type","./utils/component-initialized"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HierarchyViewerViewModel=void 0;t.HierarchyViewerViewModel=class{constructor(e){this.childCardAnimationDelay=0,this.toFocusFocusedCard=!1,this.viewedChildViews=new Set,this.isAnimationInProgress=()=>{const e=this.getTempContainerForAnimation();if(e){const t=this.getCards(e);if(t)return t.length>0}return!1},this.focusDataProviderChanged=e=>{this.showSwitcher(!0),this.generateFocusADP()},this.parentHierarchyDataProviderChanged=e=>{this.generateParentHierarchyADP()},this.parentDataProviderChanged=e=>{this.generateParentADP()},this.generateParentHierarchyADP=async()=>{let e=void 0;if(this.properties.parentHierarchyItemData){const t={size:1e3};e=await(0,o.dataProviderToArray)(this.properties.parentHierarchyItemData,t),this.rootCount(e.length-1);const s=this.composite.querySelector("#"+this.uid+"_focusContainer");await l.getContext(s).getBusyContext().whenReady(),e.push(Object.assign({},this.properties.currentItemValue)),this.parentHierarchyArray=e;const a=[];this.parentHierarchyArray.forEach((function(e,t){a.push(t)})),this.parentHierarchyADP(new i(this.parentHierarchyArray,{keys:a})),this.setRootLevels(),await this.refreshConveyorBelt()}else this.rootCount(-1)},this.generateParentADP=async()=>{let e=void 0;if(this.properties.parentItemData){const t={size:1e3};for(let e=0;e<this.parentDataFetchPromises.length;e++)this.parentDataFetchPromises[e]=Promise.resolve();const s=(0,o.dataProviderToArray)(this.properties.parentItemData,t);this.parentDataFetchPromises.push(s);const a=this.parentDataFetchPromises.length-1;if(e=await s,a<this.parentDataFetchPromises.length-1)return;const n=e;this.hasOneParent(1===e.length);const r=[];n.forEach((function(e,t){r.push(t)})),this.parentADP(new i(n,{keys:r}))}},this.generateFocusADP=async()=>{if(!this.properties.currentItemTemplate)return;let e=void 0;if(this.properties.currentItemData){const t={size:1e3},s=(0,o.dataProviderToArray)(this.properties.currentItemData,t);if(this.focusDataFetchPromises.push(s),e=await s,1!==(null==e?void 0:e.length))return;const a=e,n=[];a.forEach((function(e,t){n.push(t)})),this.focusADP(new i(a,{keys:n}))}},this.updateCurrentItemValueInParentHierarchyADP=e=>{if(this.parentHierarchyArray&&this.parentHierarchyArray.length>0){this.parentHierarchyArray.splice(-1),this.parentHierarchyArray.push(e);const t=[];this.parentHierarchyArray.forEach((function(e,i){t.push(i)})),this.parentHierarchyADP(new i(this.parentHierarchyArray,{keys:t}))}},this.handleChildrenAnimateStart=e=>{if("cardEntrance"===e.detail.action){null==e.detail.element.previousElementSibling&&(this.childCardAnimationDelay=0),e.preventDefault();const t={delay:this.childCardAnimationDelay+"ms",offsetY:"150px",duration:"300ms"},i=r.slideIn(e.detail.element,t),o={delay:this.childCardAnimationDelay+"ms",duration:"150ms"},s=r.fadeIn(e.detail.element,o);Promise.all([i,s]).then(e.detail.endCallback,e.detail.endCallback),this.childCardAnimationDelay+=16}},this.getCollapseDetailsHandler=()=>this.collapseDetailsHandler,this.dispatchChangeFocusAction=(e,t,i)=>{if("parent"===e||"child"===e){const e={template:i,context:t};a.EventDispatcher.dispatch(a.EventDispatcher.CHANGE_FOCUS_ACTION_EVENT_NAME,this.composite,e)}},this.hideHierarchyViewer=()=>{const e=this.composite.querySelector(".oj-sp-hierarchy-viewer-container");e&&(e.style.display="none")},this.showHierarchyViewer=()=>{const e=this.composite.querySelector(".oj-sp-hierarchy-viewer-container");e&&(e.style.display="")},this.adjustRectPositionVertically=(e,t)=>0===t?e:new DOMRect(e.x,e.y+t,e.width,e.height),this.handleChildCardAction=async e=>{if("click"!==e.detail.originalEvent.type){const t=this.properties.currentChildViews.find(e=>e.id===this.selectedChildView()).template;0===this.getChildViewContainer(this.selectedChildView()).getElementsByTagName("oj-sp-hierarchy-card-info").length&&await this.navigateCards("child",e.detail.context.data,t)}},this.handleFocusAction=async e=>{e&&e.detail&&await this.navigateCards(e.detail.type,e.detail.context,e.detail.template)},this.navigateCards=async(e,t,i)=>{this.viewedChildViews.clear();const o=l.getContext(this.composite).getBusyContext();this.busyResolve=o.addBusyState({description:"Hierarchy Viewer animation"});const s=[];let a;const n=[],r=[],d=this.getCards(this.composite);for(let e=0;e<d.length;e++){const t=d[e];if(t&&t.context&&t.type)if("parent"===t.type)s.push({boundingRect:t.getBoundingClientRect(),comp:t});else if("child"===t.type){const e=t.getBoundingClientRect();e.width>0&&e.height>0&&n.push({boundingRect:e,comp:t})}else"focus"===t.type&&(a={boundingRect:t.getBoundingClientRect(),comp:t})}if(!a||0===s.length&&0===n.length)return void this.busyResolve();let c;const p=a.boundingRect;let u;s.length>0?(c=s[0].boundingRect,u=0===n.length?new DOMRect(p.x,p.y+p.height+12,c.width,c.height):n[0].boundingRect):(u=n[0].boundingRect,c=new DOMRect(p.x+.5*(p.width-u.width),p.y-u.height-16,u.width,u.height));let h=Math.min(window.scrollY,c.height+32);if("parent"===e){this.rootCount(this.rootCount()-1);for(let e=0;e<s.length;e++)s[e].comp.classList.contains("oj-sp-hierarchy-card-to-be-focus")?(this.moveCardToTempContainer(s[e]),r.push(s[e].comp.playAnimation(200,"parentToFocus",s[e].boundingRect,this.adjustRectPositionVertically(p,h)))):r.push(s[e].comp.playAnimation(20,"fadeOutToBeParent"));this.moveCardToTempContainer(a),r.push(a.comp.playAnimation(200,"focusToChild",p,this.adjustRectPositionVertically(u,h)));for(let e=0;e<n.length;e++)this.moveCardToTempContainer(n[e]),r.push(n[e].comp.playAnimation(20,"fadeOutToBeChild"))}else if("child"===e){this.rootCount(this.rootCount()+1),0===s.length&&(h=c.height+32);for(let e=0;e<s.length;e++)this.moveCardToTempContainer(s[e]),r.push(s[e].comp.playAnimation(20,"fadeOutToBeParent"));this.moveCardToTempContainer(a),r.push(a.comp.playAnimation(200,"focusToParent",p,this.adjustRectPositionVertically(c,h)));for(let e=0;e<n.length;e++)this.moveCardToTempContainer(n[e]),n[e].comp.classList.contains("oj-sp-hierarchy-card-to-be-focus")?r.push(n[e].comp.playAnimation(200,"childToFocus",n[e].boundingRect,this.adjustRectPositionVertically(p,h))):r.push(n[e].comp.playAnimation(20,"fadeOutToBeChild"))}setTimeout(()=>{this.showSwitcher(!1),this.dispatchChangeFocusAction(e,t,i),this.hideHierarchyViewer(),this.hasParent(!1),this.hasChildren(!1)},20),await Promise.all(r).then(async()=>{await Promise.all(this.focusDataFetchPromises.concat(this.parentDataFetchPromises)).then(async()=>{this.busyResolve(),this.showHierarchyViewer(),this.handleFocusActionCleanup(),this.parentHierarchyArray&&0!==this.parentHierarchyArray.length||await this.refreshConveyorBelt()})})},this.navigateFromScrollableView=async(e,t,i)=>{this.viewedChildViews.clear(),setTimeout(async()=>{await Promise.all(this.focusDataFetchPromises.concat(this.parentDataFetchPromises)).then(async()=>{this.parentListVisible(!1),this.setHideAdditionalInfoCompact(!1),this.handleFocusActionCleanup(),this.hasChildren(!1),this.hideListviewProgressiveLoadingCards(),this.showHierarchyViewer()})},100),this.dispatchChangeFocusAction(e,t,i)},this.setFocusCard=async e=>{const{target:t}=e.detail;this.focusedCard=t,await this.focusFocusedCard()},this.handleChangeCurrentChildView=e=>{var t;e&&e.detail&&this.properties.currentChildViews&&(e.stopPropagation(),e.detail.id!==this.selectedChildView()&&(null===(t=this.properties.currentChildViews)||void 0===t?void 0:t.length)&&(this.properties.selectedChildView=e.detail.id))},this.setCurrentChildViews=(e=[])=>{this.currentChildViews(e.map(e=>({id:e.id,label:e.label,count:e.count})));const t=e.map(e=>({id:e.id,label:e.label,data:e.data,template:e.template})),i=this.currentListViews();if(t.length!==i.length)this.currentListViews(t);else for(let e=0;e<t.length;e++)if(t[e].id!==i[e].id||t[e].label!==i[e].label||t[e].template!==i[e].template||t[e].data!==i[e].data){this.currentListViews(t);break}},this.setupChildViews=e=>{var t;const i=null!==(t=this.properties.currentChildViews)&&void 0!==t?t:[];if(i.length){const t=e||i[0].id,o=i.find(e=>e.id===t);o&&(this.childViewTemplate(o.template),this.childViewData(o.data),this.childViewLabel(u.applyParameters(this.res.childCardList,{0:o.label})),this.childViewId(t),this.viewedChildViews.add(t))}else this.childViewTemplate(""),this.childViewData(void 0),this.childViewLabel(""),this.childViewId(""),this.viewedChildViews.clear()},this.showRootCard=()=>this.rootCount()>=0&&this.parentListVisible()||this.rootCount()>0&&!this.parentListVisible(),this.getTranslatedText=e=>{const t=1===e?this.res.additionalLevel:this.res.additionalLevels;return u.applyParameters(t,{count:e})},this.updateFocusCardAfterScrollEnds=()=>{this.rootCount(this.rootCount()<0?-1:this.rootCount()),this.snapping.interruptSnapping(),this.interruptCardFocusAction(),this.cardFocusDurationId=setTimeout(()=>{this.updateFocusCard()},1e3)},this.showTopTConnection=()=>!!this.properties.parentHierarchyItemData,this.setRootLevels=()=>{var e;const t=(null===(e=null==this?void 0:this.parentHierarchyArray)||void 0===e?void 0:e.length)?(null==this?void 0:this.parentHierarchyArray.length)-2:this.rootCount(),i=this.composite.querySelector(".oj-sp-hierarchy-viewer-container");i&&i.style.setProperty("--oj-sp-hierarchy-viewer-root-levels",""+t)},this.setHideAdditionalInfoCompact=e=>{if(!this.hasOneParent())return;const t=this.composite.querySelector(".oj-sp-hierarchy-viewer-parent-container");if(t){const i=this.getCards(t);if(i)for(let t=0;t<i.length;t++){const o=i[t];o&&o.context&&"parent"===o.type&&o.playAnimation(1,e?"hideAdditionalInfoCompact":"showAdditionalInfoCompact")}}},this.getCards=e=>{if(!e)return null;return e.getElementsByTagName("oj-sp-hierarchy-card")},this.setOffsetRatio=(e=0,t=!1)=>{var i;let o=0;o=e||t?e:this.getCurrentOffsetRatio();const s=this.composite.querySelector(".oj-sp-hierarchy-viewer-container");!this.parentListVisible()&&o>0&&(this.parentListVisible(!0),this.setHideAdditionalInfoCompact(!0),s.style.setProperty("--oj-sp-hierarchy-viewer-parent-list-visible","1")),s&&s.style.setProperty("--oj-sp-hierarchy-viewer-offset-ratio",""+o);const a=(null===(i=null==this?void 0:this.parentHierarchyArray)||void 0===i?void 0:i.length)?(null==this?void 0:this.parentHierarchyArray.length)-2:this.rootCount(),n=this.composite.querySelector(".oj-sp-hierarchy-viewer-parent-container");n&&(n.scrollTop=Math.round((1-o)*this.parentListItemHeight*a));const r=this.composite.querySelector(".oj-sp-hierarchy-viewer-lens-container");r&&(r.scrollTop=Math.round((1-o)*this.lensListItemHeight*a));const l=this.composite.querySelector(".oj-sp-hierarchy-viewer-bottom-parent-scrollable-container");l&&(l.scrollTop=Math.round((1-o)*this.parentListItemHeight*a))},this.updateContainerHeights=e=>{switch(e){case p.SCREEN_RANGE.SM:case p.SCREEN_RANGE.MD:this.parentListItemHeight=92,this.lensListItemHeight=180;break;default:this.parentListItemHeight=110,this.lensListItemHeight=228}},this.refreshConveyorBelt=async()=>{const e=this.composite.querySelector("#"+this.uid+"_container1");if(e){await l.getContext(e).getBusyContext().whenReady();const t=this.composite.querySelector("#"+this.uid+"_conveyorBelt1");t&&t.refresh()}},this.handleWheel=e=>{if(this.properties.currentItemTemplate!==this.properties.parentItemTemplate)return;if(!this.parentListVisible()&&0!==window.scrollY)return;if(this.isAnimationInProgress())return;if(this.isElementInTheViewPort(".oj-sp-hierarchy-viewer-lens-container")&&this.parentHierarchyArray.length>2){const t=e.deltaY<0?1:-1;this.clearFocusOnCard(),this.snapping.interruptSnapping(),this.interruptCardFocusAction(),this.totalDeltaY=this.incTotalDeltaY(-e.deltaY),this.setOffsetRatioAndRootCount(),this.parentListVisible()&&this.snapCardToLensEdgeOnTimeout(t),(this.totalDeltaY>0||0===this.getCurrentOffsetRatio()&&this.parentListVisible())&&(e.preventDefault(),e.stopPropagation())}},this.handletouchStart=e=>{if(this.isAnimationInProgress())return;this.isElementInTheViewPort(".oj-sp-hierarchy-viewer-lens-container")&&(this.clearFocusOnCard(),this.touchStartY=e.touches[0].clientY,this.snapping.interruptSnapping(),this.interruptCardFocusAction())},this.handleTouchMove=e=>{this.handleTouchMoveEnd(e,!1)},this.handleTouchEnd=e=>{this.handleTouchMoveEnd(e,!0)},this.handleTouchMoveEnd=(e,t)=>{if(this.properties.currentItemTemplate!==this.properties.parentItemTemplate)return;if(!this.parentListVisible()&&0!==window.scrollY)return;if(this.isAnimationInProgress())return;if(this.isElementInTheViewPort(".oj-sp-hierarchy-viewer-lens-container")&&this.parentHierarchyArray.length>2){this.snapping.interruptSnapping(),this.interruptCardFocusAction();const i=2*(e.changedTouches[0].clientY-this.touchStartY);if(this.touchStartY=e.changedTouches[0].clientY,this.totalDeltaY=this.incTotalDeltaY(i),this.setOffsetRatioAndRootCount(),this.touchVelocity.updatePosition(e.timeStamp,e.changedTouches[0].clientY),t&&this.parentListVisible()){const t=this.touchVelocity.getVelocity(e.timeStamp);this.touchVelocity.reset(),this.snapToCardEdgeWithEasing(t)}(this.totalDeltaY>0||0===this.getCurrentOffsetRatio()&&this.parentListVisible())&&(e.cancelable&&e.preventDefault(),e.stopPropagation())}},this.snapToCardEdgeWithEasing=e=>{this.snapping.snapToEdgeWithEasing(e,this.totalDeltaY,this.lensListItemHeight,this.snapIteration)},this.incTotalDeltaY=e=>{var t;return Math.max(0,Math.min(this.totalDeltaY+e,((null===(t=this.parentHierarchyArray)||void 0===t?void 0:t.length)-2)*this.lensListItemHeight))},this.getCurrentOffsetRatio=()=>{var e;return Math.max(0,Math.min(1,this.totalDeltaY/(((null===(e=this.parentHierarchyArray)||void 0===e?void 0:e.length)-2)*this.lensListItemHeight)))},this.getCardContainerElement=()=>this.composite.querySelector(".oj-sp-hierarchy-card-container"),this.clearFocusOnCard=()=>{const e=this.getCardContainerElement();e&&e.blur()},this.setOffsetRatioAndRootCount=()=>{this.setOffsetRatio(),this.parentListVisible()&&this.calculateRootCountOnScroll()},this.calculateRootCountOnScroll=()=>{var e;const t=(null===(e=null==this?void 0:this.parentHierarchyArray)||void 0===e?void 0:e.length)-2,i=1/t/2,o=this.getCurrentOffsetRatio();1===o&&this.rootCount(0),0===o&&this.rootCount(t);for(let e=t-1;e>=0;e--){const s=e/t,a=(e+1)/t;if(s<o&&o<=a){if(Math.abs(o-s)<i){const e=this.computeRootCount(t,s);this.rootCount(e<0?-1:e);break}{const e=this.computeRootCount(t,a);this.rootCount(e<0?-1:e);break}}}},this.computeRootCount=(e,t)=>Math.abs(e-parseInt((t*e).toFixed(),10)),this.updateFocusCard=()=>{const e=Math.max(this.rootCount(),0)+1,t=this.parentHierarchyArray[e];this.totalDeltaY=0;const i=this.composite.querySelector(".oj-sp-hierarchy-viewer-container");i&&(i.style.setProperty("--oj-sp-hierarchy-viewer-offset-ratio","0"),i.style.setProperty("--oj-sp-hierarchy-viewer-parent-list-visible","0")),requestAnimationFrame(()=>this.navigateFromScrollableView("parent",t,"person"))},this.preventClickOnCard=e=>{this.parentListVisible()&&e.stopPropagation()},this.snapIteration=(e,t)=>{this.totalDeltaY=this.incTotalDeltaY(e),this.setOffsetRatioAndRootCount(),t&&this.updateFocusCardAfterScrollEnds()},this.interruptCardFocusAction=()=>{this.cardFocusDurationId&&(clearTimeout(this.cardFocusDurationId),this.cardFocusDurationId=0)},this.isElementInTheViewPort=e=>{const t=this.composite.querySelector(e).getBoundingClientRect();return t.top>=0&&t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)},this.properties=e.properties,this.composite=e.element,this.uid=e.uniqueId,this.uniqueComponentName=this.uid+"_hierarchy-viewer",this.res=Object.assign(Object.assign({},n),this.properties.translations);const t=l.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.childrenLayout=s.observable("card"),this.childViewTemplate=s.observable(""),this.childViewData=s.observable(void 0),this.parentHierarchyArray=[],this.parentHierarchyADP=s.observable(void 0),this.parentADP=s.observable(void 0),this.hasOneParent=s.observable(!0),this.focusADP=s.observable(void 0),this.parentDataFetchPromises=[],this.focusDataFetchPromises=[],this.childViewLabel=s.observable(""),this.childViewId=s.observable(""),this.childViewListClass=s.observable(""),this.hasParent=s.observable(!1),this.parentCount=s.observable(0),this.hasManyParent=s.observable(!0),this.hasChildren=s.observable(!1),this.selectedChildView=s.observable(this.properties.selectedChildView),this.currentChildViews=s.observableArray([]),this.currentListViews=s.observableArray([]),this.setCurrentChildViews(this.properties.currentChildViews),this.setupChildViews(this.selectedChildView()),this.showSwitcher=s.observable(!0),this.parentListVisible=s.observable(!1),this.rootCount=s.observable(-1),this.totalDeltaY=0,this.touchStartY=0,this.cardFocusDurationId=0,this.touchVelocity=new m.TouchVelocity,this.snapCardToLensEdgeOnTimeout=(0,f.debounce)(e=>this.snapToCardEdgeWithEasing(e[0]),100),this.screenRange=c.createScreenRangeObservable(),this.childViewFetchSize=s.observable(this.screenRange()===p.SCREEN_RANGE.SM?10:25),this.screenRange.subscribe(this.updateContainerHeights),this.updateContainerHeights(this.screenRange()),this.snapping=new g.Snapping(20,500),this.busyResolve()}activated(e){d.log(`CCA ${this.uid} activated`)}connected(e){var t,i;d.log(`CCA ${this.uid} connected`),null===(t=this.properties.currentItemData)||void 0===t||t.addEventListener("mutate",this.focusDataProviderChanged),null===(i=this.properties.currentItemData)||void 0===i||i.addEventListener("refresh",this.focusDataProviderChanged),this.composite.addEventListener(a.EventDispatcher.CHILD_VIEW_CHANGE_EVENT_NAME,this.handleChangeCurrentChildView),this.composite.addEventListener(a.EventDispatcher.FOCUS_ACTION_EVENT_NAME,this.handleFocusAction);const o=this.composite.querySelector(".oj-sp-hierarchy-viewer-wrapper");o&&(o.addEventListener("wheel",this.handleWheel),o.addEventListener("touchstart",this.handletouchStart),o.addEventListener("touchmove",this.handleTouchMove),o.addEventListener("touchend",this.handleTouchEnd));const s=this.composite.querySelector(".oj-sp-hierarchy-viewer-lens-container");if(s){const e=this.composite.querySelector(".oj-sp-hierarchy-viewer-focus-card");e&&(this.focusCardResizeObserver=new ResizeObserver(([e])=>{window.requestAnimationFrame(()=>{s.style.setProperty("--oj-sp-hierarchy-viewer-lens-height",e.contentRect.height+"px")})}),this.focusCardResizeObserver.observe(e))}this.collapseDetailsHandler=new h.HierarchyViewerCollapseDetailsHandler(this.composite),this.stickyHeader||(this.stickyHeader=this.getStickyHeader());const n={componentName:this.uniqueComponentName,component:this.stickyHeader,offsetCalculationSubscription:{offsetOptions:{position:"top",level:y.PositionUtility.LEVEL_MAP.content},onOffsetChange:e=>{this.stickyHeader.style.top=e.top+"px"}},stickinessSubscription:{onStickinessChange:e=>{const t=e.isSticky;this.stickyHeader.style.position=t?"sticky":"unset",t||this.stickyHeader.classList.remove("oj-sp-hierarchy-viewer-focus-sticky")}}};this.stickyHeader&&(y.PositionUtility.subscribe(n),this.resizeObserver=new ResizeObserver(([e])=>{window.requestAnimationFrame(()=>{this.composite.style.setProperty("--oj-sp-hierarchy-viewer-width",e.contentRect.width+"px")})}),this.resizeObserver.observe(this.stickyHeader),this.intersectionObserver=new IntersectionObserver(([e])=>{"sticky"===this.stickyHeader.style.position&&(e.intersectionRatio>0?this.stickyHeader.classList.remove("oj-sp-hierarchy-viewer-focus-sticky"):0!==e.boundingClientRect.x&&this.stickyHeader.classList.add("oj-sp-hierarchy-viewer-focus-sticky"))}),this.intersectionObserver.observe(this.composite.querySelector(".oj-sp-hierarchy-viewer-sticky-filler")))}bindingsApplied(e){var t,i,o,s,n,r;d.log(`CCA ${this.uid} bindingsApplied`),this.stickyHeader=this.getStickyHeader(),this.composite.addEventListener(a.EventDispatcher.CHILD_VIEW_CHANGE_EVENT_NAME,this.handleChangeCurrentChildView),this.composite.addEventListener(a.EventDispatcher.FOCUS_ACTION_EVENT_NAME,this.handleFocusAction),null===(t=this.properties.currentItemData)||void 0===t||t.addEventListener("mutate",this.focusDataProviderChanged),null===(i=this.properties.currentItemData)||void 0===i||i.addEventListener("refresh",this.focusDataProviderChanged),null===(o=this.properties.parentHierarchyItemData)||void 0===o||o.addEventListener("mutate",this.parentHierarchyDataProviderChanged),null===(s=this.properties.parentHierarchyItemData)||void 0===s||s.addEventListener("refresh",this.parentHierarchyDataProviderChanged),null===(n=this.properties.parentItemData)||void 0===n||n.addEventListener("mutate",this.parentDataProviderChanged),null===(r=this.properties.parentItemData)||void 0===r||r.addEventListener("refresh",this.parentDataProviderChanged),this.generateParentHierarchyADP(),this.generateParentADP(),this.generateFocusADP(),this.hideListviewProgressiveLoadingCards()}async propertyChanged(e){var t,i,o,s,a,n,r,c,p,u,h,m;if(d.log(`CCA ${this.uid} '${e.property}'`),"parentItemTemplate"===e.property)this.hasParent(!1),this.parentCount(0);else if("selectedChildView"===e.property){this.selectedChildView(this.properties.selectedChildView),this.setupChildViews(this.properties.selectedChildView);const e=this.composite.querySelector(".oj-sp-hierarchy-viewer-focus-card");e&&await l.getContext(e).getBusyContext().whenReady(),this.selectedChildView(this.properties.selectedChildView),this.hideListviewProgressiveLoadingCards()}else if("currentChildViews"===e.property){const t=this.composite.querySelector(".oj-sp-hierarchy-viewer-focus-card");t&&await l.getContext(t).getBusyContext().whenReady(),this.setCurrentChildViews(e.value),this.selectedChildView(this.properties.selectedChildView),this.setupChildViews(this.properties.selectedChildView)}else"currentItemData"===e.property?(null===(t=e.previousValue)||void 0===t||t.removeEventListener("mutate",this.focusDataProviderChanged),null===(i=e.previousValue)||void 0===i||i.removeEventListener("refresh",this.focusDataProviderChanged),null===(o=e.value)||void 0===o||o.addEventListener("mutate",this.focusDataProviderChanged),null===(s=e.value)||void 0===s||s.addEventListener("refresh",this.focusDataProviderChanged),this.focusDataProviderChanged()):"parentHierarchyItemData"===e.property?(null===(a=e.previousValue)||void 0===a||a.removeEventListener("mutate",this.parentHierarchyDataProviderChanged),null===(n=e.previousValue)||void 0===n||n.removeEventListener("refresh",this.parentHierarchyDataProviderChanged),null===(r=e.value)||void 0===r||r.addEventListener("mutate",this.parentHierarchyDataProviderChanged),null===(c=e.value)||void 0===c||c.addEventListener("refresh",this.parentHierarchyDataProviderChanged)):"parentItemData"===e.property?(null===(p=e.previousValue)||void 0===p||p.removeEventListener("mutate",this.parentDataProviderChanged),null===(u=e.previousValue)||void 0===u||u.removeEventListener("refresh",this.parentDataProviderChanged),null===(h=e.value)||void 0===h||h.addEventListener("mutate",this.parentDataProviderChanged),null===(m=e.value)||void 0===m||m.addEventListener("refresh",this.parentDataProviderChanged),this.parentDataProviderChanged()):"currentItemValue"===e.property&&this.updateCurrentItemValueInParentHierarchyADP(e.value)}disconnected(e){var t,i;d.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55");const o=this.composite.querySelector(".oj-sp-hierarchy-viewer-container");o&&(o.removeEventListener("wheel",this.handleWheel),o.removeEventListener("touchstart",this.handletouchStart),o.removeEventListener("touchmove",this.handleTouchMove),o.removeEventListener("touchend",this.handleTouchEnd)),this.composite.removeEventListener(a.EventDispatcher.CHILD_VIEW_CHANGE_EVENT_NAME,this.handleChangeCurrentChildView),this.composite.removeEventListener(a.EventDispatcher.FOCUS_ACTION_EVENT_NAME,this.handleFocusAction),null===(t=this.properties.currentItemData)||void 0===t||t.removeEventListener("mutate",this.focusDataProviderChanged),null===(i=this.properties.currentItemData)||void 0===i||i.removeEventListener("refresh",this.focusDataProviderChanged),this.collapseDetailsHandler.dispose(),this.stickyHeader&&y.PositionUtility.unsubscribe({componentName:this.uniqueComponentName}),this.resizeObserver&&this.resizeObserver.disconnect(),this.focusCardResizeObserver&&this.focusCardResizeObserver.disconnect(),this.intersectionObserver&&this.intersectionObserver.disconnect()}setHasParent(e){this.hasParent(e)}setParentCount(e){this.parentCount(e)}setHasChildren(e){this.hasChildren(e),e&&this.hideListviewProgressiveLoadingCards()}setCurrentItem(e){this.properties.currentItemValue=e}getStickyHeader(){return this.composite.querySelector(".oj-sp-hierarchy-viewer-focus-header")}getChildViewContainer(e){return this.composite.querySelector("#"+this.uid+"_"+e+"_subtree")}setChildViewStyle(){const e=this.getChildViewContainer(this.properties.selectedChildView),t=this.getCards(e);for(let e=0;e<(null==t?void 0:t.length);e++)t[e].classList.add("oj-sp-hierarchy-card-in-grid-margin-bottom");const i=null==e?void 0:e.getElementsByTagName("oj-sp-hierarchy-card-info");this.childViewListClass((null==i?void 0:i.length)>0?"":"oj-sm-12 oj-md-6 oj-lg-4 oj-xl-3 oj-sm-margin-0")}hideListviewProgressiveLoadingCards(){const e=this.getChildViewContainer(this.properties.selectedChildView);e&&e.style&&(e.style.visibility="hidden",l.getContext(e).getBusyContext().whenReady().then(()=>{this.setChildViewStyle(),e.style.visibility="visible"}))}async handleFocusActionCleanup(){this.collapseDetailsHandler.reset(),this.removeCardsInTempContainer();const e=this.composite.querySelector("#"+this.uid+"_container1");e&&await l.getContext(e).getBusyContext().whenReady(),this.toFocusFocusedCard=!0,await this.focusFocusedCard(),this.parentDataFetchPromises=[],this.focusDataFetchPromises=[]}async focusFocusedCard(){var e;this.toFocusFocusedCard&&this.focusedCard&&(await l.getContext(this.focusedCard).getBusyContext().whenReady(),null===(e=this.focusedCard)||void 0===e||e.focus(),this.toFocusFocusedCard=!1,this.focusedCard=null)}moveCardToTempContainer(e){const t=this.getTempContainerForAnimation();t&&(e.comp.classList.add("oj-sp-hierarchy-card-in-animation"),t.appendChild(e.comp),e.comp.style.position="absolute",e.comp.style.left=e.boundingRect.left+"px",e.comp.style.top=e.boundingRect.top+"px",e.comp.style.height=e.boundingRect.height+"px",e.comp.style.width=e.boundingRect.width+"px")}getTempContainerForAnimation(){if(!this.tempAnimationContainer){const e=this.composite.getElementsByClassName("oj-sp-hierarchy-viewer-animation-container");e.length>0&&(this.tempAnimationContainer=e[0])}return this.tempAnimationContainer}removeCardsInTempContainer(){const e=this.getTempContainerForAnimation();if(e){const t=this.getCards(e);if(t)for(;t.length>0;){const e=t[0];e&&e.remove()}}}}})),define("css!oj-sp/hierarchy-viewer/hierarchy-viewer-styles",[],(function(){})),define("oj-sp/hierarchy-viewer/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./hierarchy-viewer-view.html","./hierarchy-viewer-viewModel","css!./hierarchy-viewer-styles","css!oj-sp/common/common-style.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-hierarchy-viewer",{metadata:JSON.parse(o),view:s,viewModel:a.HierarchyViewerViewModel})})),define("text!oj-sp/horizontal-overview/component.json",[],(function(){return'{"name":"horizontal-overview","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-fa-css":"2404.0.0","oj-sp-css-additions":"2404.0.0"},"implements":["SpHorizontalOverviewElement"],"displayName":"Horizontal Overview","description":"Horizontal Overview is the header on the top of the foldout page, separated from content, which provides users with general information about the page.","type":"composite","properties":{"itemTitle":{"displayName":"Title","description":"A heading that indicates the focus of the overview, such as the name of a person or product.","translatable":true,"type":"string","required":true},"badge":{"displayName":"Badge","description":"Optional status information.","type":"object|null","properties":{"text":{"displayName":"Text","description":"A short string indicating a state such as Delayed or On Vacation.","translatable":true,"type":"string"},"status":{"displayName":"Status","description":"Status of badge.","type":"string","value":"neutral","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}},"style":{"displayName":"Style","description":"Style of the badge.","type":"string","value":"subtle","enumValues":["strong","subtle"],"propertyEditorValues":{"strong":{"description":"Strong style","displayName":"Strong"},"subtle":{"description":"Subtle style","displayName":"Subtle"}}}}},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","type":"object","properties":{"showDetails":{"description":"Defines whether showDetails action is on, off or disabled","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Show Details button is visible and enabled"},"off":{"displayName":"Off","description":"Show Details button is not visible"},"disabled":{"displayName":"Disabled","description":"Show Details button is visible and disabled"}}}}},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"showDetails":{"type":"string"}}},"displayMode":{"type":"string","displayName":"The display mode for the page header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The page header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The page header background is dark with light text content. The page background is light."}}}},"methods":{},"events":{"spShowDetails":{"displayName":"Show Details event","description":"Dispatched when Show Details action is triggered.","bubbles":true,"cancelable":false}},"slots":{"contextualInfo":{"description":"This is the slot for contextual information","displayName":"Contextual Information","preferredContent":["DynamicFormElement"]}},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Horizontal%20Overview%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectrahorizontaloverview.html","coverImage":"extension/catalog/images/ico-page-header.svg"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-page-header.svg"}}'})),define("text!oj-sp/horizontal-overview/horizontal-overview-view.html",[],(function(){return'<html><head></head><body><div :id="[[ uid + \'_headerContent\' ]]"data-oj-context=""class="oj-sp-header-container oj-sp-horizontal-overview-container":class="[[background() === \'mixed\' ? \'oj-color-invert oj-sp-color-invert-bg\' : \'oj-bg-neutral-0\']]"><div class="oj-sm-margin-4x-horizontal oj-md-margin-6x-horizontal oj-lg-margin-10x-horizontal oj-lg-padding-2x-start"><div :id="[[uid +\'_title_panel\']]"class="oj-sp-horizontal-overview-title-panel oj-flex-bar oj-sm-padding-3x-bottom oj-sm-align-items-center":class="[[background() === \'mixed\' ? \'oj-color-invert oj-sp-color-invert-bg \' : \'oj-bg-neutral-0\']]"><div :id="[[uid +\'_title\']]"class="oj-flex-bar-start oj-sp-helper-truncate"><h1 class="oj-header oj-sp-typography-display-6 oj-sp-helper-truncate oj-sm-padding-0 oj-sm-margin-0"><span :title="[[ $properties.itemTitle ]]"><oj-bind-text value="[[$properties.itemTitle]]"></oj-bind-text></span></h1></div><div class="oj-flex-bar-end"><oj-bind-if test="[[ showDetailsOn ]]"><oj-toolbar :id="[[ uid + \'_horizontalOverviewToolbar\' ]]"aria-label="Horizontal Overview Toolbar"aria-controls=""class="oj-sm-margin-3x-start oj-md-margin-6x-start oj-sm-padding-0-top oj-sm-flex-wrap-nowrap"><oj-button :id="[[ uid + \'_showDetails_lg_button\' ]]"chroming="outlined"class="oj-sm-only-hide oj-md-margin-0"disabled="[[ showDetailsDisabled ]]"on-oj-action="[[ showDetailsActionHandler ]]"><span slot="startIcon"class="oj-ux-ico-add-edit-page"></span><span><oj-bind-text value="[[res().showDetails]]"></oj-bind-text></span></oj-button><oj-button :id="[[ uid + \'_showDetails_sm_button\' ]]"chroming="borderless"display="icons"disabled="[[ showDetailsDisabled ]]"class="oj-button-sm oj-md-hide"on-oj-action="[[ showDetailsActionHandler ]]"><div slot="startIcon"class="oj-ux-ico-add-edit-page"></div><oj-bind-text value="[[res().showDetails]]"></oj-bind-text></oj-button></oj-toolbar></oj-bind-if></div></div><oj-bind-if test="[[displayContextualInfoPanel() &amp;&amp; (displayBadge() || hasContextualInfo()) ]]"><div :class="[[ displayBadge() ? \'oj-flex-bar oj-sm-align-items-center oj-md-padding-1x-end oj-sm-padding-4x-bottom oj-md-padding-6x-bottom\' : (contextualInfoIsEmpty() ? \'oj-sp-horizontal-overview-empty-badge-row\' : \'oj-flex-bar oj-md-padding-1x-end oj-sm-padding-4x-bottom oj-md-padding-6x-bottom\') ]]"class="oj-sp-horizontal-overview-badge-contextualinfo-overflow"><oj-bind-if test="[[ displayBadge() ]]"><div class="oj-flex-bar-start oj-sp-horizontal-overview-no-wrap oj-sm-padding-4x-end"><span :id="[[ uid + \'_badge\' ]]":class="[[badgeClasses() + \' oj-sp-horizontal-overview-ellipsis oj-sp-horizontal-overview-badge\']]":title="[[$properties.badge.text]]"tabindex="0"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></span></div></oj-bind-if><oj-bind-if test="[[ hasContextualInfo() ]]"><div :id="[[ uid + \'_contextualInfo\' ]]"class="oj-flex-bar-middle oj-sp-horizontal-overview-badge-contextualinfo-wrapper"><oj-bind-slot name="contextualInfo"></oj-bind-slot></div></oj-bind-if></div></oj-bind-if><div class="oj-sp-horizontal-overview-assistant-panel"></div></div><div class="oj-sp-horizontal-overview-strip"></div></div></body></html>'})),define("oj-sp/horizontal-overview/horizontal-overview-viewModel",["require","exports","oj-sp/common/EventDispatcher","oj-sp/common/badge","oj-sp/common/headerCommonAPI","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojbutton","ojs/ojconveyorbelt","ojs/ojknockout","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HorizontalOverviewViewModel=void 0;class d{constructor(e){this.showDetailsActionHandler=e=>{e.preventDefault(),i.EventDispatcher.dispatch(i.EventDispatcher.SHOW_DETAILS_ACTION_EVENT_NAME,this.composite,void 0)},this.setBadgeBackground=e=>{let t="oj-badge";if(e){switch(e.status){case o.BadgeStatus.danger:t+=" oj-badge-danger";break;case o.BadgeStatus.warning:t+=" oj-badge-warning";break;case o.BadgeStatus.success:t+=" oj-badge-success";break;case o.BadgeStatus.info:t+=" oj-badge-info"}e.style&&e.style===o.BadgeStyle.strong||(t+=" oj-badge-subtle"),this.badgeClasses(t)}},this.calcDisplayBadge=()=>{const e=this.properties.badge;return!(!e||!e.text)},this.processDisplayOptions=e=>{e&&e.showDetails?"on"===e.showDetails?(this.showDetailsOn(!0),this.showDetailsDisabled(!1)):"disabled"===e.showDetails?(this.showDetailsOn(!0),this.showDetailsDisabled(!0)):(this.showDetailsOn(!1),this.showDetailsDisabled(!0)):this.showDetailsOn(!1)},this.calcContextualInfoPanelVisibility=e=>{const t=document.querySelector(".oj-sp-horizontal-overview-container");t&&(window.scrollY>this.scrollPos?this.scrollUp?this.scrollTargetPos>0&&window.scrollY>=this.scrollTargetPos&&(this.displayContextualInfoPanel(!1),t.classList.add("oj-sp-horizontal-overview-sticky"),this.scrollTargetPos=0):(this.scrollTargetPos=Math.max(this.scrollPos+d.SCROLL_THRESHOLD,1),this.scrollUp=!0):(this.scrollUp&&(this.scrollTargetPos=Math.max(this.scrollPos-d.SCROLL_THRESHOLD,0)),this.scrollUp&&0!==window.scrollY||window.scrollY<=this.scrollTargetPos&&(window.innerHeight>d.HEIGHT_BREAKPOINT&&this.displayContextualInfoPanel(!0),t.classList.remove("oj-sp-horizontal-overview-sticky"),this.scrollTargetPos=0),this.scrollUp=!1),this.scrollPos=window.scrollY)},this.setHeaderBackgroundMode=async()=>{const e=await(0,s.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.background(e)},this.setHeaderSplitBackground=()=>{(0,s.evaluateHeaderSplitBackground)(this.composite,document.getElementById(this.uid+"_headerContent"))},this.properties=e.properties;const t=r.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.badgeClasses=a.observable(""),this.composite=e.element,this.uid=e.uniqueId,this.res=a.observable(Object.assign(Object.assign({},n),this.properties.translations)),this.showDetailsOn=a.observable(!1),this.showDetailsDisabled=a.observable(!1),this.processDisplayOptions(this.properties.displayOptions),this.initContextualInfo(),this.scrollPos=window.scrollY,this.scrollTargetPos=0,this.scrollUp=!1,this.displayBadge=a.computed(this.calcDisplayBadge),this.properties&&this.setBadgeBackground(this.properties.badge),this.background=a.observable((0,s.getInitialMode)(this.properties.displayMode)),this.displayContextualInfoPanel=a.observable(window.innerHeight>d.HEIGHT_BREAKPOINT),this.isHeaderInitialized=!1,this.busyResolve()}activated(e){l.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){this.isHeaderInitialized&&this.setHeaderSplitBackground(),l.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55"),window.addEventListener("scroll",this.calcContextualInfoPanelVisibility),window.addEventListener("resize",this.calcContextualInfoPanelVisibility)}bindingsApplied(e){this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.isHeaderInitialized=!0),l.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55")}async propertyChanged(e){l.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"badge"===e.property&&this.setBadgeBackground(e.value),"displayOptions"===e.property&&this.processDisplayOptions(e.value),"translations"===e.property&&this.res(Object.assign(Object.assign({},n),e.value))}disconnected(e){l.log(`%c CCA ${this.uid} disconnectd`,"background: #222; color: #bada55"),window.removeEventListener("scroll",this.calcContextualInfoPanelVisibility),window.removeEventListener("resize",this.calcContextualInfoPanelVisibility)}initContextualInfo(){const e=this.composite.querySelector("[slot='contextualInfo']");if(this.hasContextualInfo=a.observable(!!e),this.contextualInfoIsEmpty=a.observable(e&&0===e.childElementCount),e){new ResizeObserver(()=>requestAnimationFrame(()=>{this.contextualInfoIsEmpty(0===e.childElementCount)})).observe(e)}}}d.HEIGHT_BREAKPOINT=0,d.SCROLL_THRESHOLD=48,t.HorizontalOverviewViewModel=d})),define("css!oj-sp/horizontal-overview/horizontal-overview-styles",[],(function(){})),define("oj-sp/horizontal-overview/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./horizontal-overview-view.html","./horizontal-overview-viewModel","css!./horizontal-overview-styles","css!oj-sp/common/common-style.css","css!oj-sp/css-additions/css-additions.css","css!oj-sp/fa-css/fa-css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-horizontal-overview",{metadata:JSON.parse(o),view:s,viewModel:a.HorizontalOverviewViewModel})})),define("text!oj-sp/image/component.json",[],(function(){return'{"name":"image","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Image","description":"Loads and displays an image.","type":"composite","icon":{"iconPath":"extension/catalog/images/ico-library-image-48.svg"},"dependencies":{"oj-sp-common-util":"2404.0.0"},"extension":{"catalog":{"category":"Redwood Controls & Navigation","status":"Deprecated","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-library-image-48.svg"}},"properties":{"styleClass":{"description":"Current classes.","displayName":"Class name","writeback":false,"type":"string","value":""},"delivery":{"description":"Current delivery type.","displayName":"Delivery type (for SVG images). The value for non SVG images is always: \\"reference\\".","writeback":false,"type":"string","enumValues":["fetchAndInline","reference"],"value":""},"imageTitle":{"description":"Current title.","displayName":"Title","writeback":false,"type":"string","value":""},"source":{"description":"Current source.","displayName":"Source","writeback":false,"type":"string","value":""},"bidi":{"description":"Bi-directional value","displayName":"Bidi","writeback":false,"type":"boolean","value":false}}}'})),define("text!oj-sp/image/image.html",[],(function(){return'<html><head></head><body><oj-bind-if test="[[isReferenceDelivery()]]"><img :alt="[[title()]]":class="[[styleClass()]]":src="[[source()]]":title="[[title()]]"></oj-bind-if></body></html>'})),define("oj-sp/image/constants/delivery-type",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deliveryType=void 0,t.deliveryType={FETCH_AND_INLINE:"fetchAndInline",REFERENCE:"reference"}})),define("oj-sp/image/constants/image-format",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageFormat=void 0,t.imageFormat={GIF:"gif",JPG:"jpg",PNG:"png",SVG:"svg",WEBP:"webp"}})),define("oj-sp/image/utils/add-class",["require","exports"],(function(e,t){"use strict";function i(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClass=void 0,t.addClass=function(e,t){const o=Boolean(e.tagName.match(/svg/i)),s=i(o?e.hasAttribute("class")?e.getAttribute("class"):"":e.className),a=i(t),n=[];for(let e=0,t=a.length;e<t;e++){const t=String(a[e]);s.indexOf(t)>=0||n.push(t)}const r=[...s,...n].join(" ");o?e.setAttribute("class",r):e.className=r}})),define("oj-sp/image/utils/object-values",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectValues=void 0,t.objectValues=function(e){const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(e[i]);return t}})),define("oj-sp/image/image",["require","exports","knockout","oj-sp/common-util/common-util","ojs/ojlogger","./constants/delivery-type","./constants/image-format","./utils/add-class","./utils/object-values","ojs/ojknockout"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OjFndImage=void 0;const d="title";function c(e){return Boolean(e.match(new RegExp(`\\.${n.imageFormat.SVG}$`,"i")))}class p{constructor(e){const{element:t,properties:o}=e;this.compositeElem=t,this.uid=e.uniqueId;const{styleClass:r,imageTitle:d,source:u,bidi:h}=o,m=p.resolveSource(u,h);let{delivery:g}=o;if(g!==a.deliveryType.REFERENCE&&!function(e){return Boolean(e.match(new RegExp(`\\.(${(0,l.objectValues)(n.imageFormat).join("|")})$`,"i")))}(m))throw new Error("Invalid image format: "+u);if(g&&(y=g,!((0,l.objectValues)(a.deliveryType).indexOf(y)>=0)))throw new Error("Invalid delivery: "+g);var y;const f=c(m);f?f&&!g&&(g=a.deliveryType.FETCH_AND_INLINE):g=a.deliveryType.REFERENCE;const b=g===a.deliveryType.REFERENCE;this.styleClass=i.observable(r),this.isReferenceDelivery=i.observable(b),this.source=i.observable(m),this.title=i.observable(d),!f||f&&b||this.fetchSvgImage(m).then(e=>this.inlineSvgImage({content:e,source:u,styleClass:r,title:d})).then(e=>{const t=e.parentElement||e.parentNode;t.className&&t.className.indexOf("oj-subtree-hidden")>=0&&(t.style.display="block")}).catch(e=>{!function(e){const t=["[oj-sp-image]",e];s.error.apply(null,t)}(e)})}static resolveSource(e,t){if(t&&"rtl"===(0,o.getDirectionality)()){const t=new RegExp(`\\.(${(0,l.objectValues)(n.imageFormat).join("|")})$`,"i");e=e.replace(t,"_rtl$&")}return-1===e.indexOf("/")&&(e=`${(0,o.getOjSpPath)()}/image/images/${e}`),e}activated(e){s.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){s.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55")}bindingsApplied(e){s.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55")}inlineSvgImage(e){return new Promise((t,i)=>{const{content:o,source:s,title:a}=e;o||i(new Error("Invalid SVG image: "+s));const l=(new DOMParser).parseFromString(o,"text/html").body.firstChild;l&&l.tagName&&l.tagName.match(new RegExp(n.imageFormat.SVG,"i"))||i(new Error("Invalid SVG image: "+s));const c=this.compositeElem.appendChild(l);c.setAttribute(d,a),(0,r.addClass)(c,e.styleClass),t(c)})}fetchSvgImage(e){return Object.prototype.hasOwnProperty.call(p.svgImages,e)?p.svgImages[e]:p.svgImages[e]=new Promise((t,i)=>{c(e)||i(new Error("Invalid SVG image: "+e));const o={cache:"default"};(e.indexOf("/fscmUI/")>-1||e.indexOf("/crmUI/")>-1||e.indexOf("/hcmUI/")>-1)&&(o.credentials="include");const s=new Request(e,o);fetch(s).then(t=>(t.ok||i(new Error(`Error while fetching SVG image: ${e} [${t.status}] ${t.statusText}`)),t.clone().text())).then(e=>{t(e)})})}}p.svgImages={},t.OjFndImage=p})),define("css!oj-sp/image/image",[],(function(){})),define("oj-sp/image/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./image.html","./image","css!./image.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-image",{metadata:JSON.parse(o),parseFunction:void 0,view:s,viewModel:a.OjFndImage})})),define("text!oj-sp/image-card/component.json",[],(function(){return'{"name":"image-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","type":"composite","displayName":"Image Card","description":"An image card is used to display data about an object, with the image being the main identifier of the object.","dependencies":{"oj-sp-card-footer":"2404.0.0","oj-sp-thumbnail":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-common":"2404.0.0"},"properties":{"imageSrc":{"displayName":"Image source","description":"Image source. Path to where the image is stored.","type":"string","writeback":false,"required":true},"imageRatio":{"displayName":"Image Ratio","description":"Aspect ratio of image in width to height. Supported values 16-9, 4-3 and 1-1. Default value 16-9.","type":"string","writeback":false,"required":false,"value":"16-9","enumValues":["16-9","4-3","1-1"],"propertyEditorValues":{"16-9":{"description":"Aspect Ratio 16 : 9","displayName":"16 : 9"},"4-3":{"description":"Aspect Ratio 4 : 3","displayName":"4 : 3"},"1-1":{"description":"Aspect Ratio 1 : 1","displayName":"1 : 1"}}},"primaryText":{"type":"string","displayName":"Primary Text","description":"Title of the task or object represented by the image.","writeback":false,"required":true},"secondaryText":{"type":"string","displayName":"Secondary Text","description":"Description of the task or object represented by the image.","writeback":false,"required":false},"badge":{"displayName":"Status Badge","description":"Image Card Status Badge","type":"object|null","properties":{"text":{"displayName":"Badge Text","description":"Text showing in image card badge","type":"string","writeback":false,"required":false},"status":{"displayName":"Badge Status","description":"Status of the image card badge","type":"string","writeback":false,"enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}}}},"footerType":{"displayName":"Footer Type","description":"Determines type of footer used with the card","type":"string","value":"standard","enumValues":["none","standard"],"propertyEditorValues":{"none":{"displayName":"None","description":"The footer is not visible."},"standard":{"displayName":"Standard","description":"The footer is visible."}},"writeback":false,"required":false},"footerText":{"displayName":"Footer Read-only text","description":"Read-only text for image card footer","type":"object|null","properties":{"label":{"type":"string","displayName":"Label","description":"Label for the footer text. This is optional","required":false},"value":{"type":"string","displayName":"Value","description":"Value for the footer text, required if a label is provided..","required":false}}},"secondaryActions":{"displayName":"Secondary Actions","description":"Specifies actions in card footer.","type":"Array<object>","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}}}},"selectedKeys":{"displayName":"Selected keys","description":"Collection Set of selected keys","type":"KeySet<K>","writeback":true},"selector":{"type":"object|null","description":"The selector for selection type footer. Set the selection mode to \'multiple\' to see the selector.","writeback":true,"properties":{"rowKey":{"displayName":"Selector key","description":"Collection row key used for the selection","type":"any"},"selectionMode":{"displayName":"Selection mode","description":"Image card selection mode","type":"string","required":false,"writeback":false,"value":"single","enumValues":["multiple","single"],"propertyEditorValues":{"multiple":{"displayName":"Multiple selection","description":"Multiple items can be selected at the same time."},"single":{"displayName":"Single selection","description":"Only a single item can be selected at a time."}}},"ariaLabel":{"displayName":"Selector Aria Label","description":"Accessible text read by a screen reader while tabbed into the selector.","type":"string"}}}},"methods":{},"events":{"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when one of the footer actions is triggered.","bubbles":false,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-image-card-48.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Image%20Card%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraimagecard.html"},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"general":{"customizers":[{"type":"heading","title":"Image","subHeading":true,"underline":false},{"propertyName":"imageSrc","displayName":"Image Src"},{"propertyName":"imageRatio","displayName":"Image Ratio"},{"type":"heading","title":"Body","subHeading":true,"underline":false},{"propertyName":"primaryText","displayName":"Primary Text"},{"propertyName":"secondaryText","displayName":"Secondary Text"},{"propertyName":"badge.text","displayName":"Badge Text"},{"propertyName":"badge.status","displayName":"Badge Status","type":"enumeration"},{"type":"heading","title":"Footer","subHeading":true,"underline":false},{"propertyName":"footerText.label","displayName":"Footer Label"},{"propertyName":"footerText.value","displayName":"Footer Value"},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"secondaryactions"}},{"propertyName":"selector.selectionMode","displayName":"Selection Mode"},{"propertyName":"selector.rowKey","displayName":"Selector Row Key"},{"propertyName":"selectedKeys","displayName":"Selected Keys"}],"noSlots":true},"secondaryactions":{"customizers":[{"propertyName":"secondaryActions.id","displayName":"ID"},{"propertyName":"secondaryActions.label","displayName":"Label"},{"propertyName":"secondaryActions.display","displayName":"Display","type":"enumeration"},{"propertyName":"secondaryActions.icon","displayName":"Icon"}]}}}}},"icon":{"iconPath":"extension/catalog/images/ico-image-card-48.svg"}}'})),define("text!oj-sp/image-card/image-card-view.html",[],(function(){return'<html><head></head><body><oj-action-card class="oj-sp-image-card-parent-container"><div class="oj-sp-image-card-container oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"><div class="oj-sp-image-card-thumbnail"><oj-sp-thumbnail :id="[[uid +\'_thumbnail\']]"src="[[ $properties.imageSrc ]]"image-ratio="[[ $properties.imageRatio ]]"aria-hidden="true"></oj-sp-thumbnail></div><div :class="[[ \'oj-flex-item oj-sm-padding-5x-horizontal oj-sm-padding-5x-top \' + (hasFooter() ? \'oj-sp-image-card-with-footer-body\' : \'oj-sp-image-card-without-footer-body\') ]]"><div :class="[[ hasBadge() ? \'oj-sp-image-card-text-short\' : \'oj-sp-image-card-text-tall\' ]]"><div class="oj-flex-item"><span :id="[[uid +\'_primaryText\']]":title="[[ $properties.primaryText ]]"class="oj-sp-image-card-primary-text oj-typography-heading-xs oj-typography-bold oj-line-clamp-2"><oj-bind-text value="[[ $properties.primaryText ]]"></oj-bind-text></span></div><div class="oj-flex-item oj-sm-margin-1x-top"><span :id="[[uid +\'_secondaryText\']]":title="[[ $properties.secondaryText ]]":class="[[ \'oj-sp-image-card-secondary-text oj-typography-body-md oj-text-color-secondary \' + (hasBadge() ? \'oj-line-clamp-1\' : \'oj-line-clamp-3\') ]]"><oj-bind-text value="[[ $properties.secondaryText ]]"></oj-bind-text></span></div></div><oj-bind-if test="[[ hasBadge() ]]"><div :class="[[ \'oj-sp-image-card-badge oj-flex-item \' + (hasFooter() ? \'oj-sm-padding-4x-top\' : \'oj-sm-padding-4x-vertical\') ]]"><span :id="[[uid +\'_badge\']]":class="[[ badgeClass() ]]"><oj-bind-text value="[[ $properties.badge.text ]]"></oj-bind-text></span></div></oj-bind-if></div><oj-bind-if test="[[ hasFooter() ]]"><div data-oj-clickthrough="disabled"class="oj-sp-image-card-footer oj-flex-item"><oj-sp-card-footer :id="[[uid +\'_footer\']]"selector.row-key="[[ $properties.selector ? $properties.selector.rowKey : undefined ]]"selector.selection-mode="[[ $properties.selector ? $properties.selector.selectionMode : undefined ]]"selected-keys="{{ selectedKeys }}"selector.aria-label="[[ $properties.selector ? $properties.selector.ariaLabel : undefined ]]"footer-text="[[ footerText ]]"secondary-actions="[[ footerSecondaryActions ]]"on-sp-secondary-action="[[ secondaryActionHandler ]]"></oj-sp-card-footer></div></oj-bind-if></div></oj-action-card></body></html>'})),define("oj-sp/image-card/image-card-viewModel",["require","exports","knockout","oj-sp/common/EventDispatcher","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojkeyset","ojs/ojlogger","oj-sp/card-footer/loader","oj-sp/thumbnail/loader","ojs/ojactioncard","ojs/ojknockout","ojs/ojpopup"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageCardViewModel=void 0;t.ImageCardViewModel=class{constructor(e){this.context=e,this.secondaryActionHandler=e=>{o.EventDispatcher.dispatch(o.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()};const t=a.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=s,this.initBadge(),this.initFooter(),this.initSelection(),this.busyResolve()}activated(e){r.log(`oj-sp-image-card ${this.uid} activated`)}connected(e){r.log(`oj-sp-image-card ${this.uid} connected`)}bindingsApplied(e){r.log(`oj-sp-image-card ${this.uid} bindingsApplied`)}propertyChanged(e){r.log(`oj-sp-image-card ${this.uid} propertyChanged`),"selectedKeys"===e.property&&e.value&&this.selectedKeys(e.value)}disconnected(e){r.log(`oj-sp-image-card ${this.uid} disconnected`)}initBadge(){this.hasBadge=i.computed(()=>this.properties.badge&&this.properties.badge.text&&this.properties.badge.status),this.badgeClass=i.computed(()=>{if(this.hasBadge()){let e="oj-badge oj-badge-md";return["neutral","danger","warning","success","info"].indexOf(this.properties.badge.status)>=0&&(e+=" oj-badge-"+this.properties.badge.status),e}return""})}initFooter(){this.hasFooter=i.computed(()=>"standard"===this.properties.footerType),this.footerText=i.computed(()=>this.properties.footerText&&this.properties.footerText.value?{label:this.properties.footerText.label,value:this.properties.footerText.value}:void 0),this.footerSecondaryActions=i.computed(()=>this.properties.secondaryActions instanceof Array?this.properties.secondaryActions:[])}initSelection(){this.selectedKeys=i.observable(this.properties.selectedKeys?this.properties.selectedKeys:new n.KeySetImpl),this.selectedKeys.subscribe(e=>{if(this.properties.selectedKeys!==e){this.composite.setProperty("selectedKeys",e)}})}}})),define("css!oj-sp/image-card/image-card-styles",[],(function(){})),define("oj-sp/image-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./image-card-view.html","./image-card-viewModel","css!./image-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-image-card",{metadata:JSON.parse(o),view:s,viewModel:a.ImageCardViewModel})})),define("text!oj-sp/in-app-navigation/component.json",[],(function(){return'{"name":"in-app-navigation","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"In-App Navigation","description":"In-App Navigation displays multiple destinations at the bottom of the screen. In-app navigation is used when applications need to provide sections with parallel flows and is used by phone, tablet, and desktop apps when there is more than one navigation item within an app.","type":"composite","icon":{"iconPath":"extension/images/ico-in-app-navigation.svg"},"dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0","oj-sp-pillar-theme":"2404.0.0","oj-sp-css-additions":"2404.0.0"},"properties":{"navigationItems":{"displayName":"Navigation Items","description":"List of navigation items to be displayed. Currently limited to eight items. Use this property to pass the navigation items in an array. Either use navigationItems or navigationData. If both properties are used, navigationItems is ignored.","type":"Array<object>","properties":{"id":{"description":"Unique identifier for the in app navigation tab.","type":"any"},"label":{"description":"Unique text label to display for the in app navigation tab. This will display in larger screens only.","type":"string"},"icon":{"description":"CSS class for the icon of the in-app-nav item. This will always be beside the label in case of large screens and only icon for smaller screens.","type":"string"},"badgeValue":{"description":"Count value to display with the label of the in app navigation tab. If the property is omitted or 0, badge won\'t be displayed.","type":"number"}},"status":[{"type":"deprecated","since":"2201.0.0","description":"Use navigation-data property instead."}],"propertyGroup":"data","required":false},"selection":{"displayName":"Selection","description":"Item key (id) of currently selected navigation item.","type":"any","propertyGroup":"data","writeback":true},"applicationAction":{"displayName":"Application action","description":"This controls the application action button","type":"object","properties":{"disabled":{"description":"The disabled state of the application action button","type":"boolean","value":true},"icon":{"description":"The icon for the application action button","type":"string"},"label":{"description":"The label for the application action button","type":"string"}},"propertyGroup":"common","required":false,"status":[{"type":"deprecated","since":"2110.0.0","description":"Application action has been deprecated and will be removed shortly."}]},"visible":{"displayName":"Visible","description":"Determines if the component is visible or not.","type":"boolean","propertyGroup":"common","value":true},"navigationData":{"displayName":"Navigation Data","description":"List of navigation items to be displayed. Currently limited to eight items. Use this if you want to pass an array data provider for navigation items. Either use navigationItems or navigationData. If both properties are used, navigationItems is ignored.","type":"oj.DataProvider","propertyGroup":"data","required":false,"extension":{"catalog":{"dataProviderProperties":{"id":{"description":"Unique identifier for the in app navigation tab.","type":"string","required":true,"key":true},"label":{"description":"Unique text label to display for the in app navigation tab. This will display in larger screens only.","type":"string","required":true},"icon":{"description":"CSS class for the icon of in app navigation tab. This will always be beside the label in case of large screens and only icon for smaller screens.","type":"string","required":true},"badgeValue":{"description":"Count value to display with the label of the in app navigation tab. If its omitted or 0, badge won\'t be displayed.","type":"string","required":false}}}}}},"methods":{"refresh":{"displayName":"Refresh the component.","description":"This method refreshes the visual state of in-app-navigation component. The component requires a refresh() after the DOM is programmatically changed underneath the component."}},"events":{"spApplicationAction":{"displayName":"spApplicationAction event","description":"Triggered when the application action is clicked","bubbles":true,"cancelable":false,"status":[{"type":"deprecated","since":"2110.0.0","description":"spApplicationAction event has been deprecated and will be removed shortly."}]},"spSelectionAction":{"displayName":"spSelectionAction event","description":"Triggered when the navigation item is clicked (even when clicking on same tab) i.e only via user gesture which excludes programmatic cases.","bubbles":true,"cancelable":false,"detail":{"currentId":{"description":"The ID of the selected navigation item","type":"string"},"previousId":{"description":"The ID of the previously selected navigation item","type":"string"}}},"spSelectionChanged":{"displayName":"spSelectionChanged event","description":"Triggered when the selection is changed which includes if the selection is changed programmatically.","detail":{"currentId":{"description":"The ID of the selected navigation item","type":"string"},"previousId":{"description":"The ID of the previously selected navigation item","type":"string"}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=In%20App%20Navigation%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectrainappnavigation.html","coverImage":"extension/images/ico-in-app-navigation.svg"},"vbdt":{"pi":{"layouts":{"general":{"customizers":[{"propertyName":"applicationAction.label","displayName":"Application action label"},{"propertyName":"applicationAction.icon","displayName":"Application action icon"},{"propertyName":"applicationAction.disabled","displayName":"Application action disabled"},{"propertyName":"visible","displayName":"Show In-App-Navigation"}]},"data":{"customizers":[{"propertyName":"navigationData","displayName":"Navigation Data"},{"propertyName":"selection","displayName":"Selected Item"}]}},"events":{"suggestions":[{"name":"spApplicationAction","type":"component"},{"name":"spSelectionAction","type":"component","mappings":[{"variableName":"currentId","expression":"{{$event.detail.currentId}}","type":"string"},{"variableName":"previousId","expression":"{{$event.detail.previousId}}","type":"string"}]}]}}},"webelement":{}}}'})),define("text!oj-sp/in-app-navigation/in-app-navigation-view.html",[],(function(){return'<html><head></head><body><div :id="[[uid + \'_IANViewerContent\']]"class="oj-sp-in-app-navigation-viewer-content":class="[[{\'oj-helper-hidden\': !componentVisible() }]]"><div :id="[[uid + \'_IANContainer\']]":class="[[{\n  \'oj-applayout-fixed-bottom oj-color-invert oj-sp-ian-theme-background oj-sp-in-app-navigation-container oj-flex\': true,\n  }]]"><oj-bind-if test="[[ navigationItems().isEmpty()===\'no\' ]]"><div class="oj-sp-in-app-navigation-width oj-sm-only-padding-4x-horizontal":class="[[{\n    \'oj-flex-item\': true\n    }]]"><oj-navigation-list data-oj-context="":id="[[uid + \'_IANNavList\']]"class="oj-sp-in-app-navigation-nav-list oj-md-condense oj-md-margin-0-start oj-md-padding-6x-start"data="[[ navigationItems ]]"display="[[ isSmallMediumScreen() ? \'icons\' : \'all\' ]]"edge="bottom"overflow="popup"selection="{{ $properties.selection }}"on-selection-changed="[[ selectionChanged ]]"on-oj-selection-action="[[handleSelectionAction]]"><template slot="itemTemplate"><li :id="[[ internalIdPrefix + $current.data.id ]]"class="oj-sp-in-app-navigation-li":data-id="[[ $current.data.id ]]"><a href="#"><span :class="[[ \'oj-navigationlist-item-icon \' + $current.data.icon ]]"></span><span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></span></a><oj-bind-if test="[[$current.data.badgeValue &amp;&amp; $current.data.badgeValue > 0]]"><span class="oj-navigationlist-item-end"><span :id="[[internalIdPrefix + $current.data.id + \'_IANBadge\']]":class="[[\'oj-badge \' +  (isSmallMediumScreen() ? \'oj-badge-sm\' : \'oj-badge-md\')]]"><oj-bind-text value="[[ ($current.data.badgeValue > 99 ? \'99+\' : $current.data.badgeValue) ]]"></oj-bind-text></span></span></oj-bind-if></li></template></oj-navigation-list></div></oj-bind-if><oj-bind-if test="[[ applicationActionVisible ]]"><div class="oj-flex-item oj-sp-in-app-navigation-button-container oj-sm-flex-initial":style.width="[[ isSmallScreen() ? mobileButtonWidth() : \'\' ]]"><oj-button :id="[[ uid + \'_IANPrimaryAction\' ]]"class="oj-button-sm"disabled="{{ properties.applicationAction.disabled }}"display="[[ isSmallMediumScreen() ? \'icons\' : \'all\' ]]"chroming="callToAction"on-oj-action="[[ applicationActionHandler ]]"><span slot="startIcon":class="[[ properties.applicationAction.icon]]"></span><span><oj-bind-text value="[[ properties.applicationAction.label ]]"></oj-bind-text></span></oj-button><div class="oj-md-hide oj-sp-in-app-navigation-ao-padding"></div></div></oj-bind-if></div></div></body></html>'})),define("text!oj-sp/pillar-theme/component.json",[],(function(){return'{"name":"pillar-theme","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Pillar Theme","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","description":"Provides Pillar Specific theming to Redwood applications","icon":{"iconPath":"extension/catalog/images/ico-oracle-o-48.svg","hoverIconPath":"extension/catalog/images/ico-oracle-o-48.svg","selectedIconPath":"extension/catalog/images/ico-oracle-o-48.svg"},"dependencies":{"oj-sp-common-util":"2404.0.0","oj-sp-css-additions":"2404.0.0","oj-sp-common":"2404.0.0"},"properties":{"pillar":{"type":"string|null","displayName":"Pillar","enumValues":["default","cx","database","devtools","erp","gbu","hcm","netsuite","oci","scm","health"],"description":"Controls different aspects of page and components theming depending on the chosen pillar option. This property will override the selection of theme property value"},"theme":{"type":"string","writeback":false,"displayName":"Theme","enumValues":["default","lilac","ocean","pebble","pine","plum","rose","sienna","slate","teal"],"description":"Controls different aspects of page and components theming depending on the chosen pillar theme","status":[{"type":"deprecated","since":"2301.0.0","description":"Use Pillar property for theme instead."}]},"mode":{"type":"string","writeback":false,"required":true,"displayName":"Mode","enumValues":["light","mixed"],"description":"Controls different aspects of page and components theming dpending on the chosen pillar theme mode"},"appMode":{"type":"string","writeback":false,"displayName":"AppMode","enumValues":["light","mixed"],"description":"States the app level mode defined."},"scale":{"type":"string","writeback":false,"displayName":"Base Font Size","description":"Controls the value of base font size on the document element. All components using rem as the size unit will respond automatically to the font-size of document(body).","value":"large","enumValues":["large","medium","small"],"propertyEditorValues":{"large":{"displayName":"Large (default)","description":"The action type is default large base font size."},"medium":{"displayName":"Medium","description":"The action type is medium base font size."},"small":{"displayName":"Small","description":"The action type is small base font size."}}},"askOracle":{"type":"string","displayName":"Ask Oracle","description":"Whether application uses Ask Oracle","value":"on","writeback":false,"enumValues":["on","off"],"propertyEditorValues":{"on":{"description":"Application renders with Ask Oracle.","displayName":"On"},"off":{"description":"Application does not render with Ask Oracle.","displayName":"Off"}}}},"methods":{"overrideGlobalSplitBackgroundPosition":{"description":"Function to override the global split background position.","params":[{"name":"position","description":"Position of the background texture in the page","type":"number"}]},"setPillarThemePromise":{"description":"Function to create pillar theme promise, to process the app level theme first and then to apply override theme."},"resolvePillarThemePromise":{"description":"Function to resolve pillar theme promise."},"getPillarThemePromise":{"description":"Function to return pillar theme promise. custom theme will be applied only when this promise is resolved"}},"slots":{"":{"displayName":"Default","description":"Content of this composite."}},"extension":{"catalog":{"category":"ODE Shell","status":"Pre-production","coverImage":"extension/catalog/images/ico-oracle-o-48.svg","tags":["Redwood","Shell"]},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/pillar-theme/pillar-theme.html",[],(function(){return'<html><head></head><body><div :style.css-text="[[injectedThemeCSSVariables()]]"><oj-bind-slot></oj-bind-slot></div></body></html>'})),define("oj-sp/pillar-theme/pillar-theme",["require","exports","knockout","oj-sp/common-util/common-util","ojs/ojlogger","ojs/ojbutton","ojs/ojknockout"],(function(e,t,i,o,s){"use strict";var a,n,r,l;Object.defineProperty(t,"__esModule",{value:!0}),t.PillarThemeModel=void 0,function(e){e.PILLAR_DEFAULT="default",e.PILLAR_LILAC="lilac",e.PILLAR_OCEAN="ocean",e.PILLAR_PEBBLE="pebble",e.PILLAR_PINE="pine",e.PILLAR_PLUM="plum",e.PILLAR_ROSE="rose",e.PILLAR_SIENNA="sienna",e.PILLAR_SLATE="slate",e.PILLAR_TEAL="teal"}(a||(a={})),function(e){e.MODE_LIGHT="light",e.MODE_MIXED="mixed"}(n||(n={})),function(e){e.LARGE="large",e.MEDIUM="medium",e.SMALL="small"}(r||(r={})),function(e){e.DEFAULT="default",e.HCM="hcm",e.CX="cx",e.SCM="scm",e.ERP="erp",e.NETSUITE="netsuite",e.GBU="gbu",e.OCI="oci",e.DATABASE="database",e.DEVTOOLS="devtools",e.HEALTH="health"}(l||(l={}));const d={FND_GALLARY_CDN_LOCATION_EXPRESSION:"%FND_DEFAULT_GALLERY_CDN_LOCATION%",PILLAR_THEME_GLOBAL_CLASS_PREFIX:"oj-sp-theme-global-pillar-"},c={FND_GALLARY_CDN_LOCATION_EXPRESSION:"%FND_DEFAULT_GALLERY_CDN_LOCATION%",PILLAR_THEME_GLOBAL_CLASS_PREFIX:"oj-sp-theme-global-pillar-",PILLAR_THEME_MODE_GLOBAL_CLASS_PREFIX:"oj-sp-theme-global-mode-",PILLAR_GLOBAL_CLASS_PREFIX:"oj-sp-theme-global-pt-"},p="Redwood",u="oj-scale-md",h="oj-scale-sm",m="--oj-sp-theme-vertical-overview-texture",g="--oj-sp-theme-vertical-overview-texture-sm",y="pillar",f="theme",b="mode",v="scale",j="size",A="askOracle",C={PILLAR_DEFAULT:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-generic-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-generic-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-generic-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-neutral.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-neutral-sm.png')"}]},PILLAR_LILAC:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-gbus-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-gbus-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-gbus-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-lilac.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-lilac-sm.png')"}]},PILLAR_OCEAN:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-netsuite-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-netsuite-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-netsuite-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-ocean.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-ocean-sm.png')"}]},PILLAR_PEBBLE:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-devtools-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-devtools-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-devtools-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pebble.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pebble-sm.png')"}]},PILLAR_PINE:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-oci-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-oci-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-oci-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pine.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pine-sm.png')"}]},PILLAR_PLUM:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-cx-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-cx-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-cx-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-plum.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-plum-sm.png')"}]},PILLAR_ROSE:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-hcm-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-hcm-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-hcm-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-rose.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-rose-sm.png')"}]},PILLAR_SIENNA:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-scm-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-scm-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-scm-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sienna.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sienna-sm.png')"}]},PILLAR_SLATE:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-database-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-database-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-database-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-slate.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-slate-sm.png')"}]},PILLAR_TEAL:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-finance-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-finance-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-finance-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-teal.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-teal-sm.png')"}]}},E={DEFAULT:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-generic-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-generic-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-generic-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-neutral.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-neutral-sm.png')"}]},GBU:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-gbus-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-gbus-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-gbus-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-lilac.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-lilac-sm.png')"}]},NETSUITE:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-netsuite-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-netsuite-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-netsuite-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-ocean.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-ocean-sm.png')"}]},DEVTOOLS:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-devtools-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-devtools-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-devtools-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pebble.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pebble-sm.png')"}]},OCI:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-oci-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-oci-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-oci-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pine.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-pine-sm.png')"}]},CX:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-cx-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-cx-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-cx-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-plum.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-plum-sm.png')"}]},HCM:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-hcm-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-hcm-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-hcm-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-rose.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-rose-sm.png')"}]},SIENNA:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-scm-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-scm-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-scm-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sienna.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sienna-sm.png')"}]},DATABASE:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-database-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-database-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-database-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-slate.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-slate-sm.png')"}]},ERP:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-finance-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-finance-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-finance-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-teal.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-teal-sm.png')"}]},SCM:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-scm-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-scm-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-scm-2x.webp')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sienna.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sienna-sm.png')"}]},HEALTH:{INLINE_BODY_CSS_VARIABLES:[{KEY:"--oj-sp-theme-global-texture-image-start",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-health-start.png')"},{KEY:"--oj-sp-theme-global-texture-image-end",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/background-shell-health-end.png')"}],INLINE_CSS_VARIABLES:[{KEY:"--oj-sp-theme-page-header-strip",VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/color-strip-health.png')"},{KEY:m,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sky.png')"},{KEY:g,VALUE:"url('%FND_DEFAULT_GALLERY_CDN_LOCATION%/comp-vertical-overview-texture-sky-sm.png')"}]}};t.PillarThemeModel=class{constructor(t){this.pillarThemePromise=null,this.pillarThemeChainResolve=null,this.overrideGlobalSplitBackgroundPosition=e=>{var t,i,o,s;const a=document.querySelector(".oj-sp-header-container");if(null===e&&a)return;const n=window.sandboxId?(null===(t=window.maintenanceBanner)||void 0===t?void 0:t.message)||(null===(i=window.faConfig)||void 0===i?void 0:i.PROXY_USER)?96:48:(null===(o=window.maintenanceBanner)||void 0===o?void 0:o.message)||(null===(s=window.faConfig)||void 0===s?void 0:s.PROXY_USER)?48:0;document.documentElement.style.setProperty("--oj-sp-shell-banner-height",n+"px"),this.adjustGlobalSplitBackgroundPosition(e,n)},this.setPillarThemePromise=()=>{this.pillarThemePromise||(this.pillarThemePromise=new Promise(e=>{this.pillarThemeChainResolve=e}))},this.resolvePillarThemePromise=()=>{this.pillarThemeChainResolve&&(this.pillarThemeChainResolve("resolve promise"),this.pillarThemeChainResolve=null,this.pillarThemePromise=null)},this.getPillarThemePromise=()=>this.pillarThemePromise,this.updateThemesProp=e=>{e.forEach(e=>{const t=Object.keys(e)[0];switch(t){case y:this.isValueInObject(l,e[t])&&(this.activePillar=e[t]);break;case f:this.isValueInObject(a,e[t])&&(this.activePillarTheme=e[t]);break;case b:this.isValueInObject(n,e[t])&&(this.activePillarThemeMode=e[t]);break;case j:this.isValueInObject(r,e[t])&&(this.activeBaseFontSize=e[t]);break;default:this.activePillar=null,this.activePillarTheme=a.PILLAR_DEFAULT,this.activePillarThemeMode=n.MODE_LIGHT,this.activeBaseFontSize=r.LARGE}}),this.updatePillarThemeGlobalProperties()},this.getClosestHTMLElement=()=>(this.closestHTMLElem||(this.closestHTMLElem=this.element.closest("html")),this.closestHTMLElem),this.getClosestBodyElement=()=>(this.closestBodyElem||(this.closestBodyElem=this.element.closest("body")),this.closestBodyElem),this.updatePillarThemeGlobalProperties=()=>{if(this.activePillar||(this.activePillar=null),this.activePillarTheme||(this.activePillarTheme=a.PILLAR_DEFAULT),this.activePillarThemeMode||(this.activePillarThemeMode=n.MODE_LIGHT),this.activeBaseFontSize||(this.activeBaseFontSize=r.LARGE),this.getClosestBodyElement()){Array.from(this.closestBodyElem.classList).map(e=>{(e.startsWith(d.PILLAR_THEME_GLOBAL_CLASS_PREFIX)||e.startsWith(c.PILLAR_THEME_MODE_GLOBAL_CLASS_PREFIX))&&this.closestBodyElem.classList.remove(e),(e.startsWith(c.PILLAR_GLOBAL_CLASS_PREFIX)||e.startsWith(c.PILLAR_THEME_MODE_GLOBAL_CLASS_PREFIX))&&this.closestBodyElem.classList.remove(e)}),this.baseSeededAppearanceTheme!==p&&this.closestBodyElem.classList.add("oj-sp-theme-appearance-override"),this.isAOModeEnabledInShell()||this.closestBodyElem.classList.add(c.PILLAR_THEME_MODE_GLOBAL_CLASS_PREFIX+"GH");const e=this.properties.pillar?""+(c.PILLAR_GLOBAL_CLASS_PREFIX+this.activePillar):""+(d.PILLAR_THEME_GLOBAL_CLASS_PREFIX+this.activePillarTheme);this.closestBodyElem.classList.add(e,""+(c.PILLAR_THEME_MODE_GLOBAL_CLASS_PREFIX+this.activePillarThemeMode))}if(this.getClosestHTMLElement())switch(this.activeBaseFontSize){case"medium":this.closestHTMLElem.classList.add(u);break;case"small":this.closestHTMLElem.classList.add(h)}this.updatePillarThemePageProperties()},this.updatePillarThemePageProperties=()=>{var e,t;const i=Object.keys(a).find(e=>a[e]===this.activePillarTheme),o=Object.keys(l).find(e=>l[e]===this.activePillar);let s="",n="";this.baseSeededAppearanceTheme!==p||this.properties.pillar?(null===(e=E[o])||void 0===e||e.INLINE_BODY_CSS_VARIABLES.map(e=>{n+=`${e.KEY}:${this.evaluateExpression(c,e.VALUE)};`}),null===(t=E[o])||void 0===t||t.INLINE_CSS_VARIABLES.map(e=>{s+=`${e.KEY}:${this.evaluateExpression(c,e.VALUE)};`})):(C[i].INLINE_CSS_VARIABLES.map(e=>{s+=`${e.KEY}:${this.evaluateExpression(d,e.VALUE)};`}),C[i].INLINE_BODY_CSS_VARIABLES.map(e=>{n+=`${e.KEY}:${this.evaluateExpression(d,e.VALUE)};`})),this.injectedThemeCSSVariables(s),this.closestBodyElem.style.cssText+=n},this.evaluateExpression=(e,t)=>(t.includes(e.FND_GALLARY_CDN_LOCATION_EXPRESSION)&&(t=t.replace(e.FND_GALLARY_CDN_LOCATION_EXPRESSION,this.imagePath)),t),this.isValueInObject=(e,t)=>{if(e&&t){return Object.keys(e).map(t=>e[t]).indexOf(t)>-1}},this.adjustGlobalSplitBackgroundPosition=(e,t)=>{const i=document.documentElement;if(i){const s=!(!document.querySelector(".oj-sp-rw-ask-oracle-edge-to-edge-page")&&!document.querySelector(".oj-sp-rw-ask-simple-uishell-to-edge-page")),a=this.globalOffset(),n=(s||(null===e||0===e)&&a>=0?0:a+((0,o.isNullOrUndefined)(e)||e<0?this.isAOModeEnabledInShell()?0:270:e)+t)+"px";i.style.setProperty("--oj-sp-theme-global-bkgd-banner-height",n)}},this.globalOffset=()=>{let e=0;if(!this.isAOModeEnabledInShell()){const t=document.querySelector("oj-sp-global-header");t&&t.getBoundingClientRect().height>0&&(e=t.getBoundingClientRect().height)}return e},this.element=t.element,this.properties=t.properties,this.baseSeededAppearanceTheme=this.element.getAttribute("base-appearance-theme")?this.element.getAttribute("base-appearance-theme"):"Redwood",this.imagePath=e.toUrl("oj-ux-icon"),this.injectedThemeCSSVariables=i.observable(null),this.isAOModeEnabledInShell=i.observable("on"===this.properties.askOracle),this.propertyList=[{pillar:this.properties.pillar},{theme:this.properties.theme},{mode:this.properties.mode},{size:this.properties.scale}],this.updateThemesProp(this.propertyList)}activated(e){s.info(`oj-sp-pillar-theme ${this.element.id} activated`)}connected(e){s.info(`oj-sp-pillar-theme ${this.element.id} connected`)}bindingsApplied(e){s.info(`oj-sp-pillar-theme ${this.element.id} bindingsApplied`)}propertyChanged(e){const{property:t,value:i}=e;t===y&&"external"===e.updatedFrom&&this.updateThemesProp([{pillar:i}]),t===f&&"external"===e.updatedFrom&&this.updateThemesProp([{theme:i}]),t===b&&"external"===e.updatedFrom&&this.updateThemesProp([{mode:i}]),t===A&&"external"===e.updatedFrom&&(this.isAOModeEnabledInShell("on"===i),this.updatePillarThemeGlobalProperties()),t===v&&"external"===e.updatedFrom&&this.updateThemesProp([{size:i}])}}})),define("css!oj-sp/pillar-theme/pillar-theme",[],(function(){})),define("oj-sp/pillar-theme/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./pillar-theme.html","./pillar-theme","css!./pillar-theme.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-pillar-theme",{metadata:JSON.parse(o),view:s,viewModel:a.PillarThemeModel})})),define("oj-sp/in-app-navigation/in-app-navigation-viewModel",["require","exports","knockout","oj-sp/common-util/common-util","oj-sp/common-util/mobileVerticalSwipeHandler","oj-sp/common/EventDispatcher","ojs/ojanimation","ojs/ojresponsiveknockoututils","ojs/ojarraydataprovider","ojs/ojcontext","ojs/ojlogger","oj-sp/common/positionUtility","ojs/ojbutton","oj-sp/css-additions/loader","ojs/ojnavigationlist","oj-sp/pillar-theme/loader"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InAppNavigationViewModel=void 0;let u;var h,m,g;!function(e){e.ALL="all",e.NONE="none"}(h||(h={})),function(e){e.MEDIUM="md",e.SMALL="sm"}(m||(m={})),function(e){e[e.HIDDEN_STATE=0]="HIDDEN_STATE",e[e.SMALL_ONLY_STATE=48]="SMALL_ONLY_STATE",e[e.MEDIUM_AND_UP_STATE=64]="MEDIUM_AND_UP_STATE"}(g||(g={}));t.InAppNavigationViewModel=class{constructor(e){var t,y;this.refresh=()=>{document.querySelector(`#${this.uid}_IANNavList`).refresh()},this.showHandler=()=>{a.EventDispatcher.dispatch("spShow",this.composite,void 0)},this.hideHandler=()=>{a.EventDispatcher.dispatch("spHide",this.composite,void 0)},this.applicationActionHandler=e=>{a.EventDispatcher.dispatch(a.EventDispatcher.APPLICATION_ACTION_EVENT_NAME,this.composite,void 0)},this.handleSelectionAction=e=>{a.EventDispatcher.dispatch(a.EventDispatcher.SELECTION_ACTION_EVENT_NAME,this.composite,{currentId:e.detail.value,previousId:e.detail.previousValue}),this.previousInternalId(e.detail.previousValue),this.currentInternalId(e.detail.value)},this.selectionChanged=e=>{const t=this.setBusyResolve({description:"In-App Navigation - Selected Item Changed"});c.log("selectionChanged");const i=e.detail.value;a.EventDispatcher.dispatch(a.EventDispatcher.SELECTION_CHANGED_EVENT_NAME,this.composite,{currentId:this.convertToExternalId(i),previousId:this.convertToExternalId(this.previousSelectionInternalId())}),this.previousSelectionInternalId(i),this.currentSelectionInternalId(i),t()},this.dataMutate=()=>{this.navigationItems(this.processNavigationItems())},this.unregisterPositionListeners=()=>{p.PositionUtility.unsubscribe({componentName:this.uniqueComponentName})},this.processNavigationItems=()=>{this.currentInternalId(this.convertToInternalId(this.properties.selection));const e=this.alterNavigationDataItems(this.properties.navigationData?this.properties.navigationData.data:this.properties.navigationItems);return new l(e,{keyAttributes:"id"})},this.alterNavigationDataItems=e=>e.slice(0,8),this.calculateMobileButtonWidth=()=>{var e;let t=(null===(e=this.navigationItems())||void 0===e?void 0:e.data.length)+1;t>4&&(t=4);return 100/t+"%"},this.convertToExternalId=e=>(null==e?void 0:e.includes("_navItem_"))?e.split("_navItem_")[1]:e,this.convertToInternalId=e=>`${this.internalIdPrefix}${e}`,this.processApplicationAction=e=>{var t;(null===(t=e.label)||void 0===t?void 0:t.length)>0?this.applicationActionVisible(!0):this.applicationActionVisible(!1)},this.setBusyResolve=e=>d.getContext(this.composite).getBusyContext().addBusyState(e),this.handleInAppNavMobileViewVisibility=async e=>{var t;const i=this.getInAppNavContainer(),o=this.composite.querySelector(".oj-sp-in-app-navigation-viewer-content");if(!(null===(t=this.properties)||void 0===t?void 0:t.visible))return;const s={duration:"300ms",offsetY:"150px",persist:h.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},a={duration:"300ms",offsetY:"150px",persist:h.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},r={duration:"300ms",offsetX:"rtl"===document.dir?"-150px":"150px",persist:h.ALL,timingFunction:"cubic-bezier(.4, 0, .2, 1)"},l=window.getComputedStyle(i,null).getPropertyValue("bottom");if(e){if(o&&o.classList.contains("oj-helper-hidden-accessible"))return;i&&await n.slideOut(i,s),o.classList.add("oj-helper-hidden-accessible"),this.updateShellFixedBottomCssVariableValue(!1),this.hideHandler()}else{if(o&&!o.classList.contains("oj-helper-hidden-accessible"))return;o.classList.remove("oj-helper-hidden-accessible"),this.updateShellFixedBottomCssVariableValue(!0),this.showHandler(),"0px"===l?this.tagsSlideInAnimation(i,a):this.tagsSlideInAnimation(i,r)}},this.tagsSlideInAnimation=async(e,t)=>{await n.slideIn(e,t)},this.addSwipeHandlerForMobile=()=>{this.mobileNavigationBarHandler=new s.MobileVerticalSwipeHandler,this.mobileNavigationBarHandler.enableHandler(),this.mobileNavigationBarHandler.addEventListener(s.SWIPE_TYPE.SWIPE_UP,this.handleInAppNavMobileViewVisibility,!0),this.mobileNavigationBarHandler.addEventListener(s.SWIPE_TYPE.SWIPE_DOWN,this.handleInAppNavMobileViewVisibility,!1)},this.updateShellFixedBottomCssVariableValue=e=>{const t=e?this.screenRange()===m.SMALL||this.screenRange()===m.MEDIUM?g.SMALL_ONLY_STATE:g.MEDIUM_AND_UP_STATE:g.HIDDEN_STATE,i=isNaN(u)?t:t-u;u=t,(0,o.updateShellFixedBottomCssVariable)(i)};const f=this.setBusyResolve({description:"In-App Navigation - Startup"});this.composite=e.element,this.uid=e.uniqueId,this.bodyElement=document.body,this.uniqueComponentName=this.uid+"_in-app-navigation",this.properties=e.properties,this.internalIdPrefix=this.uid+"_navItem_",this.currentInternalId=i.observable(),this.currentInternalId.subscribe(e=>{this.handleInternalIdChange(e)}),this.currentSelectionInternalId=i.observable(),this.screenRange=r.createScreenRangeObservable(),this.screenRange.subscribe(e=>{this.isSmallMediumScreen("sm"===e||"md"===e),this.isSmallScreen("sm"===e),this.updateShellFixedBottomCssVariableValue(this.componentVisible())}),this.isSmallMediumScreen=i.observable("sm"===this.screenRange()||"md"===this.screenRange()),this.isSmallScreen=i.observable("sm"===this.screenRange()),this.componentVisible=i.observable(),this.componentVisible.subscribe(e=>{e?this.bodyElement.classList.add("oj-sp-inappnav-visible"):this.bodyElement.classList.remove("oj-sp-inappnav-visible"),this.showHideHandler(e)}),this.componentVisible(null==this.properties.visible||this.properties.visible),this.applicationActionVisible=i.observable(!1),this.processApplicationAction(this.properties.applicationAction),this.previousInternalId=i.observable(void 0),this.previousSelectionInternalId=i.observable(void 0),this.navigationItems=i.observable(this.processNavigationItems()),this.askOracleEnabled=i.observable((0,o.isAskOracleEnabled)()),this.mobileButtonWidth=i.observable(this.calculateMobileButtonWidth()),this.isOverflowClickEventRegistered=i.observable(!1),this.lastY=0,null===(t=this.properties.navigationData)||void 0===t||t.addEventListener("mutate",this.dataMutate),null===(y=this.properties.navigationData)||void 0===y||y.addEventListener("refresh",this.dataMutate),f()}activated(e){c.log(`%c CCA ${this.uid} activated`,"background: #222; color: #bada55")}connected(e){var t,i,o;c.log(`%c CCA ${this.uid} connected`,"background: #222; color: #bada55"),this.updateShellFixedBottomCssVariableValue(null===(t=e.properties)||void 0===t?void 0:t.visible),this.addClickEvents(),this.addSwipeHandlerForMobile(),this.setupResizeListener(),this.registerWithPositionManager();const s=null===(i=getComputedStyle(e.element))||void 0===i?void 0:i.display;(null===(o=e.properties)||void 0===o?void 0:o.visible)&&"none"!==s?this.bodyElement.classList.add("oj-sp-inappnav-visible"):this.bodyElement.classList.remove("oj-sp-inappnav-visible")}bindingsApplied(e){c.log(`%c CCA ${this.uid} bindingsApplied`,"background: #222; color: #bada55")}propertyChanged(e){var t,i;const o=this.setBusyResolve({description:"In-App Navigation - Property Changed"});c.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} => ${JSON.stringify(e.value)}`,"background: #222; color: #bada55"),"applicationAction"===e.property&&this.processApplicationAction(e.value),"navigationItems"!==e.property&&"navigationData"!==e.property||(null===(t=this.properties.navigationData)||void 0===t||t.addEventListener("mutate",this.dataMutate),null===(i=this.properties.navigationData)||void 0===i||i.addEventListener("refresh",this.dataMutate),this.navigationItems(this.processNavigationItems())),"selection"===e.property&&(this.currentInternalId(this.convertToInternalId(e.value)),this.showHideHandler(this.properties.visible)),"visible"===e.property&&this.componentVisible(e.value),o()}disconnected(e){var t,i,o;c.log(`%c CCA ${this.uid} disconnected`,"background: #222; color: #bada55"),this.unregisterPositionListeners(),this.teardownResizeListener(),this.updateShellFixedBottomCssVariableValue(!1),null===(t=this.mobileNavigationBarHandler)||void 0===t||t.removeHandler(),null===(i=this.properties.navigationData)||void 0===i||i.removeEventListener("mutate",this.dataMutate),null===(o=this.properties.navigationData)||void 0===o||o.removeEventListener("refresh",this.dataMutate),this.bodyElement.classList.remove("oj-sp-inappnav-visible")}async registerWithPositionManager(){await this.isInAppNavListEleReady();const e=this.getInAppNavContainer(),t={componentName:this.uniqueComponentName,component:e,offsetCalculationSubscription:{offsetOptions:{position:"bottom",level:p.PositionUtility.LEVEL_MAP.footerNavigation},onOffsetChange:t=>{e.style.bottom=t.bottom+"px"}}};e&&p.PositionUtility.subscribe(t)}handleInternalIdChange(e){const t=this.setBusyResolve({description:"In-App Navigation - Selected Item Changed"});c.log("currentInternalId"),e!==this.internalIdPrefix&&this.properties.selection!==this.convertToExternalId(e)&&(this.properties.selection=this.convertToExternalId(e)),t()}teardownResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}async onResize(){this.isOverflowClickEventRegistered(!1),this.addClickEvents()}setupResizeListener(){this.teardownResizeListener(),this.resizeListener=(0,o.debounce)(()=>this.onResize(),250),window.addEventListener("resize",this.resizeListener)}async addClickEvents(){await this.isInAppNavListEleReady()}async isInAppNavListEleReady(){const e=this.getInAppNavListEle();return await this.getBusyContext(e).whenReady()}getInAppNavListEle(){return this.composite.querySelector(".oj-sp-in-app-navigation-nav-list")}getInAppNavLiElements(){return this.composite.querySelectorAll(".oj-sp-in-app-navigation-li")}getNavListOverflowMenuElement(){return document.querySelector(".oj-navigationlist-overflow-menu")}getOjMenuItemElements(){return document.querySelectorAll(".oj-menu-item")}getMoreLabelElement(){return this.composite.querySelector(".oj-navigationlist-overflow-menu-item")}showHideHandler(e){this.getBusyContext(this.composite).whenReady().then(()=>{this.updateShellFixedBottomCssVariableValue(e),e?this.showHandler():this.hideHandler()})}getBusyContext(e){return d.getContext(e).getBusyContext()}getInAppNavContainer(){return this.composite.querySelector(".oj-sp-in-app-navigation-container")}}})),define("css!oj-sp/in-app-navigation/in-app-navigation-styles",[],(function(){})),define("oj-sp/in-app-navigation/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./in-app-navigation-view.html","./in-app-navigation-viewModel","css!./in-app-navigation-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-in-app-navigation",{metadata:JSON.parse(o),view:s,viewModel:a.InAppNavigationViewModel})})),define("text!oj-sp/input-address/component.json",[],(function(){return'{"name":"input-address","displayName":"Input Address","description":"Input Address component.","type":"composite","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0"},"version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","icon":{"iconPath":"images/ico-input-address.svg"},"properties":{"addressData":{"displayName":"Address Data","description":"Address object with all properties.","required":true,"type":"object","writeback":true},"autofocus":{"description":"The property is used to enable focus on load of the component","displayName":"Autofocus","type":"boolean","value":false,"writeback":false},"countries":{"displayName":"Country Data Provider","description":"Country Data Provider fetches all the countries","required":true,"type":"oj.DataProvider","writeback":false},"describedBy":{"displayName":"Described By","description":"Description component Id for the Input Address Component Form","type":"string|null"},"disabled":{"displayName":"Disabled","description":"Disable Input Address.","type":"boolean","value":false,"writeback":false},"displayOptions":{"displayName":"Input Address Display options","description":"Input Address Display options for custom messages.","type":"object|null","writeback":false,"properties":{"messages":{"displayName":"Custom Message Display","description":"If \'display\' is chosen then, all the validation messages will be shown.","type":"string","value":"none","writeback":false,"enumValues":["display","none"],"propertyEditorValues":{"display":{"description":"Show custom messages.","displayName":"Display"},"none":{"description":"Don\'t show custom messages.","displayName":"None"}}},"country":{"displayName":"Countries Dropdown Display","description":"This property will control the visibility of the countries dropdown while editing the address fields in manual mode.","type":"string","value":"on","writeback":false,"enumValues":["readonly","on","off"],"propertyEditorValues":{"readonly":{"description":"Show countries dropdown for manual mode in readonly.","displayName":"Readonly"},"on":{"description":"Show countries dropdown for manual mode.","displayName":"ON"},"off":{"description":"Hide countries dropdown for manual mode.","displayName":"OFF"}}},"resetView":{"displayName":"Reset View","description":"Change the view after the reset method.","type":"string","value":"auto","writeback":false,"enumValues":["auto","search"],"propertyEditorValues":{"auto":{"description":"Default behaviour for reset method.","displayName":"Auto"},"search":{"description":"View is changed to search while in auto mode.","displayName":"Search"}}}}},"geographies":{"displayName":"Geography Data Provider","description":"Data provider to be used for geography LOVs.","type":"oj.DataProvider","writeback":false},"help":{"displayName":"Help","description":"Component help information.","type":"object","properties":{"instruction":{"description":"Represents advisory information for the component.","type":"string"}}},"helpHints":{"displayName":"Help hints","description":"Component help information.","type":"object","properties":{"definition":{"description":"A type user assistance text used to provide guidance to help the user understand what data to enter or select.","type":"string"}}},"itemText":{"displayName":"Display label configuration","description":"Configuration object that contains attribute(s) which represent display label for different APIs","type":"object","writeback":false,"properties":{"searchApi":{"displayName":"Search API display label attribute name(s)","description":"Attribute name(s) that represents the display label for search API","type":"string|string[]"},"countriesApi":{"displayName":"Countries API display label attribute name(s)","description":"Attribute name(s) that represents the display label for countries API","type":"string|string[]"}}},"labelEdge":{"displayName":"Label Edge","description":"Specifies how the label of the component is aligned when the label-hint attribute is set on the component.","type":"string","writeback":false,"enumValues":["none","inside","provided"],"binding":{"consume":{"name":"labelEdge"}},"propertyEditorValues":{"none":{"displayName":"None","description":"Displays no label."},"inside":{"displayName":"Inside","description":"Displays label inside the input address field."},"provided":{"displayName":"Provided","description":"Displays label top of the input address field."}}},"labelHint":{"displayName":"Label Hint","description":"Display label to be used for address search field or readonly field","type":"string"},"labelledBy":{"displayName":"Labelled By","description":"Id of the Label for the Input Address Component Form","type":"string"},"messagesCustom":{"type":"oj.Message[]","displayName":"Custom Messages","description":"Custom messages to be given for info/ warning/ error scenarios","writeback":true,"value":[],"extension":{"audit":{"ignore":["jetwc-supproperty-propagation"]}},"properties":{"detail":{"displayName":"Detail","description":"Message details","type":"string"},"severity":{"displayName":"Severity","description":"Type of message displayed","type":"string","enumValues":["confirmation","info","error","warning","none"],"propertyEditorValues":{"confirmation":{"description":"Confirmation","displayName":"Confirmation"},"info":{"description":"Info","displayName":"Info"},"error":{"description":"Error","displayName":"Error"},"warning":{"description":"Warning","displayName":"Warning"},"none":{"description":"None","displayName":"None"}}},"summary":{"displayName":"Summary","description":"Message Title","type":"string"}}},"readonly":{"displayName":"Read Only","description":"If passed as true and if address exists (provided using addressData property), then it would render it in read-only formatted address","type":"boolean","binding":{"consume":{"name":"readonly"}}},"readonlyEventEnabled":{"displayName":"Read Only Link","description":"If passed as true and if address exists (provided using addressData property), then it would render it in read-only formatted address with a clickable option","type":"boolean","value":false},"required":{"displayName":"Required","description":"If set to true, required property would set on mandatory fields per formatting setup","type":"boolean","value":false},"searchData":{"displayName":"Search Address Data Provider","description":"Search Address Data Provider provides search results and expects Id, Text and Description","type":"oj.DataProvider","writeback":false},"searchSelectedAddress":{"displayName":"Selected Address Id","description":"Selected Address Id fetches the full address","type":"string","writeback":true},"showBusyIndicator":{"displayName":"Show Busy Indicator","description":"If set, form will show busy loading icon similar to dynamic form in pending status.","type":"boolean","value":false,"status":[{"type":"deprecated","since":"2110.0.0","description":"The \'showBusyIndicator\' property is no longer supported."}]},"styleFormats":{"displayName":"Address style formats","description":"styleFormats provides the address format with respect to each country. It needs to support fetchByKeys with key addressData.country. Fetch results need to match { addressStyleFormat: [{ attributeLabel: string, attributeName: string, lineNumber: number, linePosition: number, delimiterBefore: string, delimiterAfter: string, uppercase: boolean, required: boolean, geography: string, geographyLevel: number, geographyLevelAttributes: any, geographyLevelFilters: any, geographyLevelValue: string, geographyLevelDependentValues: any }] }","type":"oj.DataProvider","writeback":false},"type":{"displayName":"Type","description":"Type for having auto and only search type","type":"string","value":"auto","enumValues":["auto","search","manual"],"propertyEditorValues":{"auto":{"displayName":"Auto","description":"The default type is set to search and the types can toggle between search and manual type."},"search":{"displayName":"Search only Type","description":"This enforces the type to be a search only type and no edit type."},"manual":{"displayName":"Edit only Type","description":"This enforces the type to be a edit only type and no search type."}},"writeback":false},"userAssitanceDensity":{"displayName":"User Assitance Denity","description":"Specifies the density of the form component\'s user assistance presentation","type":"string","status":[{"type":"deprecated","since":"2201.0.0","description":"Use userAssistanceDensity instead."}],"enumValues":["efficient","compact","reflow"],"propertyEditorValues":{"efficient":{"description":"The component\'s messages, help, hints, and required are all shown inline under the field with reserved space underneath."},"compact":{"description":"The component\'s messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required."},"reflow":{"description":"If reflow, messages, help, hints, and required are all shown inline under the field with no reserved space."}},"binding":{"consume":{"name":"userAssistanceDensity"}}},"userAssistanceDensity":{"displayName":"User Assistance Density","description":"Specifies the density of the form component\'s user assistance presentation","type":"string","enumValues":["efficient","compact","reflow"],"propertyEditorValues":{"efficient":{"displayName":"Efficient","description":"The component\'s messages, help, hints, and required are all shown inline under the field with reserved space underneath."},"compact":{"displayName":"Compact","description":"The component\'s messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required."},"reflow":{"displayName":"Reflow","description":"If reflow, messages, help, hints, and required are all shown inline under the field with no reserved space."}}},"valid":{"displayName":"Valid","description":"The current valid state of the component.","type":"string","value":"valid","enumValues":["invalidHidden","invalidShown","pending","valid"],"propertyEditorValues":{"invalidHidden":{"description":"The component has invalid messages hidden and no invalid messages showing. An invalid message is one with severity \'error\' or higher."},"invalidShown":{"description":"The component has invalid messages showing. An invalid message is one with severity \'error\' or higher."},"pending":{"description":"The component is waiting for the validation state to be determined."},"valid":{"description":"The component is valid."}},"writeback":true,"readOnly":true,"visible":false}},"methods":{"focus":{"description":"Focuses on the component."},"refresh":{"description":"Refreshes the component. Returns void.","return":"void"},"reset":{"description":"Resets the component by clearing all messages and messages attributes, and updates the component\'s display value using the attribute value.","return":"void"},"showMessages":{"description":"Takes all deferred messages and shows them.","return":"void"},"validate":{"description":"Validates the component\'s state. Returns Promise resolves to \'valid\' if the value passed is valid. The Promise resolves to \'invalid\' if the value passed is null, empty or invalid.","return":"Promise<string>"}},"events":{"spReadonlyAction":{"bubbles":true,"description":"spReadonlyAction event will be triggered when the readonly text as a link is clicked","displayName":"Read Only Address link click event","eventGroup":"common"},"spSearchItemSelected":{"bubbles":true,"description":"When one of the addresses from search result is selected this event will be fired","displayName":"Search Address select event","detail":{"key":{"description":"The Key for the selected in the dropdown","type":"string"}},"eventGroup":"common"}},"slots":{},"extension":{"catalog":{"category":"Redwood Forms & Inputs","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Input%20Address%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectrainputaddress.html","coverImage":"extension/catalog/images/ico-input-address.svg"},"vbdt":{"pi":{"events":{"suggestions":[{"type":"component","name":"spSearchItemSelected","mappings":[{"variableName":"key","expression":"{{$event.detail.key}}","type":"string"}]},{"type":"component","name":"spReadonlyAction"}]},"layouts":{"general":{"customizers":[{"propertyName":"type","type":"enumeration","propertyEditorValues":{"auto":{"displayName":"Auto"},"search":{"displayName":"Search Only"},"manual":{"displayName":"Edit Only"}}},{"type":"heading","displayName":"Item Text","subHeading":false,"underline":true},{"type":"drill-to-layout","label":"Configuration","layout":"itemTextPanel"},{"propertyName":"autofocus"},{"propertyName":"disabled"},{"propertyName":"readonly"},{"propertyName":"readonlyEventEnabled"},{"propertyName":"required"},{"type":"heading","displayName":"Help Options","subHeading":false,"underline":true},{"type":"enumeration","displayName":"Help","propertyEditorValues":{"instructions":{"displayName":"Instructions"},"definition":{"displayName":"Hints"}},"handler":"storage","storage":{"type":"componentStorage","key":"help-option","default":"instructions"}},{"propertyName":"help.instruction","displayName":"Help Instructions","condition":{"storage":{"type":"componentStorage","key":"help-option","value":"instructions","default":"instructions"}}},{"propertyName":"helpHints.definition","displayName":"Help Hints Definition","condition":{"storage":{"type":"componentStorage","key":"help-option","value":"definition"}}},{"type":"heading","displayName":"Label","subHeading":false,"underline":true},{"propertyName":"labelEdge","type":"enumeration"},{"propertyName":"labelHint"},{"propertyName":"labelledBy"},{"type":"heading","displayName":"Messages","subHeading":false,"underline":true},{"propertyName":"displayOptions.messages","type":"enumeration","displayName":"Message Custom Display"},{"propertyName":"searchSelectedAddress","displayName":"Search Selected Address"}]},"itemTextPanel":{"customizers":[{"propertyName":"itemText.searchApi","displayName":"Search API"},{"propertyName":"itemText.countriesApi","displayName":"Countries API"}]},"data":{"customizers":[{"propertyName":"addressData"},{"propertyName":"countries"},{"propertyName":"searchData"},{"propertyName":"geographies"},{"propertyName":"styleFormats"}]}}},"visibility":"oracleInternal"}}}'})),define("text!oj-sp/input-address/input-address-view.html",[],(function(){return'<html><head></head><body><div class="container"><div :class="[[{\'form-busy\': $properties.showBusyIndicator}]]"><oj-form-layout columns="1":id="[[uid + \'_address_form\']]"class="oj-flex-item oj-sm-flex-initial oj-formlayout-full-width":aria-labelledby="[[$properties.labelledBy]]":aria-describedby="[[$properties.describedBy]]"user-assistance-density="[[userAssistanceDensity()]]"readonly="[[$properties.readonly]]"label-edge="[[$properties.labelEdge === \'provided\' ? \'top\' : undefined]]"><oj-bind-if test="[[ !addressInEditMode() &amp;&amp; !$properties.readonly]]"><oj-select-single :title="[[selectedAddressTitle]]"label-hint="[[properties.labelHint]]"label-edge="[[$properties.labelEdge]]":id="[[uid + \'_address-search-select\']]"on-value-item-changed="[[addressValueChangeListener]]"value-item="{{selectedAddress}}"labelled-by="[[$properties.labelledBy]]"help.instruction="[[$properties.help ? $properties.help.instruction : \'\']]"help-hints.definition="[[$properties.helpHints &amp;&amp; $properties.helpHints.definition ? $properties.helpHints.definition : \'\']]"placeholder="[[res.searchForAnAddress]]"data="[[ cdp ? cdp : null]]"on-valid-changed="[[validChangedListener]]"user-assistance-density="[[userAssistanceDensity()]]"messages-custom="{{$properties.messagesCustom}}"disabled="[[$properties.disabled]]"display-options.messages="[[$properties.displayOptions.messages]]"required="[[$properties.required]]"><template slot="itemTemplate"><oj-bind-if test="[[$current.data.value === \'no-data\']]"><div class="oj-sm-padding-4x-bottom"><oj-bind-text value="[[res.cannotFindAddress]]"></oj-bind-text></div><div><oj-bind-if test="[[!isEditDisabled()]]"><a :id="[[uid + \'_type-in-address\']]"><oj-bind-text value="[[res.typeInAddress]]"></oj-bind-text></a></oj-bind-if></div></oj-bind-if><oj-bind-if test="[[$current.data.value !== \'no-data\']]"><oj-highlight-text text="[[$current.data.label]]"match-text="[[$current.searchText]]"></oj-highlight-text></oj-bind-if></template></oj-select-single><oj-bind-if test="[[(!addressInEditMode() &amp;&amp; isEditLinkEnabled()) &amp;&amp; !isDisabled()]]"><a href="#":id="[[uid + \'_edit-address-link\']]"class="oj-link-standalone"on-click="[[editAddress]]"><oj-bind-text value="[[res.editAddress]]"></oj-bind-text></a></oj-bind-if></oj-bind-if><oj-bind-if test="[[ addressInEditMode() &amp;&amp; !$properties.readonly]]"><oj-bind-if test="[[!(($properties.type !== \'search\') &amp;&amp; $properties.displayOptions.country === \'off\')]]"><oj-select-single :id="[[uid + \'_country\']]"label-hint="[[res.countryRegion]]"required="true"data="[[$properties.countries]]"value="[[selectedCountry]]"item-text="[[getCountryItemText]]":aria-controls="[[uid + \'_address_form\']]"disabled="[[$properties.disabled]]"readonly="[[ $properties.disabled ? false : (($properties.type !== \'search\') &amp;&amp; $properties.displayOptions.country === \'readonly\')]]"display-options.messages="[[$properties.displayOptions.messages]]"label-edge="[[$properties.labelEdge]]"user-assistance-density="[[userAssistanceDensity()]]"on-valid-changed="[[validChangedListener]]"on-value-changed="[[countryValueChangeListener]]"class="oj-flex-item oj-sm-12"></oj-select-single></oj-bind-if><oj-bind-if test="[[showAddressFieldsLayout()]]"><oj-bind-for-each data="[[styleFormatDataProvider]]"><template data-oj-as="line"><oj-form-layout class="oj-formlayout-full-width"max-columns="[[getColumns(styleFormatDataProvider().getChildDataProvider(line.data.lineNumber).treeData.length)]]"><oj-bind-for-each data="[[styleFormatDataProvider().getChildDataProvider(line.data.lineNumber)]]"><template data-oj-as="item"><oj-bind-if test="[[!item.data.geographyLevel]]"><oj-input-text :id="[[uid + \'_address_\' + item.data.attributeName]]"label-hint="[[item.data.attributeLabel]]"value="[[getAddressMap(item.data.attributeName)]]"on-value-changed="[[addressChangeListener]]"display-options.messages="[[$properties.displayOptions.messages]]"required="[[item.data.required &amp;&amp; $properties.required]]"label-edge="[[$properties.labelEdge]]"user-assistance-density="[[userAssistanceDensity()]]"on-valid-changed="[[validChangedListener]]"disabled="[[$properties.disabled]]"></oj-input-text></oj-bind-if><oj-bind-if test="[[item.data.geographyLevel]]"><oj-select-single :id="[[uid + \'_address_geography_\' + item.data.attributeName]]"label-hint="[[item.data.attributeLabel]]"data="[[ geographyLOVs.get(item.data.geographyLevel) ]]"item-text="primaryText"required="[[item.data.required &amp;&amp; $properties.required]]"disabled="[[$properties.disabled]]"value-item="{{ geographyValueItems.get(item.data.attributeName) }}"on-value-item-changed="[[geographyValueItemChangeListener(item.data.attributeName)]]"display-options.messages="[[$properties.displayOptions.messages]]"user-assistance-density="[[userAssistanceDensity()]]"label-edge="[[$properties.labelEdge]]"on-valid-changed="[[validChangedListener]]"><template slot="itemTemplate"><div><oj-highlight-text text="[[ $current.data.primaryText ]]"match-text="[[ $current.searchText ]]"></oj-highlight-text></div><div><oj-bind-text value="[[ $current.data.secondaryText ]]"></oj-bind-text></div></template></oj-select-single></oj-bind-if></template></oj-bind-for-each></oj-form-layout></template></oj-bind-for-each></oj-bind-if><oj-bind-if test="[[ (!!properties.searchData &amp;&amp; !disableSearchSwitchLink() &amp;&amp; !isDisabled()) ]]"><a href="#":id="[[uid + \'_search-address-link\']]"class="oj-link-standalone"on-click="[[switchMode]]"><oj-bind-text value="[[res.searchAddress]]"></oj-bind-text></a></oj-bind-if></oj-bind-if><oj-bind-if test="[[ $properties.showBusyIndicator ]]"><div class="busy-indicator absolute"><div class="oj-icon oj-listbox-loading-icon"></div></div></oj-bind-if><oj-bind-if test="[[$properties.readonly]]"><oj-bind-if test="[[properties.readonlyEventEnabled]]"><div><oj-bind-if test="[[(properties.labelEdge !== \'none\' &amp;&amp; properties.labelEdge !== \'provided\')]]"><div class="oj-label-group"><oj-label data-oj-internal="":id="[[uid + \'_readonly-address-labelled-by|label\']]"class="oj-component-initnode"><oj-bind-text :id="[[uid + \'_readonly-address|hint\']]"value="[[$properties.labelHint]]"></oj-bind-text></oj-label></div></oj-bind-if><a href="#":id="[[uid + \'_readonly-link-address\']]"class="oj-link-standalone"><div :aria-label="[[$properties.labelEdge !== \'provided\' ? $properties.labelHint : undefined]]":aria-labelledby="[[$properties.labelEdge === \'provided\' ?  $properties.labelledBy : $properties.labelEdge === \'inside\' ? `${uid}_readonly-address-labelled-by|label` : undefined]]":id="[[uid + \'_readonly-link-address-div\']]"data-bind="html: readonlyAddress"></div></a></div></oj-bind-if><oj-bind-if test="[[!properties.readonlyEventEnabled]]"><oj-text-area :id="[[uid + \'_readonly-address\']]"label-hint="[[$properties.labelHint]]"label-edge="[[$properties.labelEdge]]"value="[[readonlyAddress]]"labelled-by="[[$properties.labelledBy]]"rows="[[readonlyAddressRows]]"user-assistance-density="[[userAssistanceDensity()]]"max-rows="-1"readonly="[[$properties.readonly]]"></oj-text-area></oj-bind-if></oj-bind-if></oj-form-layout></div></div></body></html>'})),define("oj-sp/input-address/search-address-dataprovider",["ojs/ojarraytreedataprovider","ojs/ojarraydataprovider"],(function(e,t){"use strict";return class{constructor(e){this._addresNotFoundListItem={value:"no-data"},this.noDataTemplateLoaded=!1,this._wrappedDataProvider=new t([this._addresNotFoundListItem],{keyAttributes:"value"}),this._baseDataProvider=e,this._addressSearchApi=null,this.AddressAsyncIterator=class{constructor(e,t,i){this._parent=e,this._searchText=t,this._baseAsyncIterator=null,this._params=i}next(){return this._baseAsyncIterator?this._baseAsyncIterator.next():new Promise((e,i)=>{const o=this;if(o._searchText){const s=[];this._parent._baseDataProvider.dataProvider.fetchFirst(o._params)[Symbol.asyncIterator]().next().then(i=>{const{value:a}=i,{data:n}=a;n.length>0?(n.forEach(e=>{let t="";if("string"==typeof this._parent._baseDataProvider.itemText)t=e[this._parent._baseDataProvider.itemText]||"";else{const i=[];this._parent._baseDataProvider.itemText.forEach(t=>{e[t]&&i.push(e[t])}),t=i.join(", ")}s.push(Object.assign(e,{value:e.Id,label:t}))}),s.length>0?(o._parent._wrappedDataProvider=new t(s,{keyAttributes:"value"}),o._baseAsyncIterator=o._parent._wrappedDataProvider.fetchFirst({})[Symbol.asyncIterator](),e(o._baseAsyncIterator.next())):(o._parent._wrappedDataProvider=new t([this._parent._addresNotFoundListItem],{keyAttributes:"value"}),o._baseAsyncIterator=o._parent._wrappedDataProvider.fetchFirst({})[Symbol.asyncIterator](),e(o._baseAsyncIterator.next()))):(o._parent._wrappedDataProvider=new t([this._parent._addresNotFoundListItem],{keyAttributes:"value"}),o._baseAsyncIterator=o._parent._wrappedDataProvider.fetchFirst({})[Symbol.asyncIterator](),e(o._baseAsyncIterator.next()))},e=>{o._parent._wrappedDataProvider=new t([],{keyAttributes:"value"}),o._baseAsyncIterator=o._parent._wrappedDataProvider.fetchFirst({})[Symbol.asyncIterator](),o._baseAsyncIterator.next(),i(e)})}else o._parent._wrappedDataProvider=new t([],{keyAttributes:"value"}),o._baseAsyncIterator=o._parent._wrappedDataProvider.fetchFirst({})[Symbol.asyncIterator](),e(o._baseAsyncIterator.next())})}},this.AddressAsyncIterable=class{constructor(e){this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}}}containsKeys(e){return this._wrappedDataProvider.containsKeys(e)}getCapability(e){return this._wrappedDataProvider.getCapability(e)}getTotalSize(){return this._wrappedDataProvider.getTotalSize()}isEmpty(){return this._wrappedDataProvider.isEmpty()}fetchFirst(e){let t;e&&e.filterCriterion&&(t=e.filterCriterion.text);const i=new this.AddressAsyncIterator(this,t,e);return new this.AddressAsyncIterable(i)}fetchByOffset(e){return this._wrappedDataProvider.fetchByOffset(e)}fetchByKeys(e){return this._wrappedDataProvider.fetchByKeys(e)}addEventListener(e,t){this._wrappedDataProvider.addEventListener(e,t)}removeEventListener(e,t){this._wrappedDataProvider.removeEventListener(e,t)}dispatchEvent(e){return this._wrappedDataProvider.dispatchEvent(e)}}})),define("oj-sp/input-address/input-address-viewModel",["require","exports","knockout","ojs/ojcontext","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common-util/common-util","oj-sp/common/EventDispatcher","ojs/ojarraytreedataprovider","ojs/ojlistdataproviderview","ojs/ojlogger","./search-address-dataprovider","ojs/ojresponsiveknockoututils","ojs/ojbinddom","ojs/ojformlayout","ojs/ojhighlighttext","ojs/ojinputtext","ojs/ojknockout","ojs/ojlistview","ojs/ojselectsingle"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputAddressViewModel=void 0;const u={key:null,data:null,metadata:null},h="background: #222; color: #bada55";t.InputAddressViewModel=class{constructor(e){this.isEditable=i.observable(!1),this.error=i.observableArray(),this.cdp=null,this.showBusyIndicator=i.observable(!1),this.readonlyAddressRows=i.observable(0),this.readonlyAddress=i.observable(""),this.lineBreakChar="\n",this.styleFormatDataProviderMap=i.observableArray([]),this.layoutData=[],this.selectedAddressTitle=i.observable(null),this.countryFullNames=new Map,this.presetAddressMap=i.observable(""),this.currentStyleFormatGeographyData=[],this.type={AUTO:"auto",MANUAL:"manual",SEARCH:"search"},this.addEventListenerForStyleFormat=e=>{null==e||e.removeEventListener("refresh"),e&&e.addEventListener("refresh",async e=>{await this.updateStyleFormat(this.calculateCountry())})},this.actionFocus=e=>{var t,i;(null===(i=null===(t=e.target)||void 0===t?void 0:t.lastElementChild)||void 0===i?void 0:i.value)&&e.preventDefault()},this.styleFormatRefreshListener=async()=>{await this.updateStyleFormat(this.properties.addressData.Country)},this.getAddressForSearch=async()=>{var e,t,i;if(this.isValidAddressData(this.properties.addressData)){let o;this.styleFormatDataProviderMap().length>0?o=await this.getAddressMapForSearch():this.properties.styleFormats?(await this.updateStyleFormat(this.calculateCountry()),o=await this.getAddressMapForSearch()):o=this.properties.addressData.fullAddress;const s=Object.create((null===(e=this.selectedAddress())||void 0===e?void 0:e.data)||{});s.label=o,s.isCustom=!0,this.presetAddressMap((null===(t=this.selectedAddress())||void 0===t?void 0:t.key)?"":o),o?this.selectedAddress(Object.assign(Object.assign(Object.assign({},this.selectedAddress()),{data:s}),{key:(null===(i=this.selectedAddress())||void 0===i?void 0:i.key)||o})):this.selectedAddress(u)}else this.selectedAddress(u)},this.getAddressMap=e=>this.properties.addressData[e],this.calculateEditDisabled=e=>(e||this.properties.type)===this.type.SEARCH,this.addressChangeListener=(e,t)=>{const i={};i[t.data.attributeName]=this.updateAddressDataField(t.data.attributeName,e.detail.value),this.properties.addressData=Object.assign(Object.assign({},this.properties.addressData),i)},this.countryValueChangeListener=e=>{if(null==e?void 0:e.detail){const t=e.detail.value?e.detail.value:this.calculateCountry();t!==this.properties.addressData.Country&&this.resetAddressWithCountry(t)}},this.resetAddressWithCountry=e=>{const t={};Object.keys(this.properties.addressData).forEach(i=>{const o="Country"===i?e:"";t[i]=this.updateAddressDataField(i,o)}),this.properties.addressData=Object.assign(Object.assign({},this.properties.addressData),t)},this.checkAddressData=e=>this.isValidAddressData(e),this.searchRefresh=async()=>{let e=this.getSearchDataSelectSingle();if(e){const t=o.getContext(e).getBusyContext();await t.whenReady(),e=this.getSearchDataSelectSingle(),null==e||e.refresh()}},this.addressValueChangeListener=async e=>{var t,i,o,s,a,r,l,d,c,p,u,h,m,g,y,f,b,v,j,A;const C=null===(i=null===(t=e.detail)||void 0===t?void 0:t.value)||void 0===i?void 0:i.key,E=C===(null===(s=null===(o=e.detail)||void 0===o?void 0:o.previousValue)||void 0===s?void 0:s.key),T=null===(l=null===(r=null===(a=e.detail)||void 0===a?void 0:a.value)||void 0===r?void 0:r.data)||void 0===l?void 0:l.isCustom;if((null===(p=null===(c=null===(d=e.detail)||void 0===d?void 0:d.previousValue)||void 0===c?void 0:c.data)||void 0===p?void 0:p.isCustom)&&E&&(null===(h=null===(u=e.detail)||void 0===u?void 0:u.value)||void 0===h?void 0:h.data)&&!T)await this.getAddressForSearch();else if(T&&await this.searchRefresh(),"no-data"===C)this.isEditDisabled()||(this.addressInEditMode(!0),this.validProperty(Object.assign(Object.assign({},this.validProperty()),{search:{}}))),this.addressInEditMode()&&this.focusElement(this.uid+"_country"),this.properties.searchSelectedAddress="";else if(C){const t=document.getElementById(this.uid+"_address-search-select");await this.displayTooltip(null==t?void 0:t.getElementsByTagName("input")[0]);const i=C===this.presetAddressMap();if(!this.properties.disabled&&!i&&!T){const t={bubbles:!1,detail:{data:null===(g=null===(m=e.detail)||void 0===m?void 0:m.value)||void 0===g?void 0:g.data,key:C}};this.composite.dispatchEvent(new CustomEvent(n.EventDispatcher.SEARCH_ITEM_SELECT_EVENT_NAME,t))}this.properties.disabled||i||T||(this.properties.searchSelectedAddress=C)}else!C&&(null===(f=null===(y=e.detail)||void 0===y?void 0:y.previousValue)||void 0===f?void 0:f.data)&&(null===(v=null===(b=e.detail)||void 0===b?void 0:b.previousValue)||void 0===v?void 0:v.key)&&!(null===(A=null===(j=e.detail)||void 0===j?void 0:j.value)||void 0===A?void 0:A.data)&&(this.resetAddressWithCountry(this.calculateCountry()),this.properties.searchSelectedAddress="")},this.switchMode=async e=>{e.preventDefault(),this.properties.searchSelectedAddress="";const t=!this.isValidAddressData(this.properties.addressData);this.selectedAddressTitle(null),this.isEditLinkEnabled(this.isEditDisabled()),this.addressInEditMode(!this.isEditDisabled()&&!this.addressInEditMode()),this.resetAddressWithCountry((0,a.getTerritory)()),this.validProperty(Object.assign(Object.assign({},this.validProperty()),{[this.type.MANUAL]:{}})),this.addressInEditMode()||(t&&await this.getAddressForSearch(),this.focusElement(this.uid+"_address-search-select"))},this.getColumns=e=>{const t=this.maxColumns();return t>e?e:t},this.editAddress=e=>{e.preventDefault(),this.addressInEditMode(!this.addressInEditMode()),this.addressInEditMode()&&this.focusElement(this.uid+"_country")},this.focus=()=>{this.addressInEditMode()?this.addressInEditMode()&&this.focusElement(this.uid+"_country"):this.focusElement(this.uid+"_address-search-select")},this.focusElement=async e=>{const t=document.getElementById(e);if(t){const e=o.getContext(t).getBusyContext();await e.whenReady(),t.focus()}},this.updateAddressDataField=(e,t)=>{let o;return o=i.isObservable(this.properties.addressData[e])?this.properties.addressData[e](t):t,o},this.geographyValueItemChangeListener=e=>t=>{var i,o,s,a;const n={};!t.detail.value.data&&this.addressDataHasProperty(e)&&(n[e]=this.updateAddressDataField(e,null));const r=null===(s=null===(o=null===(i=t.detail)||void 0===i?void 0:i.value)||void 0===o?void 0:o.data)||void 0===s?void 0:s.value;r&&this.addressDataHasProperty(e)&&(n[e]=this.updateAddressDataField(e,r)),"internal"===t.detail.updatedFrom&&this.getDependentFieldsToReset(e).forEach(e=>{n[e]=this.updateAddressDataField(e,null)});const l=null===(a=t.detail.value.data)||void 0===a?void 0:a.dependentValues;l&&Array.isArray(l)&&l.forEach(e=>{const t=e.name;this.addressDataHasProperty(t)&&(n[t]=this.updateAddressDataField(e.name,e.value))}),this.properties.addressData=Object.assign(Object.assign({},this.properties.addressData),n)},this.refresh=()=>{if(this.addressInEditMode()){const e=this.getCountrySelectSingle();e&&e.refresh(),this.getLayoutData().forEach(e=>{let t;t=e.geographyLevel?this.composite.querySelector(`#${this.uid}_address_geography_${e.attributeName}`):this.composite.querySelector(`#${this.uid}_address_${e.attributeName}`),t&&t.refresh()})}else this.getSearchDataSelectSingle().refresh()},this.reset=()=>{var e;const t=this.addressInEditMode();if(!1===t)this.getSearchDataSelectSingle().reset();else{const e=this.getCountrySelectSingle();e&&e.reset(),this.getLayoutData().forEach(e=>{if(e.geographyLevel){const t=this.composite.querySelector(`#${this.uid}_address_geography_${e.attributeName}`);t&&t.reset()}else{const t=this.composite.querySelector(`#${this.uid}_address_${e.attributeName}`);t&&t.reset()}})}(null===(e=this.properties.displayOptions)||void 0===e?void 0:e.resetView)===this.type.SEARCH&&this.properties.type===this.type.AUTO&&t&&this.properties.searchData&&(this.addressInEditMode(!t),this.getAddressForSearch())},this.getMode=()=>this.addressInEditMode()?this.type.MANUAL:this.type.SEARCH,this.validChangedListener=e=>{let t="valid";const i=this.getMode();if(e.detail){const t=e.detail.value;if("invalidShown"===t||"invalidHidden"===t||"valid"===t||"pending"===t){const o=this.validProperty();o[i][e.target.id]=t,this.validProperty(Object.assign(Object.assign({},this.validProperty()),o))}}Object.keys(this.validProperty()[i]).forEach(e=>{"valid"!==this.validProperty()[i][e]&&"invalidShown"!==t&&(t=this.validProperty()[i][e])}),this.properties.valid=t},this.validate=async()=>{if(this.addressInEditMode()){const e=[],t=this.getCountrySelectSingle();return t&&e.push(t.validate()),this.getLayoutData().forEach(t=>{let i;i=t.geographyLevel?this.composite.querySelector(`#${this.uid}_address_geography_${t.attributeName}`):this.composite.querySelector(`#${this.uid}_address_${t.attributeName}`),i&&e.push(i.validate())}),Promise.all(e).then(e=>e.some(e=>"invalid"===e)?"invalid":"valid")}return this.getSearchDataSelectSingle().validate().then(e=>e)},this.showMessages=()=>{if(this.addressInEditMode()){const e=this.getCountrySelectSingle();e&&e.showMessages(),this.getLayoutData().forEach(e=>{const t=e.geographyLevel?this.composite.querySelector(`#${this.uid}_address_geography_${e.attributeName}`):this.composite.querySelector(`#${this.uid}_address_${e.attributeName}`);null==t||t.showMessages()})}else{this.getSearchDataSelectSingle().showMessages()}},this.getCountryItemText=e=>this.getItemTextByAttributeNames(e.data,this.itemTextConfiguration.countriesApi),this.calculateCountry=()=>{var e;const t=null===(e=this.properties.addressData)||void 0===e?void 0:e.Country;return this.calculateCountryWithParams(t)},this.updateStyleFormat=async e=>{var t,i,o;if(this.setReadOnlyBreakChar(this.properties.readonly,this.properties.readonlyEventEnabled),this.geographyValueItems.clear(),e&&this.properties.styleFormats){const s=await this.properties.styleFormats.fetchByKeys({keys:[e]}),a=await(null===(o=null===(i=null===(t=null==s?void 0:s.results)||void 0===t?void 0:t.get(e))||void 0===i?void 0:i.data)||void 0===o?void 0:o.addressStyleFormat);if(null==a?void 0:a.length){this.currentStyleFormatGeographyData=[];const e=this.getLineMapForStyleFormats(a),t=Array.from(e).map(([e,t])=>({children:t,lineNumber:e}));return this.setLayoutData(t),this.styleFormatDataProvider(new r(t,{keyAttributes:"lineNumber"})),this.styleFormatDataProviderMap(t),this.getMode()===this.type.MANUAL&&this.validProperty(Object.assign(Object.assign({},this.validProperty()),{[this.type.MANUAL]:{}})),await this.checkReadOnlyProps(this.properties.readonly,this.properties.readonlyEventEnabled),void(this.addressInEditMode()||await this.getAddressForSearch())}}this.styleFormatDataProvider(new r([],{keyAttributes:"lineNumber"})),this.styleFormatDataProviderMap([])},this.getLineMapForStyleFormats=e=>{const t=new Map;return e.forEach(e=>{let i=[];t.has(e.lineNumber)&&(i=t.get(e.lineNumber)),i.push({attributeLabel:e.attributeLabel,attributeName:e.attributeName,delimiterAfter:e.delimiterAfter,delimiterBefore:e.delimiterBefore,dependentValues:e.geographyLevelDependentValues,geographyLevel:e.geographyLevel,required:e.required,uppercase:e.uppercase}),t.set(e.lineNumber,i),e.geographyLevel&&this.properties.geographies&&this.setGeographyInitialValueItem(e)}),t},this.addressDataHasProperty=e=>Object.prototype.hasOwnProperty.call(this.properties.addressData,e),this.setGeographyInitialValueItem=e=>{const t=this.properties.addressData[e.attributeName];let o={};t&&(o={data:{dependentValues:[],key:"0",primaryText:t,secondaryText:"",value:t},key:t,metadata:{key:t}}),this.geographyValueItems.set(e.attributeName,i.observable(o)),this.geographyLOVs.has(e.geographyLevel)||this.geographyLOVs.set(e.geographyLevel,i.observable()),this.currentStyleFormatGeographyData.push({geographyLevel:e.geographyLevel,geographyLevelAttributes:e.geographyLevelAttributes,geographyLevelDependentValues:e.geographyLevelDependentValues,geographyLevelFilters:e.geographyLevelFilters,geographyLevelValue:e.geographyLevelValue}),this.setupGeographyLOV(e.geographyLevel,e.geographyLevelAttributes,e.geographyLevelFilters,e.geographyLevelValue,e.geographyLevelDependentValues)},this.getDependentFieldsToReset=e=>Array.from(this.styleFormatDataProviderMap()).map(e=>e.children).reduce((e,t)=>e.concat(t),[]).filter(e=>null!==e.geographyLevel).map(t=>{var i;return void 0!==(null===(i=t.dependentValues)||void 0===i?void 0:i.find(t=>t.addressDataProperty===e))?t.attributeName:void 0}).filter(Boolean),this.setTypeChecks=e=>{this.isEditDisabled(this.calculateEditDisabled(e)),this.isEditLinkEnabled(!this.isEditDisabled()&&this.checkAddressData(this.properties.addressData)),this.disableSearchSwitchLink(this.properties.type===this.type.MANUAL),this.addressInEditMode(this.properties.type===this.type.MANUAL||(!this.isEditDisabled()||this.properties.type===this.type.AUTO)&&this.addressInEditMode())},this.checkForAddressMode=e=>{this.addressInEditMode()||(this.addressInEditMode(!this.isEditDisabled()&&this.addressInEditMode()),this.isEditLinkEnabled(!this.isEditDisabled()&&this.checkAddressData(e)))},this.checkReadOnlyProps=async(e,t)=>{e&&(this.setReadOnlyBreakChar(e,t),await this.updateReadonlyAddress(),t&&this.updateReadonlyEventEnabledAddress())},this.modifyAddress=async(e,t)=>{const i=Object.keys(this.properties.addressData).filter(i=>e[i]!==t[i]);if(i.length&&(e.Country!==t.Country&&(e.fullAddress?await this.getAddressForSearch():await this.updateStyleFormat(this.calculateCountryWithParams(e.Country))),this.addressInEditMode()||await this.getAddressForSearch(),i.forEach(t=>{this.setGeographyValueItem(t,e[t])}),e.Country===t.Country&&this.addressInEditMode()&&this.styleFormatDataProviderMap().length)){this.isGeographyUpdated(i)&&this.setupAllGeographyLOVs(this.currentStyleFormatGeographyData)}},this.getItemTextByAttributeNames=(e,t)=>{var i;if("string"==typeof t)return null!==(i=e[t])&&void 0!==i?i:"";const o=[];return t.forEach(t=>{e[t]&&o.push(e[t])}),o.join(", ")},this.initializeItemTextConfiguration=()=>{var e,t,i,o;this.itemTextConfiguration={countriesApi:null!==(t=null===(e=this.properties.itemText)||void 0===e?void 0:e.countriesApi)&&void 0!==t?t:"label",searchApi:null!==(o=null===(i=this.properties.itemText)||void 0===i?void 0:i.searchApi)&&void 0!==o?o:"label"}},this.setGeographyValueItem=(e,t)=>{this.geographyValueItems.has(e)&&this.geographyValueItems.get(e)({data:{dependentValues:[],key:"0",primaryText:t,secondaryText:"",value:t},key:t,metadata:{key:t}})},this.isGeographyUpdated=e=>{const t=this.styleFormatDataProviderMap();for(const i of t){const t=(null==i?void 0:i.children)||[];for(const i of t)if(e.indexOf(i.attributeName)>-1&&i.geographyLevel)return!0}return!1},this.isValidAddressData=e=>{let t=!1;return e&&Object.keys(e).forEach(i=>{e[i]&&"Country"!==i&&(t=!0)}),t},this.calculateCountryWithParams=e=>(e||(e=(0,a.getTerritory)(),this.properties.addressData=Object.assign(Object.assign({},this.properties.addressData),{Country:e})),e),this.getLineDataFromAddress=e=>{var t;let i="";return null===(t=null==e?void 0:e.children)||void 0===t||t.forEach(e=>{i=this.properties.addressData[e.attributeName]?[i,e.delimiterBefore,e.uppercase?this.properties.addressData[e.attributeName].toUpperCase():this.properties.addressData[e.attributeName],e.delimiterAfter].filter(Boolean).join(""):i}),i},this.getAddressMapForSearch=async()=>{var e,t,i;let o="";const s=await this.getFullCountryName(null===(e=this.properties.addressData)||void 0===e?void 0:e.Country),a=(e,t)=>{const i=t?e:"";return o?`${o.trim()} ${e}`:i};return(null===(t=this.properties.addressData)||void 0===t?void 0:t.Country)&&(null===(i=this.styleFormatDataProviderMap())||void 0===i||i.forEach(e=>{let t="";t=this.getLineDataFromAddress(e),o=t?a(t,!0):o}),this.isValidAddressData(this.properties.addressData)&&(o=s?a(s,!1):o)),o},this.updateReadonlyAddress=async()=>{var e;let t="";if(this.fullAddressPresent())this.readonlyAddress(this.properties.addressData.fullAddress);else if(this.properties.addressData.Country){let i=0;const o=await this.getFullCountryName(this.properties.addressData.Country),s=e=>(i++,t?`${t}${this.lineBreakChar}${e}`:e);null===(e=this.styleFormatDataProviderMap())||void 0===e||e.forEach(e=>{let i="";i=this.getLineDataFromAddress(e),t=i?s(i):t}),this.isValidAddressData(this.properties.addressData)&&(t=o?s(o):t),this.readonlyAddress(t),this.readonlyAddressRows(i)}},this.getFullCountryName=async e=>{var t,i,o;if(e&&this.countryFullNames.has(e))return this.getCountryFullNames(e);if(this.properties.countries){const s=await this.properties.countries.fetchByKeys({keys:[e]}),a=null===(i=null===(t=null==s?void 0:s.results)||void 0===t?void 0:t.get(e))||void 0===i?void 0:i.data;if(a){const t=(null===(o=this.getItemTextByAttributeNames(a,this.itemTextConfiguration.countriesApi))||void 0===o?void 0:o.toUpperCase())||e;return this.countryFullNames.set(e,t),t}}return this.countryFullNames.set(e,e),e},this.getCountryFullNames=e=>this.countryFullNames.get(e),this.setReadOnlyBreakChar=(e,t)=>{e&&(this.lineBreakChar=this.properties.readonlyEventEnabled?"<br>":"\n",t&&this.updateReadonlyEventEnabledAddress())},this.updateReadonlyEventEnabledAddress=()=>{const e=document.getElementById(this.uid+"_readonly-link-address");if(e){o.getContext(e).getBusyContext().whenReady(),e.onclick=e=>{e.preventDefault(),this.composite.dispatchEvent(new CustomEvent(n.EventDispatcher.READ_ONLY_ACTION_EVENT_NAME))}}},this.setupAllGeographyLOVs=e=>{e.forEach(e=>{this.setupGeographyLOV(e.geographyLevel,e.geographyLevelAttributes,e.geographyLevelFilters,e.geographyLevelValue,e.geographyLevelDependentValues)})},this.setupGeographyLOV=(e,t,i,o,s)=>{const a={criteria:i.map(e=>({attribute:e.attributeName,op:"$eq",value:e.value||(e.addressDataProperty?this.properties.addressData[e.addressDataProperty]:"")})),op:"$and"};s.forEach(e=>{this.addressDataHasProperty(e.addressDataProperty)&&this.properties.addressData[e.addressDataProperty]&&a.criteria.push({attribute:e.attributeName,op:"$eq",value:this.properties.addressData[e.addressDataProperty]})});const n={mapFields:e=>{var t,i,a;const n=[],r=[];s.forEach(t=>{Object.prototype.hasOwnProperty.call(e.data,t.attributeName)&&(n.push(e.data[t.attributeName]),r.push({name:t.addressDataProperty,value:e.data[t.attributeName]}))});let l={};return(null===(t=e.data)||void 0===t?void 0:t.customPrimaryValue)&&(l={primaryText:null===(i=e.data)||void 0===i?void 0:i.customPrimaryValue,secondaryText:null===(a=e.data)||void 0===a?void 0:a.customSecondaryValue}),Object.assign(Object.assign({},e),{data:Object.assign(Object.assign(Object.assign({},e.data),{dependentValues:r,primaryText:e.data[o],secondaryText:n.join(", "),value:e.data[o]}),l)})}},r=new l(this.properties.geographies,{filterCriterion:a,attributes:t,dataMapping:n});if(!this.properties.geographies.transformsContext||!this.properties.geographies.transformsContext["vb-textFilterAttributes"]){const e=r.fetchFirst;r.fetchFirst=t=>{const i=r.filterCriterion.criteria;if(t.filterCriterion){const e=i.findIndex(e=>e.attribute===o),s={attribute:o,op:"$sw",value:t.filterCriterion.text};e>=0?i[e]=s:i.push(s),t.filterCriterion=void 0}else i[i.length-1].attribute===o&&i.pop();return e.call(r,t)}}this.geographyLOVs.get(e)(r)},this.displayTooltip=async e=>{const t=o.getContext(e).getBusyContext();await t.whenReady(),this.selectedAddressTitle(this.isOverflown(e)?e.value:null)},this.getSearchDataSelectSingle=()=>this.composite.querySelector(`#${this.uid}_address-search-select`),this.getCountrySelectSingle=()=>this.composite.querySelector(`#${this.uid}_country`),this.setLayoutData=e=>{this.layoutData=e},this.getLayoutData=()=>this.layoutData.map(e=>e.children).reduce((e,t)=>e.concat(t),[]),this.isOverflown=e=>e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth,this.fullAddressPresent=()=>this.addressDataHasProperty("fullAddress")&&!this.properties.styleFormats;const t=o.getContext(e.element).getBusyContext();this.uid=e.uniqueId;this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.properties=e.properties,this.showAddressFieldsLayout=i.observable(!0),this.styleFormatDataProvider=i.observable(new r([],{keyAttributes:"lineNumber"})),this.selectedCountry=i.computed(this.calculateCountry),this.selectedAddress=i.observable(u),this.screenRange=p.createScreenRangeObservable(),this.validProperty=i.observable({manual:{},search:{}}),this.maxColumns=i.computed(()=>"sm"===this.screenRange()?1:"md"===this.screenRange()?2:3),this.res=Object.assign(Object.assign({},s),this.properties.translations),this.userAssistanceDensity=i.computed(()=>this.properties.userAssistanceDensity?this.properties.userAssistanceDensity:this.properties.userAssitanceDensity),this.setReadOnlyBreakChar(this.properties.readonly,this.properties.readonlyEventEnabled),this.isEditLinkEnabled=i.observable(!this.calculateEditDisabled()&&!!this.properties.searchData&&this.checkAddressData(this.properties.addressData)),this.isEditDisabled=i.observable(this.calculateEditDisabled()),this.isDisabled=i.observable(this.properties.disabled),this.addressInEditMode=i.observable(!((this.calculateEditDisabled()||this.properties.type===this.type.AUTO)&&this.properties.searchData)||this.properties.type===this.type.MANUAL),this.disableSearchSwitchLink=i.observable(this.properties.type===this.type.MANUAL),this.geographyValueItems=new Map,this.geographyLOVs=new Map,this.updateStyleFormat(this.calculateCountry()),this.getAddressForSearch(),this.initializeItemTextConfiguration(),this.properties.searchData&&(this.cdp=new c({dataProvider:this.properties.searchData,itemText:this.itemTextConfiguration.searchApi})),this.busyResolve()}activated(e){d.log(`%c CCA ${this.uid} activated`,h)}connected(e){d.log(`%c CCA ${this.uid} connected`,h)}disconnected(){var e;d.log(`%c CCA ${this.uid} disconnected`,h),null===(e=this.properties.styleFormats)||void 0===e||e.removeEventListener("refresh")}bindingsApplied(e){d.log(`%c CCA ${this.uid} bindings applied`,h),this.addEventListenerForStyleFormat(this.properties.styleFormats);const t=document.getElementById(this.uid+"_address-search-select");t&&(t.addEventListener("focus",this.actionFocus),this.properties.autofocus&&(this.addressInEditMode()?this.focusElement(this.uid+"_country"):this.focusElement(this.uid+"_address-search-select")))}async propertyChanged(e){switch(d.log(`%c CCA ${this.uid} property changed`,h),e.property){case"addressData":this.checkForAddressMode(e.value),await this.checkReadOnlyProps(this.properties.readonly,this.properties.readonlyEventEnabled),await this.modifyAddress(e.value,e.previousValue);break;case"type":this.setTypeChecks(e.value);break;case"styleFormats":this.addEventListenerForStyleFormat(e.value),await this.updateStyleFormat(this.calculateCountry());break;case"searchData":e.value&&this.checkAddressData(this.properties.addressData)&&(this.isEditLinkEnabled(!!e.value&&this.checkAddressData(this.properties.addressData)),await this.updateStyleFormat(this.calculateCountry()));break;case"readonly":e.previousValue||await this.checkReadOnlyProps(e.value,this.properties.readonlyEventEnabled);break;case"readonlyEventEnabled":await this.checkReadOnlyProps(this.properties.readonly,e.value);break;case"disabled":this.isDisabled(e.value)}}}})),define("css!oj-sp/input-address/input-address-styles",[],(function(){})),define("oj-sp/input-address/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./input-address-view.html","./input-address-viewModel","css!./input-address-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-input-address",{metadata:JSON.parse(o),view:s,viewModel:a.InputAddressViewModel})})),define("css!oj-sp/input-currency/input-currency-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/input-currency/input-currency",["require","exports","ojs/ojconverter-number","ojs/ojvcomponent","ojs/ojvcomponent-binding","preact","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvalidator-numberrange","ojs/ojlogger","ojs/ojtranslation","css!./input-currency-styles","ojs/ojinputtext"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputCurrency=void 0;let p=class extends a.Component{constructor(e,t){var s;super(e,t),this.actionBlur=()=>{this.setState({isEditable:!1})},this.actionFocus=()=>{this.props.readonly||this.props.disabled||0!==this.state.value&&null===this.state.value&&void 0===this.state.value||this.setState(e=>Object.assign(Object.assign({},e),{isEditable:!0}))},this.onPropertyChangeHandler=e=>{var t,i,o,s,a,n;switch(e.type){case"rawValueChanged":null===(i=(t=this.props).onRawValueChanged)||void 0===i||i.call(t,e.detail.value);break;case"valueChanged":{const t=Object.assign(Object.assign({},this.props),{value:e.detail.value});this.updateValue(t);break}case"validChanged":null===(s=(o=this.props).onValidChanged)||void 0===s||s.call(o,e.detail.value);break;case"messagesCustomChanged":null===(n=(a=this.props).onMessagesCustomChanged)||void 0===n||n.call(a,e.detail.value);break;default:e.preventDefault()}},this.updateValue=e=>{var t,o,s,a,r,l;if(e.precision&&!e.customPattern)return this.setState({value:e.value}),void(null===(o=(t=this.props).onValueChanged)||void 0===o||o.call(t,""!==e.value?e.value:void 0));const d=this.state.currency?this.state.currency:(0,n.getCurrencyCode)(),c=(n.getCurrentLocale&&(0,n.getCurrentLocale)()&&(0,n.getCurrentLocale)(),new i.IntlNumberConverter({style:"currency",currency:d}).resolvedOptions()),p="number"==typeof e.value?e.value:parseFloat(e.value);let u;u=null==p||Number.isNaN(p)?null:parseFloat(p.toFixed(c.maximumFractionDigits)),"string"==typeof e.value&&"number"==typeof u&&(u=u.toString()),this.state.value!==u?(this.setState({value:u}),null===(a=(s=this.props).onValueChanged)||void 0===a||a.call(s,u)):null===(l=(r=this.props).onValueChanged)||void 0===l||l.call(r,u)},this.getTextAlignmentClass=e=>{switch(e){case"end":return"oj-form-control-text-align-end";case"right":return"oj-form-control-text-align-right";case"start":return"oj-form-control-text-align-start"}},this.fixBiDiFormat=e=>{let t="",i=!1;if(/([\u060B]|[\u07FE]|[\u07FF]|[\uFDFC]|[\u0783]|[\u062F]|[\u0631])+/.test(e)&&e.length){for(let o=0;o<e.length;o++){const s=e.charAt(o);if(i)t+=s;else switch(s){case"Ø":case"ß¾":case"ß¿":case"ï·¼":i=!0,t+=s,t+="âª";break;case"Þ":{const a=this.updatedPatternForU0783(e,o,i,t,s);t=a.updatedUnicodePattern,o=a.index,i=a.isBidiCurrency;break}case"Ø¯":{i=!0;const a=this.updatedPatternForU062F(e,o,t,s);t=a.updatedUnicodePattern,o=a.index;break}case"Ø±":{i=!0;const a=this.updatedPatternForU0631(e,o,t,s);t=a.updatedUnicodePattern,o=a.index;break}default:t+=s}}return i&&(t+="â¬"),t}return e},this.updatedPatternForU0783=(e,t,i,o,s)=>{if(e.length>t){++t;const a=e.charAt(t);"."===a&&(i=!0,o+=s,o+=a,o+="âª")}return{updatedUnicodePattern:o,index:t,isBidiCurrency:i}},this.updatedPatternForU062F=(e,t,i,o)=>{const s=e.match(/[\u062F].([\u062C]|[\u0628]|[\u0639]|[\u0627]|[\u0643]|[\u0644]|[\u0645]|[\u062A]|[\u0625]).[\u200F]?/);return null!==s&&(i+=s[0],i+="âª",t+=s[0].length-1),{updatedUnicodePattern:i,index:t}},this.updatedPatternForU0631=(e,t,i,o)=>{const s=e.match(/[\u0631].([\u0633])/);return null!==s&&(i+=s[0],i+="âª",t+=s[0].length-1),{updatedUnicodePattern:i,index:t}},this.getCurrencyPattern=()=>{const{currencyDisplay:e,customPattern:t}=this.props;switch(e){case"code":return t.currencyPatternWithCode;case"symbol":return this.fixBiDiFormat(t.currencyPatternWithSymbol);default:return t.currencyPattern}},this.getValidPrecision=()=>{var e;const{currency:t,currencyDisplay:o,precision:s}=this.props;if(null!=s)return s;if(null!=t&&"none"===o){const o=new i.IntlNumberConverter({style:"currency",currency:t});return null===(e=null==o?void 0:o.resolvedOptions())||void 0===e?void 0:e.maximumFractionDigits}},this.addEditableProps=e=>{var t;const{currencyFormat:i,customPattern:o}=this.props,{isEditable:s}=this.state,a=document.getElementById(this.componentId),r={};return(s||e)&&(null!==a&&"valid"===a.valid||null===a)&&(r.currencyFormat=e?i:"standard",o?(r.style="decimal",r.pattern=null!==(t=o.currencyPattern)&&void 0!==t?t:(0,n.getNumberFormatPattern)()):r.style="decimal"),r},this.getCurrencyConverter=()=>{const{currencyDisplay:e,currencyFormat:t,customPattern:o}=this.props;let s={lenientParse:"none"};s.currencyFormat=t,s.maximumFractionDigits=this.getValidPrecision(),s.minimumFractionDigits=this.getValidPrecision(),s.currency=this.state.currency?this.state.currency:(0,n.getCurrencyCode)();const a="none"===e;return s.style=a?"decimal":"currency",s.currencyDisplay="none"!==e?e:void 0,s.roundDuringParse=!0,o&&(s.pattern=this.getCurrencyPattern()),s=Object.assign(Object.assign({},s),this.addEditableProps(a)),new i.IntlNumberConverter(s)},this.getCurrencyValidators=()=>{const{props:e}=this;return e.min||0===e.min?e.max||0===e.max?[new l({max:e.max,messageDetail:{rangeOverflow:c.applyParameters(this.componentStrings.maxValidationMsg,{0:e.max}),rangeUnderflow:c.applyParameters(this.componentStrings.minValidationMsg,{0:e.min})},min:e.min})]:[new l({messageDetail:{rangeUnderflow:c.applyParameters(this.componentStrings.minValidationMsg,{0:e.min})},min:e.min})]:e.max||0===e.max?[new l({max:e.max,messageDetail:{rangeOverflow:c.applyParameters(this.componentStrings.maxValidationMsg,{0:e.max})}})]:[]},this.setInputCurrencyElement=e=>{this.inputCurrencyElement=e},this.uid=null!==(s=this.props.id)&&void 0!==s?s:(0,o.getUniqueId)(),this.componentId=this.uid+"_input_currency",this.componentStrings=Object.assign({},r),this.state={currency:this.props.currency,displayOptions:Object.assign(Object.assign({},this.props.displayOptions),{validatorHint:"none"}),isEditable:!1,value:this.props.value}}render(e){const{autofocus:t,textAlign:i,placeholder:o,required:s,readonly:n,labelHint:r,labelEdge:l,labelledBy:d,help:c,helpHints:p,disabled:u,describedBy:h,messagesCustom:m,userAssistanceDensity:g,userAssitanceDensity:y}=e,{value:f,displayOptions:b}=this.state,v=""+this.getTextAlignmentClass(i);return(0,a.h)(a.Fragment,null,(0,a.h)("oj-input-text",{"data-oj-context":!0,id:this.componentId,ref:this.setInputCurrencyElement,value:f,onFocus:this.actionFocus,placeholder:o,labelEdge:l,labelHint:r,labelledBy:d,help:c,autofocus:t,helpHints:p,class:v,required:s,readonly:n,disabled:u&&!n,describedBy:h,onrawValueChanged:e=>this.onPropertyChangeHandler(e),onvalidChanged:e=>this.onPropertyChangeHandler(e),converter:this.getCurrencyConverter(),validators:this.getCurrencyValidators(),messagesCustom:m,onmessagesCustomChanged:e=>this.onPropertyChangeHandler(e),userAssistanceDensity:g||y,displayOptions:b,onvalueChanged:e=>this.onPropertyChangeHandler(e)}))}componentDidMount(){var e;null===(e=this.inputCurrencyElement)||void 0===e||e.addEventListener("focusout",this.actionBlur)}shouldComponentUpdate(e,t,i){return!0}static getDerivedStateFromProps(e,t){var o;let s=Object.assign({},t);if(e.value!==t.value&&!1===t.isEditable)return s=void 0===e.value?Object.assign(Object.assign({},s),{value:null}):Object.assign(Object.assign({},s),{value:e.value}),e.currency!==t.currency&&(s.currency=e.currency),s;if(e.currency!==t.currency){const t=e.currency?e.currency:(0,n.getCurrencyCode)(),a=(n.getCurrentLocale&&(0,n.getCurrentLocale)()&&(0,n.getCurrentLocale)(),new i.IntlNumberConverter({style:"currency",currency:t}).resolvedOptions()),r="number"==typeof e.value?e.value:parseFloat(e.value);let l;return l=null==r||Number.isNaN(r)?null:parseFloat(r.toFixed(a.maximumFractionDigits)),null===(o=e.onValueChanged)||void 0===o||o.call(e,l),Object.assign(Object.assign({},s),{currency:e.currency,value:l})}return null}componentWillUnmount(){var e;d.log("Input Currency CCA will be unmounted",this.componentId),null===(e=this.inputCurrencyElement)||void 0===e||e.removeEventListener("focusout",this.actionBlur)}focus(){this.inputCurrencyElement&&(this.inputCurrencyElement.focus(),this.actionFocus())}reset(){this.inputCurrencyElement.reset()}refresh(){this.inputCurrencyElement.refresh()}validate(){return this.inputCurrencyElement.validate()}showMessages(){this.inputCurrencyElement.showMessages()}};p.defaultProps={currency:"USD",currencyDisplay:"code",disabled:!1,displayOptions:{messages:"display"},labelHint:"Amount",readonly:!1,textAlign:"start"},p._metadata={properties:{autofocus:{type:"boolean"},labelEdge:{type:"string",enumValues:["none","inside","provided"],binding:{consume:{name:"labelEdge"}}},labelHint:{type:"string"},labelledBy:{type:"string"},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"}}},placeholder:{type:"string"},value:{type:"string|number",writeback:!0},currency:{type:"string"},currencyDisplay:{type:"string",enumValues:["symbol","name","none","code"]},currencyFormat:{type:"string",enumValues:["standard","short","long"]},min:{type:"number"},max:{type:"number"},readonly:{type:"boolean",binding:{consume:{name:"readonly"}}},required:{type:"boolean"},rawValue:{type:"string",readOnly:!0,writeback:!0},disabled:{type:"boolean"},valid:{type:"string",enumValues:["invalidHidden","invalidShown","valid","pending"],readOnly:!0,writeback:!0},textAlign:{type:"string",enumValues:["start","right","end"]},customPattern:{type:"object",properties:{currencyPattern:{type:"string"},currencyPatternWithSymbol:{type:"string"},currencyPatternWithCode:{type:"string"}}},precision:{type:"number"},describedBy:{type:"string"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},userAssistanceDensity:{type:"string",enumValues:["reflow","compact","efficient"]},userAssitanceDensity:{type:"string",enumValues:["reflow","compact","efficient"],binding:{consume:{name:"userAssistanceDensity"}}},messagesCustom:{type:"Array<object>",writeback:!0}},extension:{_WRITEBACK_PROPS:["value","rawValue","valid","messagesCustom"],_READ_ONLY_PROPS:["rawValue","valid"],_OBSERVED_GLOBAL_PROPS:["id","autofocus"]},methods:{focus:{},reset:{},refresh:{},validate:{},showMessages:{}}},p=__decorate([(0,o.customElement)("oj-sp-input-currency"),__metadata("design:paramtypes",[Object,Object])],p),t.InputCurrency=p})),define("oj-sp/input-currency/loader",["require","exports","./input-currency"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputCurrency=void 0,Object.defineProperty(t,"InputCurrency",{enumerable:!0,get:function(){return i.InputCurrency}})})),define("text!oj-sp/input-currency-conversion-rate/component.json",[],(function(){return'{"name":"input-currency-conversion-rate","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Input Currency Conversion Rate","description":"The input currency conversion rate component allows the user to select a conversion type, date, rate, and inverse rate in a single component.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0"},"type":"composite","icon":{"iconPath":"extension/catalog/images/oj-sp-input-currency-conversion-rate.svg"},"properties":{"autofocus":{"description":"The property is used to enable focus on load of the component","displayName":"Autofocus","type":"boolean","value":false,"writeback":false},"conversionRatesData":{"writeback":false,"displayName":"Conversion Rates","type":"oj.DataProvider","description":"The conversion rates will be of the form [{\'date\': \'2021-01-15T07:06:48.023Z\', \'conversionValue\': 1.09}]"},"describedBy":{"displayName":"Described By","description":"Description component Id for the Input Currency Conversion Rate Component","type":"string|null"},"disabled":{"displayName":"Disabled","description":"If passed as true, it would disable component from click actions","type":"boolean"},"displayOptions":{"displayName":"Input Currency Conversion Rate Display options","description":"Input Currency Conversion Rate Display options for custom messages.","type":"object|null","writeback":false,"properties":{"messages":{"displayName":"Custom Message Display","description":"If \'display\' is chosen then, all the validation messages will be shown.","type":"string","value":"display","writeback":false,"enumValues":["display","none"],"propertyEditorValues":{"display":{"description":"Show custom messages.","displayName":"Display"},"none":{"description":"Don\'t show custom messages.","displayName":"None"}}}}},"labelEdge":{"description":"Defines how the label of a component is created.","type":"string","displayName":"Label Edge","help":"labelEdge","enumValues":["inside","none","provided"],"propertyEditorValues":{"inside":{"description":"The component creates the label using the label-hint attribute.","displayName":"Inside"},"none":{"description":"The component will not have a label, regardless of whether it\'s in an oj-form-layout or not.","displayName":"None"},"provided":{"description":"Label is provided by the parent if the parent is an oj-form-layout.","displayName":"Provided"}},"binding":{"consume":{"name":"labelEdge"}}},"labelHint":{"displayName":"Label Hint","description":"Display label to be used for Input Currency Conversion Rate Component","type":"string","translatable":true},"helpHints":{"displayName":"Help hints","description":"Component help information.","type":"object","translatable":true,"properties":{"definition":{"description":"A type user assistance text used to provide guidance to help the user understand what data to enter or select.","type":"string","translatable":true}}},"labelledBy":{"displayName":"Labelled By","description":"Id of the Label for the Input Currency Conversion Rate Component","type":"string"},"messagesCustom":{"type":"oj.Message[]","displayName":"Custom Messages","description":"Custom messages to be given for info/ warning/ error scenarios","writeback":true,"value":[],"properties":{"detail":{"displayName":"Detail","description":"Message details","type":"string"},"severity":{"displayName":"Severity","description":"Type of message displayed","type":"string","enumValues":["confirmation","info","error","warning","none"],"propertyEditorValues":{"confirmation":{"description":"Confirmation","displayName":"Confirmation"},"info":{"description":"Info","displayName":"Info"},"error":{"description":"Error","displayName":"Error"},"warning":{"description":"Warning","displayName":"Warning"},"none":{"description":"None","displayName":"None"}}},"summary":{"displayName":"Summary","description":"Message Title","type":"string","translatable":true}}},"rateTypesData":{"displayName":"Rate Types","description":"Rate Types will be of the form [{\'datePickerDisabled\': false, \'conversionRateDisabled\': false, \'conversionRateRequired\': false, \'label\': \'Corporate\', \'value\': \'corporate\'}]","type":"oj.DataProvider","writeback":false},"readonly":{"displayName":"Read Only","description":"If passed as true, it would render component in read-only mode","type":"boolean","binding":{"consume":{"name":"readonly"}}},"userAssitanceDensity":{"displayName":"User Assitance Denity","description":"Specifies the density of the form component\'s user assistance presentation","type":"string","status":[{"type":"deprecated","since":"2201.0.0","description":"Use userAssistanceDensity instead."}],"enumValues":["efficient","compact","reflow"],"propertyEditorValues":{"efficient":{"description":"The component\'s messages, help, hints, and required are all shown inline under the field with reserved space underneath."},"compact":{"description":"The component\'s messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required."},"reflow":{"description":"If reflow, messages, help, hints, and required are all shown inline under the field with no reserved space."}},"binding":{"consume":{"name":"userAssistanceDensity"}}},"userAssistanceDensity":{"displayName":"User Assistance Denity","description":"Specifies the density of the form component\'s user assistance presentation","type":"string","enumValues":["efficient","compact","reflow"],"propertyEditorValues":{"efficient":{"description":"The component\'s messages, help, hints, and required are all shown inline under the field with reserved space underneath."},"compact":{"description":"The component\'s messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required."},"reflow":{"description":"If reflow, messages, help, hints, and required are all shown inline under the field with no reserved space."}}},"valid":{"displayName":"Valid","description":"The current valid state of the component.","type":"string","value":"valid","enumValues":["invalidHidden","invalidShown","pending","valid"],"propertyEditorValues":{"invalidHidden":{"description":"The component has invalid messages hidden and no invalid messages showing. An invalid message is one with severity \'error\' or higher."},"invalidShown":{"description":"The component has invalid messages showing. An invalid message is one with severity \'error\' or higher."},"pending":{"description":"The component is waiting for the validation state to be determined."},"valid":{"description":"The component is valid."}},"writeback":true,"readOnly":true,"visible":false},"value":{"displayName":"Input Currency Conversion Rate Value","description":"Consist of the combination of date, type, and rate value for the corresponding date","writeback":true,"type":"object","properties":{"rateType":{"displayName":"Rate Type","description":"Rate type selected from the rateTypes list of values","type":"string"},"conversionRate":{"displayName":"Conversion Rate","description":"Conversion rate for the selected date","type":"number"},"selectedDate":{"displayName":"Selected Date","description":"Date selected from the date picker. Selected date should be in ISO string format","type":"string"}}}},"methods":{"focus":{"description":"Focuses on the component."},"reset":{"description":"Resets the component by clearing all messages and messages attributes and updates the component\'s display value using the attribute value. User entered values will be erased when this method is called.","return":"void"},"showMessages":{"description":"Takes all deferred messages and shows them.","return":"void"},"validate":{"description":"Validates the component\'s state. Returns Promise resolves to \'valid\' if the value passed is valid. The Promise resolves to \'invalid\' if the value passed is null, empty or invalid.","return":"Promise<string>"}},"events":{"spDataChangeAction":{"displayName":"Data Change event","description":"spDataChangeAction event will be triggered when the Date Picker month is changed. This event will take a date range and the selected rate type as an input param.","bubbles":true,"cancelable":false,"detail":{"startDate":{"description":"The Start date to be provided for the date range","type":"string"},"endDate":{"description":"The End date to be provided for the date range","type":"string"},"rateType":{"description":"Selected Rate Type","type":"string"}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Forms & Inputs","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Input%20Currency%20Conversion%20Rate%20&Test%20Adapter%20=docs/testAdapterAPI/classes/oJSpectraInputCurrencyConversionRate.html","coverImage":"extension/catalog/images/oj-sp-input-currency-conversion-rate.svg","screenshots":{},"extraInfo":{}},"vbdt":{"visibility":"oracleInternal"}}}'})),define("text!oj-sp/input-currency-conversion-rate/input-currency-conversion-rate-view.html",[],(function(){return'<html><head></head><body><oj-input-text :id="[[uid+\'_input_currency_conversion_rate\']]"label-hint="[[$properties.labelHint]]"data-oj-context=""label-edge="[[$properties.labelEdge]]"readonly="[[$properties.readonly]]"autocomplete="off"help-hints.definition="[[$properties.helpHints?.definition ? $properties.helpHints.definition : \'\']]"labelled-by="[[$properties.labelledBy]]"autofocus="[[$properties.autofocus]]"disabled="[[$properties.disabled &amp;&amp; !$properties.readonly]]"value="[[displayValue]]"on-click="[[onInputTextClickHandler]]"valid="[[$properties.valid]]"described-by="[[$properties.describedBy]]"display-options.messages="[[$properties.displayOptions.messages]]"on-value-changed="[[onConversionInputFieldValueChanged]]"messages-custom="[[ customMessagesComputed ]]"user-assistance-density="[[$properties.userAssistanceDensity ? $properties.userAssistanceDensity : $properties.userAssitanceDensity]]"><oj-button slot="end"chroming="borderless"disabled="[[$properties.disabled]]":id="[[ uid + \'_input_currency_conversion_rate_icon\']]"display="icons":class="[[{\'oj-sm-hide\': $properties.readonly}]]"><span slot="endIcon"class="oj-ux-ico-comm-in"></span><span><oj-bind-text value="[[res.selectConversionRate]]"></oj-bind-text></span></oj-button></oj-input-text><oj-popup :id="[[ uid + \'_input_currency_conversion_rate_popup\']]"data-oj-context=""initial-focus="auto"on-oj-open="[[onPopUpLaunch]]":class="[[ {\'oj-sp-input-currency-conversion-rate-stretch-popup\' : isMobileView }]]"role="dialog"on-oj-close="[[onPopUpCloseListener]]"class="oj-sp-input-currency-conversion-rate-popup"><oj-defer><oj-bind-if test="[[isMobileView]]"><div class="oj-sp-input-currency-conversion-rate-popup-header"><oj-button :id="[[ uid + \'_input_currency_conversion_rate_popup_back_button\']]"display="icons"chroming="borderless"on-oj-action="[[onBackButtonClick]]"class="oj-sp-input-currency-conversion-rate-popup-back-caret-button"><span slot="startIcon":id="[[ uid + \'back-caret-icon\' ]]"class="oj-ux-ico-chevron-left"></span><oj-bind-text value="[[res.back]]"></oj-bind-text></oj-button><span class="oj-sp-input-currency-conversion-rate-title-center"><div><oj-bind-text value="[[res.conversionRate]]"></oj-bind-text></div></span></div></oj-bind-if><div :class="[[ {\'oj-sp-input-currency-conversion-rate-popup-content\' : isMobileView }]]"><oj-form-layout max-columns="1"direction="row"user-assistance-density="[[$properties.userAssistanceDensity ? $properties.userAssistanceDensity : $properties.userAssitanceDensity]]"class="oj-formlayout-full-width oj-sp-input-currency-conversion-rate-form-layout"><oj-select-single label-hint="[[res.rateType]]"data="[[$properties.rateTypesData]]"data-oj-context=""required="[[rateTypeRequired]]":id="[[ uid + \'_input_currency_conversion_rate_rate_type\' ]]"value-item="{{ localRateType }}"label-edge="inside"on-valid-changed="[[onRateTypeValidChanged]]"user-assistance-density="[[$properties.userAssistanceDensity ? $properties.userAssistanceDensity : $properties.userAssitanceDensity]]":class="[[ {\'oj-sm-padding-4x\': isMobileView, \'oj-sm-only-padding-0-top\': isMobileView, \'oj-sm-only-padding-0-bottom\': isMobileView} ]]"></oj-select-single><div class="oj-sp-input-currency-conversion-rate-popup-datepicker-container"><oj-date-picker disabled="[[datePickerDisabled() || !isRateTypeValid()]]"data-oj-context=""user-assistance-density="[[$properties.userAssistanceDensity ? $properties.userAssistanceDensity : $properties.userAssitanceDensity]]"on-valid-changed="[[onDatePickerValidChanged]]":id="[[ uid + \'_input_currency_conversion_rate_date_picker\' ]]"day-formatter="[[dayFormatter]]"on-day-formatter-changed="[[onDatePickerDayFormatterChanged]]"value="{{ localSelectedDate }}"class="oj-md-12 oj-sp-input-currency-conversion-rate-popup-datepicker"></oj-date-picker></div><oj-input-number disabled="[[(conversionDisabled() &amp;&amp; !localRateValue()) || !isRateTypeValid()]]"data-oj-context=""readonly="[[conversionDisabled() &amp;&amp; localRateValue()]]"user-assistance-density="[[$properties.userAssistanceDensity ? $properties.userAssistanceDensity : $properties.userAssitanceDensity]]":id="[[ uid + \'_input_currency_conversion_rate_conversion_rate\' ]]"label-hint="[[res.rate]]"label-edge="inside"value="{{ localRateValue }}"required="[[conversionRateRequired]]"converter="[[maxFractionNumberConverter]]"on-valid-changed="[[onConversionRateValidChanged]]"validators="[[conversionRateValidators]]":class="[[ {\'oj-sm-padding-4x\': isMobileView, \'oj-sm-only-padding-0-top\': isMobileView, \'oj-sm-only-padding-0-bottom\': isMobileView} ]]"></oj-input-number><oj-input-number :id="[[ uid + \'_input_currency_conversion_rate_inversion_rate\' ]]"data-oj-context=""disabled="[[(conversionDisabled() &amp;&amp; !localRateValue()) || !isRateTypeValid()]]"readonly="[[conversionDisabled() &amp;&amp; localRateValue()]]"label-hint="[[res.inverseRate]]"label-edge="inside"converter="[[maxFractionNumberConverter]]"value="{{ localInverseRateValue }}"on-value-changed="[[onInverseRateValueChanged]]"validators="[[conversionRateValidators]]"on-valid-changed="[[onConversionRateValidChanged]]"user-assistance-density="[[$properties.userAssistanceDensity ? $properties.userAssistanceDensity : $properties.userAssitanceDensity]]":class="[[ {\'oj-sm-padding-4x\': isMobileView, \'oj-sm-only-padding-0-top\': isMobileView, \'oj-sm-only-padding-0-bottom\': isMobileView} ]]"></oj-input-number></oj-form-layout></div><oj-bind-if test="[[isMobileView]]"><div class="oj-flex"><oj-button :id="[[ uid + \'_input_currency_conversion_rate_apply_button\']]"class="oj-flex-item"chroming="callToAction"on-oj-action="[[onApplyButtonClick]]"><oj-bind-text value="[[res.apply]]"></oj-bind-text></oj-button></div><oj-popup class="oj-sp-input-currency-conversion-rate-unsaved-changes-message-popup":id="[[ uid + \'_input_currency_conversion_rate_unsaved_changes_message_popup\']]"modality="modal"auto-dismiss="none"position.my.horizontal="center"position.at.horizontal="center"position.at.vertical="bottom"position.my.vertical="bottom"position.of="window"on-oj-close="[[onUnsavedMessagePopUpCloseListener]]"><div class="oj-sm-margin-2x"><div class="oj-sm-padding-5x-top oj-sm-margin-2x"><h1 class="oj-typography-heading-sm"><oj-bind-text value="[[res.unsavedChangesTitle]]"></oj-bind-text></h1></div><div class="oj-sm-margin-2x"><oj-bind-text class="oj-typography-body-sm"value="[[res.unsavedChangesMessage]]"></oj-bind-text></div><div class="oj-flex oj-sm-margin-10x-top"><oj-button class="oj-flex-item oj-sm-margin-2x":id="[[ uid + \'_input_currency_conversion_rate_cancel_button\' ]]"on-oj-action="[[onCancelButtonClick]]"><oj-bind-text value="[[res.cancel]]"></oj-bind-text></oj-button><oj-button class="oj-flex-item oj-sm-margin-2x":id="[[ uid + \'_input_currency_conversion_rate_discard_button\' ]]"chroming="danger"on-oj-action="[[onDiscardButtonClick]]"><oj-bind-text value="[[ res.discard ]]"></oj-bind-text></oj-button></div></div></oj-popup></oj-bind-if></oj-defer></oj-popup></body></html>'})),define("oj-sp/input-currency-conversion-rate/input-currency-conversion-rate-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputCurrencyConversionRateUtils=t.VALID_STATE=t.EventKey=void 0,function(e){e.TAB="Tab",e.ESC="Escape",e.UP_ARROW="ArrowUp",e.DOWN_ARROW="ArrowDown",e.FN_F6="F6",e.ENTER="Enter"}(t.EventKey||(t.EventKey={})),function(e){e.INVALID="invalid",e.INVALID_HIDDEN="invalidHidden",e.INVALID_SHOWN="invalidShown",e.VALID="valid",e.PENDING="pending"}(t.VALID_STATE||(t.VALID_STATE={}));class i{static getTodayLocalDate(e){const t=new Date;let i=""+t.getDate();i.length<2&&(i="0"+i);let o=""+(t.getMonth()+1);o.length<2&&(o="0"+o);return[t.getFullYear(),o,i].join(e)}static getLocaleDateString(e){return new Date(e).toLocaleDateString()}static isDateValid(e){return!Number.isNaN(Date.parse(e))}static convertMilliSecondsToLocalDate(e){const t=new Date(e),i=(t.getMonth()+1<10?"0":"")+(t.getMonth()+1),o=(t.getDate()+1<10?"0":"")+t.getDate();return`${t.getFullYear()}-${i}-${o}`}static getDifferenceBwDatesInDays(e,t){const i=Math.abs(t.getTime()-e.getTime());return Math.ceil(i/864e5)}static getDateRangeFromSelectedDate(e){const t=new Date(e);return t.setDate(1),i.getDateRangeFromStartDate(t)}static getDateRangeFromStartDate(e){e.setHours(0,0,0);const t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t.setHours(23,59,59),{endDate:t.getTime(),startDate:e.getTime()}}static parseValueToNumber(e){if(!e)return null;switch(typeof e){case"number":return e;case"string":return Number.parseFloat(e);default:return null}}}t.InputCurrencyConversionRateUtils=i})),define("oj-sp/input-currency-conversion-rate/input-currency-conversion-rate-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojasyncvalidator-numberrange","ojs/ojcontext","oj-sp/common/EventDispatcher","ojs/ojconverter-datetime","ojs/ojconverter-number","ojs/ojlistdataproviderview","ojs/ojlogger","ojs/ojmessaging","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","./input-currency-conversion-rate-utils","ojs/ojarraydataprovider","ojs/ojdatetimepicker","ojs/ojdefer","ojs/ojformlayout","ojs/ojinputnumber","ojs/ojinputtext","ojs/ojknockout","ojs/ojlabel","ojs/ojpopup","ojs/ojselectsingle"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputCurrencyConversionRateViewModel=void 0;const g="background: #222; color: #bada55";t.InputCurrencyConversionRateViewModel=class{constructor(e){this.conversionRatesDateMap=i.observable(new Map),this.localInverseRateValue=i.observable(),this.fetchedStartDate=i.observable(0),this.fetchedEndDate=i.observable(0),this.conversionDisabled=i.observable(!1),this.conversionRateRequired=i.observable(!1),this.datePickerDisabled=i.observable(!1),this.isRateTypeValid=i.observable(!0),this.rateTypeRequired=!0,this.shouldOpenPopup=!0,this.computeValueOnCloseOfPopUp=!0,this.isComponentResettingValues=!1,this.conversionRateMinValue=1e-20,this.isInverseRateComputed=!1,this.isFetchRateDataInProgress=!0,this.isConversionRateSetByProp=!1,this.customMessagesInternal=i.observableArray([]),this.customMessagesExternal=i.observableArray([]),this.initialInverseRateValue=0,this.panelValidState={conversionRate:m.VALID_STATE.VALID,datePicker:m.VALID_STATE.VALID,rateType:m.VALID_STATE.VALID},this.isPopUpInitilaized=!1,this.deferredObservable={deferred:!0},this.lastDateFromTheDatePicker=null,this.isFetchingRatesInProgress=!1,this.showMessages=()=>{if(this.isPopUpInitilaized){this.getRateTypeElement().showMessages();this.getDatePickerElement().showMessages();this.getConversionRateOjInputNumberEl().showMessages();this.getValueElement().showMessages()}else this.validateComponentValue(!1)},this.validate=async()=>{if(this.isPopUpInitilaized){const e=this.getRateTypeElement();if(await a.getContext(e).getBusyContext().whenReady(),await e.validate()===m.VALID_STATE.INVALID)return m.VALID_STATE.INVALID;const t=this.getDatePickerElement();if(await a.getContext(t).getBusyContext().whenReady(),!t.disabled&&await t.validate()===m.VALID_STATE.INVALID)return m.VALID_STATE.INVALID;const i=this.getConversionRateOjInputNumberEl();if(await a.getContext(i).getBusyContext().whenReady(),!i.disabled&&!i.readonly&&await i.validate()===m.VALID_STATE.INVALID)return m.VALID_STATE.INVALID;const o=this.getValueElement();return await o.validate()===m.VALID_STATE.INVALID?m.VALID_STATE.INVALID:m.VALID_STATE.VALID}this.validateComponentValue(!1);return Object.keys(this.panelValidState).find(e=>this.panelValidState[e]!==m.VALID_STATE.VALID)?m.VALID_STATE.INVALID:m.VALID_STATE.VALID},this.reset=()=>{if(this.isPopUpInitilaized){const e=this.getRateTypeElement();e.reset();const t=this.getConversionRateOjInputNumberEl();t.reset(),this.updateInverseConversionRate(t.value),this.properties.value=Object.assign(Object.assign({},this.properties.value),{conversionRate:t.value,rateType:e.value})}else this.validateComponentValue(!0);this.customMessagesInternal.removeAll()},this.focus=async()=>{const e=this.getValueElement();e&&(await a.getContext(e).getBusyContext().whenReady(),e.focus())},this.onDatePickerValidChanged=e=>{const t=e.detail.value;t!==m.VALID_STATE.PENDING&&(this.panelValidState.datePicker=t,this.validateCurencyConversionInputField())},this.onConversionRateValidChanged=e=>{const t=e.detail.value;if(t===m.VALID_STATE.PENDING)return;const i=e.currentTarget.id;if(t!==m.VALID_STATE.VALID&&"internal"===e.detail.updatedFrom){const e=!i.includes("inversion"),t=e?this.getConversionRateOjInputNumberEl():this.getInverseConversionRateOjInputNumberEl();if(t.value&&t.rawValue.length>0){(e?this.getInverseConversionRateOjInputNumberEl():this.getConversionRateOjInputNumberEl()).value=null}}i===this.uid+"_input_currency_conversion_rate_conversion_rate"&&(this.panelValidState.conversionRate=t,this.validateCurencyConversionInputField())},this.onConversionRateValueChanged=e=>{this.updateInverseConversionRate(e),this.validateCurencyConversionInputField()},this.onInverseRateValueChanged=e=>{if("internal"===e.detail.updatedFrom&&e.detail.value){this.isInverseRateComputed=!0;const t=e.detail.value;this.localRateValue(1/t)}},this.onPopUpLaunch=async()=>{const e=this.getValueElement();this.initialInverseRateValue=this.localInverseRateValue(),"invalidShown"!==e.valid||this.isPopUpInitilaized?this.isPopUpInitilaized=!0:(await a.getContext(this.getPopupElement()).getBusyContext().whenReady(),await a.getContext(this.getRateTypeElement()).getBusyContext().whenReady(),await a.getContext(this.getConversionRateOjInputNumberEl()).getBusyContext().whenReady(),await a.getContext(this.getDatePickerElement()).getBusyContext().whenReady(),this.isPopUpInitilaized=!0,await this.validate())},this.openListener=async()=>{if(this.isComponentResettingValues=!1,!this.properties.disabled&&!this.properties.readonly){const e=this.getPopupElement();if(!e.isOpen()){const t=this.getValueElement();this.setMaxHeightForPopUp(),e.open(t),await a.getContext(e).getBusyContext().whenReady(),this.shouldOpenPopup=!1}}},this.onInputTextClickHandler=async e=>{this.shouldAllowToOpenPopup(e)&&await this.openListener()},this.onBackButtonClick=async()=>{if(this.isPopupDirty()){const e=this.getUnsavedChangeMessagePopupElement(),t=this.getBackCaretButtonElement();e.open(t),await a.getContext(e).getBusyContext().whenReady()}else{this.computeValueOnCloseOfPopUp=!1;this.getPopupElement().close()}},this.onCancelButtonClick=e=>{this.getUnsavedChangeMessagePopupElement().close()},this.onDiscardButtonClick=e=>{this.computeValueOnCloseOfPopUp=!1;this.getUnsavedChangeMessagePopupElement().close();this.getPopupElement().close()},this.onUnsavedMessagePopUpCloseListener=e=>{e.stopPropagation()},this.onPopUpCloseListener=()=>{if(this.computeValueOnCloseOfPopUp){const e={conversionRate:this.panelValidState.rateType===m.VALID_STATE.VALID&&this.panelValidState.conversionRate===m.VALID_STATE.VALID?this.localRateValue():null,rateType:this.panelValidState.rateType===m.VALID_STATE.VALID?this.getRateType():null,selectedDate:this.localSelectedDate()};this.properties.value=e,this.shouldOpenPopup=!0}else this.isPopupDirty()&&(this.isComponentResettingValues=!0,this.localRateValue(this.properties.value.conversionRate),this.localInverseRateValue(this.initialInverseRateValue),this.localSelectedDate(this.properties.value.selectedDate),this.properties.value.rateType!==this.getRateType()&&this.fetchRateTypeConfig({rateType:this.properties.value.rateType}).then(()=>{this.conversionDisabled()&&this.fetchConversionRates(m.InputCurrencyConversionRateUtils.getDateRangeFromSelectedDate(this.localSelectedDate()),this.properties.value.rateType)}).catch(e=>{c.log(e.message)}),this.computeValueOnCloseOfPopUp=!0)},this.rateTypeChangeListener=e=>{e&&(this.clearConversionRateValues(),this.conversionDisabled(e.ConversionRateDisabled),this.datePickerDisabled(e.DatePickerDisabled),this.conversionRateRequired(e.ConversionRateRequired),this.conversionRatesDateMap(new Map),this.fetchConversionRates(m.InputCurrencyConversionRateUtils.getDateRangeFromSelectedDate(this.localSelectedDate()),e.label),this.validateCurencyConversionInputField())},this.onRateTypeValidChanged=e=>{const t=e.detail.value;t===m.VALID_STATE.PENDING||this.isFetchRateDataInProgress||(t===m.VALID_STATE.VALID?this.isRateTypeValid(!0):(this.clearConversionRateFields(),this.isRateTypeValid(!1)),this.panelValidState.rateType=t,this.validateCurencyConversionInputField())},this.onConversionInputFieldValueChanged=e=>{this.customMessagesExternal.removeAll(),this.customMessagesInternal().length>0&&this.customMessagesInternal([...this.customMessagesInternal()])},this.onApplyButtonClick=()=>{this.getPopupElement().close()},this.datePickerRefresh=e=>{const t=this.getDatePickerElement();if(t){const e=t.dayFormatter;t.dayFormatter=null,t.dayFormatter=e}},this.onConversionRatesRefresh=e=>{if(this.properties.conversionRatesData.data){const e=new Map,t=this.getKeyAttributeForConversionRatedADP();this.properties.conversionRatesData.data.forEach(i=>{const o=i[t],s=m.InputCurrencyConversionRateUtils.getLocaleDateString(o);e.set(s,m.InputCurrencyConversionRateUtils.parseValueToNumber(i.ConversionRate))}),this.conversionRatesDateMap(e);const i=m.InputCurrencyConversionRateUtils.getLocaleDateString(this.localSelectedDate());if(i){const t=e.get(i);t?this.localRateValue(t):this.isConversionRateSetByProp?(this.localRateValue(this.properties.value.conversionRate),this.isConversionRateSetByProp=!1):this.datePickerDisabled()&&this.conversionDisabled()||this.setRateValueAfterReset(null),this.localRateValue()===this.properties.value.conversionRate||this.isPopUpOpen()||(this.properties.value=Object.assign(Object.assign({},this.properties.value),{conversionRate:this.localRateValue()}))}}},this.fetchRateTypeConfig=async e=>{let t={};if(e.rateType){if(this.isFetchRateDataInProgress=!0,t=await this.fetchRateTypeMetaData(this.properties.rateTypesData,e),this.isFetchRateDataInProgress=!1,t&&0!==Object.keys(t).length){const e=t.data;this.localRateType({data:e,key:t.metadata.key})}}else this.panelValidState.rateType=m.VALID_STATE.INVALID_HIDDEN,this.clearConversionRateValues(),this.conversionDisabled(!0)},this.fetchRateTypeMetaData=async(e,t)=>{const i=t.rateType,o={criteria:i?[{attribute:"UserConversionType",op:"$eq",value:i}]:[],op:"$and"},s=new d(e,{filterCriterion:o}),a=await s.fetchByOffset({filterCriterion:o,offset:null});if(a&&a.results&&a.results[0]){const e=a.results[0],t=e.data;return this.conversionDisabled(t.ConversionRateDisabled),this.datePickerDisabled(t.DatePickerDisabled),this.conversionRateRequired(t.ConversionRateRequired),e}return{}},this.dateClickListener=e=>{if(this.isFetchRateDataInProgress)return void c.log("Fetching rate type configuration is in progress hence not proceeding further");const t=m.InputCurrencyConversionRateUtils.getLocaleDateString(e),i=this.conversionRatesDateMap(),o=this.isDateWithinRange(new Date(e)),s=i.get(t);s?this.localRateValue(s):this.isConversionRateSetByProp&&o?this.isConversionRateSetByProp=!1:this.datePickerDisabled()||this.clearConversionRateValues(),this.isPopUpOpen()||(o?this.localRateValue()!==this.properties.value.conversionRate&&(this.properties.value=Object.assign(Object.assign({},this.properties.value),{conversionRate:this.localRateValue()})):this.fetchConversionRates(m.InputCurrencyConversionRateUtils.getDateRangeFromSelectedDate(e)))},this.fetchConversionRates=(e,t)=>{const i={endDate:m.InputCurrencyConversionRateUtils.convertMilliSecondsToLocalDate(e.endDate),rateType:t||this.getRateType(),startDate:m.InputCurrencyConversionRateUtils.convertMilliSecondsToLocalDate(e.startDate)};e.startDate!==this.fetchedStartDate()&&this.fetchedStartDate(e.startDate),e.endDate!==this.fetchedEndDate()&&this.fetchedEndDate(e.endDate),n.EventDispatcher.dispatch("spDataChangeAction",this.composite,i)},this.dayFormatter=e=>{const t=new Date(e.fullYear,e.month-1,e.date),i=t.toLocaleDateString();return this.conversionRatesDateMap().has(i)?{disabled:!1}:(this.isFetchingRatesInProgress?this.lastDateFromTheDatePicker=t:this.isDateWithinRange(t)||1!==t.getDate()||(this.fetchConversionRatesWithDelay(t),this.isFetchingRatesInProgress=!0),{disabled:!0})},this.onDatePickerDayFormatterChanged=async()=>{await this.focusRateTypeElement()},this.focusRateTypeElement=async()=>{const e=this.getRateTypeElement();await a.getContext(e).getBusyContext().whenReady(),null==e||e.focus()},this.fetchConversionRatesWithDelay=e=>{setTimeout(()=>{m.InputCurrencyConversionRateUtils.getDifferenceBwDatesInDays(e,this.lastDateFromTheDatePicker)>7&&this.fetchConversionRates(m.InputCurrencyConversionRateUtils.getDateRangeFromStartDate(e)),this.isFetchingRatesInProgress=!1})},this.isDateWithinRange=e=>{if(0===this.fetchedStartDate()||0===this.fetchedEndDate())return!1;const t=e.getTime();return t<=this.fetchedEndDate()&&t>=this.fetchedStartDate()},this.getTargetElement=e=>document.getElementById(`${this.uid}_input_currency_conversion_rate_${e}`),this.getPopupElement=()=>this.getTargetElement("popup"),this.getRateTypeElement=()=>this.getTargetElement("rate_type"),this.getDatePickerElement=()=>this.getTargetElement("date_picker"),this.getConversionRateOjInputNumberEl=()=>this.getTargetElement("conversion_rate"),this.getInverseConversionRateOjInputNumberEl=()=>this.getTargetElement("inversion_rate"),this.getUnsavedChangeMessagePopupElement=()=>this.getTargetElement("unsaved_changes_message_popup"),this.getBackCaretButtonElement=()=>this.getTargetElement("popup_back_button"),this.getValueElement=()=>document.querySelector(`#${this.uid}_input_currency_conversion_rate`),this.isPopupDirty=()=>this.properties.value.conversionRate!==this.localRateValue()||this.properties.value.rateType!==this.getRateType()||this.properties.value.selectedDate!==this.localSelectedDate()||this.initialInverseRateValue!==this.localInverseRateValue(),this.shouldAllowToOpenPopup=e=>!this.isMobileView()||"oj-ux-ico-comm-in"===e.target.className,this.setMaxHeightForPopUp=()=>{const e=this.getValueElement(),t=e.getBoundingClientRect(),i=window.innerHeight;if(t.top>i-(t.top+t.height)){const t=this.getPopupElement();t.style.maxHeight=e.offsetTop+"px",t.style.overflowY="auto"}},this.getKeyAttributeForConversionRatedADP=()=>{var e,t,i;const o=null!==(t=null===(e=this.properties.conversionRatesData.options)||void 0===e?void 0:e.keyAttributes)&&void 0!==t?t:null===(i=this.properties.conversionRatesData.options)||void 0===i?void 0:i.idAttribute;return Array.isArray(o)&&o.length>0?o[0]:o},this.createSubscriptionForValueUpdates=()=>{this.conversionRateSubscription=this.conversionRatesDateMap.subscribe(this.datePickerRefresh),this.localRateTypeSubscription=this.localRateType.subscribe(e=>{this.isComponentResettingValues||(this.rateTypeChangeListener(e.data),this.isConversionRateSetByProp=!1),this.isPopUpInitilaized||this.validateComponentValue(!0)}),this.localSelectedDateSubscription=this.localSelectedDate.subscribe(e=>{this.isComponentResettingValues||(this.dateClickListener(e),this.isConversionRateSetByProp=!1),this.isPopUpInitilaized||this.validateComponentValue(!0)}),this.localRateValueSubscription=this.localRateValue.subscribe(e=>{this.isComponentResettingValues||this.onConversionRateValueChanged(e),this.isPopUpInitilaized||this.validateComponentValue(!0)})},this.disposeSubscriptionForValueUpdates=()=>{this.localRateTypeSubscription.dispose(),this.localSelectedDateSubscription.dispose(),this.localRateValueSubscription.dispose(),this.conversionRateSubscription.dispose()},this.resetPanelValidState=()=>{this.panelValidState.conversionRate=m.VALID_STATE.VALID,this.panelValidState.rateType=m.VALID_STATE.VALID,this.panelValidState.datePicker=m.VALID_STATE.VALID},this.validateComponentValue=e=>{if(this.resetPanelValidState(),this.properties.value&&this.properties.value.rateType){!this.localRateType().data.ConversionRateRequired||this.localRateValue()&&!isNaN(this.localRateValue())||(this.panelValidState.conversionRate=e?m.VALID_STATE.INVALID_HIDDEN:m.VALID_STATE.INVALID_SHOWN),m.InputCurrencyConversionRateUtils.isDateValid(this.localSelectedDate())||(this.panelValidState.datePicker=e?m.VALID_STATE.INVALID_HIDDEN:m.VALID_STATE.INVALID_SHOWN)}else this.panelValidState.rateType=e?m.VALID_STATE.INVALID_HIDDEN:m.VALID_STATE.INVALID_SHOWN;this.validateCurencyConversionInputField()},this.updateInverseConversionRate=e=>{e&&(this.isInverseRateComputed?this.isInverseRateComputed=!1:this.localInverseRateValue(1/e))},this.setRateValueAfterReset=e=>{this.resetAllValues(),this.localRateValue(e)},this.resetAllValues=()=>{const e=this.getConversionRateOjInputNumberEl(),t=this.getInverseConversionRateOjInputNumberEl();null==e||e.reset(),null==t||t.reset()},this.getInvalidProperty=()=>{const e=Object.keys(this.panelValidState);let t="";for(let i=0;i<=e.length;i++){if(this.panelValidState[e[i]]===m.VALID_STATE.INVALID_SHOWN)return e[i];t||this.panelValidState[e[i]]!==m.VALID_STATE.INVALID_HIDDEN||(t=e[i])}return t},this.validateCurencyConversionInputField=()=>{const e=this.getInvalidProperty();if(this.properties.valid=e?this.panelValidState[e]:m.VALID_STATE.VALID,""==e&&null==this.localRateValue()&&(this.properties.valid=m.VALID_STATE.INVALID_HIDDEN),this.properties.valid===m.VALID_STATE.VALID)return void this.customMessagesInternal.removeAll();let t="";if(this.panelValidState.rateType===m.VALID_STATE.INVALID_SHOWN?t=this.res.selectConversionRateType:this.panelValidState.datePicker===m.VALID_STATE.INVALID_SHOWN?t=this.res.selectedDateNotAvailableTryAnother:this.panelValidState.conversionRate===m.VALID_STATE.INVALID_SHOWN&&(t=this.res.checkRateValues),this.customMessagesInternal.removeAll(),this.customMessagesExternal.removeAll(),""!==t){const e=new p(t,t,"error");this.customMessagesInternal([e]),this.customMessagesExternal.removeAll()}},this.addInputKeydownListener=()=>{this.getValueElement().addEventListener("keydown",async e=>{const t=e.key;if(this.isPopUpOpen())switch(t){case m.EventKey.TAB:case m.EventKey.ESC:return void this.closePopUp();case m.EventKey.ENTER:case m.EventKey.DOWN_ARROW:case m.EventKey.FN_F6:return void await this.focusRateTypeElement()}else switch(t){case m.EventKey.ENTER:case m.EventKey.DOWN_ARROW:case m.EventKey.FN_F6:return await this.openListener(),void await this.focusRateTypeElement();case m.EventKey.TAB:return}(e.ctrlKey||e.metaKey)&&["a","c"].indexOf(e.key.toLowerCase())>-1||(e.stopPropagation(),e.preventDefault())})},this.addInputFocusListener=()=>{this.getValueElement().addEventListener("focus",async e=>{this.shouldOpenPopup&&this.shouldAllowToOpenPopup(e)&&await this.openListener()})},this.closePopUp=()=>{this.getPopupElement().close()},this.isPopUpOpen=()=>this.getPopupElement().isOpen(),this.getRateType=()=>this.localRateType().data.label,this.setSelectedDate=e=>{if(e)m.InputCurrencyConversionRateUtils.isDateValid(e)||(c.error("Invalid date is passed hence defaulting to today's date",e),e=m.InputCurrencyConversionRateUtils.getTodayLocalDate("-"),this.properties.value.selectedDate=e),this.localSelectedDate(e);else{const e=m.InputCurrencyConversionRateUtils.getTodayLocalDate("-");this.properties.value.selectedDate=e,this.localSelectedDate(e)}},this.getConversionFieldDisplayText=()=>{let e="";if(this.properties.value){const{rateType:t,conversionRate:i,selectedDate:o}=this.properties.value;t&&(e=t,e+="   "+this.dateFormatConverter.format(o),e+=i?"   "+this.maxFractionNumberConverter.format(i):"")}return e},this.clearConversionRateFields=()=>{const e=this.getConversionRateOjInputNumberEl();e.reset(),e.value=null;const t=this.getInverseConversionRateOjInputNumberEl();t.reset(),t.value=null},this.clearConversionRateValues=()=>{this.localRateValue(null),this.localInverseRateValue(null)},this.getCombinedCustomMessages=()=>[...this.customMessagesInternal(),...this.customMessagesExternal()],this.checkAndSetLocalRateValue=e=>{e.value.conversionRate>0?this.localRateValue(e.value.conversionRate):(this.localRateValue(null),this.properties.value.conversionRate=null,this.localInverseRateValue(null)),this.isConversionRateSetByProp=!0};const t=a.getContext(e.element).getBusyContext();this.uid=e.uniqueId;this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.screenRange=u.createScreenRangeObservable(),this.isMobileView=i.computed(()=>h.compare(this.screenRange(),"sm")<=0),this.composite=e.element,this.properties=e.properties,this.res=Object.assign(Object.assign({},o),this.properties.translations),this.maxFractionNumberConverter=new l.IntlNumberConverter({maximumFractionDigits:20,style:"decimal"}),this.dateFormatConverter=new r.IntlDateTimeConverter({day:"numeric",month:"numeric",year:"numeric"}),this.displayValue=i.computed(this.getConversionFieldDisplayText),this.conversionRateValidators=[new s({hint:{min:this.res.enterGreaterThanZero},messageDetail:{rangeUnderflow:this.res.enterGreaterThanZero},min:this.conversionRateMinValue})],this.localRateType=i.observable({}).extend(this.deferredObservable),this.localRateValue=i.observable(this.properties.value&&this.properties.value.conversionRate).extend(this.deferredObservable),this.localSelectedDate=i.observable(this.properties.value&&this.properties.value.selectedDate).extend(this.deferredObservable),this.setSelectedDate(this.properties.value.selectedDate),this.validProperty={},this.customMessagesExternal(this.properties.messagesCustom),this.customMessagesComputed=i.computed(this.getCombinedCustomMessages),this.updateInverseConversionRate(this.localRateValue()),this.fetchRateTypeConfig(this.properties.value).then(()=>c.log("Successful Rate Fetch")).catch(e=>{c.log(e.message)}),this.createSubscriptionForValueUpdates(),this.busyResolve()}async propertyChanged(e){c.log(`%c CCA ${this.uid} connected`,g),"value"===e.property&&"internal"!==e.updatedFrom&&(e.value.rateType!==e.previousValue.rateType&&await this.fetchRateTypeConfig(e.value),e.value.selectedDate!==e.previousValue.selectedDate&&this.setSelectedDate(e.value.selectedDate),e.value.conversionRate!==e.previousValue.conversionRate&&this.checkAndSetLocalRateValue(e)),"messagesCustom"===e.property&&this.customMessagesExternal(e.value)}activated(e){c.log(`%c CCA ${this.uid} activated`,g)}connected(e){c.log(`%c CCA ${this.uid} connected`,g),this.properties.conversionRatesData&&this.properties.conversionRatesData.addEventListener("refresh",this.onConversionRatesRefresh)}disconnected(e){c.log("disconnected"),this.properties.conversionRatesData&&this.properties.conversionRatesData.removeEventListener("refresh"),this.disposeSubscriptionForValueUpdates()}bindingsApplied(e){c.log(`%c CCA ${this.uid} bindings applied`,g),this.addInputKeydownListener(),this.addInputFocusListener()}}})),define("css!oj-sp/input-currency-conversion-rate/input-currency-conversion-rate-styles",[],(function(){})),define("oj-sp/input-currency-conversion-rate/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./input-currency-conversion-rate-view.html","./input-currency-conversion-rate-viewModel","css!./input-currency-conversion-rate-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-input-currency-conversion-rate",{metadata:JSON.parse(o),view:s,viewModel:a.InputCurrencyConversionRateViewModel})})),define("oj-sp/input-email/validators/EmailValidator",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailValidator=void 0;t.EmailValidator=class{constructor(e){this.hint=Promise.resolve(e.hint),this.messageDetail=e.messageDetail}validate(e){return new Promise((t,i)=>{if(!(null==e?void 0:e.length))return t();const o=e.lastIndexOf("@");if(o<=0||o>64)return i({detail:this.messageDetail});const s=e.substring(0,o),a=e.substr(o+1);if(s.startsWith(".")||s.endsWith("."))return i({detail:this.messageDetail});if(s.includes(".."))return i({detail:this.messageDetail});let n=s.replace(/[a-zA-Z0-9!#$%&'*+\-/=?^_`.{|}~]|[^\u0000-\u007F]/g,"");if(n=n.replace(/("[^.]+")/,""),s.includes("\\@")&&(n=n.replace(/\\@/g,"")),s.includes("\\ ")&&(n=n.replace(/\\ /g,"")),s.includes("\\,")&&(n=n.replace(/\\,/g,"")),s.includes("\\[")&&(n=n.replace(/\\\[/g,"")),s.includes("\\]")&&(n=n.replace(/\\\]/g,"")),s.includes("\\\\")&&(n=n.replace(/\\\\/g,"")),s.includes('\\"')&&(n=n.replace('\\"',"")),n.length>0)return i({detail:this.messageDetail});const r=s.match(/".*?"/g),l=s.length;if(null==r||r.forEach(t=>{if(t.length>=l)return;const o=e.indexOf(t);switch(o){case 0:if("."!==e.charAt(o+t.length))return i({detail:this.messageDetail});break;case l-t.length:if("."!==e.charAt(o-1))return i({detail:this.messageDetail});break;default:if("."!==e.charAt(o-1)||"."!==e.charAt(o+t.length))return i({detail:this.messageDetail})}}),(null==a?void 0:a.length)<1||(null==a?void 0:a.length)>255)return i({detail:this.messageDetail});const d=a.split(".");if((null==d?void 0:d.length)<2)return i({detail:this.messageDetail});null==d||d.forEach(e=>{if(0===e.length||null===e)return i({detail:this.messageDetail});if(e.startsWith("-")||e.endsWith("-"))return i({detail:this.messageDetail});return e.replace(/[a-zA-Z0-9-]|[^\u0000-\u007F]/g,"").length>0||e.length>63?i({detail:this.messageDetail}):void 0});const c=null==d?void 0:d[d.length-1];return(null==c?void 0:c.length)>=0&&0===c.replace(/[0-9]/g,"").length?i({detail:this.messageDetail}):t()})}}})),define("css!oj-sp/input-email/input-email-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/input-email/input-email",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","ojs/ojvcomponent-binding","preact","punycode","./validators/EmailValidator","css!./input-email-styles","ojs/ojinputtext","ojs/ojlabel"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEmail=void 0;let l=class extends a.Component{constructor(e){var t;super(e),this.openEmailClient=e=>{var t,i;if(this.props.eventEnabled)null===(i=(t=this.props).onOjSpAction)||void 0===i||i.call(t);else{const e=this.toASCII(this.props.value);"new"===this.props.actionTarget?window.open("mailto:"+e,"_blank"):window.open("mailto:"+e,"_self")}e.preventDefault()},this.toASCII=e=>n.toASCII(e),this.setInputElem=e=>{this.inputElem=e},this.setLinkElem=e=>{this.linkElem=e},this.labelHintChangeHandler=e=>{var t,i;null===(i=(t=this.props).onLabelHintChanged)||void 0===i||i.call(t,e.detail.value)},this.rawValueChangeHandler=e=>{var t,i;null===(i=(t=this.props).onRawValueChanged)||void 0===i||i.call(t,e.detail.value)},this.validChangedHandler=e=>{var t,i;null===(i=(t=this.props).onValidChanged)||void 0===i||i.call(t,e.detail.value)},this.valueChangeHandler=e=>{var t,i;null===(i=(t=this.props).onValueChanged)||void 0===i||i.call(t,e.detail.value)};const s=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)();let a;if(this.uniqueEmailId=s+"_email",this.uniqueLabelId=s+"_label",this.res=Object.assign(Object.assign({},i),e.translations),a=e.translations?e.translations.errorMessage:this.res.errorMessageEmail,this.emailPatternValidator=[new r.EmailValidator({hint:"",messageDetail:a})],e.validators){const t=e.validators.values();for(const e of t)this.emailPatternValidator.push(e)}}render(e){const t=e.displayOptions;if(e.readonly){let t=null;return"inside"===e.labelEdge&&(t=(0,a.h)("oj-label",{id:this.uniqueLabelId,for:this.uniqueEmailId,class:"oj-typography-body-xs oj-typography-semi-bold"},(0,a.h)("span",null,e.labelHint))),(0,a.h)("div",null,t,(0,a.h)("div",{class:"oj-sp-input-email-field-readonly-div"},(0,a.h)("a",{id:this.uniqueEmailId,ref:this.setLinkElem,title:""+e.value,onClick:this.openEmailClient,href:"#",class:"oj-link oj-sp-input-email-link","aria-labelledby":`${this.uniqueEmailId} ${e.labelledBy}`||`${this.uniqueEmailId} ${this.uniqueLabelId}`},(0,a.h)("span",null,e.value))))}return(0,a.h)("oj-input-text",{ref:this.setInputElem,id:this.uniqueEmailId,labelHint:e.labelHint,onlabelHintChanged:this.labelHintChangeHandler,labelEdge:e.labelEdge,readonly:e.readonly,value:e.value,onvalueChanged:this.valueChangeHandler,placeholder:e.placeholder,disabled:e.disabled,required:e.required,help:e.help,helpHints:e.helpHints,validators:this.emailPatternValidator,onvalidChanged:this.validChangedHandler,autocomplete:"email",virtualKeyboard:"email",labelledBy:e.labelledBy,autofocus:e.autoFocus,onrawValueChanged:this.rawValueChangeHandler,userAssistanceDensity:e.userAssistanceDensity,displayOptions:t})}focus(){this.props.readonly?this.linkElem.focus():this.inputElem.focus()}refresh(){this.inputElem&&this.inputElem.refresh()}reset(){this.inputElem&&this.inputElem.reset()}showMessages(){this.inputElem&&this.inputElem.showMessages()}validate(){if(this.inputElem)return this.inputElem.validate()}};l.defaultProps={actionTarget:"same",autoFocus:!0,disabled:!1,displayOptions:{messages:"display",validatorHint:"display"},labelEdge:"inside",labelHint:i.email,userAssistanceDensity:"reflow"},l._metadata={properties:{actionTarget:{type:"string",enumValues:["new","same"]},autoFocus:{type:"boolean"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]},validatorHint:{type:"string",enumValues:["none","display"]}}},eventEnabled:{type:"boolean"},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"}}},labelEdge:{type:"string",enumValues:["none","inside","provided"],binding:{consume:{name:"labelEdge"},provide:[{default:"inside",name:"labelEdge",transform:{top:"provided",start:"provided"}}]}},labelHint:{type:"string",writeback:!0},labelledBy:{type:"string"},placeholder:{type:"string"},rawValue:{type:"string",readOnly:!0,writeback:!0},readonly:{type:"boolean",binding:{consume:{name:"readonly"},provide:[{name:"readonly",default:!1}]}},required:{type:"boolean"},translations:{type:"object",properties:{errorMessage:{type:"string"}}},userAssistanceDensity:{type:"string",enumValues:["reflow","compact","efficient"],binding:{consume:{name:"userAssistanceDensity"},provide:[{name:"userAssistanceDensity",default:"reflow"}]}},valid:{type:"string",enumValues:["invalidHidden","invalidShown","valid","pending"],readOnly:!0,writeback:!0},validators:{type:"Array<object>"},value:{type:"string",writeback:!0}},events:{ojSpAction:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["labelHint","rawValue","valid","value"],_READ_ONLY_PROPS:["rawValue","valid"],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{focus:{},refresh:{},reset:{},showMessages:{},validate:{}}},l=__decorate([(0,o.customElement)("oj-sp-input-email"),__metadata("design:paramtypes",[Object])],l),t.InputEmail=l})),define("oj-sp/input-email/loader",["require","exports","./input-email"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEmail=void 0,Object.defineProperty(t,"InputEmail",{enumerable:!0,get:function(){return i.InputEmail}})})),define("text!oj-sp/input-key-flex-field/component.json",[],(function(){return'{"name":"input-key-flex-field","description":"Input Key Flexfield is an input component which accepts a Key Flexfield value. A key Flexfield is a field made up of segments, where each segment has both a value and a meaning.","type":"composite","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Input Key Flex Field","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","icon":{"iconPath":"extension/catalog/images/ico-input-key-flex-field.svg"},"dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-flex-filter-chip":"2404.0.0","oj-sp-common-util":"2404.0.0"},"properties":{"attributeName":{"displayName":"Attribute Name","description":"Indicates the key combination attribute that is rendered by this component.","type":"string","writeback":false},"autofocus":{"displayName":"Autofocus","description":"The property is used to enable focus on load of the component","type":"boolean","value":false,"writeback":false},"bindValidationDate":{"displayName":"Bind Validation Date","description":"v-date bind variable (optional) - if v-date needs to be different from current date (e.g. accounting date).","type":"string","writeback":false},"context":{"displayName":"Context","description":"This property is used to retrieve CCID if combination is valid and passing bindValues","type":"Object","properties":{"codeCombinationId":{"type":"string","readOnly":true},"bindValues":{"type":"Object"}},"value":{"codeCombinationId":null,"bindValues":null},"writeback":true},"describedBy":{"description":"","displayName":"Described By","type":"string","writeback":false},"disabled":{"displayName":"Disabled","description":"Disabled mode of text box","type":"boolean","value":false,"writeback":false},"displayOptions":{"displayName":"displayOptions","description":"Display options for auxiliary content that determines whether or not it should be displayed","type":"object|null","writeback":false,"properties":{"messages":{"description":"Display options for auxiliary message text. The supported attribute values are theme dependent.","type":"string","value":"display","writeback":false,"enumValues":["display","none"],"propertyEditorValues":{"display":{"description":"Show custom messages.","displayName":"Display"},"none":{"description":"Don\'t show custom messages.","displayName":"None"}}},"validatorHint":{"description":"Display options for auxiliary validator hint text. The supported attribute values are theme dependent.","type":"string","enumValues":["display","none"]}}},"helpHints":{"displayName":"Help Hints","description":"Represents hints for oj-form-layout element to render help information on the label of the component","type":"object","properties":{"definition":{"description":"Hint for help definition text associated with the label","type":"string"},"source":{"description":"Hint for help source link associated with the label.","type":"string"}}},"labelEdge":{"displayName":"Label Edge","description":"Specifies how the label of the component is aligned when the label-hint attribute is set on the component","type":"string","writeback":false,"enumValues":["inside","none","provided"],"binding":{"consume":{"name":"labelEdge"}}},"labelHint":{"displayName":"Label Hint","description":"Represents a hint to render a label on the editable component.","type":"string","translatable":true,"writeback":false},"labelledBy":{"description":"Used to establish a relationship between this element and another element.","displayName":"Labelled By","type":"string","writeback":false},"messagesCustom":{"displayName":"Messages Custom","description":"","type":"Array","writeback":true},"metadata":{"displayName":"Metadata","description":"Metadata from Dynamic UI. It is internal property ,used when component is rendered dynamically using dynamic form or table","type":"Object","writeback":false},"rawValue":{"displayName":"Raw value","description":"Key Flex Field  Raw value","type":"string","writeback":true,"readOnly":true},"readonly":{"displayName":"Readonly","description":"Read only mode of operation","type":"boolean","value":false,"binding":{"consume":{"name":"readonly"}}},"required":{"displayName":"Required","description":"Indicates whether the component value is required or not","type":"boolean","value":false,"writeback":false},"structureInstanceNumber":{"displayName":"Structure Instance Number","description":"Structure Instance Number (discriminator) for the KFF metadata","type":"number","writeback":false},"suggestedValue":{"displayName":"KFF default Suggest Value","description":"Key Flex Field Suggest Value on focus","type":"string","writeback":false},"userAssistanceDensity":{"displayName":"User Assistance Density","description":"Specifies the density of the form component\'s user assistance presentation","type":"string","value":"reflow","enumValues":["compact","efficient","reflow"],"propertyEditorValues":{"compact":{"description":"Messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required.","displayName":"Compact"},"efficient":{"description":"Messages, help, hints, and required are all shown inline under the field with reserved space.","displayName":"Efficient"},"reflow":{"description":"Default value. Messages, help, hints, and required are all shown inline under the field with no reserved space.","displayName":"Reflow"}},"binding":{"consume":{"name":"userAssistanceDensity"}}},"valid":{"displayName":"Valid","description":"Valid property that is updated as the internal state of the component changes.","type":"string","value":"invalidHidden","enumValues":["invalidHidden","invalidShown","valid"],"readOnly":true,"writeback":true,"visible":false},"validators":{"displayName":"Validators","description":"Array of oj.Validator objects for the component","type":"Array<Object>","writeback":false},"value":{"displayName":" KFF Value","description":"Key Flex Field value","type":"string","writeback":true}},"methods":{"focus":{"description":"Navigates to the composite component"},"refresh":{"description":"Refreshes the component. Usually called after dom changes have been made."},"reset":{"description":"Resets the various messages arrays and restore UI to reflect the current valid value of the component"},"showMessages":{"description":"Takes all deferred messages and shows them","return":"void"},"validate":{"description":"Validates the component\'s value using all validators registered on the component and also performs server side validation","return":"Promise"}},"slots":{},"extension":{"catalog":{"category":"Redwood Forms & Inputs","tags":["Redwood","KFF"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Input%20Key%20Flex%20Field%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrakeyflexfield.html","coverImage":"extension/catalog/images/ico-input-key-flex-field.svg"},"vbdt":{}}}'})),define("text!oj-sp/input-key-flex-field/input-key-flex-field-view.html",[],(function(){return'<html><head></head><body><div><oj-bind-if test="[[isMobile]]"><oj-popup :id="[[\'kffTooltipPopup\'+$uniqueId]]"class="oj-sp-input-key-flex-field-popup-mobile"position.my.horizontal="center"position.my.vertical="center"position.at.horizontal="center"position.at.vertical="center"position.of="window"position.collision="fit"modality="modal"><div class="oj-flex-bar"><div class="oj-sp-input-key-flex-field-heading oj-flex-bar-start"><div class="oj-flex-item oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"><div role="heading"aria-level="1"class="oj-flex-item oj-text-color-primary oj-typography-subheading-sm"><oj-bind-text value="[[res.combinationDetails]]"></oj-bind-text></div><oj-bind-if test="{{showAliases()}}"><span class="oj-flex-item oj-text-color-primary oj-typography-body-sm"><oj-bind-text value="{{dataAliasString}}"></oj-bind-text></span></oj-bind-if></div></div><div class="oj-sp-input-key-flex-field-mobile-cancel-icon oj-flex-bar-end"><oj-button class="oj-button-sm"display="icons"chroming="borderless"on-oj-action="[[closeTooltip]]"><span slot="startIcon"class="oj-ux-ico-close"></span><oj-bind-text value="[[res.close]]"></oj-bind-text></oj-button></div></div><hr><oj-list-view aria-label="list to show segments"class="oj-listview-item-padding-off"data="[[dataprovider]]"><template slot="itemTemplate"data-oj-as="item"><li><oj-list-item-layout><div slot="overline"class="oj-typography-body-sm oj-text-color-secondary"><oj-bind-text value="[[item.data.Segment]]"></oj-bind-text></div><div class="oj-text-color-primary oj-typography-body-md"><oj-bind-text value="[[item.data.Value]]"></oj-bind-text></div><div slot="secondary"class="oj-text-color-primary oj-typography-body-md"><oj-bind-text value="[[item.data.Description]]"></oj-bind-text></div></oj-list-item-layout></li></template></oj-list-view></oj-popup></oj-bind-if><div><oj-bind-if test="[[!isMobile()]]"><oj-popup :id="[[\'kffPopup\'+$uniqueId]]"class="oj-sp-input-key-flex-field-popup"><oj-table :id="[[\'kffSegListUl\'+$uniqueId]]":aria-label="[[res.segment_lov_table]]"data="[[lovDataprovider]]"class="oj-sp-input-key-flex-field-popup-table oj-select-results"scroll-policy="loadMoreOnScroll"horizontal-grid-visible="disabled"vertical-grid-visible="disabled"columns="{{segmentLovColumnArray}}"selection-mode=\'{"row": "single"}\'columns-default=\'{"resizable": "disabled",\n                                                   "sortable": "disabled"}\'on-oj-row-action="[[handleRowAction]]"><template slot="noData"><div class="oj-flex oj-sm-align-items-center"><div class="oj-flex oj-sm-align-items-center oj-sm-flex-direction-column"><oj-bind-if test="{{showLoading()}}"><oj-progress-circle size="sm"value="-1"></oj-progress-circle></oj-bind-if><oj-bind-if test="{{!showLoading()}}"><span class="oj-sm-padding-2x"><oj-bind-text value="[[res.no_item_to_display]]"></oj-bind-text></span></oj-bind-if></div></div></template></oj-table></oj-popup></oj-bind-if></div><div><oj-bind-if test="[[!isMobile()]]"><oj-popup :id="[[\'kffTooltipPopup\'+$uniqueId]]"class="oj-sp-input-key-flex-field-tooltip"tail="none"modality="modeless"position.offset.y="8"><div class="oj-flex-bar"><div class="oj-sp-input-key-flex-field-heading oj-flex-bar-start"><div class="oj-flex-item oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"><div role="heading"aria-level="1"class="oj-flex-item oj-text-color-primary oj-typography-subheading-sm"><oj-bind-text value="[[res.combinationDetails]]"></oj-bind-text></div><oj-bind-if test="{{showAliases()}}"><span class="oj-flex-item oj-text-color-primary oj-typography-body-sm"><oj-bind-text value="{{dataAliasString}}"></oj-bind-text></span></oj-bind-if></div></div></div><hr><oj-table :id="[[\'kffTooltipTable\'+$uniqueId]]":aria-label="[[\'kffTooltipTable\']]"class="oj-sp-input-key-flex-field-tooltip-table"data="[[dataprovider]]"horizontal-grid-visible="disabled"vertical-grid-visible="disabled"columns-default=\'{"sortable": "disabled"}\'columns="{{columnArray}}"></oj-table></oj-popup></oj-bind-if></div><oj-popup :id="[[\'kffAdvanceSearch\'+$uniqueId]]"class="oj-sp-input-key-flex-field-advanced-search-popup"position.offset.y="8"initial-focus="firstFocusable"on-oj-close="[[closeAdvancedSearchPopup]]"><oj-input-text :id="[[\'kffAdvanceSearchInput\'+$uniqueId]]":aria-label="[[filterComboboxLabel]]"class="oj-form-control-max-width-md oj-sp-input-key-flex-field-advanced-search-popup-text"autocomplete="off"label-edge="inside"placeholder="[[res.search_value_or_description]]"on-raw-value-changed="[[handleValueChanged]]"value="{{filter}}"clear-icon="never"></oj-input-text><div class="oj-sp-input-key-flex-field-advanced-search-popup-table-border"><oj-table :id="{{\'kffAdvanceSearchTable\'+$uniqueId}}"class="oj-sp-input-key-flex-field-advanced-search-popup-table":aria-label="[[res.segment_lov_table]]"data="[[lovDataprovider]]"scroll-policy="loadMoreOnScroll"columns-default.sortable="disabled"horizontal-grid-visible="disabled"vertical-grid-visible="disabled"columns="{{columnArraypopup}}"on-oj-row-action="[[handleRowActionAdvance]]"><template slot="noData"><div class="oj-flex oj-sm-align-items-center"><div class="oj-flex oj-sm-align-items-center oj-sm-flex-direction-column"><oj-bind-if test="{{showLoading()}}"><oj-progress-circle size="sm"value="-1"></oj-progress-circle></oj-bind-if><oj-bind-if test="{{!showLoading()}}"><span class="oj-sm-padding-2x"><oj-bind-text value="[[res.no_item_to_display]]"></oj-bind-text></span></oj-bind-if></div></div></template></oj-table></div></oj-popup><oj-dialog class="oj-sp-input-key-flex-field-dialog":id="[[\'modalDialog\'+$uniqueId]]"dialog-title="[[res.kff_combinations]]"><div class="oj-sm-margin-4x-top"><oj-bind-for-each data="[[appliedFiltersObservableArray]]"><template><oj-sp-flex-filter-chip :id="[[\'kff_filterchips\'+ $current.data.label + $uniqueId]]":aria-label="[[$current.data.label]]"class="oj-sp-input-key-flex-field-filter-chips"close-icon="{{($current.data.value() !==\'\'&amp;&amp; $current.data.value()!==undefined)? \'always\':\'never\'}}"disabled="false"role="button"chroming="[[($current.data.value() !== \'\' &amp;&amp; $current.data.value()!==undefined) ? \'solid\':\'outlined\']]"label="[[$current.data.label]]"value="[[$current.data.value]]"on-sp-action="[[openPopup]]"on-sp-close="[[removeValue]]"on-value-changed="[[valueChanged]]"></oj-sp-flex-filter-chip></template></oj-bind-for-each></div><br><div slot="body"><div class="oj-sm-margin-8x-top oj-sp-input-key-flex-field-advanced-search-list-view-border"><oj-list-view :id="[[\'listview\'+$uniqueId]]"class="oj-sp-input-key-flex-field-advanced-search-list-view":aria-label="[[\'Combination Table\']]"gridlines.item="visibleExceptLast"data="[[listDataProvider]]"selection-mode="single"on-selected-changed="[[handleSelectedChanged]]"first-selected-item="{{firstSelectedItem}}"translations.msg-no-data="[[res.no_item_to_display]]"><template slot="itemTemplate"data-oj-as="item"><li class="oj-flex-item oj-sm-12"on-mouseenter="[[openTooltipOnListItemHover]]"on-mouseleave="[[closeTooltip]]"><oj-list-item-layout><div><oj-bind-for-each data="{{item.data.filterHighligherArray}}"><template><oj-highlight-text text="[[$current.data.SegmentValue]]"match-text="[[$current.data.SegmentFilter]]"></oj-highlight-text></template></oj-bind-for-each></div></oj-list-item-layout></li></template></oj-list-view></div></div><div slot="footer"><oj-button :id="[[\'closeButton\'+ $uniqueId]]"on-oj-action="[[closeDialog]]"><oj-bind-text value="[[res.cancel]]"></oj-bind-text></oj-button><oj-button :id="[[\'selectButton\'+ $uniqueId]]"disabled="{{selectDisabled}}"on-oj-action="[[selectCombination]]"><oj-bind-text value="[[res.selectCombination]]"></oj-bind-text></oj-button></div></oj-dialog><oj-input-text :id="[[\'kffInput\'+$uniqueId]]"class="oj-sp-input-key-flex-field-truncation"autocomplete="off":aria-label="[[$properties.labelHint]]"placeholder="[[kffPlaceholder]]"label-edge="[[$properties.labelEdge]]"messages-custom="{{errorMessages}}"disabled=""raw-value="{{$properties.rawValue}}"autofocus="[[$properties.autofocus]]"described-by="[[$properties.describedBy]]"labelled-by="[[$properties.labelledBy]]"user-assistance-density="[[$properties.userAssistanceDensity]]"display-options.messages="[[$properties.displayOptions.messages]]"display-options.validator-hint="[[$properties.displayOptions.validatorHint]]"help-hints.definition="[[$properties.helpHints?.definition ? $properties.helpHints.definition : \'\']]"help-hints.source="[[$properties.helpHints?.source ? $properties.helpHints.source : \'\']]"required="[[$properties.required]]"label-hint="[[$properties.labelHint]]"><oj-bind-if test="[[isMobile]]"><div slot="start"class="oj-text-field-start-end-icon oj-ux-ico-information"on-click="[[openTooltip]]"role="img":aria-label="[[\'info\']]"></div></oj-bind-if><oj-bind-if test="[[!isMobile()]]"><oj-button slot="end":id="[[\'kff_advanced_search\'+$uniqueId]]"display="icons"on-oj-action="[[openDialog]]"chroming="borderless"disabled="[[$properties.disabled || $properties.readonly || advancedSearchIconDisabled ]]"><oj-bind-text value="[[res.advanced_search]]"></oj-bind-text><span slot="startIcon"class="oj-ux-ico-external-link"></span></oj-button></oj-bind-if></oj-input-text><oj-popup :id="[[\'oj-sp-kff-popup\'+$uniqueId]]"class="oj-sp-input-key-flex-field-popup-mobile"position.my.horizontal="center"position.my.vertical="center"position.at.horizontal="center"position.at.vertical="center"position.of="window"position.collision="fit"initial-focus="firstFocusable"modality="modal"><oj-input-text :id="[[\'kffMobileInput\'+$uniqueId]]"class="oj-sp-input-key-flex-field-text-input"autocomplete="off":aria-label="[[$properties.labelHint]]"placeholder="[[kffPlaceholder]]"label-edge="[[$properties.labelEdge]]"raw-value="{{$properties.rawValue}}"required="[[$properties.required]]"label-hint="[[$properties.labelHint]]"value="{{kffMobileValue}}"><div slot="start":id="[[\'kffMobileInputBackIcon\'+$uniqueId]]"class="oj-text-field-start-end-icon oj-ux-ico-chevron-left"on-click="[[closePopupMobile]]"role="img":aria-label="[[\'back\']]"></div><oj-bind-if test="[[!isMobile()]]"><oj-button :id="[[\'kff_advanced_search_in_popup\'+$uniqueId]]"slot="end"display="icons"on-oj-action="[[openDialog]]"chroming="borderless"disabled="[[$properties.disabled || $properties.readonly || advancedSearchIconDisabled ]]"><oj-bind-text value="[[res.advanced_search]]"></oj-bind-text><span slot="startIcon"class="oj-ux-ico-external-link"></span></oj-button></oj-bind-if></oj-input-text><oj-bind-if test="[[isMobile()]]"><oj-conveyor-belt :id="[[\'kff_segments\'+$uniqueId]]"class="oj-sp-input-key-flex-field-segments-chips oj-md-9 oj-sm-12 oj-flex-item"data-oj-binding-provider="none"><oj-bind-for-each data="{{appliedFiltersObservableArray}}"><template><oj-button :id="[[\'kff_segment\'+ $current.data.label]]"class="oj-sm-margin-1x"on-oj-action="[[(event) => {\n                  event.data = $current.data;\n                  event.index =$current.index;\n                  clickSegmentMobile(event);\n                }]]"chroming="[[$current.data.state &amp;&amp; $current.data.state() ? \'solid\':\'outlined\']]"><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-button></template></oj-bind-for-each></oj-conveyor-belt><hr><div><oj-table :id="[[\'kffSegListUl\'+$uniqueId]]":aria-label="[[res.segment_lov_table]]"data="[[lovDataprovider]]"class="oj-sp-input-key-flex-field-segment-table oj-select-results"scroll-policy="loadMoreOnScroll"horizontal-grid-visible="disabled"vertical-grid-visible="disabled"columns="{{segmentLovColumnArray}}"selection-mode=\'{"row": "single"}\'columns-default=\'{"resizable": "disabled","sortable": "disabled"}\'on-oj-row-action="[[handleRowActionMobile]]"><template slot="noData"><div class="oj-flex oj-sm-align-items-center"><div class="oj-flex oj-sm-align-items-center oj-sm-flex-direction-column"><oj-bind-if test="{{showLoading()}}"><oj-progress-circle size="sm"value="-1"></oj-progress-circle></oj-bind-if><oj-bind-if test="{{!showLoading()}}"><span class="oj-sm-padding-2x"><oj-bind-text value="[[res.no_item_to_display]]"></oj-bind-text></span></oj-bind-if></div></div></template></oj-table></div></oj-bind-if></oj-popup></div></body></html>'})),define("oj-sp/input-key-flex-field/input-key-flex-field-viewModel",["require","exports","knockout","oj-dynamic/providers/DynamicLayoutMetadataProvider","oj-dynamic/providers/ServiceMetadataProvider","oj-dynamic/providers/ServiceMetadataProviderFactory","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojanimation","ojs/ojarraydataprovider","ojs/ojrestdataprovider","ojs/ojcontext","ojs/ojtracer","ojs/ojlistdataproviderview","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojtranslation","vb/helpers/rest","oj-sp/flex-filter-chip/loader","ojs/ojbinddom","ojs/ojbutton","ojs/ojlistitemlayout","ojs/ojconveyorbelt","ojs/ojhighlighttext","ojs/ojinputtext","ojs/ojknockout","ojs/ojlabel","ojs/ojlistview","ojs/ojprogress-circle","ojs/ojtable"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f){"use strict";var b;Object.defineProperty(t,"__esModule",{value:!0}),t.InputKffViewModel=void 0,function(e){e.MEDIUM="md",e.SMALL="sm"}(b||(b={}));const v=Symbol.for("trigger"),j={};class A{constructor(e){this.isClicked=i.observable(!1),this.firstSelectedItem=i.observable(),this.selectDisabled=i.observable(!0),this.firstSelected=i.observable(),this.kffMobileValue=i.observable(),this.segmentValues={},this.appliedFiltersObservableArray=i.observableArray(),this.filterHighligherArray=i.observableArray(),this.filter=i.observable(""),this.showAliases=i.observable(!1),this.showLoading=i.observable(!1),this.lovData=i.observableArray([]),this.discriminatorName=i.observable(),this.attributeName=i.observable(),this.advancedSearchIconDisabled=i.observable(!0),this.data=[],this.aliasMap=new Map,this.dataAlias=i.observable(),this.comboData=i.observableArray(),this.currentIndex=i.observable(),this.filterComboboxLabel=i.observable(),this.columnArray=i.observableArray(),this.columnArraypopup=i.observableArray(),this.segmentLovColumnArray=i.observableArray(),this.dataprovider=i.observable(new d(this.data,{keyAttributes:"Segment"})),this.listDataProvider=i.observable(),this.options={description:"Extra CCA Startup processing"},this.kffPlaceholder=i.observable(),this.tooltip=i.observable(),this.errorMessage=i.observable(),this.valueErrorMessage=i.observable(),this.requiredSegmentErrorMessage=i.observable(),this.complete=i.observable(!1),this.errorMessages=i.observableArray([]),this.valid=i.observable("invalidHidden"),this.lastValidatedValue=i.observable(),this.lastRequiredValue=i.observable(),this.setSegmentDirty=e=>{this.arrDirtySegmentsByIndex||(this.arrDirtySegmentsByIndex=[]),this.arrDirtySegmentsByIndex[e]=!0},this.isSegmentDirty=e=>this.arrDirtySegmentsByIndex&&this.arrDirtySegmentsByIndex[e],this.startAnimationListener=e=>{const t=e.detail;if(e.target.id!=="kffTooltipPopup"+this.uniqueId)return;const i={duration:"500ms"},o={duration:"75ms"};"open"===t.action?(e.preventDefault(),l.fadeIn(t.element,i).then(t.endCallback).catch(e=>{m.error(e)})):"close"===t.action&&(e.preventDefault(),l.fadeOut(t.element,o).then(t.endCallback).catch(e=>{m.error(e)}))},this.handleSelectedChanged=e=>{this.firstSelectedItem().key?this.selectDisabled(!1):this.selectDisabled(!0)},this.selectCombination=e=>{if(0!==this.firstSelectedItem().key.length){const e=[];for(let t=0;t<this.firstSelectedItem().key.length;t++)e.push(this.firstSelectedItem().key[t].SegmentValue.split(" ")[0]);const t=e.join(this.kffStructDef.Delimiter);this.getOjInputText().value=t,this.properties.value=t,this.setTooltip(this.getOjInputText());document.getElementById("modalDialog"+this.uniqueId).close(),this.properties.value&&this.validate()}},this.valueChanged=(e,t)=>{this.segmentValues[t.data.name](e.detail.value);const i=document.querySelector("#kffAdvanceSearch"+this.uniqueId);i&&i.close(),this.fetchFilteredCombinationList()},this.bindingsApplied=e=>{m.log("bindings applied"),this.loadKffMetadata();const t=document.getElementById("kffInput"+this.uniqueId);t&&!this.isMobile()&&(t.addEventListener("mouseover",this.openTooltip),t.addEventListener("mouseleave",this.closeTooltip)),this.composite.addEventListener("structureInstanceNumberChanged",e=>{"external"===e.detail.updatedFrom&&(this.prevSin=e.detail.previousValue,this.processStructureInstanceChanged(e.detail.value))}),this.composite.addEventListener("readonlyChanged",e=>{if("external"===e.detail.updatedFrom){this.getOjInputText().readonly=e.detail.value,this.readonly=e.detail.value}}),this.composite.addEventListener("disabledChanged",e=>{if("external"===e.detail.updatedFrom){this.getOjInputText().disabled=e.detail.value,this.disabled=e.detail.value}}),this.composite.addEventListener("valueChanged",e=>{if("external"===e.detail.updatedFrom){const t=this.getOjInputText();if(e.detail.value&&this.kffStructDef&&!e.detail.value.includes(this.kffStructDef.Delimiter)){const i=e.detail.value.split(/[-,|,.,:,/]/);t.value=i.join(this.kffStructDef.Delimiter),this.properties.value=t.value}else t.value=e.detail.value,this.properties.value=e.detail.value;this.properties.value&&this.kffStructDef&&this.fetchDepSegmentLovOnValueChange()}else this.componentEvent("valueChanged",t=>{t.setAttribute(A.COMPONENT_NAME+".value_selected",e.detail.value),t.end()})}),this.composite.addEventListener("suggestedValueChanged",e=>{if("external"===e.detail.updatedFrom){const t=this.getOjInputText();if(!this.properties.rawValue&&e.detail.value){if(this.kffStructDef&&!e.detail.value.includes(this.kffStructDef.Delimiter)){const i=e.detail.value.split(/[-,|,.,:,/]/);this.properties.value=i.join(this.kffStructDef.Delimiter),t.value=this.properties.value}else this.properties.value=e.detail.value,t.value=this.properties.value;this.properties.value&&this.kffStructDef&&this.fetchDepSegmentLovOnValueChange()}}}),this.composite.addEventListener("messagesCustomChanged",e=>{if("external"===e.detail.updatedFrom){const t=this.getOjInputText();t.messagesCustom=e.detail.value,0!==t.messagesCustom.length&&"error"===t.messagesCustom[0].severity&&(this.properties.valid="invalidShown")}}),this.composite.addEventListener("requiredChanged",e=>{"external"===e.detail.updatedFrom&&(this.required=e.detail.value,this.validate())}),this.screenRange.subscribe(async e=>{const t=e===b.SMALL;this.isMobile(t)})},this.reset=()=>{this.getOjInputText().reset(),this.errorMessages.removeAll(),this.errorMessage(""),this.valueErrorMessage(""),this.requiredSegmentErrorMessage("")},this.focus=()=>{const e=this.getOjInputText();if(e){p.getContext(e).getBusyContext().whenReady().then(()=>{e.focus()})}},this.validate=()=>new Promise((e,t)=>{const o=this.getOjInputText();if(o.readonly||o.disabled)return;const s=this.getOjInputTextInput();if(s.value===this.lastValidatedValue()&&this.required===this.lastRequiredValue())return e(this.valid());const a=p.getContext(this.composite).getBusyContext();if(this.busyValidationStateResolve=a.addBusyState({description:"Validating combination"}),this.lastValidatedValue(s.value),this.lastRequiredValue(this.required),this.errorMessages.removeAll(),this.errorMessage(""),this.valueErrorMessage(""),this.requiredSegmentErrorMessage(""),this.properties.setProperty("context.codeCombinationId",null),this.determineCompleteness(s),this.kffStructDef&&!this.complete()){if(s.value)return this.errorMessage()||this.errorMessage(this.res.incompleteCombinationError),this.errorMessages.push({detail:this.errorMessage(),severity:"error"}),this.valid("invalidShown"),this.properties.valid="invalidShown",this.properties.value="",this.busyValidationStateResolve&&(this.busyValidationStateResolve(),this.busyValidationStateResolve=null),e(this.valid());this.valid("invalidShown"),this.properties.valid="invalidShown",o.validators=[],this.properties.value=""}if(this.complete()&&this.combinationValidationEndPoint){const t={consumerId:this.resourceFinderContext,structureInstanceNumber:this.sic,combination:s.value};if(this.properties.context&&this.properties.context.bindValues){t.bindValues={};const e=this.processBindValues(this.properties.context);for(const i of Object.keys(e)){const o=e[i];t.bindValues[i]=o}}const a={body:i.toJSON(t),headers:{Accept:"application/vnd.oracle.adf.actionresult+json","Content-Type":"application/vnd.oracle.adf.action+json"}};a[["m","e","t","h","o","d"].join("")]=["P","O","S","T"].join(""),fetch(this.combinationValidationEndPoint,a).then(e=>e.json()).then(t=>{if(t&&t.result&&void 0!==t.result.explanationSummary){if(t.result.exceptionType&&t.result.exceptionType.includes("oracle.jbo.AttrValException")&&t.result.explanationSummary.includes("<TEXT>")){const e=t.result.explanationSummary;this.errorMessages.push({detail:e.substring(e.indexOf("<TEXT>")+6,e.indexOf("</TEXT>")),severity:"error"})}else this.errorMessages.push({detail:this.res.validationErrorMessage,severity:"error"});return o.validators=[],this.valid("invalidShown"),this.properties.valid="invalidShown",this.properties.value="",this.busyValidationStateResolve&&(this.busyValidationStateResolve(),this.busyValidationStateResolve=null),e(this.valid())}t.result.combinationId&&this.properties.setProperty("context.codeCombinationId",t.result.combinationId)}).catch(e=>{m.error("Error validating combination on server side: "+e),this.busyValidationStateResolve&&(this.busyValidationStateResolve(),this.busyValidationStateResolve=null)})}return this.validators&&(o.validators=this.validators),o.validate().then(e=>{"valid"!==e?(this.required?(this.valid("invalidShown"),this.properties.valid="invalidShown"):(this.valid("valid"),this.properties.valid="valid"),this.properties.value=""):(this.valid("valid"),this.properties.valid="valid",this.properties.value=o.value)}),this.busyValidationStateResolve&&(this.busyValidationStateResolve(),this.busyValidationStateResolve=null),e(this.valid())}),this.refresh=()=>{this.getOjInputText().refresh()},this.showMessages=()=>{this.getOjInputText().showMessages()},this.closeAdvancedSearchPopup=e=>{const t=document.getElementById("kff_filterchips"+this.filterComboboxLabel()+this.uniqueId);if(t){const e=t.getElementsByTagName("div");e&&e.length>0&&e[0].focus()}},this.handleRowActionAdvance=e=>{this.seletedValue=e.detail.context.data.Value;const t=this.getSegDefs()[this.currentIndex()];"No Value"===this.seletedValue?this.segmentValues[t.PropertyName](""):this.segmentValues[t.PropertyName](this.seletedValue);const i=document.querySelector("#kffAdvanceSearch"+this.uniqueId);i&&i.close()},this.handleValueChanged=e=>{if(void 0===this.getSegDefs())return;this.filter(e.detail.value);const t=this.getSegDefs()[this.currentIndex()];t&&t.hasMore&&e.detail.previousValue&&this.serverSideSearch(t,e.detail.value)},this.processStructureInstanceChanged=e=>{const t=p.getContext(this.composite).getBusyContext();this.busyResolve=t.addBusyState({description:"Extra CCA Startup processing"}),this.disableComponent(),this.sic=e,this.loadKffMetadata()},this.disableComponent=()=>{this.kffStructDef=void 0,this.sic=void 0,this.kffPlaceholder(""),this.advancedSearchIconDisabled(!0);const e=this.getOjInputText();e.value="",this.properties.value="",e.disabled=!0,this.setEmptyData()},this.getOjInputText=()=>this.composite.querySelector("#kffInput"+this.uniqueId),this.getOjMobileInputText=()=>document.querySelector("#kffMobileInput"+this.uniqueId),this.getOjPopupTable=()=>document.querySelector("#kffSegListUl"+this.uniqueId),this.getOjMobileInputTextInput=()=>this.getOjMobileInputText().getElementsByTagName("input")[0],this.getOjInputTextInput=()=>this.getOjInputText().getElementsByTagName("input")[0],this.onCcaFocusOut=()=>{document.activeElement&&"INPUT"===document.activeElement.tagName&&document.activeElement.id.includes("kffInput"+this.uniqueId)||(this.validate(),this.getOjInputText().focus())},this.addEventListeners=()=>{const e=this.getOjInputTextInput(),t=this.composite.querySelector(".oj-sp-input-key-flex-field-advanced-search-popup-text").getElementsByTagName("input")[0];e.setAttribute("role","combobox"),t.setAttribute("role","combobox");const i=document.querySelector("#kffPopup"+this.uniqueId);e.addEventListener("click",this.handleInputClick,!1),i&&(i.addEventListener("ojClose",e=>{this.onCcaFocusOut()}),i.addEventListener("ojOpen",e=>{this.selectedValue=""}));let o=0;e.addEventListener("keyup",e=>{const t=13===e.keyCode;if(t)return;if(9===e.keyCode&&e.shiftKey)return;if(38===e.keyCode||40===e.keyCode||33===e.keyCode||34===e.keyCode)return;if(27===e.keyCode&&this.getOjPopupTable())return this.getOjPopupTable().currentRow=null,void(this.getOjPopupTable().scrollPosition={x:0,y:0});if(!o){const e=p.getContext(this.composite).getBusyContext(),t={description:"Processing User Input"};this.busyEstablishTypingStateResolve||(this.busyEstablishTypingStateResolve=e.addBusyState(t))}clearTimeout(o),setTimeout(()=>{o=0,this.establishTypingState(e.target,t,e)},200)}),e.addEventListener("keydown",t=>{if(9!==t.keyCode||t.shiftKey){if(9!==t.keyCode||!t.shiftKey)return 13===t.keyCode?(this.establishTypingState(t.target,!0,t),void t.stopPropagation()):void(120!==t.keyCode?(121===t.keyCode&&this.closeTooltip(t),40!==t.keyCode&&38!==t.keyCode||(i&&!i.isOpen()&&i.open(this.getOjInputTextInput()),this.focusOnTable(this.getOjPopupTable()),t.preventDefault())):this.openTooltip(t));e.value.slice(0,e.value.indexOf("-")).length<e.value.slice(0,e.selectionStart).length&&(t.preventDefault(),this.switchInSegmentBackward(e))}else e.value.slice(0,e.selectionStart).length!==e.value.length&&(t.preventDefault(),this.switchInSegmentForward(e))}),t.addEventListener("keydown",e=>{const t=document.getElementById("kffAdvanceSearchTable"+this.uniqueId);e.shiftKey||40!==e.keyCode&&38!==e.keyCode&&9!==e.keyCode||(this.focusOnTable(t),e.preventDefault())})},this.addMobileEventListeners=()=>{const e=this.getOjInputTextInput(),t=this.getOjMobileInputTextInput(),i=document.querySelector("#oj-sp-kff-popup"+this.uniqueId);if(t.addEventListener("click",this.handleMobileInputClick,!1),e.addEventListener("focusout",this.validate),i){const t=document.querySelector("#kffMobileInput"+this.uniqueId);i.addEventListener("ojBeforeClose",i=>{t&&(e.value=t.getElementsByTagName("input")[0].value)}),i.addEventListener("ojBeforeOpen",i=>{t&&(t.getElementsByTagName("input")[0].value=e.value)})}let o=0;t&&(t.addEventListener("keyup",e=>{const t=13===e.keyCode;if(t)return;if(38===e.keyCode||40===e.keyCode||33===e.keyCode||34===e.keyCode)return;if(9===e.keyCode&&e.shiftKey)return;if(!o){const e=p.getContext(this.composite).getBusyContext(),t={description:"Processing User Input"};this.busyEstablishTypingStateResolve||(this.busyEstablishTypingStateResolve=e.addBusyState(t))}clearTimeout(o),setTimeout(()=>{o=0,this.establishTypingState(e.target,t,e)},200)}),t.addEventListener("keydown",e=>{13!==e.keyCode&&(9!==e.keyCode||e.shiftKey?9===e.keyCode&&e.shiftKey?t.value.slice(0,t.value.indexOf("-")).length<t.value.slice(0,t.selectionStart).length&&(e.preventDefault(),this.switchInSegmentBackward(t)):(40===e.keyCode&&e.preventDefault(),38===e.keyCode&&e.preventDefault()):t.value.slice(0,t.selectionStart).length!==t.value.length&&(e.preventDefault(),this.switchInSegmentForward(t)))}))},this.closeDialog=e=>{document.getElementById("modalDialog"+this.uniqueId).close()},this.getSeparatorIndices=e=>{let t;const i=new RegExp(""+this.kffStructDef.Delimiter,"g"),o=[];for(;t=i.exec(e);)o.push(t.index);return o},this.switchInSegmentForward=e=>{const t=this.getSeparatorIndices(e.value);t.push(e.value.length);const i=e.value.slice(0,e.selectionStart).length;for(let o=0;o<t.length;o++)if(t[o]>i){e.setSelectionRange(t[o],t[o]);break}},this.switchInSegmentBackward=e=>{const t=this.getSeparatorIndices(e.value);t.push(e.value.length);const i=e.value.slice(0,e.selectionStart).length;for(let o=t.length-1;o>=0;o--)if(t[o]<i){e.setSelectionRange(t[o],t[o]);break}},this.clickSegmentMobile=e=>{const t=this.getOjMobileInputTextInput();t.focus();let i=this.getSeparatorIndices(t.value);if(i.length<e.index){for(let o=0;o<e.index-i.length;o++)t.value+=this.kffStructDef.Delimiter;i=this.getSeparatorIndices(t.value)}i.push(t.value.length),this.switchSegmentsInMobile(e.index),t.setSelectionRange(i[e.index],i[e.index]),this.establishTypingState(t,!1,e)},this.openPopup=async(e,t)=>{t.data.value()?this.filter(t.data.value()):this.filter(""),this.columnArraypopup([{headerText:t.data.label,renderer:this.highlightingCellRenderer},{headerText:this.res.kffSegmentDescription,renderer:this.highlightingCellRenderer}]);const i=this.getSegDefs()[t.index];this.currentIndex(t.index),this.filterComboboxLabel(t.data.label),i.segmentValues&&!i.FlexClientVsBindVars?this.lovData(i.segmentValues):this.lovData([]);const o=document.querySelector("#kffAdvanceSearch"+this.uniqueId),s=document.querySelector("#kffTooltipPopup"+this.uniqueId);if(o){const a=document.getElementById("kffAdvanceSearchTable"+this.uniqueId);a&&!t.data.value()&&(a.currentRow=null,a.scrollPosition={x:0,y:0}),s&&s.isOpen()&&this.closeTooltip(e);const n=p.getContext(o).getBusyContext();o.open("#kff_filterchips"+t.data.label+this.uniqueId),i.FlexClientVsBindVars&&this.fetchLOVDataForDependentSegment(i,this.segmentValues),await n.whenReady()}},this.removeValue=(e,t)=>{this.segmentValues[t.data.name]("")},this.openDialog=async e=>{const t=this.getOjInputTextInput().value.split(this.kffStructDef.Delimiter);this.appliedFiltersObservableArray.removeAll();for(let e=0;e<this.getNumberOfSegments();e++){const o=this.getSegDefs()[e],s=o.Name;0==e&&t[e].startsWith("#")?this.segmentValues[o.PropertyName]=i.observable():this.segmentValues[o.PropertyName]=i.observable(t[e]),this.appliedFiltersObservableArray.push({label:s,name:o.PropertyName,value:this.segmentValues[o.PropertyName]})}this.fetchFilteredCombinationList();const o=document.getElementById("modalDialog"+this.uniqueId),s=p.getContext(o).getBusyContext();o.open(),await s.whenReady()},this.openTooltip=e=>{if(!this.properties.metadata)return;const t=this.getOjInputText(),i=document.querySelector("#kffPopup"+this.uniqueId);if((this.isMobile()||!i||!i.isOpen())&&(this.setTooltip(t),0!==this.data.length&&(this.errorMessages().length<=0||"notewindow"!==t.displayOptions.messages[0]))){const t=document.querySelector("#kffTooltipPopup"+this.uniqueId);if(e.preventDefault(),t){const o={offset:{x:e.offsetX,y:8}};this.isMobile()?t.open("#kffInput"+this.uniqueId):i&&i.isOpen()?t.close():t.open("#kffInput"+this.uniqueId,o)}}},this.openTooltipOnListItemHover=(e,t)=>{this.tooltipTimer&&clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(()=>{this.tooltipTimer=void 0;const i=e.target,o={value:""},s=[];for(let e=0;e<t.data.filterHighligherArray.length;e++)s.push(t.data.filterHighligherArray[e].SegmentValue.split(" ")[0]);o.value=s.join(this.kffStructDef.Delimiter);const a=document.querySelector("#kffAdvanceSearch"+this.uniqueId);if(a&&a.isOpen())return;this.setTooltip(o);const n=document.querySelector("#kffTooltipPopup"+this.uniqueId),r=document.getElementById("modalDialog"+this.uniqueId);if(n){const t={offset:{x:e.offsetX,y:8}};a&&a.isOpen()||r&&!r.isOpen()?n.close():i.classList.contains("oj-hover")&&n.open(i,t)}},2500)},this.closeTooltip=e=>{const t=document.querySelector("#kffTooltipPopup"+this.uniqueId);t&&t.close()},this.closePopup=()=>{const e=document.querySelector("#kffPopup"+this.uniqueId);e&&e.close()},this.highlightingCellRenderer=e=>{let t=null;if(0===e.columnIndex?t="Value":1===e.columnIndex&&(t="Description"),e.row[t]){let i=e.row[t].toString();const o=this.filter();if(o&&o.length>0){const e=i.toLowerCase().indexOf(o.toLowerCase());if(e>-1){const t=i.substr(e,o.length);i=i.substr(0,e)+"<b>"+t+"</b>"+i.substr(e+o.length,i.length-1)}}e.cellContext.parentElement.innerHTML=i}},this.focusOnTable=e=>{const t=e.getElementsByTagName("tbody")?e.getElementsByTagName("tbody")[0]:null;t&&t.firstElementChild&&(t.firstElementChild.setAttribute("tabindex",1),t.firstElementChild.focus())},this.addSelectionListDivToDom=(e,t,i,o,s)=>{if(this.filter(i),e&&e.value&&this.mapSegmentNameValues(this.kffStructDef,e.value),t.segmentValues&&!t.FlexClientVsBindVars?this.lovData(t.segmentValues):this.lovData([]),this.segmentLovColumnArray([{headerText:t.Name,renderer:this.highlightingCellRenderer},{headerText:"Description",renderer:this.highlightingCellRenderer}]),this.readonly||this.disabled)return;if(!t||"FORMAT"===t.ValidationType)return;const a=document.querySelector("#kffPopup"+this.uniqueId);if(o&&i&&i.startsWith("#")&&(this.segmentLovColumnArray([{headerText:this.res.alias,renderer:this.highlightingCellRenderer},{headerText:this.res.combination,renderer:this.highlightingCellRenderer}]),this.lovData(this.kffStructDef.aliases)),i&&""!==i&&!0===t.hasMore&&"click"!==s.type&&39!==s.keyCode&&37!==s.keyCode&&this.serverSideSearch(t,i),t.FlexClientVsBindVars&&this.fetchLOVDataForDependentSegment(t,this.kffStructDef.segmentNameValueList),a&&!this.isMobile()){const e=document.querySelector("#kffTooltipPopup"+this.uniqueId);e&&e.isOpen()&&e.close(),a.open(this.getOjInputTextInput())}},this.getSelectedItem=()=>this.selectedValue,this.getSelectedValue=()=>this.selectedValue,this.popupAnimateListener=e=>{const t=e.detail;"open"===t.action&&(e.preventDefault(),t.endCallback())},this.handleRowAction=e=>{this.selectedValue=e.detail.context.data.Value,this.establishTypingState(this.getOjInputTextInput(),!0,e)},this.handleRowActionMobile=e=>{this.selectedValue=e.detail.context.data.Value;const t=document.querySelector("#kffMobileInput"+this.uniqueId).getElementsByTagName("input")[0];this.establishTypingState(t,!0,e),t.focus(),t.setSelectionRange(t.value.length,t.value.length)},this.getNumberOfSegments=()=>this.kffStructDef?this.kffStructDef.numberOfSegments:1,this.getSegDefs=()=>this.kffStructDef?this.kffStructDef.segments:this.segmentDefs,this.determineCompleteness=e=>{const t=e.value;if(!t||this.complete())return;if(!this.kffStructDef)return void(t&&this.complete(!0));const i=t.split(this.kffStructDef.Delimiter),o=[];for(;i.length>this.getNumberOfSegments();)i.pop();for(let e=0;e<this.getNumberOfSegments();e++)o[e]=!1;for(let e=0;e<i.length;e++){const t=this.getSegDefs()[e],s=this.checkSegmentValueValidity(t,i[e],e+1,i.length+1);"partial"===s||"optional"===s?o[e]=s:"valid"===s?o[e]=!0:"empty"===s?(this.requiredSegmentErrorMessage()?this.requiredSegmentErrorMessage(this.requiredSegmentErrorMessage()+", "+t.Name):this.requiredSegmentErrorMessage(t.Name),o[e]=!1):(this.valueErrorMessage()?this.valueErrorMessage(this.valueErrorMessage()+", "+t.Name):this.valueErrorMessage(t.Name),o[e]=!1)}this.requiredSegmentErrorMessage()?this.valueErrorMessage()?this.errorMessage(this.requiredSegmentErrorString()+". "+this.valueErrorString()):this.errorMessage(this.requiredSegmentErrorString()):this.errorMessage(this.valueErrorString());let s=0;for(let e=0;e<this.getNumberOfSegments();e++)if(!0===o[e]||"optional"===o[e])s++;else{"FORMAT"===this.getSegDefs()[e].ValidationType&&"partial"===o[e]&&s++}s===this.getNumberOfSegments()&&this.complete(!0)},this.establishTypingState=(e,t,i)=>{let o;o=e.ariaReadOnly?e.innerText:e.value,i&&i.key&&this.kffStructDef.Delimiter===i.key&&this.delimiterAdded&&(o=o.substring(0,o.length-1),this.setInputValue(e,o)),this.complete(!1),!this.kffStructDef&&o&&this.complete(!0);let s=[];for(o&&this.kffStructDef?s=o.split(this.kffStructDef.Delimiter):s.push(o);s.length>this.getNumberOfSegments();)s.pop();const a=[],n=[];let r=!1,l=!1,d=!1,c=0,p=this.determineSegmentBeingEdited(e),u=this.getFilterByCaretLocation(e),h=-1;for(let e=0;e<this.getNumberOfSegments();e++)n[e]=!1;const m="No Value"===this.getSelectedValue();if(t){const e=this.getSelectedValue();e&&(m?(s[p]="",n[p]="optional"):(s[p]=e,n[p]=!0),a[p]=s[p],h=p,h+1===this.getNumberOfSegments()&&(l=!0),this.setSegmentDirty(p))}if(0===p&&1===s.length&&(this.tooltip(""),this.setEmptyData(),c=this.aliasMatchCount(s[0],t),c>0)){if(d=!0,a[0]=s[0],1===c){const e=this.checkSegmentValueValidity(this.getSegDefs()[0],s[0],1,s.length);"partial"===e||"valid"===e?c=2:n[0]=!1}if(1===c||c>1&&t){const t=this.getSelectedItem();(1===c||t&&"Alias"===t.getAttribute("aria-label"))&&(o=this.getAliasMappedValue(s[0]),s=o.split(this.kffStructDef.Delimiter),this.setInputValue(e,o),d=!1,l=!0,a[0]=s[0])}}for(;s.length>this.getNumberOfSegments();)s.pop();for(let e=0;e<s.length;e++){if(t&&h===e&&n[e])continue;const i=this.getSegDefs()[e];if("FORMAT"===i.ValidationType){if("true"===i.UppercaseOnlyFlag&&(s[e]=s[e].toUpperCase()),"true"===i.NumericOnlyFlag)for(;isNaN(s[e])&&s[e].length>0;)s[e]=s[e].substring(0,s[e].length-1);i.MaximumLength&&s[e].length>i.MaximumLength&&(s[e]=s[e].substring(0,i.MaximumLength))}let o=this.checkSegmentValueValidity(i,s[e],e+1,s.length);if(0===e&&d&&(o="partial"),"partial"===o||"optional"===o?(a[e]=s[e],n[e]=o):"valid"===o?(a[e]=s[e],n[e]=!0,this.setSegmentDirty(e)):(n[e]=!1,a[e]=s[e],null===a[e]||t||this.setSegmentDirty(p)),t&&"partial"==n[e]&&(0!=e||!d)){const t=this.checkSegmentValueUniqueStartsWith(this.getSegDefs()[e],a[e]);t&&(n[e]=!0,a[e]=t,l=!0)}}t&&(!0===n[p]||"optional"===n[p])&&p+1<this.getNumberOfSegments()&&void 0===a[p+1]?(a[p+1]="",this.delimiterAdded=!0):this.delimiterAdded=!1;const g=a.join(this.kffStructDef.Delimiter);e.value!==g&&this.setInputValue(e,g),t&&(e.selectionStart=e.value.length,e.selectionEnd=e.value.length),(!0===n[p]||"optional"===n[p]||c>0)&&(c>0?this.setCaretToFirstInvalidAlias(e,n):this.setCaretToFirstInvalid(e,n),p=this.determineSegmentBeingEdited(e),u=this.getFilterByCaretLocation(e));let y=0;for(let e=0;e<this.getNumberOfSegments();e++)if(!0===n[e]||"optional"===n[e])y++;else{"FORMAT"===this.getSegDefs()[e].ValidationType&&"partial"===n[e]&&y++}y===this.getNumberOfSegments()&&(r=!0),this.complete(r),r&&p+1===this.getNumberOfSegments()&&e.selectionStart===e.value.length&&"FORMAT"!==this.getSegDefs()[this.getNumberOfSegments()-1].ValidationType&&this.isSegmentDirty(p)&&(t||""!==a[p])&&(l=!0),r&&l?(this.closePopup(),this.validate(),this.isMobile()&&this.addSelectionListDivToDom(e,this.getSegDefs()[p],u,d&&0===p,i)):(this.isMobile()&&this.switchSegmentsInMobile(p),this.addSelectionListDivToDom(e,this.getSegDefs()[p],u,d&&0===p,i)),this.busyEstablishTypingStateResolve&&(this.busyEstablishTypingStateResolve(),this.busyEstablishTypingStateResolve=null)},this.checkSegmentValueUniqueStartsWith=(e,t)=>{if("FORMAT"==e.ValidationType)return;const i=e.segmentValues,o=t.toLocaleLowerCase();let s;for(let e=0;e<i.length;e++){const t=i[e];if(t.Value.toLocaleLowerCase().startsWith(o)||t.Description&&-1!=t.Description.toLocaleLowerCase().indexOf(o)){if(void 0!==s)return;s=i[e].Value}}return s},this.serverSideSearch=(e,t)=>{const i=p.getContext(this.composite).getBusyContext(),o={description:"Server Side search"};this.busyServerSideSearchResolve||(this.busyServerSideSearchResolve=i.addBusyState(o)),this.showLoading(e.hasMore);const s=e.url+encodeURI("&q=(UPPER(Value) LIKE '*"+t+"*') OR (UPPER(Description) LIKE '*"+t+"*')");fetch(s,{cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","REST-Framework-Version":"2"},method:"GET",mode:"cors"}).then(e=>e.json()).then(t=>{if(this.showLoading(t.hasMore),0!==t.count){e.lastQueriedValues=[];for(let i=0;i<t.items.length;i++)t.items[i].Value&&(e.lastQueriedValues[i]=t.items[i]);this.lovData(t.items),this.busyServerSideSearchResolve&&(this.busyServerSideSearchResolve(),this.busyServerSideSearchResolve=null)}}).catch(e=>{m.error("Error fetching segment values from server: "+e),this.busyServerSideSearchResolve&&(this.busyServerSideSearchResolve(),this.busyServerSideSearchResolve=null)})},this.setCaretToFirstInvalidAlias=(e,t)=>{let i=0,o=0;if(!(e.selectionStart<e.value.length)){for(o=0;o<e.value.length&&!1!==t[i];o++)e.value.charAt(o)===this.kffStructDef.Delimiter&&i++;!1===t[i]&&(e.selectionEnd=o,e.selectionStart=o)}},this.setCaretToFirstInvalid=(e,t)=>{let i=0,o=0;if(!(e.selectionStart<e.value.length)){for(o=0;o<e.value.length&&(!0===t[i]||"optional"===t[i]&&this.isSegmentDirty(i)||!1===t[i]&&this.isSegmentDirty(i));o++)e.value.charAt(o)===this.kffStructDef.Delimiter&&i++;!0!==t[i]&&"optional"!==t[i]&&(e.selectionEnd=o,e.selectionStart=o)}},this.getFilterByCaretLocation=e=>{const t=e.selectionStart;if(t<=0)return;let i=e.value.substring(0,t);if(!this.kffStructDef)return i;const o=i.lastIndexOf(this.kffStructDef.Delimiter);return-1===o||(i=i.substring(o+1)),i},this.setInputValue=(e,t)=>{e.value=t},this.aliasMatchCount=(e,t)=>{if(!this.kffStructDef)return 0;const i=e.toLocaleLowerCase();let o=0;for(let s=0;s<this.kffStructDef.aliases.length;s++){if(t&&this.kffStructDef.aliases[s].Value===e)return 1;-1!==this.kffStructDef.aliases[s].Value.toLocaleLowerCase().indexOf(i)&&o++}return o},this.getAliasMappedValue=e=>{const t=e.toLocaleLowerCase();for(let e=0;e<this.kffStructDef.aliases.length;e++)if(-1!==this.kffStructDef.aliases[e].Value.toLocaleLowerCase().indexOf(t))return this.kffStructDef.aliases[e].Description},this.checkSegmentValueValidity=(e,t,i,o)=>{if("true"===e.RequiredFlag&&""===t)return"empty";if(("false"===e.RequiredFlag||void 0===e.RequiredFlag)&&""===t)return"optional";if("FORMAT"===e.ValidationType&&e.MaximumLength)return t.length===e.MaximumLength?"valid":t.length<=e.MaximumLength?"partial":"invalid";const s=t.toLocaleLowerCase();let a=0,n=0;const r=[],l=[];if("INDEP"===e.ValidationType){if(e.hasMore&&e.lastQueriedValues)for(let d=0;d<e.lastQueriedValues.length;d++){const c=e.lastQueriedValues[d];if("No Value"!==c.Value){if(c.Value===t){if(i<o)return"valid";a++,r.push(c.ValueId)}(c.Value.toLocaleLowerCase().startsWith(s)||null!==c.Description&&-1!==c.Description.toLocaleLowerCase().indexOf(s))&&(n++,l.push(c.ValueId))}}for(let d=0;d<e.numberOfSegmentValues;d++){const c=e.segmentValues[d];if("No Value"!==c.Value){if(c.Value===t){if(i<o)return"valid";r.includes(c.ValueId)||a++}(c.Value.toLocaleLowerCase().startsWith(s)||null!==c.Description&&-1!==c.Description.toLocaleLowerCase().indexOf(s))&&(l.includes(c.ValueId)||n++)}}if(1===a&&1===n)return"valid";if(n>=1)return"partial"}return e.hasMore&&!e.lastQueriedValues&&this.serverSideSearch(e,t),"invalid"},this.prepareFlexField=e=>{m.log("prepareFlexField"),e&&(this.restEndPoint=e.restEndPoint,this.baseUrl=e.baseUrl,this.kffResourceRoot=e.kffResourceRoot,this.resourceFinderContext=e.resourceFinderContext,this.combinationValidationEndPoint=e.combinationValidationEndPoint,this.resourceShorthandAliases=e.resourceShorthandAliases,this.discriminatorName(e.discriminatorName),this.kffStructDef=e),this.getCodeCombinationsFromRemote().then(e=>{const t=this.getOjInputText();let i="";if(this.kffStructDef&&0===this.kffStructDef.numberOfAliases){let e=!1;for(let t=0;t<this.kffStructDef.numberOfSegments;t++)this.kffStructDef.segments[t].DefaultValue?(e=!0,i+=this.kffStructDef.segments[t].DefaultValue+this.kffStructDef.Delimiter):i+=this.kffStructDef.Delimiter,this.kffPlaceholder()?this.kffPlaceholder(this.kffPlaceholder()+" "+this.kffStructDef.Delimiter):this.kffPlaceholder(this.kffStructDef.segments[t].Name);i=i.substring(0,i.length-1),e||(i="")}if(this.kffStructDef&&0!==this.kffStructDef.numberOfAliases)for(let e=0;e<this.kffStructDef.numberOfSegments;e++)this.kffPlaceholder()?this.kffPlaceholder(this.kffPlaceholder()+" "+this.kffStructDef.Delimiter):this.kffPlaceholder(this.res.kff_placeholder_text);if(this.properties.metadata&&this.sic){if(t.disabled=this.disabled,t.readonly=this.readonly,t.required=this.required,this.properties.suggestedValue&&!this.properties.rawValue)if(this.kffStructDef&&!this.properties.suggestedValue.includes(this.kffStructDef.Delimiter)){const e=this.properties.suggestedValue.split(/[-,|,.,:,/]/);this.properties.value=e.join(this.kffStructDef.Delimiter),t.value=this.properties.value}else this.properties.value=this.properties.suggestedValue,t.value=this.properties.value;if(this.properties.value){if(this.kffStructDef&&!this.properties.value.includes(this.kffStructDef.Delimiter)){const e=this.properties.value.split(/[-,|,.,:,/]/);this.properties.value=e.join(this.kffStructDef.Delimiter)}t.value=this.properties.value,this.lastValidatedValue(t.value)}else i&&this.setInputValue(t,i);this.properties.messagesCustom&&(t.messagesCustom=this.properties.messagesCustom,0!==t.messagesCustom.length&&"error"===t.messagesCustom[0].severity&&(this.properties.valid="invalidShown")),m.log("flex field should now be activated"),this.advancedSearchIconDisabled(!1),this.prevSin||(this.addEventListeners(),this.isMobile()&&this.addMobileEventListeners())}this.resolveBusyContext()}).catch(e=>{m.error(e),this.resolveBusyContext()})},this.handleInputClick=e=>{const t=e.target;this.isMobile()?this.launchPopup(e):this.establishTypingState(t,!1,e)},this.handleMobileInputClick=e=>{const t=e.target;this.establishTypingState(t,!1,e)},this.launchPopup=e=>{const t=document.querySelector("#oj-sp-kff-popup"+this.uniqueId);t&&t.open(this.getOjInputTextInput());const o=this.getOjInputTextInput().value.split(this.kffStructDef.Delimiter);this.appliedFiltersObservableArray.removeAll();for(let e=0;e<this.getNumberOfSegments();e++){const t=this.getSegDefs()[e],s=t.Name;this.segmentValues[t.PropertyName]=i.observable(o[e]),this.appliedFiltersObservableArray.push({label:s,name:t.PropertyName,value:this.segmentValues[t.PropertyName],state:i.observable(!1)})}const s=document.querySelector("#kffMobileInput"+this.uniqueId).getElementsByTagName("input")[0],a=this.determineSegmentBeingEdited(this.getOjInputTextInput());this.appliedFiltersObservableArray()[a].state(!0),0===this.segmentLovColumnArray().length&&(this.lovData(this.getSegDefs()[a].segmentValues),this.segmentLovColumnArray([{headerText:this.getSegDefs()[a].Name,renderer:this.highlightingCellRenderer},{headerText:"Description",renderer:this.highlightingCellRenderer}])),s.focus(),s.setSelectionRange(this.getOjInputTextInput().selectionStart,this.getOjInputTextInput().selectionEnd),this.establishTypingState(s,!1,e)},this.closePopupMobile=()=>{const e=document.querySelector("#oj-sp-kff-popup"+this.uniqueId);e&&(e.close(),this.getOjInputText()&&this.getOjInputTextInput()&&this.getOjInputTextInput().setSelectionRange(this.getOjMobileInputTextInput().selectionStart,this.getOjMobileInputTextInput().selectionEnd))},this.determineSegmentBeingEdited=e=>{if(!this.kffStructDef)return 0;const t=e.value,i=e.selectionStart;let o=0;for(let e=0;e<i;e++)t.charAt(e)===this.kffStructDef.Delimiter&&o++;return o>=this.getNumberOfSegments()?this.getNumberOfSegments()-1:o},this.setTooltip=e=>{if(this.data=[],this.dataAlias(""),!this.kffStructDef)return;if(null===e.value||""===e.value||void 0===e.value)return;if(this.resourceShorthandAliases){this.showAliases(!1);for(const[t,i]of this.aliasMap.entries())i===e.value&&(this.showAliases(!0),this.dataAlias(t))}const t=document.getElementById("modalDialog"+this.uniqueId);if(""===this.getOjInputTextInput().value&&!t.isOpen())return void this.setEmptyData();const i=e.value.split(this.kffStructDef.Delimiter);for(let e=0;e<this.getNumberOfSegments();e++){const t=this.getSegDefs()[e],o=t.Name;if(i[e])if("FORMAT"===t.ValidationType)i[e]&&this.data.push({Segment:o,Value:i[e],Description:"-"});else{let s=0,a=!1;if(t.hasMore&&t.lastQueriedValues){for(s=0;s<t.lastQueriedValues.length&&i[e]!==t.lastQueriedValues[s].Value;s++);s<t.lastQueriedValues.length&&(t.lastQueriedValues[s].Description=t.lastQueriedValues[s].Description||"",a=!0,this.data.push({Description:t.lastQueriedValues[s].Description,Segment:o,Value:t.lastQueriedValues[s].Value}))}if(!a)if(t.segmentValues&&0!==t.segmentValues.length){for(s=0;s<t.segmentValues.length&&i[e]!==t.segmentValues[s].Value;s++);s<t.numberOfSegmentValues?(t.segmentValues[s].Description=t.segmentValues[s].Description||"",this.data.push({Description:t.segmentValues[s].Description,Segment:o,Value:t.segmentValues[s].Value})):this.data.push({Segment:o,Value:"-",Description:"-"})}else this.data.push({Segment:o,Value:"-",Description:"-"})}else this.data.push({Segment:o,Value:"-",Description:"-"})}this.dataprovider(new d(this.data,{keyAttributes:"Segment"}))},this.setEmptyData=()=>{if(this.data=[],this.dataAlias(""),this.kffStructDef){for(let e=0;e<this.getNumberOfSegments();e++){const t=this.getSegDefs()[e].Name;this.data.push({Segment:t,Value:"-",Description:"-"})}this.dataprovider(new d(this.data,{keyAttributes:"Segment"}))}},this.getFlexStructureInstanceFromRemote=e=>{if(m.log("getFlexStructureInstanceFromRemote: "+e),void 0===e)return new Promise((e,t)=>{e(null)});if(!this.properties.metadata)return new Promise((e,t)=>{m.error("Consumer Metadata is null"),e(null)});const t=this.getExtensionId(this.properties.metadata.resourceId);return this.properties.metadata instanceof s||this.properties.metadata instanceof o?new Promise((e,i)=>{this.properties.metadata.getMetadata({layout:[]}).then(i=>{if(i.properties[this.properties.attributeName].extension&&(this.kffResourceRoot=i.properties[this.properties.attributeName].extension.FND_ACFF_ResourceLOVName,this.resourceFinderContext=i.properties[this.properties.attributeName].extension.FND_ACFF_ResourceLOVFinderContext,this.resourceShorthandAliases=i.properties[this.properties.attributeName].extension.FND_ACFF_ShorthandAliasesLOVName,this.resourceLOVContextRootLA=i.properties[this.properties.attributeName].extension.FND_ACFF_ResourceLOVContextRoot),this.kffResourceRoot){this.kffOperationId="get_"+this.kffResourceRoot;const o=t?t+":"+i.properties[this.properties.attributeName].extension.FND_ACFF_ResourceName+"/version_representation":i.properties[this.properties.attributeName].extension.FND_ACFF_ResourceName+"/version_representation";f.get(o,{extensionId:t}).toUrl().then(t=>{this.fetchResourceLOV(t,e)}).catch(e=>{m.error("Unable to get SIN because consumer rest is down"+e),this.resolveBusyContext()})}}).catch(e=>{m.error("Unable to get SIN because consumer rest is down"+e),this.resolveBusyContext()})}):new Promise((e,i)=>{const o=t?t+":"+this.properties.metadata.extension.FND_ACFF_ResourceName+"/version_representation":this.properties.metadata.extension.FND_ACFF_ResourceName+"/version_representation";f.get(o,{extensionId:t}).toUrl().then(t=>{this.fetchResourceLOV(t,e)}).catch(e=>{m.error("Unable to get SIN because consumer rest is down"+e),this.resolveBusyContext()})})},this.getSegmentLOVs=(e,t)=>new Promise((i,o)=>{this.properties.value&&this.mapSegmentNameValues(e,this.properties.value);const s=[];for(let a=0;a<e.segments.length;a++){const n=e.segments[a],r=t.properties[n.PropertyName];if(r.dataProvider){const t=r.dataProvider.options?r.dataProvider.options.endpoint:r.dataProvider.serviceOptions.url;s.push("fetching"),n.ValidationType="INDEP",this.fetchLOVFromRemote(e,n,t).then(()=>{s.pop(),0===s.length&&i(e)}).catch(t=>{m.error("Error fetching segment LOV: "+t),o(e)})}0===s.length&&i(e)}0===e.segments.length&&this.busyResolve&&this.busyResolve()}),this.fetchAliases=(e,t)=>{const i=this.baseUrl+this.resourceShorthandAliases+"?onlyData=true&limit=490&q="+this.discriminatorName()+"="+this.sic;return new Promise((o,s)=>{fetch(i).then(e=>e.json()).then(i=>{e.aliases=[],e.numberOfAliases=i.items.length;for(let t=0;t<i.items.length;t++){if("N"===i.items[t].EnabledFlag)continue;const o=i.items[t].StartDateActive,s=i.items[t].EndDateActive,a=new Date;if(a.setHours(0,0,0,0),null!=s){if(new Date(s)<a)continue}if(null!=o){if(new Date(o)>a)continue}const n=i.items[t].ShaName;let r="";for(let o=0;o<e.segments.length;o++){let s=i.items[t][e.segments[o].PropertyName];null==s&&(s=""),r+=s,o<e.segments.length-1&&(r+=e.Delimiter)}this.aliasMap.set("#"+n,r),e.aliases.push({Value:"#"+n,Description:r})}o(this.getSegmentLOVs(e,t))}).catch(i=>{o(this.getSegmentLOVs(e,t))})})},this.isSegmentAvailable=(e,t)=>{for(let i=0;i<e.length;i++)if(t===e[i].Value)return!0;return!1},this.fetchLOVFromRemote=(e,t,i)=>{let o="";return i&&(o=i,this.resourceFinderContext&&(o+=encodeURIComponent(",Bind_FinderContext="+this.resourceFinderContext+"."+t.PropertyName+"@"+this.sic)),this.bindValidationDate&&(o+=encodeURIComponent(",Bind_ValidationDate="+this.bindValidationDate)),o.includes("?")?o+="&limit=490":o+="?limit=490"),t.url=o,t.FlexClientVsBindVars&&e.segmentNameValueList[t.PropertyName]()&&(t.modifiedUrl=this.createURLForDependentSegment(t,e.segmentNameValueList),o=t.modifiedUrl),new Promise((i,s)=>{fetch(o).then(e=>e.json()).then(o=>{if(t.hasMore=o.hasMore,t.numberOfSegmentValues=o.items.length,t.numberOfSegmentValues>0){t.ValueSetId=o.items[0].ValueSetId,t.segmentValues=[];for(let e=0;e<t.numberOfSegmentValues;e++)t.segmentValues[e]=o.items[e];t.hasMore&&e.segmentNameValueList[t.PropertyName]()&&!this.isSegmentAvailable(t.segmentValues,e.segmentNameValueList[t.PropertyName]())&&this.serverSideSearch(t,e.segmentNameValueList[t.PropertyName]()),"false"!==t.RequiredFlag&&void 0!==t.RequiredFlag||(t.segmentValues.unshift({Value:"No Value",Description:"Optional Segment"}),t.numberOfSegmentValues++)}i(e)}).catch(t=>{m.error("Error fetching segment LOV: "+t),s(e)})})},this.getCodeCombinationsFromRemote=()=>(m.log("getCodeCombinationsFromRemote"),new Promise((e,t)=>{e("no combinationsSearchEndPoint specified")})),this.loadKffMetadata=()=>{m.log("loadKffMetadata");const e=this.sic+this.properties.labelHint;let t=j[e];if(void 0===t){const i=this.getFlexStructureInstanceFromRemote(this.sic).then(i=>(t=i,j[e]=t,this.prepareFlexField(t),t)).catch(t=>{m.error("Error loading flex metadata: "+t),delete j[e],this.resolveBusyContext()});j[e]=i}else t instanceof Promise?Promise.all([t]).then(e=>{const t=e[0];this.prepareFlexField(t)}).catch(e=>{m.error("Error loading flex metadata: "+e),this.resolveBusyContext()}):this.prepareFlexField(t)},this.busyContext=p.getContext(e.element).getBusyContext(),this.busyResolve=this.busyContext.addBusyState(this.options),this.uniqueId=e.uniqueId,A.COMPONENT_NAME="ojsp_inputkeyflexfield",this.tracer=(0,u.getTracerProvider)().getTracer(A.COMPONENT_NAME);const t=new Map;if(this.oTelcontext={getValue:e=>t.get(e),setValue(e,i){return t.set(e,i),this},deleteValue(e){return t.delete(e),this}},this.screenRange=g.createScreenRangeObservable(),this.screenRange()===b.SMALL?this.isMobile=i.observable(!0):this.isMobile=i.observable(!1),this.composite=e.element,this.properties=e.properties,this.res=r,this.columnArraypopup([{field:"Value",headerText:"Value"},{field:"Description",headerText:"Description"}]),this.readonly=this.properties.readonly,this.disabled=this.properties.disabled,this.properties.structureInstanceNumber&&(this.sic=this.properties.structureInstanceNumber),this.lovDataprovider=i.computed(()=>{const e=new RegExp(this.filter(),"i"),t={criteria:[{op:"$regex",value:{Value:e}},{op:"$regex",value:{Description:e}}],op:"$or"},i=new d(this.lovData(),{keyAttributes:"Value"});return new h(i,{filterCriterion:t})}),this.columnArray([{className:"oj-typography-body-md oj-text-color-primary",field:"Segment",headerClassName:"oj-typography-body-md oj-typography-semi-bold oj-text-color-primary",headerText:this.res.kffSegmentName,style:"padding-top:0.5rem;padding-bottom:0.5rem"},{className:"oj-typography-body-md oj-text-color-primary",field:"Value",headerClassName:"oj-typography-body-md oj-typography-semi-bold oj-text-color-primary",headerText:this.res.kffSegmentValue,style:"padding-top:0.5rem;padding-bottom:0.5rem"},{className:"oj-typography-body-md oj-text-color-primary",field:"Description",headerClassName:"oj-typography-body-md oj-typography-semi-bold oj-text-color-primary",headerText:this.res.kffSegmentDescription,style:"padding-top:0.5rem;padding-bottom:0.5rem"}]),this.properties.bindValidationDate){const e=new Date(this.properties.bindValidationDate);this.bindValidationDate=e.toISOString()}this.properties.metadata&&(this.properties.metadata.extension&&(this.kffResourceRoot=this.properties.metadata.extension.FND_ACFF_ResourceLOVName,this.resourceFinderContext=this.properties.metadata.extension.FND_ACFF_ResourceLOVFinderContext,this.resourceShorthandAliases=this.properties.metadata.extension.FND_ACFF_ShorthandAliasesLOVName,this.resourceLOVContextRootLA=this.properties.metadata.extension.FND_ACFF_ResourceLOVContextRoot),this.properties.metadata.extension&&this.kffResourceRoot&&(this.kffOperationId="get_"+this.kffResourceRoot,this.properties.metadata.readonly&&(this.readonly=this.properties.metadata.readonly))),this.requiredSegmentErrorString=i.computed(()=>y.applyParameters(this.res.requiredSegmentError,{0:this.requiredSegmentErrorMessage()}),this),this.dataAliasString=i.computed(()=>y.applyParameters(this.res.aliasSubtitle,{0:this.dataAlias()}),this),this.valueErrorString=i.computed(()=>y.applyParameters(this.res.segmentError,{0:this.valueErrorMessage()}),this),this.properties.validators&&(this.validators=this.properties.validators),this.required=this.properties.required,this.valid("valid"),this.properties.valid="valid",this.attributeName=this.properties.attributeName,this.lastValidatedValue(""),this.lastRequiredValue(this.properties.required)}propertyChanged(e){m.log("property changed")}componentEvent(e,t){return this.oTelcontext.setValue(v,e),this.tracer.startActiveSpan("componentEvent",{},this.oTelcontext,t)}activated(e){m.log("activated")}connected(e){m.log("connected")}disconnected(e){m.log("disconnected"),p.getContext(this.composite).getBusyContext().clear()}fetchDepSegmentLovOnValueChange(){this.mapSegmentNameValues(this.kffStructDef,this.properties.value);const e=this.properties.value.split(this.kffStructDef.Delimiter);for(let t=0;t<this.getNumberOfSegments()&&t<e.length;t++){const e=this.getSegDefs()[t];e.FlexClientVsBindVars&&this.fetchLOVDataForDependentSegment(e,this.kffStructDef.segmentNameValueList)}}switchSegmentsInMobile(e){for(let t=0;t<this.getNumberOfSegments();t++)t==e?(this.setSegmentDirty(e),this.appliedFiltersObservableArray()[e].state(!0)):this.appliedFiltersObservableArray()[t].state(!1)}fetchLOVDataForDependentSegment(e,t){const i=this.createURLForDependentSegment(e,t);return i===e.modifiedUrl?new Promise((t,i)=>{t(this.lovData(e.segmentValues))}):new Promise((t,o)=>{this.showLoading(!0),fetch(i).then(e=>e.json()).then(o=>{if(this.showLoading(!1),e.hasMore=o.hasMore,e.numberOfSegmentValues=o.items.length,e.numberOfSegmentValues>0){e.ValueSetId=o.items[0].ValueSetId,e.segmentValues=[];for(let t=0;t<e.numberOfSegmentValues;t++)e.segmentValues[t]=o.items[t];"false"!==e.RequiredFlag&&void 0!==e.RequiredFlag||(e.segmentValues.unshift({Value:"No Value",Description:"Optional Segment"}),e.numberOfSegmentValues++),e.modifiedUrl=i,t(this.lovData(e.segmentValues))}}).catch(e=>{m.error("Segment URL is not Valid",e)})})}createURLForDependentSegment(e,t){const i=e.FlexClientVsBindVars.split(","),o=[];let s=e.url;for(let a=0;a<i.length;a++)o[a]=e["FlexClientVar_"+i[a]+"_VT"],e.url.includes("{"+o[a]+"}")&&(s=s.replace("{"+o[a]+"}",t[o[a]]()));return s}processBindValues(e){const t={BindVar0:"Var0",BindVar1:"Var1",BindVar2:"Var2",BindVar3:"Var3",BindVar4:"Var4",BindVar5:"Var5",BindVar6:"Var6",BindVar7:"Var7",BindVar8:"Var8",BindVar9:"Var9",Bind_ValidationDate:"Bind_ValidationDate"},i={},o=e.bindValues;if(null!=o)for(const e of Object.keys(o)){const s=t[e];if(null!=s){const t=o[e];let a;if("Bind_ValidationDate"===s){a=new Date(t).toISOString().replace("Z","-0000")}else a=t instanceof Date?"T]"+t.toISOString().replace("Z","-0000"):isNaN(t)?"C]"+t:"N]"+t;i[s]=a}}return i}fetchFilteredCombinationList(){let e,t=this.baseUrl+this.kffResourceRoot+"?q=("+this.discriminatorName()+"="+this.sic;for(e in this.segmentValues)void 0!==this.segmentValues[e]()&&""!==this.segmentValues[e]()&&(t+=encodeURI(" and "+e+"='"+this.segmentValues[e]()+"'"));if(t+=")",this.resourceFinderContext&&this.sic&&(t+="&finder=CF"+encodeURIComponent(";VarCsr="+this.resourceFinderContext+",VarSin="+this.sic),this.properties.context&&this.properties.context.bindValues)){const e=this.processBindValues(this.properties.context);for(const i of Object.keys(e)){const o=e[i];t+=encodeURIComponent(","+i+"="+o)}}t.includes("?")?t+="&totalResults=true":t+="?totalResults=true",this.listDataProvider(new c.RESTDataProvider({keyAttributes:"filterHighligherArray",url:t,transforms:{fetchFirst:{request:async e=>{const t=new URL(e.url),{size:i,offset:o}=e.fetchParameters;return t.searchParams.set("limit",String(i)),t.searchParams.set("offset",String(o)),t.searchParams.set("totalResults","true"),new Request(t.href,{headers:new Headers({"Content-Type":"application/json","REST-Framework-Version":"2"})})},response:async({body:e})=>{if(this.comboData.removeAll(),0!==e.count)for(let t=0;t<e.items.length;t++){const i=[];let o="",s="";for(let a=0;a<this.getNumberOfSegments();a++){const n=this.getSegDefs()[a];o=this.getSegDefs()[a+1]?e.items[t][n.PropertyName]+" "+this.kffStructDef.Delimiter:e.items[t][n.PropertyName],s=this.segmentValues[n.PropertyName],i.push({SegmentValue:o,SegmentFilter:s})}this.comboData.push({filterHighligherArray:i})}const t={};return t.data=this.comboData(),t.totalSize=e.totalResults,t.hasMore=e.hasMore,t}}}}))}resolveBusyContext(){this.busyResolve&&(this.busyResolve(),this.busyResolve=null)}fetchResourceLOV(e,t){const i=n.getExternalEndPoints?(0,n.getExternalEndPoints)():void 0;if(this.resourceLOVContextRootLA&&i){const t=this.resourceLOVContextRootLA.split("/"),o=t[0],s=t[1]||"latest";e=i[o]+"resources/"+s+"/"}this.baseUrl=e,this.restEndPoint=e+"describe?metadataMode=minimal&resources="+this.kffResourceRoot;let o=e.substring(0,e.lastIndexOf("/"));o=o.substring(0,o.lastIndexOf("/")),this.combinationValidationEndPoint=o+"/11.13.18.05/FlexFndKffApi/action/validateCombination";const s=(new a).createMetadataProvider({service:this.restEndPoint,operationId:this.kffOperationId});s.getMetadata({layout:[]}).then(e=>{this.discriminatorName(e.discriminator),s.getMetadataByDiscriminator(e.discriminator,this.sic,null).then(e=>{const i=this.createKffObject(e);this.resourceShorthandAliases?t(this.fetchAliases(i,e)):t(this.getSegmentLOVs(i,e))}).catch(e=>{m.error("SIN(discriminator) is not valid"),this.resolveBusyContext()})}).catch(e=>{m.error("Unable to get SIN because producer rest is down"+e),this.resolveBusyContext()})}mapSegmentNameValues(e,t){const i=t.split(e.Delimiter);let o=0;for(const t of Object.keys(e.segmentNameValueList))e.segmentNameValueList[t](i[o]),o++}createKffObject(e){const t={};t.restEndPoint=this.restEndPoint,t.baseUrl=this.baseUrl,t.kffResourceRoot=this.kffResourceRoot,t.resourceFinderContext=this.resourceFinderContext,t.combinationValidationEndPoint=this.combinationValidationEndPoint,t.resourceShorthandAliases=this.resourceShorthandAliases,t.resourceLOVContextRootLA=this.resourceLOVContextRootLA,t.discriminatorName=this.discriminatorName(),t.aliases=[],t.segmentNameValueList={},t.numberOfAliases=0,t.relatedValueSetValues=[],t.numberOfRelatedValueSetValues=0,e.extension&&(t.Delimiter=e.extension.FND_ACFF_Delimiter),t.segments=[];for(const o of Object.keys(e.properties)){const s=e.properties[o];if(s.extension&&s.extension.FND_ACFF_SegmentName){const e={};if(e.PropertyName=o,e.SegmentCode=s.extension.FND_ACFF_SegmentName,e.Name=s.labelHint,e.DefaultValue=s.extension.FND_ACFF_DV,e.ValidationType="FORMAT",e.FormatType=s.extension.FND_ACFF_DVT,e.MaximumLength=s.extension.FND_ACFF_MaximumLength,e.RequiredFlag=s.extension.FND_ACFF_IsRequired,e.UppercaseOnlyFlag=s.extension.FND_ACFF_IsUppercaseOnly,e.NumericOnlyFlag=s.extension.FND_ACFF_IsNumericOnly,e.ZeroFillFlag=s.extension.FND_ACFF_IsRightJustifiedZeroFilled,e.Precision=s.extension.FND_ACFF_Precision,e.Scale=s.extension.FND_ACFF_Scale,e.MinimumValue=s.extension.FND_ACFF_MinimumValue,e.MaximumValue=s.extension.FND_ACFF_MaximumValue,e.ValueDataType=s.type,e.JavaType=s.extension.FND_ACFF_JavaType,s.extension.FlexClientVsBindVars){e.FlexClientVsBindVars=s.extension.FlexClientVsBindVars;const t=s.extension.FlexClientVsBindVars.split(",");for(let i=0;i<t.length;i++){const o=s.extension["FlexClientVar_"+t[i]+"_VT"];o.startsWith("SEGMENT.")&&(e["FlexClientVar_"+t[i]+"_VT"]=o.substring("SEGMENT.".length))}}t.segmentNameValueList[o]=i.observable(""),t.segments.push(e)}}return t.numberOfSegments=t.segments.length,t}getExtensionId(e){return e&&0!==e.length&&-1!=e.indexOf(":")?e.split(":")[0]:null}}t.InputKffViewModel=A})),define("css!oj-sp/input-key-flex-field/input-key-flex-field-styles",[],(function(){})),define("oj-sp/input-key-flex-field/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./input-key-flex-field-view.html","./input-key-flex-field-viewModel","css!./input-key-flex-field-styles.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-input-key-flex-field",{metadata:JSON.parse(o),view:s,viewModel:a.InputKffViewModel})})),define("oj-sp/input-phone-number/model/impl/libphonenumber-js/LibPhoneNumberImpl",["require","exports","libphonenumber-js/libphonenumber-min","oj-sp/common-util/common-util"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{getAllCountryInfo(){const e=o.getCurrentLocale&&o.getCurrentLocale()?[o.getCurrentLocale()]:void 0,t=new Intl.DisplayNames(e,{type:"region"});return i.getCountries().map((e,o)=>({countryIndex:e,countryCode:e,phoneCode:"+"+i.getCountryCallingCode(e),countryName:""+t.of(e)}))}getInternationalDialingCode(e){var t;return null===(t=this.getAllCountryInfo().find(t=>t.countryCode===e))||void 0===t?void 0:t.phoneCode}getCountryCode(e,t){var i;return null===(i=this.getCountryDetail(e,t))||void 0===i?void 0:i.countryCode}getPhoneCode(e,t){var i;return null===(i=this.getCountryDetail(e,t))||void 0===i?void 0:i.phoneCode}getCountryDetail(e,t){const i=this.getAllCountryInfo(),o=i.find(i=>{const o=i.phoneCode===e;return t?o&&t===i.countryCode:o});return o||i.find(t=>t.phoneCode===e)}getCountryCodeIndex(e,t){var i;return null===(i=this.getCountryDetail(e,t))||void 0===i?void 0:i.countryIndex}getCountryCodeFromIndex(e){var t;return null===(t=this.getAllCountryInfo().find(t=>t.countryIndex===e))||void 0===t?void 0:t.countryCode}getDefaultCountry(){return"+"+i.getCountryCallingCode(o.getTerritory())}getDefaultCountryIndex(){return this.getCountryCodeIndex(this.getDefaultCountry(),o.getTerritory())}parsePhoneNumber(e,t){return o=>o?i.parsePhoneNumber(e,t).format(o):i.parsePhoneNumber(e,t)}isPossiblePhoneNumber(e,t){return i.isPossiblePhoneNumber(e,t)}validatePhoneNumberLength(e,t){return i.validatePhoneNumberLength(e,t)}isValidPhoneNumber(e,t){return i.isValidPhoneNumber(e,t)}}})),define("oj-sp/input-phone-number/model/impl/PhoneNumberAPIFactory",["require","exports","oj-sp/input-phone-number/model/impl/libphonenumber-js/LibPhoneNumberImpl"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static getPhoneNumberInstance(){return new i.default}}})),define("text!oj-sp/select-single-item-template/component.json",[],(function(){return'{"pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","name":"select-single-item-template","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Select Single Item Template","description":"Select single item template determines the layout of content of items within a select single item. The template is flexible in that elements can be used or not depending on the use case.","type":"composite","icon":{"iconPath":"extension/catalog/images/ico-select-single-item-template-48.svg"},"dependencies":{"oj-sp-common":"2404.0.0"},"properties":{"avatar":{"displayName":"Column Avatar","description":"Avatar Displayed as Column Leading Visual","writeback":false,"required":false,"type":"object|null","properties":{"src":{"displayName":"Leading Visual Avatar Source","description":"Source path for avatar leading visual","type":"string","writeback":false,"required":false},"size":{"type":"string","enumValues":["extra-small","extra-extra-small"],"displayName":"Avatar Size","description":"Size should be any of extra small and Extra extra small"},"initials":{"displayName":"Avatar Initials","description":"Initials for avatar leading visual, used if src is not specified","type":"string","writeback":false,"required":false}}},"icon":{"displayName":"Leading Visual Icon","description":"Icon displayed in leading visual region.","type":"object|null","properties":{"src":{"type":"string","displayName":"Icon Class","description":"Class for icon leading visual.","status":[{"type":"deprecated","since":"2104.0.0","description":"Use the class property instead."}]},"class":{"type":"string","displayName":"Icon Class Name","description":"Class for icon leading visual from Redwood Icon gallery."}}},"metaText":{"type":"string","displayName":"Meta Text","description":"Meta Text will truncate when the text is more than 2.5rem.","writeback":false,"required":false},"primaryText":{"type":"string","displayName":"Primary Text","description":"Primary text","writeback":false,"required":false},"shortName":{"type":"string","displayName":"Short Name","description":"Short Name will truncate when the text is more than 2.75rem.","status":[{"type":"deprecated","since":"2104.0.0","description":"Use the shortText property instead."}],"writeback":false,"required":false},"searchText":{"type":"string","displayName":"Search Text","description":"Searched Text while used it for select single.","writeback":false,"required":false},"shortText":{"type":"string","displayName":"Short Text","description":"Short Text will truncate when the text is more than 2.75rem.","writeback":false,"required":false}},"methods":{},"events":{},"slots":{},"extension":{"catalog":{"category":"Redwood Forms & Inputs","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Select%20Single%20Item%20Template%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectraselectsingleitemtemplate.html","coverImage":"extension/catalog/images/ico-select-single-item-template-48.svg","screenshots":{}},"vbdt":{}}}'})),define("text!oj-sp/select-single-item-template/select-single-item-template-view.html",[],(function(){return'<html><head></head><body><oj-list-item-layout :id="[[\'select-single-item-template\' + uid]]"><oj-bind-if test="[[leadingVisualTypes() === \'avatar\' || leadingVisualTypes() === \'icon\']]"><div slot="leading"class="oj-sp-select-single-item-template-leading-visual-container"><div :class="[[{\'oj-sp-select-single-item-template-leading-visual-extra-small\' : (getAvatarSize() === \'xxs\'), \n      \'oj-sp-select-single-item-template-leading-visual-small\' : (getAvatarSize() === \'xs\'), \n      \'oj-sp-select-single-item-template-leading-visual-icon-width\' : (leadingVisualTypes() === \'icon\')}]]"><oj-bind-if test="[[leadingVisualTypes() === \'avatar\']]"><oj-avatar role="img"class="oj-sm-padding-1x-top"size="[[ getAvatarSize() ]]"initials="[[ $properties.avatar.initials ]]":aria-label="[[ $properties.avatar.initials ]]":title="[[ $properties.avatar.initials ]]"src="[[ $properties.avatar.src ]]"></oj-avatar></oj-bind-if><oj-bind-if test="[[leadingVisualTypes() === \'icon\']]"><div class="oj-flex-item oj-sm-flex-initial"><div :class="[[\'oj-sp-select-single-item-template-icon-font oj-ux-icon-size-6x \' + getIconClass()]]"></div></div></oj-bind-if></div></div></oj-bind-if><div class="oj-sp-select-single-item-template-align-center"><oj-bind-if test="[[ hasShortText() ]]"><div class="oj-sp-select-single-item-template-short-name oj-sp-select-single-item-template-ellipsis oj-sm-margin-4x-end":title="[[ $properties.shortText || $properties.shortName ]]"><oj-highlight-text text="[[ $properties.shortText || $properties.shortName ]]"match-text="[[$properties.searchText]]"></oj-highlight-text></div></oj-bind-if><oj-bind-if test="[[ $properties.primaryText !== undefined ]]"><div class="oj-sp-select-single-item-template-primary-text oj-sm-align-self-center"><oj-highlight-text text="[[ $properties.primaryText ]]"match-text="[[$properties.searchText]]"></oj-highlight-text></div></oj-bind-if><oj-bind-if test="[[ $properties.metaText !== undefined ]]"><div class="oj-typography-body-md oj-text-color-secondary oj-sm-margin-8x-start oj-sm-justify-content-flex-end oj-flex-item oj-flex"><span class="oj-sp-select-single-item-template-ellipsis oj-sp-select-single-item-template-meta-text":title="[[ $properties.metaText ]]"><oj-highlight-text text="[[ $properties.metaText ]]"match-text="[[$properties.searchText]]"></oj-highlight-text></span></div></oj-bind-if></div></oj-list-item-layout></body></html>'})),define("oj-sp/select-single-item-template/select-single-item-template-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojavatar","ojs/ojhighlighttext","ojs/ojknockout","ojs/ojlistitemlayout"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSingleItemTemplateViewModel=void 0;t.SelectSingleItemTemplateViewModel=class{constructor(e){this.calculateShortText=()=>void 0!==this.properties.shortText||void 0!==this.properties.shortName,this.calculateIcon=()=>{const e=this.properties.icon;let t;return t=e?e.class?e.class:e.src?e.src:void 0:void 0,t};const t=o.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.uid=e.uniqueId,this.composite=e.element,this.properties=e.properties,this.hasShortText=i.computed(this.calculateShortText),this.getIconClass=i.computed(this.calculateIcon),this.initVisuals(),this.busyResolve()}activated(e){s.log(`select-single-item-template ${this.uid} activated`)}connected(e){s.log(`select-single-item-template ${this.uid} connected`)}bindingsApplied(e){s.log(`select-single-item-template ${this.uid} bindingsApplied`)}propertyChanged(e){s.log(`select-single-item-template ${this.uid} propertyChanged`)}disconnected(e){s.log(`select-single-item-template ${this.uid} disconnected`)}getAvatarSize(){const e={"extra-extra-small":"xxs","extra-small":"xs"};if(this.properties&&this.properties.avatar&&(void 0!==this.properties.avatar.src||void 0!==this.properties.avatar.initials)){const t=this.properties.avatar.size;return t&&e[t]?e[t]:"xxs"}return""}initVisuals(){this.leadingVisualTypes=i.computed(()=>{if(this.properties.avatar){const e=this.properties.avatar.src,t=this.properties.avatar.initials;if(e||t||s.log("Invalid avatar, initials are required for accessibility in high contrast mode."),void 0!==e||void 0!==t)return"avatar"}return!this.properties.icon||void 0===this.properties.icon.src&&void 0===this.properties.icon.class?"":"icon"})}}})),define("css!oj-sp/select-single-item-template/select-single-item-template-styles",[],(function(){})),define("oj-sp/select-single-item-template/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./select-single-item-template-view.html","./select-single-item-template-viewModel","css!./select-single-item-template-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-select-single-item-template",{metadata:JSON.parse(o),view:s,viewModel:a.SelectSingleItemTemplateViewModel})})),define("oj-sp/input-phone-number/components/CountrySelect",["require","exports","preact","preact/hooks","ojs/ojarraydataprovider","oj-sp/input-phone-number/model/impl/PhoneNumberAPIFactory","ojs/ojselectsingle","ojs/ojlistview","oj-sp/select-single-item-template/loader"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CountrySelect=void 0;const n=a.default.getPhoneNumberInstance(),r=e=>(0,i.h)("oj-list-view",{onojItemAction:e.handleRowAction,selected:e.selected,selectionMode:"single",data:e.data,class:"oj-listview-item-padding-off oj-select-results"},(0,i.h)("template",{slot:"itemTemplate",render:t=>(0,i.h)("oj-sp-select-single-item-template",{"primary-text":t.data.countryName,"short-text":t.data.countryCode,"meta-text":t.data.phoneCode,"search-text":e.searchText})}));t.CountrySelect=e=>{const t=(0,o.useMemo)(()=>new s(n.getAllCountryInfo(),{keyAttributes:"countryIndex",textFilterAttributes:["countryCode","phoneCode","countryName"]}),[]);return(0,i.h)("div",{class:"oj-flex-item oj-md-3 oj-lg-3 oj-sm-only-width-2/5 oj-sm-padding-2x-end"},(0,i.h)("oj-select-single",{id:e.id,labelHint:e.labelHint,"item-text":"countryCode",data:t,describedBy:e.describedBy,value:(()=>{let t=e.internationalDialCodeValue;return e.disabled?n.getDefaultCountryIndex():(!e.internationalDialCodeValue&&e.countryCode&&(t=n.getInternationalDialingCode(e.countryCode)),t?n.getCountryCodeIndex(t,e.countryCode):n.getDefaultCountryIndex())})(),userAssistanceDensity:e.userAssistanceDensity,disabled:e.disabled,onvalueChanged:t=>{if(t.detail.value!==t.detail.previousValue)if(t.detail.value){const i=n.getCountryCodeFromIndex(t.detail.value),o=n.getInternationalDialingCode(i);e.propertyChangeHandler(o,i)}else e.propertyChangeHandler("")}},(0,i.h)("template",{slot:"collectionTemplate",render:r})))}})),define("oj-sp/input-phone-number/ComponentTypes",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEFT_TO_RIGHT_MARK_ESCAPED=t.LEFT_TO_RIGHT_MARK=void 0,t.LEFT_TO_RIGHT_MARK="â",t.LEFT_TO_RIGHT_MARK_ESCAPED="\\u200e"})),define("oj-sp/input-phone-number/components/PhoneInput",["require","exports","preact","oj-sp/input-phone-number/ComponentTypes","oj-sp/input-phone-number/model/impl/PhoneNumberAPIFactory","oj-sp/common-util/common-util","ojs/ojinputtext"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneInput=void 0;const n=s.default.getPhoneNumberInstance();class r{constructor(e){this.detail=e}getMessage(){return this.detail}}t.PhoneInput=e=>{const t={},s={},h=a.getDirectionality();t.parse=t=>{var i;let s="",r=null==t?void 0:t.replace(/[^0-9+]/g,"");h===a.DIRECTIONALITY.RIGHT_TO_LEFT&&(r=null==t?void 0:t.replace(new RegExp(o.LEFT_TO_RIGHT_MARK_ESCAPED,"gu"),""));const l=e.internationalDialCodeValue?e.internationalDialCodeValue:n.getInternationalDialingCode(e.countryCode);if(r=m(r),r)try{s=null===(i=n.parsePhoneNumber(r,n.getCountryCode(l))())||void 0===i?void 0:i.format("off"!==e.intlDialingCodeDisplay?"INTERNATIONAL":"NATIONAL")}catch(e){s=r}return s},t.format=t=>{var i;const s=t=m(null==t?void 0:t.replace(/[^0-9+]/g,""));let r="";if(h===a.DIRECTIONALITY.RIGHT_TO_LEFT&&(r=o.LEFT_TO_RIGHT_MARK),t){const o="off"===e.intlDialingCodeDisplay;try{t=null===(i=n.parsePhoneNumber(t)())||void 0===i?void 0:i.format(o?"NATIONAL":"INTERNATIONAL")}catch(e){t=s}}return`${r}${t}`},s.validate=t=>{const i=d(t,e);if(t&&t.length<=5&&(i&&void 0===n.getCountryCode(i.internationalDialingCode)||void 0===n.getCountryCode(t)))throw new r(l("INVALID_COUNTRY",e));if(t&&t.length>5){if(!n.isPossiblePhoneNumber(t,e.countryCode))throw new r(l(n.validatePhoneNumberLength(t,e.countryCode),e));if(!n.isValidPhoneNumber(t,e.countryCode))throw new r(l("INVALID_NUMBER",e))}return!0};const m=t=>{const i=d(t,e),o=i&&i.internationalDialingCode?t.includes(i.internationalDialingCode):t.includes(e.internationalDialCodeValue);return"off"!==e.intlDialingCodeDisplay||o?(null==e?void 0:e.internationalDialCodeValue)&&"off"===e.intlDialingCodeDisplay&&i&&e.internationalDialCodeValue===i.internationalDialingCode?e.readonly?e.subscriberNumberValue:`${n.getDefaultCountry()}${e.subscriberNumberValue}`:i&&("disabled"===e.intlDialingCodeDisplay||e.disabled)&&i.subscriberNumber?`${n.getDefaultCountry()}${i.subscriberNumber}`:t:i&&(i.internationalDialingCode||e.internationalDialCodeValue)&&i.subscriberNumber?`${n.getDefaultCountry()}${i.subscriberNumber}`:t.replace(""+n.getDefaultCountry(),"")};return(0,i.h)("div",{class:p(e)},(0,i.h)("oj-input-text",{value:u(e),id:e.id,labelHint:e.labelHint,labelledBy:e.labelledBy,onKeyPress:t=>{var i;const o=t.key,s="0"===t.key?t.key:"",a=document.getElementById(e.id),n=s.slice(0,-1),r=(null===(i=null==a?void 0:a.rawValue)||void 0===i?void 0:i.includes("+"))?o.replace(/\D/g,""):o.replace(/[^0-9+]/g,"");(""===(null==a?void 0:a.rawValue)&&s!==n||o!==r)&&t.preventDefault()},virtualKeyboard:"tel",converter:t,disabled:e.disabled,describedBy:e.describedBy,readonly:e.readonly,onvalueChanged:t=>c(t,e,h),required:e.required,validators:[s],userAssistanceDensity:e.userAssistanceDensity,messagesCustom:e.messagesCustom,onmessagesCustomChanged:t=>{var i;return null===(i=e.onMessagesCustomChanged)||void 0===i?void 0:i.call(e,t.detail.value)},onvalidChanged:t=>{var i;return null===(i=e.onValidChanged)||void 0===i?void 0:i.call(e,t.detail.value)},help:e.help}))};const l=(e,t)=>{switch(e){case"TOO_SHORT":case"TOO_LONG":e=t.translatedStrings.invalidPhoneLengthForCountry;break;case"NOT_A_NUMBER":e="Enter a number.";break;case"INVALID_COUNTRY":e=t.translatedStrings.invalidDialingCode;break;case"INVALID_NUMBER":e=t.translatedStrings.invalidSubscriberNumber}return e},d=(e,t)=>{e=null==e?void 0:e.replace(/[^0-9+]/g,"");try{return e?((e,t)=>{var i;let o;e=null==e?void 0:e.replace(/[^0-9+]/g,"");const s=t.internationalDialCodeValue?t.internationalDialCodeValue:n.getInternationalDialingCode(t.countryCode);try{if(e.length<5)try{if(n.getCountryCode(e))return{internationalDialingCode:e.trim(),subscriberNumber:""}}catch(e){throw new Error("INVALID_COUNTRY")}return o=n.parsePhoneNumber(e,n.getCountryCode(s))(),{internationalDialingCode:"+"+o.countryCallingCode,subscriberNumber:o.nationalNumber,country:null!==(i=o.country)&&void 0!==i?i:t.countryCode}}catch(e){throw new Error("INVALID_COUNTRY")}})(e,t):{subscriberNumber:"",internationalDialingCode:""}}catch(e){return}},c=(e,t,i)=>{var s,r,l,c,p;let{value:u}=e.detail;i===a.DIRECTIONALITY.RIGHT_TO_LEFT&&(u=null==u?void 0:u.replace(new RegExp(o.LEFT_TO_RIGHT_MARK_ESCAPED,"gu"),""));const h=u?d(u,t):{};if(u){if(h&&(h.subscriberNumber||h.internationalDialingCode))if(t.disabled)null===(r=t.propertyChangeHandler)||void 0===r||r.call(t,h.subscriberNumber,n.getDefaultCountry(),n.getDefaultCountryIndex());else switch(t.intlDialingCodeDisplay){case"on":null===(l=t.propertyChangeHandler)||void 0===l||l.call(t,h.subscriberNumber,h.internationalDialingCode,null!==(c=h.country)&&void 0!==c?c:t.countryCode);break;case"off":case"disabled":null===(p=t.propertyChangeHandler)||void 0===p||p.call(t,h.subscriberNumber,n.getDefaultCountry(),n.getDefaultCountryIndex())}}else null===(s=t.propertyChangeHandler)||void 0===s||s.call(t,"","",t.countryCode)},p=e=>{const t=e.isCountrySelectVisible?0:3,i=e.isExtensionVisible?6+t:9+t;return`oj-flex-item oj-md-${i} oj-lg-${i} oj-sm-only-width-3/5`},u=e=>{var t;const{internationalDialCodeValue:i,subscriberNumberValue:o,intlDialingCodeDisplay:s}=e;let a=i;return(i||o)&&("off"!==s||o)?"on"!==s&&o&&!e.readonly?a=null!==(t=n.getDefaultCountry())&&void 0!==t?t:"":"off"===s&&i&&o&&e.readonly?a="":"off"!==s&&!i&&o&&(a=n.isPossiblePhoneNumber(o,e.countryCode)?n.getInternationalDialingCode(e.countryCode):""):a="",`${a}${null!=o?o:""}`}})),define("oj-sp/input-phone-number/components/PhoneExtnInput",["require","exports","preact","ojs/ojinputtext"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneExtnInput=void 0;t.PhoneExtnInput=e=>(0,i.h)("div",{class:"oj-flex-item oj-md-3 oj-lg-3 oj-sm-4 oj-md-padding-2x-start "+(e.isCountrySelectVisible?"oj-sm-only-padding-4x-top":"oj-sm-padding-2x-start")},(0,i.h)("oj-input-text",{value:(()=>{var t;const i=null===(t=e.extensionNumberValue)||void 0===t?void 0:t.toString().replace(/\D/g,"").substring(0,6);return i!==e.extensionNumberValue&&void 0!==i?e.onExtValueChanged(i):(null==i?void 0:i.length)<=2&&e.onExtValueChanged(""),(null==i?void 0:i.length)>2?i:""})(),id:e.id,virtualKeyboard:"tel",disabled:e.disabled,labelHint:e.labelHint,describedBy:e.describedBy,readonly:e.readonly,onvalueChanged:t=>e.onExtValueChanged(t.detail.value),length:{max:6},onKeyPress:e=>{const t=e.key,i=t.replace(/\D/g,"");t!==i&&e.preventDefault()},autocomplete:"off",userAssistanceDensity:e.userAssistanceDensity}))})),define("css!oj-sp/input-phone-number/input-phone-number-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/input-phone-number/input-phone-number",["require","exports","preact","ojs/ojcontext","ojs/ojvcomponent","./components/CountrySelect","./components/PhoneInput","./components/PhoneExtnInput","ojs/ojvcomponent-binding","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","./model/impl/PhoneNumberAPIFactory","oj-sp/common-util/common-util","css!./input-phone-number-styles","ojs/ojformlayout","ojs/ojlabel"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputPhoneNumber=void 0;const u=c.default.getPhoneNumberInstance();u.getDefaultCountry();let h=class extends i.Component{constructor(e){var t,o;super(e),this.countryCode=p.getTerritory(),this.updateInternationalDialingCode=()=>{var e,t,i;"on"!==this.props.displayOptions.internationalDialingCode&&(null===(e=this.props.value)||void 0===e?void 0:e.internationalDialingCode)!==u.getDefaultCountry()&&(null===(i=(t=this.props).onValueChanged)||void 0===i||i.call(t,Object.assign(Object.assign({},this.props.value),{internationalDialingCode:u.getDefaultCountry()})))},this.propertyChangeHandler=(e,t,i)=>{var o,s;null===(s=(o=this.props).onValueChanged)||void 0===s||s.call(o,Object.assign(Object.assign({},this.props.value),{[e]:t})),this.setState(e=>Object.assign(Object.assign({},e),{countryCode:i}))},this.propertyChangeHandlerForIntlCode=(e,t,i)=>{var o,s;const a=null!=t?t:this.props.value.internationalDialingCode;null===(s=(o=this.props).onValueChanged)||void 0===s||s.call(o,Object.assign(Object.assign({},this.props.value),{subscriberNumber:e,internationalDialingCode:a})),this.state.countryCode!==i&&this.setState(e=>Object.assign(Object.assign({},e),{countryCode:i})),this.setPreviousValue(e,t,i)},this.setPreviousValue=(e,t,i)=>{"valid"===document.getElementById(this.componentId+"_subscriberNumber").valid&&(this.previousValue={subscriberNumber:t?e:this.previousValue.subscriberNumber,internationalDialingCode:t,countryCode:i||null})},this.getInitialCountryCode=()=>{var e,t,i,o;if(null===(e=this.props.value)||void 0===e?void 0:e.subscriberNumber){const e=null!==(i=null===(t=this.props.value)||void 0===t?void 0:t.internationalDialingCode)&&void 0!==i?i:u.getDefaultCountry(),s=e+(null===(o=this.props.value)||void 0===o?void 0:o.subscriberNumber);try{const t=u.parsePhoneNumber(s,u.getCountryCode(e))();if(t.country)return t.country}catch(e){}}return this.countryCode},this.getCountrySelectTemplate=()=>{const{disabled:e,displayOptions:t,describedBy:o,labelHintInternationalDialCode:s,value:n}=this.props;return(0,i.h)(a.CountrySelect,{id:this.componentId+"_internationalDialCode",propertyChangeHandler:(e,t)=>this.propertyChangeHandler("internationalDialingCode",e,t),disabled:e||"disabled"===(null==t?void 0:t.internationalDialingCode),describedBy:null==o?void 0:o.internationalDialCodeDescribedBy,labelHint:s,countryCode:this.state.countryCode,userAssistanceDensity:this.getUserAssistanceDensity(),internationalDialCodeValue:null==n?void 0:n.internationalDialingCode})},this.getExtensionInputTemplate=()=>{const{disabled:e,displayOptions:t,describedBy:o,labelHintExtension:s,value:a,readonly:n}=this.props,l="off"!==t.internationalDialingCode&&!n;return(0,i.h)(r.PhoneExtnInput,{id:this.componentId+"_extensionNumber",extensionNumberValue:null==a?void 0:a.extensionNumber,describedBy:null==o?void 0:o.extensionDescribedBy,labelHint:s,onExtValueChanged:e=>{var t,i;null===(i=(t=this.props).onValueChanged)||void 0===i||i.call(t,Object.assign(Object.assign({},this.props.value),{extensionNumber:e}))},disabled:(e||"disabled"===(null==t?void 0:t.extensionNumber))&&!n,readonly:n,userAssistanceDensity:this.getUserAssistanceDensity(),isCountrySelectVisible:l})},this.getUserAssistanceDensity=()=>{const{providedUserAssistanceDensity:e,userAssistanceDensity:t}=this.props;return null!=t?t:null!=e?e:"compact"},this.getReadonlyFormatted=(e,t)=>{try{return u.parsePhoneNumber(e)(t)}catch(t){return e}},this.getReadonlyComponent=()=>{var e;const{displayOptions:t,labelHint:o,value:s,providedReadonly:a,providedUserAssistanceDensity:n}=this.props,r=p.getDirectionality(),l="off"!==(null==t?void 0:t.extensionNumber),d="off"===(null==t?void 0:t.internationalDialingCode),c="on"===(null==t?void 0:t.internationalDialingCode)&&(null==s?void 0:s.internationalDialingCode)?null==s?void 0:s.internationalDialingCode:u.getDefaultCountry(),h=`${null!=c?c:""}${null!==(e=null==s?void 0:s.subscriberNumber)&&void 0!==e?e:""}`,m=d?"NATIONAL":"INTERNATIONAL",g=`${(null==s?void 0:s.subscriberNumber)?this.getReadonlyFormatted(h,m):""}${l&&(null==s?void 0:s.extensionNumber)?","+(null==s?void 0:s.extensionNumber):""}`,y=void 0!==n&&void 0===a;return(0,i.h)("div",{class:"oj-sp-input-phone-number-readonly "+(y?"oj-sp-input-phone-number-readonly-mixed":"")},(0,i.h)("oj-label",{id:this.componentId+"_label",for:this.componentId+"_readonly_div",class:"oj-sp-input-phone-number-readonly-margin","data-oj-binding-provider":"none"},(0,i.h)("span",{class:"oj-sp-input-phone-number-readonly-span "+(y?"oj-line-clamp-1":"")},o)),(0,i.h)("div",{class:"oj-sp-input-phone-number-field-readonly-div"},(0,i.h)("div",{class:"oj-sp-input-phone-number-field-readonly-div-value\n            "+(r===p.DIRECTIONALITY.RIGHT_TO_LEFT?" oj-sp-input-phone-number-field-readonly-div-rtl-value":""),role:"textbox",tabIndex:0,"aria-readonly":"true",id:this.componentId+"_readonly_div","aria-labelledby":this.componentId+"_label"},g)))},this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,s.getUniqueId)(),this.componentId=this.uid+"_input_phone_number",this.componentStrings=Object.assign({},d),this.state={countryCode:this.getInitialCountryCode()},this.previousValue={internationalDialingCode:(null===(o=this.props.value)||void 0===o?void 0:o.internationalDialingCode)&&u.getCountryCode(this.props.value.internationalDialingCode)?this.props.value.internationalDialingCode:u.getInternationalDialingCode(this.state.countryCode),subscriberNumber:""}}render(e){const{disabled:t,displayOptions:o,describedBy:s,labelHint:a,labelledBy:r,value:l,required:d,readonly:c,providedReadonly:p,messagesCustom:h,help:m}=this.props,g="off"!==o.extensionNumber,y="off"!==o.internationalDialingCode&&!c,f={invalidPhoneLengthForCountry:this.componentStrings.invalidPhoneLengthForCountry,invalidDialingCode:this.componentStrings.invalidDialingCode,invalidSubscriberNumber:this.componentStrings.invalidSubscriberNumber};return c||p?(0,i.h)(i.Fragment,null,this.getReadonlyComponent()):(0,i.h)(i.Fragment,null,(0,i.h)("div",{id:this.componentId,class:"oj-flex oj-sm-flex-direction-row"},y&&this.getCountrySelectTemplate(),(0,i.h)(n.PhoneInput,{id:this.componentId+"_subscriberNumber",subscriberNumberValue:null==l?void 0:l.subscriberNumber,internationalDialCodeValue:null==l?void 0:l.internationalDialingCode,disabled:t&&!c,labelHint:a,countryCode:this.state.countryCode,labelledBy:r,required:d,translatedStrings:f,describedBy:null==s?void 0:s.subscriberNumberDescribedBy,propertyChangeHandler:(e,t,i)=>{this.propertyChangeHandlerForIntlCode(e,t,i)},intlValueChangeHandler:()=>{var e,t;null===(t=(e=this.props).onValueChanged)||void 0===t||t.call(e,Object.assign(Object.assign({},this.props.value),{internationalDialingCode:u.getDefaultCountry()}))},userAssistanceDensity:this.getUserAssistanceDensity(),readonly:c,onValidChanged:t=>{var i;return null===(i=e.onValidChanged)||void 0===i?void 0:i.call(e,t)},intlDialingCodeDisplay:o.internationalDialingCode,messagesCustom:h,onMessagesCustomChanged:t=>{var i;return null===(i=e.onMessagesCustomChanged)||void 0===i?void 0:i.call(e,t)},help:m,isExtensionVisible:g,isCountrySelectVisible:y}),g&&this.getExtensionInputTemplate()))}componentDidMount(){this.updateInternationalDialingCode()}componentDidUpdate(){this.updateInternationalDialingCode()}showMessages(){const e=document.getElementById(this.componentId+"_subscriberNumber");e&&e.showMessages()}refresh(){const e=document.getElementById(this.componentId+"_subscriberNumber");e&&e.refresh()}focus(){let e=document.getElementById(this.componentId+"_internationalDialCode");if(e&&!(null==e?void 0:e.disabled)){o.getContext(e).getBusyContext().whenReady().then(()=>{e.focus()})}else e=document.getElementById(this.componentId+"_subscriberNumber"),e&&e.focus()}reset(){var e;const t=document.getElementById(this.componentId+"_subscriberNumber");if("valid"!==t.valid){const i=this.previousValue.subscriberNumber?this.previousValue.internationalDialingCode:"";""===t.value||this.previousValue.internationalDialingCode&&this.previousValue.internationalDialingCode===(null===(e=this.props.value)||void 0===e?void 0:e.internationalDialingCode)?t.reset():this.propertyChangeHandlerForIntlCode(""+this.previousValue.subscriberNumber,i,this.previousValue.countryCode)}}validate(){const e=document.getElementById(this.componentId+"_subscriberNumber");return e.validate(),new Promise(t=>"valid"!==e.valid?t("invalid"):t("valid"))}};h.defaultProps={disabled:!1,displayOptions:{extensionNumber:"off",internationalDialingCode:"on"},labelHint:"Subscriber Number",labelHintInternationalDialCode:"Country",labelHintExtension:"Ext"},h._metadata={properties:{describedBy:{type:"object",properties:{extensionDescribedBy:{type:"string"},internationalDialCodeDescribedBy:{type:"string"},subscriberNumberDescribedBy:{type:"string"}}},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{extensionNumber:{type:"string",enumValues:["disabled","on","off"]},internationalDialingCode:{type:"string",enumValues:["disabled","on","off"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},labelHint:{type:"string"},labelHintExtension:{type:"string"},labelHintInternationalDialCode:{type:"string"},labelledBy:{type:"string"},messagesCustom:{type:"Array<object>",writeback:!0},required:{type:"boolean"},readonly:{type:"boolean"},providedReadonly:{type:"boolean",binding:{consume:{name:"readonly"}}},userAssistanceDensity:{type:"string",enumValues:["reflow","compact","efficient"]},providedUserAssistanceDensity:{type:"string",enumValues:["reflow","compact","efficient"],binding:{consume:{name:"userAssistanceDensity"}}},valid:{type:"string",enumValues:["invalidHidden","invalidShown","valid","pending"],readOnly:!0,writeback:!0},value:{type:"object",properties:{subscriberNumber:{type:"string"},internationalDialingCode:{type:"string"},extensionNumber:{type:"string"}},writeback:!0}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{showMessages:{},refresh:{},focus:{},reset:{},validate:{}}},h=__decorate([(0,s.customElement)("oj-sp-input-phone-number"),__metadata("design:paramtypes",[Object])],h),t.InputPhoneNumber=h})),define("oj-sp/input-phone-number/loader",["require","exports","./input-phone-number"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputPhoneNumber=void 0,Object.defineProperty(t,"InputPhoneNumber",{enumerable:!0,get:function(){return i.InputPhoneNumber}})})),define("oj-sp/item-gauge/GaugeType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GaugeType=void 0,function(e){e.StatusMeterCircular="status-meter-circular",e.StatusMeterHorizontal="status-meter-horizontal",e.Rating="rating"}(t.GaugeType||(t.GaugeType={}))})),define("css!oj-sp/item-gauge/item-gauge-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/item-gauge/item-gauge",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","ojs/ojpalette","./GaugeType","css!./item-gauge-styles","ojs/ojanimation","ojs/ojgauge"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemGauge=void 0;let r=class extends s.Component{constructor(e){var t;super(e),this.defaultColors=["var(--oj-dvt-danger-color)","var(--oj-dvt-warning-color)","var(--oj-dvt-success-color)"],this.tooltipRenderer={renderer:e=>{let t;if(this.props.gaugeTitle)t=this.props.gaugeTitle;else{t=(this.props.value?this.props.value+" ":"")+(this.props.label?this.props.label:"")}return{insert:t}}},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)()}render(e){return(0,s.h)("div",null,e.gaugeType===n.GaugeType.StatusMeterCircular&&this.renderCircularGauge(),e.gaugeType===n.GaugeType.StatusMeterHorizontal&&this.renderHorizontalStatusMeterGauge(),e.gaugeType===n.GaugeType.Rating&&this.renderRatingGauge())}renderCircularGauge(){const e=this.getThresholds(this.props.thresholds,!1),t=e&&e.length>0,i=this.getReferenceLines(this.props.referenceLines,t);return(0,s.h)("oj-status-meter-gauge",{class:"oj-sp-item-gauge-circular oj-sp-item-gauge-element","labelled-by":this.getLabelId(),orientation:"circular","inner-radius":".8",size:"md",value:this.props.value||0,thresholds:e,referenceLines:i,tooltip:this.tooltipRenderer,metricLabel:{rendered:"off",converter:this.props.converter||void 0},readonly:!0},(0,s.h)("template",{slot:"centerTemplate",render:e=>this.renderCircularGaugeCenterTemplate(e)}))}renderCircularGaugeCenterTemplate(e){return(0,s.h)("div",{class:"oj-flex oj-sm-justify-content-center oj-sm-flex-direction-row oj-sm-align-items-center",style:{position:"absolute",width:e.innerBounds.width+"px",height:e.innerBounds.height+"px",top:e.innerBounds.y-4+"px",left:e.innerBounds.x+"px",pointerEvents:"none"}},(0,s.h)("div",{class:"oj-sp-item-gauge-value-text oj-flex-item oj-sm-12 oj-typography-body-xl oj-typograph-semi-bold oj-text-color-primary"},this.getGaugeDisplayValue()||""),(0,s.h)("div",{id:this.getLabelId(),class:"oj-sp-item-gauge-label oj-flex-item oj-sm-12 oj-typography-body-xs oj-text-color-secondary"},this.props.label||""))}renderHorizontalStatusMeterGauge(){const e=this.getThresholds(this.props.thresholds,!1),t=e&&e.length>0,i=this.getReferenceLines(this.props.referenceLines,t);return(0,s.h)("div",null,(0,s.h)("div",{class:"oj-sp-item-gauge-horizontal-alignment oj-flex oj-sm-flex-direction-row oj-sm-flex-wrap-nowrap oj-typography-body-sm oj-typography-semi-bold oj-text-color-primary"},(0,s.h)("div",{class:"oj-flex-item oj-sp-item-gauge-label oj-text-color-secondary",tabIndex:0,id:this.getLabelId()},this.props.label),(0,s.h)("div",{class:"oj-flex-item oj-sp-item-gauge-value-text"},this.getGaugeDisplayValue())),(0,s.h)("oj-status-meter-gauge",{class:"oj-sp-item-gauge-horizontal oj-sm-margin-3x-top oj-sp-item-gauge-element",size:"md","labelled-by":this.getLabelId(),tooltip:this.tooltipRenderer,value:this.props.value||0,thresholds:e,referenceLines:i,metricLabel:{converter:this.props.converter},plotArea:{rendered:"on"},readonly:!0}))}renderRatingGauge(){const e=this.getThresholds(this.props.thresholds,!0);return(0,s.h)("div",{class:"oj-sp-item-gauge-horizontal-alignment oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap oj-typography-body-sm oj-typography-semi-bold oj-text-color-primary"},(0,s.h)("div",{tabIndex:0,id:this.getLabelId(),class:"oj-flex-item oj-sp-item-gauge-label oj-text-color-secondary"},this.props.label),(0,s.h)("oj-rating-gauge",{class:"oj-sp-item-gauge-rating oj-sp-item-gauge-element oj-sm-margin-1x-top",size:"md","labelled-by":this.getLabelId(),tooltip:this.tooltipRenderer,value:this.props.value||0,thresholds:e,readonly:!0}))}getLabelId(){return this.uniqueId+"_gaugeLabel"}getGaugeDisplayValue(){return this.props.converter&&this.props.converter.format?this.props.converter.format(String(this.props.value)):this.props.value}getThresholds(e,t){if(!e||0===e.length)return;const i=t?[]:this.getColors(e.length);return e.map((function(e,o){return{max:e.max,shortDesc:e.shortDesc,color:t?null:i[o%i.length]}}))}getColors(e){return this.props.colorPalette?(0,a.getColorValuesFromPalette)(this.props.colorPalette,e>=2?e:2):this.defaultColors}getReferenceLines(e,t){if(!e||0===e.length)return;const i=t?[]:this.getColors(e.length);return e.map((function(e,t){return{value:e.value,color:i[t%i.length]}}))}};r._metadata={properties:{gaugeType:{type:"string",enumValues:["status-meter-circular","status-meter-horizontal","rating"]},label:{type:"string"},value:{type:"number"},converter:{type:"object"},gaugeTitle:{type:"string"},thresholds:{type:"Array<object>"},referenceLines:{type:"Array<object>"},colorPalette:{type:"string",enumValues:["viridis","magma","inferno","plasma"]}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},r=__decorate([(0,o.customElement)("oj-sp-item-gauge"),__metadata("design:paramtypes",[Object])],r),t.ItemGauge=r})),define("oj-sp/item-gauge/loader",["require","exports","./item-gauge"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemGauge=void 0,Object.defineProperty(t,"ItemGauge",{enumerable:!0,get:function(){return i.ItemGauge}})})),define("text!oj-sp/item-overview-page/component.json",[],(function(){return'{"name":"item-overview-page","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Item Overview Page Template","description":"Item Overview Page template is used for creating pages that enable users to view information about an item, perform tasks relevant to that item.","type":"composite","subcomponentType":"patternImpl","dependencies":{"oj-sp-header-navigation":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-common":"2404.0.0"},"implements":["SpItemOverviewPageElement"],"icon":{"iconPath":"extension/catalog/images/ico-item-overview-page-48.svg"},"properties":{"overviewExpanded":{"displayName":"Overview Expanded","description":"True if the overview is expanded to replace whole page.","type":"boolean"},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","type":"object|null","properties":{"goToParent":{"description":"Defines whether Go to Parent action is visible","type":"boolean","value":true},"inFlowBack":{"description":"Defines whether In-flow Back action is visible","type":"boolean","value":false},"bidirectionalNavigation":{"description":"True when user can navigate to both previous and next item; False when user only navigate to next item.","type":"boolean","value":true}}},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"goToParent":{"type":"string"},"inFlowBack":{"type":"string"},"overviewCollapse":{"type":"string"}}},"nextItem":{"displayName":"Next Item","description":"Information regarding next item.","type":"object|null","properties":{"id":{"type":"string","displayName":"Previous Step ID","description":"A unique ID which will be passed back in the spPrevious callback"},"label":{"type":"string","displayName":"Previous Step Label","description":"The label to be displayed in the Previous step"}}},"previousItem":{"displayName":"Previous Item","description":"Information regarding previous item.","type":"object|null","properties":{"id":{"type":"string","displayName":"Previous Step ID","description":"A unique ID which will be passed back in the spPrevious callback"},"label":{"type":"string","displayName":"Previous Step Label","description":"The label to be displayed in the Previous step"}}},"displayMode":{"type":"string","displayName":"The display mode for the page.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The page header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The page header background is dark with light text content. The page background is light."}}}},"methods":{"getPreviousNextItems":{"description":"A function to obtain previous and next items.","displayName":"getPreviousNextItems Method","params":[{"name":"itemsDataProvider","description":"The collection of items data provider","type":"oj.DataProvider"},{"name":"currentItemId","description":"The current item Id","type":"string"},{"name":"itemLabelAttribute","description":"The attribute to retrieve item display label.","type":"string"}],"return":"object"}},"events":{"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked.","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked","bubbles":true,"cancelable":false},"spOverviewCollapse":{"displayName":"spOverviewCollapse event","description":"Triggered when the content collapse action is invoked.","bubbles":true,"cancelable":false},"spPrevious":{"displayName":"spPrevious event","description":"Triggered when the Previous action is clicked.","bubbles":true,"cancelable":false},"spNext":{"displayName":"spNext event","description":"Triggered when the Next action is clicked.","bubbles":true,"cancelable":false}},"slots":{"overview":{"description":"This is the slot for item overview component","displayName":"item overview slot","implicitBusyContext":true,"preferredContent":["SpItemOverviewElement"]},"main":{"description":"This is the slot for main content","displayName":"main slot","implicitBusyContext":true,"preferredContent":["DynamicTableElement","ListViewElement","TableElement"]}},"extension":{"catalog":{"category":"Redwood Page Templates","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Item%20Overview%20Page%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectraitemoverviewpage.html","coverImage":"extension/catalog/images/ico-item-overview-page-48.svg"},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/item-overview-page/item-overview-page-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-item-overview-page-container"><div class="oj-sp-item-overview-page-header-section"><oj-sp-header-navigation :id="[[uid+\'_h\']]"content-expanded="[[!isLargeScreen() &amp;&amp; $properties.overviewExpanded]]"display-options="[[displayOptions]]"translations="[[translations]]"next-step="[[nextItem]]"previous-step="[[previousItem]]"display-mode="[[$properties.displayMode]]"on-sp-content-collapse="[[ overviewCollapseHandler ]]"></oj-sp-header-navigation></div><div id="item-overview-page-content-wrapper"class="oj-flex"><div id="item-overview-slot-wrapper"class="oj-flex-item oj-lg-margin-6x-end oj-sp-item-overview-page-overview-section"><div class="oj-sp-item-overview-page-overview-fill"></div><div data-otel-hero="oj-sp-item-overview-page.overview"class="oj-sp-item-overview-page-overview-slot-sticky"data-oj-context=""><oj-bind-slot name="overview"></oj-bind-slot><oj-bind-if test="[[ !isLargeScreen() &amp;&amp; !$properties.overviewExpanded ]]"><div :class="[[{\n            \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n            \'oj-bg-neutral-0\': background() === \'light\',\n            \'oj-sp-item-overview-page-main-strip-background\': true\n          }]]"><div class="oj-sp-item-overview-page-main-strip"></div></div></oj-bind-if></div></div><oj-bind-if test="[[ isLargeScreen() || !$properties.overviewExpanded ]]"><div id="main-slot-wrapper"class="oj-flex-item oj-sp-item-overview-page-main-slot-width"><div class="oj-sp-item-overview-page-strip-container"><oj-bind-if test="[[ isLargeScreen() ]]"><div :id="[[ uid + \'_mainContent\' ]]"data-oj-context=""class="oj-sp-header-container":class="[[{\n              \'oj-color-invert oj-sp-color-invert-bg\': background() === \'mixed\',\n              \'oj-bg-neutral-0\': background() === \'light\',\n              \'oj-sp-item-overview-page-main-strip-sticky\': true\n            }]]"><div class="oj-sp-item-overview-page-main-strip"></div></div></oj-bind-if></div><div data-otel-hero="oj-sp-item-overview-page.main"class="oj-sp-item-overview-page-main-section"data-oj-context=""><oj-bind-slot name="main"></oj-bind-slot></div></div></oj-bind-if></div></div></body></html>'})),define("oj-sp/item-overview-page/item-overview-page-viewModel",["require","exports","knockout","oj-sp/common/EventDispatcher","oj-sp/common/PreviousNextIterator","oj-sp/common/headerCommonAPI","oj-sp/common/positionUtility","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/header-navigation/loader","ojs/ojknockout"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;class p{constructor(e){this.prevScrollDirection=null,this.overviewCollapseHandler=e=>{e.stopPropagation(),o.EventDispatcher.dispatch("spOverviewCollapse",this.composite,void 0)},this.updatePositionUtilitySubscriptions=()=>{this.unregisterComponents(),this.registerPositionListeners()},this.registerPositionListeners=()=>{const e=this.getContainer(),t=this.getHeaderContainer(),i=this.composite.querySelector(".oj-sp-item-overview-page-overview-section"),o=this.composite.querySelector(".oj-sp-item-overview-page-strip-container"),s=this.composite.querySelector(".oj-sp-item-overview-page-overview-slot-sticky");let a=0,r=0,l=0,d=!0,c=!0,p=!0;const u={componentName:this.uniqueComponentName+"_header",component:t,offsetCalculationSubscription:{offsetOptions:{position:"top",level:n.PositionUtility.LEVEL_MAP.header},onOffsetChange:i=>{a=i.top,d&&(t.style.top=a+"px"),e.style.setProperty("--oj-sp-item-overview-page-header-height",t.getBoundingClientRect().height+"px")}},stickinessSubscription:{onStickinessChange:i=>{this.canStick(i.isSticky),(i.isSticky||this.properties.overviewExpanded)&&(t.style.position="sticky"),this.setCssTopVarValue();const o=i.isSticky?t.getBoundingClientRect().height:-t.getBoundingClientRect().height,a=Math.min(window.innerHeight-s.getBoundingClientRect().height,o);e.style.setProperty("--oj-sp-item-overview-page-overview-slot-sticky-top",a+"px")}},scrollDirectionSubscription:{onScrollDirectionChange:e=>{e.scrollDirection!==this.prevScrollDirection&&(this.prevScrollDirection=e.scrollDirection,this.canStick()&&("DOWN"===e.scrollDirection?t.style.top=this.isLargeScreen()||this.properties.overviewExpanded?a+"px":`-${t.getBoundingClientRect().height}px`:t.style.top=a+"px"))}},scrollSubscription:{onScrollChange:e=>{d=!1,this.properties.overviewExpanded&&this.canStick()?e.isElementVisible?t.style.top=a+"px":t.style.top=`-${t.getBoundingClientRect().height}px`:e.isElementVisible||this.isLargeScreen()?!e.isElementVisible&&this.isLargeScreen()&&(t.style.top=`-${t.getBoundingClientRect().height+o.getBoundingClientRect().height}px`):t.style.top=`-${t.getBoundingClientRect().height+i.getBoundingClientRect().height}px`}}},h={componentName:this.uniqueComponentName+"_itemOverview",component:i,offsetCalculationSubscription:{offsetOptions:{position:"top",isStandaloneComponent:!!this.isLargeScreen(),level:n.PositionUtility.LEVEL_MAP.overview},onOffsetChange:e=>{r=e.top,c&&(i.style.top=r+"px")}},stickinessSubscription:{stickinessOptions:{isStandaloneComponent:!!this.isLargeScreen()},onStickinessChange:o=>{this.canStick(o.isSticky),o.isSticky&&(i.style.position="sticky",e.style.setProperty("--oj-sp-item-overview-page-header-height",t.getBoundingClientRect().height+"px")),this.isLargeScreen()&&!o.isSticky&&e.style.setProperty("--oj-sp-item-overview-page-header-height","0")}},scrollDirectionSubscription:{onScrollDirectionChange:e=>{!this.isLargeScreen()&&this.canStick()&&("DOWN"===e.scrollDirection?(i.style.top="0",this.setCssTopVarValue(!0)):(i.style.top=t.getBoundingClientRect().height+"px",this.setCssTopVarValue()))}},scrollSubscription:{onScrollChange:e=>{c=!1,e.isElementVisible||(i.style.top=`-${i.getBoundingClientRect().height}px`)}}},m={componentName:this.uniqueComponentName+"_strip",component:o,offsetCalculationSubscription:{offsetOptions:{position:"top",level:n.PositionUtility.LEVEL_MAP.overview},onOffsetChange:e=>{l=e.top,p&&(o.style.top=l+"px")}},stickinessSubscription:{onStickinessChange:e=>{this.canStick(e.isSticky),e.isSticky&&(o.style.position="sticky")}},scrollDirectionSubscription:{onScrollDirectionChange:e=>{this.isLargeScreen()&&this.canStick()&&"DOWN"===e.scrollDirection&&(o.style.top=t.getBoundingClientRect().height+"px")}},scrollSubscription:{onScrollChange:e=>{p=!1,e.isElementVisible?o.style.top=t.getBoundingClientRect().height+"px":o.style.top=`-${o.getBoundingClientRect().height}px`}}};t&&!n.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_header")&&n.PositionUtility.subscribe(u),!i||this.isLargeScreen()||this.properties.overviewExpanded||n.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_itemOverview")||n.PositionUtility.subscribe(h),o&&this.isLargeScreen()&&!n.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_strip")&&n.PositionUtility.subscribe(m)},this.setCssTopVarValue=(e=!1)=>{var t;const i=this.composite.querySelector(".oj-sp-item-overview-page-main-section"),o=this.getHeaderContainer().getBoundingClientRect(),s=this.composite.querySelector(".oj-sp-item-overview-page-overview-section").getBoundingClientRect(),a=null===(t=this.composite.querySelector(".oj-sp-item-overview-page-strip-container"))||void 0===t?void 0:t.getBoundingClientRect();i&&(this.isLargeScreen()&&!this.properties.overviewExpanded?i.style.setProperty("--oj-sp-sticky-content-top",(this.canStick()?o.height+a.height:0)+"px"):e?i.style.setProperty("--oj-sp-sticky-content-top",(this.canStick()?s.height:0)+"px"):i.style.setProperty("--oj-sp-sticky-content-top",(this.canStick()?o.height+s.height:0)+"px"))},this.isLargeScreen=()=>!(c.compare(this.screenRange(),c.SCREEN_RANGE.MD)<=0),this.initCssVariables=()=>{const e=this.getContainer(),t=this.composite.querySelector(".oj-sp-item-overview-page-header-section"),i=this.composite.querySelector(".oj-sp-item-overview-page-overview-slot-sticky");e&&t&&r.getContext(e).getBusyContext().whenReady().then(()=>{var o,s;const a=null===(o=t.getBoundingClientRect())||void 0===o?void 0:o.height,n=null===(s=i.getBoundingClientRect())||void 0===s?void 0:s.height,r=Math.min(window.innerHeight-n,this.canStick()?a:-a);e.style.setProperty("--oj-sp-item-overview-page-overview-slot-sticky-top",r+"px"),e.style.setProperty("--oj-sp-item-overview-page-header-height",a+"px")})},this.setTranslations=e=>{this.translations({}),this.translations(Object.assign({},e)),Object.prototype.hasOwnProperty.call(this.translations(),p.PROPERTY_OVERVIEWCOLLAPSE)&&(this.translations()[p.PROPERTY_CONTENTEXPANDED]=this.translations()[p.PROPERTY_OVERVIEWCOLLAPSE],delete this.translations()[p.PROPERTY_OVERVIEWCOLLAPSE])},this.setHeaderBackgroundMode=async()=>{const e=await(0,a.evaluateHeaderBackgroundMode)(this.composite,this.properties.displayMode);this.background(e)},this.setHeaderSplitBackground=()=>{(0,a.evaluateHeaderSplitBackground)(this.composite,this.getHeaderContainer())};const t=r.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.uniqueComponentName=this.uid+"_item_overview_page",this.canStick=i.observable(!0),this.properties=e.properties,this.screenRange=d.createScreenRangeObservable(),this.previousNextIterator=void 0,this.nextItem=i.computed(()=>this.properties.nextItem?Object.assign({},this.properties.nextItem):void 0),this.previousItem=i.computed(()=>this.properties.previousItem?Object.assign({},this.properties.previousItem):void 0),this.displayOptions=i.computed(()=>this.properties.displayOptions?Object.assign({},this.properties.displayOptions):void 0),this.translations=i.observable({}),this.setTranslations(this.properties.translations),this.background=i.observable((0,a.getInitialMode)(this.properties.displayMode)),this.isHeaderInitialized=!1,this.busyResolve()}activated(e){l.log(`%c CCA ${this.uid} activated`,p.LOGGER_CSS)}connected(e){l.log(`%c CCA ${this.uid} connected`,p.LOGGER_CSS),this.screenRange.subscribe(e=>{window.requestAnimationFrame(this.updatePositionUtilitySubscriptions)}),this.registerPositionListeners()}bindingsApplied(e){this.isHeaderInitialized||(this.setHeaderBackgroundMode(),this.setHeaderSplitBackground(),this.initCssVariables(),this.isHeaderInitialized=!0),l.log(`%c CCA ${this.uid} bindingsApplied`,p.LOGGER_CSS)}propertyChanged(e){l.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,p.LOGGER_CSS),"overviewExpanded"===e.property&&this.updatePositionUtilitySubscriptions(),"translations"===e.property&&e.value&&this.setTranslations(e.value)}disconnected(e){l.log(`%c CCA ${this.uid} disconnected`,"background: #222; color: #bada55"),this.unregisterComponents()}async getPreviousNextItems(e,t,i){return e&&t?(this.previousNextIterator||(this.previousNextIterator=new s.PreviousNextIterator(e,i)),this.previousNextIterator.getPreviousNextItems(t)):{previousItem:null,nextItem:null}}getContainer(){return this.composite.querySelector(".oj-sp-item-overview-page-container")}unregisterComponents(){n.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_header")&&n.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_header"}),n.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_itemOverview")&&n.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_itemOverview"}),n.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_strip")&&n.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_strip"})}getHeaderContainer(){return this.composite.querySelector(".oj-sp-item-overview-page-header-section")}}p.PROPERTY_CONTENTEXPANDED="contentExpanded",p.PROPERTY_OVERVIEWCOLLAPSE="overviewCollapse",p.LOGGER_CSS="background: #222; color: #bada55",t.ViewModel=p})),define("css!oj-sp/item-overview-page/item-overview-page-styles",[],(function(){})),define("oj-sp/item-overview-page/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./item-overview-page-view.html","./item-overview-page-viewModel","css!./item-overview-page-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-item-overview-page",{metadata:JSON.parse(o),view:s,viewModel:a.ViewModel})})),define("text!oj-sp/item-overview/component.json",[],(function(){return'{"name":"item-overview","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"implements":["SpItemOverviewElement"],"type":"composite","subcomponentType":"patternImpl","displayName":"Item Overview","description":"Item Overview is a left hand panel which provides overview or auxiliary information on the current object or task.","properties":{"itemTitle":{"displayName":"Title","description":"A heading that indicates the focus of the overview, such as the name of a person or product.","translatable":true,"type":"string","required":true},"itemSubtitle":{"displayName":"Subtitle","description":"Optional secondary heading related to the item.","translatable":true,"type":"string"},"isFavorite":{"displayName":"Favorite selected","description":"True if the favorite icon show should selected, false otherwise. Ignore if not using the built in favorite action.","type":"boolean","writeback":true},"badge":{"displayName":"Badge","description":"Optional status information in the toolbar region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"A short string indicating a state such as Delayed or On Vacation.","translatable":true,"type":"string"},"status":{"displayName":"Status","description":"Status of the badge.","type":"string","status":[{"target":"propertyValue","type":"deprecated","since":"2104.0.0","description":"Enum value \'default\' is no longer supported, and will be removed in  a future release. Use \'neutral\' instead.","value":["default"]}],"value":"neutral","enumValues":["default","neutral","danger","warning","success","info"],"propertyEditorValues":{"default":{"description":"Default status.","displayName":"Default"},"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}},"style":{"displayName":"Style","description":"Style of the badge.","type":"string","value":"subtle","enumValues":["strong","subtle"],"propertyEditorValues":{"strong":{"description":"Strong style","displayName":"Strong"},"subtle":{"description":"Subtle style","displayName":"Subtle"}}}}},"avatar":{"displayName":"Avatar","description":"Optional image of a person displayed in header region.  Cannot be used at the same time as photo.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image source","description":"Path to where the image is stored."},"initials":{"type":"string","displayName":"Initials","description":"The initials of the person\'s name."}}},"photo":{"displayName":"Photo","description":"Optional image displayed in header region. Cannot be used at the same time as avatar.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image source","description":"Path to where the image is stored."}}},"displayOptions":{"displayName":"Display options","description":"Configure display options of item overview.","type":"object|null","properties":{"edit":{"type":"string","displayName":"Edit action state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Edit is visible and enabled."},"off":{"displayName":"Off","description":"Edit is not visible."},"disabled":{"displayName":"Disabled","description":"Edit is visible and disabled."}}},"favorite":{"type":"string","displayName":"Favorite action state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Favorite is visible and enabled."},"off":{"displayName":"Off","description":"Favorite is not visible."},"disabled":{"displayName":"Disabled","description":"Favorite is visible and disabled."}}},"share":{"type":"string","displayName":"Share action state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Share is visible and enabled."},"off":{"displayName":"Off","description":"Share is not visible."},"disabled":{"displayName":"Disabled","description":"Share is visible and disabled."}}}}},"expandedState":{"displayName":"Expanded state","description":"Item Overview can display expanded, collapsed, or auto which will be collapsed in sm/md screens and expanded otherwise.","type":"string","value":"expanded","enumValues":["auto","expanded","collapsed"],"propertyEditorValues":{"auto":{"displayName":"Auto","description":"Collapsed in sm/md screens and expanded otherwise."},"expanded":{"displayName":"Expanded","description":"Item Overview will display in full size."},"collapsed":{"displayName":"Collapsed","description":"Item Overview will display in a collapsed mode."}}},"secondaryActions":{"displayName":"Actions","description":"Specifies secondary actions in the toolbar.","type":"Array<object>","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label.","translatable":true},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}}}}},"methods":{},"events":{"spEdit":{"displayName":"Edit event","description":"Dispatched when edit action is triggered.","bubbles":true,"cancelable":false},"spShare":{"displayName":"Share event","description":"Dispatched when share action is triggered.","bubbles":true,"cancelable":false},"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when one of the secondary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spExpand":{"displayName":"Expand event","description":"Dispatched when user clicks on the collapsed item overview.","bubbles":true,"cancelable":false}},"slots":{"body":{"description":"Slot for adding a dynamic form to the item overview body.","displayName":"Body slot","minItems":1,"maxItems":1,"preferredContent":["DynamicFormElement","FormLayoutElement","SpEmptyStateElement"]},"footer":{"description":"Slot for adding supplementary or related information to the item overview footer.","displayName":"Footer slot"}},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-item-overview-48.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Item%20Overview&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraitemoverview.html"},"vbdt":{"componentPalette":{"visibility":"never"}}},"icon":{"iconPath":"extension/catalog/images/ico-item-overview-48.svg"}}'})),define("text!oj-sp/item-overview/item-overview-view.html",[],(function(){return'<html><head></head><body><div data-oj-context=""><oj-bind-if test="[[!$properties.expandedState || $properties.expandedState === \'expanded\' || ($properties.expandedState === \'auto\' &amp;&amp; isLargeScreen())]]"><div :id="[[uid +\'_container1\']]"class="oj-sp-item-overview-container"role="group":aria-labelledby="[[uid +\'_title1\']]"><div :id="[[uid +\'_expander\']]"class="oj-sp-item-overview-expander"></div><div :id="[[uid +\'_header1\']]"class="oj-sp-item-overview-header"><oj-bind-if test="[[displayBadge() || allActions().length > 0]]"><div class="oj-sp-item-overview-toolbar-container oj-sm-padding-2x-top oj-md-padding-6x-top oj-sm-padding-8x-start oj-sm-padding-5x-end oj-sm-flex-wrap-nowrap oj-flex"><div class="oj-sm-flex-wrap-nowrap oj-flex oj-flex-item"><oj-bind-if test="[[displayBadge()]]"><div class="oj-sm-margin-2x-top"><span :class="[[badgeClasses() + \' oj-sp-item-overview-ellipsis oj-sp-item-overview-badge\']]":title="[[$properties.badge.text]]"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></span></div></oj-bind-if></div><div class="oj-sp-item-overview-toolbar-end oj-flex-item oj-sm-flex-initial oj-sm-flex-wrap-nowrap"><oj-bind-if test="[[allActions().length > 0]]"><oj-toolbar :aria-label="[[res.actions]]"class="oj-flex-item oj-sp-item-overview-toolbar oj-sm-flex-wrap-nowrap"chroming="borderless"><oj-bind-if test="[[allActions().length === 1]]"><oj-bind-if test="[[favoriteVisible()]]"><oj-button display="icons":id="[[uid + \'_favorite\']]"disabled="[[favoriteDisabled]]"on-oj-action="[[favoriteActionHandler]]"><oj-bind-text value="[[favoriteSelected() ? res.unfavorite : res.favorite]]"></oj-bind-text><span slot="startIcon"><oj-bind-if test="[[favoriteSelected()]]"><span class="oj-ux-ico-star-full"></span></oj-bind-if><oj-bind-if test="[[!favoriteSelected()]]"><span class="oj-ux-ico-star"></span></oj-bind-if></span></oj-button></oj-bind-if><oj-bind-if test="[[!favoriteVisible()]]"><oj-button display="icons":id="[[uid + \'_\' + allActions()[0].id]]":disabled="[[allActions()[0].display === \'disabled\']]"on-oj-action="[[buttonActionHandler]]"><div slot="startIcon":class="[[allActionsIconClass]]"></div><oj-bind-text value="[[allActions()[0].label]]"></oj-bind-text></oj-button></oj-bind-if></oj-bind-if><oj-bind-if test="[[allActions().length > 1]]"><oj-menu-button :id="[[uid + \'_more1\']]"chroming="borderless"display="icons"class="oj-button-sm":aria-label="[[res.moreActions]]":title="[[res.moreActions]]"><oj-menu :id="[[uid + \'_more-actions-menu\']]"slot="menu"on-oj-menu-action="[[menuActionHandler]]":aria-label="[[res.actions]]"><oj-defer><oj-bind-for-each data="[[allActions]]"><template><oj-option :id="[[uid + \'_\' + $current.data.id]]"value="[[$current.data.id]]":disabled="[[$current.data.display === \'disabled\']]"><span :class="[[$current.data.icon]]"slot="startIcon"></span><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-defer></oj-menu></oj-menu-button></oj-bind-if></oj-toolbar></oj-bind-if></div></div></oj-bind-if><div :id="[[uid +\'_photo_avatar1\']]"class="oj-sp-item-overview-photo-avatar-container"><oj-bind-if test="[[displayAvatar()]]"><div class="oj-sm-padding-8x-start oj-sp-item-overview-avatar-container"><oj-avatar size="xl"class="oj-sp-item-overview-avatar"initials="[[$properties.avatar.initials]]"src="[[$properties.avatar.src]]"></oj-avatar></div></oj-bind-if><oj-bind-if test="[[displayPhoto() &amp;&amp; ! displayAvatar()]]"><div class="oj-sm-padding-8x-start"><img :src="[[$properties.photo.src]]"class="oj-sp-item-overview-image4x3":alt="[[$properties.itemTitle]]"></div></oj-bind-if><div :id="[[uid +\'_title1\']]":class="oj-sp-item-overview-title-container oj-sm-margin-2x-top oj-sm-padding-8x-horizontal"><p class="oj-sp-item-overview-title oj-typography-title-4 oj-text-color-primary oj-line-clamp-2":title="[[$properties.itemTitle]]"><oj-bind-text value="[[$properties.itemTitle]]"></oj-bind-text></p><oj-bind-if test="[[$properties.itemSubtitle]]"><p class="oj-sp-item-overview-subtitle oj-typography-body-md oj-text-color-primary oj-line-clamp-2":title="[[$properties.itemSubtitle]]"><oj-bind-text value="[[$properties.itemSubtitle]]"></oj-bind-text></p></oj-bind-if></div></div><div class="oj-sp-item-overview-devider"><oj-bind-if test="[[scaledDown()]]"><hr></oj-bind-if></div></div><div class="oj-sp-item-overview-detail-container"><div :id="[[uid +\'_body1\']]"class="oj-sm-padding-8x-horizontal"><oj-bind-slot name="body"></oj-bind-slot></div><div :id="[[uid +\'_footer1\']]"class="oj-sm-padding-8x-horizontal oj-sm-margin-3x-top oj-sm-margin-8x-bottom"><oj-bind-slot name="footer"></oj-bind-slot></div></div></div></oj-bind-if><oj-bind-if test="[[$properties.expandedState === \'collapsed\'  || ($properties.expandedState === \'auto\' &amp;&amp; !isLargeScreen())]]"><div :id="[[uid +\'_container1\']]"class="oj-sp-item-overview-container-compact"role="group":aria-labelledby="[[uid +\'_title1\']]"><div class="oj-flex oj-sm-flex-wrap-nowrap"><div class="oj-flex-item oj-sp-item-overview-shrink"on-click="[[expandActionHandler]]"><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sm-padding-2x-end oj-md-padding-6x-start oj-sm-padding-4x-start"><oj-bind-if test="[[displayAvatar()]]"><div class="oj-flex-item oj-sm-flex-initial oj-sm-margin-4x-top"><oj-avatar size="md"initials="[[$properties.avatar.initials]]"src="[[$properties.avatar.src]]"></oj-avatar></div></oj-bind-if><oj-bind-if test="[[displayPhoto() &amp;&amp; ! displayAvatar()]]"><div class="oj-flex-item oj-sm-flex-initial oj-sm-margin-4x-top"><img :src="[[$properties.photo.src]]"class="oj-sp-item-overview-image4x3-compact":alt="[[$properties.itemTitle]]"></div></oj-bind-if><div class="oj-flex-item oj-sp-item-overview-ellipsis oj-sm-margin-3x-top"><oj-bind-if test="[[displayBadge()]]"><div :class="[[badgeClasses() + \' oj-badge-sm oj-sm-margin-2x-horizontal oj-sp-item-overview-ellipsis oj-sp-item-overview-badge-compact\']]":title="[[$properties.badge.text]]"><oj-bind-text value="[[$properties.badge.text]]"></oj-bind-text></div></oj-bind-if><div :id="[[uid +\'_title1\']]"class="oj-typography-heading-sm oj-text-color-primary oj-sp-item-overview-ellipsis oj-sm-padding-1x-vertical oj-sm-padding-2x-horizontal"><a href="#"class="oj-link-standalone oj-link-subtle-primary"role="button"aria-expanded="false":title="[[$properties.itemTitle]]"><oj-bind-text value="[[$properties.itemTitle]]"></oj-bind-text></a></div><oj-bind-if test="[[$properties.itemSubtitle]]"><div :id="[[uid +\'_subtitle1\']]"class="oj-typography-body-md oj-text-color-primary oj-sp-item-overview-ellipsis oj-sm-padding-2x-horizontal":title="[[$properties.itemSubtitle]]"><oj-bind-text value="[[$properties.itemSubtitle]]"></oj-bind-text></div></oj-bind-if></div></div></div><div class="oj-flex-item oj-sm-flex-initial oj-flex oj-sm-flex-direction-column oj-sm-align-items-center oj-sm-margin-4x-top oj-md-padding-6x-end oj-sm-padding-4x-end"><oj-bind-if test="[[ allActions().length > 0 ]]"><oj-toolbar :aria-label="[[res.actions]]"class="oj-flex-item oj-sp-item-overview-toolbar oj-sm-flex-wrap-nowrap"chroming="borderless"><oj-bind-if test="[[allActions().length === 1]]"><oj-bind-if test="[[favoriteVisible()]]"><oj-button display="icons":id="[[uid + \'_favorite\']]"disabled="[[favoriteDisabled]]"class="oj-button-sm"on-oj-action="[[favoriteActionHandler]]"><oj-bind-text value="[[favoriteSelected() ? res.unfavorite : res.favorite]]"></oj-bind-text><span slot="startIcon"><oj-bind-if test="[[favoriteSelected()]]"><span class="oj-ux-ico-star-full"></span></oj-bind-if><oj-bind-if test="[[!favoriteSelected()]]"><span class="oj-ux-ico-star"></span></oj-bind-if></span></oj-button></oj-bind-if><oj-bind-if test="[[!favoriteVisible()]]"><oj-button display="icons":id="[[uid + \'_\' + allActions()[0].id]]":disabled="[[allActions()[0].display === \'disabled\']]"class="oj-button-sm"on-oj-action="[[buttonActionHandler]]"><div slot="startIcon":class="[[allActionsIconClass]]"></div><oj-bind-text value="[[allActions()[0].label]]"></oj-bind-text></oj-button></oj-bind-if></oj-bind-if><oj-bind-if test="[[allActions().length > 1]]"><oj-menu-button :id="[[uid + \'_more1\']]"chroming="borderless"display="icons"class="oj-button-sm":aria-label="[[res.moreActions]]":title="[[res.moreActions]]"><oj-menu :id="[[uid + \'_more-actions-menu\']]"slot="menu"on-oj-menu-action="[[menuActionHandler]]":aria-label="[[res.actions]]"><oj-defer><oj-bind-for-each data="[[allActions]]"><template><oj-option :id="[[uid + \'_\' + $current.data.id]]"value="[[$current.data.id]]":disabled="[[$current.data.display === \'disabled\']]"><span :class="[[$current.data.icon]]"slot="startIcon"></span><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-defer></oj-menu></oj-menu-button></oj-bind-if></oj-toolbar></oj-bind-if></div></div></div></oj-bind-if></div></body></html>'})),define("oj-sp/item-overview/item-overview-viewModel",["require","exports","oj-sp/common/badge","oj-sp/common/EventDispatcher","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","oj-sp/common/positionUtility","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojavatar","ojs/ojknockout","ojs/ojbutton","ojs/ojoption","ojs/ojdefer","ojs/ojmenu","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemOverviewViewModel=void 0;const p=".oj-sp-item-overview-container",u="--oj-sp-item-overview-header-scale-ratio";t.ItemOverviewViewModel=class{constructor(e){this.favoriteActionHandler=e=>{this.properties.isFavorite=!this.properties.isFavorite},this.expandActionHandler=e=>{e.preventDefault(),o.EventDispatcher.dispatch(o.EventDispatcher.EXPAND_ACTION_EVENT_NAME,this.composite,void 0)},this.menuActionHandler=e=>{const t=e.detail.selectedValue;this.allActionHandler(t)},this.buttonActionHandler=e=>{const t=e.target.id.substring(this.uid.length+1);this.allActionHandler(t)},this.allActionHandler=e=>{if("edit"===e)o.EventDispatcher.dispatch(o.EventDispatcher.EDIT_ACTION_EVENT_NAME,this.composite,void 0);else if("share"===e)o.EventDispatcher.dispatch(o.EventDispatcher.SHARE_ACTION_EVENT_NAME,this.composite,void 0);else if("favorite"===e)this.properties.isFavorite=!this.properties.isFavorite;else{const t={actionId:e};o.EventDispatcher.dispatch(o.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,t)}},this.setBadgeBackground=e=>{let t="oj-badge";if(e){switch(e.status){case i.BadgeStatus.danger:t+=" oj-badge-danger";break;case i.BadgeStatus.warning:t+=" oj-badge-warning";break;case i.BadgeStatus.success:t+=" oj-badge-success";break;case i.BadgeStatus.info:t+=" oj-badge-info"}e.style&&e.style===i.BadgeStyle.strong||(t+=" oj-badge-subtle"),this.badgeClasses(t)}},this.setAllActions=e=>{const t=[],i=this.properties.displayOptions;if(i){if("on"===i.edit||"disabled"===i.edit){const e={display:i.edit,icon:"oj-ux-ico-edit",id:"edit",label:this.res.edit};t.push(e)}if("on"===i.favorite||"disabled"===i.favorite){const e={display:i.favorite,icon:this.favoriteSelected()?"oj-ux-ico-star-full":"oj-ux-ico-star",id:"favorite",label:this.favoriteSelected()?this.res.unfavorite:this.res.favorite};t.push(e)}if("on"===i.share||"disabled"===i.share){const e={display:i.share,icon:"oj-ux-ico-share",id:"share",label:this.res.share};t.push(e)}}if(e)for(let i=0;i<e.length;i++){const o=e[i];o&&(o.id&&o.icon&&o.label?void 0!==o.display&&"off"===o.display||t.push(o):r.error("Invalid secondary action - id, icon and label are all required - id: "+o.id+" icon: "+o.icon+" label: "+o.label))}1===t.length&&this.allActionsIconClass(this.calcOverflowIconClassObject(t[0],this.allActionsIconClass())),this.allActions(t),this.refreshToolbar()},this.calcOverflowIconClassObject=(e,t)=>{const i=e.icon,o={};for(const e in t)e!==i&&(o[e]=!1);return o[i]=!0,o},this.isLargeScreen=()=>!(c.compare(this.screenRange(),c.SCREEN_RANGE.MD)<=0),this.calcDisplayAvatar=()=>{const e=this.properties.avatar;return!(!e||!e.src&&!e.initials)},this.calcDisplayPhoto=()=>{const e=this.properties.photo;return!(!e||!e.src)},this.calcDisplayBadge=()=>{const e=this.properties.badge;return!(!e||!e.text)},this.processDisplayOptions=e=>{e?(this.favoriteVisible(this.isActionVisible(e.favorite)),this.favoriteDisabled(this.isActionDisabled(e.favorite))):this.favoriteVisible(!1),this.refreshToolbar()},this.isActionVisible=e=>!(!e||"off"===e)&&("on"===e||"disabled"===e||(r.warn("Invalid display option state: "+e),!1)),this.isActionDisabled=e=>!(!e||"off"===e||"on"===e)&&("disabled"===e||(r.warn("Invalid display option state: "+e),!1)),this.refreshToolbar=async()=>{const e=this.composite.querySelector(p);if(e){await n.getContext(e).getBusyContext().whenReady();const t=this.composite.querySelector(".oj-sp-item-overview-toolbar");t&&t.refresh()}},this.initHeaderInfo=async()=>{let e=this.composite.querySelector(p);e||(e=this.composite.querySelector(".oj-sp-item-overview-container-compact")),e&&(await n.getContext(e).getBusyContext().whenReady(),this.headerTop=c.compare(this.screenRange(),c.SCREEN_RANGE.SM)<=0?52:68)},this.updatePositionUtilitySubscriptions=()=>{this.unregisterComponents(),this.registerPositionListeners()},this.registerPositionListeners=()=>{const e=this.composite.querySelector(".oj-sp-item-overview-header");let t=0,i=!0;const o={componentName:this.uniqueComponentName+"_header_overview",component:e,offsetCalculationSubscription:{offsetOptions:{position:"top",isStandaloneComponent:!!this.isLargeScreen(),level:l.PositionUtility.LEVEL_MAP.overview},onOffsetChange:o=>{t=o.top,i&&(e.style.top=t+"px")}},stickinessSubscription:{stickinessOptions:{isStandaloneComponent:!!this.isLargeScreen()},onStickinessChange:i=>{this.canStick(i.isSticky),i.isSticky&&(e.style.position="sticky",e.style.top=t+"px")}},scrollSubscription:{onScrollChange:o=>{i=!1,"expanded"===this.properties.expandedState?o.isElementVisible?e.style.top=i+"px":e.style.top=`-${e.getBoundingClientRect().height+68}px`:"auto"===this.properties.expandedState&&(!o.isElementVisible&&this.canStick()?e.style.top=`-${e.getBoundingClientRect().height+68}px`:e.style.top=t+"px")}}};(e&&this.isLargeScreen()&&!l.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_header_overview")||e&&!this.isLargeScreen()&&"expanded"===this.properties.expandedState&&!l.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_header_overview"))&&l.PositionUtility.subscribe(o),this.checkDividerDisplay()},this.checkDividerDisplay=()=>{const e=this.composite.querySelector(".oj-sp-item-overview-header"),t=this.composite.querySelector(".oj-sp-item-overview-detail-container");if(e&&t){const i=e.getBoundingClientRect(),o=t.getBoundingClientRect();i.top+i.height>o.top+1?this.scaledDown(!0):this.scaledDown(!1)}},this.calcScaleHeaderRatio=()=>{const e=this.composite.querySelector(p);if(e){if(this.composite.querySelector(".oj-sp-item-overview-detail-container")){const t=e.getBoundingClientRect().top;if(t<this.headerTop){const i=88,o=this.headerTop-t,s=Math.max(i-o,0)/i;e.style.setProperty(u,""+s)}else e.style.setProperty(u,"1")}else e.style.setProperty(u,"1");this.checkDividerDisplay()}},this.properties=e.properties;const t=n.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.badgeClasses=s.observable(""),this.photoClasses=s.observable(""),this.allActions=s.observableArray(),this.allActionsIconClass=s.observable({}),this.composite=e.element,this.uid=e.uniqueId,this.res=Object.assign(Object.assign({},a),this.properties.translations),this.uniqueComponentName=this.uid+"_item_overview",this.canStick=s.observable(!0),this.screenRange=d.createScreenRangeObservable(),this.displayBadge=s.computed(this.calcDisplayBadge),this.displayAvatar=s.computed(this.calcDisplayAvatar),this.displayPhoto=s.computed(this.calcDisplayPhoto),this.favoriteVisible=s.observable(!1),this.favoriteDisabled=s.observable(!1),this.scaledDown=s.observable(!1),this.headerTop=0,this.properties&&(this.setBadgeBackground(this.properties.badge),this.favoriteSelected=s.observable(this.properties.isFavorite),this.processDisplayOptions(this.properties.displayOptions),this.setAllActions(this.properties.secondaryActions)),this.busyResolve()}activated(e){r.log(`CCA ${this.uid} activated`)}connected(e){r.log(`CCA ${this.uid} connected`),window.addEventListener("scroll",this.calcScaleHeaderRatio),this.screenRange.subscribe(e=>{this.updatePositionUtilitySubscriptions()}),this.registerPositionListeners()}bindingsApplied(e){r.log(`CCA ${this.uid} bindingsApplied`),this.initHeaderInfo()}propertyChanged(e){r.log(`CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`),"expandedState"===e.property&&this.updatePositionUtilitySubscriptions(),"badge"===e.property&&this.setBadgeBackground(e.value),"secondaryActions"===e.property&&this.setAllActions(e.value),"displayOptions"===e.property&&e.value&&(this.processDisplayOptions(e.value),this.setAllActions(this.properties.secondaryActions)),"isFavorite"===e.property&&(this.favoriteSelected(e.value),this.setAllActions(this.properties.secondaryActions))}disconnected(e){r.log(`CCA ${this.uid} disconnectd`),window.removeEventListener("scroll",this.calcScaleHeaderRatio),this.unregisterComponents()}unregisterComponents(){l.PositionUtility.isComponentSubscribed(this.uniqueComponentName+"_header_overview")&&l.PositionUtility.unsubscribe({componentName:this.uniqueComponentName+"_header_overview"})}}})),define("css!oj-sp/item-overview/item-overview-styles",[],(function(){})),define("oj-sp/item-overview/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./item-overview-view.html","./item-overview-viewModel","css!./item-overview-styles","css!oj-sp/common/common-style.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-item-overview",{metadata:JSON.parse(o),view:s,viewModel:a.ItemOverviewViewModel})})),define("text!oj-sp/list-section/component.json",[],(function(){return'{"pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","name":"list-section","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"List Section","description":"The list section is used to display a group of data in a foldout panel.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0"},"implements":["SpListSectionElement"],"properties":{"sectionTitle":{"displayName":"Title","description":"Title of the section.","propertyGroup":"common","type":"string","translatable":true,"writeback":false,"required":false,"extension":{"vbdt":{"placeholderValue":"Section Title"}}},"displayOptions":{"displayName":"Display Options","description":"Display Options","propertyGroup":"common","type":"object","required":false,"properties":{"title":{"displayName":"Title Display","description":"Title display setting.","type":"string","writeback":false,"value":"shown","enumValues":["shown","hidden"],"propertyEditorValues":{"shown":{"description":"Title is displayed as a header to the section.","displayName":"Shown"},"hidden":{"description":"Title is hidden and only used to identify the list section for accessibility.","displayName":"Hidden"}}}}},"data":{"displayName":"Data","description":"Section data.","propertyGroup":"data","type":"oj.DataProvider","writeback":false,"required":true},"maxItems":{"displayName":"Maximum Items","description":"Maximum number of items to display.","propertyGroup":"data","type":"number","writeback":false,"required":false,"value":25}},"methods":{"getBoundingBox":{"description":"Returns the bounding box information of the list section, including the bounding boxes for each list item.","internalName":"getBoundingBox","params":[],"return":"object"}},"events":{"spShowEmptyState":{"displayName":"Show Empty State Event","description":"Dispatched when the list section requests the empty state to be displayed.","bubbles":true,"cancelable":true,"visible":false,"status":[{"type":"deprecated","since":"2310.0.0","description":"spShowEmptyState event has been deprecated and will be removed shortly."}]}},"slots":{"itemTemplate":{"displayName":"itemTemplate","description":"Template of the section items.","minItems":1,"maxItems":1}},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-foldout-panel.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=List%20Section%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectralistsection.html"},"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true,"condition":{"op":"$and","conditions":[{"name":"no-component-property","property":"data"},{"name":"no-component-property","property":"sectionTitle"}]}}],"pi":{"layouts":{"general":{"customizers":[{"propertyName":"sectionTitle"},{"propertyName":"displayOptions.title","displayName":"Title Display"}]}}}}},"icon":{"iconPath":"extension/catalog/images/ico-foldout-panel.svg"}}'})),define("text!oj-sp/list-section/list-section-view.html",[],(function(){return'<html><head></head><body><div class="oj-flex oj-sp-list-section-main-container"role="group":aria-label="[[ $properties.sectionTitle || \' \' ]]"><oj-bind-if test="[[ displayTitle()  ]]"><div class="oj-sp-list-section-title oj-sm-12 oj-typography-body-sm oj-typography-semi-bold oj-text-color-secondary"><span role="heading"aria-level="3"><oj-bind-text value="[[ $properties.sectionTitle ]]"></oj-bind-text></span><hr></div></oj-bind-if><oj-list-view data="[[$properties.data]]"class="oj-sp-list-section-list-view oj-focus-highlight"scroll-policy-options.max-count="[[ $properties.maxItems ]]"scroll-policy-options.fetch-size="[[ $properties.maxItems ]]":aria-label="[[ ariaLabel ]]"on-oj-before-current-item="[[ handleBeforeCurrentItem ]]"><template slot="noData"><oj-bind-if test="[[ displayTitle()  ]]"><div class="oj-sp-list-section-title oj-sp-list-section-title-within-list oj-sm-12 oj-typography-body-sm oj-typography-semi-bold oj-text-color-secondary"><span role="heading"aria-level="3"><oj-bind-text value="[[ $properties.sectionTitle ]]"></oj-bind-text></span><hr></div></oj-bind-if><div class="oj-sp-list-section-no-data"></div></template><template slot="itemTemplate"><li class="oj-sp-list-section-list-item oj-sm-padding-0 oj-sm-margin-0"aria-readonly="true"><oj-bind-if test="[[ $current.index === 0 &amp;&amp; displayTitle()  ]]"><div class="oj-sp-list-section-title oj-sp-list-section-title-within-list oj-sm-12 oj-typography-body-sm oj-typography-semi-bold oj-text-color-secondary"><span role="heading"aria-level="3"><oj-bind-text value="[[ $properties.sectionTitle ]]"></oj-bind-text></span><hr></div></oj-bind-if><oj-bind-template-slot name="itemTemplate"data="{{ $current }}"></oj-bind-template-slot></li></template></oj-list-view></div></body></html>'})),define("oj-sp/list-section/list-section-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojknockout","ojs/ojdataprovider","ojs/ojlistview"],(function(e,t,i,o,s){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.ListSectionViewModel=void 0,function(e){e.Shown="shown",e.Hidden="hidden"}(a||(a={}));t.ListSectionViewModel=class{constructor(e){this.skipResize=!1,this.handleBeforeCurrentItem=e=>{const{item:t}=e.detail;t&&t.classList.contains("oj-sp-list-section-hidden-item")&&e.preventDefault()};const t=o.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.uid=e.uniqueId,this.composite=e.element,this.properties=e.properties,this.initKeyboardNavigationSupport(),this.initTitle(),this.busyResolve()}getBoundingBox(){const e=this.getListView(),t=this.getTitleElement(),i=this.getListItems(),o=Array.from(i).map(e=>e.getBoundingClientRect());this.isListViewLoading()&&o.push({height:e.offsetHeight,width:e.offsetWidth,x:0,y:t?t.offsetHeight:0});for(let e=0;e<i.length-1;++e){const t=i.item(e).getBoundingClientRect(),s=i.item(e+1).getBoundingClientRect().top-t.top;o[e]&&(o[e].height=s)}return{items:o,titleHeight:t?t.scrollHeight:0,totalHeight:this.composite.scrollHeight,totalWidth:this.composite.scrollWidth}}activated(e){s.log(`list-section ${this.uid} activated`)}connected(e){s.log(`list-section ${this.uid} connected`),this.properties.sectionTitle||this.refreshAriaLabel()}bindingsApplied(e){s.log(`list-section ${this.uid} bindingsApplied`)}propertyChanged(e){s.log(`list-section ${this.uid} propertyChanged`)}disconnected(e){s.log(`list-section ${this.uid} disconnected`)}initKeyboardNavigationSupport(){this.composite.onscroll=e=>{e.target.scrollTo(0,0)}}isPanel(e){const t=e.tagName.toLowerCase();return["oj-sp-foldout-panel","oj-sp-foldout-panel-overflow","oj-sp-foldout-panel-summarizing","oj-sp-dashboard-panel"].includes(t)}initTitle(){const e=this.properties.sectionTitle;this.ariaLabel=i.observable(e),this.displayTitle=i.computed(()=>{var e;const t=(null===(e=this.properties.displayOptions)||void 0===e?void 0:e.title)!==a.Hidden;return this.properties.sectionTitle&&t})}refreshAriaLabel(){let e=this.composite.parentElement;for(;e&&!this.isPanel(e);)e=e.parentElement;e&&this.isPanel(e)&&this.ariaLabel(e.getProperty("panelTitle"))}isListViewLoading(){if(this.composite.classList.contains("__oj-sp-test-list-view-loading"))return!0;const e=this.getListView(),t=this.getListViewNoData(),i=this.getListItems();return e&&!o.getContext(e).getBusyContext().isReady()&&!t&&0===i.length}isEmpty(){return!!this.getListViewNoData()}getListView(){return this.composite.querySelector(".oj-sp-list-section-list-view")}getListViewNoData(){return this.composite.querySelector(".oj-sp-list-section-no-data")}getListItems(){return this.composite.querySelectorAll(".oj-sp-list-section-list-item")}getTitleElement(){return this.composite.querySelector(".oj-sp-list-section-title")}}})),define("css!oj-sp/list-section/list-section-styles",[],(function(){})),define("oj-sp/list-section/bounding-box",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("oj-sp/list-section/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./list-section-view.html","./list-section-viewModel","css!./list-section-styles","./bounding-box"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-list-section",{metadata:JSON.parse(o),view:s,viewModel:a.ListSectionViewModel})})),define("text!oj-sp/message-banner-unsaved-changes/component.json",[],(function(){return'{"name":"message-banner-unsaved-changes","version":"2404.0.0","jetVersion":"^15.0.0","displayName":"Message Banner - Unsaved Changes","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","description":"Allows user to confirm they want to navigate away from unsaved changes","type":"composite","icon":{"iconPath":"extension/images/ico-message-banner-48.svg"},"dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common":"2404.0.0"},"properties":{"visible":{"type":"boolean","displayName":"Display banner message","description":"When set to true it will display banner message","value":"false","writeback":false,"propertyGroup":"common"}},"slots":{},"events":{"ojSpDiscardChanges":{"displayName":"Discard Changes event","description":"Dispatched when Discard Changes action is triggered.","bubbles":false,"cancelable":true,"eventGroup":"common"},"ojSpCancel":{"displayName":"Cancel event","description":"Dispatched when Cancel is clicked in message banner.","bubbles":false,"cancelable":true,"eventGroup":"common"}},"methods":{"show":{"description":"displays unsaved changes banner.","status":[{"type":"deprecated","since":"2101.0.0","description":"Use visible property instead."}]}},"extension":{"catalog":{"category":"Redwood Messages","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Message%20Banner%20Unsaved%20Changes%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectramessagebannerunsavedchanges.html","coverImage":"extension/images/ico-message-banner-48.svg"}}}'})),define("text!oj-sp/message-banner-unsaved-changes/message-banner-unsaved-changes.html",[],(function(){return'<html><head></head><body><div class="oj-sm-margin-8x-horizontal"><oj-message-banner :id="[[uid + \'_bannerunsaved\']]"data="[[messages]]"type="page"detail-template-value="actions"><template slot="actions"data-oj-as="message"><div class="oj-flex-item"><span><oj-bind-text value="[[message.data.detail]]"></oj-bind-text></span></div><div class="oj-flex oj-flex-item oj-sm-flex-items-initial oj-sm-padding-2x-top"><div class="oj-flex-item oj-sm-margin-5x-end"><a href="#":id="[[uid + \'_bannercancel\']]"on-click="[[cancel]]"class="oj-link-standalone oj-link-subtle-primary oj-typography-body-sm oj-typography-semi-bold"><oj-bind-text value="[[message.data.actions[0].title]]"></oj-bind-text></a></div><div class="oj-flex-item oj-sm-margin-5x-end"><a href="#":id="[[uid + \'_bannerdiscard\']]"on-click="[[discardChanges]]"class="oj-link-standalone oj-link-subtle-primary oj-typography-body-sm oj-typography-semi-bold"><oj-bind-text value="[[message.data.actions[1].title]]"></oj-bind-text></a></div></div></template></oj-message-banner></div></body></html>'})),define("oj-sp/message-banner-unsaved-changes/message-banner-unsaved-changes",["require","exports","ojs/ojmutablearraydataprovider","oj-sp/common/EventDispatcher","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojbutton","ojs/ojknockout","ojs/ojmessagebanner"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageUnsavedChangesModel=void 0;t.MessageUnsavedChangesModel=class{constructor(e){this.messagesArray=[],this.connected=e=>{n.info("connected")},this.disconnected=e=>{n.info("disconnected")},this.bindingsApplied=()=>{n.info("bindings applied")},this.show=()=>{let e=this.messages.data.slice();e=[{id:"message1",severity:"warning",closeAffordance:"off",summary:"Discard your changes?",actions:[{title:this.res.cancel,link:"#cancel"},{title:this.res.discard,link:"#discard"}]}],this.messages.data=e},this.removeMessageData=()=>{let e=this.messages.data.slice();e=[],this.messages.data=e},this.cancel=e=>{e.preventDefault();this.getUnsavedChangesBanner()&&this.removeMessageData(),o.EventDispatcher.dispatch(o.EventDispatcher.MESSAGE_UNSAVED_CANCEL_EVENT_NAME,this.element,void 0)},this.discardChanges=e=>{e.preventDefault();this.getUnsavedChangesBanner()&&this.removeMessageData(),o.EventDispatcher.dispatch(o.EventDispatcher.DISCARD_CHANGES_EVENT_NAME,this.element,void 0)},this.getUnsavedChangesBanner=()=>(this.unsavedChangesBanner||(this.unsavedChangesBanner=this.element.querySelector(`#${this.uid}_bannerunsaved`)),this.unsavedChangesBanner),this.setBusyResolve=e=>a.getContext(this.element).getBusyContext().addBusyState(e),this.dispatchComponentEvent=(e,t,i,o)=>{const s={bubbles:t||!0,cancelable:i||!0};o&&(s.detail=o),this.element.dispatchEvent(new CustomEvent(e,s))};const{element:t,properties:l,uniqueId:d}=e;this.properties=l,this.uid=e.uniqueId,this.element=t,this.res=Object.assign({},s),this.screenRange=r.createScreenRangeObservable(),this.messagesArray=[],this.messages=new i(this.messagesArray)}activated(e){n.info("activated")}propertyChanged(e){const t=this.setBusyResolve({description:"Messages Banner - Property Changed"}),{property:i,value:o}=e;"visible"===i&&!0===o?this.show():this.removeMessageData(),t()}}})),define("css!oj-sp/message-banner-unsaved-changes/message-banner-unsaved-changes",[],(function(){})),define("oj-sp/message-banner-unsaved-changes/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./message-banner-unsaved-changes.html","./message-banner-unsaved-changes","css!./message-banner-unsaved-changes.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-message-banner-unsaved-changes",{metadata:JSON.parse(o),view:s,viewModel:a.MessageUnsavedChangesModel})})),define("text!oj-sp/metric-card/component.json",[],(function(){return'{"name":"metric-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Metric Card","description":"Used to display metric information following different formats, either Metric or in Charts.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"implements":["SpMetricCardElement"],"properties":{"cardTitle":{"displayName":"Title","description":"The title of the card.","writeback":false,"translatable":true,"type":"string","required":true},"metricText":{"displayName":"Metric","description":"The metric text. Displayed second in the header section.","writeback":false,"translatable":true,"type":"string","required":true},"metaText":{"displayName":"Metadata Text","description":"The Metadata text. Displayed after the metric text. It supports up to 2 lines.","writeback":false,"translatable":true,"type":"string","required":false},"descriptionText":{"displayName":"Description Text","description":"The Description Text. The description text supports up to 2 lines.","writeback":false,"translatable":true,"type":"string","required":false},"badge":{"displayName":"Badge","description":"Status of the item.","type":"object|null","writeback":false,"properties":{"text":{"displayName":"Badge Text","description":"Text showing in the badge.","type":"string"},"status":{"displayName":"Badge Status","description":"Status of the badge.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}}}}},"methods":{},"events":{"ojSpAction":{"displayName":"Action Event","description":"Fired when the user clicks the card.","bubbles":true,"cancelable":true,"detail":{}}},"slots":{},"extension":{"catalog":{"category":"Redwood Analytics","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-metric-card-48.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Metric%20Card%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrametriccard.html"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-metric-card-48.svg"}}'})),define("text!oj-sp/metric-card/metric-card-view.html",[],(function(){return'<html><head></head><body><div class="oj-panel oj-sp-metric-card-parent-container oj-flex oj-sm-flex-direction-column oj-sm-padding-6x":class="[[ `\n    ${isCardHovered() ? \'oj-sp-metric-card-hovered oj-panel-shadow-sm\' : \'\'}\n    ${isTitleFocused() ? \'oj-sp-metric-card-focused\' : \'\'} \n  `]]"on-mouseenter="[[ handlePanelMouseEnter ]]"on-mouseleave="[[ handlePanelMouseLeave ]]"on-click="[[ handlePanelClick ]]"on-keydown="[[ handlePanelKeyDown ]]"><div class="oj-sp-metric-card-header oj-flex-item oj-flex oj-sm-12"><div class="oj-flex-item oj-sm-12 oj-flex oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"><div class="oj-flex-item oj-sm-flex-0 oj-sp-metric-card-badge-container"><oj-bind-if test="[[ hasBadge() ]]"><span :id="[[uid + \'_badge\']]":title="[[ $properties.badge.text ]]":class="[[ `oj-sp-metric-card-badge oj-sp-metric-card-truncate-one-line ${badgeClass()} oj-badge-md` ]]"><oj-bind-text value="[[ $properties.badge.text ]]"></oj-bind-text></span></oj-bind-if></div><div class="oj-sp-metric-card-header-text-container oj-flex oj-sm-flex-1 oj-sm-flex-direction-column oj-sm-margin-1x-top oj-sm-12 oj-sm-flex-wrap-nowrap"><span :title="[[ $properties.cardTitle ]]"class="oj-sp-metric-card-ring oj-sp-metric-card-title oj-sm-flex-item oj-typography-body-lg oj-line-clamp-2"role="link"tabindex="0"on-focus="[[ handleTitleFocus ]]"on-blur="[[ handleTitleBlur ]]":aria-describedby="[[ `${uid + \'_badge\'} ${uid + \'_metric_text\'} ${uid + \'_meta_text\'} ${uid + \'_description_text\'}`]]"><oj-bind-text value="[[ $properties.cardTitle ]]"></oj-bind-text></span><span :id="[[uid + \'_metric_text\']]":title="[[ $properties.metricText ]]"class="oj-sp-metric-card-metric oj-sm-flex-item oj-typography-heading-xs oj-sp-metric-card-truncate-one-line"><oj-bind-text value="[[ $properties.metricText ]]"></oj-bind-text></span><div class="oj-sm-flex-item oj-sm-margin-1x-top"><span :id="[[uid + \'_meta_text\']]":title="[[ $properties.metaText ]]"class="oj-sp-metric-card-meta-text oj-typography-body-md oj-text-color-secondary oj-line-clamp-2"><oj-bind-text value="[[ $properties.metaText ]]"></oj-bind-text></span></div></div></div><oj-bind-if test="[[ $properties.descriptionText ]]"><div class="oj-flex-item oj-sm-margin-6x-top oj-sm-12 oj-flex oj-sm-flex-direction-row"><span :id="[[uid + \'_description_text\']]":title="[[ $properties.descriptionText ]]"class="oj-sp-metric-card-description oj-typography-body-md oj-line-clamp-2"><oj-bind-text value="[[ $properties.descriptionText ]]"></oj-bind-text></span></div></oj-bind-if></div></div></body></html>'})),define("oj-sp/metric-card/metric-card-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricCardViewModel=void 0;t.MetricCardViewModel=class{constructor(e){this.context=e,this.handlePanelMouseEnter=e=>{this.isCardHovered(!0)},this.handlePanelMouseLeave=e=>{this.isCardHovered(!1)},this.handleTitleFocus=e=>{this.isTitleFocused(!0)},this.handleTitleBlur=e=>{this.isTitleFocused(!1)},this.handlePanelClick=e=>{this.dispatchActionEvent()},this.handlePanelKeyDown=e=>{e.target.classList.contains("oj-sp-metric-card-ring")&&e.key&&"ENTER"===e.key.toUpperCase()&&this.dispatchActionEvent()};const t=s.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=o,this.initBadge(),this.initAccessibility(),this.busyResolve()}activated(e){a.log(`oj-sp-metric-card ${this.uid} activated`)}connected(e){a.log(`oj-sp-metric-card ${this.uid} connected`)}bindingsApplied(e){a.log(`oj-sp-metric-card ${this.uid} bindingsApplied`)}propertyChanged(e){a.log(`oj-sp-metric-card ${this.uid} propertyChanged`)}disconnected(e){a.log(`oj-sp-metric-card ${this.uid} disconnected`)}initBadge(){this.hasBadge=i.computed(()=>this.properties.badge&&this.properties.badge.text&&this.properties.badge.status),this.badgeClass=i.computed(()=>{if(this.hasBadge()){let e="oj-badge oj-badge-subtle";return["danger","warning","success","info"].indexOf(this.properties.badge.status)>=0&&(e+=" oj-badge-"+this.properties.badge.status),e}return""})}initAccessibility(){this.isCardHovered=i.observable(!1),this.isTitleFocused=i.observable(!1)}dispatchActionEvent(){this.composite.dispatchEvent(new CustomEvent("ojSpAction",{bubbles:!1}))}}})),define("css!oj-sp/metric-card/metric-card-styles",[],(function(){})),define("oj-sp/metric-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./metric-card-view.html","./metric-card-viewModel","css!./metric-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-metric-card",{metadata:JSON.parse(o),view:s,viewModel:a.MetricCardViewModel})})),define("css!oj-sp/mini-card/mini-card-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/mini-card/mini-card",["require","exports","ojs/ojlogger","ojs/ojvcomponent","preact","css!./mini-card-styles","oj-sp/thumbnail/loader","ojs/ojactioncard","ojs/ojavatar"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiniCard=void 0;let a=class extends s.Component{constructor(e){var t;super(e),this.navigationActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpNavigationAction)||void 0===i||i.call(t),e.preventDefault()},this.detailActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpDetailAction)||void 0===i||i.call(t),e.stopPropagation()},this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.componentId=this.uid+"_mini_card"}componentDidMount(){i.log(`%c CCA ${this.uid} mounted`)}render(e){var t;const{isAvatarAvailable:i,isOverlineTextAvailable:o,isBadgeAvailable:a,isHeaderAvailable:n,isTertiaryTextInPrimaryTextContainer:r,isSecondaryTextAvailable:l,isTertiaryTextAvailable:d,isThumbnailAvailable:c,isDetailBlockAvailable:p,isThumbnailMedium:u}=this.getBlocksAvailabilityStatus(e),h="oj-typography-body-lg oj-typography-bold oj-text-color-primary oj-sp-mini-card-primary-text\n      "+(i||!p||u&&!l?"oj-line-clamp-2":"oj-line-clamp-1"),m=this.componentId+"_primary_text_container",g=this.componentId+"_link_text",y=this.componentId+"_secondary_text_container",f=Object.assign(Object.assign({"aria-label":e.primaryText},l&&{"aria-describedby":y}),"on"===(null===(t=e.navigationAction)||void 0===t?void 0:t.display)&&{"aria-owns":g}),b=i||u&&!d?"oj-line-clamp-2":"oj-line-clamp-1",v=l?"oj-sm-margin-3x-top":"oj-sm-margin-0";return(0,s.h)(s.Fragment,null,(0,s.h)("oj-action-card",Object.assign({class:"oj-sp-mini-card-parent-container",onojAction:this.detailActionHandler},f),(0,s.h)("div",{class:"oj-flex-item oj-sm-12 oj-sm-padding-6x oj-sm-flex-direction-column oj-sm-align-items-flex-start"},n&&this.getHeaderTemplate(e,o,a),(0,s.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column oj-sp-mini-card-body"},(0,s.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap"},(0,s.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column oj-sp-mini-card-flex-shrink oj-sm-justify-content-center"},(0,s.h)("div",{class:"oj-flex-item oj-sm-flex-0",id:m},(0,s.h)("span",{id:this.componentId+"_primaryText",title:e.primaryText,class:h},e.primaryText)),l&&this.getSecondaryTextTemplate(e,b),d&&r&&this.getTertiaryTextTemplate(e,v)),(i||c)&&(0,s.h)("div",{class:"oj-flex-item oj-sm-flex-0 oj-flex oj-sm-justify-content-center oj-sm-margin-4x-start oj-sp-mini-card-image-container"},i?this.getAvatarTemplate(e):this.getThumbnailTemplate(e))),d&&!r&&this.getTertiaryTextTemplate(e,v)))))}getHeaderTemplate(e,t,i){return(0,s.h)("div",{class:"oj-flex oj-flex-item oj-sm-margin-3x-bottom oj-sm-flex-wrap-nowrap oj-sp-mini-card-header"},t&&(0,s.h)("div",{class:(()=>{let e="oj-flex-item oj-sm-margin-3x-end oj-sm-flex-initial oj-sm-justify-content-center oj-sm-align-self-center";return e+=i?" oj-sp-mini-card-max-flex-6":" oj-sp-mini-card-max-flex-12",e})(),"aria-label":e.overlineText},(0,s.h)("span",{title:e.overlineText,class:"oj-typography-body-sm  oj-text-color-secondary oj-line-clamp-1 oj-sp-mini-card-overline"},e.overlineText)),i&&(0,s.h)("div",{class:"oj-flex-item oj-flex oj-sp-mini-card-badge-container","aria-label":e.badge.text},(0,s.h)("span",{title:e.badge.text,class:(()=>{var t,i;let o="oj-badge oj-badge-md oj-sp-mini-card-badge";return(null===(t=e.badge)||void 0===t?void 0:t.style)&&(o+=" oj-badge-"+e.badge.style),(null===(i=e.badge)||void 0===i?void 0:i.status)&&(o+=" oj-badge-"+e.badge.status),o})()},e.badge.text)))}getSecondaryTextTemplate(e,t){return(0,s.h)("div",{class:"oj-flex-item oj-sm-flex-initial",id:this.componentId+"_secondary_text_container"},(0,s.h)("span",{title:e.secondaryText,class:"oj-sp-mini-card-flex-no-shrink oj-typography-body-md oj-sp-mini-card-secondary-text "+t},e.secondaryText))}getTertiaryTextSpan(e){return(0,s.h)("span",{title:e.navigationAction.label,class:"oj-typography-body-sm oj-text-color-secondary oj-line-clamp-1 oj-sp-mini-card-tertiary-text"},e.navigationAction.label)}getTertiaryTextLink(e){return(0,s.h)("a",{title:e.navigationAction.label,id:this.componentId+"_link_text","data-oj-clickthrough":"disabled",onClick:this.navigationActionHandler,class:"oj-link oj-line-clamp-1 oj-sp-mini-card-link-text",href:"#"},e.navigationAction.label)}getTertiaryTextTemplate(e,t){var i;return(0,s.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-wrap-nowrap"},(0,s.h)("div",{class:"oj-flex-item oj-typography-body-sm "+t},"disabled"===(null===(i=e.navigationAction)||void 0===i?void 0:i.display)?this.getTertiaryTextSpan(e):this.getTertiaryTextLink(e)))}getAvatarTemplate(e){return(0,s.h)("oj-avatar",{size:"xs",src:e.avatar.src,initials:e.avatar.initials})}getThumbnailTemplate(e){return(0,s.h)("div",{class:"md"===e.thumbnail.size?"oj-sp-mini-card-image-md":"oj-sp-mini-card-image-xs"},(0,s.h)("oj-sp-thumbnail",{src:e.thumbnail.src,type:"IMAGE","image-shape":"ROUNDED_CORNERS"}))}getBlocksAvailabilityStatus(e){var t,i,o,s,a,n,r,l,d,c,p,u,h;const m=(null===(t=e.overlineText)||void 0===t?void 0:t.length)>0,g=(null===(o=null===(i=e.badge)||void 0===i?void 0:i.text)||void 0===o?void 0:o.length)>0,y=m||g,f=(null===(s=e.secondaryText)||void 0===s?void 0:s.length)>0,b=(null===(n=null===(a=e.navigationAction)||void 0===a?void 0:a.label)||void 0===n?void 0:n.length)>0,v=(null===(l=null===(r=e.avatar)||void 0===r?void 0:r.src)||void 0===l?void 0:l.length)>0||(null===(c=null===(d=e.avatar)||void 0===d?void 0:d.initials)||void 0===c?void 0:c.length)>0,j=!v&&(null===(u=null===(p=e.thumbnail)||void 0===p?void 0:p.src)||void 0===u?void 0:u.length)>0,A=j&&"md"===(null===(h=e.thumbnail)||void 0===h?void 0:h.size);return{isAvatarAvailable:v,isBadgeAvailable:g,isDetailBlockAvailable:f||b,isHeaderAvailable:y,isOverlineTextAvailable:m,isSecondaryTextAvailable:f,isTertiaryTextAvailable:b,isTertiaryTextInPrimaryTextContainer:A||!f||!(v||j),isThumbnailAvailable:j,isThumbnailMedium:A}}};a.defaultProps={thumbnail:{src:"",size:"xs"},navigationAction:{label:"",display:"on"}},a.observedAttributes=["id"],a._metadata={properties:{thumbnail:{type:"object",properties:{src:{type:"string"},size:{type:"string",enumValues:["md","xs"]}}},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]},style:{type:"string",enumValues:["strong","subtle"]}}},navigationAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["disabled","on"]}}},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},overlineText:{type:"string"},primaryText:{type:"string"},secondaryText:{type:"string"}},events:{spDetailAction:{},spNavigationAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,o.customElement)("oj-sp-mini-card"),__metadata("design:paramtypes",[Object])],a),t.MiniCard=a})),define("oj-sp/mini-card/loader",["require","exports","./mini-card"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiniCard=void 0,Object.defineProperty(t,"MiniCard",{enumerable:!0,get:function(){return i.MiniCard}})})),define("text!oj-sp/object-card/component.json",[],(function(){return'{"name":"object-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Object Card","description":"An object card is a representation of a product or other object for display in a list or conveyor belt.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-card-footer":"2404.0.0"},"properties":{"label":{"displayName":"Header Label","description":"Header Label text","type":"string","writeback":false,"required":false},"badge":{"displayName":"Header Badge","description":"Object Card Header Badge","type":"object|null","properties":{"text":{"displayName":"Badge Text","description":"Text showing in an object card","type":"string","writeback":false,"required":false},"status":{"displayName":"Badge Status","description":"Status of the object card badge","type":"string","writeback":false,"status":[{"target":"propertyValue","type":"deprecated","since":"2104.0.0","description":"Enum value \'default\' is no longer supported, and will be removed in  a future release. Use \'neutral\' instead.","value":["default"]}],"enumValues":["default","neutral","danger","warning","success","info"],"propertyEditorValues":{"default":{"description":"Default status","displayName":"Default"},"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}},"style":{"displayName":"Badge Style","description":"Style of the badge","type":"string","writeback":false,"enumValues":["strong","subtle"],"propertyEditorValues":{"strong":{"description":"Strong style","displayName":"Strong"},"subtle":{"description":"Subtle style","displayName":"Subtle"}}}}},"primaryText":{"type":"string","displayName":"Header Title","description":"Object Card Header Title","writeback":false,"required":true},"secondaryText":{"type":"string","displayName":"Secondary Text","description":"Secondary text","writeback":false,"required":true},"secondaryTextLine2":{"type":"string","displayName":"Second line of Secondary Text","description":"Can be used to show extra lines of secondary text.","writeback":false,"required":false},"secondaryTextLine3":{"type":"string","displayName":"Third line of Secondary Text","description":"Can be used to show extra lines of secondary text.","writeback":false,"required":false},"tertiaryText":{"type":"string","displayName":"Tertiary Text","description":"Tertiary text","writeback":false,"required":false},"image":{"displayName":"image","description":"Object Card image","type":"object","properties":{"src":{"type":"string","displayName":"Image Source","description":"Path to where the image is stored."},"altText":{"displayName":"Alternative Text","description":"Alternative text used when src image is not accessible or disabled","type":"string"}}},"footerText":{"displayName":"Footer Read-only text","description":"Read-only text for card footer","type":"object|null","properties":{"label":{"type":"string","displayName":"Label","description":"Label for the text. This is required even if label is not shown for accessibility purposes."},"value":{"type":"string","displayName":"Value","description":"Value for the text"}}},"avatar":{"displayName":"Footer Avatar","description":"Avatar displayed in footer region.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image Source","description":"Path to where the image is stored."},"initials":{"type":"string","displayName":"Initials","description":"Avatar initials."}}},"icon":{"displayName":"Footer Icon","description":"Icon displayed as a leading visual for the footer text.  The icon is considered decorative so you must not have the icon convey information that is not also present in the footerText for accessibility reasons.  Cannot be used at the same time as the avatar.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image Source","description":"Icon class name.","status":[{"type":"deprecated","since":"2104.0.0","description":"Use the class property instead."}]},"class":{"type":"string","displayName":"Icon class","description":"Redwood icon gallery class."}}},"emphasized":{"displayName":"Emphasized Footer","description":"If emphasized, it will appear with default background colour. Otherwise, the footer will be transparent.","type":"boolean","writeback":false},"primaryActions":{"displayName":"Card Primary Actions","description":"Specifies primary actions in card footer.","type":"Array<object>","properties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}},"type":{"type":"string","displayName":"Action type","description":"The action type can be default, promoted, deemphasized or navigation","value":"promoted","enumValues":["default","promoted","deemphasized","navigation"],"propertyEditorValues":{"default":{"displayName":"Default","description":"The action type is default."},"promoted":{"displayName":"Promoted","description":"The action type is promoted."},"deemphasized":{"displayName":"Deemphasized","description":"The action type is deemphasized."},"navigation":{"displayName":"Navigation","description":"The action type is navigation."}}}}},"secondaryActions":{"displayName":"Footer Secondary Actions","description":"Specifies secondary actions in card footer.","type":"Array<object>","properties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"selectedKeys":{"displayName":"Selected keys","description":"Collection Set of selected keys","type":"KeySet<K>","writeback":true},"selector":{"type":"object|null","description":"The selector for selection type footer. Set the selection mode to \'multiple\' to see the selector.","writeback":true,"properties":{"rowKey":{"displayName":"Selector key","description":"Collection row key used for the selection","type":"any"},"selectedKeys":{"displayName":"Selected keys","description":"Collection Set of selected keys","type":"KeySet<K>","writeback":true,"status":[{"type":"deprecated","since":"2101.0.0","description":"Use the property at root level instead."}]},"selectionMode":{"displayName":"Selection mode","description":"Object card selection mode","type":"string","required":false,"writeback":false,"value":"single","enumValues":["multiple","single"],"propertyEditorValues":{"multiple":{"displayName":"Multiple selection","description":"Multiple items can be selected at the same time."},"single":{"displayName":"Single selection","description":"Only a single item can be selected at a time."}}},"ariaLabel":{"displayName":"Selector Aria Label","description":"Accessible text read by a screen reader while tabbed into the selector.","type":"string"}}},"quantity":{"type":"number","displayName":"Quantity","value":0,"description":"Allows users to enter a quantity associated with the current card. If no value is provided 0 will be displayed by default.","writeback":true},"quantityValid":{"type":"string","description":"Indicates if the quantity field is valid or not.","displayName":"Quantity Valid","readOnly":true,"writeback":true},"quantityOptions":{"type":"object","displayName":"Quantity Options","description":"Options related to the behaviour of the quantity field.","properties":{"max":{"type":"number","displayName":"Max","description":"The maximum allowed value."}}},"displayOptions":{"displayName":"Display Options","description":"Options allowing to customize the display of the object-card.","type":"object|null","properties":{"footer":{"displayName":"Footer Display","description":"Shows/Hides the footer. By default, the footer is displayed.","type":"string","writeback":false,"value":"on","enumValues":["on","off"],"propertyEditorValues":{"on":{"description":"The footer is displayed","displayName":"on"},"off":{"description":"The footer is not displayed","displayName":"off"}}},"horizontalGauge":{"displayName":"Horizontal Gauge","description":"Shows/Hides the horizontal gauge. This property can be used to control whether the gauge is displayed or not programatically.","type":"string","writeback":false,"value":"on","enumValues":["on","off"],"propertyEditorValues":{"on":{"description":"The horizontal gauge is displayed","displayName":"on"},"off":{"description":"The horizontal gauge is not displayed","displayName":"off"}}},"circularGauge":{"displayName":"Circular Gauge","description":"Shows/Hides the circular gauge. This property can be used to control whether the gauge is displayed or not programatically.","type":"string","writeback":false,"value":"on","enumValues":["on","off"],"propertyEditorValues":{"on":{"description":"The circular gauge is displayed","displayName":"on"},"off":{"description":"The circular gauge is not displayed","displayName":"off"}}},"quantity":{"type":"string","writeback":false,"value":"off","displayName":"Enable Quantity","description":"Controls the quantity picker display, it is off by default.","propertyEditorValues":{"on":{"description":"The quantity picker is displayed.","displayName":"On"},"off":{"description":"The quantity picker is not displayed.","displayName":"Off"}},"enumValues":["off","on"]}}}},"methods":{"validate":{"description":"This method validates the card returns valid state.","displayName":"Validate."}},"events":{"spPrimaryAction":{"displayName":"Primary action event","description":"Dispatched when one of the primary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when one of the secondary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spCardAction":{"displayName":"Card action event","description":"Dispatched when the user clicks/taps anywhere on the card except on the action buttons in the footer area.","bubbles":false,"cancelable":false,"detail":{}}},"slots":{"horizontalGauge":{"displayName":"Horizontal Gauge","description":"The content of this slot is layed out in the bottom of the card. It\'s designed to host oj-sp-item-gauge horizontal gauge types.","maxItems":1,"preferredContent":["SpItemGaugeElement"]},"circularGauge":{"displayName":"Circular Gauge","description":"The content of this slot is rendered in place of the thumbnail. It\'s designed to host circular oj-sp-item-gauge. Please note that this slot cannot be used at the same time as a thumbnail.","maxItems":1,"preferredContent":["SpItemGaugeElement"]}},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-object-card.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Object%20Card%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraobjectcard.html"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-object-card.svg"}}'})),define("text!oj-sp/object-card/object-card-view.html",[],(function(){return'<html><head></head><body><div class="oj-panel oj-sm-padding-0 oj-sp-object-card-parent-container oj-flex oj-sm-flex-direction-column":class="[[ `\n          ${isCardHovered() ? \'oj-panel-shadow-sm\' : \'\'}\n          ${isTitleFocused() ? \'oj-sp-object-card-focused\' : \'\'} \n        `]]"on-mouseenter="[[ handlePanelMouseEnter ]]"on-mouseleave="[[ handlePanelMouseLeave ]]"><div class="oj-sp-object-card-container oj-flex-item oj-sm-12 oj-sm-padding-4x-horizontal oj-sm-padding-4x-top oj-lg-padding-6x-horizontal":class="[[ `\n      ${footerState() === \'hidden\' || $properties.emphasized ? \'oj-sm-padding-4x-bottom\' : \'\'}\n      ${isCardHovered() ? \'oj-sp-object-card-hovered\': \'\'}\n    `]]"on-click="[[ handlePanelClick ]]"on-keydown="[[ handlePanelKeyDown ]]"><oj-bind-if test="[[ $properties.label || hasBadge() ]]"><div class="oj-sp-object-card-header oj-flex oj-sm-flex-direction-column oj-sm-align-items-flex-start"><oj-bind-if test="[[ hasBadge() ]]"><div class="oj-sp-object-card-badge-container"><span :id="[[uid + \'_badge\']]":class="[[ `${badgeClass()} oj-badge-sm oj-sm-margin-1x-bottom oj-sp-object-card-badge-text` ]]":title="[[$properties.badge ? $properties.badge.text : \'\']]"><oj-bind-text value="[[ $properties.badge.text ]]"></oj-bind-text></span></div></oj-bind-if><div :id="[[uid +\'_label\']]"class="oj-typography-body-xs oj-text-color-primary oj-sp-object-card-label"><oj-bind-text value="[[ $properties.label ]]"></oj-bind-text></div></div></oj-bind-if><div class="oj-flex oj-sm-flex-wrap-nowrap oj-sp-object-card-body"><div class="oj-flex-item oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column oj-sp-object-card-flex-shrink"><div class="oj-flex-item oj-sm-flex-1"><span :id="[[uid +\'_primaryText\']]":title="[[ $properties.primaryText ]]":class="[[ {\n            \'oj-sp-object-card-ring oj-sp-object-card-primary oj-typography-body-sm oj-typography-bold oj-text-color-primary\': true,\n            \'oj-line-clamp-4\': !hasTertiaryText(),\n            \'oj-line-clamp-3\': hasTertiaryText(),\n          }]]"role="link"tabindex="0"on-focus="[[ handleTitleFocus ]]"on-blur="[[ handleTitleBlur ]]":aria-describedby="[[ `${uid + \'_badge\'} ${uid + \'_label\'} ${uid + \'_secondary_text\'} ${uid + \'_secondary_text_2\'} ${uid + \'_secondary_text_3\'} ${uid + \'_tertiary_text\'}`]]"><oj-bind-text value="[[ $properties.primaryText ]]"></oj-bind-text></span></div><div :class="[[\'oj-flex oj-sm-flex-direction-column oj-flex-item oj-sm-flex-initial \' + (hasTertiaryText() ? \'oj-sm-margin-3x-top\' : \'oj-sm-margin-4x-top\')]]"><span :id="[[uid + \'_secondary_text\']]":title="[[ $properties.secondaryText ]]":class="[[\'oj-flex-item oj-sp-object-card-secondary oj-sp-object-card-text-truncate oj-sp-object-card-flex-no-shrink oj-text-color-secondary \' + secondaryTextSize() ]]"><oj-bind-text value="[[ $properties.secondaryText ]]"></oj-bind-text></span><oj-bind-if test="[[ hasSecondLineOfSecondaryText() ]]"><span :id="[[uid + \'_secondary_text_2\']]":title="[[ $properties.secondaryTextLine2 ]]":class="[[\'oj-flex-item oj-sp-object-card-secondary2 oj-sp-object-card-text-truncate oj-sp-object-card-flex-no-shrink oj-text-color-secondary \' + secondaryTextSize() ]]"><oj-bind-text value="[[ $properties.secondaryTextLine2 ]]"></oj-bind-text></span></oj-bind-if><oj-bind-if test="[[ hasThirdLineOfSecondaryText() ]]"><span :id="[[uid + \'_secondary_text_3\']]":title="[[ $properties.secondaryTextLine3 ]]":class="[[\'oj-flex-item oj-sp-object-card-secondary3 oj-sp-object-card-text-truncate oj-sp-object-card-flex-no-shrink oj-text-color-secondary \' + secondaryTextSize() ]]"><oj-bind-text value="[[ $properties.secondaryTextLine3 ]]"></oj-bind-text></span></oj-bind-if></div><oj-bind-if test="[[ hasTertiaryText() ]]"><div class="oj-flex-item oj-sm-flex-initial oj-sm-margin-1x-top"><div :id="[[uid + \'_tertiary_text\']]":title="[[ $properties.tertiaryText ]]"class="oj-sp-object-card-tertiary oj-typography-body-sm oj-text-color-primary oj-sp-object-card-text-truncate oj-sp-object-card-flex-no-shrink"><oj-bind-text value="[[ $properties.tertiaryText ]]"></oj-bind-text></div></div></oj-bind-if></div><oj-bind-if test="[[ hasImage() ]]"><div class="oj-flex-item oj-sm-flex-0 oj-flex oj-sm-justify-content-center oj-sp-object-card-image-container oj-sm-margin-4x-start"><img class="oj-flex-item oj-sm-flex-initial oj-sm-align-self-center oj-sp-object-card-image":src="[[ $properties.image.src ]]":alt="[[ $properties.image.altText ]]"on-error="[[onErrorImage]]"><div class="oj-sp-object-card-image-scrim"></div></div></oj-bind-if><div class="oj-sp-object-card-circular-gauge-container":class="[[ !hasCircularGauge() ? \'oj-sp-object-card-hidden\' : \'\' ]]"><oj-defer><oj-bind-slot name="circularGauge"></oj-bind-slot></oj-defer></div></div><div class="oj-sp-object-card-horizontal-gauge-container oj-sm-margin-4x-top":class="[[ !hasHorizontalGauge() ? \'oj-sp-object-card-hidden\' : \'\' ]]"><oj-defer><oj-bind-slot name="horizontalGauge"></oj-bind-slot></oj-defer></div></div><div :class="[[ \'oj-flex-item oj-sm-12 oj-sp-object-card-footer-state-\' + footerState() ]]"><oj-bind-if test="[[ footerState() !== \'hidden\' ]]"><oj-sp-card-footer :id="[[uid +\'_footer\']]"emphasized="[[ $properties.emphasized ]]"selector.row-key="[[ $properties.selector ? $properties.selector.rowKey : undefined ]]"selector.selection-mode="[[ $properties.selector ? $properties.selector.selectionMode : undefined ]]"selected-keys="{{ selectedKeys }}"selector.aria-label="[[ $properties.selector ? $properties.selector.ariaLabel : undefined ]]"quantity-options="[[ $properties.quantityOptions ]]"quantity="{{ $properties.quantity }}"quantity-valid="{{ $properties.quantityValid }}"display-options="[[ {quantity: $properties.displayOptions?.quantity} ]]"footer-text="[[ footerText ]]"primary-actions="[[ footerPrimaryActions  ]]"secondary-actions="[[ footerSecondaryActions ]]"icon="[[ footerIcon ]]"avatar="[[ footerAvatar ]]"on-sp-primary-action="[[ primaryActionHandler  ]]"on-sp-secondary-action="[[ secondaryActionHandler  ]]"></oj-sp-card-footer></oj-bind-if></div></div></body></html>'})),define("oj-sp/object-card/object-card-footer-state",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectCardFooterState=void 0,function(e){e.Readonly="readonly",e.ActionsOnly="actions-only",e.Mixed="mixed",e.Selection="selection",e.Hidden="hidden",e.Invalid="invalid-state",e.Quantity="quantity"}(t.ObjectCardFooterState||(t.ObjectCardFooterState={}))})),define("oj-sp/object-card/object-card-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common/EventDispatcher","ojs/ojcontext","ojs/ojcomponentcore","ojs/ojkeyset","ojs/ojlogger","./object-card-footer-state","oj-sp/card-footer/loader","ojs/ojknockout","ojs/ojpopup","ojs/ojlabel","ojs/ojdefer"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectCardViewModel=void 0;class c{constructor(e){this.context=e,this.validate=()=>{const e=this.properties.selector&&"multiple"===this.properties.selector.selectionMode&&this.properties.displayOptions&&"on"===this.properties.displayOptions.quantity,t=this.getFooter();return t&&e?t.validate():Promise.resolve("cannot validate")},this.primaryActionHandler=e=>{s.EventDispatcher.dispatch(s.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()},this.secondaryActionHandler=e=>{s.EventDispatcher.dispatch(s.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()},this.dispatchActionEvent=e=>{s.EventDispatcher.dispatch(s.EventDispatcher.CARD_ACTION_EVENT_NAME,this.composite,e.detail,!1)},this.handlePanelMouseEnter=e=>{this.isCardHovered(!0)},this.handlePanelMouseLeave=e=>{this.isCardHovered(!1)},this.handleTitleFocus=e=>{this.isTitleFocused(!0)},this.handleTitleBlur=e=>{this.isTitleFocused(!1)},this.handlePanelClick=e=>{this.dispatchActionEvent(e)},this.handlePanelKeyDown=e=>{e.target.classList.contains("oj-sp-object-card-ring")&&e.key&&"ENTER"===e.key.toUpperCase()&&this.dispatchActionEvent(e)},this.onErrorImage=()=>{this.hasImage()&&this.hasImage(!1)};const t=a.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties;const n=this.properties.image?this.properties.image.src:null;this.hasImage=i.observable(!!n),this.res=o,this.hasSecondLineOfSecondaryText=i.computed(()=>{const e=this.properties.secondaryTextLine2;return"string"==typeof e&&e.length>0}),this.hasThirdLineOfSecondaryText=i.computed(()=>{const e=this.properties.secondaryTextLine3;return"string"==typeof e&&e.length>0}),this.secondaryTextSize=i.computed(()=>this.hasSecondLineOfSecondaryText()||this.hasThirdLineOfSecondaryText()?"oj-typography-body-xs":"oj-typography-body-sm"),this.hasTertiaryText=i.computed(()=>{const e=this.properties.tertiaryText;return"string"==typeof e&&e.length>0}),this.initHeaderBadge(),this.initAccessibility(),this.initFooter(),this.initSelection(this.properties.selector),this.initGauge(),this.busyResolve()}activated(e){l.log(`oj-sp-object-card ${this.uid} activated`)}connected(e){l.log(`oj-sp-object-card ${this.uid} connected`)}bindingsApplied(e){l.log(`oj-sp-object-card ${this.uid} bindingsApplied`)}propertyChanged(e){if(l.log(`oj-sp-object-card ${this.uid} propertyChanged`),"selector"===e.property&&e.value&&e.value.selectedKeys)this.selectedKeys(e.value.selectedKeys);else if("selectedKeys"===e.property&&e.value)this.selectedKeys(e.value);else if("image"===e.property){const t=e.value?e.value.src:null;this.hasImage(!!t)}"image"!==e.property&&"displayOptions"!==e.property||this.updateGaugeSlots().catch(()=>{l.log(`oj-sp-object-card ${this.uid} failure to update gauge slots`)})}disconnected(e){l.log(`oj-sp-object-card ${this.uid} disconnected`)}initHeaderBadge(){this.hasBadge=i.computed(()=>this.properties.badge&&this.properties.badge.text&&this.properties.badge.status),this.badgeClass=i.computed(()=>{if(this.hasBadge()){let e="oj-badge";return["danger","warning","success","info"].indexOf(this.properties.badge.status)>=0&&(e+=" oj-badge-"+this.properties.badge.status),["subtle"].indexOf(this.properties.badge.style)>=0&&(e+=" oj-badge-"+this.properties.badge.style),e}return""})}initAccessibility(){this.isCardHovered=i.observable(!1),this.isTitleFocused=i.observable(!1)}initFooter(){this.footerText=i.computed(()=>this.properties.footerText&&(this.properties.footerText.value||this.properties.footerText.label)?{label:this.properties.footerText.label,value:this.properties.footerText.value}:void 0),this.footerAvatar=i.computed(()=>this.properties.avatar&&(this.properties.avatar.src||this.properties.avatar.initials)?{initials:this.properties.avatar.initials,src:this.properties.avatar.src}:{}),this.footerIcon=i.computed(()=>{if(this.properties.icon){if(this.properties.icon.class)return{class:this.properties.icon.class};if(this.properties.icon.src)return{class:this.properties.icon.src}}return{}}),this.footerPrimaryActions=i.computed(()=>this.properties.primaryActions instanceof Array?this.properties.primaryActions:[]),this.footerSecondaryActions=i.computed(()=>this.properties.secondaryActions instanceof Array?this.properties.secondaryActions:[]),this.footerState=i.computed(()=>{const{selector:e,footerText:t,primaryActions:i,secondaryActions:o,displayOptions:s,quantity:a}=this.properties,n=i&&i.length>0,r=o&&o.length>0;return this.properties.displayOptions&&"off"===this.properties.displayOptions.footer?d.ObjectCardFooterState.Hidden:e&&"multiple"===e.selectionMode?s&&"on"===s.quantity?d.ObjectCardFooterState.Quantity:d.ObjectCardFooterState.Selection:r&&t?d.ObjectCardFooterState.Mixed:t||!n||r?t?d.ObjectCardFooterState.Readonly:(l.warn("The object-card footer is in an unkown state, please review the properties."),d.ObjectCardFooterState.Invalid):d.ObjectCardFooterState.ActionsOnly})}initSelection(e){this.selectedKeys=i.observable(this.properties.selector?this.properties.selectedKeys||this.properties.selector.selectedKeys:new r.KeySetImpl),this.selectedKeys.subscribe(e=>{if(this.properties.selectedKeys!==e){const t=this.composite;t.setProperty("selectedKeys",e),t.setProperty("selector.selectedKeys",e)}})}initGauge(){this.hasCircularGauge=i.computed(()=>{const e=this.properties.displayOptions&&this.properties.displayOptions.circularGauge,t=void 0===e||"on"===e;return!(this.properties.image&&this.properties.image.src)&&1===this.context.slotCounts.circularGauge&&t}),this.hasHorizontalGauge=i.computed(()=>{const e=this.properties.displayOptions&&this.properties.displayOptions.horizontalGauge,t=void 0===e||"on"===e;return 1===this.context.slotCounts.horizontalGauge&&t})}async updateGaugeSlots(){await a.getContext(this.composite).getBusyContext().whenReady(),this.hasCircularGauge()?n.subtreeShown(this.getCircularGaugeContainer()):n.subtreeHidden(this.getCircularGaugeContainer()),this.hasHorizontalGauge()?n.subtreeShown(this.getHorizontalGaugeContainer()):n.subtreeHidden(this.getHorizontalGaugeContainer())}getCircularGaugeContainer(){return this.composite.querySelector(".oj-sp-object-card-circular-gauge-container")}getHorizontalGaugeContainer(){return this.composite.querySelector(".oj-sp-object-card-horizontal-gauge-container")}getFooter(){return this.composite.querySelector("#"+this.uid+"_footer")}}c.SECONDARY_ACTIONS="secondaryActions",c.DISPLAY_OPTIONS_NAME="displayOptions",c.DISPLAY_OPTIONS_PRIMARY_ACTION_VISIBLE_NAME="primaryActionVisible",c.DISPLAY_OPTIONS_PRIMARY_ACTION_DISABLED_NAME="primaryActionDisable",c.DISPLAY_OPTIONS_PRIMARY_ACTION_TYPE_NAME="primaryActionType",c.TRANSLATIONS_NAME="translations",c.TRANSLATIONS_PRIMARY_ACTION_LABEL_NAME="primaryActionLabel",t.ObjectCardViewModel=c})),define("css!oj-sp/object-card/object-card-styles",[],(function(){})),define("oj-sp/object-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./object-card-view.html","./object-card-viewModel","css!./object-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-object-card",{metadata:JSON.parse(o),view:s,viewModel:a.ObjectCardViewModel})})),define("text!oj-sp/profile-card/component.json",[],(function(){return'{"name":"profile-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Profile Card","description":"A Profile Card can be used for displaying content, such as text an images, about a single person. It serves as an entry point to more detailed information and optionally provides ability to perform actions related to the person.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-card-footer":"2404.0.0"},"properties":{"caption":{"displayName":"Header Caption","description":"Header Caption Text. When used, the size of the headers increases.","type":"string","writeback":false,"required":false},"avatar":{"displayName":"Profile Card Avatar","description":"Avatar displayed in overview region.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image Source","description":"Path to where the image is stored."},"initials":{"type":"string","displayName":"Initials","description":"Avatar initials."}}},"primaryText":{"type":"string","displayName":"Profile Card Title","description":"Profile Card Body Title.","writeback":false,"required":true},"secondaryText":{"type":"string","displayName":"Profile Card SubTitle","description":"Profile Card Body SubTitle.","writeback":false},"badge":{"displayName":"Profile Body Badge","description":"Badge used in the Profile Card Body.","type":"object|null","properties":{"text":{"displayName":"Badge Text","description":"Text that shows inside the badge","type":"string","writeback":false,"required":false},"status":{"displayName":"Badge Status","description":"Status of the profile card badge","type":"string","writeback":false,"status":[{"target":"propertyValue","type":"deprecated","since":"2104.0.0","description":"Enum value \'default\' is no longer supported, and will be removed in  a future release. Use \'neutral\' instead.","value":["default"]}],"enumValues":["default","neutral","danger","warning","success","info"],"propertyEditorValues":{"default":{"description":"Default status","displayName":"Default"},"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}},"style":{"displayName":"Badge Style","description":"Style of the badge","type":"string","writeback":false,"enumValues":["strong","subtle"],"propertyEditorValues":{"strong":{"description":"Strong style","displayName":"Strong"},"subtle":{"description":"Subtle style","displayName":"Subtle"}}}}},"footerText":{"displayName":"Footer Read-only text","description":"Read-only text for Card Footer","type":"object|null","properties":{"label":{"type":"string","displayName":"Label","description":"Label for the footer text."},"value":{"type":"string","displayName":"Value","description":"Value for the footer text."}}},"footerAvatar":{"displayName":"Footer Avatar","description":"Avatar displayed in footer region.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image Source","description":"Path to where the image is stored."},"initials":{"type":"string","displayName":"Initials","description":"Avatar initials."}}},"footerIcon":{"displayName":"Footer Icon","description":"Icon displayed as a leading visual for the footer text.  The icon is considered decorative so you must not have the icon convey information that is not also present in the footerText for accessibility reasons.  Cannot be used at the same time as the avatar.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image Source","description":"Icon class name.","status":[{"type":"deprecated","since":"2104.0.0","description":"Use the class property instead."}]},"class":{"type":"string","displayName":"Icon class","description":"Redwood icon gallery class."}}},"primaryActions":{"displayName":"Card Primary Actions","description":"Specifies primary actions in card footer.","type":"Array<object>","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}},"type":{"type":"string","displayName":"Action type","description":"The action type can be default, promoted, deemphasized or navigation","value":"promoted","enumValues":["default","promoted","deemphasized","navigation"],"propertyEditorValues":{"default":{"displayName":"Default","description":"The action type is default."},"promoted":{"displayName":"Promoted","description":"The action type is promoted."},"deemphasized":{"displayName":"Deemphasized","description":"The action type is deemphasized."},"navigation":{"displayName":"Navigation","description":"The action type is navigation."}}},"swipeOption":{"type":"string","displayName":"Swipe Option type","description":"Allows to set one of the swipe option types, this option is only relevant for the mobile mode.","value":"default","enumValues":["neutral","attention","danger","default"],"propertyEditorValues":{"default":{"displayName":"Default","description":"Designed for use with an action item that should get all the space when user swipes pass the threshold distance. This is usually the last item within the template."},"neutral":{"displayName":"Neutral","description":"Designed for use with an action item that shows more available actions that users can perform."},"attention":{"displayName":"Attention","description":"Designed for use with an action item that tags the associated item in oj-list-view."},"danger":{"displayName":"Danger","description":"Designed for use with an action item that performs an explicit action like deleting the associated item in oj-list-view."}}}}}}},"secondaryActions":{"displayName":"Footer Secondary Actions","description":"Specifies secondary actions in card footer.","type":"Array<object>","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}},"swipeOption":{"type":"string","displayName":"Swipe Option type","description":"Allows to set one of the swipe option types, this option is only relevant for the mobile mode.","value":"default","enumValues":["neutral","attention","danger","default"],"propertyEditorValues":{"default":{"displayName":"Default","description":"Designed for use with an action item that should get all the space when user swipes pass the threshold distance. This is usually the last item within the template."},"neutral":{"displayName":"Neutral","description":"Designed for use with an action item that shows more available actions that users can perform."},"attention":{"displayName":"Attention","description":"Designed for use with an action item that tags the associated item in oj-list-view."},"danger":{"displayName":"Danger","description":"Designed for use with an action item that performs an explicit action like deleting the associated item in oj-list-view."}}}}}}},"selectedKeys":{"displayName":"Selected keys","description":"List Item Template Set of selected keys","type":"KeySet<K>","writeback":true},"selector":{"type":"object|null","description":"The selector for selection type footer. Set the selection mode to \'multiple\' to see the selector.","writeback":true,"properties":{"rowKey":{"displayName":"Selector key","description":"Collection row key used for the selection","type":"any"},"selectedKeys":{"displayName":"Selected keys","description":"Collection Set of selected keys","type":"KeySet<K>","writeback":true,"status":[{"type":"deprecated","since":"2101.0.0","description":"Use the property at root level instead."}]},"selectionMode":{"displayName":"Selection mode","description":"Profile Card selection mode","type":"string","required":false,"writeback":false,"value":"single","enumValues":["multiple","single"],"propertyEditorValues":{"multiple":{"displayName":"Multiple selection","description":"Multiple items can be selected at the same time."},"single":{"displayName":"Single selection","description":"Only a single item can be selected at a time."}}},"ariaLabel":{"displayName":"Selector Aria Label","description":"Accessible text read by a screen reader while tabbed into the selector.","type":"string"}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"Primary action event","description":"Dispatched when one of the primary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when one of the secondary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}}},"slots":{"body":{"description":"Slot for adding a dynamic form to the card body.","displayName":"Body Slot","minItems":1,"maxItems":1}},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-profile-card.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Profile%20Card%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraprofilecard.html"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-profile-card.svg"}}'})),define("text!oj-sp/profile-card/profile-card-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-profile-card-parent-container oj-helper-overflow-wrap-anywhere"role="group":aria-labelledby="[[uid + \'_primaryText\']]"><oj-bind-if test="[[ mode() === \'desktop\' ]]"><div class="oj-sp-profile-card-desktop-mode oj-sm-only-hide"><oj-action-card class="oj-sp-profile-card-dimensions oj-flex oj-sm-flex-direction-column"><div class="oj-flex-item oj-sp-profile-card-header oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal oj-sm-12"><oj-bind-if test="[[ typeof $properties.caption !== \'undefined\' ]]"><div class="oj-sp-profile-card-header-content"><div class="oj-sp-profile-card-caption oj-sm-padding-8x-top oj-typography-body-xs oj-typography-semi-bold oj-text-color-primary oj-line-clamp-1"><oj-bind-text value="[[ $properties.caption ]]"></oj-bind-text></div></div></oj-bind-if><oj-bind-if test="[[ typeof $properties.caption === \'undefined\' ]]"><div class="oj-sp-profile-card-header-content-empty-state"></div></oj-bind-if></div><div class="oj-sp-profile-card-body oj-flex-item oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal"><div class="oj-sp-profile-card-avatar-container"><oj-avatar class="oj-sp-profile-card-avatar oj-sp-profile-card-avatar-xl"size="xl"initials="[[ $properties.avatar &amp;&amp; $properties.avatar.initials ? $properties.avatar.initials : \' \' ]]"></oj-avatar></div><div class="oj-sm-margin-4x-top"><span :id="[[uid +\'_primaryText\']]":title="[[ $properties.primaryText ]]"class="oj-sp-profile-card-primary-text oj-line-clamp-2 oj-typography-heading-xs oj-text-color-primary"><oj-bind-text value="[[$properties.primaryText]]"></oj-bind-text></span></div><oj-bind-if test="[[ $properties.secondaryText ]]"><div class="oj-sm-margin-1x-top oj-sm-margin-4x-bottom oj-sp-profile-card-secondary-text-container"><span :title="[[ $properties.secondaryText ]]"class="oj-sp-profile-card-secondary-text oj-line-clamp-2 oj-typography-body-md oj-text-color-secondary"><oj-bind-text value="[[$properties.secondaryText]]"></oj-bind-text></span></div></oj-bind-if></div><div class="oj-sp-profile-card-details oj-flex-item oj-sm-padding-6x-bottom oj-sm-padding-4x-horizontal oj-lg-padding-6x-horizontal"><div class="oj-sp-profile-card-badge-container"><oj-bind-if test="[[ hasBadge() ]]"><div :class="[[ `oj-sp-profile-card-badge ${badgeClass()} oj-badge-md oj-sm-margin-4x-bottom` ]]":title="[[$properties.badge ? $properties.badge.text : \'\']]"><oj-bind-text value="[[ $properties.badge.text ]]"></oj-bind-text></div></oj-bind-if></div><oj-bind-slot name="body"></oj-bind-slot></div><oj-bind-if test="[[ !hasFooter() ]]"><div class="oj-sp-profile-card-footer-empty-state oj-flex-item"></div></oj-bind-if><oj-bind-if test="[[ hasFooter() ]]"><div data-oj-clickthrough="disabled"class="oj-sp-profile-card-footer-container oj-flex-item"><oj-sp-card-footer :id="[[uid +\'_footer\']]"class="oj-sp-profile-card-footer"emphasized="false"selector.row-key="[[ $properties.selector ? $properties.selector.rowKey : undefined ]]"selector.selection-mode="[[ $properties.selector ? $properties.selector.selectionMode : undefined ]]"selected-keys="{{ selectedKeys }}"selector.aria-label="[[ $properties.selector ? $properties.selector.ariaLabel : undefined ]]"footer-text.value="[[ $properties.footerText ? $properties.footerText.value : \'\' ]]"footer-text.label="[[ $properties.footerText ? $properties.footerText.label : \'\' ]]"primary-actions="[[ footerPrimaryActions  ]]"secondary-actions="[[ footerSecondaryActions ]]"icon.class="[[ iconClass ]]"avatar.src="[[ $properties.footerAvatar ? $properties.footerAvatar.src : undefined]]"avatar.initials="[[ $properties.footerAvatar ? $properties.footerAvatar.initials : undefined]]"on-sp-primary-action="[[ primaryActionHandler ]]"on-sp-secondary-action="[[ secondaryActionHandler ]]"></oj-sp-card-footer></div></oj-bind-if></oj-action-card></div></oj-bind-if><oj-bind-if test="[[ mode() === \'mobile\' ]]"><div class="oj-sp-profile-card-mobile-mode oj-md-hide"><oj-swipe-actions :id="[[ uid + \'_swipe_actions\' ]]"on-oj-action="[[ swipeActionHandler ]]"><oj-list-item-layout><div slot="selector"><oj-bind-if test="[[ $properties.selector &amp;&amp; $properties.selector.selectionMode === \'multiple\' ]]"><oj-selector :id="[[ uid + \'selector_\' + $properties.selector.rowKey ]]"selection-mode="multiple"selected-keys="{{ selectedKeys }}"row-key="[[ $properties.selector.rowKey ]]":aria-label="[[ $properties.selector.ariaLabel ]]"></oj-selector></oj-bind-if></div><div class="oj-sp-profile-card-avatar-container"slot="leading"><oj-avatar class="oj-sp-profile-card-avatar oj-sp-profile-card-avatar-xs"size="xs"initials="[[ $properties.avatar &amp;&amp; $properties.avatar.initials ? $properties.avatar.initials : \' \' ]]"></oj-avatar></div><div class="oj-sp-profile-card-mobile-text-container"><span :id="[[uid +\'_primaryText\']]":title="[[ $properties.primaryText ]]"class="oj-sp-profile-card-primary-text oj-line-clamp-2 oj-typography-subheading-xs oj-text-color-primary"><oj-bind-text value="[[ $properties.primaryText ]]"></oj-bind-text></span></div><div slot="secondary"class="oj-sp-profile-card-mobile-text-container"><span :title="[[ $properties.secondaryText ]]"class="oj-sp-profile-card-secondary-text oj-line-clamp-1 oj-typography-body-md oj-text-color-secondary"><oj-bind-text value="[[ $properties.secondaryText ]]"></oj-bind-text></span></div></oj-list-item-layout><oj-bind-if test="[[ swipeActions() &amp;&amp; swipeActions().length > 0 ]]"><template slot="end"><oj-bind-if test="[[ moreActions() &amp;&amp; moreActions().length > 0 ]]"><oj-option :title="[[ res.moreActions ]]"value="internalMoreActions"class="oj-sp-profile-card-more-action oj-swipeactions-neutral oj-sp-profile-card-swipe-option"><span class="oj-ux-ico-overflow-horiz"slot="startIcon"></span></oj-option></oj-bind-if><oj-bind-for-each data="[[ swipeActions() ]]"><template data-oj-as="action"><oj-option :title="[[ action.data.label ]]":value="[[ action.data.id ]]":disabled="[[ action.data.display === \'disabled\' ]]":class="[[ \' oj-swipeactions-\' + $current.data.swipeOption + \' oj-sp-profile-card-swipe-option\' ]]"><span slot="startIcon":class="[[ action.data.icon + \' oj-sp-profile-card-swipe-action-icon\' ]]"></span></oj-option></template></oj-bind-for-each></template></oj-bind-if></oj-swipe-actions></div><oj-menu class="oj-sp-profile-card-more-actions-menu"on-oj-menu-action="[[ moreMenuHandler ]]":aria-label="[[ res.actions ]]"open-options.initial-focus="firstItem"><oj-bind-for-each data="[[ moreActions ]]"><template><oj-option :id="[[ uid + \'_moreActions_\' + $current.data.id]]"value="[[ $current.data.id ]]":disabled="[[ $current.data.display === \'disabled\' ]]"><span :class="[[ $current.data.icon ]]"slot="startIcon"></span><oj-bind-text value="[[ $current.data.label ]]"></oj-bind-text></oj-option></template></oj-bind-for-each></oj-menu></oj-bind-if></div></body></html>'})),define("oj-sp/profile-card/profile-card-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojkeyset","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","oj-sp/common/EventDispatcher","oj-sp/card-footer/loader","ojs/ojactioncard","ojs/ojknockout","ojs/ojlistitemlayout","ojs/ojswipeactions"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileCardViewModel=void 0,function(e){e.Desktop="desktop",e.Mobile="mobile"}(c||(c={}));class p{constructor(e){var t,i;this.context=e,this.primaryActionHandler=e=>{d.EventDispatcher.dispatch(d.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()},this.secondaryActionHandler=e=>{d.EventDispatcher.dispatch(d.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()},this.swipeActionHandler=e=>{const t=e.target;t.classList.contains("oj-sp-profile-card-more-action")?this.openMoreActionMenu(t):this.dispatchActionEvent(t.value)},this.moreMenuHandler=(e,t,i)=>{const o=t&&t.id||e.detail.selectedValue;if(!o)throw new Error("Profile Card is unable to fire the action event, unable to determine the targetID");this.dispatchActionEvent(o)},this.openMoreActionMenu=e=>{const t=this.composite.querySelector(".oj-sp-profile-card-more-actions-menu");if(!t)throw new Error("in profile card - cannot find the swipe actions menu element");t.open(event,{launcher:e})};const a=s.getContext(e.element).getBusyContext();this.busyResolve=a.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=o,this.initResponsiveUtils(),this.initMainAvatar(null===(t=this.properties.avatar)||void 0===t?void 0:t.src),this.initFooterAvatar(null===(i=this.properties.footerAvatar)||void 0===i?void 0:i.src),this.initBodyBadge(),this.initFooter(),this.initSelection(this.properties.selector),this.initSwipeActions(),this.busyResolve()}activated(e){n.log(`oj-sp-profile-card ${this.uid} activated`)}connected(e){n.log(`oj-sp-profile-card ${this.uid} connected`)}bindingsApplied(e){n.log(`oj-sp-profile-card ${this.uid} bindingsApplied`)}propertyChanged(e){var t,i;n.log(`oj-sp-profile-card ${this.uid} propertyChanged`),"selectedKeys"===e.property&&e.value?this.selectedKeys(e.value):"avatar"===e.property&&e.value?this.initMainAvatar(null===(t=e.value)||void 0===t?void 0:t.src):"footerAvatar"===e.property&&e.value&&this.initFooterAvatar(null===(i=e.value)||void 0===i?void 0:i.src)}disconnected(e){n.log(`oj-sp-profile-card ${this.uid} disconnected`)}initResponsiveUtils(){const e=l.getFrameworkQuery(l.FRAMEWORK_QUERY_KEY.SM_ONLY),t=r.createMediaQueryObservable(e);this.mode=i.computed(()=>t()?c.Mobile:c.Desktop)}initAvatar(e,t){const i=t?`url('${t}')`:void 0;this.composite.style.setProperty(e,i)}initMainAvatar(e){this.initAvatar("--oj-sp-profile-card-avatar-src",e)}initFooterAvatar(e){this.initAvatar("--oj-sp-profile-card-footer-avatar-src",e)}initBodyBadge(){this.hasBadge=i.computed(()=>this.properties.badge&&this.properties.badge.text&&this.properties.badge.status),this.badgeClass=i.computed(()=>{if(this.hasBadge()){let e="oj-badge";return["danger","warning","success","info"].indexOf(this.properties.badge.status)>=0&&(e+=" oj-badge-"+this.properties.badge.status),["subtle"].indexOf(this.properties.badge.style)>=0&&(e+=" oj-badge-"+this.properties.badge.style),e}return""})}initFooter(){const e=e=>e&&e.length>0&&e.some(e=>e.id&&"off"!==e.display);this.hasFooter=i.computed(()=>e(this.properties.primaryActions)||e(this.properties.secondaryActions)||this.properties.footerText&&(this.properties.footerText.value||this.properties.footerText.label)||this.properties.selector&&"multiple"===this.properties.selector.selectionMode||void 0!==this.properties.footerAvatar||void 0!==this.properties.emphasized||void 0!==this.properties.footerIcon),this.iconClass=i.computed(()=>{if(this.properties.footerIcon){if(this.properties.footerIcon.class)return this.properties.footerIcon.class;if(this.properties.footerIcon.src)return this.properties.footerIcon.src}}),this.footerPrimaryActions=i.computed(()=>this.properties.primaryActions instanceof Array?this.properties.primaryActions:[]),this.footerSecondaryActions=i.computed(()=>this.properties.secondaryActions instanceof Array?this.properties.secondaryActions:[])}initSelection(e){this.selectedKeys=i.observable(this.properties.selector?this.properties.selectedKeys||this.properties.selector.selectedKeys:new a.KeySetImpl),this.selectedKeys.subscribe(e=>{if(this.properties.selectedKeys!==e){this.composite.setProperty("selectedKeys",e)}if(this.properties.selector&&this.properties.selector.selectedKeys!==e){this.composite.setProperty("selector.selectedKeys",e)}})}initSwipeActions(){const e=p.MAX_SWIPE_ACTIONS,t=()=>[...this.properties.primaryActions instanceof Array?this.properties.primaryActions:[],...this.properties.secondaryActions instanceof Array?this.properties.secondaryActions:[]].filter(e=>e.id&&"off"!==e.display);this.swipeActions=i.computed(()=>{const i=t();return(i.length<=e?i:i.slice(0,e-1)).reverse()}),this.moreActions=i.computed(()=>{const i=t();return i.length<=3?[]:i.slice(e-1)})}dispatchActionEvent(e){const t={actionId:e},i=this.properties.primaryActions&&this.properties.primaryActions.find(t=>t.id===e);if(i)return void("disabled"!==i.display&&d.EventDispatcher.dispatch(d.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,this.composite,t));const o=this.properties.secondaryActions&&this.properties.secondaryActions.find(t=>t.id===e);if(!o)throw new Error("in profile card - unkown action id: "+e);"disabled"!==o.display&&d.EventDispatcher.dispatch(d.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,this.composite,t)}}p.MAX_SWIPE_ACTIONS=3,t.ProfileCardViewModel=p})),define("css!oj-sp/profile-card/profile-card-styles",[],(function(){})),define("oj-sp/profile-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./profile-card-view.html","./profile-card-viewModel","css!./profile-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-profile-card",{metadata:JSON.parse(o),view:s,viewModel:a.ProfileCardViewModel})})),define("css!oj-sp/recommendation-card/recommendation-card-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/recommendation-card/recommendation-card",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","css!./recommendation-card-styles","ojs/ojbutton"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendationCard=void 0;let a=class extends s.Component{constructor(e){var t;super(e),this.recommendedActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpRecommendedAction)||void 0===i||i.call(t,{actionId:"recommended"}),e.stopPropagation()},this.dismissalActionHandler=e=>{var t,i;null===(i=(t=this.props).onSpDismissalAction)||void 0===i||i.call(t,{actionId:"dismissal"}),e.stopPropagation()},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)()}render(e){const{description:t}=this.props,i=t?this.uniqueId+"_description":void 0;return(0,s.h)("div",{role:"group","aria-labelledby":this.uniqueId+"_title","aria-describedby":i,class:"oj-sp-recommendation-card-main-container oj-sp-recommendation-card-texture oj-panel oj-sm-padding-6x"},this.renderBadge(),this.renderText(),this.renderActions())}renderBadge(){const{badge:e}=this.props;return e&&(0,s.h)("div",{class:"oj-sp-recommendation-card-badge-container oj-sm-margin-3x-bottom oj-badge oj-badge-"+e.status},(0,s.h)("span",{class:"oj-sp-recommendation-card-badge-text",title:e.text||""},e.text||""))}renderText(){const{cardTitle:e,description:t}=this.props;return(0,s.h)("div",{class:"oj-sp-recommendation-card-text-container"},(0,s.h)("div",{id:this.uniqueId+"_title",class:"oj-sp-recommendation-card-title oj-line-clamp-2 oj-typography-subheading-xs",title:e||""},e||""),t&&(0,s.h)("div",{id:this.uniqueId+"_description",class:"oj-sp-recommendation-card-description oj-sm-margin-2x-top oj-line-clamp-2 oj-typography-body-sm",title:t||""},t))}renderActions(){const{recommendedAction:e,dismissalAction:t}=this.props;return(0,s.h)("div",{class:"oj-sp-recommendation-card-actions-container oj-sm-margin-3x-top"},e&&(0,s.h)("oj-button",{class:"oj-sp-recommendation-card-recommended-action",onojAction:this.recommendedActionHandler,label:e.label},e.label),t&&(0,s.h)("oj-button",{class:"oj-sp-recommendation-card-dismissal-action",chroming:"borderless",onojAction:this.dismissalActionHandler,label:t.label},t.label))}};a._metadata={properties:{cardTitle:{type:"string"},description:{type:"string"},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]}}},recommendedAction:{type:"object",properties:{label:{type:"string"}}},dismissalAction:{type:"object",properties:{label:{type:"string"}}}},events:{spRecommendedAction:{},spDismissalAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,o.customElement)("oj-sp-recommendation-card"),__metadata("design:paramtypes",[Object])],a),t.RecommendationCard=a})),define("oj-sp/recommendation-card/loader",["require","exports","./recommendation-card"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendationCard=void 0,Object.defineProperty(t,"RecommendationCard",{enumerable:!0,get:function(){return i.RecommendationCard}})})),define("oj-sp/scoreboard-metric-card/scoreboard-metric-card-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrendColor=void 0,function(e){e.Neutral="neutral",e.Danger="danger",e.Success="success"}(t.TrendColor||(t.TrendColor={}))})),define("css!oj-sp/scoreboard-metric-card/scoreboard-metric-card-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/scoreboard-metric-card/scoreboard-metric-card",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojvcomponent","preact","ojs/ojlogger","ojs/ojresponsiveknockoututils","./scoreboard-metric-card-types","css!./scoreboard-metric-card-styles","ojs/ojchart","ojs/ojdataprovider"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreboardMetricCard=void 0;let l=class extends s.Component{constructor(e){var t;super(e),this.state={screenRange:"",highContrast:window.matchMedia("(forced-colors: active)").matches},this.mediaQueryChangeListener=e=>{this.setState({highContrast:e.matches})},this.res=Object.assign({},i),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,o.getUniqueId)(),this.chartItemRenderer=this.chartItemRendererImpl.bind(this),this.screenRange=n.createScreenRangeObservable(),this.mediaQueryList=window.matchMedia("(forced-colors: active)"),this.mediaQueryList.addEventListener("change",this.mediaQueryChangeListener)}render(e){const t=this.getBadge();return(0,s.h)("div",{class:`${"sm"===this.state.screenRange?"oj-sp-scoreboard-metric-card-parent-container-phone oj-sm-padding-4x-horizontal oj-sm-padding-4x-top":"oj-sp-scoreboard-metric-card-parent-container oj-sm-padding-6x-horizontal"}\n        oj-flex oj-sm-flex-direction-column\n        ${this.hasSparkChart()?" oj-sp-scoreboard-metric-card-has-spark-chart ":""}\n        ${this.hasBadge()?" oj-sp-scoreboard-metric-card-has-badge ":""}\n        ${"sm"===this.state.screenRange?""+(this.hasMetaText()?" oj-sm-padding-4x-bottom ":" oj-sm-padding-3x-bottom "):""}`},(0,s.h)("div",{class:"oj-flex-item oj-sm-12"},(0,s.h)("div",{class:"oj-flex oj-sm-12 oj-sm-flex-wrap-nowrap\n                      "+("sm"!==this.state.screenRange?"oj-sp-scoreboard-metric-card-title-container oj-sm-align-items-center":"oj-sp-scoreboard-metric-card-title-container-phone")},(0,s.h)("div",{class:"oj-flex-item"},(0,s.h)("span",{title:e.cardTitle,class:"oj-sp-scoreboard-metric-card-title  oj-text-color-primary\n                "+("sm"===this.state.screenRange?"oj-typography-body-md oj-line-clamp-1":"oj-typography-body-sm oj-line-clamp-1")},e.cardTitle)),this.hasBadge()&&(0,s.h)("div",{id:this.uniqueId+"_badge_container",class:`oj-flex-item oj-sm-margin-4x-start oj-sm-flex-0\n                ${"sm"===this.state.screenRange?" oj-sp-scoreboard-metric-card-badge-container-top-padding-phone ":""}\n                oj-sp-scoreboard-metric-card-badge-container`},(0,s.h)("span",{class:"oj-flex"},t)))),(0,s.h)("div",{class:"oj-flex-item oj-sm-12 "+("sm"!==this.state.screenRange?"oj-sp-scoreboard-metric-card-metric-trend-container":"oj-sp-scoreboard-metric-card-metric-trend-container-phone")},(0,s.h)("div",{class:"oj-flex oj-sm-12 oj-sm-align-items-center"},(0,s.h)("div",{class:"oj-flex-item oj-flex oj-sm-flex-items-initial oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sp-scoreboard-metric-card-metric-container"},(0,s.h)("div",{class:"oj-sp-scoreboard-metric-card-metric oj-flex-item oj-text-color-primary\n                         oj-typography-bold oj-typography-body-md oj-line-clamp-1",title:e.metricText},e.metricText),(0,s.h)("div",{class:"oj-flex-item oj-sm-margin-2x-start oj-sp-scoreboard-metric-card-period-change-container"},this.renderPeriodChangeIndicator())),(0,s.h)("div",{class:"oj-sm-margin-4x-start oj-flex-item oj-sm-flex-0"},this.renderSparkChart()))),(0,s.h)("div",{class:"oj-flex-item oj-sm-12 oj-sm-margin-0x-top"},(0,s.h)("span",{title:e.metaText,class:"oj-sp-scoreboard-metric-card-meta-text oj-typography-body-xs oj-text-color-secondary oj-line-clamp-1"},e.metaText)))}componentDidMount(){this.calculateBadgeSize(),this.setState({screenRange:this.screenRange()}),this.screenRange.subscribe(e=>{this.setState({screenRange:e})})}componentDidUpdate(){this.calculateBadgeSize()}calculateBadgeSize(){const e=document.getElementById(this.uniqueId+"_badge_container");e&&e.style.setProperty("--oj-sp-scoreboard-metric-card-badge-size",e.getBoundingClientRect().width+"px")}getChartColor(e){if(this.state.highContrast)return;let t="#161513";if(this.hasBadge())return t;if(this.props.periodChangeIndicator&&0===this.props.periodChangeIndicator.value)return t;switch(e){case"neutral":break;case"danger":t="#D63B25";break;case"success":t="#508223";break;default:a.error("[oj-sp-scoreboard-metric-card] the trend color property is not valid!")}return t}getObjectProperty(e,t){return t.split(".").reduce((e,t)=>e&&"undefined"!==e[t]?e[t]:void 0,e)}getValueFromData(e){var t;return this.getObjectProperty(e,(null===(t=this.props.trendChart)||void 0===t?void 0:t.valueField)||"value")}hasSparkChart(){return null!=this.props.trendChart&&null!=this.props.trendChart.data}renderSparkChart(){var e,t;if(this.hasSparkChart()){const i=this.props.trendChartTitle?this.props.trendChartTitle:"";return(0,s.h)(s.Fragment,null,(0,s.h)("oj-spark-chart",{tabIndex:-1,class:"oj-sp-scoreboard-metric-card-trend-chart",translations:{labelNoData:" "},data:null===(e=this.props.trendChart)||void 0===e?void 0:e.data,type:null===(t=this.props.trendChart)||void 0===t?void 0:t.type,title:i,"aria-label":i,"line-type":"curved",color:this.getChartColor(this.props.trendColor)},(0,s.h)("template",{slot:"itemTemplate",render:this.chartItemRenderer})))}return null}hasPeriodChangeIndicator(){return null!=this.props.periodChangeIndicator&&null!=this.props.periodChangeIndicator.value}getIndicatorColorClass(){let e="oj-text-color-primary";if(this.hasBadge())return e;if(this.props.periodChangeIndicator&&0===this.props.periodChangeIndicator.value)return e;switch(this.props.trendColor){case"neutral":break;case"danger":e="oj-text-color-danger";break;case"success":e="oj-text-color-success";break;default:a.error("[oj-sp-scoreboard-metric-card] the trend color property is not valid!")}return e}renderPeriodChangeIndicator(){if(this.hasPeriodChangeIndicator()){const e=this.props.periodChangeIndicator.value>0?" oj-ux-ico-arrow-up":" oj-ux-ico-arrow-down",t=this.props.periodChangeIndicator.value>0?""+this.res.arrowUp:""+this.res.arrowDown;return(0,s.h)(s.Fragment,null,(0,s.h)("span",{class:"oj-sp-scoreboard-metric-card-period-change oj-flex oj-sm-flex-wrap-nowrap oj-align-items-center oj-typography-body-sm "+this.getIndicatorColorClass()},0===this.props.periodChangeIndicator.value||(0,s.h)("span",{role:"img","aria-label":""+t,class:"oj-ux-icon-size-4x "+e}),(0,s.h)("span",{class:"oj-sm-margin-0x-start"},Math.abs(this.props.periodChangeIndicator.value)+"%"," "),(0,s.h)("span",{class:"oj-sm-margin-1x-start"},this.props.periodChangeIndicator.comparisonPeriod," ")))}return null}hasMetaText(){return null!=this.props.metaText&&""!==this.props.metaText}chartItemRendererImpl(e){return(0,s.h)("oj-spark-chart-item",{value:this.getValueFromData(e.data)})}hasBadge(){return this.props.badge&&this.props.badge.text&&["default","neutral","danger","warning","success","info"].indexOf(this.props.badge.status)>=0}getBadge(){if(this.hasBadge()){const e=this.badgeClass();return(0,s.h)("span",{title:this.props.badge.text,class:`oj-sp-scoreboard-metric-card-badge oj-sp-scoreboard-metric-card-truncate-one-line ${e} oj-badge-sm`},this.props.badge.text)}return{}}badgeClass(){if(this.hasBadge()){let e="oj-badge oj-badge-subtle";return["danger","warning","success","info"].indexOf(this.props.badge.status)>=0&&(e+=" oj-badge-"+this.props.badge.status),e}return""}};l.defaultProps={trendColor:r.TrendColor.Neutral},l._metadata={properties:{cardTitle:{type:"string"},trendColor:{type:"string",enumValues:["neutral","danger","success"]},metricText:{type:"string"},metaText:{type:"string"},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["default","neutral","danger","warning","success","info"]}}},trendChart:{type:"object",properties:{type:{type:"string",enumValues:["line","lineWithArea"]},data:{type:"DataProvider"},valueField:{type:"string"}}},trendChartTitle:{type:"string"},periodChangeIndicator:{type:"object",properties:{value:{type:"number"},comparisonPeriod:{type:"string"}}}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},l=__decorate([(0,o.customElement)("oj-sp-scoreboard-metric-card"),__metadata("design:paramtypes",[Object])],l),t.ScoreboardMetricCard=l})),define("oj-sp/scoreboard-metric-card/loader",["require","exports","./scoreboard-metric-card"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreboardMetricCard=void 0,Object.defineProperty(t,"ScoreboardMetricCard",{enumerable:!0,get:function(){return i.ScoreboardMetricCard}})})),define("oj-sp/scoreboard/components/InsertedCardCheck",["require","exports","preact/hooks","preact"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InsertedCardCheck=void 0;t.InsertedCardCheck=e=>((0,i.useEffect)(()=>{const t=new Event("cardInserted");e.element.dispatchEvent(t)},[]),(0,o.h)(o.Fragment,null))})),define("css!oj-sp/scoreboard/scoreboard-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/scoreboard/scoreboard",["require","exports","oj-sp/scoreboard-metric-card/loader","ojs/ojcontext","ojs/ojresponsiveutils","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojkeyset","ojs/ojvcomponent","preact","./components/InsertedCardCheck","css!./scoreboard-styles","ojs/ojconveyorbelt","ojs/ojlistitemlayout","ojs/ojlistview","ojs/ojnavigationlist","ojs/ojdataprovider"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scoreboard=void 0;let c=class extends l.Component{constructor(e){var t;super(e),this.state={focusedCardId:""},this.initConveyorBelt=async()=>{const e=this.element.querySelector(`#${this.uniqueId}_cb`),t=e.querySelector(".oj-conveyorbelt-item"),i=this.element.querySelector(`#${this.uniqueId}_lv`),o=this.element.querySelectorAll(".oj-sp-scoreboard-card-container");requestAnimationFrame(()=>{this.props.data.getTotalSize().then(s=>{o&&o.length!==s&&i.refresh(),e&&null===t&&e.refresh()})})},this.setRef=e=>{this.element=e},this.getKpiCards=e=>{const t=e.data.id,o=e.data.title,s=e.data.meta,a=e.data.metric,n=e.data.badge,r=e.data.trendChart,c=e.data.trendColor,p=e.data.trendChartTitle,u=e.data.periodChangeIndicator?e.data.periodChangeIndicator.value:null,h=e.data.periodChangeIndicator?e.data.periodChangeIndicator.comparisonPeriod:null,m="single"===this.props.selectionMode&&e.data.id===this.props.selection?"oj-sp-scoreboard-selected":"",g=e.index>0?(0,l.h)("div",{class:"oj-sp-scoreboard-vertical-divider"}):null;e.index;return(0,l.h)("div",{class:`oj-sp-scoreboard-card-container ${m} metric-card-border`,id:`${this.uniqueId}_kpi_${t}`},0===e.index&&(0,l.h)(d.InsertedCardCheck,{element:this.element}),(0,l.h)("div",{class:"oj-sp-scoreboard-aligner"},(0,l.h)(i.ScoreboardMetricCard,{class:"oj-sp-metric-card-compact oj-sp-scoreboard-metric-card",cardTitle:o,badge:n,trendChart:r,trendColor:c,trendChartTitle:p,metaText:s,metricText:a,periodChangeIndicator:{value:u,comparisonPeriod:h}})),g)},this.getSelectionKeySet=()=>{const e=new Set;return this.props.selection&&e.add(this.props.selection),new n.KeySetImpl(e)},this.focusElement=e=>{const t=e.target,i=this.state.focusedCardId?this.state.focusedCardId:void 0;t.querySelector("#"+i)&&this.setScrollOnFocusedCard()},this.setCurrentScrollPosition=e=>{const t=this.element.querySelector("#oj-sp-scoreboard_kpi_"+e.detail.key),i=this.element.querySelector(`#${this.uniqueId}_cb`);t&&i&&requestAnimationFrame(()=>{i.scrollElementIntoView(t),this.setState({focusedCardId:"oj-sp-scoreboard_kpi_"+e.detail.key})})},this.setScrollOnFocusedCard=()=>{const e=this.state.focusedCardId;if(e){const t=this.element.querySelector("#"+e),i=this.element.querySelector(`#${this.uniqueId}_cb`);t&&i&&requestAnimationFrame(()=>{i.scrollElementIntoView(t)})}},this.setSelection=e=>{var t,i;if(this.element){const o=e.detail.value[0]?e.detail.value[0]:this.props.selection;this.removeSelectionClass(),this.setSelectionClass(o),null===(i=(t=this.props).onSelectionChanged)||void 0===i||i.call(t,o);const s=this.element.querySelector(`#${this.uniqueId}_cb`),a=this.element.querySelector("#oj-sp-scoreboard_kpi_"+o);a&&s.scrollElementIntoView(a)}},this.removeSelectionClass=()=>{this.element.querySelectorAll("oj-sp-scoreboard .oj-sp-scoreboard-selected").forEach(e=>{e.classList.remove("oj-sp-scoreboard-selected")})},this.setSelectionClass=e=>{const t=this.element.querySelector(`#${this.uniqueId}_kpi_${e}`);t&&t.classList.add("oj-sp-scoreboard-selected")},this.handleAnimateStart=e=>{e.preventDefault(),e.detail.endCallback()},this.getFirstKpiData=async()=>{var e;if(!this.props.data)return null;const t=await this.props.data.fetchFirst()[Symbol.asyncIterator](),i=await t.next();return i.value.data?null===(e=i.value.data[0])||void 0===e?void 0:e.id:null},this.res=Object.assign({},a),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,r.getUniqueId)();const o=s.getFrameworkQuery(s.FRAMEWORK_QUERY_KEY.SM_ONLY);this.mediaQuery=window.matchMedia(o)}shouldComponentUpdate(e,t){const i=this.props.selectionMode!==e.selectionMode,o=this.props.data!==e.data,s=this.state.focusedCardId!==t.focusedCardId;return!(!i&&!o)||!s}render(e){const t="none"===this.props.selectionMode?"oj-sp-scoreboard-selection-disabled":null;return(0,l.h)("div",{ref:this.setRef},(0,l.h)("oj-conveyor-belt",{id:this.uniqueId+"_cb",class:"scoreboard-modified-variables",tabIndex:0,"arrow-visibility":"auto",role:"group","aria-label":this.res.listOfScoreCards},(0,l.h)("oj-list-view",{id:this.uniqueId+"_lv",class:""+t,display:"card",onojAnimateStart:this.handleAnimateStart,"aria-label":this.res.listOfScoreCards,data:this.props.data,selectionMode:this.props.selectionMode,selected:this.getSelectionKeySet(),onselectionChanged:this.setSelection,onFocus:this.focusElement,onojBeforeCurrentItem:this.setCurrentScrollPosition,selectionRequired:"none"!==this.props.selectionMode},(0,l.h)("template",{slot:"itemTemplate","data-oj-as":"item",render:this.getKpiCards}))))}componentDidMount(){var e,t,i,s;null===(t=(e=this.props).onSpScoreboardMounted)||void 0===t||t.call(e),null===(s=(i=this.props).onSelectionChanged)||void 0===s||s.call(i,"none"===this.props.selectionMode?null:this.props.selection),this.props.selection||"none"===this.props.selectionMode||this.getFirstKpiData().then(e=>{var t,i;null===(i=(t=this.props).onSelectionChanged)||void 0===i||i.call(t,e)}),this.element.addEventListener("cardInserted",this.initConveyorBelt);o.getContext(this.element).getBusyContext().whenReady().then(()=>{this.initConveyorBelt()})}componentDidUpdate(e){e.selectionMode!==this.props.selectionMode&&this.onSelectionModeListener()}componentWillUnmount(){this.element.removeEventListener("cardInserted",this.initConveyorBelt)}onSelectionModeListener(){var e,t;"none"===this.props.selectionMode&&(null===(t=(e=this.props).onSelectionChanged)||void 0===t||t.call(e,null),this.removeSelectionClass())}};c.defaultProps={selectionMode:"none"},c._metadata={properties:{selection:{type:"string",writeback:!0},data:{type:"DataProvider"},selectionMode:{type:"string",enumValues:["none","single"]}},events:{spScoreboardMounted:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},c=__decorate([(0,r.customElement)("oj-sp-scoreboard"),__metadata("design:paramtypes",[Object])],c),t.Scoreboard=c})),define("oj-sp/scoreboard/loader",["require","exports","./scoreboard"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scoreboard=void 0,Object.defineProperty(t,"Scoreboard",{enumerable:!0,get:function(){return i.Scoreboard}})})),define("text!oj-sp/selection-chart-card/component.json",[],(function(){return'{"name":"selection-chart-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Selection Chart Card","description":"A selection chart card is a type of analytic card that displays data visualization charts for selecting a data series for taking action.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0"},"properties":{"cardTitle":{"displayName":"Title","description":"The title of the card. Displayed first in the header section.","writeback":false,"translatable":true,"type":"string","required":false},"metricText":{"displayName":"Metric","description":"The metric text. Displayed second in the header section.","writeback":false,"translatable":true,"type":"string","required":false},"metaText":{"displayName":"Metadata Text","description":"The Metadata text. Displayed after the metric text.","writeback":false,"translatable":true,"type":"string","required":false},"type":{"displayName":"Chart Type","description":"The type of the chart displayed in the card content area.","type":"string","writeback":false,"required":true,"enumValues":["bar","pie"],"propertyEditorValues":{"bar":{"displayName":"Bar Chart","description":"Displays a Bar Chart in the content area. Please note that any group property is ignored to preserve the user interaction of selecting a data series for the purposes of filtering."},"pie":{"displayName":"Pie Chart","description":"Displays a Pie Chart with Redwood styling in the content area. Please note that any group property is ignored to preserve the user interaction of selecting a data series for the purposes of filtering."}}},"selection":{"displayName":"Chart Selection","description":"An array containing the ids (keys) of the initially selected items. The id is determined by the data provider (either by default or through the keyAttributes property). This property can write back with the current selection. When the selection changes, the selectionChanged is fired with additional information corresponding to the selected objects through the selectionData.","type":"Array","writeback":true,"required":false},"selectionMode":{"displayName":"Chart Selection Mode","description":"The type of selection behavior that is enabled on the chart. If single or multiple is specified, selection gestures will be enabled, and the chart\'s selection styling will be applied to all items specified by the selection attribute.","type":"string","writeback":false,"required":false,"value":"single","enumValues":["single","multiple"],"propertyEditorValues":{"single":{"displayName":"Single Selection","description":"Only a single item can be selected at a time."},"multiple":{"displayName":"Multiple Selection","description":"Multiple items can be selected at the same time."}}},"data":{"displayName":"Chart Data Provider","description":"A DataProvider representing the chart Data. The oj.DataProvider can either have an arbitrary data shape, in which case you must provide the value-field, series-field and group-field properties. If the data has the same interface as the ojChart.DataItem the mapping through \'value-field\', \'series-field\' and \'group-field\' is not necessary. Please refer to the readme, for more information on the restrictions related to the data (for example, max of 3 series)","type":"oj.DataProvider","writeback":false,"required":true},"valueField":{"displayName":"Chart Value Field Mapping","description":"Can be used to map the chart values to the data. For nested properties, you can use the dot notation, ex. (myObject.myNestedProperty.myValue). This field is only necessary when the data does not follow the ojChart.DataItem","type":"string","writeback":false,"required":false},"seriesField":{"displayName":"Chart Series Field Mapping","description":"Can be used to map the chart series to the data. For nested properties, you can use the dot notation. This field is only necessary when the data does not follow the ojChart.DataItem.","type":"string","writeback":false,"required":false},"groupField":{"displayName":"Chart Group Field Mapping","description":"Can be used to map the groups the items in the charts. For nested properties, you can use the dot notation. This field is only necessary when the data does not follow the ojChart.DataItem.","type":"string","writeback":false,"required":false}},"methods":{},"events":{"ojSelectionDataChanged":{"displayName":"Selection data changed Event","description":"Fired when the chart selection is changed.","bubbles":true,"cancelable":true,"detail":{"selectionData":{"description":"An array containing objects describing the selected data items","type":"Array<object>|null","extension":{"vbdt":{"itemProperties":{"data":{"description":"The data of the item, if one was specificed","type":"object"},"itemData":{"description":"The row data object of the drilled item. This will only be set if a DataProvider is being used.","type":"object"},"groupData":{"description":"An array of data for the group the drilled object belongs to.","type":"object"},"seriesData":{"description":"The data for the series of the drilled object","type":"object"}}}}}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Analytics","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-selection-chart-48.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Selection%20Chart%20Card%20&Test%20Adapter=docs/testAdapterAPI/classes/ojspectraselectionchartcard.html"},"vbdt":{}},"icon":{"iconPath":"extension/catalog/images/ico-selection-chart-48.svg"}}'})),define("text!oj-sp/selection-chart-card/selection-chart-card-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-selection-chart-card-parent-container oj-panel oj-flex oj-sm-flex-direction-column oj-sm-padding-6x"><oj-bind-if test="[[ $properties.cardTitle || $properties.metricText || $properties.metaText ]]"><div :class="[[ `oj-flex-item oj-sm-12 oj-flex oj-sm-flex-direction-row oj-sm-flex-wrap-nowrap ${ $properties.type !== \'pie\' ? \'oj-sm-margin-9x-bottom\' : \'\'}`]]"><div class="oj-sp-selection-chart-card-header-text-container oj-flex oj-sm-flex-1 oj-sm-flex-direction-column oj-sm-12 oj-sm-flex-wrap-nowrap"><span :title="[[ $properties.cardTitle ]]"class="oj-sp-selection-chart-card-title oj-sm-flex-item oj-typography-body-lg oj-sp-selection-chart-card-truncate-one-line"><oj-bind-text value="[[ $properties.cardTitle ]]"></oj-bind-text></span><span :title="[[ $properties.metricText ]]"class="oj-sp-selection-chart-card-metric oj-sm-flex-item oj-typography-heading-xs oj-sp-selection-chart-card-truncate-one-line"><oj-bind-text value="[[ $properties.metricText ]]"></oj-bind-text></span><span :title="[[ $properties.metaText ]]"class="oj-sp-selection-chart-card-meta-text oj-sm-flex-item oj-sm-margin-1x-top oj-typography-body-md oj-text-color-secondary oj-line-clamp-2"><oj-bind-text value="[[ $properties.metaText ]]"></oj-bind-text></span></div></div></oj-bind-if><div :class="[[ `oj-sp-selection-chart-card-content oj-flex-item oj-sm-12 oj-sp-selection-chart-card-content-${$properties.type}` ]]"><oj-bind-for-each data="[[ getChartTypes() ]]"><template><oj-bind-if test="[[ $properties.type === $current.data ]]"><oj-chart type="[[ chartType ]]"data="[[ $properties.data ]]":class="[[ `oj-sp-selection-chart-card-chart-element oj-sp-selection-chart-card-${$properties.type}`]]"stack="off"hide-and-show-behavior="none"animation-on-display="auto"animation-on-data-change="none"x-axis.tick-label.rendered="off"orientation="vertical"legend.position="bottom"selection-mode="[[ $properties.selectionMode ]]"selection="{{ $properties.selection }}"style-defaults="[[ chartStyles() ]]"drilling="off"drag-mode="off"highlight-match="any"highlighted-categories="[[ $properties.selection ]]"on-selection-changed="[[ handleSelectionChange ]]"><template slot="groupTemplate"><div></div></template><template slot="itemTemplate"data-oj-as="item"><oj-chart-item value="[[ getValueFromData(item.data) ]]"group-id="[[ getGroupFromData(item.data) ]]"series-id="[[ getSeriesFromData(item.data) ]]"categories="[[ [ item.key ] ]]"></oj-chart-item></template></oj-chart></oj-bind-if></template></oj-bind-for-each></div></div></body></html>'})),define("oj-sp/selection-chart-card/selection-chart-card-type",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionChartCardType=void 0,function(e){e.Bar="bar",e.Pie="pie"}(t.SelectionChartCardType||(t.SelectionChartCardType={}))})),define("oj-sp/selection-chart-card/selection-chart-card-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","./selection-chart-card-type","ojs/ojchart","ojs/ojlegend"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionChartCardViewModel=void 0;t.SelectionChartCardViewModel=class{constructor(e){this.context=e,this.handleSelectionChange=e=>{this.dispatchEvent("ojSelectionDataChanged",e.detail)};const t=s.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=o,this.initChart(),this.busyResolve()}activated(e){a.log(`oj-sp-selection-chart-card ${this.uid} activated`)}connected(e){a.log(`oj-sp-selection-chart-card ${this.uid} connected`)}bindingsApplied(e){a.log(`oj-sp-selection-chart-card ${this.uid} bindingsApplied`)}propertyChanged(e){a.log(`oj-sp-selection-chart-card ${this.uid} propertyChanged`)}disconnected(e){a.log(`oj-sp-selection-chart-card ${this.uid} disconnected`)}getChartTypes(){return Object.keys(n.SelectionChartCardType).map(e=>n.SelectionChartCardType[e])}getValueFromData(e){return this.getObjectProperty(e,this.properties.valueField||"value")}getGroupFromData(e){return[this.getObjectProperty(e,this.properties.groupField||"group")]}getSeriesFromData(e){return this.getObjectProperty(e,this.properties.seriesField||"series")}getObjectProperty(e,t){return t.split(".").reduce((e,t)=>e&&"undefined"!==e[t]?e[t]:void 0,e)}getChartElement(){return this.composite.querySelector(".oj-sp-selection-chart-card-chart-element")}initChart(){this.chartType=i.computed(()=>this.getChartType()),this.chartStyles=i.computed(()=>this.getChartStyles())}getChartType(){switch(this.properties.type){case"bar":return n.SelectionChartCardType.Bar;case"pie":return n.SelectionChartCardType.Pie;default:if(this.properties.type)throw new Error("[oj-sp-selection-chart-card] unkown value sent in the type property "+this.properties.type);return null}}getChartStyles(){switch(this.getChartType()){case n.SelectionChartCardType.Bar:return{maxBarWidth:36};case n.SelectionChartCardType.Pie:return{pieInnerRadius:.6};default:return null}}dispatchEvent(e,t){const i={bubbles:!0};t&&(i.detail=t),this.composite.dispatchEvent(new CustomEvent(e,i))}}})),define("css!oj-sp/selection-chart-card/selection-chart-card-styles",[],(function(){})),define("oj-sp/selection-chart-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./selection-chart-card-view.html","./selection-chart-card-viewModel","css!./selection-chart-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-selection-chart-card",{metadata:JSON.parse(o),view:s,viewModel:a.SelectionChartCardViewModel})})),define("text!oj-sp/select-single-currency/component.json",[],(function(){return'{"name":"select-single-currency","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Select Single Currency","description":"Select Single Currency is used to allow the user to change a monetary value from one currency to another and Format foreign currencies according to the userâs mental locale","type":"composite","icon":{"iconPath":"extension/catalog/images/ico-select-single-currency.svg"},"dependencies":{"oj-sp-select-single-item-template":"2404.0.0","oj-sp-smart-select-single":"2404.0.0"},"properties":{"currencyAttributes":{"description":"Currency Attributes can be Currency with Name, Currency with Code, Currency with Name and Code, Currency with Name and Symbol, Currency with Code and Symbol, Currency with Name, Code and Symbol","displayName":"Currency Attributes","enumValues":["name","code","nameWithCode","nameWithoutSymbol","codeWithoutSymbol","nameWithCodeWithoutSymbol"],"propertyEditorValues":{"name":{"displayName":"Currency Name and Symbol","description":"Currency Name and Currency Symbol will be displayed within the currency list"},"code":{"displayName":"Currency Code and Symbol","description":"Currency Code and Currency Symbol will be displayed within the currency List"},"nameWithCode":{"displayName":"Currency Name, Code, and Symbol","description":"Currency Name, Currency Code and Currency Symbol will be displayed within the currency list"},"nameWithoutSymbol":{"displayName":"Currency Name Only","description":"Only Currency Name will be displayed within the currency list"},"codeWithoutSymbol":{"displayName":"Currency Code Only","description":"Only Currency Code will be displayed within the currency List"},"nameWithCodeWithoutSymbol":{"displayName":"Currency Name and Code","description":"Only Currency Name and Currency Code will be displayed within the currency list"}},"type":"string","value":"nameWithCodeWithoutSymbol"},"currencyData":{"displayName":"Currency Data","description":"Currency Data of all enabled currencies","type":"oj.DataProvider","writeback":false},"describedBy":{"displayName":"Described By","description":"","type":"string"},"disabled":{"displayName":"Disabled","description":"Disabled mode of selector","type":"boolean","value":false,"writeback":false},"displayOptions":{"displayName":"Display Options","description":"","type":"object","properties":{"messages":{"description":"","type":"string","enumValues":["display","none"]}}},"help":{"displayName":"Help","description":"Component help information","type":"object","properties":{"instruction":{"description":"Represents advisory information for the component, such as would be appropriate for a tooltip. This information is appended to the basic formatting information supplied for the selector type","type":"string"}}},"helpHints":{"displayName":"Help Hints","description":"Represents hints for oj-form-layout element to render help information on the label of the component","type":"object","translatable":true,"properties":{"definition":{"description":"Hint for help definition text associated with the label","type":"string","translatable":true},"source":{"description":"Hint for help source email associated with the label.","type":"string","translatable":true}}},"labelEdge":{"displayName":"Label Edge","description":"Specifies how the label of the component is aligned when the label-hint attribute is set on the component","type":"string","writeback":false,"enumValues":["inside","none","provided"],"propertyEditorValues":{"inside":{"description":"The label floats over the input element but moves up on focus or when the component has a value.","displayName":"inside"},"none":{"description":"The component will not have a label, regardless of whether it\'s in an oj-form-layout or not.","displayName":"none"},"provided":{"description":"Label is provided by the parent if the parent is an oj-form-layout.","displayName":"provided"}},"binding":{"consume":{"name":"labelEdge"}}},"labelHint":{"displayName":"Label Hint","description":"Label hint by Dynamic UI","type":"string","writeback":false,"translatable":true},"labelledBy":{"displayName":"Labelled By","description":"","type":"string"},"messagesCustom":{"displayName":"Messages Custom","description":"","type":"Array","writeback":true},"metadata":{"displayName":"Metadata","description":"Metadata from Dynamic UI","type":"Object","writeback":false},"placeholder":{"displayName":"Placeholder","description":"Placeholder for the Select Single Currency","type":"string","translatable":true,"writeback":false},"readonly":{"displayName":"Read-only","description":"Read only mode of operation, default value is false","type":"boolean","value":false,"writeback":false,"binding":{"consume":{"name":"readonly"}}},"required":{"displayName":"Required","description":"Component required true or not","type":"boolean","value":false,"writeback":false},"suggestions":{"type":"object","description":"Suggestions helps decorating the data provider metadata based on the each item with the help of suggestions configuration.","displayName":"Suggestions","properties":{"maxSuggestions":{"type":"number","description":"Limits number of suggestions."},"subject":{"type":"string","description":"Subject is a single required property and is unique identifier of suggestions. Format to configure Subject is a colon-separated text string - <service_id>::<operation_id>::<attribute>."},"policyHint":{"type":"string","description":"Decides whether to use default behavior, predefine specific algorithm or expose this property to be populated by component users and from Business Object metadata.","enumValues":["mfu","mru","ai"],"propertyEditorValues":{"mfu":{"description":"Used to get the frequently used suggestions.","displayName":"MFU"},"mru":{"description":"Used to get the recently used suggestions.","displayName":"MRU"},"ai":{"description":"AI recommendations based on multiple factors.","displayName":"AI"}}},"context":{"type":"object","description":"Context property allows to specify dependencies on current field. Format to configure Context is a stringified JSON - {\'<service_id>::<operation_id>::<attribute>\': <parent_value_variable>}."},"softContext":{"type":"object","description":"Soft Context property allows to specify dependencies on current field with other components. Format to configure Soft context is a stringified JSON - {\'<service_id>::<operation_id>::<attribute>\': <dependent_value_variable>}."}}},"userAssistanceDensity":{"displayName":"User Assistance Density","description":"","type":"string","enumValues":["efficient","compact","reflow"],"propertyEditorValues":{"efficient":{"description":"The component\'s messages, help, hints, and required are all shown inline under the field with reserved space underneath."},"compact":{"description":"The component\'s messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required."},"reflow":{"description":"If reflow, messages, help, hints, and required are all shown inline under the field with no reserved space."}},"binding":{"consume":{"name":"userAssistanceDensity"}}},"valid":{"displayName":"Valid","description":"The current valid state of the component.","type":"string","value":"valid","enumValues":["invalidHidden","invalidShown","pending","valid"],"propertyEditorValues":{"invalidHidden":{"description":"The component has invalid messages hidden and no invalid messages showing. An invalid message is one with severity \'error\' or higher."},"invalidShown":{"description":"The component has invalid messages showing. An invalid message is one with severity \'error\' or higher."},"pending":{"description":"The component is waiting for the validation state to be determined."},"valid":{"description":"The component is valid."}},"writeback":true,"readOnly":true,"visible":false},"value":{"displayName":"Value","description":" Select Single Currency value","type":"string","writeback":true},"valueItem":{"displayName":"Value Item","description":"Used to set initial value of the selection in an object with both key and data. Compared to using value, valueItem increases performance on page load since no fetchByKeys REST invokation is involved.","type":"object","writeback":true}},"methods":{"focus":{"description":"Focuses on the component."},"reset":{"description":"Resets the various messages arrays and restore UI to reflect the current valid value of the component","return":"void"},"refresh":{"description":"Refreshes the component. Usually called after dom changes have been made."},"showMessages":{"description":"Takes all deferred messages and shows them. It then updates the valid property; e.g., if the valid state was \'invalidHidden\' before showMessages(), the valid state will become \'invalidShown\' after showMessages(). If there were no deferred messages this method simply returns.","return":"void"},"validate":{"description":"Validates the component\'s value using all validators registered on the component and also performs server side validation","return":"Promise<string>"}},"events":{},"slots":{},"extension":{"catalog":{"category":"Redwood Forms & Inputs","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Select%20Single%20Currency%20&Test%20Adapter%20=docs/testAdapterAPI/classes/oJSpectraSelectSingleCurrency.html","coverImage":"extension/catalog/images/ico-select-single-currency.svg"},"vbdt":{"pi":{"layouts":{"general":{"customizers":[{"propertyName":"labelHint"},{"propertyName":"placeholder"},{"propertyName":"required"},{"propertyName":"disabled"},{"propertyName":"readonly"},{"propertyName":"currencyAttributes"},{"displayName":"Suggestions","type":"heading","subHeading":false,"underline":true},{"propertyName":"suggestions.subject","displayName":"Subject"},{"propertyName":"suggestions.policyHint","displayName":"Policy Hint","type":"enumeration","propertyEditorValues":{"ai":{"description":"AI recommendations based on multiple factors.","displayName":"AI"},"mfu":{"description":"Used to get the frequently used suggestions.","displayName":"MFU"},"mru":{"description":"Used to get the recently used suggestions.","displayName":"MRU"}}},{"propertyName":"suggestions.maxSuggestions","displayName":"Maximum Suggestions"},{"propertyName":"suggestions.context","displayName":"Context"},{"propertyName":"suggestions.softContext","displayName":"Soft Context"},{"displayName":" ","type":"heading","subHeading":false,"underline":true}]},"data":{"customizers":[{"propertyName":"value"},{"propertyName":"currencyData"}]}}}}}}'})),define("text!oj-sp/select-single-currency/select-single-currency-view.html",[],(function(){return'<html><head></head><body><div><oj-sp-smart-select-single :id="[[$uniqueId+\'_selector\']]"data="[[$properties.currencyData]]"value="{{$properties.value}}"value-item="{{$properties.valueItem}}"label-hint="[[$properties.labelHint]]"item-text="CurrencyCode"readonly="[[$properties.readonly]]"valid="{{properties.valid}}"placeholder="[[$properties.placeholder]]"disabled="[[$properties.disabled]]"required="[[$properties.required]]"label-edge="[[$properties.labelEdge]]"help="[[help]]":aria-label="[[$properties.labelHint]]"described-by="[[$properties.describedBy]]"labelled-by="[[$properties.labelledBy]]"messages-custom="[[$properties.messagesCustom]]"user-assistance-density="[[$properties.userAssistanceDensity]]"suggestions="[[suggestions]]"><template slot="collectionTemplate"data-oj-as="optionData"><oj-list-view aria-label="select results"selection-mode="single"class="oj-listview-item-padding-off oj-sm-padding-2x-bottom oj-select-results"data="[[optionData.data]]"selected="[[optionData.selected]]"on-oj-item-action="[[optionData.handleRowAction]]"><template slot="itemTemplate"data-oj-as="item"><oj-sp-select-single-item-template :id="[[\'select-single-item-template\'+ $current.index]]"primary-text="[[[\'name\', \'nameWithCode\', \'nameWithoutSymbol\', \'nameWithCodeWithoutSymbol\'].includes($properties.currencyAttributes) ? item.data.Name : undefined]]"short-text="[[[\'code\', \'nameWithCode\', \'codeWithoutSymbol\', \'nameWithCodeWithoutSymbol\'].includes($properties.currencyAttributes) ? item.data.CurrencyCode : undefined]]"meta-text="[[[\'name\', \'code\', \'nameWithCode\'].includes($properties.currencyAttributes) ? item.data.Symbol : undefined]]"></oj-sp-select-single-item-template></template></oj-list-view></template></oj-sp-smart-select-single></div></body></html>'})),define("css!oj-sp/smart-select-single/smart-select-single-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/smart-select-single/smart-select-single",["require","exports","ojs/ojvcomponent","ojs/ojvcomponent-binding","preact","oj-oars/resource/api","ojs/ojtracer","css!./smart-select-single-styles","ojs/ojselectsingle","ojs/ojdataprovider"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSelectSingle=void 0;const r=Symbol.for("trigger");let l=class extends s.Component{constructor(e){var t;super(e),this.selectionStartTime=void 0,this.focusEventHandler=e=>{this.selectionStartTime=Date.now()},this.initTelemetry=()=>{this.tracer=(0,n.getTracerProvider)().getTracer("oj-sp-smart-select-single");const e=new Map;this.telemetryContext={getValue:t=>e.get(t),setValue(t,i){return e.set(t,i),this},deleteValue(t){return e.delete(t),this}}},this.validateMaxSuggestions=()=>{const e=Object.assign({},this.props.suggestions);return e.maxSuggestions&&e.maxSuggestions<=0?e.enabled=!1:e.maxSuggestions&&e.maxSuggestions>=5&&(e.maxSuggestions=5),e},this.linkSuggestions=()=>{if(this.props.data&&this.props.suggestions){const e=this.validateMaxSuggestions();return a.default.createDataProviderSync(Object.assign({baseDataProvider:this.props.data},e))}if(this.props.data)return this.props.data},this.renderCollectionTemplate=e=>this.props.collectionTemplate(e),this.renderItemTemplate=e=>this.props.itemTemplate(e),this.valueChangeHandler=e=>{this.props.onValueChanged&&"internal"===e.detail.updatedFrom&&this.props.onValueChanged(e.detail.value)},this.onMessagesCustomChanged=e=>{this.props.onMessagesCustomChanged&&this.props.onMessagesCustomChanged(e.detail.value)},this.validChangedListener=e=>{this.props.onValidChanged&&this.props.onValidChanged(e.detail.value)},this.onLoadValueItemTriggered=({previousValue:e,value:t})=>{const i=null===(null==t?void 0:t.key)&&null===t.data,o=null===(null==e?void 0:e.key)&&null===(null==e?void 0:e.data);return(void 0===e||o)&&i},this.valueItemChangeHandler=e=>{const{previousValue:t,value:i,updatedFrom:o}=e.detail;this.props.onValueItemChanged&&"internal"===o&&(this.onLoadValueItemTriggered({previousValue:t,value:i})||this.props.onValueItemChanged(i))},this.onItemSelected=async e=>{this.triggerTelemetryWithContext(e,async t=>{var i;const o=null===(i=e.detail.itemContext)||void 0===i?void 0:i.metadata;if(t.setAttribute("oj-sp-smart-select-single.selectedKey",e.detail.value),o){a.default.publish("selection",o);const{suggestion:t,oarsMetadata:i}=o,s=t||i;s&&this.triggerTelemetrySuggestion("metric/recommendationQuality/lov",t=>{const{suggestionDetails:i,selection:o}=s;t.setAttribute("recommendation.subject",i.subject),t.setAttribute("recommendation.quality.policy",i.model),t.setAttribute("recommendation.quality.selection.ordinal",o.ordinal),t.setAttribute("recommendation.key",e.detail.value),t.setAttribute("recommendation.previousKey",e.detail.previousValue),t.setAttribute("recommendation.contexts.hard",i.contexts.hard),t.setAttribute("recommendation.quality.suggestionId",i.suggestionId),t.setAttribute("recommendation.quality.isSuggestion",i.isSuggestion),t.end()})}this.selectionStartTime=void 0,t.end()},{startTime:this.selectionStartTime||Date.now()})},this.setSelectSingleElement=e=>{this.selectSingleElem=e},this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:"oj-sp-smart-select-single_"+(0,i.getUniqueId)(),this.state={dataProvider:this.linkSuggestions()},this.initTelemetry()}render(e,t){const{collectionTemplate:i,describedBy:o,disabled:a,help:n,itemText:r,itemTemplate:l,labelEdge:d,labelHint:c,labelledBy:p,placeholder:u,readonly:h,required:m,messagesCustom:g,userAssistanceDensity:y,value:f,valueItem:b}=e,{dataProvider:v}=t;return(0,s.h)(s.Fragment,null,(0,s.h)("oj-select-single",{ref:this.setSelectSingleElement,id:this.uniqueId+"_select_single",labelHint:c,data:v,describedBy:o,labelEdge:d,labelledBy:p,readonly:h,placeholder:u,disabled:a,required:m,help:n,messagesCustom:g,onmessagesCustomChanged:this.onMessagesCustomChanged,itemText:r,value:void 0!==f?f:null,onvalueChanged:this.valueChangeHandler,valueItem:b,onvalueItemChanged:this.valueItemChangeHandler,onojValueAction:this.onItemSelected,onvalidChanged:this.validChangedListener,onFocus:this.focusEventHandler,userAssistanceDensity:y},i&&(0,s.h)("template",{slot:"collectionTemplate",render:this.renderCollectionTemplate}),l&&(0,s.h)("template",{slot:"itemTemplate",render:this.renderItemTemplate})))}async componentDidUpdate(e){if(e.data!==this.props.data){const e=this.linkSuggestions();this.setState({dataProvider:e})}e.suggestions!==this.props.suggestions&&a.default.updatePolicy(this.validateMaxSuggestions())}refresh(){this.selectSingleElem&&this.selectSingleElem.refresh()}reset(){this.selectSingleElem&&this.selectSingleElem.reset()}showMessages(){this.selectSingleElem&&this.selectSingleElem.showMessages()}validate(){if(this.selectSingleElem)return this.selectSingleElem.validate()}triggerTelemetrySuggestion(e,t){return this.tracer.startActiveSpan(e,t)}triggerTelemetryWithContext(e,t,i={}){return this.telemetryContext.setValue(r,e),this.tracer.startActiveSpan("componentEvent",i,this.telemetryContext,t)}};l.defaultProps={disabled:!1,labelEdge:"inside",readonly:!1,required:!1,userAssistanceDensity:"reflow"},l._metadata={slots:{collectionTemplate:{data:{}},itemTemplate:{data:{}}},properties:{data:{type:"DataProvider"},describedBy:{type:"string"},disabled:{type:"boolean"},help:{type:"object",properties:{instruction:{type:"string"}}},itemText:{type:"string|function"},labelEdge:{type:"string",enumValues:["none","inside","provided"],binding:{consume:{name:"labelEdge"},provide:[{name:"labelEdge",default:"inside",transform:{top:"provided",start:"provided"}}]}},labelHint:{type:"string"},labelledBy:{type:"string"},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"readonly"},provide:[{name:"readonly",default:!1}]}},required:{type:"boolean"},suggestions:{type:"object",properties:{subject:{type:"string"},policyHint:{type:"string",enumValues:["mru","mfu","ai"]},maxSuggestions:{type:"number"},context:{type:"object"},softContext:{type:"object"}}},userAssistanceDensity:{type:"string",enumValues:["reflow","compact","efficient"],binding:{consume:{name:"userAssistanceDensity"},provide:[{name:"userAssistanceDensity",default:"reflow"}]}},valid:{type:"string",enumValues:["invalidHidden","invalidShown","valid","pending"],readOnly:!0,writeback:!0},value:{type:"any",writeback:!0},valueItem:{type:"object",properties:{data:{type:"any"},key:{type:"any"},metadata:{type:"object",properties:{indexFromParent:{type:"number"},isLeaf:{type:"boolean"},key:{type:"any"},message:{type:"object",properties:{detail:{type:"string"},severity:{type:"number|string"},summary:{type:"string"}}},parentKey:{type:"any"},suggestion:{type:"object"},treeDepth:{type:"number"}}}},writeback:!0}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItem"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{refresh:{},reset:{},showMessages:{},validate:{}}},l=__decorate([(0,i.customElement)("oj-sp-smart-select-single"),__metadata("design:paramtypes",[Object])],l),t.SmartSelectSingle=l})),define("oj-sp/smart-select-single/loader",["require","exports","./smart-select-single"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSelectSingle=void 0,Object.defineProperty(t,"SmartSelectSingle",{enumerable:!0,get:function(){return i.SmartSelectSingle}})})),define("oj-sp/select-single-currency/select-single-currency-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","oj-sp/select-single-item-template/loader","ojs/ojarraydataprovider","ojs/ojknockout","oj-sp/smart-select-single/loader"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSingleCurrencyViewModel=void 0;t.SelectSingleCurrencyViewModel=class{constructor(e){this.currencyData=i.observableArray(),this.setSelectSingleComponentProp=(e,t)=>{const i=this.getSelectSingleComponent();i&&i.setProperty(e,t)},this.getSelectSingleComponent=()=>this.composite.querySelector(`#${this.uniqueId}_selector`).querySelector("oj-select-single"),this.focus=()=>{const e=this.getSelector();o.getContext(e).getBusyContext().whenReady().then(()=>{e.focus()})},this.refresh=()=>{this.getSelector().refresh()},this.reset=()=>{this.getSelector().reset()},this.showMessages=()=>{this.getSelector().showMessages()},this.validate=()=>this.getSelector().validate(),this.getSelector=()=>this.composite.querySelector("#"+this.uniqueId+"_selector"),this.getSmartLovContainer=()=>this.composite.querySelector(".oj-sp-select-single-container");const t=o.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uniqueId=e.uniqueId,this.properties=e.properties,this.help=i.computed(()=>this.properties.help?Object.assign({},this.properties.help):void 0),this.suggestions=i.computed(()=>this.properties.suggestions?Object.assign({},this.properties.suggestions):void 0),this.busyResolve()}activated(e){s.log("activated")}connected(e){s.log("connected")}async bindingsApplied(e){s.log("bindings applied");const t=this.getSmartLovContainer();await o.getContext(t).getBusyContext().whenReady(),this.properties.helpHints&&this.setSelectSingleComponentProp("helpHints",this.properties.helpHints),this.properties.displayOptions&&this.setSelectSingleComponentProp("displayOptions",this.properties.displayOptions)}propertyChanged(e){s.log("property changed"),["helpHints","displayOptions"].includes(e.property.toString())&&this.setSelectSingleComponentProp(e.property.toString(),e.value)}}})),define("css!oj-sp/select-single-currency/select-single-currency-styles",[],(function(){})),define("oj-sp/select-single-currency/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./select-single-currency-view.html","./select-single-currency-viewModel","css!./select-single-currency-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-select-single-currency",{metadata:JSON.parse(o),view:s,viewModel:a.SelectSingleCurrencyViewModel})})),define("text!oj-sp/simple-create-edit/component.json",[],(function(){return'{"name":"simple-create-edit","version":"2404.0.0","pack":"oj-sp","type":"composite","subcomponentType":"patternImpl","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Simple Create and Edit Page Template","description":"This page template is used for creating or editing a business transaction.","dependencies":{"oj-sp-header-create-edit":"2404.0.0"},"icon":{"iconPath":"extension/catalog/images/ico-simple-create-and-edit-48.svg"},"properties":{"pageTitle":{"displayName":"Page Title","type":"string","description":"A translatable title for CCA","propertyGroup":"common","required":true,"translatable":true,"extension":{"vbdt":{"placeholderValue":"Your Page Title here"}}},"pageTitlePlaceholder":{"displayName":"Page Title Placeholder","description":"The placeholder that will be displayed if page title is blank","required":false,"type":"string","value":"New Page"},"pageSubtitle":{"displayName":"Page Subtitle","type":"string","description":"A translatable sub title for CCA","propertyGroup":"common","translatable":true,"required":false,"extension":{"vbdt":{"placeholderValue":"Your Page Subtitle here"}}},"avatar":{"displayName":"Avatar Image","description":"The avatar of the person who is required in the context of the page","propertyGroup":"common","type":"object","properties":{"src":{"description":"URL of the source avatar image.","type":"string"},"initials":{"description":"Initials to display in absence of source image.","type":"string"}},"value":null,"required":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","propertyGroup":"common","type":"object","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info is visible","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go to Parent action is visible","type":"boolean","value":false},"save":{"description":"Defines whether Save action is visible","type":"string","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"Save button is visible and enabled"},"off":{"displayName":"Off","description":"Save button is not visible"},"disabled":{"displayName":"Disabled","description":"Save button is visible and disabled"}}},"feedback":{"description":"Defines whether the emobutton with feedback will be turned on or off in page header. Once feedback data submitted it will be turned off by default. To enable back on same page feedback-version value should be updated","type":"string","value":"off","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"Feedback On","description":"Emobutton will be turned on to collect feedback."},"off":{"displayName":"Feedback Off","description":"Emobutton will be turned off, and call to action button will be displayed."}}},"responsivePadding":{"type":"string","description":"Specify if dynamic paddings should be on or off","displayName":"Dynamic Paddings Enabled","enumValues":["on","off"],"status":[{"target":"propertyValue","type":"deprecated","since":"2401.0.0","description":"Enum value \'off\' is deprecated. Use \'on\' instead.","value":["off"]}],"propertyEditorValues":{"on":{"displayName":"On","description":"Dynamic paddings are on."},"off":{"displayName":"Off","description":"Dynamic paddings are off."}}}},"required":false},"primaryAction":{"displayName":"Primary Action ","description":"The primary action object of the page. Default value { label : \'Submit\' , disabled : false }","type":"object","propertyGroup":"common","required":false,"properties":{"label":{"displayName":"Primary Action Label","description":"The label of primary action of the page. Default is Submit.","type":"string"},"disabled":{"displayName":"Primary Action Disabled status","description":"The disabled state of the primary action of the page.","type":"boolean","value":false}}},"secondaryActions":{"displayName":"Secondary Actions array","description":"A list of secondary actions of the page. This supports upto 4 actions. If there are more than 4, only render the first 4. Each action has [label, id, icon, display].","type":"Array<object>|null","propertyGroup":"data","required":false,"extension":{"vbdt":{"itemProperties":{"label":{"type":"string","displayName":"label of the secondary item"},"id":{"type":"string","displayName":"id of the secondary item","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"icon":{"type":"string","displayName":"icon for the secondary item"},"display":{"type":"string","displayName":"Display option for the secondary action","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled"},"off":{"displayName":"Off","description":"The secondary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled"}}}}}}},"contextualInfo":{"displayName":"Contextual Info","description":"A list of contextual informations for the page. This supports up to 4 contextual informations.","type":"Array<object>|null","propertyGroup":"data","extension":{"vbdt":{"itemProperties":{"label":{"description":"Contextual Info Label","type":"string"},"value":{"description":"Contextual Info Value","type":"string"}}}},"required":false},"contextualInfoSticky":{"displayName":"Sticky Contextual Info","description":"Defines whether contextual information is visible in the sticky header","type":"boolean","required":false,"value":false},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"avatarHint":{"type":"string"},"goToParent":{"type":"string"}}},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}}}},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}},"feedback":{"displayName":"Feedback","description":"Optional property which defines the properties of emobutton. Applicable only if displayOptions feedback property is ON","type":"object","required":false,"properties":{"customFeedback":{"displayName":"Custom Feedback","description":"Custom feedback questions for responses 4 and 5.","type":"Array<object>","status":[{"type":"deprecated","since":"2304.0.0","description":"customFeedback has been deprecated."}],"properties":{"value":{"type":"string","displayName":"Value of custom feedback option."},"label":{"type":"string","displayName":"Secondary Action ID.","description":"Label for custom feedback option."}}},"acknowledgmentMessage":{"displayName":"Acknowledgment Message","description":"Acknowledgment message to be displayed on additional feedback dialog. This should match the acknowledgment message that is displayed when a user completes a task.","type":"string","status":[{"type":"deprecated","since":"2304.0.0","description":"acknowledgmentMessage has been deprecated."}]},"pageVersion":{"description":"This property value is used only when \'displayOptions.feedback\' is set to \'on\' and it is optional. Only set/update this property value if collecting feedback for each page version is needed. The use case is, when there\'s major UI changes in the page, then update pageVersion property value to display emobutton again to collect feedback.","type":"string","value":null}}},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp"}},"methods":{"openFeedback":{"displayName":"Open feedback","description":"Function to open emoji dialog to provide additional feedback.","status":[{"type":"deprecated","since":"2304.0.0","description":"openFeedback method has been deprecated."}]}},"events":{"spPrimaryAction":{"displayName":"spectraPrimaryAction event","description":"Triggered when the primary action is clicked","bubbles":true,"cancelable":false,"detail":{"feedbackEnabled":{"description":"Whether or not feedback (EmoButton) was enabled when primary action was fired.","type":"boolean"}}},"spCancel":{"displayName":"Cancel Event","description":"This event is triggered when Cancel button is clicked.","bubbles":true,"cancelable":false},"spSave":{"displayName":"spSave event","description":"Triggered when the save action is clicked","bubbles":true,"cancelable":false},"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked","bubbles":true,"cancelable":false},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when a secondary action is clicked","bubbles":true,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the selected secondary action","type":"string"}}},"spFeedbackAction":{"displayName":"spFeedbackAction event","description":"Triggered when the feedback has been submitted.","bubbles":false,"cancelable":false,"status":[{"type":"deprecated","since":"2304.0.0","description":"spFeedbackAction event has been deprecated."}],"detail":{"actionId":{"description":"The ID of the element that was clicked.","type":"string"},"target":{"description":"The target element that was clicked.","type":"HTMLElement"}}}},"slots":{"main":{"description":"This is the slot for main content","displayName":"main slot","implicitBusyContext":true,"preferredContent":["FormLayoutElement","DynamicFormElement","SpMessagesBannerElement"],"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}}},"extension":{"catalog":{"category":"Redwood Page Templates","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-simple-create-and-edit-48.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Simple%20Create%20Edit%20Page%20Template&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrasimplecreateedit.html","screenshots":{}},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"data":{"customizers":[]},"general":{"customizers":[{"propertyName":"pageTitle"},{"propertyName":"pageSubtitle"},{"propertyName":"displayMode","type":"enumeration"},{"type":"heading","displayName":"Display Options"},{"propertyName":"displayOptions.goToParent","displayName":"Show Go to Parent"},{"propertyName":"displayOptions.contextualInfoLabel","displayName":"Show Contextual Info Label"},{"propertyName":"displayOptions.feedback","displayName":"Feedback Emobutton Visible","type":"enumeration"},{"propertyName":"displayOptions.save","displayName":"Save Button Visible","type":"enumeration"},{"type":"heading","displayName":"Actions"},{"propertyName":"primaryAction.label","displayName":"Primary action label"},{"propertyName":"primaryAction.disabled","displayName":"Primary action disabled"},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Secondary Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"actions"}}]},"actions":{"customizers":[{"propertyName":"secondaryActions.id","displayName":"Id"},{"propertyName":"secondaryActions.label","displayName":"Label"},{"propertyName":"secondaryActions.icon","displayName":"Icon"},{"propertyName":"secondaryActions.display","displayName":"Display Option","type":"enumeration"},{"type":"delete","propertyName":"secondaryActions","delete":"arrayIndex"}]}},"events":{"suggestions":[{"name":"spPrimaryAction","type":"component"},{"name":"spSecondaryAction","type":"component","mappings":[{"variableName":"actionId","expression":"{{$event.detail.value.id}}","type":"string"}]},{"name":"spSave","type":"component"},{"name":"spCancel","type":"component"},{"name":"spGoToParent","type":"component"}]}}}}}'})),define("text!oj-sp/simple-create-edit/simple-create-edit-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-simple-create-edit-max-width"><oj-sp-header-create-edit data-otel-hero="simpleCreateEditPageHeader":id="[[uid+\'_h\']]"page-title="[[properties.pageTitle]]"page-title-placeholder="[[properties.pageTitlePlaceholder]]"page-subtitle="[[properties.pageSubtitle]]"avatar="[[headerAvatar]]"contextual-info="[[ contextualInfo ]]"contextual-info-sticky="[[properties.contextualInfoSticky]]"primary-action.disabled="[[properties.primaryAction?.disabled]]"primary-action.label="[[properties.primaryAction?.label]]"display-options.go-to-parent="[[properties.displayOptions.goToParent]]"display-options.save="[[properties.displayOptions.save]]"display-options.feedback="[[properties.displayOptions.feedback]]"secondary-actions="[[properties.secondaryActions]]"translations="[[headerTranslations]]"feedback.custom-feedback="[[ properties.feedback?.customFeedback ]]"feedback.acknowledgment-message="[[ properties.feedback?.acknowledgmentMessage ]]"feedback.page-version="[[ properties.feedback?.pageVersion ]]"display-options.contextual-info-label="[[properties.displayOptions.contextualInfoLabel]]"badge.text="[[properties.badge?.text]]"badge.status="[[properties.badge?.status]]"display-mode="[[properties.displayMode]]"timestamp="[[properties.timestamp]]"data-oj-context=""></oj-sp-header-create-edit><div data-otel-hero="oj-sp-simple-create-edit.main"class="oj-sp-public-primary-content-container oj-sm-width-full oj-sp-simple-create-edit-main-content"data-oj-context=""><div :id="[[uid+\'_main-slot-wrapper\']]":class="[[{\n      \'oj-sp-simple-create-edit-main-slot-wrapper oj-sm-only-padding-8x-vertical oj-md-padding-12x-vertical\': true, \n      \'oj-sm-only-padding-4x-horizontal oj-md-only-padding-6x-horizontal oj-lg-padding-12x-horizontal\': respPadding() === \'off\'\n    }]]"><oj-bind-slot name="main"></oj-bind-slot></div><div class="oj-sp-simple-create-edit-mobile-bottom-container oj-md-hide oj-flex oj-sm-flex-direction-column"><oj-bind-if test="[[ saveIsOn() ]]"><oj-button :id="[[ uid + \'_saveMobile\' ]]"chroming="solid"class="oj-button-sm oj-flex-item oj-sm-margin-4x-horizontal oj-sm-margin-4x-top"disabled="[[ saveDisabled ]]"on-oj-action="[[ saveHandler ]]"><span><oj-bind-text value="[[ res().save ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-bind-if test="[[ !saveIsOn() ]]"><oj-button :id="[[ uid + \'_cancelMobile\' ]]"chroming="solid"class="oj-button-sm oj-flex-item oj-sm-margin-4x-horizontal oj-sm-margin-4x-top"on-oj-action="[[ cancelHandler ]]"><span><oj-bind-text value="[[ res().cancel ]]"></oj-bind-text></span></oj-button></oj-bind-if><oj-button :id="[[ uid + \'_primaryActionMobile\' ]]"class="oj-button-sm oj-flex-item oj-sm-margin-4x-horizontal oj-sm-margin-4x-vertical"disabled="[[ primaryActionDisabled ]]"chroming="callToAction"on-oj-action="[[ primaryActionHandler ]]"><span><oj-bind-text value="[[ primaryActionLabel ]]"></oj-bind-text></span></oj-button></div></div></div></body></html>'})),define("oj-sp/simple-create-edit/simple-create-edit-viewModel",["require","exports","knockout","oj-sp/common/EventDispatcher","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojlogger","oj-sp/header-create-edit/loader","ojs/ojknockout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;const r="background: #222; color: #bada55";t.ViewModel=class{constructor(e){var t;this.primaryActionHandler=e=>{o.EventDispatcher.dispatch("spPrimaryAction",this.composite,e.detail)},this.saveHandler=e=>{o.EventDispatcher.dispatch("spSave",this.composite,void 0)},this.cancelHandler=e=>{o.EventDispatcher.dispatch("spCancel",this.composite,void 0)},this.responsivePaddingHandler=()=>{this.composite&&("on"===this.respPadding()?this.composite.classList.add("oj-sp-responsive-paddings-on"):this.composite.classList.remove("oj-sp-responsive-paddings-on"))},this.onContextualInfoChanged=e=>{this.contextualInfo(e&&e.length>4?e.slice(0,4):e)},this.onResize=e=>{this.destroyMutationObserver(),this.updateMainContentHeight()},this.updateMainContentHeight=()=>{window.requestAnimationFrame(()=>{const e=this.composite.querySelector(".oj-sp-simple-create-edit-main-content"),t=this.composite.querySelector(".oj-sp-header-create-edit-header-strip"),i=t&&t.getBoundingClientRect().bottom>0?t.getBoundingClientRect().bottom:0,o=window.innerHeight-i;e.style.minHeight=o+"px"})},this.processPrimaryAction=e=>{e?(this.primaryActionDisabled(e.disabled),this.primaryActionLabel(e.label?e.label:this.res().submit)):(this.primaryActionDisabled(!0),this.primaryActionLabel(this.res().submit))},this.processSaveOptions=e=>{e?"on"===e.save?(this.saveIsOn(!0),this.saveDisabled(!1)):"off"===e.save?(this.saveIsOn(!1),this.saveDisabled(!0)):(this.saveIsOn(!0),this.saveDisabled(!0)):this.saveIsOn(!1)};const n=a.getContext(e.element).getBusyContext();this.busyResolve=n.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.properties=e.properties,this.res=i.observable(Object.assign(Object.assign({},s),this.properties.translations)),this.contextualInfo=i.observableArray(),this.onContextualInfoChanged(this.properties.contextualInfo),this.headerAvatar=i.computed(()=>this.properties.avatar?Object.assign({},this.properties.avatar):void 0),this.headerTranslations=i.computed(()=>Object.assign({},this.properties.translations)),this.saveIsOn=i.observable(),this.saveDisabled=i.observable(!1),this.respPadding=i.observable((null===(t=this.properties)||void 0===t?void 0:t.displayOptions)&&"on"===this.properties.displayOptions.responsivePadding?"on":"off"),this.processSaveOptions(this.properties.displayOptions),this.primaryActionLabel=i.observable(),this.primaryActionDisabled=i.observable(),this.processPrimaryAction(this.properties.primaryAction),this.busyResolve()}activated(e){n.log(`%c CCA ${this.uid} activated`,r)}connected(e){n.log(`%c CCA ${this.uid} connected`,r),window.addEventListener("scroll",this.onResize),window.addEventListener("resize",this.onResize)}bindingsApplied(e){n.log(`%c CCA ${this.uid} bindingsApplied`,r),this.responsivePaddingHandler(),this.initMutationObserver()}propertyChanged(e){n.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,r),"contextualInfo"===e.property&&e.value&&this.onContextualInfoChanged(e.value),"displayOptions"===e.property&&e.value&&e.value.save&&this.processSaveOptions(e.value),"displayOptions"===e.property&&e.value&&e.value.responsivePadding&&(this.respPadding("on"===e.value.responsivePadding?"on":"off"),this.responsivePaddingHandler()),"primaryAction"===e.property&&e.value&&this.processPrimaryAction(e.value)}disconnected(e){n.log(`%c CCA ${this.uid} disconnected`,r),window.removeEventListener("scroll",this.onResize),window.removeEventListener("resize",this.onResize),this.destroyMutationObserver()}openFeedback(){if(this.properties.displayOptions.feedback){this.composite.querySelector("oj-sp-header-create-edit").openFeedback()}}initMutationObserver(){this.destroyMutationObserver();const e=this.composite.querySelector("oj-sp-header-create-edit");this.mutationObserver=new MutationObserver(()=>this.updateMainContentHeight()),this.mutationObserver.observe(e,{attributes:!0,childList:!0,subtree:!0})}destroyMutationObserver(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}}})),define("css!oj-sp/simple-create-edit/simple-create-edit-styles",[],(function(){})),define("oj-sp/simple-create-edit/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./simple-create-edit-view.html","./simple-create-edit-viewModel","css!./simple-create-edit-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-simple-create-edit",{metadata:JSON.parse(o),view:s,viewModel:a.ViewModel})})),define("text!oj-sp/skill-chip/component.json",[],(function(){return'{"name":"skill-chip","version":"2404.0.0","pack":"oj-sp","jetVersion":"^15.0.0","displayName":"Skill Chip","description":"A skill chip is a chip with leading action, primary, secondary text and action group","type":"composite","icon":{"iconPath":"extension/catalog/images/ico-skill-chip.svg"},"license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-css-additions":"2404.0.0"},"properties":{"disabled":{"type":"boolean","displayName":"Disabled","description":"Disables the text container action on skill chip if set to true.","value":false},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of chip.","propertyGroup":"common","type":"object","properties":{"mode":{"type":"string","displayName":"Chip Mode","description":"Determines the state of the chip","value":"light","enumValues":["light","dark"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The chip background is light with dark text content."},"dark":{"displayName":"Dark","description":"The chip background is dark with light text content. The page background is light."}}},"size":{"type":"string","displayName":"Skill Chip Size","description":"Size of the skill chip to be used in different designs and contexts.","value":"default","enumValues":["default","large"],"propertyEditorValues":{"default":{"displayName":"Default","description":"A regular sized chip usually used in designs that are limited in space."},"large":{"displayName":"Large","description":"A large sized chip with focus attention on the actions related to the skill."}}},"actionsEmphasized":{"displayName":"Actions Emphasized","description":"Specifies whether secondary actions has background texture.","type":"boolean","value":false},"emphasized":{"displayName":"Emphasized","description":"Specifies whether chip container box has shadow.","type":"boolean","value":false},"remove":{"type":"string","displayName":"Remove action state","description":"Use \'on\' to display inbuilt remove icon in skill chip. Click on Remove icon will raise spRemove event.","value":"off","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Remove is visible."},"off":{"displayName":"Off","description":"Remove is not visible."}}}}},"primaryText":{"type":"string","required":true,"displayName":"Primary Text","description":"Primary text of the chip in the text container."},"secondaryText":{"type":"string","displayName":"Secondary Text","description":"Secondary text of the chip in the text container."},"primaryActions":{"displayName":"Specifies primary actions.","description":"A list of primary actions of the chip.","type":"Array<object>|null","properties":{"id":{"type":"string","displayName":"Action Id","description":"This is a unique id associated with the primary action. When the user clicks on the primary action, this id is passed as a payload with the secondary action event."},"label":{"type":"string","displayName":"Aria label","description":"Aria label.","translatable":true},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}},"toggleIcon":{"type":"string","displayName":"Selected icon","description":"Selected icon font class name."},"value":{"type":"string","displayName":"Value","description":"Value to be displayed."}}},"secondaryActions":{"displayName":"Specifies secondary actions.","description":"A list of secondary actions of the chip.","type":"Array<object>|null","properties":{"id":{"type":"string","displayName":"Action Id","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"label":{"type":"string","displayName":"Aria label","description":"Aria label.","translatable":true},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"off","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}},"toggleIcon":{"type":"string","displayName":"Selected icon","description":"Selected icon font class name."},"value":{"type":"string","displayName":"Value","description":"Value to be displayed."}}}},"methods":{},"events":{"spNavigationAction":{"displayName":"spNavigationAction event","description":"Triggered when the text container action is clicked.","cancelable":true},"spPrimaryAction":{"displayName":"spPrimaryAction event","description":"Triggered when the primary action is clicked.","cancelable":true,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when one of the secondary action is clicked.","cancelable":true,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spRemove":{"displayName":"Remove event","description":"Triggered when the remove action is clicked.","cancelable":true}},"slots":{},"extension":{"catalog":{"category":"Redwood Controls & Navigation","status":"Pre-production","tags":["oj-sp","Redwood","Early-Adopter"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Skill%20Chip%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectraskillchip.html"},"vbdt":{"componentPalette":{"visibility":"never"}}}}'})),define("text!oj-sp/skill-chip/skill-chip-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-skill-chip-container"><div class="oj-sp-skill-chip":class="[[ currentPropsState ]]"role="button":aria-label="[[ componentVisibleText() ]]"aria-describedby="primary-text"on-blur="[[ onSkillChipBlur ]]"on-focus="[[ onSkillChipFocus ]]"on-keyup="[[ onSkillChipKeyUp ]]":tabindex="[[ $properties.disabled ? -1 : 0 ]]"><oj-bind-if test="[[ hasPrimaryActions ]]"><div class="oj-sp-skill-chip-icon-container oj-sp-skill-chip-start"><div class="oj-sp-skill-chip-icon-content"><oj-bind-for-each data="[[ primaryActions() ]]"><template data-oj-as="primaryAction"><oj-bind-if test="[[ primaryAction.data.display !== \'off\' &amp;&amp; primaryAction.data.icon ]]"><oj-button :id="[[ \'primaryActionButton_\' + primaryAction.index ]]"class="oj-sp-skill-chip-borderless-button"display="icons"chroming="borderless"disabled="[[ primaryAction.data.display === \'disabled\' ]]":class="[[  { \'oj-button-sm\': $properties.displayOptions.size === \'default\' } ]]"on-oj-action="[[ (event) => (primaryActionHandler(event, primaryAction)) ]]"><div slot="startIcon":id="[[ \'primaryAction_\' + primaryAction.index ]]":class="[[ primaryAction.data.icon ]]"class="oj-sp-skill-chip-primary-color"></div><oj-bind-text value="[[ primaryAction.data.label ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ primaryAction.data.display !== \'off\' &amp;&amp; !primaryAction.data.icon &amp;&amp; primaryAction.data.value ]]"><oj-button :id="[[ \'primaryActionButton_\' + primaryAction.index ]]"class="oj-sp-skill-chip-borderless-button"display="icons"chroming="borderless"disabled="[[ primaryAction.data.display === \'disabled\' ]]":class="[[ { \'oj-button-sm\': $properties.displayOptions.size === \'default\' } ]]"on-oj-action="[[ (event) => (primaryActionHandler(event, primaryAction)) ]]"><span slot="startIcon":id="[[ \'primaryAction_\' + primaryAction.index ]]"class="oj-sp-skill-chip-primary-color oj-typography-bold":class="[[ ($properties.displayOptions.size === \'default\' ? \'oj-typography-body-sm\' : \'oj-typography-body-md\') ]]"><oj-bind-text value="[[ primaryAction.data.value ]]"></oj-bind-text></span></oj-button></oj-bind-if></template></oj-bind-for-each></div></div></oj-bind-if><div class="oj-sp-skill-chip-content"><a href="#"class="oj-sp-skill-chip-text-container":class="[[ disabledClass ]]":tabindex="[[ $properties.disabled ? -1 : 0 ]]":aria-label="[[  `${$properties.primaryText} ${$properties.secondaryText}` ]]"role="button"aria-describedby="primary-text"on-click="[[ navigationActionHandler ]]"><div class="oj-sp-skill-chip-primary-color oj-sp-skill-chip-primary-text oj-typography-bold":class="[[ ($properties.displayOptions.size === \'default\' ? \'oj-typography-body-sm\' : \'oj-typography-body-md\') ]]":title="[[ $properties.primaryText ]]"><oj-bind-text value="[[ $properties.primaryText ]]"></oj-bind-text></div><oj-bind-if test="[[ $properties.secondaryText ]]"><div class="oj-sp-skill-chip-secondary-color oj-sp-skill-chip-secondary-text":class="[[ ($properties.displayOptions.size === \'default\' ? \'oj-typography-body-sm\' : \'oj-typography-body-md\') ]]":title="[[ $properties.secondaryText ]]"><oj-bind-text value="[[ $properties.secondaryText ]]"></oj-bind-text></div></oj-bind-if></a></div><oj-bind-if test="[[ hasSecondaryActions ]]"><div class="oj-sp-skill-chip-icon-container oj-sp-skill-chip-end":class="[[{ \'oj-ux-texture-rose-opacity-08\': $properties.displayOptions.actionsEmphasized }]]"><div class="oj-sp-skill-chip-icon-content"><oj-bind-for-each data="[[ secondaryActions() ]]"><template data-oj-as="secondaryAction"><oj-bind-if test="[[ secondaryAction.data.display !== \'off\' &amp;&amp; secondaryAction.data.icon ]]"><oj-button :id="[[ \'secondaryActionButton_\' + secondaryAction.index ]]"class="oj-sp-skill-chip-borderless-button"display="icons"chroming="borderless"disabled="[[ secondaryAction.data.display === \'disabled\' ]]":class="[[ { \'oj-button-sm\': $properties.displayOptions.size === \'default\' } ]]"on-oj-action="[[ (event) => (secondaryActionHandler(event, secondaryAction)) ]]"><div slot="endIcon":id="[[ \'secondaryAction_\' + secondaryAction.index ]]":class="[[ secondaryAction.data.icon ]]"class="oj-sp-skill-chip-primary-color"></div><oj-bind-text value="[[ secondaryAction.data.label ]]"></oj-bind-text></oj-button></oj-bind-if><oj-bind-if test="[[ secondaryAction.data.display !== \'off\' &amp;&amp; !secondaryAction.data.icon &amp;&amp; secondaryAction.data.value ]]"><oj-button :id="[[ \'secondaryActionButton_\' + secondaryAction.index ]]"class="oj-sp-skill-chip-borderless-button"display="icons"chroming="borderless"disabled="[[ secondaryAction.data.display === \'disabled\' ]]":class="[[ { \'oj-button-sm\': $properties.displayOptions.size === \'default\' } ]]"on-oj-action="[[ (event) => (secondaryActionHandler(event, secondaryAction)) ]]"><span slot="endIcon":id="[[ \'secondaryAction_\' + secondaryAction.index ]]"class="oj-sp-skill-chip-primary-color oj-typography-bold":class="[[ ($properties.displayOptions.size === \'default\' ? \'oj-typography-body-sm\' : \'oj-typography-body-md\')]]"><oj-bind-text value="[[ secondaryAction.data.value ]]"></oj-bind-text></span></oj-button></oj-bind-if></template></oj-bind-for-each></div></div></oj-bind-if></div></div></body></html>'})),define("oj-sp/skill-chip/skill-chip-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojanimation","ojs/ojcontext","ojs/ojlogger","oj-sp/common-util/common-util","oj-sp/common/EventDispatcher","ojs/ojknockout","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkillChipViewModel=void 0;function d(e){return(null==e?void 0:e.length)>0}function c(e){return d(e)&&e.some(e=>"off"!==e.display)}t.SkillChipViewModel=class{constructor(e){this.onSkillChipFocus=e=>{e.stopPropagation(),this.isSkillChipFocused(!0)},this.onSkillChipBlur=e=>{e.stopPropagation(),this.isSkillChipFocused(!1)},this.onSkillChipKeyUp=e=>{e.stopPropagation();const{key:t}=e;t!==r.KEY_NAME.ESCAPE||this.isSkillChipFocused()||this.properties.disabled||this.focusSkillsChip(),t===r.KEY_NAME.ENTER&&this.isSkillChipFocused()&&this.dispatchEvent(l.EventDispatcher.NAVIGATION_ACTION_EVENT_NAME),t===r.KEY_NAME.SPACE&&this.isSkillChipFocused()&&this.dispatchEvent(l.EventDispatcher.NAVIGATION_ACTION_EVENT_NAME)},this.navigationActionHandler=e=>{e.preventDefault(),this.dispatchEvent(l.EventDispatcher.NAVIGATION_ACTION_EVENT_NAME)},this.primaryActionHandler=(e,t)=>{const i=t.data,o=this.composite.querySelector("#primaryAction_"+t.index);i.toggleIcon&&this.animateAction(e).then(()=>{this.toggleIconClass(t,o)}).catch(e=>{n.error("Error: "+e)}),this.dispatchEvent(l.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,i)},this.secondaryActionHandler=(e,t)=>{const i=t.data,o=this.composite.querySelector("#secondaryAction_"+t.index);i.toggleIcon&&this.animateAction(e).then(()=>{this.toggleIconClass(t,o)}).catch(e=>{n.error("Error: "+e)}),this.determineSecondaryActionEvent(i)};const t=a.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Skill Chip Web Component Startup - Waiting for data"}),this.componentVisibleText=i.observable(),this.primaryActions=i.observableArray(),this.secondaryActions=i.observableArray(),this.secondaryActions.subscribe(t=>{let i=`${e.properties.primaryText} ${e.properties.secondaryText}`;t.forEach(e=>{i+="off"!==e.display&&!e.icon&&e.value?" "+e.value:""}),this.componentVisibleText(i)}),this.isSkillChipFocused=i.observable(!1),this.properties=e.properties,this.composite=e.element,this.uid=e.uniqueId,this.res=Object.assign(Object.assign({},o),this.properties.translations),this.busyResolve()}activated(e){n.log(`skill-chip ${this.uid} activated`),this.initPrimaryActions(e),this.initSecondaryActions(e),this.initCurrentStateProps(e),this.initDisabled(e)}connected(e){n.log(`skill-chip ${this.uid} connected`)}bindingsApplied(e){n.log(`skill-chip ${this.uid} bindingsApplied`)}propertyChanged(e){n.log(`skill-chip ${this.uid} propertyChanged`)}disconnected(e){n.log(`skill-chip ${this.uid} disconnected`)}determineSecondaryActionEvent(e){e.id===this.uid+"_skillChipRemove"?this.dispatchEvent(l.EventDispatcher.REMOVE_ACTION_EVENT_NAME):this.dispatchEvent(l.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,e)}initPrimaryActions(e){this.hasPrimaryActions=i.pureComputed(()=>(this.handlePrimaryActions(e.properties.primaryActions),c(e.properties.primaryActions)))}initSecondaryActions(e){this.hasSecondaryActions=i.pureComputed(()=>(this.handleSecondaryActions(e.properties.secondaryActions,"on"===e.properties.displayOptions.remove),c(this.secondaryActions())))}initCurrentStateProps(e){this.currentPropsState=i.pureComputed(()=>function(e){return{"oj-sp-skill-chip-box-shadow":e.properties.displayOptions.emphasized,"oj-sp-skill-chip-dark":"dark"===e.properties.displayOptions.mode,"oj-sp-skill-chip-light":"light"===e.properties.displayOptions.mode,"oj-sp-skill-chip-small":"default"===e.properties.displayOptions.size,"oj-sp-skill-chip-texture":e.properties.displayOptions.actionsEmphasized}}(e))}initDisabled(e){this.disabledClass=i.pureComputed(()=>({"oj-sp-skill-chip-disabled":e.properties.disabled}))}handlePrimaryActions(e){d(e)&&this.primaryActions(e.slice(0,1))}handleSecondaryActions(e,t){const i=d(e)?[...e]:[];t&&i.splice(1,0,this.getRemoveActionIcon()),this.secondaryActions(i.slice(0,2))}getRemoveActionIcon(){return{display:"on",icon:"oj-ux-ico-close",id:this.uid+"_skillChipRemove",label:this.res.remove}}dispatchEvent(e,t=null){l.EventDispatcher.dispatch(e,this.composite,t,!1)}async animateAction(e){const t=i.observable("zoomIn"),o=e.target,a=s[t()];await a(o)}toggleIconClass(e,t){const i=e.data;(null==t?void 0:t.classList.contains(i.icon))&&(t.classList.remove(i.icon),t.classList.add(i.toggleIcon))}focusSkillsChip(){this.composite.querySelector(".oj-sp-skill-chip").focus()}}})),define("css!oj-sp/skill-chip/skill-chip-styles",[],(function(){})),define("oj-sp/skill-chip/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./skill-chip-view.html","./skill-chip-viewModel","css!./skill-chip-styles","css!oj-sp/css-additions/css-additions.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-skill-chip",{metadata:JSON.parse(o),view:s,viewModel:a.SkillChipViewModel})})),define("text!oj-sp/smart-filter-search/component.json",[],(function(){return'{"name":"smart-filter-search","version":"2404.0.0","pack":"oj-sp","type":"composite","subcomponentType":"patternImpl","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Smart Filter Search Page Template","description":"Smart filter page template provides a way for users to quickly filter a collection within a page.","dependencies":{"oj-sp-common-strings":"2404.0.0","oj-sp-common-util":"2404.0.0","oj-sp-header-general-overview":"2404.0.0"},"icon":{"iconPath":"extension/catalog/images/ico-visual-smart-filter-search-48.svg"},"properties":{"pageTitle":{"displayName":"Page Title","type":"string","description":"A translatable title for CCA","propertyGroup":"common","translatable":true,"required":true,"extension":{"vbdt":{"placeholderValue":"Your Page Title here"}}},"pageSubtitle":{"displayName":"Page Subtitle","type":"string","description":"A translatable sub title for CCA","propertyGroup":"common","translatable":true,"required":false,"extension":{"vbdt":{"placeholderValue":"Your Page Subtitle here"}}},"displayOptions":{"displayName":"Display Options","description":"This controls the visibility of parts of this component","type":"object","propertyGroup":"common","properties":{"contextualInfoLabel":{"description":"Defines whether labels in contextual info is visible","type":"boolean","value":false},"goToParent":{"description":"Defines whether Go to Parent action is visible","type":"boolean","value":false},"inFlowBack":{"description":"Defines whether In Flow Back action is visible","type":"boolean","value":false}},"required":false},"primaryAction":{"displayName":"Primary Action ","description":"The primary action object of the page. Default value { label : \'Submit\' , disabled : false }","type":"object","propertyGroup":"common","required":false,"writeback":true,"properties":{"label":{"displayName":"Primary Action Label","description":"The label of primary action of the page. Default is Submit.","translatable":true,"type":"string"},"disabled":{"displayName":"Primary Action Disabled status","description":"The disabled state of the primary action of the page.","type":"boolean","status":[{"type":"deprecated","since":"2210.0.0","description":"Use value display property instead."}]},"display":{"type":"string","displayName":"Display option for the primary action","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The primary Action is visible and enabled"},"off":{"displayName":"Off","description":"The primary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The primary Action is visible and disabled"}}}}},"secondaryActions":{"displayName":"Secondary Actions array","description":"A list of secondary actions of the page. This supports upto 4 actions. If there are more than 4, only render the first 4. Each action has [label, id, icon, display].","type":"Array<object>","required":false,"extension":{"vbdt":{"itemProperties":{"label":{"type":"string","displayName":"label of the secondary item"},"id":{"type":"string","displayName":"id of the secondary item","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"icon":{"type":"string","displayName":"icon for the secondary item"},"display":{"type":"string","displayName":"Display option for the secondary action","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The secondary Action is visible and enabled"},"off":{"displayName":"Off","description":"The secondary Action is not visible"},"disabled":{"displayName":"Disabled","description":"The secondary Action is visible and disabled"}}}}}}},"contextualInfo":{"displayName":"Contextual Info","description":"A list of contextual informations for the page. This supports up to 4 contextual informations.","type":"Array<object>","propertyGroup":"data","extension":{"vbdt":{"itemProperties":{"label":{"description":"Contextual Info Label","type":"string"},"value":{"description":"Contextual Info Value","type":"string"}}}},"required":false},"selectContext":{"displayName":"Select Context","description":"The context selector","type":"object","properties":{"data":{"description":"The data for the context selector","type":"oj.DataProvider"},"itemText":{"description":"The text string to render for the context selector","type":"string"},"labelHint":{"description":"The label hint for context selector","type":"string"}},"required":false},"selectContextValue":{"displayName":"Select Context Value","description":"Select Context Value","type":"any","propertyGroup":"data","required":false,"writeback":true},"selectContextValueItem":{"displayName":"Select Context Value Item","description":"The value item of the context selector.","type":"object","required":false,"writeback":true},"smartFilters":{"displayName":"Smart Filters","description":"Properties for smart filters","propertyGroup":"data","required":false,"writeback":true,"type":"object","extension":{"audit":{"ignore":["jetwc-supproperty-propagation"]}},"properties":{"appliedFilters":{"type":"Array","description":"Currently applied filters.","displayName":"Applied Filters","status":[{"type":"deprecated","since":"2101.0.0","description":"Use value sub property instead."}]},"askHint":{"type":"string","description":"Current ask hint.","displayName":"Ask Hint"},"autofocus":{"type":"boolean","description":"Autofocus is a Boolean that reflects the autofocus attribute, if it is set to true then the associated component will get input focus when the page is loaded. Setting this property doesn\'t set the focus to the component: it tells the browser to focus to it when the element is inserted in the document.","displayName":"Autofocus"},"autocompleteSource":{"description":"Visibility toggle for autocomplete suggestions source.","displayName":"Autocomplete Source","type":"string","enumValues":["off","on"],"propertyEditorValues":{"off":{"description":"Hide autocomplete suggestions source in the suggestions drop-down for typeahead filtering.","displayName":"Off"},"on":{"description":"Show autocomplete suggestions source in the suggestions drop-down for typeahead filtering.","displayName":"On"}}},"expanded":{"description":"Expanded.","displayName":"Expanded","type":"string","enumValues":["auto","false","true"],"propertyEditorValues":{"auto":{"description":"Default value. Expanded on medium-to-up screens and collapsed on small screens if there are no applied filters. Expanded if there are applied filters.","displayName":"Auto"},"false":{"description":"Collapsed on all screens if there are no applied filters.","displayName":"False"},"true":{"description":"Expanded on all screens irrespective of applied filters.","displayName":"True"}}},"filtersMetadata":{"description":"Metadata defining filters.","displayName":"Filters Metadata","type":"object"},"resultsData":{"type":"SmartSearchAndFilterDataProvider","description":"Current results data.","displayName":"Results Data"},"suggestions":{"description":"Current suggestions.","displayName":"Suggestions","type":"SmartSuggestionChipsDataProvider"},"suggestionFilters":{"description":"Current suggestion filters.","displayName":"Suggestion Filters","writeback":true,"type":"SuggestionFiltersDataProvider"},"translations":{"type":"object","description":"A collection of translated resources from the translation bundle, or null if this component has no resources. Resources may be accessed and overridden individually or collectively.","properties":{"msgNoData":{"type":"string"}}},"value":{"description":"Current applied filters.","displayName":"Value","writeback":true,"type":"Array"}}},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"goToParent":{"type":"string"}}},"badge":{"displayName":"Badge","description":"Badge in the header region.","type":"object","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Badge status.","type":"string","enumValues":["neutral","danger","warning","success","info"],"propertyEditorValues":{"neutral":{"description":"Neutral status","displayName":"Neutral"},"danger":{"description":"Danger status","displayName":"Danger"},"warning":{"description":"Warning status","displayName":"Warning"},"success":{"description":"Success status","displayName":"Success"},"info":{"description":"Info status","displayName":"Info"}}}}},"showAllTotalCount":{"displayName":"show totalCount","type":"boolean","description":"show totalCount even when there is no filter chip","value":false},"allTotalCountMessage":{"displayName":"customer string for total count","type":"string","description":"display customer string insteal of default string defined in CCA"},"displayMode":{"type":"string","displayName":"The display mode for the header.","enumValues":["light","mixed"],"propertyEditorValues":{"light":{"displayName":"Light","description":"The header background is light with dark text content"},"mixed":{"displayName":"Mixed","description":"The header background is dark with light text content. The page background is light."}}},"timestamp":{"type":"string","description":"display saved timestamp","displayName":"Timestamp"}},"methods":{"stringifyFilters":{"description":"A function to construct the bookmarkable version of filter chips.","displayName":"stringifyFilters Method","params":[],"return":"string"},"compareToSimplifedFilterChips":{"description":"A function to compare filter chips with bookmark string.","displayName":"compareToSimplifedFilterChips Method","params":[{"name":"filterChipsStr","description":"bookmarkable version of filter chips","type":"string"}],"return":"boolean"}},"events":{"spGoToParent":{"displayName":"spGoToParent event","description":"Triggered when the Go to Parent action is clicked","bubbles":true,"cancelable":false},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked.","bubbles":false,"cancelable":false},"spPrimaryAction":{"displayName":"spectraPrimaryAction event","description":"Triggered when the primary action is clicked","bubbles":true,"cancelable":false},"spSecondaryAction":{"displayName":"spSecondaryAction event","description":"Triggered when a secondary action is clicked","bubbles":true,"cancelable":false,"detail":{"secondaryItem":{"description":"The ID of the selected secondary action","type":"string"}}}},"slots":{"main":{"description":"This is the slot for main content","displayName":"main slot","implicitBusyContext":true,"preferredContent":["SpCollectionContainerElement","ListViewElement","DynamicTableElement","TableElement","SpMessagesBannerElement","DataGridElement"],"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}},"dashboard":{"description":"Slot for adding content to the dashboard","displayName":"dashboard slot","extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}}},"extension":{"catalog":{"category":"Redwood Page Templates","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-visual-smart-filter-search-48.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Smart%20Filter%20Search%20Page%20Template&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrasmartfiltersearch.html","screenshots":{}},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"data":{"customizers":[{"type":"heading","displayName":"Smart Filters"},{"propertyName":"smartFilters.value","displayName":"Value"},{"propertyName":"smartFilters.resultsData","displayName":"Result Data"},{"propertyName":"smartFilters.suggestions","displayName":"Suggestions"},{"propertyName":"smartFilters.suggestionFilters","displayName":"Suggestion Filters"},{"propertyName":"smartFilters.askHint","displayName":"Ask Hint"},{"propertyName":"smartFilters.filtersMetadata","displayName":"Filters Metadata"},{"propertyName":"smartFilters.autocompleteSource","displayName":"Autocomplete Source"},{"propertyName":"smartFilters.expanded","displayName":"Expanded"},{"type":"heading","displayName":"Select Context"},{"propertyName":"selectContextValue","displayName":"Value"},{"propertyName":"selectContextValueItem","displayName":"Value Item"},{"propertyName":"selectContext.data","displayName":"Data"},{"propertyName":"selectContext.itemText","translatable":true,"displayName":"Item Text"},{"propertyName":"selectContext.labelHint","translatable":true,"displayName":"Label Hint"}]},"general":{"customizers":[{"propertyName":"pageTitle"},{"propertyName":"pageSubtitle"},{"propertyName":"displayMode","type":"enumeration"},{"propertyName":"displayOptions.goToParent","displayName":"Go to Parent"},{"propertyName":"displayOptions.inFlowBack","displayName":"In Flow Back"},{"propertyName":"primaryAction.label","translatable":true,"displayName":"Primary Action Label"},{"propertyName":"primaryAction.disabled","displayName":"Primary Action Disabled"},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"actions"}},{"type":"drill-to-layout","label":"Badge","layout":"badgePanel"},{"type":"drill-to-layout","label":"Contextual Info","layout":"contextualInfoPanel"}]},"badgePanel":{"customizers":[{"propertyName":"badge.text","translatable":true,"displayName":"Text"},{"propertyName":"badge.status","displayName":"Status"}]},"contextualInfoPanel":{"customizers":[{"propertyName":"displayOptions.contextualInfoLabel","displayName":"Contextual Info Label"},{"propertyName":"contextualInfo","displayName":"contextual Info Items","singleName":"Item","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"label":{},"value":{}},"drill":{"layout":"contextualInfoItems"}}]},"contextualInfoItems":{"customizers":[{"propertyName":"contextualInfo.label"},{"propertyName":"contextualInfo.value"},{"type":"delete","propertyName":"contextualInfo","delete":"arrayIndex"}]},"actions":{"customizers":[{"propertyName":"secondaryActions.id"},{"propertyName":"secondaryActions.label"},{"propertyName":"secondaryActions.icon"},{"propertyName":"secondaryActions.display"},{"type":"delete","propertyName":"secondaryActions","delete":"arrayIndex"}]}},"events":{"suggestions":[{"name":"spPrimaryAction","type":"component"},{"name":"spSecondaryAction","type":"component","mappings":[{"variableName":"actionId","expression":"{{$event.detail.value.id}}","type":"string"}]},{"name":"spGoToParent","type":"component"},{"name":"spInFlowBack","type":"component"}]}}}}}'})),define("text!oj-sp/smart-filter-search/smart-filter-search-view.html",[],(function(){return'<html><head></head><body><div><oj-sp-header-general-overview data-otel-hero="smartFilterSearchPageHeader"data-oj-context="":id="[[uid+\'_h\']]"page-title="[[properties.pageTitle]]"page-subtitle="[[properties.pageSubtitle]]"select-context="[[headerSelectContext]]"select-context-value="{{properties.selectContextValue}}"select-context-value-item="{{properties.selectContextValueItem}}"smart-filters="{{properties.smartFilters}}"on-smart-filters-changed="[[smartFiltersHandler]]"primary-action="[[headerPrimaryAction]]"display-options.go-to-parent="[[properties.displayOptions.goToParent]]"display-options.in-flow-back="[[$properties.displayOptions.inFlowBack]]"secondary-actions="[[properties.secondaryActions]]"contextual-info="[[ contextualInfo ]]"translations="[[headerTranslations]]"display-options.contextual-info-label="[[properties.displayOptions.contextualInfoLabel]]"badge.text="[[properties.badge?.text]]"badge.status="[[properties.badge?.status]]"display-mode="[[properties.displayMode]]"timestamp="[[properties.timestamp]]"></oj-sp-header-general-overview><div class="oj-sp-public-primary-content-container"><div id="dashboard_main_wrapper"class="oj-flex oj-sm-only-flex-direction-column oj-sm-flex-wrap-nowrap oj-md-only-padding-2x-horizontal oj-lg-padding-8x-horizontal"><oj-bind-if test="[[slotCounts &amp;&amp; slotCounts[\'dashboard\'] > 0]]"><div :class="[[isDashboardVisible() ? \'oj-flex-item oj-sp-smart-filter-dashboard-wrapper\' : \'oj-helper-hidden\']]"><div id="dashboard_content_wrapper"class="oj-sp-smart-filter-dashboard-inner-wrapper"><oj-bind-slot name="dashboard"></oj-bind-slot></div></div></oj-bind-if><div :class="[[isMainContentVisible() ? \'oj-flex-item oj-sp-smart-filter-main-content-wrapper\' : \'oj-helper-hidden\' ]]"><div id="main-content-wrapper"><oj-bind-if test="[[totalCount() &amp;&amp; !displayCustomerString()]]"><div :id="[[uid+\'_numOfResults\']]"class="oj-sm-padding-4x-vertical oj-bg-neutral-10 oj-typography-body-sm"><div class="oj-sm-padding-4x-horizontal":aria-label="[[ totalCount() === 1 ? ojTranslate.applyParameters(res.smartFilterSearchOneResult, {numOfResults:  ojNumberConverter.format(totalCount()) }) : ojTranslate.applyParameters(res.smartFilterSearchNumberResults, {numOfResults:  ojNumberConverter.format(totalCount()) }) ]]"><oj-bind-if test="[[totalCount() === 1]]"><oj-bind-dom config="{{ {view: ojHtmlUtils.stringToNodeArray(ojTranslate.applyParameters(res.smartFilterSearchOneResult, {numOfResults: \'\\<span class= \\\'oj-typography-semi-bold\\\'\\>\' + ojNumberConverter.format(totalCount()) + \'\\</span\\>\'}))} }}"></oj-bind-dom></oj-bind-if><oj-bind-if test="[[totalCount() !== 1]]"><oj-bind-dom config="{{ {view: ojHtmlUtils.stringToNodeArray(ojTranslate.applyParameters(res.smartFilterSearchNumberResults, {numOfResults: \'\\<span class= \\\'oj-typography-semi-bold\\\'\\>\' + ojNumberConverter.format(totalCount()) + \'\\</span\\>\'}))} }}"></oj-bind-dom></oj-bind-if></div></div></oj-bind-if><oj-bind-if test="[[displayCustomerString()]]"><div :id="[[uid+\'_cutsomerString\']]"class="oj-sm-padding-4x-vertical oj-bg-neutral-10 oj-typography-body-sm"><div class="oj-sm-padding-4x-horizontal"><span class="oj-typography-semi-bold"><oj-bind-text value="[[properties.allTotalCountMessage]]"></oj-bind-text></span></div></div></oj-bind-if><div data-otel-hero="oj-sp-smart-filter-search.main"id="main-slot-wrapper"data-oj-context=""><oj-bind-slot name="main"></oj-bind-slot></div></div></div><oj-bind-if test="[[slotCounts &amp;&amp; slotCounts[\'dashboard\'] > 0 &amp;&amp; isSmallScreen()]]"><div class="oj-sp-smart-filter-switcher oj-color-invert oj-bg-neutral-170"><oj-radioset :id="[[uid + \'_switcher\']]"value="{{currentDisplayOption}}"label-hint="[[res.smartFilterSearchSwitchView]]"label-edge="none"class="oj-choice-direction-row oj-radioset-no-chrome"><oj-option value="dashboard":title="[[res.smartFilterSearchViewDashboard]]":aria-label="[[res.smartFilterSearchViewDashboard]]"></oj-option><oj-option value="main":title="[[res.smartFilterSearchViewSearchResults]]":aria-label="[[res.smartFilterSearchViewSearchResults]]"></oj-option></oj-radioset></div></oj-bind-if></div></div></div></body></html>'})),define("oj-sp/smart-filter-search/smart-filter-search-viewModel",["require","exports","knockout","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojcontext","ojs/ojconverter-number","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","ojs/ojhtmlutils","ojs/ojtranslation","oj-sp/header-general-overview/loader","ojs/ojbinddom","ojs/ojknockout","ojs/ojradioset"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartFilterSearchViewModel=void 0;const p="background: #222; color: #bada55",u="oj-sp-smart-filter-content-sticky";t.SmartFilterSearchViewModel=class{constructor(e){this.DASHBOARD="dashboard",this.filterChipProps=["count","dependencies","filter","filterLabel","label","value"],this.smartFiltersHandler=e=>{this.displayCustomerString(!1),this.totalCount(e.detail.value?e.detail.value.totalCount:0),e.detail.value.value&&0===e.detail.value.value.length&&!this.properties.selectContextValue&&this.updateDisplayforTotalCount(this.properties.showAllTotalCount),!e.detail.subproperty||"smartFilters.appliedFilters"!==e.detail.subproperty.path&&"smartFilters.value"!==e.detail.subproperty.path||this.composite.dispatchEvent(new CustomEvent(e.type,{detail:e.detail,bubbles:!1,cancelable:!1}))},this.onContextualInfoChanged=e=>{this.contextualInfo(e&&e.length>4?e.slice(0,4):e)},this.isSmallScreen=()=>l.compare(this.screenRange(),l.SCREEN_RANGE.SM)<=0,this.isDashboardVisible=()=>this.slotCounts[this.DASHBOARD]&&(!this.isSmallScreen()||this.currentDisplayOption()===this.DASHBOARD),this.isMainContentVisible=()=>!this.slotCounts[this.DASHBOARD]||!this.isSmallScreen()||this.currentDisplayOption()!==this.DASHBOARD,this.updateLayout=()=>{window.requestAnimationFrame(()=>{const e=this.composite.querySelector("#dashboard_main_wrapper"),t=this.composite.querySelector("#dashboard_content_wrapper"),i=this.composite.querySelector("#main-content-wrapper"),o=this.composite.querySelector(".oj-sp-header-general-overview-header-strip"),s=this.composite.querySelector("oj-sp-collection-container .oj-sp-toolbars-panel"),a=window.top.innerHeight,n=this.getHeaderStripBottom(o);if(t)if(this.isSmallScreen())i.classList.remove(u),t.classList.remove(u);else{const e=i?i.getBoundingClientRect().height:0,o=t.getBoundingClientRect().height;if(o<e){i.classList.remove(u),t.classList.add(u);const e=Math.min(a-o-10,n+10);t.style.setProperty("--oj-sp-smart-filter-content-sticky-top",e+"px")}else if(o>e){t.classList.remove(u),i.classList.add(u);const o=Math.min(a-e,n);i.style.setProperty("--oj-sp-smart-filter-content-sticky-top",o+"px")}}const r=a-n-this.getInAppNaviagtionHeight();e.style.minHeight=r+"px";const l=r-(s?s.getBoundingClientRect().height:0);document.documentElement.style.setProperty("--oj-sp-smart-filter-search-main-content-height",l+"px")})},this.onResizeWindow=e=>{this.updateLayout()},this.onScroll=e=>{this.updateLayout()},this.updateDisplayforTotalCount=e=>{e?this.properties.allTotalCountMessage&&(this.totalCount(0),this.displayCustomerString(!0)):this.totalCount(0)};const t=s.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.ojTranslate=c,this.ojHtmlUtils=d,this.ojNumberConverter=new a.IntlNumberConverter,this.composite=e.element,this.uid=e.uniqueId,this.slotCounts=e.slotCounts,this.properties=e.properties,this.res=o,this.totalCount=i.observable(0),this.displayCustomerString=i.observable(!1),this.currentDisplayOption=i.observable(this.DASHBOARD),this.contextualInfo=i.observableArray(),this.onContextualInfoChanged(this.properties.contextualInfo),this.screenRange=r.createScreenRangeObservable(),this.headerTranslations=i.computed(()=>Object.assign({},this.properties.translations)),this.headerPrimaryAction=i.computed(()=>this.properties.primaryAction?Object.assign({},this.properties.primaryAction):void 0),this.headerSelectContext=i.computed(()=>this.properties.selectContext?Object.assign({},this.properties.selectContext):void 0),this.busyResolve()}activated(e){n.log(`%c CCA ${this.uid} activated`,p)}connected(e){n.log(`%c CCA ${this.uid} connected`,p),window.addEventListener("resize",this.onResizeWindow),window.addEventListener("scroll",this.onScroll)}bindingsApplied(e){n.log(`%c CCA ${this.uid} bindingsApplied`,p),this.updateLayout()}propertyChanged(e){n.log(`%c CCA ${this.uid} propertyChanged: ${e.property}`,p),"contextualInfo"===e.property&&e.value&&this.onContextualInfoChanged(e.value),"selectContextValue"===e.property&&this.onSelectContextValueChange(e),"smartFilters"===e.property&&this.onSmartFiltersChange(e),"showAllTotalCount"===e.property&&this.onShowAllTotalCountChange(e)}disconnected(e){n.log(`%c CCA ${this.uid} disconnected`,p),window.removeEventListener("resize",this.onResizeWindow),window.removeEventListener("scroll",this.onScroll)}stringifyFilters(){if(!this.properties.smartFilters||!this.properties.smartFilters.value&&!this.properties.smartFilters.appliedFilters)return"";const e=this.properties.smartFilters.value?this.properties.smartFilters.value:this.properties.smartFilters.appliedFilters,t=this.simplifyFilterChips(e);return t&&t.length>0?JSON.stringify(t):""}compareToSimplifedFilterChips(e){const t=this.properties.smartFilters?this.properties.smartFilters.value?this.properties.smartFilters.value:this.properties.smartFilters.appliedFilters:[],i=this.simplifyFilterChips(t),o=this.simplifyFilterChips(e?JSON.parse(e):[]);if(i.length!==o.length)return!1;let s=!0;for(let e=0;e<i.length;e++)for(let t=0;t<this.filterChipProps.length;t++)if(i[e][this.filterChipProps[t]]!==o[e][this.filterChipProps[t]]){s=!1;break}return s}getHeaderStripBottom(e){return e&&e.getBoundingClientRect().bottom>0?e.getBoundingClientRect().bottom:0}simplifyFilterChips(e){return(e||[]).map(({filter:e,filterLabel:t,value:i,label:o})=>({filter:e,filterLabel:t,value:i,label:o}))}onSelectContextValueChange(e){this.displayCustomerString(!1),e.value||!this.properties.smartFilters||this.properties.smartFilters.value&&0!==this.properties.smartFilters.value.length?e.value&&this.properties.smartFilters&&this.totalCount(this.properties.smartFilters.totalCount):this.updateDisplayforTotalCount(this.properties.showAllTotalCount)}onSmartFiltersChange(e){var t;this.displayCustomerString(!1),e.value&&0===(null===(t=e.value.value)||void 0===t?void 0:t.length)&&!this.properties.selectContextValue&&this.updateDisplayforTotalCount(this.properties.showAllTotalCount),e.subproperty&&"internal"!==e.updatedFrom&&this.composite.setProperty("smartFilters",Object.assign(Object.assign({},this.properties.smartFilters),{stamp:new Date}))}onShowAllTotalCountChange(e){this.displayCustomerString(!1),!this.properties.smartFilters||this.properties.smartFilters.value&&0!==this.properties.smartFilters.value.length||this.properties.selectContextValue||this.updateDisplayforTotalCount(e.value),this.composite.setProperty("smartFilters",Object.assign(Object.assign({},this.properties.smartFilters),{stamp:new Date}))}getInAppNaviagtionHeight(){const e=document.documentElement,t=getComputedStyle(e).getPropertyValue("--oj-sp-shell-fixed-bottom");let i=0;const o=document.querySelector("oj-sp-in-app-navigation");return o&&o.visible&&t&&(i=+t.replace("px","")),i}}})),define("css!oj-sp/smart-filter-search/smart-filter-search-styles",[],(function(){})),define("oj-sp/smart-filter-search/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./smart-filter-search-view.html","./smart-filter-search-viewModel","css!./smart-filter-search-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-smart-filter-search",{metadata:JSON.parse(o),view:s,viewModel:a.SmartFilterSearchViewModel})})),define("css!oj-sp/smart-search-page/smart-search-page-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/smart-search-page/smart-search-page",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojvcomponent","preact","ojs/ojconverter-number","ojs/ojtranslation","css!./smart-search-page-styles","oj-sp/header-general-overview/loader"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSearchPage=void 0;let l=class extends a.Component{constructor(e){var t;super(e),this.state={totalCount:0,displayCustomerString:!!this.props.allTotalCountMessage,smartFilters:this.props.smartFilters},this.filterChipProps=["count","dependencies","filter","filterLabel","label","value"],this.onScroll=e=>{this.updateLayout()},this.onResizeWindow=e=>{this.updateLayout()},this.getBottomSpacing=()=>{const e=document.querySelector(".oj-sp-header-general-overview-mobile-buttons-container");return e?e.getBoundingClientRect().height:0},this.updateDisplayForTotalCount=e=>{e?this.props.allTotalCountMessage?(this.setState({totalCount:0}),this.setState({displayCustomerString:!0})):this.setState({totalCount:this.state.smartFilters.totalCount}):this.setState({totalCount:0})},this.smartFiltersHandler=e=>{this.setState({displayCustomerString:!1,totalCount:e.detail.value.totalCount,smartFilters:e.detail.value}),e.detail.value.value&&0===e.detail.value.value.length&&!this.props.selectContextValue&&this.updateDisplayForTotalCount(this.props.showAllTotalCount),e.detail&&this.props.onSmartFiltersChangedAction(e.detail.value)},this.selectContextValueHandler=e=>{var t,i;this.setState({displayCustomerString:!1}),null===(i=(t=this.props).onSelectContextValueChanged)||void 0===i||i.call(t,""===e.detail.value||void 0===e.detail.value?null:e.detail.value),e.detail.value||!this.state.smartFilters||this.state.smartFilters.value&&0!==this.state.smartFilters.value.length?e.detail.value&&this.state.smartFilters&&this.setState({totalCount:this.state.smartFilters.totalCount}):this.updateDisplayForTotalCount(this.props.showAllTotalCount)},this.selectContextValueItemHandler=e=>{var t,i;this.setState({displayCustomerString:!1}),null===(i=(t=this.props).onSelectContextValueItemChanged)||void 0===i||i.call(t,e.detail.value)},this.updateLayout=()=>{window.requestAnimationFrame(()=>{const e=this.compRefElement.querySelector("#mainContent"),t=this.compRefElement.querySelector(".oj-sp-header-general-overview-header-strip"),i=t&&t.getBoundingClientRect().bottom>0?t.getBoundingClientRect().bottom:0,o=this.compRefElement.querySelector(".oj-sp-smart-search-page-mobile-bottom-container");o&&this.props.primaryAction&&"off"!==this.props.primaryAction.display&&o.style.setProperty("--oj-sp-smart-search-page-mobile-bottom-container",this.getBottomSpacing()+"px");const s=`calc(${window.innerHeight-i}px - var(--oj-sp-shell-fixed-bottom, 0px))`;e.style.minHeight=s})},this.ref=(0,a.createRef)(),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,s.getUniqueId)(),this.res=Object.assign({},i),this.ojNumberConverter=new n.IntlNumberConverter}componentDidMount(){o.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} mounted`),this.compRefElement=this.ref.current,window.addEventListener("resize",this.onResizeWindow),window.addEventListener("scroll",this.onScroll),this.updateLayout()}componentDidUpdate(e,t){var i,s;o.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} updated from :`,e,"to:",this.props),this.state.smartFilters!==t.smartFilters&&this.onSmartFiltersChange(),(null===(i=this.props.smartFilters)||void 0===i?void 0:i.value)!==(null===(s=e.smartFilters)||void 0===s?void 0:s.value)&&this.setState({smartFilters:this.props.smartFilters}),this.props.showAllTotalCount!==e.showAllTotalCount&&this.onShowAllTotalCountChange(),this.props.allTotalCountMessage!==e.allTotalCountMessage&&this.onShowAllTotalCountChange()}componentWillUnmount(){o.log(`Component: ${this.constructor.name}, id: ${this.uniqueId} will unmount`),window.removeEventListener("resize",this.onResizeWindow),window.removeEventListener("scroll",this.onScroll)}render(e){return(0,a.h)("div",{id:"root",ref:this.ref},(0,a.h)("oj-sp-header-general-overview",{"data-otel-hero":"smartSearchPageHeader",id:this.uniqueId+"_h",pageTitle:e.pageTitle,pageSubtitle:e.pageSubtitle,selectContext:e.selectContext,selectContextValue:e.selectContextValue,onselectContextValueChanged:this.selectContextValueHandler,selectContextValueItem:e.selectContextValueItem,onselectContextValueItemChanged:this.selectContextValueItemHandler,smartFilters:this.state.smartFilters,onsmartFiltersChanged:this.smartFiltersHandler,avatar:e.avatar,badge:e.badge,primaryAction:e.primaryAction,displayMode:e.displayMode,displayOptions:this.props.displayOptions,secondaryActions:e.secondaryActions,timestamp:e.timestamp,translations:e.translations,"data-oj-context":!0},e.search&&(0,a.h)("div",{slot:"search"},e.search)),(0,a.h)("div",{id:"mainContent","data-otel-hero":"oj-sp-smart-search-page.default",class:"oj-sp-public-primary-content-container","data-oj-context":!0},(0,a.h)("div",null,(0,a.h)("div",{role:"status",class:"oj-sp-template-wrapper"},!this.state.displayCustomerString&&0!==this.state.totalCount&&this.displayTotalCount(),this.state.displayCustomerString&&this.displayCustomerString()),e.children," "),(0,a.h)("div",{class:this.props.primaryAction&&"off"!==this.props.primaryAction.display?"oj-sp-smart-search-page-mobile-bottom-container oj-md-hide":""})))}stringifyFilters(){if(!this.state.smartFilters||!this.state.smartFilters.value)return"";const e=this.state.smartFilters.value?this.state.smartFilters.value:[],t=this.simplifyFilterChips(e);return t&&t.length>0?JSON.stringify(t):""}compareToSimplifedFilterChips(e){const t=this.state.smartFilters&&this.state.smartFilters.value?this.state.smartFilters.value:[],i=this.simplifyFilterChips(t),o=this.simplifyFilterChips(e?JSON.parse(e):[]);if(i.length!==o.length)return!1;let s=!0;for(let e=0;e<i.length;e++)for(let t=0;t<this.filterChipProps.length;t++)if(i[e][this.filterChipProps[t]]!==o[e][this.filterChipProps[t]]){s=!1;break}return s}simplifyFilterChips(e){return(e||[]).map(({filter:e,filterLabel:t,value:i,label:o})=>({filter:e,filterLabel:t,value:i,label:o}))}displayTotalCount(){const e=r.applyParameters(this.res.smartFilterSearchOneResult,{numOfResults:"<span class= 'oj-typography-semi-bold'>"+this.ojNumberConverter.format(this.state.totalCount)+"</span>"}),t=r.applyParameters(this.res.smartFilterSearchNumberResults,{numOfResults:"<span class= 'oj-typography-semi-bold'>"+this.ojNumberConverter.format(this.state.totalCount)+"</span>"}),i=r.applyParameters(this.res.smartFilterSearchOneResult,{numOfResults:this.ojNumberConverter.format(this.state.totalCount)}),o=r.applyParameters(this.res.smartFilterSearchNumberResults,{numOfResults:this.ojNumberConverter.format(this.state.totalCount)});return(0,a.h)("div",{id:this.uniqueId+"_numOfResults",class:"oj-sm-padding-4x-vertical oj-bg-neutral-10 oj-typography-body-sm"},1===this.state.totalCount?(0,a.h)("div",{"aria-label":i,dangerouslySetInnerHTML:{__html:e}}," "):(0,a.h)("div",{"aria-label":o,dangerouslySetInnerHTML:{__html:t}}," "))}displayCustomerString(){return(0,a.h)("div",{id:this.uniqueId+"_cutsomerString",class:"oj-sm-padding-4x-vertical oj-bg-neutral-10 oj-typography-body-sm"},(0,a.h)("span",{class:"oj-typography-semi-bold"},this.props.allTotalCountMessage))}onSmartFiltersChange(){var e;this.setState({displayCustomerString:!1}),this.state.smartFilters&&0===(null===(e=this.state.smartFilters.value)||void 0===e?void 0:e.length)&&!this.props.selectContextValue&&this.updateDisplayForTotalCount(this.props.showAllTotalCount)}onShowAllTotalCountChange(){this.setState({displayCustomerString:!1}),!this.state.smartFilters||this.state.smartFilters.value&&0!==this.state.smartFilters.value.length||this.props.selectContextValue||this.updateDisplayForTotalCount(this.props.showAllTotalCount)}};l.defaultProps={displayOptions:{goToParent:!1,inFlowBack:!1,switcherSearch:!1},showAllTotalCount:!0},l._metadata={properties:{allTotalCountMessage:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},badge:{type:"object",properties:{text:{type:"string"},status:{type:"string",enumValues:["danger","neutral","warning","success","info"]}}},displayMode:{type:"string",enumValues:["mixed","light"]},displayOptions:{type:"object",properties:{goToParent:{type:"boolean"},inFlowBack:{type:"boolean"},switcherSearch:{type:"boolean"}}},pageTitle:{type:"string"},pageSubtitle:{type:"string"},primaryAction:{type:"object",properties:{label:{type:"string"},display:{type:"string",enumValues:["disabled","on","off"]}}},secondaryActions:{type:"Array<object>"},selectContext:{type:"object",properties:{data:{type:"DataProvider"},itemText:{type:"string"},labelHint:{type:"string"},secondaryText:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},icon:{type:"object",properties:{class:{type:"string"},altText:{type:"string"}}}}},selectContextValue:{type:"string|number",writeback:!0},selectContextValueItem:{type:"object",writeback:!0},showAllTotalCount:{type:"boolean"},smartFilters:{type:"object",properties:{askHint:{type:"string"},autofocus:{type:"boolean"},expanded:{type:"string"},autocompleteSource:{type:"string"},filtersMetadata:{type:"object"},resultsData:{type:"any"},suggestionFilters:{type:"any"},suggestions:{type:"any"},totalCount:{type:"number"},translations:{type:"object",properties:{msgNoData:{type:"string"}}},value:{type:"Array<object>"}}},timestamp:{type:"string"},translations:{type:"object",properties:{actions:{type:"string"},avatarHint:{type:"string"},goToParent:{type:"string"}}}},events:{smartFiltersChangedAction:{},spGoToParent:{},spInFlowBack:{},spPrimaryAction:{},spSecondaryAction:{}},slots:{"":{implicitBusyContext:!0},search:{}},extension:{_WRITEBACK_PROPS:["selectContextValue","selectContextValueItem"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{stringifyFilters:{},compareToSimplifedFilterChips:{}}},l=__decorate([(0,s.customElement)("oj-sp-smart-search-page"),__metadata("design:paramtypes",[Object])],l),t.SmartSearchPage=l})),define("oj-sp/smart-search-page/loader",["require","exports","./smart-search-page"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSearchPage=void 0,Object.defineProperty(t,"SmartSearchPage",{enumerable:!0,get:function(){return i.SmartSearchPage}})})),define("oj-sp/smart-search/common/interfaces",["require","exports","oj-sp/common-util/common-util"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Module=t.DecoratedFilter=void 0;t.DecoratedFilter=class{constructor(e,t,i,o){this._filter=e,this._typeConfig=t,this._config=i,this._searchOptions=o}get label(){return this._config.label}get value(){const e=Object.assign(Object.assign(Object.assign({},this._typeConfig.defaultData),this._config.data),this._filter.data),t=this.options;return this._typeConfig.displayValueConverter({data:e,options:t})}get count(){return this._filter.count}get ghost(){return this._filter}get jetFilterCriterion(){const e=this.data,t=this.options,i=this.name;return this._typeConfig.filterCriterionConverter({data:e,options:t,name:i})}get options(){return Object.assign(Object.assign({},this._typeConfig.defaultOptions),this._config.options)}get data(){const e=Object.assign(Object.assign(Object.assign({},this._typeConfig.defaultData),this._config.data),this._filter.data);return function(e,t){if(!e)return t;const i=Object.keys(e);return Object.keys(t).forEach(e=>{i.includes(e)||delete t[e]}),Object.freeze(t)}(this._typeConfig.defaultData,e)}get filterUITemplate(){return this._typeConfig.filterUITemplate}get name(){return this._filter.name}get id(){const e=this.data,t=this.options,i=this.name;return this._typeConfig.idConverter({data:e,options:t,name:i})}get isKeywordFilter(){var e;return this._filter.name===(null===(e=this._searchOptions)||void 0===e?void 0:e.keywordName)}get isToggleFilter(){return!this.isKeywordFilter&&!this._typeConfig.filterUITemplate}get type(){return this._config.type}async validate(){const{data:e,options:t,name:i}=this;return await this._typeConfig.validate(i,e,t)}get verboseValue(){const e=Object.assign(Object.assign(Object.assign({},this._typeConfig.defaultData),this._config.data),this._filter.data),t=this.options;return(0,i.isFunction)(this._typeConfig.displayVerboseValueConverter)?this._typeConfig.displayVerboseValueConverter({data:e,options:t}):this._typeConfig.displayValueConverter({data:e,options:t})}async fetchVolatileData(){const{data:e,options:t}=this;(0,i.isFunction)(this._typeConfig.fetchVolatileData)&&(this._filter.data=await this._typeConfig.fetchVolatileData({data:e,options:t}))}};t.Module=class{constructor(e){this._parentModule=e,this.init()}init(){}get parentModule(){return this._parentModule}get state(){return this.parentModule.state}setState(e,t){this.parentModule.setState(e,t)}}})),define("oj-sp/smart-search/common/enums",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ARROW_VISIBILITY=t.DEFAULT_FILTER_TYPES=t.SUGGESTION_TYPE=t.FILTER_CHIP_TYPE=void 0,function(e){e.APPLIED="appliedFilterChip",e.SUGGESTION="suggestionFilterChip"}(t.FILTER_CHIP_TYPE||(t.FILTER_CHIP_TYPE={})),function(e){e.AUTOCOMPLETE="autocomplete",e.HISTORY="history",e.SUGGESTION="suggestion"}(t.SUGGESTION_TYPE||(t.SUGGESTION_TYPE={})),function(e){e.DATE_RANGE_FILTER="oj-sp/smart-search/default-filters/DateRangeFilter",e.NUMERIC_RANGE_FILTER="oj-sp/smart-search/default-filters/NumericRangeFilter",e.TOGGLE_FILTER="oj-sp/smart-search/default-filters/ToggleFilter",e.SELECT_SINGLE_FILTER="oj-sp/smart-search/default-filters/SelectSingleFilter",e.SELECT_MULTIPLE_FILTER="oj-sp/smart-search/default-filters/SelectMultipleFilter",e.BIG_NUMERIC_RANGE_FILTER="oj-sp/smart-search/default-filters/BigNumericRangeFilter"}(t.DEFAULT_FILTER_TYPES||(t.DEFAULT_FILTER_TYPES={})),function(e){e.HIDDEN="hidden",e.VISIBLE="visible",e.AUTO="auto"}(t.ARROW_VISIBILITY||(t.ARROW_VISIBILITY={}))})),define("oj-sp/smart-search/common/FilterUtils",["require","exports","./interfaces","oj-sp/common-util/common-util","./enums","ojs/ojlogger","ojs/ojlistview"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashCode=t.generateRandomSuggestionsSubject=t.seedFiltersFromBookmarkableToken=t.generateBookmarkableFiltersToken=t.invokeLifecycleHooks=t.deepCompare=t.getAppliedFiltersForPlatform=t.getDataForNodeFromSuggestions=t.removeKeywordFiltersInEditMode=t.getDataForNodeFromAppliedFilters=t.editedFilterPredicate=t.cloneDecoratedFilters=t.checkForDuplicateKeywordFilters=t.countKeywordFilters=t.invokeFilterUITemplate=t.calcLength=t.findAutocompleteFilteringText=t.hasAutocompleteFiltering=t.defaultAutocompleteFilterCriterionConverter=t.buildSuggestionsFilterCriterion=t.buildAutocompleteSuggestionsFilterCriterion=t.buildJetFilterCiterion=t.undecorateFilters=t.decorateFilters=t.decorateFilter=t.loadFilterType=void 0;const n=new Map;async function r(t){if(!n.has(t)){const i=await new Promise((i,o)=>{e([t],i,o)}),o=t.split("/"),s=o[o.length-1];n.set(t,i[s])}return n.get(t)}async function l(e,t){const o=e.filters[t.name];if(!o)return void(0,a.error)(`Filter name "${t.name}" is not defined in the current search config.`);const s=await r(o.type);if(!s)return void(0,a.error)(`Filter type "${o.type}" can ont be loaded.`);return new i.DecoratedFilter(t,s,o,e.options)}async function d(e,t){const i=[];i.length=t.length,t.forEach((t,o)=>{i[o]=l(e,t)});return(await Promise.all(i)).filter(e=>void 0!==e)}function c(e){return e.map(e=>e.ghost)}function p(e,t){const i=null!=e?e:e=>!0;if(!Array.isArray(t)||t.length<1)return null;const o={op:"$and",criteria:[],$tag:"_root_"};t.forEach(e=>{if(i(e)){const t=e.jetFilterCriterion;t&&o.criteria.push(t)}});let s=null;return s=0===o.criteria.length?null:1===o.criteria.length?o.criteria[0]:o,s}function u(e){return{$tag:"autocomplete",text:e}}function h(e,t){if(e===t)return!0;const i=typeof e;if(i!==typeof t)return!1;if(null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return function(e,t){if(e.length!==t.length)return!1;for(let i=0,o=e.length;i<o;i++)if(!h(e[i],t[i]))return!1;return!0}(e,t);if(e.constructor===Object)return function e(t,i){if(t===i)return!0;if(!(t instanceof Object&&i instanceof Object))return!1;if(t.constructor!==i.constructor)return!1;const{hasOwnProperty:o}=Object.prototype,s=Object.keys(t);let a;for(let n=0;n<s.length;n++)if(a=s[n],o.call(t,a)){if(!o.call(i,a))return!1;if(t[a]!==i[a]){if("object"!=typeof t[a])return!1;if(!e(t[a],i[a]))return!1}}const n=Object.keys(i);for(let e=0;e<n.length;e++)if(a=n[e],o.call(i,a)&&!o.call(t,a))return!1;return 0!==s.length||0!==n.length||JSON.stringify(t)===JSON.stringify(i)}(e,t);if("symbol"===i)return String(e)===String(t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1}t.loadFilterType=r,t.decorateFilter=l,t.decorateFilters=d,t.undecorateFilters=c,t.buildJetFilterCiterion=p,t.buildAutocompleteSuggestionsFilterCriterion=function(e,t,i){let o=p(null,t);const s=i||u;return e&&(o?Array.isArray(o.criteria)?o.criteria.push(s(e)):o={op:"$and",$tag:"_root_",criteria:[o,s(e)]}:o=s(e)),o},t.buildSuggestionsFilterCriterion=function(e,t){const i={op:"$and",criteria:[]};return e&&i.criteria.push({text:e}),t.forEach(e=>{i.criteria.push({op:"$ne",value:{id:e.id}})}),0===i.criteria.length?null:1===i.criteria.length?i.criteria[0]:i},t.defaultAutocompleteFilterCriterionConverter=u,t.hasAutocompleteFiltering=function e(t){if(!t)return!1;if("autocomplete"===t.$tag)return!0;if(Array.isArray(t.criteria)){const{criteria:i}=t;for(let t=0;t<i.length;t++)if(e(i[t]))return!0}return!1},t.findAutocompleteFilteringText=function e(t){if(!t)return null;if("autocomplete"===t.$tag)return t.text;if(Array.isArray(t.criteria)){const{criteria:i}=t;for(let t=0;t<i.length;t++){const o=e(i[t]);if(o)return o}}return null},t.calcLength=function(e,t="codePoint"){if(""==e||null==e||null==e)return 0;const i=e.length;let o,s=0;switch(t){case"codePoint":for(let t=0;t<i;t++)55296==(63488&e.charCodeAt(t))&&(s+=1);o=i-s/2;break;case"codeUnit":default:o=i}return o},t.invokeFilterUITemplate=function(e,t,i){const{filterUITemplate:o}=t;if(!o)return;return o({activeFilter:t,appliedFilters:i,onDataChanged:e})},t.countKeywordFilters=function(e,t){let i=0;return t.forEach(t=>{t.name===e&&(i+=1)}),i},t.checkForDuplicateKeywordFilters=function(e,t,i){return!!i.find(i=>{var o,s;return i.name===e&&0===(null===(s=null===(o=i.data)||void 0===o?void 0:o.text)||void 0===s?void 0:s.localeCompare(t,void 0,{sensitivity:"accent"}))})},t.cloneDecoratedFilters=function(e,t){const i=c(t);return d(e,(0,o.cloneDeep)(i))},t.editedFilterPredicate=function(){return e=>!e.ghost.data.editMode},t.getDataForNodeFromAppliedFilters=function(e,t,i){var o;if(Array.isArray(i)&&i.length>0&&e&&e.contains(t)){const s=null!==(o=Array.from(e.querySelectorAll("li.oj-sp-filter-chip.oj-sp-filter-chip-applied")))&&void 0!==o?o:[];for(let o=0;o<s.length;o++)if(s[o]===t||s[o].contains(t)){const t="applied-filters",a=s[o].getAttribute("data-key"),n=o,r=e,l=i.find((e,t)=>a===e.id||n===t);if(!l)continue;const{id:d,name:c,verboseValue:p,label:u,type:h,data:m}=l,g=l.ghost.data,y=Object.freeze({id:d,name:c,value:p,label:u,type:h,ghostData:g,data:m});return{collection:t,index:n,key:a,parent:r,data:y}}}},t.removeKeywordFiltersInEditMode=function(e,t){return t.filter(t=>t.name!==e||!t.ghost.data.editMode)},t.getDataForNodeFromSuggestions=function(e,t){var i;const a=({$$suggestionType:e,item:t})=>{const{name:i,type:s,id:a,value:n,label:r}=t;return Object.freeze({$$suggestionType:e,id:a,name:i,type:s,value:n,label:r,data:(0,o.cloneDeep)(t.data)})};if(e&&t){const o=e.getContextByNode(t);if(o){const t="suggestions",{index:n,key:r,parent:l}=o,d=null!==(i=e.getDataForVisibleItem(o))&&void 0!==i?i:{};let{$$suggestionType:c}=d;if(c=null!=c?c:s.SUGGESTION_TYPE.AUTOCOMPLETE,c===s.SUGGESTION_TYPE.AUTOCOMPLETE){return{collection:t,index:n,key:r,parent:l,data:Object.freeze({key:d.key,$$suggestionType:c})}}if(c===s.SUGGESTION_TYPE.SUGGESTION){return{collection:t,index:n,key:r,parent:l,data:a({$$suggestionType:c,item:d})}}if(c===s.SUGGESTION_TYPE.HISTORY){return{collection:t,index:n,key:r,parent:l,data:d.filters.map(e=>a({$$suggestionType:c,item:e}))}}}}},t.getAppliedFiltersForPlatform=function(e){return e.isSmallScreenOrMobile?e.selectedFiltersSmallScreen:e.appliedFiltersArray},t.deepCompare=h;t.invokeLifecycleHooks=async e=>{var t,i,o,s;const{lifecycle:a,suggestionsFilters:n,prevAppliedFilters:r,appliedFilters:l,caretaker:d}=e;await(null==d?void 0:d.prepare({suggestionsFilters:n}));const c=[];r.forEach(e=>{const t=l.find(t=>t.id===e.id);t?h(e.data,t.data)||c.push({targetedFilter:t,operation:"update"}):c.push({targetedFilter:e,operation:"delete"})}),l.forEach(e=>{r.find(t=>t.id===e.id)||c.push({targetedFilter:e,operation:"add"})}),c.length>0&&await(null==d?void 0:d.captureAppliedFiltersHistory({prevAppliedFilters:r,appliedFilters:l,delta:c}));let p=n;await(null==d?void 0:d.applySuggestionsFiltersDefaultValues({filters:p})),p=null!==(i=await(null===(t=null==a?void 0:a.suggestionsFilters)||void 0===t?void 0:t.computeCounts({suggestionsFilters:p,appliedFilters:l})))&&void 0!==i?i:p;return p=(null!==(s=await(null===(o=null==a?void 0:a.suggestionsFilters)||void 0===o?void 0:o.relevanceRanking({suggestionsFilters:p})))&&void 0!==s?s:{suggestionsFilters:p,excludedFilters:[]}).suggestionsFilters,await(null==d?void 0:d.relevanceRankingSuggestionsFilters({filters:p})),p},t.generateBookmarkableFiltersToken=function(e){if(!Array.isArray(e))return;const t=[];e.forEach(e=>{t.push([e.name,e.data])});const i=JSON.stringify(t);return window.btoa(i)};t.seedFiltersFromBookmarkableToken=async(e,t)=>{let i,o;try{i=window.atob(t)}catch(e){return(0,a.error)("seedFiltersFromBookmarkableToken - Unable to restore filters from bookmarkable token.  Decode from base64 failed.",e),[]}try{o=JSON.parse(i)}catch(e){return(0,a.error)("seedFiltersFromBookmarkableToken - Unable to parse JSON.",e),[]}const s=[];if(Array.isArray(o))for(let t=0;t<o.length;t++){const i=o[t];if(!Array.isArray(i)||2!==i.length){(0,a.error)(`seedFiltersFromBookmarkableToken - Unable to restore filter ${t} from bookmarkable token.  Invalid filter tupple format.`);continue}const n={name:i[0],data:i[1]};let r;try{r=await l(e,n)}catch(e){(0,a.error)(`seedFiltersFromBookmarkableToken - Unable to restore filter ${t} from bookmarkable token.  Filter is no longer valid for the targeted smart search configuration.`,e);continue}r&&await r.validate()?s.push(r):(0,a.error)(`seedFiltersFromBookmarkableToken - Unable to restore filter ${t} from bookmarkable token.  Filter is no longer valid for the targeted smart search configuration.`)}return s},t.generateRandomSuggestionsSubject=function(){return`${(0,o.uid)(4)}::${(0,o.uid)(4)}::${(0,o.uid)(4)}`},t.hashCode=function(e){let t=0;const i=e;if(0===i.length)return t;for(let e=0;e<i.length;e++){t=(t<<5)-t+(0|i.charCodeAt(e))}return t}})),define("oj-sp/smart-search/module/ModuleUtils",["require","exports","../common/FilterUtils","oj-sp/common-util/common-util","../common/enums","ojs/ojconveyorbelt"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimKeywordsExceedingMaxKeywordFiltersCount=t.mergeHistorySuggestionsWithAppliedFilters=t.getActiveComplexFilterId=t.getShouldSuggestionPopupDisplay=t.editFilterIfNotValid=t.remainingAppliedFilters=t.focusFilterChip=void 0,t.focusFilterChip=function(e,t,a,n){if((0,o.isNullOrUndefined)(a))return;const r=(0,i.getAppliedFiltersForPlatform)(e),l=document.getElementById(t);if(!l)return null;const d=l.querySelectorAll(".oj-sp-filter-chip-container");let c;a===r.length?c=d[a-1]:a<r.length&&(c=d[a]),null==c||c.focus(),(null==n?void 0:n.arrowVisibility)===s.ARROW_VISIBILITY.VISIBLE&&n.scrollElementIntoView(c.parentElement)},t.remainingAppliedFilters=function(e,t,o){const s=(0,i.getAppliedFiltersForPlatform)(e);let a;return{filters:(null!=o?o:s).filter((e,i)=>(t.id===e.id&&(a=i),t.id!==e.id)),index:a}},t.editFilterIfNotValid=async function(e,t,i,o){if(!(await t.validate()||t.isKeywordFilter||t.isToggleFilter||await t.validate())){const s=document.getElementById(e);if(!s)return null;const a=s.querySelectorAll(".oj-sp-filter-chip-container")[i.length-1];await o(a,t)}},t.getShouldSuggestionPopupDisplay=function(e,t,s){return e.trim().length>0&&(0,i.calcLength)(e)>=s||!(0,o.isEmpty)(t)},t.getActiveComplexFilterId=function(e,t){return e.complexPopupOpened&&t?t:""},t.mergeHistorySuggestionsWithAppliedFilters=async function(e,t,o){let s=(0,i.getAppliedFiltersForPlatform)(e);s=await(0,i.cloneDecoratedFilters)(t,s);const a=new Map;s.forEach(e=>a.set(e.id,e));for(const e of o)a.has(e.id)?a.delete(e.id):a.set(e.id,e);return s.length=0,a.forEach(e=>s.push(e)),s},t.trimKeywordsExceedingMaxKeywordFiltersCount=function(e,t,i){const o=i.slice(0);let s=e;for(let e=o.length-1;e>-1&&s>t;e--)o[e].isKeywordFilter&&(o.splice(e,1),--s);return o}})),define("oj-sp/smart-search/module/DesktopKeywordFilterModule",["require","exports","./../common/interfaces","./ModuleUtils","../common/FilterUtils","oj-sp/common-util/common-util","../common/enums","ojs/ojlogger"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopKeywordFilterModule=void 0;class l extends i.Module{constructor(e){super(e),this.appliedKeywordFiltersEditStart=(e,t,i)=>{const o={description:`Smart Search Desktop - appliedKeywordFiltersEditStart for edited filter "${t.id}"`},s=(0,a.setBusyResolve)(i.current,o);this.__appliedKeywordFiltersEditStart(e,t,i).then(()=>{s()}).catch(e=>{(0,r.error)(e),s()})},this.__appliedKeywordFiltersEditStart=async(e,t,i)=>{this.parentModule.parentModule.inlineInputRef=i,this.parentModule.closeMaxKeywordPopUp();const o=await(0,s.cloneDecoratedFilters)(this.parentModule.parentModule.searchConfig,this.state.appliedFiltersArray);this.parentModule.parentModule.editedFilterChip=t,o.forEach(i=>{i.id===t.id?i.ghost.data.editMode=e:i.ghost.data.editMode=!1}),await this.parentModule.parentModule.setComponentState({appliedFiltersArray:o,userAssistancePopupOpened:!1,inlineInputValue:t.data.text,isInlineEditActive:e},t,()=>{var e,t;this.parentModule.updateArrowVisibility(),null===(e=i.current)||void 0===e||e.select(),this.parentModule.getArrowVisibility()===n.ARROW_VISIBILITY.VISIBLE&&(null===(t=this.parentModule.conveyorBeltRef.current)||void 0===t||t.scrollElementIntoView(null==i?void 0:i.current.parentElement)),this.onChangeValueHandlerFilterInput(this.state.inlineInputValue)})},this.onFilterChipInputBlur=e=>{const t={description:`Smart Search Desktop - onFilterChipInputBlur for edited filter "${e.id}"`},i=(0,a.setBusyResolve)(this.parentModule.conveyorBeltRef.current,t);this.__onFilterChipInputBlur(e).then(()=>{i()}).catch(e=>{(0,r.error)(e),i()})},this.__onFilterChipInputBlur=async e=>{const t=await(0,s.cloneDecoratedFilters)(this.parentModule.parentModule.searchConfig,this.state.appliedFiltersArray),i=t.find(t=>t.id===e.id);i&&(i.ghost.data.editMode=!1,this.parentModule.parentModule.setComponentState({appliedFiltersArray:t,isInlineEditActive:!1}))},this.removeAppliedFilters=e=>{const{afterStateChanged:t,filters:i,bsResolve:o}=this.parentModule.parentModule.removeAppliedFilters(e);this.parentModule.parentModule.setComponentState({appliedFiltersArray:i,userAssistancePopupOpened:!1,suggestionPopupOpened:!1,complexPopupOpened:!1},this.parentModule.parentModule.editedFilterChip,()=>{t(this.state.appliedFiltersArray),o()}),this.parentModule.closeMaxKeywordPopUp()},this.appliedKeywordFiltersEditEnd=(e,t,i)=>{const o={description:`Smart Search Desktop - appliedKeywordFiltersEditEnd for edited filter "${t.id}"`},s=(0,a.setBusyResolve)(i.current,o);this.__appliedKeywordFiltersEditEnd(e,t,i).then(()=>{s()}).catch(e=>{(0,r.error)(e),s()})},this.__appliedKeywordFiltersEditEnd=async(e,t,i)=>{const a=await(0,s.cloneDecoratedFilters)(this.parentModule.parentModule.searchConfig,this.state.appliedFiltersArray);this.parentModule.parentModule.editedFilterChip=null;const n=i?i.current?i.current.value:i.data.text:"";let r=null;const{filters:l,index:d}=(0,o.remainingAppliedFilters)(this.state,t);if(isNaN(d)||(this.parentModule.parentModule.removedFilterChipIndex=d),!n.trim()||(0,s.checkForDuplicateKeywordFilters)(this.parentModule.parentModule.searchConfig.options.keywordName,n.trim(),l))return this.removeAppliedFilters(t),void this.setState({inlineInputValue:"",isInlineEditActive:!1,suggestionPopupOpened:!1},()=>{this.parentModule.parentModule.focusInputTextElem()});a.forEach((i,o)=>{if(i.id===t.id){const t=i.ghost.data;t.editMode=e,t.text=null==n?void 0:n.trim(),i.ghost.data=t,r=o}else i.ghost.data.editMode=!1}),this.parentModule.parentModule.setComponentState({appliedFiltersArray:a,inlineInputValue:"",isInlineEditActive:e,suggestionPopupOpened:!1},null,()=>{(0,o.focusFilterChip)(this.state,this.parentModule.parentModule.appliedFiltersContainerId,r,this.parentModule.conveyorBeltRef.current)})},this.onChangeValueHandlerFilterInput=e=>{const t={description:`Smart Search Desktop - onChangeValueHandlerFilterInput value "${e}"`},i=(0,a.setBusyResolve)(this.parentModule.conveyorBeltRef.current,t);this.__onChangeValueHandlerFilterInput(e).then(()=>{i()}).catch(e=>{(0,r.error)(e)})},this.__onChangeValueHandlerFilterInput=async e=>{this.state.isInlineEditActive&&this.setState({inlineInputValue:e},()=>{(0,a.isEmptyString)(e)||this.state.suggestionPopupOpened||this.parentModule.openSuggestionsPopup()})},this.onFilterInputKeyPress=e=>{e.stopPropagation();const{key:t}=e;t===a.KEY_NAME.ARROW_DOWN&&(e.preventDefault(),this.parentModule.focusPopupListView())}}get component(){return this.parentModule.component}}t.DesktopKeywordFilterModule=l})),define("oj-sp/smart-search/components/search-input/useTextFieldInputHandlers",["require","exports","preact/hooks","oj-sp/common-util/common-util"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTextFieldInputHandlers=void 0,t.useTextFieldInputHandlers=function({value:e,onValueChanged:t,onValueSubmitted:s,onInputBlur:a,onNavKeyUp:n}){const r=(0,i.useRef)(!1),l=(0,i.useRef)(e),d=(0,i.useCallback)(e=>{const t=e.target.value;t&&(null==s||s(e),l.current=t)},[s]);return{onBlur:(0,i.useCallback)(e=>{null==a||a(e)},[a]),onKeyDown:(0,i.useCallback)(e=>{e.key===o.KEY_NAME.ENTER?d(e):e.key!==o.KEY_NAME.ARROW_LEFT&&e.key!==o.KEY_NAME.ARROW_RIGHT&&e.key!==o.KEY_NAME.ARROW_DOWN||n(e)},[d]),oncompositionstart:(0,i.useCallback)(()=>{r.current=!0},[]),oncompositionend:(0,i.useCallback)(()=>{r.current=!1},[]),onInput:(0,i.useCallback)(i=>{(!r.current||r.current&&(0,o.isAndroid)())&&(null==t||t({previousValue:e,value:i.target.value}))},[e,t])}}})),define("oj-sp/smart-search/components/filter-chip/keyword-chip",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","preact/hooks","../search-input/useTextFieldInputHandlers"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordFilterChip=void 0;t.KeywordFilterChip=e=>{const{filterChip:t,onAppliedFilterChipClose:d,onAppliedFilterChipEditStart:c,onAppliedFilterChipEditEnd:p,onFilterChipInputBlur:u,onAppliedFilterChipKeyDown:h,onChangeValueHandlerFilterInput:m,inlineEditInputValue:g,onFilterInputKeyPress:y}=e,f=(0,o.useRef)(null),[b,v]=(0,o.useState)(!1),[j,A]=(0,o.useState)(!1),[C,E]=(0,o.useState)(!1),T=(0,r.useMemo)(()=>Object.assign({},a),[a]),_=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation();const i=e.currentTarget.closest(".oj-sp-filter-chip-container").offsetWidth;c(!0,t,f,i)},[c,t,f]),S=(0,o.useCallback)(e=>{e.key===s.KEY_NAME.ENTER?p(!1,t,f):y(e)},[y,p,t,f]),x=(0,o.useCallback)(()=>{v(!1)},[v]),O=(0,o.useCallback)(e=>{if(A(!1),!t.ghost.data.editMode)return;const i=null==e?void 0:e.relatedTarget;(null==i?void 0:i.closest(".oj-sp-smart-search-keyboard-navigable-list-view"))?e.preventDefault():u(t)},[u,t]),w=(0,o.useCallback)(()=>{v(!0)},[v]),I=(0,o.useCallback)(e=>{e.currentTarget&&(e.stopImmediatePropagation(),e.key===s.KEY_NAME.ARROW_LEFT||e.key===s.KEY_NAME.ARROW_RIGHT?h(t,e):e.key===s.KEY_NAME.ENTER?_(e):e.key===s.KEY_NAME.BACKSPACE&&d(t))},[h,_,d,t]),D=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(t)},[d,t]),N=(0,o.useCallback)(()=>`${t.ghost.data.editMode?"oj-helper-hidden":""} ${b?"oj-focus":""} oj-sp-filter-chip-chrome oj-sp-filter-chip-container oj-sm-padding-0`,[b,t]),P=(0,o.useCallback)(()=>(t.ghost.data.editMode?"":"oj-helper-hidden")+" oj-sp-filter-chip-input oj-typography-body-md oj-sm-padding-0",[t]),R=(0,o.useCallback)(e=>n.applyParameters(T.accKeyword,{KEYWORD:e}),[T.accKeyword]),L=(0,o.useCallback)(e=>{m(e.value)},[m]),M=(0,l.useTextFieldInputHandlers)({value:g,onValueChanged:L,onNavKeyUp:y,onValueSubmitted:y,onInputBlur:O});return(0,i.h)("li",{className:"oj-sp-filter-chip oj-sp-filter-chip-applied "+(j?"oj-sp-smart-search-input-focused":""),"data-key":t.id},(0,i.h)("button",{class:N(),onMouseDown:_,onBlur:x,onFocus:w,onKeyDown:I,tabIndex:b?0:-1,"aria-label":R(t.data.text),"aria-hidden":!b},(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sm-padding-2x-start oj-typography-body-md oj-text-color-primary oj-sp-helper-white-space-nowrap oj-sp-filter-chip-clickable oj-sm-padding-1x-end","aria-haspopup":"false",title:t.data.text},(0,i.h)("span",{class:"oj-sp-filter-chip-applied-label oj-sp-smart-search-keyword-value oj-typography-semi-bold"},t.data.text),(0,i.h)("a",{"aria-hidden":"true",class:"oj-flex oj-sm-align-items-center oj-sm-justify-content-center oj-sm-margin-2x-start oj-sp-helper-text-decoration-none oj-sp-filter-chip-close-anchor",href:"#",onMouseDown:D,title:T.remove,tabIndex:-1,onMouseEnter:(0,o.useCallback)(()=>E(!0),[E]),onMouseLeave:(0,o.useCallback)(()=>E(!1),[E])},(0,i.h)("span",{class:"oj-ux-ico-close oj-ux-icon-size-6x "+(C?"oj-text-color-primary":"oj-text-color-secondary"),alt:T.remove})))),(0,i.h)("input",Object.assign({class:P(),ref:f,autofocus:!0,autocomplete:"off",spellcheck:!1,onKeyPress:S,value:g,maxLength:e.maxCharsAllowedInKeyword,onFocus:()=>{A(!0)}},M)),(0,i.h)("a",{class:"oj-sp-filter-chip-close-anchor-invisible oj-sm-padding-1x-horizontal",href:"#",onClick:D,title:T.remove}))}})),define("oj-sp/smart-search/components/filter-chip/complex-chip",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","preact/hooks","oj-sp/common-util/common-util"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComplexFilterChip=void 0;t.ComplexFilterChip=e=>{const t=(0,a.useMemo)(()=>Object.assign({},o),[o]),[r,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),p=(0,a.useRef)(null),u=(0,a.useCallback)(t=>{t.preventDefault(),t.stopPropagation(),e.onAppliedFilterChipClose(e.filterChip)},[e.onAppliedFilterChipClose,e.filterChip]),h=(0,a.useCallback)(t=>{t.preventDefault(),t.stopPropagation(),e.openComplexFilterPopup(p.current,e.filterChip)},[e.filterChip]),m=(0,a.useCallback)(()=>{l(!0)},[l]),g=(0,a.useCallback)(()=>{l(!1)},[l]),y=(0,a.useCallback)(t=>{t.currentTarget&&(t.stopImmediatePropagation(),t.key===n.KEY_NAME.ARROW_LEFT||t.key===n.KEY_NAME.ARROW_RIGHT?e.onAppliedFilterChipKeyDown(e.filterChip,t):t.key===n.KEY_NAME.ENTER?h(t):t.key===n.KEY_NAME.BACKSPACE&&u(t))},[e.onAppliedFilterChipKeyDown,h,u,e.filterChip]),f=(0,a.useCallback)(i=>e.filterChip.isToggleFilter?s.applyParameters(t.accFilterUneditable,{LABEL_NAME:i}):s.applyParameters(t.accFilterLabelValue,{LABEL_NAME:i}),[t.accFilterLabelValue,t.accFilterUneditable]);return(0,i.h)(i.Fragment,null,(0,i.h)("li",{className:"oj-sp-filter-chip oj-sp-filter-chip-applied","data-key":e.filterChip.id},(0,i.h)("button",{className:`oj-sp-filter-chip-chrome oj-sp-filter-chip-complex oj-sp-filter-chip-container oj-sp-helper-white-space-nowrap oj-sp-filter-chip-clickable oj-sm-padding-0 oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center ${r?"oj-focus":""} ${e.filterChip&&e.activeComplexFilterId===e.filterChip.id?"oj-sp-smart-search-active-filter":""}`,ref:p,onMouseDown:h,onBlur:g,onFocus:m,tabIndex:r?0:-1,onKeyDown:y,role:"button","aria-label":f(e.filterChip.label)},(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-typography-body-md oj-text-color-primary oj-sp-filter-chip-clickable oj-sm-padding-1x-end oj-sm-padding-2x-start","aria-haspopup":"false",title:`${e.filterChip.label} ${e.filterChip.value}`},(0,i.h)("span",{class:"oj-sp-smart-search-complex-chip oj-typography-body-md oj-sp-filter-chip-applied-label oj-sp-smart-search-complex-chip-label"},e.filterChip.label),!e.filterChip.isToggleFilter&&(0,i.h)("span",{class:"oj-typography-semi-bold oj-sp-smart-search-complex-chip oj-sp-filter-chip-applied-label oj-sp-smart-search-complex-chip-value oj-sm-padding-1x-start"},e.filterChip.value),(0,i.h)("a",{"aria-hidden":"true",class:"oj-flex oj-sm-align-items-center oj-sm-justify-content-center oj-sm-margin-2x-start oj-sp-helper-text-decoration-none oj-sp-filter-chip-close-anchor",href:"#",onMouseDown:u,title:t.remove,tabIndex:-1,onMouseEnter:(0,a.useCallback)(()=>c(!0),[c]),onMouseLeave:(0,a.useCallback)(()=>c(!1),[c])},(0,i.h)("span",{class:"oj-ux-ico-close oj-ux-icon-size-6x "+(d?"oj-text-color-primary":"oj-text-color-secondary"),alt:t.remove})))),(0,i.h)("a",{class:"oj-sp-filter-chip-close-anchor-invisible oj-sm-padding-1x-horizontal",href:"#",onClick:u,title:t.remove})))}})),define("oj-sp/smart-search/components/applied-filters-list/applied-filters-list",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact","../../components/filter-chip/keyword-chip","preact/hooks","../filter-chip/complex-chip"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,a.useMemo)(()=>Object.assign({},i),[i]),r=e.isMobile?"oj-sp-helper-overflow-x-auto oj-sp-smart-search-bar-items oj-sp-smart-search-applied-filters-small-screen":"oj-sm-flex-wrap-nowrap";return(0,o.h)(o.Fragment,null,e.filters.length>0?(0,o.h)("ul",{id:e.appliedFiltersContainerId,className:r+" oj-flex oj-sm-padding-0 oj-sm-align-items-center oj-sm-margin-0","aria-label":t.accAppliedSearch},e.filters.map(t=>t.isKeywordFilter?(0,o.h)(s.KeywordFilterChip,{key:t.id,filterChip:t,onAppliedFilterChipClose:e.onAppliedFilterChipClose,onAppliedFilterChipEditStart:e.keywordOnAppliedFilterChipEditStart,onAppliedFilterChipEditEnd:e.keywordOnAppliedFilterChipEditEnd,onFilterChipInputBlur:e.keywordOnFilterChipInputBlur,onAppliedFilterChipKeyDown:e.keywordOnAppliedFilterChipKeyDown,onChangeValueHandlerFilterInput:e.keywordOnChangeValueHandlerFilterInput,inlineEditInputValue:e.keywordInlineEditInputValue,onFilterInputKeyPress:e.keywordOnFilterInputKeyPress,maxCharsAllowedInKeyword:e.maxCharsAllowedInKeyword}):(0,o.h)(n.ComplexFilterChip,{key:t.id,filterChip:t,onAppliedFilterChipClose:e.onAppliedFilterChipClose,openComplexFilterPopup:e.openComplexFilterPopup,onAppliedFilterChipKeyDown:e.keywordOnAppliedFilterChipKeyDown,activeComplexFilterId:e.activeComplexFilterId}))):null)}})),define("oj-sp/smart-search/components/info-message/info-message",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact/hooks"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{var t;const a=(0,s.useMemo)(()=>Object.assign({},o),[o]),n=null!==(t=e.containerClass)&&void 0!==t?t:"";return(0,i.h)("div",{className:"oj-flex oj-sm-flex-items-initial "+n,role:"log","aria-live":"polite"},(0,i.h)("div",{class:"oj-flex-item oj-sm-padding-2x-horizontal"},(0,i.h)("span",{class:"oj-icon-color-info oj-ux-ico-information-s oj-ux-icon-size-5x",role:"img",title:a.infoIcon,"aria-label":a.infoIcon})),(0,i.h)("div",{class:"oj-flex-item oj-sm-padding-2x-horizontal"},(0,i.h)("span",null,a.keywordMaxInfoMessage)))}})),define("oj-sp/smart-search/components/user-assistance-popup/user-assistance-popup",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","../info-message/info-message","ojs/ojpopup"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={offset:{x:0,y:8}};t.default=e=>{const t=(0,o.useRef)(),r=(0,o.useCallback)(t=>{e.onClosed()},[e.onClosed]);(0,o.useEffect)(()=>{(0,s.getBusyContext)(t.current).whenReady().then(()=>{var i,o;(null===(i=t.current)||void 0===i?void 0:i.isOpen())&&!e.opened?t.current.close():!(null===(o=t.current)||void 0===o?void 0:o.isOpen())&&e.opened&&t.current.open(e.launcher)})},[e.opened,t.current]);const l=(0,o.useCallback)(t=>{null==e||e.onFocusIn(t)},[e.onFocusIn]),d=(0,o.useCallback)(t=>{null==e||e.onFocusOut(t)},[e.onFocusOut]);return(0,i.h)("oj-popup",{ref:t,class:"oj-sp-smart-search-user-assistance-popup",position:n,onojClose:r,onfocusin:l,onfocusout:d},(0,i.h)(a.default,null))}})),define("oj-sp/smart-search/common/MacroTaskRunner",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MacroTaskRunner=void 0;t.MacroTaskRunner=class{constructor(e){this._timerDone=e=>{this._timerId=NaN,null==this||this._resolve(e)},this._promise=new Promise(t=>{this._resolve=t,this._timerId=window.setTimeout(()=>{this._timerDone(!0)},e)})}clear(){window.clearTimeout(this._timerId),this._timerId=NaN,this._timerDone(!1)}get when(){return this._promise}}})),define("oj-sp/smart-search/components/suggestion-list/MultiplexDataProviderView",["require","exports","ojs/ojlogger","./../../common/MacroTaskRunner","oj-sp/smart-search/common/FilterUtils","./../../common/enums"],(function(e,t,i,o,s,a){"use strict";function n(e){if("sort"===e)return{attributes:"multiple"};if("fetchByKeys"===e)return null;if("fetchByOffset"===e)return{implementation:"randomAccess"};if("fetchCapability"===e){const e=new Set;return e.add("exclusion"),{attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}}return"filter"===e?{textFilter:"on",operators:["$and","$eq","$ne"]}:null}function r(e){let t=0;return e.forEach(e=>{var i,o;const a=e.isKeywordFilter?null===(o=null===(i=e.data)||void 0===i?void 0:i.text)||void 0===o?void 0:o.toUpperCase():e.name;t+=(0,s.hashCode)(a)}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexDataProviderView=t.getCapability=void 0,t.getCapability=n;const l=["suggestions","autocomplete","recentsearch"];t.MultiplexDataProviderView=class{constructor(e){this._eventListeners=[],this._readyEventDispatchQueue=new Map,this._options=e,this._subscribeRefreshEventDispatchRelay()}set recentsearch(e){this._options.recentsearch=e,this._subscribeRefreshEventDispatchRelay("recentsearch")}set suggestions(e){this._options.suggestions=e,this._subscribeRefreshEventDispatchRelay("suggestions")}set autocomplete(e){this._options.autocomplete=e,this._subscribeRefreshEventDispatchRelay("autocomplete")}set onFirstSelected(e){this._options.onFirstSelected=e}getCapability(e){return n(e)}getTotalSize(){return Promise.resolve(-1)}isEmpty(){return"unknown"}addEventListener(e,t,i){this._eventListeners.push({type:e.toLowerCase(),listener:t,id:i})}removeEventListener(e,t){if(this._eventListeners)for(let i=this._eventListeners.length-1;i>=0;i--)this._eventListeners[i].type===e&&this._eventListeners[i].listener===t&&this._eventListeners.splice(i,1)}dispatchEvent(e){const t=e=>{let t=!1;if(this._eventListeners){const i=this._eventListeners.slice(0);for(let o=0;o<i.length;o++){const s=i[o];if(s.type===e.type){if(t=s.listener.apply(this,[e]),!1===t)break;t=!0}}}};return this._readyEventDispatchQueue.set(e.type,e),this._readyEventDispatchRunner&&this._readyEventDispatchRunner.clear(),this._readyEventDispatchRunner=new o.MacroTaskRunner(300),this._readyEventDispatchRunner.when.then(()=>{const e=Array.from(this._readyEventDispatchQueue.values());this._readyEventDispatchQueue.clear(),e.forEach(t),this._readyEventDispatchRunner=void 0}).catch(e=>{(0,i.error)(e)}),!0}fetchFirst(e){return this._federatedFetchFirst(l,e,!1)}fetchByOffset(e){return new Promise(t=>{t({done:!0,fetchParameters:e,results:[]})})}_getDataProvider(e){return Promise.resolve(this._options[e])}_getDataProvidersIterators(e,t,o){return new Promise((s,a)=>{if(Array.isArray(o.dpIterators))return void s(o.dpIterators);o.dpIterators=[];const{dpIterators:n}=o,r=[];for(let t=0;t<e.length;t++){const i=this._getDataProvider(e[t]);r.push(i)}Promise.all(r).then(e=>{const i=[];for(let t=0;t<e.length;t++)e[t]&&i.push(e[t]);const o=Math.round(Math.max(100,t.size)/i.length);(t=Object.assign({},t)).size=o;for(let e=0;e<i.length;e++){const o=i[e].fetchFirst(t)[window.Symbol.asyncIterator]();n.push(o)}s(n)}).catch(e=>{(0,i.warn)("Smart Search Suggestions DP",e),a(new DOMException("Collection component signaled fetch abort","AbortError"))})})}_federatedFetchFirst(e,t,o){const n={},l={isFirstFetch:!0};let d=!1;const c=new Set;return n[window.Symbol.asyncIterator]=()=>({next:async()=>new Promise((n,p)=>{d?n({value:{data:[],fetchParameters:t,metadata:[]},done:!0}):this._getDataProvidersIterators(e,t,l).then(e=>{const u=[],h=new Set;for(let t=0;t<e.length;t++){const o=new Promise(o=>{var s;null===(s=e[t])||void 0===s||s.next().then(e=>o(e)).catch(e=>{(0,i.warn)("Smart Search Suggestions DP",e),h.add(t)})});u.push(o)}Promise.all(u).then(i=>{var u;const m=[],g=[];for(let e=0;e<i.length;e++){if(h.has(e))continue;const t=i[e],{metadata:o,data:s}=t.value;t.done&&h.add(e);for(let e=0;e<s.length;e++)m.push(o[e]),g.push(s[e])}const y=Array.from(h).sort();for(let t=y.length-1;t>-1;t--)e.splice(y[t],1);o&&(d=!0),function(e,t,i,o){var n;let l;const d=[];for(let o=0;o<t.length;o++){const c=t[o],{$$suggestionType:p}=c;let u=0;if(p===a.SUGGESTION_TYPE.AUTOCOMPLETE){if(u=(0,s.hashCode)(null===(n=null==c?void 0:c.key)||void 0===n?void 0:n.toUpperCase()),i[o].key===a.SUGGESTION_TYPE.AUTOCOMPLETE){l={dataItem:c,metadataItem:i[o]},d.push(o),e.add(u);continue}}else if(p===a.SUGGESTION_TYPE.SUGGESTION)u=r([c]);else{if(p!==a.SUGGESTION_TYPE.HISTORY){d.push(o);continue}u=r(c.filters)}c.$$hash=u,e.has(u)?d.push(o):e.add(u)}for(let e=d.length-1;e>-1;e--)t.splice(d[e],1),i.splice(d[e],1);if(o){let e=NaN,o=NaN;for(let i=0;i<t.length;i++){const s=t[i],{$$suggestionType:n}=s;if(n===a.SUGGESTION_TYPE.HISTORY){if(isNaN(e))e=i,o=i;else if(o=i,o-e>=4)break}else if(!isNaN(e))break}if(!isNaN(e)&&!isNaN(o)){const s=[],a=[];for(let n=o;n>e-1&&n>-1;n--)s.push(t[n]),a.push(i[n]),t.splice(n,1),i.splice(n,1);for(let e=0;e<s.length;e++)t.splice(0,0,s[e]),i.splice(0,0,a[e])}}l&&(t.splice(0,0,l.dataItem),i.splice(0,0,l.metadataItem))}(c,g,m,l.isFirstFetch),l.isFirstFetch&&(l.isFirstFetch=!1,g[0]&&m[0]&&m[0].key===a.SUGGESTION_TYPE.AUTOCOMPLETE&&this._options.onFirstSelected({data:g[0],metadata:m[0]})),(null===(u=null==t?void 0:t.signal)||void 0===u?void 0:u.aborted)?p(new DOMException("Collection component signaled fetch abort","AbortError")):(d=d||0===e.length,n({done:0===g.length||0===e.length,value:{metadata:m,data:g,fetchParameters:t}}))}).catch(e=>{(0,i.warn)("Smart Search Suggestions DP",e),p(new DOMException("Collection component signaled fetch abort","AbortError"))})}).catch(e=>{(0,i.warn)("Smart Search Suggestions DP",e),p(new DOMException("Collection component signaled fetch abort","AbortError"))})})}),n}_subscribeRefreshEventDispatchRelay(e){const t=e=>{const t=this._options[e];if(!t)return;for(let t=this._eventListeners.length-1;t>-1;t--){this._eventListeners[t].id===e&&this._eventListeners.splice(t,1)}t.addEventListener("refresh",e=>{this.dispatchEvent(e)},e)};if(e)t(e);else for(let e=0;e<l.length;e++)t(l[e])}containsKeys(e){return new Promise(t=>{t({containsParameters:e,results:new Set})})}fetchByKeys(e){return new Promise(t=>{const i=new Map;t({fetchParameters:e,results:i})})}}})),define("oj-sp/smart-search/components/suggestion-list/AutocompleteDataProviderView",["require","exports","../../common/FilterUtils","./../../common/enums"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutocompleteDataProviderView=void 0;t.AutocompleteDataProviderView=class{constructor(e,t){this._dp=e,this._autocompleteTextSearchMinChars=t}getCapability(e){return this._dp.getCapability(e)}getTotalSize(){return this._dp.getTotalSize()}isEmpty(){return this._dp.isEmpty()}addEventListener(e,t){return this._dp.addEventListener(e,t)}removeEventListener(e,t){return this._dp.removeEventListener(e,t)}dispatchEvent(e){return this._dp.dispatchEvent(e)}fetchFirst(e){const{filterCriterion:t}=e,s=Object.assign(Object.assign({},e),{filterCriterion:t}),a=(0,i.findAutocompleteFilteringText)(t),n=[];!function e(t,i){if(!t)return null;if(t.text&&"phrase"===t.matchBy&&i.push(t.text),Array.isArray(t.criteria)){const{criteria:o}=t;for(let t=o.length-1;t>-1;t--)e(o[t],i)}}(t,n);let r=!0;const l=(0,i.calcLength)(null==a?void 0:a.trim());if(l>=this._autocompleteTextSearchMinChars){const e=this._dp.fetchFirst(s)[window.Symbol.asyncIterator](),t={};return t[window.Symbol.asyncIterator]=()=>({next:()=>e.next().then(e=>{var t,i;const s=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.data,d=null===(i=null==e?void 0:e.value)||void 0===i?void 0:i.metadata;return Array.isArray(s)&&Array.isArray(d)&&(!function(e,t,i,o){for(let s=i.length-1;s>-1;s--){const a=i[s];if(0!==a.key.localeCompare(e,void 0,{sensitivity:"accent"}))for(let e=0;e<t.length;e++){const n=t[e];0===a.key.localeCompare(n,void 0,{sensitivity:"accent"})&&(i.splice(s,1),o.splice(s,1))}else i.splice(s,1),o.splice(s,1)}}(a,n,s,d),r&&l>0&&(s.splice(0,0,{key:a,$$suggestionType:o.SUGGESTION_TYPE.AUTOCOMPLETE}),d.splice(0,0,{key:o.SUGGESTION_TYPE.AUTOCOMPLETE}),r=!1)),e})}),t}const d={};return d[window.Symbol.asyncIterator]=()=>({next:()=>{const e=[],t=[];return l>0&&r&&(r=!1,e.splice(0,0,{key:a,$$suggestionType:o.SUGGESTION_TYPE.AUTOCOMPLETE}),t.splice(0,0,{key:o.SUGGESTION_TYPE.AUTOCOMPLETE})),Promise.resolve({value:{data:e,fetchParameters:s,metadata:t},done:0===e.length})}}),d}fetchByOffset(e){return this._dp.fetchByOffset(e)}fetchByKeys(e){return this._dp.fetchByKeys(e)}containsKeys(e){return this._dp.containsKeys(e)}}})),define("oj-sp/smart-search/common/RecentSearchCommon",["require","exports","./FilterUtils","./enums","oj-oars/resource/api","ojs/ojlogger","ojs/ojdataprovider"],(function(e,t,i,o,s,a,n){"use strict";let r;function l(e){var t;let{providerType:i="noopt"}=e;return"OARS"!==i||(null===(t=window.FAEndPoints)||void 0===t?void 0:t.ORA_FSCM_REST)||(i="noopt"),"OARS"===i?s.default:"noopt"===i?d:(r||(r=new c),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.RecentSearchDataProviderView=t.clearInMemoryRecentSearchSuggestionsForSubject=t.getRecentSearchSuggestions=t.publishRecentSearch=void 0;const d={getRecentSearchSuggestions:async(e,t)=>({items:[],hasMore:!1}),publishRecentSearch:async(e,t)=>{}};class c{constructor(){this._volatileHistory=new Map,this._subjects=new Set}_getHistory(e){let t=this._volatileHistory.get(e);return Array.isArray(t)||(t=[],this._volatileHistory.set(e,t)),t.length>50&&(t.length=50),t}async getRecentSearchSuggestions(e,t){const{filters:i=[],searchTerms:o,limit:s=50,offset:a=0,keywordName:n="$keyword$"}=t,r=o?new RegExp(o,"i"):void 0,l=this._getHistory(e).filter(e=>{const{descriptions:t=[],payload:o=[]}=e;let s=!0;if(r){s=!1;for(const e of t)if(null==e?void 0:e.match(r)){s=!0;break}}if(s)for(const e of i)for(const t of o){if(e.name===t.name){if(e.name===n&&(l=t,d=void 0,c=void 0,0!==(null===(d=null==(a=e)?void 0:a.data)||void 0===d?void 0:d.text.localeCompare(null===(c=null==l?void 0:l.data)||void 0===c?void 0:c.text,void 0,{sensitivity:"accent"}))))continue;s=!1;break}if(!s)break}var a,l,d,c;return s}),d=l.slice(a,a+s).map(e=>({payload:e.payload,searchDesc:e.descriptions.join(";")}));return{hasMore:l.length>0&&l.length>a+s,offset:a,limit:s,items:d}}async publishRecentSearch(e,t){var o,s;const a=null==t?void 0:t.filters;if(!Array.isArray(a)||0===a.length)return;let n=0;a.forEach(e=>{var t;const o=(null===(t=e.data)||void 0===t?void 0:t.text)?e.data.text:e.name;n+=(0,i.hashCode)(o)});const r=this._getHistory(e);for(let e=r.length-1;e>-1;e--){r[e].hash===n&&r.splice(e,1)}const l={payload:a,descriptions:null!==(s=null===(o=null==t?void 0:t.searchDesc)||void 0===o?void 0:o.split(";"))&&void 0!==s?s:[],hash:n};if(r.splice(0,0,l),this._subjects.delete(e),this._subjects.add(e),this._subjects.size>10){const e=Array.from(this._subjects.values());for(let t=0;t<10;t++)this._volatileHistory.delete(e[t]),this._subjects.delete(e[t])}}clearHistory(e){this._volatileHistory.delete(e),this._subjects.delete(e)}}async function p(e){const t=[];e.forEach(e=>{t.push(e.validate())});const i=await Promise.all(t);for(let t=i.length-1;t>-1;t--){if(i[t]){for(let i=t-1;i>-1;i--)if(e[i].id===e[t].id){e.splice(t,1);break}}else e.splice(t,1)}}async function u(e){for(const t of e)await t.fetchVolatileData()}async function h(e){var t,s,n;const{appliedFilters:r=[],subject:d,offset:c=0,limit:h=50,searchTerms:m,searchConfig:g}=e,y=l({providerType:null!==(s=null===(t=null==g?void 0:g.options)||void 0===t?void 0:t.recentSearchProviderType)&&void 0!==s?s:"OARS"});if(!y)return{data:[],metadata:[],hasMore:!1};const f={offset:c,limit:h,searchTerms:m,filters:(0,i.undecorateFilters)(r),keywordName:null===(n=null==g?void 0:g.options)||void 0===n?void 0:n.keywordName};let b=[],v=!1;try{const e=await y.getRecentSearchSuggestions(d,f);b=e.items,v=e.hasMore}catch(e){(0,a.error)("RecentSearchCommon getRecentSearchSuggestions failed.",e),v=!1}const j=[],A=[],C=o.SUGGESTION_TYPE.HISTORY;let E=0;for(const e of b){const{payload:t}=e,o=await(0,i.decorateFilters)(g,t);await p(o),0!==o.length&&(await u(o),j.push({filters:o,$$suggestionType:C}),A.push({key:`${C}_${E++}`}))}return{data:j,metadata:A,hasMore:v}}t.publishRecentSearch=async function(e){const{subject:t,providerType:o="OARS",appliedFilters:s}=e,a=l({providerType:o});if(!a)return;if(await p(s),0===s.length)return;const n=[];for(const e of s){const{label:t,verboseValue:i}=e;e.isToggleFilter?n.push(""+t):e.isKeywordFilter?n.push(""+i):n.push(`${t} : ${i}`)}const r=n.join(" ; "),d={filters:(0,i.undecorateFilters)(s),searchDesc:r};await a.publishRecentSearch(t,d)},t.getRecentSearchSuggestions=h,t.clearInMemoryRecentSearchSuggestionsForSubject=function(e){null==r||r.clearHistory(e)};t.RecentSearchDataProviderView=class{constructor(e){const{subject:t,filters:i,searchConfig:o}=e;this._subject=t,this._filters=i,this._searchConfig=o}setCriteria({filters:e,searchTerms:t,subject:i,searchConfig:o}){Array.isArray(e)&&(this._filters=e),void 0!==t&&(this._searchTerms=t),void 0!==i&&(this._subject=i),void 0!==o&&(this._searchConfig=o),this.dispatchEvent(new n.DataProviderRefreshEvent)}fetchFirst(e){const{filterCriterion:t,size:i=50}=e,o=this._searchTerms,s=this._subject,a=this._searchConfig,n=i;let r=0,l=!1;const d={};return d[window.Symbol.asyncIterator]=()=>({next:async()=>{var t,i;if(null===(t=null==e?void 0:e.signal)||void 0===t?void 0:t.aborted){const t=null===(i=null==e?void 0:e.signal)||void 0===i?void 0:i.reason;throw new DOMException(t,"AbortError")}if(l)return{value:{data:[],fetchParameters:e,metadata:[]},done:!0};const d=this._filters;return h({searchTerms:o,offset:r,limit:n,appliedFilters:d,subject:s,searchConfig:a}).then(({data:t,metadata:i,hasMore:o})=>(r+=n,l=!o,{value:{data:t,fetchParameters:e,metadata:i},done:0===t.length}))}}),d}getCapability(e){if("sort"===e)return{attributes:"multiple"};if("fetchByKeys"===e)return null;if("fetchByOffset"===e)return{implementation:"randomAccess"};if("fetchCapability"===e){const e=new Set;return e.add("exclusion"),{attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}}return"filter"===e?{textFilter:"on",operators:["$and","$eq","$ne"]}:null}getTotalSize(){return Promise.resolve(-1)}isEmpty(){return"unknown"}addEventListener(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})}removeEventListener(e,t){if(this._eventListeners)for(let i=this._eventListeners.length-1;i>=0;i--)this._eventListeners[i].type===e&&this._eventListeners[i].listener===t&&this._eventListeners.splice(i,1)}dispatchEvent(e){let t=!1;if(this._eventListeners){const i=this._eventListeners.slice(0);for(let o=0;o<i.length;o++){const s=i[o];if(s.type===e.type){if(t=s.listener.apply(this,[e]),!1===t)break;t=!0}}}return t}fetchByOffset(e){return new Promise(t=>{t({done:!0,fetchParameters:e,results:[]})})}containsKeys(e){return new Promise(t=>{t({containsParameters:e,results:new Set})})}fetchByKeys(e){return new Promise(t=>{const i=new Map;t({fetchParameters:e,results:i})})}}})),define("oj-sp/smart-search/components/suggestion-list/useMultiplexDataProviderView",["require","exports","preact/hooks","ojs/ojlistdataproviderview","./../../common/FilterUtils","./../../common/enums","./MultiplexDataProviderView","./AutocompleteDataProviderView","oj-sp/common-util/common-util","ojs/ojarraydataprovider","./../../common/RecentSearchCommon","ojs/ojdeferreddataprovider"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";function u(e,t){return(0,l.isObject)(t.data)&&(t.data.$$suggestionType=e),t}function h(e,t,i){if(!e)return;const o=(0,s.buildAutocompleteSuggestionsFilterCriterion)(t,i);(0,s.deepCompare)(e.filterCriterion,o)||(e.filterCriterion=o)}function m(e,t,i){if(!e)return;const o=(0,s.buildSuggestionsFilterCriterion)(t,i);o&&(0,s.deepCompare)(e.filterCriterion,o)||(e.filterCriterion=o)}function g(e,t,i,o,s){e&&e.setCriteria({filters:s,searchTerms:o,searchConfig:i,subject:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.useMultiplexDataProviderView=void 0,t.useMultiplexDataProviderView=function({autocomplete:e,filters:t,onFirstSelected:l,autocompleteTextFilterMinChars:y,suggestionsFilters:f,searchConfig:b,subject:v}){const j=(0,i.useRef)(),A=(0,i.useRef)(),C=(0,i.useRef)(new Promise(e=>{A.current=e})),E=(0,i.useRef)(new p(C.current,n.getCapability)),T=(0,i.useRef)(),_=(0,i.useRef)(),S=(0,i.useRef)(),x=(0,i.useRef)(),O=(0,i.useRef)(),w=(0,i.useCallback)(e=>{x.current=e,h(T.current,x.current,t),m(_.current,x.current,t),g(S.current,v,b,x.current,t)},[x,T,_,S,v,b,t]);return(0,i.useEffect)(()=>{if(e)if(T.current)h(T.current,x.current,t);else{const i=(0,s.buildAutocompleteSuggestionsFilterCriterion)(x.current,t),n=new r.AutocompleteDataProviderView(new o(e,{dataMapping:{mapFields:u.bind(this,a.SUGGESTION_TYPE.AUTOCOMPLETE)}}),y),l=new o(n,{filterCriterion:i});T.current=l}},[e,T,y,x,t]),(0,i.useEffect)(()=>{if(Array.isArray(f)&&f.length>0){const e=O.current,i=(0,s.undecorateFilters)(f);if(_.current&&(0,s.deepCompare)(e,i))m(_.current,x.current,t);else{const e=(0,s.buildSuggestionsFilterCriterion)(x.current,t);O.current=i;const n=new d(f,{textFilterAttributes:["label","verboseValue"],keyAttributes:"id"}),r=new o(n,{filterCriterion:e,dataMapping:{mapFields:u.bind(this,a.SUGGESTION_TYPE.SUGGESTION)}});_.current=r}}},[f,_,t,x]),(0,i.useEffect)(()=>{if(S.current)g(S.current,v,b,x.current,t);else{const e=new c.RecentSearchDataProviderView({filters:t,searchTerms:x.current,searchConfig:b,subject:v});S.current=e}},[t,x,b,v,S]),(0,i.useEffect)(()=>{j.current?(j.current.autocomplete=T.current,j.current.suggestions=_.current,j.current.recentsearch=S.current,j.current.onFirstSelected=l):(j.current=new n.MultiplexDataProviderView({autocomplete:T.current,suggestions:_.current,recentsearch:S.current,onFirstSelected:l}),A.current(j.current))},[E,T.current,_.current,l,S.current]),{dataProvider:E.current,onFilterTextChanged:w}}})),define("oj-sp/smart-search/components/suggestion-list/no-data-listitem-template",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","ojs/ojlistitemlayout","ojs/ojhighlighttext"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const{onAddKeywordFilter:t,inputValue:a,focusInputTextElement:n}=e,r=(0,o.useRef)(null),l=(0,o.useCallback)(e=>{const i=e.target;t(a,i)},[t,a]),d=(0,o.useCallback)(e=>{if(e.key===s.KEY_NAME.ENTER){const i=e.target;t(a,i)}else e.key===s.KEY_NAME.ARROW_UP&&n()},[t,a,n]);return(0,o.useEffect)(()=>{var e,t;return null===(t=null===(e=r.current)||void 0===e?void 0:e.closest("li"))||void 0===t||t.addEventListener("keydown",d),()=>{var e,t;return null===(t=null===(e=r.current)||void 0===e?void 0:e.closest("li"))||void 0===t?void 0:t.removeEventListener("keydown",d)}},[d]),(0,i.h)("div",{class:"oj-bg-neutral-20 oj-sp-smart-search-no-suggestion-data",onClick:l,ref:r},(0,i.h)("oj-list-item-layout",{"data-nodata":!0},(0,i.h)("div",{"aria-hidden":"true",class:"oj-sp-smart-search-icon oj-ux-ico-search",slot:"leading"}),(0,i.h)("div",{class:"oj-sp-smart-search-suggestion-chips-wrapper oj-flex"},a&&(0,i.h)("span",{class:"oj-typography-body-md oj-text-color-primary oj-sp-smart-search-suggestion-chip oj-sp-ss-white-space-nowrap"},(0,i.h)("oj-highlight-text",{text:a,"match-text":a})))))}})),define("oj-sp/smart-search/components/suggestion-list/autocomplete-listitem-layout",["require","exports","preact","./../../common/enums","ojs/ojlistitemlayout","ojs/ojhighlighttext"],(function(e,t,i,o){"use strict";function s(e){return e.data.key}Object.defineProperty(t,"__esModule",{value:!0}),t.AutocompleteListItemLayout=t.evalAutocompleteItemText=void 0,t.evalAutocompleteItemText=s;t.AutocompleteListItemLayout=e=>{const t=e.suggestionListDivContainerClass+" oj-ux-ico-search",a=o.SUGGESTION_TYPE.AUTOCOMPLETE,n=s(Object.assign({suggestionType:a},e.context));return(0,i.h)("oj-list-item-layout",null,(0,i.h)("div",{"aria-hidden":"true",className:t,slot:"leading"}),(0,i.h)("div",null,(0,i.h)("div",{class:"oj-sp-smart-search-suggestion-chips-wrapper"},(0,i.h)("div",{class:"oj-helper-overflow-wrap-anywhere"},(0,i.h)("oj-highlight-text",{text:n,"match-text":e.inputValue})))))}})),define("oj-sp/smart-search/default-filters/FiltersCommon",["require","exports","../common/FilterUtils","ojs/ojconverter-number","oj-sp/common-util/common-util"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedNumber=t.buildMultiMatchJetFilterCriterion=t.buildRangeJetFilterCriterion=t.optionRenderer=t.valueForPath=t.buildJetFilterCriterionForActiveFilter=t.fetchValueItems=void 0;function a(e,t){const i=e.split(".");let o=t;return i.forEach(t=>{if(!Object.keys(o).includes(t)){const i=JSON.stringify(o);throw new Error(`valueForPath on "${i}" is missing property "${t}" in evaluating field path "${e}".`)}o=o[t]}),o}t.fetchValueItems=async(e,t)=>{const i=new Set(t),o={keys:i},s=await e.fetchByKeys(o),{results:a}=s,n=[];return i.forEach(e=>{const t=a.get(e),i=Object.assign(Object.assign({},t),{key:e});n.push(i)}),n},t.buildJetFilterCriterionForActiveFilter=function(e,t){return(0,i.buildJetFilterCiterion)(t=>t.id!==e.id,t)},t.valueForPath=a;const n=new o.IntlNumberConverter;t.optionRenderer=function(e,t){const{data:i}=t;let o=Number.NaN;(0,s.isString)(e.optionsKeys.count)&&(o=a(e.optionsKeys.count,i));const r=a(e.optionsKeys.label,i),l=a(e.optionsKeys.value,i),d=document.createElement("OJ-OPTION");d.setAttribute("value",l);const c=document.createElement("SPAN");if(c.className="oj-listbox-highlighter-section",c.textContent=r,d.appendChild(c),!Number.isNaN(o)){const e=document.createElement("SPAN"),t=document.createElement("SPAN");e.textContent=" ";const i=n.format(o);t.textContent=""+i,t.className="oj-typography-body-xs",d.appendChild(e),d.appendChild(t)}return d};const r=e=>{let t=e.split("."),i=[];for(let e=t.length-2;e>-1;e--)if(o=t[e],new RegExp("[[*]]$").test(o)){i=t.slice(0,e+1),t=t.slice(e+1);break}var o;return{nestedFields:i,attributeFields:t}},l=e=>e.replace("[*]",""),d=(e,t,i)=>({op:"$exists",attribute:e,criterion:i,$tag:t}),c=(e,t)=>{let i={};i[e[e.length-1]]=t;for(let t=e.length-2;t>-1;t--){const o={};o[e[t]]=i,i=o}return i};t.buildRangeJetFilterCriterion=function(e,t,i,o){const s=r(e);let a={op:"$and",criteria:[{op:"$ge",value:c(s.attributeFields,i),$tag:t},{op:"$le",value:c(s.attributeFields,o),$tag:t}],$tag:t};for(let e=s.nestedFields.length-1;e>-1;e--){const i=l(s.nestedFields[e]);a=d(i,t,a)}return a},t.buildMultiMatchJetFilterCriterion=function(e,t,i){const o=r(e),a=[];let n={op:"$or",criteria:a,$tag:t};i.forEach(e=>{const i=(0,s.isString)(e)?{sensitivity:"accent"}:void 0;let n;n=i?{op:"$eq",value:c(o.attributeFields,e),$tag:t,collationOptions:i}:{op:"$eq",value:c(o.attributeFields,e),$tag:t},a.push(n)}),n=(e=>0===e.criteria.length?null:1===e.criteria.length?e.criteria[0]:e)(n);for(let e=o.nestedFields.length-1;e>-1;e--){const i=l(o.nestedFields[e]);n=d(i,t,n)}return n},t.getFormattedNumber=function(e){return n.format(e)}})),define("oj-sp/smart-search/components/suggestion-list/suggestions-listitem-layout",["require","exports","preact","./../../common/enums","oj-sp/common-util/common-util","oj-sp/smart-search/default-filters/FiltersCommon","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojlistitemlayout","ojs/ojhighlighttext"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionsListItemLayout=void 0;const l=Object.assign({},n);t.SuggestionsListItemLayout=e=>{const t=e.suggestionListDivContainerClass+" oj-ux-ico-filter-2",n=o.SUGGESTION_TYPE.SUGGESTION,{inputValue:d,context:c}=e,p=Object.assign({suggestionType:n},c);return(0,i.h)("oj-list-item-layout",null,(0,i.h)("div",{"aria-hidden":"true",className:t,slot:"leading"}),(0,i.h)("div",null,(0,i.h)("div",{class:"oj-sp-smart-search-suggestion-chips-wrapper"},(0,i.h)("div",{class:"oj-helper-overflow-wrap-anywhere oj-flex oj-sm-flex-direction-column"},function(e,t){const o=e.data.isKeywordFilter||e.data.isToggleFilter?"oj-typography-body-md oj-text-color-primary":"oj-typography-body-sm oj-text-color-secondary";return(0,i.h)("oj-highlight-text",{class:o,slot:"overline",text:e.data.label,"match-text":t})}(p,d),function(e,t){if(!(0,s.isEmpty)(e.data.value))return(0,i.h)("oj-highlight-text",{text:e.data.verboseValue,"match-text":t})}(p,d)))),function(e){if(isNaN(e.data.count))return;const t=(0,a.getFormattedNumber)(e.data.count);return(0,i.h)("div",{slot:"metadata",class:"oj-typography-body-sm oj-text-color-secondary"},r.applyParameters(l.filterResultsCount,{count:t}))}(p))}})),define("oj-sp/smart-search/components/suggestion-list/recentsearch-listitem-layout",["require","exports","preact","./../../common/enums","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlistitemlayout","ojs/ojhighlighttext"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecentSearchListItemLayout=void 0;Object.assign({},a);function n(e,t){return(0,i.h)("div",{class:"oj-flex oj-sm-align-items-flex-end oj-sp-recent-search-filter oj-sm-flex-wrap-nowrap "},(0,i.h)("div",{class:"oj-flex oj-sm-flex-direction-column"},function(e,t){const o=e.isKeywordFilter||e.isToggleFilter?"oj-typography-body-md oj-text-color-primary":"oj-typography-body-sm oj-text-color-secondary";return(0,i.h)("oj-highlight-text",{class:o,slot:"overline",text:e.label,"match-text":t})}(t,e),function(e,t){const o=e.verboseValue;if(!(0,s.isEmpty)(o))return(0,i.h)("oj-highlight-text",{slot:"secondary",text:o,"match-text":t})}(t,e)),(0,i.h)("div",{"aria-orientation":"vertical",class:"oj-divider-start oj-sp-suggestion-chip-divider oj-sm-margin-4x-horizontal",role:"separator"}))}t.RecentSearchListItemLayout=e=>{const t=e.suggestionListDivContainerClass+" oj-ux-ico-clock",s=o.SUGGESTION_TYPE.HISTORY,{inputValue:a,context:r}=e,l=Object.assign({suggestionType:s},r);return(0,i.h)("oj-list-item-layout",null,(0,i.h)("div",{"aria-hidden":"true",className:t,slot:"leading"}),(0,i.h)("div",{className:"oj-sp-smart-search-suggestion-chips-wrapper"},function(e,t){const o=e.data.filters,s=n.bind(this,t);return(0,i.h)("div",{class:"oj-flex oj-sp-recent-search-container"},o.map(s))}(l,a)))}})),define("oj-sp/smart-search/components/suggestion-list/suggestion-listitem-template",["require","exports","preact","./../../common/enums","oj-sp/common-util/common-util","preact/hooks","./autocomplete-listitem-layout","./suggestions-listitem-layout","./recentsearch-listitem-layout","oj-sp/common-util/common-util"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionListItemTemplate=void 0;t.SuggestionListItemTemplate=e=>{var t,c;const{context:p,focusInputTextElement:u}=e,h=null!==(c=null===(t=p.data)||void 0===t?void 0:t.$$suggestionType)&&void 0!==c?c:o.SUGGESTION_TYPE.AUTOCOMPLETE,m=(0,a.useCallback)(e=>{e.key===s.KEY_NAME.ARROW_UP&&u()},[u]),g=(0,a.useCallback)(e=>{var t,i;if(e===o.SUGGESTION_TYPE.AUTOCOMPLETE)return null==p?void 0:p.data.key;if(e===o.SUGGESTION_TYPE.SUGGESTION)return null==p?void 0:p.data.label;if(e===o.SUGGESTION_TYPE.HISTORY){const e=null===(i=null===(t=null==p?void 0:p.data)||void 0===t?void 0:t.filters)||void 0===i?void 0:i.map(e=>e.isKeywordFilter?e.value:e.label);return null==e?void 0:e.join("|")}},[p]);return(0,i.h)(i.Fragment,null,(0,i.h)("li",{class:(1!==p.index||(0,d.isEmpty)(e.inputValue)?"":"oj-divider-top oj-sm-padding-2x-top oj-sm-margin-2x-top")+" oj-sp-smart-search-suggestion oj-sp-smart-search-suggestion-list-item",onKeyDown:0===p.index?m:void 0,"data-label":g(h)},(()=>{switch(h){case o.SUGGESTION_TYPE.AUTOCOMPLETE:return(0,i.h)(n.AutocompleteListItemLayout,Object.assign({suggestionListDivContainerClass:"oj-sp-smart-search-icon "},e));case o.SUGGESTION_TYPE.SUGGESTION:return(0,i.h)(r.SuggestionsListItemLayout,Object.assign({suggestionListDivContainerClass:"oj-sp-smart-search-icon "},e));case o.SUGGESTION_TYPE.HISTORY:return(0,i.h)(l.RecentSearchListItemLayout,Object.assign({suggestionListDivContainerClass:"oj-sp-smart-search-icon "},e));default:return}})()))}})),define("oj-sp/smart-search/components/suggestion-list/suggestion-list",["require","exports","preact","./useMultiplexDataProviderView","preact/hooks","../suggestion-list/no-data-listitem-template","../suggestion-list/autocomplete-listitem-layout","./suggestion-listitem-template","ojs/ojkeyset","../../common/enums","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlistview"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=({onAddKeywordFilter:e,inputValue:t,autocomplete:p,filters:u,autocompleteTextFilterMinChars:h,focusInputTextElement:m,suggestionsPopupId:g,suggestionsFilters:y,onAddComplexFilter:f,searchConfig:b,subject:v,onAddHistoryFilters:j})=>{const[A,C]=(0,s.useState)(),E=(0,s.useMemo)(()=>Object.assign({},c),[c]),T=(0,s.useCallback)(e=>{C(new l.KeySetImpl([e.metadata.key]))},[C]),{dataProvider:_,onFilterTextChanged:S}=(0,o.useMultiplexDataProviderView)({autocomplete:p,autocompleteTextFilterMinChars:h,filters:u,onFirstSelected:T,suggestionsFilters:y,searchConfig:b,subject:v});(0,s.useEffect)(()=>{S(t)},[t,S]);const x=(0,s.useCallback)(t=>{t.detail.originalEvent.preventDefault();const{context:i}=t.detail;let o;i.data.isKeywordFilter&&(o=d.SUGGESTION_TYPE.AUTOCOMPLETE);const s=t.target,a=Object.assign({suggestionType:o,componentElement:s},i),r=t.target;a.data.$$suggestionType===d.SUGGESTION_TYPE.AUTOCOMPLETE?e((0,n.evalAutocompleteItemText)(a),r):a.data.$$suggestionType===d.SUGGESTION_TYPE.HISTORY?j(a.data.filters,r):f(a,r)},[e]);return(0,i.h)("oj-list-view",{id:g+"_suggestions-list","selection-mode":"single",class:"oj-sp-smart-search-keyboard-navigable-list-view oj-sm-margin-2x-vertical",data:_,onojItemAction:x,selected:A,"aria-label":E.suggestions},(0,i.h)("template",{slot:"noData",render:o=>(0,i.h)(a.default,{inputValue:t,onAddKeywordFilter:e,focusInputTextElement:m})}),(0,i.h)("template",{"data-oj-as":"item",slot:"itemTemplate",render:e=>(0,i.h)(r.SuggestionListItemTemplate,{context:e,inputValue:t,focusInputTextElement:m})}))}})),define("oj-sp/smart-search/components/suggestion-popup/suggestion-popup",["require","exports","preact","preact/hooks","./../suggestion-list/suggestion-list","oj-sp/common-util/common-util","./../../common/FilterUtils","oj-sp/common-util/common-util","ojs/ojpopup"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l={offset:{x:0,y:8}};t.default=e=>{const t=(0,o.useRef)(),d=(0,o.useCallback)(t=>{e.onClosed()},[e.onClosed]),c=(0,o.useCallback)(t=>{t.key===a.KEY_NAME.ESCAPE&&e.focusInputTextElement()},[e.focusInputTextElement]);(0,o.useEffect)(()=>{(0,r.getBusyContext)(t.current).whenReady().then(()=>{var i,o;(null===(i=t.current)||void 0===i?void 0:i.isOpen())&&!e.opened?t.current.close():t.current&&!(null===(o=t.current)||void 0===o?void 0:o.isOpen())&&e.opened&&t.current.open(e.launcher)})},[e.opened,t.current]);const p=(0,o.useCallback)(t=>{null==e||e.onFocusIn(t)},[e.onFocusIn]),u=(0,o.useCallback)(t=>{null==e||e.onFocusOut(t)},[e.onFocusOut]),h=(0,n.removeKeywordFiltersInEditMode)(e.keywordName,e.filters);return(0,i.h)("oj-popup",{"data-oj-context":!0,onfocusin:p,onfocusout:u,class:"oj-sp-smart-search-suggestions-popup",position:l,id:e.suggestionsPopupId,ref:t,onojClose:d,onKeyDown:c},e.opened?(0,i.h)(s.default,Object.assign({},e,{filters:h})):void 0)}})),define("oj-sp/smart-search/components/applied-filters-carousel/applied-filters-conveyor-belt",["require","exports","preact","ojs/ojconveyorbelt"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>(0,i.h)("div",{class:"oj-flex oj-sp-applied-filter-chip-area",ref:e.appliedFiltersContainerRef},(0,i.h)("oj-conveyor-belt",{id:e.appliedFiltersConveyorBeltId,class:"oj-flex-item oj-sp-smart-search-conveyorBelt","content-parent":"#"+e.appliedFiltersContainerId,ref:e.conveyorBeltRef},e.getAppliedFilterChipsList()))})),define("oj-sp/smart-search/components/user-assistance-popup/complex-filter-popup",["require","exports","preact","preact/hooks","oj-sp/common-util/common-util","oj-sp/smart-search/common/enums","ojs/ojpopup"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={offset:{x:0,y:4}};t.default=e=>{const t=(0,o.useRef)(),r=(0,o.useCallback)(()=>{let t="";if(e.activeFilter){switch(e.activeFilter.type){case a.DEFAULT_FILTER_TYPES.NUMERIC_RANGE_FILTER:t="oj-sp-smart-search-numeric-range-popup oj-sm-padding-2x";break;case a.DEFAULT_FILTER_TYPES.DATE_RANGE_FILTER:t="oj-sp-smart-search-date-range-popup oj-sm-padding-2x";break;case a.DEFAULT_FILTER_TYPES.SELECT_SINGLE_FILTER:t="oj-sp-smart-search-select-single-popup oj-sm-padding-0";break;case a.DEFAULT_FILTER_TYPES.SELECT_MULTIPLE_FILTER:t="oj-sp-smart-search-select-multiple-popup oj-sm-padding-0";break;default:t="oj-sp-smart-search-complex-popup oj-sm-padding-2x"}}return t},[e.opened,e.activeFilter]),l=(0,o.useCallback)(t=>{e.onClosed()},[e.onClosed]);(0,o.useEffect)(()=>{(0,s.getBusyContext)(t.current).whenReady().then(()=>{var i,o;(null===(i=t.current)||void 0===i?void 0:i.isOpen())&&!e.opened?t.current.close():!(null===(o=t.current)||void 0===o?void 0:o.isOpen())&&e.opened&&t.current.open(e.launcher)})},[e.opened,t.current]);const d=(0,o.useCallback)(t=>{null==e||e.onFocusIn(t)},[e.onFocusIn]),c=(0,o.useCallback)(t=>{null==e||e.onFocusOut(t)},[e.onFocusOut]);return(0,i.h)("oj-popup",{"data-oj-context":"true",onfocusin:d,onfocusout:c,id:e.id,ref:t,class:"oj-sp-smart-search-complex-filter-popup oj-flex oj-sm-justify-content-center oj-sm-flex-direction-column "+r(),onojClose:l,position:n,initialFocus:"popup"},(0,i.h)("div",null,e.opened?e.UItemplate:void 0))}})),define("oj-sp/smart-search/module/DesktopModule",["require","exports","preact","./../common/interfaces","./DesktopKeywordFilterModule","../components/applied-filters-list/applied-filters-list","../common/FilterUtils","../components/user-assistance-popup/user-assistance-popup","../components/suggestion-popup/suggestion-popup","../components/applied-filters-carousel/applied-filters-conveyor-belt","./ModuleUtils","../common/enums","oj-sp/common-util/common-util","../components/user-assistance-popup/complex-filter-popup","ojs/ojlogger","ojs/ojconveyorbelt","ojs/ojlistview"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopModule=void 0;class g extends o.Module{constructor(){super(...arguments),this.appliedFiltersContainerRef=(0,i.createRef)(),this.conveyorBeltRef=(0,i.createRef)(),this.complexFilterLauncher=null,this.closeMaxKeywordPopUp=()=>{this.setState({userAssistancePopupOpened:!1})},this.openSuggestionsPopup=()=>{const e=this.state.isInlineEditActive?this.state.inlineInputValue:this.state.inputStateValue,t=(0,c.getShouldSuggestionPopupDisplay)(e,this.parentModule.suggestionsFilters,this.parentModule.searchConfig.options.autocompleteTextFilterMinChars);if(!this.state.isSmallScreenOrMobile){(0,u.getBusyContext)(this.parentModule.smartSearchContainerRef.current).whenReady().then(()=>{!this.state.suggestionPopupOpened&&t&&this.setState({suggestionPopupOpened:!0})}).catch(e=>{(0,m.error)(e)})}},this.onCloseSuggestionsPopup=()=>{this.setState({suggestionPopupOpened:!1})},this.renderFilterChips=()=>{var e;const t=(0,n.getAppliedFiltersForPlatform)(this.state),o=(0,c.getActiveComplexFilterId)(this.state,null===(e=this.parentModule.editedFilterChip)||void 0===e?void 0:e.id);return(0,i.h)(a.default,{filters:t,isMobile:this.state.isSmallScreenOrMobile,appliedFiltersContainerId:this.parentModule.appliedFiltersContainerId,onAppliedFilterChipClose:this.keywordFilterModule.removeAppliedFilters,keywordOnAppliedFilterChipEditStart:this.keywordFilterModule.appliedKeywordFiltersEditStart,keywordOnAppliedFilterChipEditEnd:this.keywordFilterModule.appliedKeywordFiltersEditEnd,keywordOnFilterChipInputBlur:this.keywordFilterModule.onFilterChipInputBlur,keywordOnAppliedFilterChipKeyDown:this.parentModule.onAppliedFilterChipKeyDown,keywordOnChangeValueHandlerFilterInput:this.keywordFilterModule.onChangeValueHandlerFilterInput,keywordInlineEditInputValue:this.state.inlineInputValue,keywordOnFilterInputKeyPress:this.keywordFilterModule.onFilterInputKeyPress,maxCharsAllowedInKeyword:this.parentModule.maxCharsAllowedInKeyword,openComplexFilterPopup:this.openComplexFilterPopup,activeComplexFilterId:o})},this.renderUserAssistancePopup=()=>(0,i.h)(r.default,{opened:this.state.userAssistancePopupOpened,launcher:this.parentModule.inputWrapperRef.current,onClosed:this.closeMaxKeywordPopUp,onFocusIn:this.parentModule.activityMonitorFocusIn,onFocusOut:this.parentModule.activityMonitorFocusOut}),this.renderSuggestionPopup=e=>{var t,o,s;return(0,i.h)(l.default,{onClosed:this.onCloseSuggestionsPopup,suggestionsPopupId:this.parentModule.suggestionsPopupId,launcher:this.parentModule.inputWrapperRef.current,opened:this.state.suggestionPopupOpened,onAddKeywordFilter:this.onAddKeywordFilter,inputValue:e,autocomplete:null!==(t=this.component.props.autocompleteData)&&void 0!==t?t:this.parentModule.defaultEmptyAutocompleteData,autocompleteTextFilterMinChars:this.parentModule.searchConfig.options.autocompleteTextFilterMinChars,filters:this.state.appliedFiltersArray,focusInputTextElement:this.parentModule.focusInputTextElem,keywordName:this.parentModule.searchConfig.options.keywordName,suggestionsFilters:this.parentModule.suggestionsFilters,onAddComplexFilter:this.onAddComplexFilter,onFocusIn:this.parentModule.activityMonitorFocusIn,onFocusOut:this.parentModule.activityMonitorFocusOut,searchConfig:this.parentModule.searchConfig,subject:null===(s=null===(o=this.parentModule)||void 0===o?void 0:o.caretaker)||void 0===s?void 0:s.subject,onAddHistoryFilters:this.onAddHistoryFilters})},this.renderComplexFilterPopup=()=>(0,i.h)(h.default,{opened:this.state.complexPopupOpened,id:this.complexPopupId,launcher:this.complexFilterLauncher,onClosed:this.closeComplexFilterPopup,UItemplate:this.complexPopupUI,activeFilter:this.parentModule.editedFilterChip,onFocusIn:this.parentModule.activityMonitorFocusIn,onFocusOut:this.parentModule.activityMonitorFocusOut}),this.renderFilterChipCarousel=()=>(0,i.h)(d.default,{appliedFiltersContainerRef:this.appliedFiltersContainerRef,appliedFiltersConveyorBeltId:this.appliedFiltersConveyorBeltId,appliedFiltersContainerId:this.parentModule.appliedFiltersContainerId,conveyorBeltRef:this.conveyorBeltRef,getAppliedFilterChipsList:this.renderFilterChips}),this.onAddHistoryFilters=(e,t)=>{this.__onAddHistoryFilters(e,t).catch(e=>{(0,m.error)(e)})},this.__onAddHistoryFilters=async(e,t)=>{var i,o,s,a;const r=(0,u.setBusyResolve)(t,{description:"Smart Search Desktop - Adding filters from history "});try{let t=await(0,c.mergeHistorySuggestionsWithAppliedFilters)(this.state,this.parentModule.searchConfig,e);const l=(0,n.countKeywordFilters)(this.parentModule.searchConfig.options.keywordName,t),d=null!==(a=null===(s=null===(o=null===(i=this.parentModule)||void 0===i?void 0:i.searchConfig)||void 0===o?void 0:o.options)||void 0===s?void 0:s.maxKeywordFilters)&&void 0!==a?a:10,p=l>d;p&&(t=(0,c.trimKeywordsExceedingMaxKeywordFiltersCount)(l,d,t)),this.parentModule.focusInputTextElem(),await this.parentModule.setComponentState({appliedFiltersArray:t,inputStateValue:"",suggestionPopupOpened:!1,userAssistancePopupOpened:p},null,async()=>{var e,t;this.conveyorBeltRef.current.arrowVisibility=this.getArrowVisibility(),null===(e=this.conveyorBeltRef.current)||void 0===e||e.refresh(),this.scrollLastAppliedFilterIntoView(),null===(t=this.parentModule.inputRef.current)||void 0===t||t.parentElement.classList.add("oj-sp-smart-search-input-focused")})}finally{r()}},this.onAddKeywordFilter=(e,t)=>{this.__onAddKeywordFilter(e,t).catch(e=>{(0,m.error)(e)})},this.__onAddKeywordFilter=async(e,t)=>{const{bsResolve:i,decoratedKeywordFilterChip:o}=await this.parentModule.onAddKeywordFilter(e,t);try{this.state.isInlineEditActive?await this.keywordFilterModule.__appliedKeywordFiltersEditEnd(!1,this.parentModule.editedFilterChip,o):await this.addAppliedFilters(o)}finally{i()}},this.addAppliedFilters=async(e,t)=>{const i=await this.parentModule.addAppliedFilters(e,t);if(!i)return;const o=async(e,t)=>{this.openComplexFilterPopup(e,t)};await this.parentModule.setComponentState({appliedFiltersArray:i,inputStateValue:"",suggestionPopupOpened:!1},null,async()=>{var t,s;this.conveyorBeltRef.current.arrowVisibility=this.getArrowVisibility(),null===(t=this.conveyorBeltRef.current)||void 0===t||t.refresh(),this.parentModule.focusInputTextElem(),this.scrollLastAppliedFilterIntoView(),await(0,c.editFilterIfNotValid)(this.parentModule.appliedFiltersContainerId,e,i,o),null===(s=this.parentModule.inputRef.current)||void 0===s||s.parentElement.classList.add("oj-sp-smart-search-input-focused")})},this.onAddComplexFilter=(e,t)=>{this.__onAddComplexFilter(e,t).catch(e=>{(0,m.error)(e)})},this.__onAddComplexFilter=async(e,t)=>{const i={description:"Smart Search Desktop - Adding Complex Filter on "+e.key},o=(0,u.setBusyResolve)(t,i);try{this.state.isInlineEditActive?(await this.keywordFilterModule.__appliedKeywordFiltersEditEnd(!1,this.parentModule.editedFilterChip,null),await this.addAppliedFilters(e.data,this.parentModule.removedFilterChipIndex)):await this.addAppliedFilters(e.data)}finally{o()}},this.closeComplexFilterPopup=()=>{const e=(0,u.setBusyResolve)(this.conveyorBeltRef.current,{description:"Smart Search Desktop - Close complex filter popup"});this.__closeComplexFilterPopup().then(()=>{e()}).catch(t=>{(0,m.error)(t),e()})},this.__closeComplexFilterPopup=async()=>{var e;if(this.state.complexPopupOpened&&this.parentModule.editedFilterChip){const t=(0,n.getAppliedFiltersForPlatform)(this.state),i=t.find(e=>e.id===this.parentModule.editedFilterChip.id),o=t.findIndex(e=>e.id===this.parentModule.editedFilterChip.id);if(!(null!==(e=await(null==i?void 0:i.validate()))&&void 0!==e&&e)&&i)return this.keywordFilterModule.removeAppliedFilters(i),void this.parentModule.focusInputTextElem();await this.parentModule.setComponentState({appliedFiltersArray:t,complexPopupOpened:!1},null,()=>{this.parentModule.editedFilterChip=null}),(0,c.focusFilterChip)(this.state,this.parentModule.appliedFiltersContainerId,o,this.conveyorBeltRef.current)}},this.openComplexFilterPopup=(e,t)=>{var i;t.isToggleFilter?this.keywordFilterModule.removeAppliedFilters(t):(this.parentModule.editedFilterChip=t,this.complexFilterLauncher=e,this.complexPopupUI=(0,n.invokeFilterUITemplate)(this.onDataChanged,t,this.state.appliedFiltersArray),(null===(i=this.conveyorBeltRef.current)||void 0===i?void 0:i.arrowVisibility)===p.ARROW_VISIBILITY.VISIBLE&&this.conveyorBeltRef.current.scrollElementIntoView(e.parentElement),this.setState({suggestionPopupOpened:!1,complexPopupOpened:!0}))},this.onDataChanged=e=>{this.__onDataChanged(e).catch(e=>{(0,m.error)(e)})},this.__onDataChanged=async e=>{const t={description:"Smart Search Desktop - Complex Filter on onDataChanged for filter "+e.activeFilter.id},i=(0,u.setBusyResolve)(this.conveyorBeltRef.current,t);try{let t=(0,n.getAppliedFiltersForPlatform)(this.state);t=await(0,n.cloneDecoratedFilters)(this.parentModule.searchConfig,t);t.find(t=>t.id===e.activeFilter.id).ghost.data=e.data,this.setState({appliedFiltersArray:t})}finally{i()}}}init(){this._keywordFilterModule=new s.DesktopKeywordFilterModule(this),this.appliedFiltersConveyorBeltId=this.component.uniquePrefix+"-conveyorBelt",this.complexPopupId=this.component.uniquePrefix+"-complex-popup"}get keywordFilterModule(){return this._keywordFilterModule}get component(){return this.parentModule.component}openMaxKeywordPopUp(){this.setState({userAssistancePopupOpened:!0})}focusPopupListView(){const e=document.getElementById(this.parentModule.suggestionsPopupId);if(!this.state.suggestionPopupOpened||!e)return;const t=e.querySelector("oj-list-view");null==t||t.focus()}scrollLastAppliedFilterIntoView(){const e=this.state.appliedFiltersArray.length,t=document.getElementById(this.parentModule.appliedFiltersContainerId).querySelectorAll(".oj-sp-filter-chip-container")[e-1];this.conveyorBeltRef.current.arrowVisibility===p.ARROW_VISIBILITY.VISIBLE&&this.conveyorBeltRef.current.scrollElementIntoView(t.parentElement)}getArrowVisibility(){var e;let t="hidden";return(null===(e=this.appliedFiltersContainerRef.current)||void 0===e?void 0:e.offsetWidth)>=this.getAppliedFiltersAreaWidth()&&(t=p.ARROW_VISIBILITY.VISIBLE),t}updateArrowVisibility(){this.conveyorBeltRef.current.arrowVisibility=this.getArrowVisibility()}getAppliedFiltersAreaWidth(){var e;return(null===(e=this.parentModule.smartSearchContainerRef.current)||void 0===e?void 0:e.offsetWidth)-56-256-24}setConveyorBeltWidth(){var e;const t=document.documentElement;t.style.setProperty("--oj-sp-ss-conveyor-belt-width",this.getAppliedFiltersAreaWidth()+"px"),t.style.setProperty("--oj-sp-ss-container-width",(null===(e=this.parentModule.smartSearchContainerRef.current)||void 0===e?void 0:e.offsetWidth)+"px")}getContextByNode(e){let t,i=void 0;const o=document.getElementById(this.parentModule.suggestionsPopupId);return o&&(t=o.querySelector("oj-list-view.oj-sp-smart-search-keyboard-navigable-list-view"),i=(0,n.getDataForNodeFromSuggestions)(t,e)),i}setupResizeObserver(){this.resizeObserver=new ResizeObserver(()=>this.setConveyorBeltWidth()),this.resizeObserver.observe(this.parentModule.smartSearchContainerRef.current)}teardownResizeObserver(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect();const t=document.documentElement;t.style.removeProperty("--oj-sp-ss-conveyor-belt-width"),t.style.removeProperty("--oj-sp-ss-container-width")}}t.DesktopModule=g})),define("oj-sp/smart-search/module/MobileKeywordFilterModule",["require","exports","./../common/interfaces","ojs/ojlogger","oj-sp/common-util/common-util"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileKeywordFilterModule=void 0;class a extends i.Module{constructor(e){super(e),this.appliedKeywordFiltersEditStart=(e,t,i)=>{const a={description:`Smart Search Mobile - appliedKeywordFiltersEditStart for edited filter "${t.id}"`},n=(0,s.setBusyResolve)(i.current,a);this.__appliedKeywordFiltersEditStart(e,t,i).then(()=>{n()}).catch(e=>{(0,o.error)(e),n()})},this.__appliedKeywordFiltersEditStart=async(e,t,i)=>{this.state.isSmallScreenOrMobile&&await this.parentModule.editFilterChipInSM(t)},this.onFilterChipInputBlur=e=>{},this.appliedKeywordFiltersEditEnd=(e,t,i)=>{},this.onSearchInputFocus=e=>{},this.onChangeValueHandlerFilterInput=e=>{},this.onFilterInputKeyPress=e=>{}}get component(){return this.parentModule.component}}t.MobileKeywordFilterModule=a})),define("oj-sp/smart-search/components/button/action-button",["require","exports","preact","ojs/ojbutton"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>(0,i.h)("oj-button",{"aria-label":e.ariaLabel,chroming:e.chroming,class:e.buttonClass,onojAction:e.onAction,id:e.buttonId},(0,i.h)("span",null,e.buttonText))})),define("oj-sp/smart-search/components/clear-icon/clear-icon",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact/hooks"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,s.useMemo)(()=>Object.assign({},o),[o]);return(0,i.h)("div",{class:"oj-sm-flex-0 oj-flex oj-sm-align-items-center oj-sm-margin-2x-start"},(0,i.h)("a",{"aria-label":t.clearField,class:"oj-sp-helper-text-decoration-none oj-sp-smart-search-drawer-clear-icon",href:"#",onClick:e.onClearIconClick,title:t.clearField},(0,i.h)("span",{"aria-hidden":"true",class:"oj-ux-ico-cancel-s oj-sp-smart-search-icon oj-sp-smart-search-clear-icon"})))}})),define("oj-sp/smart-search/components/back-icon/back-icon",["require","exports","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","preact","preact/hooks"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,s.useMemo)(()=>Object.assign({},i),[i]);return(0,o.h)("div",{className:e.iconClass+" oj-sm-flex-0 oj-flex oj-sm-align-items-flex-start oj-sm-margin-2x-end"},(0,o.h)("a",{"aria-label":t.back,class:"oj-text-color-primary oj-sp-helper-text-decoration-none oj-sp-smart-search-sm-back-icon-anchor oj-sp-helper-margin-1_5x-top",href:"#",onClick:e.onBackIconClick,tabIndex:0,title:t.back},(0,o.h)("span",{"aria-hidden":"true",class:"oj-ux-ico-chevron-left oj-sp-smart-search-icon",alt:t.back})))}})),define("oj-sp/smart-search/components/mobile-drawer/mobile-drawer",["require","exports","preact","preact/hooks","../suggestion-list/suggestion-list","../button/action-button","../clear-icon/clear-icon","../back-icon/back-icon","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","../info-message/info-message","oj-sp/common-util/common-util","ojs/ojdrawerpopup"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{var t,p,u;const h=(0,o.useMemo)(()=>Object.assign({},l),[l]);(0,o.useEffect)(()=>{(0,c.getBusyContext)(e.smallScreenComplexDrawerRef.current).whenReady().then(()=>{!e.complexMobilePopupOpened&&e.smallScreenDrawerOpen&&e.focusEditedFilterChip()})},[e.complexMobilePopupOpened]);const m=(0,o.useCallback)(e=>{e.preventDefault()},[]),g=(null===(t=e.selectedFiltersSmallScreen)||void 0===t?void 0:t.length)>0?"oj-sm-margin-2x-top":"",y=(0,o.useCallback)(t=>{null==e||e.onFocusIn(t)},[e.onFocusIn]),f=(0,o.useCallback)(t=>{null==e||e.onFocusOut(t)},[e.onFocusOut]);return(0,i.h)("oj-drawer-popup",{id:e.smallScreenDrawerId,edge:"end",opened:e.smallScreenDrawerOpen,class:"oj-sp-smart-search-sm-drawer",ref:e.smallScreenDrawerRef,"data-oj-context":!0,onojBeforeClose:m,autoDismiss:"none",modality:"modeless",onfocusin:y,onfocusout:f},(0,i.h)("div",{class:"oj-helper-hidden-accessible"},(0,i.h)("h6",null,h.accAppliedSearch)," "),(0,i.h)("div",{class:"oj-sp-smart-search-sm-drawer-search-view"},(0,i.h)("div",{"aria-label":"[[res.accAppliedSearch]]",class:"oj-sp-smart-search-bar oj-sm-padding-3x-horizontal oj-sm-padding-2x-vertical"},e.getFilterChip(),(0,i.h)("div",{className:g+" oj-flex oj-sm-align-items-center oj-sp-smart-search-bar-input-text-wrapper oj-sm-flex-wrap-nowrap"},(0,i.h)(r.default,{iconClass:"oj-sp-smart-search-back-icon",onBackIconClick:e.onBackIconClick}),e.getSearchInput(),e.inputValue?(0,i.h)(n.default,{onClearIconClick:e.onClearIconClick}):null)),(0,i.h)("div",{className:"oj-sm-flex-1 oj-divider-top oj-sp-helper-overflow-y-auto oj-sp-smart-search-mobile-suggestion-list"},e.shouldSuggestionPopupDisplay&&e.smallScreenDrawerOpen&&!e.userAssistancePopupOpened&&!e.complexPopupOpened?(0,i.h)(s.default,Object.assign({},e)):null),e.userAssistancePopupOpened?(0,i.h)(d.default,{containerClass:"oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sm-margin-4x-top oj-sm-margin-2x-horizontal"}):null,(0,i.h)("div",null,(0,i.h)("oj-drawer-popup",{id:e.smallScreenComplexDrawerId,edge:"end",opened:e.complexMobilePopupOpened,class:"oj-sp-smart-search-sm-drawer",ref:e.smallScreenComplexDrawerRef,"data-oj-context":!0,onojBeforeClose:m,onfocusin:y,onfocusout:f},(0,i.h)("div",{class:"oj-helper-hidden-accessible"},(0,i.h)("h6",null,null===(p=e.editedFilterChip)||void 0===p?void 0:p.label)," "),(0,i.h)("div",{class:"oj-sp-smart-search-sm-drawer-search-view"},(0,i.h)("div",{className:"oj-sm-padding-4x oj-flex oj-sm-align-items-center oj-sp-smart-search-bar-input-text-wrapper oj-sm-flex-wrap-nowrap"},(0,i.h)(r.default,{onBackIconClick:e.onComplexBackIconClick}),(0,i.h)("span",{class:"oj-text-color-primary oj-typography-body-md oj-typography-semi-bold"},null===(u=e.editedFilterChip)||void 0===u?void 0:u.label)),(0,i.h)("div",{class:"oj-sm-padding-4x-horizontal oj-sm-padding-4x-top oj-divider-top oj-sp-smart-search-mobile-complex-input"},e.complexMobilePopupOpened?e.complexPopupUI:void 0),(0,i.h)("div",{class:"oj-sp-smart-search-button-container oj-flex oj-sm-flex-direction-column oj-sm-padding-4x oj-divider-top"},(0,i.h)(a.default,{buttonId:e.smallScreenDrawerId+"-apply-button",buttonText:h.apply,onAction:e.onApplyButtonAction,ariaLabel:h.apply,chroming:"solid",buttonClass:"oj-sp-smart-search-search-button"}))))),(0,i.h)("div",{class:"oj-sp-smart-search-button-container oj-flex oj-sm-flex-direction-column oj-sm-padding-4x-horizontal oj-sm-padding-2x-vertical"},(0,i.h)(a.default,{buttonId:e.smallScreenDrawerId+"-cancel-button",buttonText:h.cancel,onAction:e.onCancelButtonClick,ariaLabel:h.cancel,chroming:"outlined",buttonClass:"oj-sm-padding-4x-bottom"}),(0,i.h)(a.default,{buttonId:e.smallScreenDrawerId+"-search-button",buttonText:h.search,onAction:e.onSearchButtonAction,ariaLabel:h.search,chroming:"callToAction",buttonClass:"oj-sp-smart-search-search-button"}))))}})),define("oj-sp/smart-search/components/button/filter-button",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojbutton"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const[t,n]=(0,o.useState)(!1),r=(0,o.useCallback)(()=>{n(!0)},[n]),l=(0,o.useMemo)(()=>Object.assign({},s),[s]),d=(0,o.useCallback)(()=>{const t=e.appliedFiltersArray.length;return 1===t?l.oneAppliedFilter:t>1?a.applyParameters(l.numAppliedFilters,{num:t}):void 0},[e.appliedFiltersArray]);return(0,i.h)("oj-button",{id:e.buttonId,class:"oj-sm-margin-4x-start oj-sp-smart-search-small-screen-filter-button "+(t?"oj-focus":""),onojAction:e.openSmallScreenDrawer,chroming:"solid",onFocus:r,"aria-label":d()},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-filter-2 oj-ux-icon-size-4x"}),(0,i.h)("span",{class:"oj-typography-body-md"},e.appliedFiltersArray.length))}})),define("oj-sp/smart-search/module/MobileModule",["require","exports","preact","./../common/interfaces","./MobileKeywordFilterModule","../common/FilterUtils","../components/applied-filters-list/applied-filters-list","./ModuleUtils","../components/mobile-drawer/mobile-drawer","../components/button/filter-button","oj-sp/common-util/common-util","ojs/ojlogger","ojs/ojdrawerpopup","ojs/ojlistview","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileModule=void 0;class u extends o.Module{constructor(){super(...arguments),this.smallScreenDrawerRef=(0,i.createRef)(),this.smallScreenComplexDrawerRef=(0,i.createRef)(),this.editFilterChipInSM=async e=>{var t;const i={description:`Smart Search Mobile - editFilterChipInSM for edited filter "${e.id}"`},o=(0,c.setBusyResolve)(this.parentModule.inputWrapperRef.current,i);try{this.appliedFiltersCopyForMutliEditSmallScreen=null!==(t=this.appliedFiltersCopyForMutliEditSmallScreen)&&void 0!==t?t:this.state.selectedFiltersSmallScreen;const{filters:i,index:s}=this.isEditActiveInSmallScreen?(0,r.remainingAppliedFilters)(this.state,e,this.appliedFiltersCopyForMutliEditSmallScreen):(0,r.remainingAppliedFilters)(this.state,e),a=i;isNaN(s)||(this.parentModule.removedFilterChipIndex=s),this.isEditActiveInSmallScreen=!0,this.setState({selectedFiltersSmallScreen:a,inputStateValue:e.value,userAssistancePopupOpened:!1},()=>{var e;null===(e=this.parentModule.inputRef.current)||void 0===e||e.focus()})}finally{o()}},this.renderFilterChips=()=>{var e;const t=(0,a.getAppliedFiltersForPlatform)(this.state),o=(0,r.getActiveComplexFilterId)(this.state,null===(e=this.parentModule.editedFilterChip)||void 0===e?void 0:e.id);return(0,i.h)(n.default,{filters:t,isMobile:this.state.isSmallScreenOrMobile,appliedFiltersContainerId:this.parentModule.appliedFiltersContainerId,onAppliedFilterChipClose:this.removeAppliedFilters,keywordOnAppliedFilterChipEditStart:this.keywordFilterModule.appliedKeywordFiltersEditStart,keywordOnAppliedFilterChipEditEnd:this.keywordFilterModule.appliedKeywordFiltersEditEnd,keywordOnFilterChipInputBlur:this.keywordFilterModule.onFilterChipInputBlur,keywordOnAppliedFilterChipKeyDown:this.parentModule.onAppliedFilterChipKeyDown,keywordOnChangeValueHandlerFilterInput:this.keywordFilterModule.onChangeValueHandlerFilterInput,keywordInlineEditInputValue:this.state.inlineInputValue,keywordOnFilterInputKeyPress:this.keywordFilterModule.onFilterInputKeyPress,maxCharsAllowedInKeyword:this.parentModule.maxCharsAllowedInKeyword,openComplexFilterPopup:this.openComplexFilterPopup,activeComplexFilterId:o})},this.renderSmallScreenDrawer=e=>{var t,o,s;const n=(0,a.getAppliedFiltersForPlatform)(this.state);return(0,i.h)(l.default,{selectedFiltersSmallScreen:this.state.selectedFiltersSmallScreen,onBackIconClick:this.onBackIconClick,inputValue:this.state.inputStateValue,onSearchButtonAction:this.onSearchButtonAction,onClearIconClick:this.onClearIconClick,getFilterChip:this.renderFilterChips,getSearchInput:this.parentModule.renderSearchInput,onCancelButtonClick:this.onCancelButtonClick,onAddKeywordFilter:this.onAddKeywordFilter,autocomplete:null!==(t=this.component.props.autocompleteData)&&void 0!==t?t:this.parentModule.defaultEmptyAutocompleteData,autocompleteTextFilterMinChars:this.parentModule.searchConfig.options.autocompleteTextFilterMinChars,filters:n,focusInputTextElement:this.parentModule.focusInputTextElem,suggestionsPopupId:this.suggestionsListIdMobile,shouldSuggestionPopupDisplay:e,smallScreenDrawerOpen:this.state.smallScreenDrawerOpen,smallScreenDrawerId:this.smallScreenDrawerId,smallScreenDrawerRef:this.smallScreenDrawerRef,userAssistancePopupOpened:this.state.userAssistancePopupOpened,suggestionsFilters:this.parentModule.suggestionsFilters,onAddComplexFilter:this.onAddComplexFilter,complexPopupOpened:this.state.complexPopupOpened,complexMobilePopupOpened:this.state.complexMobilePopupOpened,smallScreenComplexDrawerRef:this.smallScreenComplexDrawerRef,smallScreenComplexDrawerId:this.smallScreenComplexDrawerId,onApplyButtonAction:this.onApplyButtonAction,onComplexBackIconClick:this.onComplexBackIconClick,editedFilterChip:this.parentModule.editedFilterChip,complexPopupUI:this.complexPopupUI,focusEditedFilterChip:this.focusEditedFilterChip,onFocusIn:this.parentModule.activityMonitorFocusIn,onFocusOut:this.parentModule.activityMonitorFocusOut,searchConfig:this.parentModule.searchConfig,subject:null===(s=null===(o=this.parentModule)||void 0===o?void 0:o.caretaker)||void 0===s?void 0:s.subject,onAddHistoryFilters:this.onAddHistoryFilters})},this.renderSmallScreenFilterCount=()=>(0,i.h)(d.default,{buttonId:this.smallScreenFilterButtionId,openSmallScreenDrawer:this.openSmallScreenDrawer,appliedFiltersArray:this.state.appliedFiltersArray}),this.openSmallScreenDrawer=()=>{const e=(0,c.setBusyResolve)(this.parentModule.inputWrapperRef.current,{description:"Smart Search Mobile - openSmallScreenDrawer"});this.__openSmallScreenDrawer().then(()=>{this.parentModule.focusInputTextElem(),e()}).catch(t=>{(0,p.error)(t),e()})},this.__openSmallScreenDrawer=async()=>{const e=await(0,a.cloneDecoratedFilters)(this.parentModule.searchConfig,this.state.appliedFiltersArray);this.appliedFiltersCopyForMutliEditSmallScreen=e;this.smallScreenDrawerRef.current&&this.setState({selectedFiltersSmallScreen:e,smallScreenDrawerOpen:!0})},this.onSearchButtonAction=()=>{const e=(0,c.setBusyResolve)(this.parentModule.inputWrapperRef.current,{description:"Smart Search Mobile - onSearchButtonAction"});this.__onSearchButtonAction().then(()=>{e()}).catch(t=>{(0,p.error)(t),e()})},this.__onSearchButtonAction=async()=>{this.appliedFiltersCopyForMutliEditSmallScreen=this.state.selectedFiltersSmallScreen;for(let e=this.appliedFiltersCopyForMutliEditSmallScreen.length-1;e>-1;e--){const t=this.appliedFiltersCopyForMutliEditSmallScreen[e];await t.validate()||this.appliedFiltersCopyForMutliEditSmallScreen.splice(e,1)}await this.parentModule.setComponentState({appliedFiltersArray:this.state.selectedFiltersSmallScreen,inputStateValue:"",hasSearchInputFocus:null,smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1})},this.showFooterButton=()=>{var e,t,i;null===(e=this.parentModule.inputRef.current)||void 0===e||e.parentElement.classList.remove("oj-sp-smart-search-input-focused"),null===(i=null===(t=this.smallScreenDrawerRef.current)||void 0===t?void 0:t.querySelector(".oj-sp-smart-search-search-button"))||void 0===i||i.focus()},this.onBackIconClick=e=>{e.preventDefault(),(0,c.isEmpty)(this.state.inputStateValue)?(0,c.isEmpty)(this.state.appliedFiltersArray)&&(0,c.isEmpty)(this.state.selectedFiltersSmallScreen)&&(0,c.isEmpty)(this.appliedFiltersCopyForMutliEditSmallScreen)?this.setState({smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1}):this.isEditActiveInSmallScreen?this.setState({inputStateValue:"",selectedFiltersSmallScreen:this.appliedFiltersCopyForMutliEditSmallScreen,userAssistancePopupOpened:!1},()=>{this.showFooterButton()}):this.state.selectedFiltersSmallScreen.length!==this.state.appliedFiltersArray.length||this.state.selectedFiltersSmallScreen!==this.state.appliedFiltersArray?this.showFooterButton():this.state.selectedFiltersSmallScreen===this.state.appliedFiltersArray?this.setState({smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1}):this.setState({inputStateValue:"",smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1}):(0,c.isEmpty)(this.state.appliedFiltersArray)&&(0,c.isEmpty)(this.state.selectedFiltersSmallScreen)&&(0,c.isEmpty)(this.appliedFiltersCopyForMutliEditSmallScreen)?this.setState({inputStateValue:"",smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1}):this.isEditActiveInSmallScreen?this.setState({selectedFiltersSmallScreen:this.appliedFiltersCopyForMutliEditSmallScreen,inputStateValue:"",userAssistancePopupOpened:!1},()=>{this.showFooterButton()}):this.setState({inputStateValue:"",userAssistancePopupOpened:!1},()=>{this.showFooterButton()})},this.onClearIconClick=e=>{e.preventDefault(),this.setState({inputStateValue:"",userAssistancePopupOpened:!1}),this.parentModule.focusInputTextElem()},this.onCancelButtonClick=e=>{e.preventDefault(),this.setState({inputStateValue:"",smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1})},this.onAddHistoryFilters=(e,t)=>{this.__onAddHistoryFilters(e,t).catch(e=>{(0,p.error)(e)})},this.__onAddHistoryFilters=async(e,t)=>{var i,o,s,n;const l=(0,c.setBusyResolve)(t,{description:"Smart Search Mobile - Adding filters from history "});try{let t=await(0,r.mergeHistorySuggestionsWithAppliedFilters)(this.state,this.parentModule.searchConfig,e);const d=(0,a.countKeywordFilters)(this.parentModule.searchConfig.options.keywordName,t),c=null!==(n=null===(s=null===(o=null===(i=this.parentModule)||void 0===i?void 0:i.searchConfig)||void 0===o?void 0:o.options)||void 0===s?void 0:s.maxKeywordFilters)&&void 0!==n?n:10,p=d>c;p&&(t=(0,r.trimKeywordsExceedingMaxKeywordFiltersCount)(d,c,t)),this.setState({selectedFiltersSmallScreen:t,inputStateValue:"",userAssistancePopupOpened:p},()=>{this.focusOnSearchButton()})}finally{l()}},this.onAddKeywordFilter=(e,t)=>{this.__onAddKeywordFilter(e,t).catch(e=>{(0,p.error)(e)})},this.__onAddKeywordFilter=async(e,t)=>{var i;const{bsResolve:o,decoratedKeywordFilterChip:s}=await this.parentModule.onAddKeywordFilter(e,t);try{let e=this.state.selectedFiltersSmallScreen;if((0,a.checkForDuplicateKeywordFilters)(this.parentModule.searchConfig.options.keywordName,s.value,e))return void this.setState({inputStateValue:"",suggestionPopupOpened:!1});e=await(0,a.cloneDecoratedFilters)(this.parentModule.searchConfig,e),e.push(s),this.setState({selectedFiltersSmallScreen:e,inputStateValue:""},()=>{var t;this.isEditActiveInSmallScreen?(0,r.focusFilterChip)(this.state,this.parentModule.appliedFiltersContainerId,e.length):(null===(t=this.smallScreenDrawerRef.current)||void 0===t?void 0:t.querySelector(".oj-sp-smart-search-search-button")).focus(),this.isEditActiveInSmallScreen=!1})}finally{this.appliedFiltersCopyForMutliEditSmallScreen=null,null===(i=this.parentModule.inputRef.current)||void 0===i||i.parentElement.classList.remove("oj-sp-smart-search-input-focused"),o()}},this.handleSearchBarKeyPress=e=>{e.stopPropagation();const{key:t}=e;t===c.KEY_NAME.ENTER&&this.parentModule.onSearchBarClick(e)},this.removeAppliedFilters=e=>{const{filters:t,index:i}=(0,r.remainingAppliedFilters)(this.state,e);this.appliedFiltersCopyForMutliEditSmallScreen=t,this.setState({selectedFiltersSmallScreen:t},()=>{(0,c.isEmpty)(t)?this.parentModule.focusInputTextElem():this.showFooterButton()}),this.parentModule.desktopModule.closeMaxKeywordPopUp()},this.onAddComplexFilter=(e,t)=>{this.__onAddComplexFilter(e,t).catch(e=>{(0,p.error)(e)})},this.__onAddComplexFilter=async(e,t)=>{const i={description:"Smart Search Mobile - Adding Complex Filter for "+e.key},o=(0,c.setBusyResolve)(t,i);try{let t=this.state.selectedFiltersSmallScreen;t=await(0,a.cloneDecoratedFilters)(this.parentModule.searchConfig,t);const i=e.data;t.push(i),this.setState({selectedFiltersSmallScreen:t,inputStateValue:""},()=>{this.showFooterButton()}),this.isEditActiveInSmallScreen=!1,this.appliedFiltersCopyForMutliEditSmallScreen=null,await(0,r.editFilterIfNotValid)(this.parentModule.appliedFiltersContainerId,i,t,this.__openComplexFilterPopup)}finally{o()}},this.openComplexFilterPopup=(e,t)=>{const i={description:"Smart Search Mobile - openComplexFilterPopup for filter "+t.id},o=(0,c.setBusyResolve)(e,i);this.__openComplexFilterPopup(e,t).then(()=>{o()}).catch(e=>{(0,p.error)(e),o()})},this.__openComplexFilterPopup=async(e,t)=>{if(t.isToggleFilter)return void this.removeAppliedFilters(t);this.parentModule.editedFilterChip=t,this.complexPopupUI=(0,a.invokeFilterUITemplate)(this.onDataChanged,t,this.state.selectedFiltersSmallScreen);const i=await(0,a.cloneDecoratedFilters)(this.parentModule.searchConfig,this.state.selectedFiltersSmallScreen);this.selectedPreviousAppliedFiltersSmallScreen=i;if(!this.smallScreenComplexDrawerRef.current)return;const o=(0,a.getAppliedFiltersForPlatform)(this.state);this.editedFilterChipIndex=o.findIndex(e=>e.id===t.id),this.focusEditedFilterChip(),this.setState({complexMobilePopupOpened:!0})},this.onDataChanged=e=>{this.__onDataChanged(e).catch(e=>{(0,p.error)(e)})},this.__onDataChanged=async e=>{const t={description:"Smart Search Mobile - complex filter onDataChanged for filter "+e.activeFilter.id},i=(0,c.setBusyResolve)(this.parentModule.inputWrapperRef.current,t);try{let t=(0,a.getAppliedFiltersForPlatform)(this.state);t=await(0,a.cloneDecoratedFilters)(this.parentModule.searchConfig,t);t.find((t,i)=>t.id===e.activeFilter.id).ghost.data=e.data,this.setState({selectedFiltersSmallScreen:t})}finally{i()}},this.focusEditedFilterChip=()=>{(0,r.focusFilterChip)(this.state,this.parentModule.appliedFiltersContainerId,this.editedFilterChipIndex)},this.onApplyButtonAction=()=>{const e=(0,c.setBusyResolve)(this.smallScreenComplexDrawerRef.current,{description:"Smart Search Mobile - Close complex mobile drawer"});this.__onApplyButtonAction().then(()=>{e()}).catch(t=>{(0,p.error)(t),e()})},this.__onApplyButtonAction=async()=>{this.parentModule.editedFilterChip=null;this.smallScreenComplexDrawerRef.current&&this.setState({complexMobilePopupOpened:!1})},this.onComplexBackIconClick=e=>{e.preventDefault();const t=(0,c.setBusyResolve)(this.smallScreenComplexDrawerRef.current,{description:"Smart Search Mobile - Close complex mobile drawer"});this.__onComplexBackIconClick().then(()=>{t()}).catch(e=>{(0,p.error)(e),t()})},this.__onComplexBackIconClick=async()=>{this.parentModule.editedFilterChip=null;this.smallScreenComplexDrawerRef.current&&this.setState({complexMobilePopupOpened:!1,selectedFiltersSmallScreen:this.selectedPreviousAppliedFiltersSmallScreen})}}init(){this._keywordFilterModule=new s.MobileKeywordFilterModule(this),this.smallScreenFilterButtionId=this.component.uniquePrefix+"-smallscreen-filters-button",this.suggestionsListIdMobile=this.component.uniquePrefix+"-suggestions-list-mobile",this.smallScreenDrawerId=this.component.uniquePrefix+"-small-screen-drawer",this.smallScreenComplexDrawerId=this.component.uniquePrefix+"-small-screen-complex-drawer",this.editedFilterChipIndex=-1}get component(){return this.parentModule.component}get keywordFilterModule(){return this._keywordFilterModule}focusPopupListView(){var e;const t=null===(e=this.smallScreenDrawerRef)||void 0===e?void 0:e.current;if(!this.state.isSmallScreenOrMobile||!t)return;const i=t.querySelector("oj-list-view");null==i||i.focus()}focusOnSearchButton(){var e,t;null===(t=null===(e=this.smallScreenDrawerRef.current)||void 0===e?void 0:e.querySelector(".oj-sp-smart-search-search-button"))||void 0===t||t.focus()}getContextByNode(e){var t;let i,o=void 0;return(null===(t=this.smallScreenDrawerRef)||void 0===t?void 0:t.current)&&(i=this.smallScreenDrawerRef.current.querySelector("oj-list-view.oj-sp-smart-search-keyboard-navigable-list-view"),o=(0,a.getDataForNodeFromSuggestions)(i,e)),o}}t.MobileModule=u})),define("oj-sp/smart-search/components/search-input/search-input",["require","exports","preact","preact/hooks","./useTextFieldInputHandlers","ojs/ojcontext"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const{onSearchInputKeyUp:t,askHint:a,inputValue:n,setRef:r,onChangeValueHandler:l,inPlaceEditActive:d,isMobile:c,suggestionsPopupId:p,appliedFilters:u,isSuggestionPopupOpen:h}=e,m=(0,o.useCallback)(e=>{l(e.value)},[l]),g=(0,o.useCallback)(t=>{var i,o,s,a,n,l;e.isEditActiveInSmallScreen||(null===(o=null===(i=t.relatedTarget)||void 0===i?void 0:i.classList)||void 0===o?void 0:o.contains("oj-sp-smart-search-sm-back-icon-anchor"))||(null===(a=null===(s=e.inputWrapperRef)||void 0===s?void 0:s.current)||void 0===a||a.classList.remove("oj-sp-smart-search-focused"),null===(l=null===(n=r.current)||void 0===n?void 0:n.parentElement)||void 0===l||l.classList.remove("oj-sp-smart-search-input-focused"))},[e.isEditActiveInSmallScreen]),y=(0,o.useCallback)(t=>{var i,o,s,a;null===(o=null===(i=e.inputWrapperRef)||void 0===i?void 0:i.current)||void 0===o||o.classList.add("oj-sp-smart-search-focused"),null===(a=null===(s=r.current)||void 0===s?void 0:s.parentElement)||void 0===a||a.classList.add("oj-sp-smart-search-input-focused")},[]);(0,o.useEffect)(()=>{l(n),m({previousValue:"",value:n})},[m,l]);const f=(0,s.useTextFieldInputHandlers)({value:n,onValueChanged:m,onValueSubmitted:t,onNavKeyUp:t,onInputBlur:g}),b=(0,o.useCallback)(()=>(d?"oj-helper-hidden":"")+" oj-sp-smart-search-chromeless-input-text oj-sp-smart-search-bar-input-text oj-inputtext oj-form-control oj-component oj-text-field oj-complete oj-has-no-value",[d]),v=(0,o.useCallback)(()=>{const e=(null==u?void 0:u.length)>0?"oj-sm-margin-3x-start ":"oj-sm-margin-4x-start ";let t="oj-sp-smart-search-bar-input-text-container ";return t=`${t} ${c?"oj-sm-margin-1x-start ":e}`,t},[c,u]);return(0,i.h)("div",{className:v()},(0,i.h)("input",Object.assign({ref:r,role:"combobox","aria-label":a,"aria-owns":p+"_suggestions-list","aria-haspopup":"listbox","aria-expanded":c||h?"true":"false","aria-controls":p+"_suggestions-list",autocomplete:"off",autofocus:!0,class:b(),placeholder:a,spellcheck:!1,type:"input",value:n,maxLength:e.maxCharsAllowedInKeyword,onFocus:y,onClick:e.openSuggestionPopup},f)))}})),define("oj-sp/smart-search/components/search-icon/search-icon",["require","exports","preact","ojL10n!oj-sp/common-strings/resources/nls/common-shell-strings","preact/hooks"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const t=(0,s.useMemo)(()=>Object.assign({},o),[o]);return(0,i.h)("div",{class:"oj-ux-ico-search oj-text-color-primary oj-sp-helper-text-decoration-none oj-sp-smart-search-icon",role:"img",tabIndex:e.tabIndex,"aria-label":t.search,onClick:e.onClick,alt:t.search,title:t.search})}})),define("oj-sp/smart-search/common/DefaultSearchConfig",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSearchConfig=void 0,t.DefaultSearchConfig={description:"Default Search Configuration",options:{keywordName:"$keyword$",maxKeywordFilters:10,autocompleteTextFilterMinChars:3,recentSearchProviderType:"OARS"},filters:{$keyword$:{type:"oj-sp/smart-search/default-filters/KeywordFilter",data:{text:null,editMode:!1},options:{}}}}})),define("oj-sp/smart-search/common/ConfigResolver",["require","exports","./DefaultSearchConfig","./FilterUtils","oj-sp/common-util/common-util","ojs/ojlogger","ojs/ojbindingprovider"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveFromProviderIfNeeded=t.offerUpSuggestionsFilters=t.ConfigResolver=void 0;class r{constructor(e){this._context=e}evaluate(e){var t,o,s;const a=this.evaluateMetadata(i.DefaultSearchConfig),n=null!==(t=this.evaluateMetadata(e))&&void 0!==t?t:a,r=null!==(o=n.options)&&void 0!==o?o:{};n.options=Object.assign(Object.assign({},a.options),r);const l=null!==(s=n.filters)&&void 0!==s?s:{};return n.filters=Object.assign(Object.assign({},a.filters),l),n}evaluateMetadata(e){return this._evaluate(e)}_evaluate(e){if(null==e)return e;if(Array.isArray(e))return this._evaluateArrayInContext(e);if("string"==typeof e)return this._evaluateExpressionIfNeededInContext(e);if("object"==typeof e){const t=Object.assign({},e),i=Object.keys(t);for(let e=0;e<i.length;e++){const o=i[e];t[o]=this._evaluate(t[o])}return t}return e}_evaluateExpressionIfNeededInContext(e){if(this._isExpression(e)){const t=this._contextsResolver(),i=this._getExpression(e),o=this._createFromString(i,t);let s;try{s=o()}catch(e){throw(0,a.error)(`FilterResolver - Could not evaluate expression ${i}.`,e),e}return s}return e}_evaluateArrayInContext(e){const t=e.slice(0);for(let e=0;e<t.length;e++)t[e]=this._evaluate(t[e]);return t}_getExpression(e){let t;if(e){const i=e.trim();t=r._ATTR_EXP.exec(i),t=t?t[1]:null,t||(t=r._ATTR_EXP_RO.exec(i),t=t?t[1]:null,t||(t=r._SPATTR_EXP_RO.exec(i),t=t?t[1]:null))}return t}_isExpression(e){return!(!this._isString(e)||!this._getExpression(e))}_isString(e){return"string"==typeof e}_createFromString(e,t){const i={$data:t};try{const t=n.createBindingExpressionEvaluator(e,i);return()=>{try{return t.bind(null,i)()}catch(t){throw new Error(`FilterResolver - Could not evaluate expression ${e}: ${t} in search config.`)}}}catch(t){return(0,a.error)(`FilterResolver - Could not evaluate expression ${e}.`,t),()=>{}}}static registerAvailableContextsResolver(e){this._availableContextsResolver=e}_contextsResolver(){return new Proxy({},{get:(e,t)=>{var i;if(Reflect.has(this._context,t))return Reflect.get(this._context,t);const o=(null!==(i=r._availableContextsResolver)&&void 0!==i?i:()=>({}))();return Reflect.get(o,t)},has:(e,t)=>{var i;if(Reflect.has(this._context,t))return!0;const o=(null!==(i=r._availableContextsResolver)&&void 0!==i?i:()=>({}))();return Reflect.has(o,t)},defineProperty:(e,t)=>!1})}}r._ATTR_EXP=/^(?:\{\{)([^]+)(?:\}\})$/,r._ATTR_EXP_RO=/^(?:\[\[)([^]+)(?:\]\])$/,r._SPATTR_EXP_RO=/^(?:<<)([^]+)(?:>>)$/,t.ConfigResolver=r,t.offerUpSuggestionsFilters=async function(e){const{filters:t,options:i}=e,s=Object.keys(t),a=[];for(const e of s)e!==i.keywordName&&a.push({name:e,data:{}});return await(0,o.decorateFilters)(e,a)},t.resolveFromProviderIfNeeded=async function(e){return(0,s.isObject)(e)&&(0,s.isFunction)(e.getConfig)?e.getConfig():e}})),define("oj-sp/smart-search/common/OarsCaretaker",["require","exports","oj-oars/resource/api","oj-sp/common-util/common-util","ojs/ojlogger","./DefaultSearchConfig","./RecentSearchCommon","./FilterUtils"],(function(e,t,i,o,s,a,n,r){"use strict";function l(e){return`${function(e){const t=e.split("/");return t[t.length-1]}(e.type)}::${e.name}`}Object.defineProperty(t,"__esModule",{value:!0}),t.OarsCaretaker=void 0;const d=()=>i.default;t.OarsCaretaker=class{constructor(e){this._oarsSuggestionsMap=new Map,this._baseSubject=null,this._policyHint="mru",this._setupSuggestionsPolicyFilters=!1,this._actionsKeysMap=new Map,this._federatedPolicies=[];const{suggestions:t,oarsResolver:i,keywordName:o,recentSearchProviderType:s}=e,{subject:n=(0,r.generateRandomSuggestionsSubject)(),policyHint:l="mru"}=t;this._baseSubject=n,this._policyHint=l,this._oarsResolver=null!=i?i:d,this._keywordName=null!=o?o:a.DefaultSearchConfig.options.keywordName,this._recentSearchProviderType=null!=s?s:a.DefaultSearchConfig.options.recentSearchProviderType}get subject(){return this._baseSubject}get keywordName(){return this._keywordName}set keywordName(e){this._keywordName=e}get recentSearchProviderType(){return this._recentSearchProviderType}set recentSearchProviderType(e){this._recentSearchProviderType=e}async captureAppliedFiltersHistory(e){const{delta:t,appliedFilters:i}=e;t.forEach(e=>{const{targetedFilter:t,operation:i}=e;t.name!==this._keywordName&&this._captureAppliedFilter(e.targetedFilter,i)}),this._recentSearchAppliedFilters=i}async relevanceRankingSuggestionsFilters(e){const{filters:t}=e;Array.isArray(t)&&t.sort((e,t)=>{var i,o,s,a,n,r,l,d;const c=this._oarsSuggestionsMap.get(e.name),p=this._oarsSuggestionsMap.get(t.name);let u=null===(o=null===(i=null==c?void 0:c.suggestion)||void 0===i?void 0:i.selection)||void 0===o?void 0:o.weight,h=null===(a=null===(s=null==p?void 0:p.suggestion)||void 0===s?void 0:s.selection)||void 0===a?void 0:a.weight;if(u=isNaN(u)?0:u,h=isNaN(h)?0:h,u>h)return-1;if(u<h)return 1;const m=null!==(n=e.label)&&void 0!==n?n:"",g=null!==(r=t.label)&&void 0!==r?r:"",y=m.localeCompare(g,void 0,{sensitivity:"accent"});if(0===y){const i=null!==(l=e.value)&&void 0!==l?l:"",o=null!==(d=t.value)&&void 0!==d?d:"";return i.localeCompare(o,void 0,{sensitivity:"accent"})}return y})}async applySuggestionsFiltersDefaultValues(e){var t,i;const{filters:o}=e;if(Array.isArray(o))for(const e of o){const o=this._oarsSuggestionsMap.get(e.name);if((null==o?void 0:o.setup)&&Array.isArray(null===(t=null==o?void 0:o.suggestion)||void 0===t?void 0:t.suggestions)&&(null===(i=null==o?void 0:o.suggestion)||void 0===i?void 0:i.suggestions.length)>0){const t=e.ghost.data;try{const i=JSON.parse(o.suggestion.suggestions[0].key);e.ghost.data=i,await e.validate()||(e.ghost.data=t,(0,s.error)(`OARS supplied default value for filter ${e.name} is invalid.`))}catch(i){e.ghost.data=t,(0,s.error)("Unable to parse OARS supplied default value for filter "+e.name,i)}}await this._seedFilter(e)}}async _publishRecentSearch(){const e=this._recentSearchAppliedFilters;if(Array.isArray(e)&&e.length>0){const t=this._baseSubject,i=this._recentSearchProviderType;await(0,n.publishRecentSearch)({subject:t,providerType:i,appliedFilters:e})}}async _publishSuggestions(){if(0===this._actionsKeysMap.size)return;let e={action:{keys:[],time:Date.now()},suggestionDetails:this._filterSuggestionDetails};for(const[t,i]of this._actionsKeysMap)for(const t of i)e.action.keys.push(t);e=(0,o.cloneDeep)(e);const t=this._oarsResolver();await t.publish("selection/search",e)}async publish(){const e=[];e.push(this._publishRecentSearch()),e.push(this._publishSuggestions()),await Promise.all(e),this._reset()}async seedFiltersFromBookmarkableToken(e){const{filters:t}=e;if(Array.isArray(t))for(const e of t)await this._seedFilter(e)}async _seedFilter(e){try{await e.fetchVolatileData()}catch(t){(0,s.error)(`Error seeding filter ${e.name} of type "${e.type}."`,t)}}_captureAppliedFilter(e,t){var i;if("delete"===t)return void this._actionsKeysMap.delete(e.name);const o=l(e);let s=o,a={key:s,suggestionDetails:this._filterSuggestionDetails};const n=[];n.push(a),s=JSON.stringify(e.data);const r=`${this._baseSubject}::filters[${o}]`,d=this._policyHint,c=null!==(i=this._getSuggestionDetailsFromFilter(e))&&void 0!==i?i:{suggestionId:null,contexts:{hard:{}}},{suggestionId:p,contexts:u}=c;a={key:s,suggestionDetails:{subject:r,model:d,suggestionId:p,contexts:u}},n.push(a),this._actionsKeysMap.delete(e.name),this._actionsKeysMap.set(e.name,n)}async _registerSuggestionsPolicyFilters(e){if(!this._setupSuggestionsPolicyFilters){this._setupSuggestionsPolicyFilters=!1;const t=this._baseSubject+"::filters",i=this._policyHint;this._federatedPolicies.push({subject:t,policyHint:i,maxSuggestions:e})}}async _registerSuggestionsPolicyFiltersValues(e){var t;if(!Array.isArray(e))return!1;let i=!1;for(const o of e){const e=null!==(t=this._oarsSuggestionsMap.get(o.name))&&void 0!==t?t:{setup:!1,suggestion:null};if(!e.setup){const t=l(o),s=`${this._baseSubject}::filters[${t}]`,a=this._policyHint,n=10;this._federatedPolicies.push({subject:s,policyHint:a,maxSuggestions:n}),e.setup=i=!0,this._oarsSuggestionsMap.set(o.name,e)}}if(i){const e=this._oarsResolver();await e.setupSuggestionsPolicies({setupStrategy:"cascading-subjects",baseSubject:this._baseSubject+"::filters",policies:this._federatedPolicies})}return i}async _loadSuggestions(){const e=this._baseSubject+"::filters",t=(0,o.cloneDeep)({suggestionsStrategy:"cascading-subjects",subject:e,context:{}}),i=this._oarsResolver(),s=await i.getSuggestionsList(t),{suggestions:a=[]}=s;a.forEach(e=>{const t=e.key.split("::")[1];if(this._oarsSuggestionsMap.has(t)){this._oarsSuggestionsMap.get(t).suggestion=e}}),this._filterSuggestionDetails=s.suggestionDetails}async prepare(e){const{suggestionsFilters:t}=e;await this._registerSuggestionsPolicyFilters(t.length);await this._registerSuggestionsPolicyFiltersValues(t)&&await this._loadSuggestions()}_getSuggestionDetailsFromFilter(e){var t;if(!this._oarsSuggestionsMap.has(e.name))return;const i=this._oarsSuggestionsMap.get(e.name),{suggestionDetails:o}=null!==(t=i.suggestion)&&void 0!==t?t:{};return o}_reset(){this._oarsSuggestionsMap.clear(),this._setupSuggestionsPolicyFilters=!1,this._recentSearchAppliedFilters=void 0}}})),define("oj-sp/smart-search/module/SmartSearchModule",["require","exports","preact","./../common/interfaces","./DesktopModule","./MobileModule","../common/FilterUtils","oj-sp/common-util/common-util","./ModuleUtils","./../components/search-input/search-input","./ModuleUtils","ojs/ojlogger","ojs/ojresponsiveknockoututils","../components/search-icon/search-icon","../common/ConfigResolver","../common/OarsCaretaker","./../common/MacroTaskRunner","ojs/ojarraydataprovider"],(function(e,t,i,o,s,a,n,r,l,d,c,p,u,h,m,g,y,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSearchModule=void 0;class b extends o.Module{constructor(){super(...arguments),this.inputRef=(0,i.createRef)(),this.screenRange=u.createScreenRangeObservable(),this.inputWrapperRef=(0,i.createRef)(),this.maxCharsAllowedInKeyword=100,this.smartSearchContainerRef=(0,i.createRef)(),this.filterCriterion=null,this.derivedStateFromPropsSemaphore=!1,this.focusInputTextElem=()=>{var e,t,i,o;this.state.isInlineEditActive?null===(t=null===(e=this.inlineInputRef)||void 0===e?void 0:e.current)||void 0===t||t.focus():null===(o=null===(i=this.inputRef)||void 0===i?void 0:i.current)||void 0===o||o.focus()},this.renderSearchInput=()=>(0,i.h)(d.default,{onSearchInputKeyUp:this.onSearchInputKeyUp,askHint:this.component.props.askHint,inputValue:this.state.inputStateValue,setRef:this.inputRef,inputWrapperRef:this.inputWrapperRef,onChangeValueHandler:this.onChangeValueHandler,inPlaceEditActive:this.state.isInlineEditActive,isMobile:this.state.isSmallScreenOrMobile,suggestionsPopupId:this.suggestionsPopupId,maxCharsAllowedInKeyword:this.maxCharsAllowedInKeyword,appliedFilters:this.state.appliedFiltersArray,isEditActiveInSmallScreen:this._mobileModule.isEditActiveInSmallScreen,openSuggestionPopup:this._desktopModule.openSuggestionsPopup,isSuggestionPopupOpen:this.state.suggestionPopupOpened}),this.onSearchInputKeyUp=e=>{const t=(0,r.setBusyResolve)(this.inputWrapperRef.current,{description:"Smart Search - onSearchInputKeyUp"});this.__onSearchInputKeyUp(e).then(()=>{t()}).catch(e=>{(0,p.error)(e),t()})},this.__onSearchInputKeyUp=async e=>{var t,i;e.stopPropagation();const o=(0,r.getDirectionality)(),{key:s}=e,a=(0,n.getAppliedFiltersForPlatform)(this.state),d=(0,n.countKeywordFilters)(this.searchConfig.options.keywordName,a),c=a.length;s===r.KEY_NAME.ENTER&&d<this.searchConfig.options.maxKeywordFilters?(e.preventDefault(),await this.addKeywordFilter(e)):s===r.KEY_NAME.ARROW_DOWN?(e.preventDefault(),this.state.suggestionPopupOpened||this.state.isSmallScreenOrMobile?this.focusPopupListView():this._desktopModule.openSuggestionsPopup()):s===r.KEY_NAME.ENTER&&d===this.searchConfig.options.maxKeywordFilters?this.setState({userAssistancePopupOpened:!1,inputStateValue:""},()=>{this.state.isSmallScreenOrMobile||this.desktopModule.closeMaxKeywordPopUp()}):c>0&&0===(null===(i=null===(t=this.inputRef)||void 0===t?void 0:t.current)||void 0===i?void 0:i.selectionStart)&&(o===r.DIRECTIONALITY.LEFT_TO_RIGHT&&s===r.KEY_NAME.ARROW_LEFT||o===r.DIRECTIONALITY.RIGHT_TO_LEFT&&s===r.KEY_NAME.ARROW_RIGHT)&&((0,l.focusFilterChip)(this.state,this.appliedFiltersContainerId,c,this.desktopModule.conveyorBeltRef.current),this.setState({suggestionPopupOpened:!1}))},this.focusPopupListView=()=>{this.state.isSmallScreenOrMobile?this.mobileModule.focusPopupListView():this.desktopModule.focusPopupListView()},this.onChangeValueHandler=e=>{const t=(0,n.getAppliedFiltersForPlatform)(this.state),i=(0,n.countKeywordFilters)(this.searchConfig.options.keywordName,t);e&&i>=this.searchConfig.options.maxKeywordFilters?this.setState({userAssistancePopupOpened:!0,inputStateValue:e,suggestionPopupOpened:!1},()=>{this.state.isSmallScreenOrMobile||this.desktopModule.openMaxKeywordPopUp()}):e&&i<this.searchConfig.options.maxKeywordFilters?this.setState({userAssistancePopupOpened:!1,inputStateValue:e},()=>{this.state.isSmallScreenOrMobile||(this.desktopModule.closeMaxKeywordPopUp(),this.desktopModule.openSuggestionsPopup())}):(e&&i===this.searchConfig.options.maxKeywordFilters||!e)&&this.setState({userAssistancePopupOpened:!1,inputStateValue:e},()=>{this.state.isSmallScreenOrMobile||this.desktopModule.closeMaxKeywordPopUp()})},this.removeAppliedFilters=e=>{const t={description:`Smart Search - Removing Filter by id "${e.id}"`},i=document.getElementById(this.appliedFiltersContainerId),o=(0,r.setBusyResolve)(i,t),{filters:s,index:a}=(0,c.remainingAppliedFilters)(this.state,e);isNaN(a)||(this.removedFilterChipIndex=a);return{afterStateChanged:e=>{try{this.focusInputTextElem()}catch(e){(0,p.error)(e)}},filters:s,bsResolve:o}},this.onAppliedFilterChipKeyDown=(e,t)=>{const i=(0,n.getAppliedFiltersForPlatform)(this.state),o=i.findIndex(t=>e.id===t.id),s=(0,r.getDirectionality)(),a=s===r.DIRECTIONALITY.LEFT_TO_RIGHT,d=s===r.DIRECTIONALITY.RIGHT_TO_LEFT,c=t.key===r.KEY_NAME.ARROW_LEFT,p=t.key===r.KEY_NAME.ARROW_RIGHT;(0,r.isNullOrUndefined)(o)||0===o&&(a&&c||d&&p)||(a&&c||d&&p?(0,l.focusFilterChip)(this.state,this.appliedFiltersContainerId,o-1,this.desktopModule.conveyorBeltRef.current):o===i.length-1&&(a&&p||d&&c)?this.focusInputTextElem():(a&&p||d&&c)&&(0,l.focusFilterChip)(this.state,this.appliedFiltersContainerId,o+1,this.desktopModule.conveyorBeltRef.current))},this.onSearchBarClick=e=>{e.stopPropagation();const t=(0,n.countKeywordFilters)(this.searchConfig.options.keywordName,this.state.appliedFiltersArray);this.state.isSmallScreenOrMobile?this.mobileModule.openSmallScreenDrawer():t<this.searchConfig.options.maxKeywordFilters&&this.desktopModule.openSuggestionsPopup(),this.focusInputTextElem()},this.onAddKeywordFilter=async(e,t)=>{const i={description:`Smart Search - Adding Keyword Filter for "${this.state.inputStateValue}"`},o=(0,r.setBusyResolve)(t,i);let s;try{if(!(null==e?void 0:e.trim()))return{bsResolve:o,decoratedKeywordFilterChip:s};const t=this.generateKeywordFilterChip(e.trim());s=await(0,n.decorateFilter)(this.searchConfig,t)}catch(e){(0,p.error)(e)}return{bsResolve:o,decoratedKeywordFilterChip:s}},this.addAppliedFilters=async(e,t)=>{let i=this.state.appliedFiltersArray;if(!(0,n.checkForDuplicateKeywordFilters)(this.searchConfig.options.keywordName,e.value,i))return i=await(0,n.cloneDecoratedFilters)(this.searchConfig,i),t?i.splice(t,0,e):i.push(e),i;this.setState({inputStateValue:""},()=>{this.focusInputTextElem()})},this.addKeywordFilter=async e=>{const t=e.target;this.state.isSmallScreenOrMobile?this.mobileModule.onAddKeywordFilter(this.state.inputStateValue,t):this.desktopModule.onAddKeywordFilter(this.state.inputStateValue,t)},this.setComponentState=async(e,t,i)=>{var o,s,a,r;this.setState(e,()=>{i&&i()});const l=(0,n.buildJetFilterCiterion)(t?(0,n.editedFilterPredicate)():null,e.appliedFiltersArray);if(!(0,n.deepCompare)(this.filterCriterion,l)){this.filterCriterion=l,null===(s=(o=this.component.props).onFilterCriterionChanged)||void 0===s||s.call(o,l);const t=(0,n.generateBookmarkableFiltersToken)(e.appliedFiltersArray);null===(r=(a=this.component.props).onBookmarkableTokenChanged)||void 0===r||r.call(a,t)}},this.derivedStateFromProps=async()=>{var e,t,i,o,s,a,l,d;if(!this.derivedStateFromPropsSemaphore){this.derivedStateFromPropsSemaphore=!0;try{if(!(0,n.deepCompare)(this.suggestions,this.component.props.suggestions)){await this.caretaker.publish(),this.suggestions=this.component.props.suggestions;const s=null===(t=null===(e=this.searchConfig)||void 0===e?void 0:e.options)||void 0===t?void 0:t.recentSearchProviderType,a=null===(o=null===(i=this.searchConfig)||void 0===i?void 0:i.options)||void 0===o?void 0:o.keywordName,n=this.suggestions;this.caretaker=new g.OarsCaretaker({suggestions:n,keywordName:a,recentSearchProviderType:s})}const c=this.searchContext&&!this.suggestionsFilters;if(!(0,n.deepCompare)(this.component.props.searchContext,this.searchContext)||c){const e={description:"Smart Search - resolving search config"},t=(0,r.setBusyResolve)(this.smartSearchContainerRef.current,e);try{this.searchContext=this.component.props.searchContext;const e=new m.ConfigResolver(this.searchContext),i=await(0,m.resolveFromProviderIfNeeded)(this.component.props.searchConfig);this.searchConfig=e.evaluate(i),this.caretaker.keywordName=null===(a=null===(s=this.searchConfig)||void 0===s?void 0:s.options)||void 0===a?void 0:a.keywordName,this.caretaker.recentSearchProviderType=null===(d=null===(l=this.searchConfig)||void 0===l?void 0:l.options)||void 0===d?void 0:d.recentSearchProviderType;const o=this.state.appliedFiltersArray;if((0,r.isEmpty)(this.state.appliedFiltersArray))c&&await this.invokeLifecycleHooks({prevAppliedFilters:o});else{const e=await(0,n.cloneDecoratedFilters)(this.searchConfig,this.state.appliedFiltersArray);await this.setComponentState({appliedFiltersArray:e})}}finally{t()}}}finally{this.derivedStateFromPropsSemaphore=!1}}},this.shouldComponentUpdate=(e,t,i)=>{this.derivedStateFromProps().catch(e=>{(0,p.error)(e)});let o=e.askHint!==this.component.props.askHint||e.autocompleteData!==this.component.props.autocompleteData||e.onBookmarkableTokenChanged!==this.component.props.onBookmarkableTokenChanged||e.onFilterCriterionChanged!==this.component.props.onFilterCriterionChanged||!(0,n.deepCompare)(e.searchConfig,this.component.props.searchConfig)||!(0,n.deepCompare)(e.searchContext,this.component.props.searchContext);if(!o&&(o=t.complexMobilePopupOpened!==this.state.complexMobilePopupOpened||t.complexPopupOpened!==this.state.complexPopupOpened||t.inlineInputValue!==this.state.inlineInputValue||t.inputStateValue!==this.state.inputStateValue||t.isInlineEditActive!==this.state.isInlineEditActive||t.isSmallScreenOrMobile!==this.state.isSmallScreenOrMobile||t.smallScreenDrawerOpen!==this.state.smallScreenDrawerOpen||t.suggestionPopupOpened!==this.state.suggestionPopupOpened||t.userAssistancePopupOpened!==this.state.userAssistancePopupOpened,!o)){let e=(0,n.undecorateFilters)(t.appliedFiltersArray),i=(0,n.undecorateFilters)(this.state.appliedFiltersArray);o=!(0,n.deepCompare)(e,i),o||(e=(0,n.undecorateFilters)(t.selectedFiltersSmallScreen),i=(0,n.undecorateFilters)(this.state.selectedFiltersSmallScreen),o=!(0,n.deepCompare)(e,i))}return o},this.invokeLifecycleHooks=async e=>{const t=(0,r.setBusyResolve)(this.smartSearchContainerRef.current,{description:"Smart Search - running lifecycle hooks"});try{let{appliedFilters:i,prevAppliedFilters:o}=e;i=null!=i?i:this.state.appliedFiltersArray,o=null!=o?o:i;const s=this.caretaker,{lifecycle:a}=this.searchConfig,r=await(0,m.offerUpSuggestionsFilters)(this.searchConfig);this.suggestionsFilters=await(0,n.invokeLifecycleHooks)({lifecycle:a,suggestionsFilters:r,appliedFilters:i,prevAppliedFilters:o,caretaker:s})}finally{t()}},this.seedFiltersFromBookmarkableToken=async e=>{var t;const i=(0,r.getBusyContext)(this.smartSearchContainerRef.current);await i.whenReady();const o=await(0,n.seedFiltersFromBookmarkableToken)(this.searchConfig,e);await(null===(t=this.caretaker)||void 0===t?void 0:t.seedFiltersFromBookmarkableToken({filters:o})),Array.isArray(o)&&(await this.setComponentState({appliedFiltersArray:o,selectedFiltersSmallScreen:o.slice(0),suggestionPopupOpened:!1,complexMobilePopupOpened:!1,complexPopupOpened:!1,userAssistancePopupOpened:!1}),await i.whenReady())},this.activityMonitorFocusIn=e=>{var t;null===(t=this.activityMonitor)||void 0===t||t.clear(),this.activityMonitor=void 0},this.activityMonitorFocusOut=e=>{var t;const{currentTarget:i}=e;i.contains(document.activeElement)||(null===(t=this.activityMonitor)||void 0===t||t.clear(),this.activityMonitor=new y.MacroTaskRunner(4e3),this.activityMonitor.when.then(e=>{e&&this.publishSearchActivity().catch(e=>{(0,p.error)(e)}),this.activityMonitor=void 0}))},this.publishSearchActivity=async()=>{var e;await(null===(e=this.caretaker)||void 0===e?void 0:e.publish());const t={description:"Smart Search - waiting 500ms for OARS to process publish event."},i=(0,r.setBusyResolve)(this.smartSearchContainerRef.current,t),o=new y.MacroTaskRunner(500);await o.when,i(),await this.invokeLifecycleHooks({})}}init(){var e,t,i,o;this._desktopModule=new s.DesktopModule(this),this._mobileModule=new a.MobileModule(this),this.appliedFiltersContainerId=this.component.uniquePrefix+"-applied-filters",this.suggestionsPopupId=this.component.uniquePrefix+"-suggestions-popup",this.searchContext={$instance:(new Date).getTime()};const n=new m.ConfigResolver(this.searchContext);this.searchConfig=n.evaluate({}),this.suggestions=this.component.props.suggestions;const r=null===(t=null===(e=this.searchConfig)||void 0===e?void 0:e.options)||void 0===t?void 0:t.keywordName,l=null===(o=null===(i=this.searchConfig)||void 0===i?void 0:i.options)||void 0===o?void 0:o.recentSearchProviderType,d=this.suggestions;this.caretaker=new g.OarsCaretaker({suggestions:d,keywordName:r,recentSearchProviderType:l}),this.defaultEmptyAutocompleteData=new f([],{keyAttributes:"key"})}get component(){return this.parentModule}get desktopModule(){return this._desktopModule}get mobileModule(){return this._mobileModule}render(){const e=this.state.isInlineEditActive?this.state.inlineInputValue:this.state.inputStateValue,t=(0,c.getShouldSuggestionPopupDisplay)(e,this.suggestionsFilters,this.searchConfig.options.autocompleteTextFilterMinChars),o=this.state.isSmallScreenOrMobile?{onKeyPress:this.mobileModule.handleSearchBarKeyPress,role:"search"}:{};return(0,i.h)("div",{class:"oj-sp-smart-search-bar-wrapper",ref:this.smartSearchContainerRef,onfocusin:this.activityMonitorFocusIn,onfocusout:this.activityMonitorFocusOut},(0,i.h)("div",Object.assign({className:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sp-helper-overflow-hidden oj-sp-smart-search-bar oj-sm-padding-4x-horizontal",ref:this.inputWrapperRef},o),(0,i.h)(h.default,{onClick:this.onSearchBarClick,tabIndex:this.state.isSmallScreenOrMobile?0:-1}),this.state.isSmallScreenOrMobile?(0,i.h)(i.Fragment,null,this.state.appliedFiltersArray.length>0?(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center"},this.mobileModule.renderSmallScreenFilterCount()):null,(0,i.h)("div",{class:"oj-sm-margin-4x-start oj-text-color-secondary oj-sp-smart-search-mobile-placeholder",onClick:this.onSearchBarClick},this.component.props.askHint)):(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-align-items-center oj-sp-helper-overflow-hidden oj-sp-applied-chips-and-input-container"},this.desktopModule.renderFilterChipCarousel(),this.renderSearchInput())),this.state.isSmallScreenOrMobile?(0,i.h)("div",null,this.mobileModule.renderSmallScreenDrawer(t)):(0,i.h)(i.Fragment,null,(0,i.h)("div",null,this.desktopModule.renderUserAssistancePopup()),(0,i.h)("div",null,this.desktopModule.renderComplexFilterPopup()),(0,i.h)("div",null,t?this.desktopModule.renderSuggestionPopup(e):null)))}generateKeywordFilterChip(e){return{name:this.searchConfig.options.keywordName,data:{text:e}}}getContextByNode(e){let t=void 0;const i=(0,n.getAppliedFiltersForPlatform)(this.state),o=document.getElementById(this.appliedFiltersContainerId);return t=(0,n.getDataForNodeFromAppliedFilters)(o,e,i),t||(t=this.desktopModule.getContextByNode(e),t||(t=this.mobileModule.getContextByNode(e),t))}async updateComplexFilter(e,t){var i,o;let s,a=(0,n.getAppliedFiltersForPlatform)(this.state);a=await(0,n.cloneDecoratedFilters)(this.searchConfig,a);const{key:r}=e;e.key&&(s=a.find(e=>e.id===r)),s.ghost.data=t;if(!(null!==(i=await(null==s?void 0:s.validate()))&&void 0!==i&&i))return!1;await(null===(o=this.caretaker)||void 0===o?void 0:o.seedFiltersFromBookmarkableToken({filters:a}));const l=this.state.isSmallScreenOrMobile?{appliedFiltersArray:a,smallScreenDrawerOpen:!1}:{appliedFiltersArray:a};return await this.setComponentState(l),!0}setup(){this.desktopModule.setupResizeObserver(),this.screenRange.subscribe(e=>{this.mobileModule.smallScreenDrawerRef.current&&(this.mobileModule.smallScreenDrawerRef.current.opened=!1,this.mobileModule.smallScreenComplexDrawerRef.current.opened=!1),this.setState({isSmallScreenOrMobile:"sm"===e||(0,r.isMobilePhoneDevice)(),inputStateValue:"",smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1,suggestionPopupOpened:!1,complexPopupOpened:!1,complexMobilePopupOpened:!1})})}teardown(){this.desktopModule.teardownResizeObserver(),this.mobileModule.smallScreenDrawerRef.current&&(this.mobileModule.smallScreenDrawerRef.current.opened=!1,this.mobileModule.smallScreenComplexDrawerRef.current.opened=!1),this.caretaker.publish()}setState(e,t){const i=e.appliedFiltersArray;if(Array.isArray(i)){const e=this.state.appliedFiltersArray;this.invokeLifecycleHooks({appliedFilters:i,prevAppliedFilters:e}).catch(e=>{(0,p.error)(e)})}super.setState(e,t)}}t.SmartSearchModule=b})),define("css!oj-sp/smart-search/smart-search-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/smart-search/smart-search",["require","exports","preact","oj-sp/common-util/common-util","ojs/ojvcomponent","./module/SmartSearchModule","css!./smart-search-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSearch=void 0;let n=class extends i.Component{constructor(e){var t;super(e),this.uniquePrefix=null!==(t=e.id)&&void 0!==t?t:(0,s.getUniqueId)(),this.module=new a.SmartSearchModule(this),this.state={inputStateValue:"",appliedFiltersArray:[],selectedFiltersSmallScreen:[],isSmallScreenOrMobile:"sm"===this.module.screenRange()||(0,o.isMobilePhoneDevice)(),smallScreenDrawerOpen:!1,userAssistancePopupOpened:!1,inlineInputValue:"",isInlineEditActive:!1,suggestionPopupOpened:!1,complexPopupOpened:!1,complexMobilePopupOpened:!1}}componentDidMount(){this.module.setup()}componentWillUnmount(){this.module.teardown()}render(){return this.module.render()}shouldComponentUpdate(e,t,i){return this.module.shouldComponentUpdate(e,t,i)}getContextByNode(e){return this.module.getContextByNode(e)}seedFiltersFromBookmarkableToken(e){return this.module.seedFiltersFromBookmarkableToken(e)}async updateComplexFilter(e,t){return await this.module.updateComplexFilter(e,t)}};n.defaultProps={askHint:"Search",suggestions:{subject:void 0,policyHint:"mru"}},n._metadata={properties:{askHint:{type:"string"},filterCriterion:{type:"object",readOnly:!0,writeback:!0},autocompleteData:{type:"DataProvider"},searchConfig:{type:"object"},searchContext:{type:"object"},bookmarkableToken:{type:"string",readOnly:!0,writeback:!0},suggestions:{type:"object",properties:{subject:{type:"string"},policyHint:{type:"string",enumValues:["mru","mfu","ai"]}}}},extension:{_WRITEBACK_PROPS:["filterCriterion","bookmarkableToken"],_READ_ONLY_PROPS:["filterCriterion","bookmarkableToken"],_OBSERVED_GLOBAL_PROPS:["id"]},methods:{getContextByNode:{},seedFiltersFromBookmarkableToken:{},updateComplexFilter:{}}},n=__decorate([(0,s.customElement)("oj-sp-smart-search"),__metadata("design:paramtypes",[Object])],n),t.SmartSearch=n})),define("oj-sp/smart-search/loader",["require","exports","./smart-search"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartSearch=void 0,Object.defineProperty(t,"SmartSearch",{enumerable:!0,get:function(){return i.SmartSearch}})})),define("oj-sp/smart-search/default-filters/KeywordFilter",["require","exports","oj-sp/common-util/common-util","ojs/ojlogger"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordFilter=void 0,t.KeywordFilter={idConverter:e=>{var t;const{name:i,data:o}=e;return`${i},${null===(t=null==o?void 0:o.text)||void 0===t?void 0:t.toUpperCase()}`},displayValueConverter:e=>{var t;const{data:i}=e;return null!==(t=i.text)&&void 0!==t?t:""},filterCriterionConverter:e=>{const{data:t,name:i}=e,{text:o}=t;return{text:o,$tag:i,matchBy:"phrase"}},description:"Keyword filter",defaultData:{text:null},validate:async(e,t,s)=>{const{text:a}=t;return!(!(0,i.isString)(a)||0==a.length)||((0,o.error)("KeywordFilter is missing text to search on."),!1)}}})),define("oj-sp/smart-search/default-filters/ToggleFilter",["require","exports","oj-sp/common-util/common-util","ojs/ojlogger"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleFilter=void 0,t.ToggleFilter={idConverter:e=>{const{name:t}=e;return t},displayValueConverter:e=>{},filterCriterionConverter:e=>{const{data:t,options:i,name:o}=e;return Object.assign(Object.assign({},i.criteria),{$tag:o})},description:"Toggle filter",defaultData:{},validate:async(e,t,s)=>{const{criteria:a}=s;return!!(0,i.isObject)(a)||((0,o.error)(`Toggle filter ${e} is invalid due to missing criteria options`),!1)}}})),define("oj-sp/smart-search/components/complex-filters/numeric-range",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","oj-sp/smart-search/default-filters/FiltersCommon","ojs/ojslider"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const{activeFilter:t,onDataChanged:r}=e.context,{label:l,options:d,data:c}=t,p=(0,o.useMemo)(()=>Object.assign({},s),[s]),u=null===d.min||isNaN(d.min)?0:d.min,h=null===d.max||isNaN(d.max)?c.end+100:d.max,[m,g]=(0,o.useState)(c),[y,f]=(0,o.useState)(),b=null!=l?l:"Range",v=(0,o.useCallback)(e=>{const i=Object.assign({},c),o=Object.assign({},i);o.start=e.detail.value.start,o.end=e.detail.value.end,g(o),r({data:o,previousData:i,activeFilter:t})},[m]),j=(0,o.useCallback)(e=>{const{start:t,end:i}=e.detail.value,o=(0,n.getFormattedNumber)(t),s=(0,n.getFormattedNumber)(i);f({start:o,end:s})},[f]);return(0,i.h)("div",{class:"oj-sm-padding-3x-vertical"},b&&y?(0,i.h)("div",{class:"oj-flex oj-sm-justify-content-space-between oj-text-color-primary oj-typography-body-sm oj-typography-semi-bold oj-sm-padding-2x-bottom"},(0,i.h)("span",{class:"oj-sm-flex-1 oj-sm-margin-4x-end"},b),(0,i.h)("span",null,y.start&&y.end?a.applyParameters(p.rangeSeparator,{from:y.start,to:y.end}):"")):null,(0,i.h)("oj-range-slider",{min:u,max:h,value:m,labelHint:b,labelEdge:"none",class:"oj-sp-smart-search-numeric-range-slider",onvalueChanged:v,ontransientValueChanged:j}),d&&d.min&&d.max?(0,i.h)("div",{class:"oj-flex oj-sm-justify-content-space-between oj-text-color-secondary oj-typography-body-sm oj-sm-padding-2x-top"},(0,i.h)("span",null,(0,n.getFormattedNumber)(u)),(0,i.h)("span",null,(0,n.getFormattedNumber)(h))):null)}})),define("oj-sp/smart-search/default-filters/NumericRangeFilter",["require","exports","preact","./FiltersCommon","../components/complex-filters/numeric-range","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojformlayout","ojs/ojslider"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumericRangeFilter=void 0;const l=Object.assign({},n);t.NumericRangeFilter={idConverter:e=>{const{name:t}=e;return t},displayValueConverter:e=>{const{data:t}=e,{start:i,end:s}=t;if(null===i||null===s||isNaN(i)||isNaN(s))return"";const a=(0,o.getFormattedNumber)(i),n=(0,o.getFormattedNumber)(s);return r.applyParameters(l.rangeSeparator,{from:a,to:n})},filterCriterionConverter:e=>{const{data:t,options:i,name:s}=e,{start:a=null,end:n=null}=t;if(null===a&&null===n)return null;return(0,o.buildRangeJetFilterCriterion)(i.field,s,a,n)},description:"Numeric range filter.",defaultData:{start:null,end:null},filterUITemplate:e=>(0,i.h)(s.default,{key:e.activeFilter.id,context:e}),validate:async(e,t,i)=>{const{start:o,end:s}=t,{max:n,min:r}=i;if(null===o||isNaN(o))return(0,a.error)(`NumericRangeFilter ${e} has an invalid start number, ${o}.`),!1;if(null===s||isNaN(s))return(0,a.error)(`NumericRangeFilter ${e} has an invalid end number, ${s}.`),!1;if(o>s)return(0,a.error)(`NumericRangeFilter ${e} start, ${o} is greater than the end, ${s}.`),!1;if("number"==typeof n&&"number"==typeof n){if(isNaN(r))return(0,a.error)(`NumericRangeFilter ${e} has an invalid min number, ${r}.`),!1;if(isNaN(n))return(0,a.error)(`NumericRangeFilter ${e} has an invalid max number, ${n}.`),!1;if(r>n)return(0,a.error)(`NumericRangeFilter ${e} min, ${r} is greater than the max, ${n}.`),!1;if(o<r)return(0,a.error)(`NumericRangeFilter ${e} start, ${o} is less than the min, ${r}.`),!1;if(s>n)return(0,a.error)(`NumericRangeFilter ${e} end, ${s} is greater than the max, ${n}.`),!1}return!0}}})),define("oj-sp/smart-search/components/complex-filters/date-range",["require","exports","preact","preact/hooks","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojdatetimepicker","ojs/ojformlayout"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const{activeFilter:t,onDataChanged:n}=e.context,{label:r,options:l,data:d}=t,c=(0,o.useMemo)(()=>Object.assign({},a),[a]),p=c.startDateRange,u=c.endDateRange,[h,m]=(0,o.useState)(d),g=(0,o.useRef)(),y=(0,o.useCallback)(e=>{const i=Object.assign({},h),o=Object.assign({},i);o.start=e.detail.value,m(o),n({data:o,previousData:i,activeFilter:t})},[h]),f=(0,o.useCallback)(e=>{const i=Object.assign({},h),o=Object.assign({},i);o.end=e.detail.value,m(o),n({data:o,previousData:i,activeFilter:t})},[h]);return(0,o.useEffect)(()=>{h.start&&(null==g||g.current.validate().catch(e=>{(0,s.error)(e)}))},[h.start,g.current]),(0,i.h)("oj-form-layout",{"max-columns":"2",direction:"column","aria-label":r,userAssistanceDensity:"compact"},(0,i.h)("oj-input-date",{"data-id":"start",min:l.min,max:l.max,required:!0,value:h.start,labelHint:p,displayOptions:{validatorHint:"none"},onvalueChanged:y}),(0,i.h)("oj-input-date",{ref:g,class:"oj-sm-padding-4x-top","data-id":"end",min:h.start,max:l.max,required:!0,value:h.end,labelHint:u,displayOptions:{validatorHint:"none"},onvalueChanged:f}))}})),define("oj-sp/smart-search/default-filters/DateRangeFilter",["require","exports","preact","./FiltersCommon","ojs/ojconverter-datetime","ojs/ojconverterutils-i18n","oj-sp/common-util/common-util","../components/complex-filters/date-range","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojformlayout","ojs/ojdatetimepicker"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateRangeFilter=void 0;const p=Object.assign({},d);t.DateRangeFilter={idConverter:e=>{const{name:t}=e;return t},displayValueConverter:e=>{const{data:t,options:i}=e,o=new s.IntlDateTimeConverter,a=o.format(t.start),r=o.format(t.end);let l="";return(0,n.isEmpty)(a)&&(0,n.isEmpty)(r)||(l=c.applyParameters(p.rangeSeparator,{from:a,to:r})),l},filterCriterionConverter:e=>{function t(e){return(0,n.isString)(e)?e.split("T")[0]:null}const{data:i,options:s,name:a}=e;let{start:r=null,end:l=null}=i;if(null===r&&null===l)return null;r=t(r),l=t(l),"date-time"===s.format&&(r+="T00:00:00.000Z",l+="T23:59:59.999Z");return(0,o.buildRangeJetFilterCriterion)(s.field,a,r,l)},description:"Date range filter.",defaultOptions:{format:"date"},defaultData:{start:null,end:null},filterUITemplate:e=>(0,i.h)(r.default,{key:e.activeFilter.id,context:e}),validate:async(e,t,i)=>{const{start:o,end:s}=t,{max:n,min:r}=i;let d=void 0;try{d=a.IntlConverterUtils.isoToDate(o)}catch(t){return(0,l.error)(`DateRangeFilter ${e} has an invalid ISO formated start date, "${o}".`,t),!1}let c=void 0;try{c=a.IntlConverterUtils.isoToDate(s)}catch(t){return(0,l.error)(`DateRangeFilter ${e} has an invalid ISO formated end date, "${s}".`,t),!1}if(isNaN(d.getTime()))return(0,l.error)(`DateRangeFilter ${e} has an invalid ISO formated start date, "${o}".`),!1;if(isNaN(c.getTime()))return(0,l.error)(`DateRangeFilter ${e} has an invalid ISO formated end date, "${s}".`),!1;if(d.getTime()>c.getTime())return(0,l.error)(`DateRangeFilter ${e} start date, "${o}" is greater than the end, "${s}".`),!1;if(n&&r){const t=a.IntlConverterUtils.isoToDate(n),i=a.IntlConverterUtils.isoToDate(r);if(isNaN(i.getTime()))return(0,l.error)(`DateRangeFilter ${e} has an invalid ISO formated min date, "${r}".`),!1;if(isNaN(t.getTime()))return(0,l.error)(`DateRangeFilter ${e} has an invalid ISO formated max date, "${n}".`),!1;if(i.getTime()>t.getTime())return(0,l.error)(`DateRangeFilter ${e} min date, "${r}" is greater than the max, "${n}".`),!1;if(d.getTime()<i.getTime())return(0,l.error)(`DateRangeFilter ${e} start date, "${o}" is less than the min, "${r}".`),!1;if(c.getTime()>t.getTime())return(0,l.error)(`DateRangeFilter ${e} end date, "${s}" is greater than the max, "${n}".`),!1}return!0}}})),define("oj-sp/smart-search/components/complex-filters/select-single",["require","exports","preact","preact/hooks","oj-sp/smart-search/default-filters/FiltersCommon","ojs/ojlistdataproviderview","ojs/ojlogger","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojformlayout","ojs/ojselectsingle"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{var t;const{activeFilter:c,appliedFilters:p,onDataChanged:u}=e.context,{label:h,options:m,data:g,ghost:y}=c,[f,b]=(0,o.useState)(g.value),v=(0,o.useMemo)(()=>Object.assign({},l),[l]);let j=null;"sameAsSearch"===(null!==(t=m.optionsSource)&&void 0!==t?t:"static")&&(j=(0,s.buildJetFilterCriterionForActiveFilter)(c,p));const A=new a(m.optionsData,{filterCriterion:j}),C=(0,o.useCallback)(e=>{const t=Object.assign({},g),i=Object.assign({},t);i.value=e.detail.value;const o=(0,r.setBusyResolve)(e.target,{description:"SelectSingleFilter - fetchValueItems on value changed"});(0,s.fetchValueItems)(A,[i.value]).then(e=>{o(),i.valueItem=e[0],b(i.value),u({data:i,previousData:t,activeFilter:c})}).catch(e=>{o(),(0,n.error)(e)})},[f]);return(0,i.h)("oj-select-single",{data:A,itemText:e=>(0,s.valueForPath)(m.optionsKeys.label,e.data),labelEdge:"inside",value:f,onvalueChanged:C,labelHint:h,required:!0},(0,i.h)("template",{slot:"itemTemplate","data-oj-as":"item",render:e=>{var t;let o;(0,r.isString)(m.optionsKeys.count)&&(o=(0,s.valueForPath)(m.optionsKeys.count,e.data));const a=o&&!isNaN(o)&&null!=o;return(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap oj-sm-justify-content-space-between oj-sm-padding-0","data-item-value":null===(t=e.data)||void 0===t?void 0:t.value},(0,i.h)("span",{class:"oj-typography-body-md oj-text-color-primary"},(0,s.valueForPath)(m.optionsKeys.label,e.data)),a&&(0,i.h)("span",{class:"oj-typography-body-sm oj-text-color-secondary oj-sm-padding-8x-start"},d.applyParameters(v.filterResultsCount,{count:(0,s.getFormattedNumber)(o)})))}}))}})),define("oj-sp/smart-search/default-filters/SelectSingleFilter",["require","exports","preact","./FiltersCommon","../components/complex-filters/select-single","oj-sp/common-util/common-util","ojs/ojlogger","./FiltersCommon","ojs/ojformlayout","ojs/ojradioset","ojs/ojoption"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSingleFilter=void 0,t.SelectSingleFilter={idConverter:e=>{const{name:t}=e;return t},displayValueConverter:e=>{var t;const{data:i,options:s}=e;let a;if(null===(t=null==i?void 0:i.valueItem)||void 0===t?void 0:t.data){const e=s.optionsKeys.label;a=(0,o.valueForPath)(e,i.valueItem.data)}else a=i.value;return a=null!=a?a:"",""+a},filterCriterionConverter:e=>{const{data:t,options:i,name:s}=e;if(null===t.value)return null;return(0,o.buildMultiMatchJetFilterCriterion)(i.field,s,[t.value])},description:"Select single SelectSingle filter.",defaultData:{value:null},defaultOptions:{optionsKeys:{value:"value",label:"label",count:"count"},optionsSource:"static"},filterUITemplate:e=>(0,i.h)(s.default,{key:e.activeFilter.id,context:e}),validate:async(e,t,i)=>{const{value:o}=t,{optionsData:s}=i;if((0,a.isEmpty)(o))return(0,n.error)(`SelectSingleFilter ${e} is missing a value.`),!1;if(!s)return(0,n.error)(`SelectSingleFilter ${e} is missing a options data provider.`),!1;const r={keys:new Set([o])};return!!(await s.fetchByKeys(r)).results.has(o)||((0,n.error)(`SelectSingleFilter ${e} value, ${o}, doesn't existing at the data layer.`),!1)},fetchVolatileData:async e=>{const{data:t,options:i}=e,{optionsData:o}=i,{value:s}=t,a=(await(0,r.fetchValueItems)(o,[s]))[0];return Object.assign(Object.assign({},t),{valueItem:a})}}})),define("oj-sp/smart-search/components/complex-filters/select-multiple",["require","exports","preact","preact/hooks","oj-sp/smart-search/default-filters/FiltersCommon","ojs/ojlistdataproviderview","ojs/ojlogger","oj-sp/common-util/common-util","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","oj-c/select-multiple","oj-c/list-item-layout","oj-c/selector"],(function(e,t,i,o,s,a,n,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{var t;const c=(0,o.useMemo)(()=>Object.assign({},l),[l]),{activeFilter:p,appliedFilters:u,onDataChanged:h}=e.context,{label:m,options:g,data:y}=p,f=new Set;y.values.forEach(e=>f.add(e));const[b,v]=(0,o.useState)(f);let j=null;"sameAsSearch"===(null!==(t=g.optionsSource)&&void 0!==t?t:"static")&&(j=(0,s.buildJetFilterCriterionForActiveFilter)(p,u));const A=new a(g.optionsData,{filterCriterion:j}),C=(0,o.useCallback)(e=>{const t=Object.assign({},y),i=Object.assign({},t);i.values=Array.from(e.detail.value);const o=(0,r.setBusyResolve)(e.target,{description:"SelectMultipleFilter - fetchValueItems on value changed"});(0,s.fetchValueItems)(A,i.values).then(e=>{o(),i.valueItems=e,i.values.forEach(e=>f.add(e)),v(f),h({data:i,previousData:t,activeFilter:p})}).catch(e=>{o(),(0,n.error)(e)})},[b]);return(0,i.h)("oj-c-select-multiple",{data:A,itemText:e=>(0,s.valueForPath)(g.optionsKeys.label,e.data),required:!0,labelHint:m,value:f,onvalueChanged:C,class:"oj-form-control-max-width-md"},(0,i.h)("template",{slot:"itemTemplate","data-oj-as":"item",render:e=>{var t;let o;(0,r.isString)(g.optionsKeys.count)&&(o=(0,s.valueForPath)(g.optionsKeys.count,e.item.data));const a=o&&!isNaN(o)&&null!=o;return(0,i.h)("oj-c-list-item-layout",{"data-item-value":null===(t=e.item.data)||void 0===t?void 0:t.value},(0,i.h)("oj-c-selector",{selectedKeys:e.selectedKeys,onselectedKeysChanged:e.onSelectedKeysChanged,selectionMode:"multiple",rowKey:e.item.metadata.key,slot:"selector","aria-label":(0,s.valueForPath)(g.optionsKeys.label,e.item.data)}),(0,i.h)("span",{class:"oj-typography-body-md oj-text-color-primary oj-flex oj-sm-justify-content-space-between"},(0,s.valueForPath)(g.optionsKeys.label,e.item.data)),a&&(0,i.h)("span",{slot:"metadata",class:"oj-typography-body-sm oj-text-color-secondary"},d.applyParameters(c.filterResultsCount,{count:(0,s.getFormattedNumber)(o)})))}}))}})),define("oj-sp/smart-search/default-filters/SelectMultipleFilter",["require","exports","preact","./FiltersCommon","../components/complex-filters/select-multiple","./FiltersCommon","ojs/ojlogger","ojs/ojformlayout","ojs/ojcheckboxset","ojs/ojoption"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectMultipleFilter=void 0,t.SelectMultipleFilter={idConverter:e=>{const{name:t}=e;return t},displayValueConverter:e=>{const{data:t,options:i}=e;if(!Array.isArray(t.values)||0===t.values.length||!Array.isArray(t.valueItems)||0===t.valueItems.length)return"";if(t.values.length<2){const{valueItems:e}=t,s=i.optionsKeys.label;return(0,o.valueForPath)(s,e[0].data)}return`(${(0,o.getFormattedNumber)(t.values.length)})`},filterCriterionConverter:e=>{const{data:t,options:i,name:s}=e;if(!Array.isArray(t.values))return null;return(0,o.buildMultiMatchJetFilterCriterion)(i.field,s,t.values)},description:"Multiple select filter.",defaultData:{values:[]},defaultOptions:{optionsKeys:{value:"value",label:"label",count:"count"},optionsSource:"static"},filterUITemplate:e=>(0,i.h)(s.default,{key:e.activeFilter.id,context:e}),validate:async(e,t,i)=>{const{values:o}=t,{optionsData:s}=i;if(!Array.isArray(o)||0===o.length)return(0,n.error)(`SelectMultipleFilter ${e} is missing a value.`),!1;if(!s)return(0,n.error)(`SelectMultipleFilter ${e} is missing a options data provider.`),!1;const a={keys:new Set(o)};return(await s.fetchByKeys(a)).results.size===o.length||((0,n.error)(`SelectMultipleFilter ${e} one or more values, ${o.join(",")}, doesn't existing at the data layer.`),!1)},displayVerboseValueConverter:e=>{const{data:t,options:i}=e;if(Array.isArray(t.values)&&0!==t.values.length){const e=i.optionsKeys.label,s=[],{valueItems:a=[]}=t;return a.forEach(t=>{const i=(0,o.valueForPath)(e,t.data);s.push(i)}),s.join(", ")}return""},fetchVolatileData:async e=>{const{data:t,options:i}=e,{optionsData:o}=i,{values:s}=t,n=await(0,a.fetchValueItems)(o,s);return Object.assign(Object.assign({},t),{valueItems:n})}}})),define("oj-sp/smart-search/components/complex-filters/big-numeric-range",["require","exports","preact","preact/hooks","ojs/ojconverter-nativenumber","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojinputtext"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>{const{activeFilter:t,onDataChanged:n}=e.context,{label:r,options:l,data:d}=t,{converterOptions:c}=l,p=(0,o.useMemo)(()=>Object.assign({},a),[a]),u=new s.BigDecimalStringConverter(c),[h,m]=(0,o.useState)(d),g=p.startNumericRange,y=p.endNumericRange,f=(0,o.useCallback)(e=>{const i=Object.assign({},h),o=Object.assign({},h);o.start=e.detail.value,m(o),n({data:o,previousData:i,activeFilter:t})},[h,n]),b=(0,o.useCallback)(e=>{const i=Object.assign({},h),o=Object.assign({},i);o.end=e.detail.value,m(o),n({data:o,previousData:i,activeFilter:t})},[h,n]);return(0,i.h)("oj-form-layout",{maxColumns:1,direction:"column","aria-label":r,userAssistanceDensity:"compact"},(0,i.h)("oj-input-text",{"data-id":"start",required:!0,value:h.start,labelHint:g,onvalueChanged:f,converter:u}),(0,i.h)("oj-input-text",{"data-id":"end",required:!0,value:h.end,labelHint:y,onvalueChanged:b,converter:u}))}})),define("oj-sp/smart-search/default-filters/BigNumericRangeFilter",["require","exports","preact","ojs/ojconverter-nativenumber","./FiltersCommon","../components/complex-filters/big-numeric-range","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","ojs/ojformlayout","ojs/ojslider"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BigNumericRangeFilter=void 0;const d=Object.assign({},r);t.BigNumericRangeFilter={idConverter:e=>{const{name:t}=e;return t},displayValueConverter:e=>{const{data:t,options:i}=e,{start:s,end:a}=t;if(null===s||null===a)return"";const n=new o.BigDecimalStringConverter(i.converterOptions),r=n.format(s),c=n.format(a);return l.applyParameters(d.rangeSeparator,{from:r,to:c})},filterCriterionConverter:e=>{const{data:t,options:i,name:o}=e,{start:a=null,end:n=null}=t;if(null===a&&null===n)return null;return(0,s.buildRangeJetFilterCriterion)(i.field,o,a,n)},description:"Big Numeric Range Filter.",defaultData:{start:null,end:null},defaultOptions:{converterOptions:{style:"decimal",useGrouping:!0,maximumFractionDigits:0}},filterUITemplate:e=>(0,i.h)(a.default,{key:e.activeFilter.id,context:e}),validate:async(e,t,i)=>{const{start:s,end:a}=t;if(null===s)return(0,n.error)(`BigNumericRangeFilter ${e} has an invalid start number, ${s}.`),!1;if(null===a)return(0,n.error)(`BigNumericRangeFilter ${e} has an invalid end number, ${a}.`),!1;const r=new o.BigDecimalStringConverter(i.converterOptions);try{r.parse(s)}catch(t){return(0,n.error)(`BigNumericRangeFilter ${e} has an invalid start number, ${s}.`),!1}try{r.parse(a)}catch(t){return(0,n.error)(`BigNumericRangeFilter ${e} has an invalid end number, ${a}.`),!1}return!0}}})),define("oj-sp/smart-search/strategies/BossSearchCommons",["require","exports","ojs/ojlogger"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setValueForPath=t.valueForPath=void 0,t.valueForPath=function(e,t){const o=e.split(".");let s=t;for(const t of o){if(!Object.keys(s).includes(t)){const o=JSON.stringify(s);return void(0,i.warn)(`valueForPath on "${o}" is missing property "${t}" in evaluating field path "${e}".`)}s=s[t]}return s},t.setValueForPath=function(e,t,i){var o;const s=e.split(".");let a=i;for(let e=0;e<s.length-1;e++){const t=s[e];a=null!==(o=a[t])&&void 0!==o?o:a[t]={}}a[s[s.length-1]]=t}})),define("oj-sp/smart-search/strategies/BossSearchFilterBuilder",["require","exports"],(function(e,t){"use strict";function i(e,t,r){if(e&&"object"==typeof e){if(Array.isArray(e)&&e.length>0)return i({op:a.Logical.and.op,criteria:e},t,r);if(Array.isArray(e.criteria)&&e.criteria.length>0||e.criterion){const o=(e.criteria||[e.criterion]).reduce((e,o)=>[...e,i(o,t,r)],[]).filter(e=>e.length);let s;return s=e.op===a.Logical.exists.op&&e.attribute&&o.length>0?`${e.attribute}[${o.join(` ${a.Logical.and.op} `)}]`:o.length>0?o.join(` ${e.op===a.Logical.or.op?a.Logical.or.val:a.Logical.and.val} `):"",s?`(${s})`:s}return function(e,t,r){if(null!==e.text&&void 0!==e.text)return function(e,t,o){const s=t&&t[l.VB_TEXT_FILTER_ATTRS]||[];if(Array.isArray(s)&&null!==e.text&&void 0!==e.text){const n={op:a.Logical.or.op,criteria:[]};return"string"==typeof e.text&&"phrase"===e.matchBy?o.keywords.push(e.text):"string"==typeof e.text&&(o.autocomplete?o.autocomplete.push(e.text):s.forEach(t=>{const i={op:a.SCIM.$sw,attribute:t,value:e.text};n.criteria.push(i)})),i(n,t,o)}return""}(e,t,r);if(null===e.attribute||void 0===e.attribute)return function(e,t,o){const s=(e,t,i,o)=>i&&"object"==typeof i&&!Array.isArray(i)?Object.entries(i).reduce((i,[a,n])=>"object"==typeof n?i.concat(s(e,`${t}.${a}`,n,o)):i.concat({op:e,attribute:`${t}.${a}`,value:n,collationOptions:o}),[]):[{op:e,attribute:t,value:i,collationOptions:o}];if(e&&"object"==typeof e&&!Array.isArray(e)&&e.op&&e.value&&"object"==typeof e.value&&!Array.isArray(e.value)){const n={op:a.Logical.and.op,criteria:[]};return Object.keys(e.value).forEach(t=>{const i=s(e.op,t,e.value[t],e.collationOptions);n.criteria.push(...i)}),i(n,t,o)}return""}(e,t,r);return function(e){let t="",i="",r="";if(i=a.SCIM[e.op]||i,!i&&e.op){let t=e.op;t.startsWith(s.TILDE)&&(t=e.op.substring(1),r=s.TILDE),i=Object.values(a.Comparison).includes(t)||Object.values(a.SCIM).includes(t)?t:i}r=(e.collationOptions||{}).sensitivity===l.SENSITIVITY_ACCENT?s.TILDE:r;let d="";switch(i){case a.SCIM.$sw:d=`'${e.value}${s.PERCENTAGE}'`,t=`${r}${a.Comparison.like} ${d}`;break;case a.SCIM.$ew:d=`'${s.PERCENTAGE}${e.value}'`,t=`${r}${a.Comparison.like} ${d}`;break;case a.SCIM.$co:d=`'${s.PERCENTAGE}${e.value}${s.PERCENTAGE}'`,t=`${r}${a.Comparison.like} ${d}`;break;case a.SCIM.$pr:case a.Comparison.isNotNull:t=`${a.SCIM.$ne} ${n.NULL}`;break;case a.Comparison.isNull:t=`${a.SCIM.$eq} ${n.NULL}`;break;case a.Comparison.in:if(Array.isArray(e.value)){const i=e.value.map(e=>o(e)).join(s.COMMA);t=`${r}${e.op} (${i})`}else console.log("skipping, value is not supported by IN operator:",e.value);break;default:t=i?`${r}${i} ${o(e.value)}`:""}return t?`${e.attribute} ${t}`:t}(e)}(e,t,r)}}function o(e){const t="string"==typeof e&&e.replace(r.SINGLE_QUOTE,n.DOUBLE_QUOTES);return"string"==typeof t?`'${t}'`:e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildFilterExpression=void 0,t.buildFilterExpression=i;const s={PERCENTAGE:"%",TILDE:"~",COMMA:","},a={SCIM:{$eq:"=",$ne:"!=",$gt:">",$ge:">=",$lt:"<",$le:"<=",$sw:"$sw",$ew:"$ew",$co:"$co",$pr:"$pr"},Comparison:{in:"IN",like:"LIKE",isNull:"IS NULL",isNotNull:"IS NOT NULL"},Logical:{or:{op:"$or",val:"or"},and:{op:"$and",val:"and"},exists:{op:"$exists",val:"exists"}}},n={DOUBLE_QUOTES:"''",NULL:"null"},r={SINGLE_QUOTE:/'/g},l={VB_TEXT_FILTER_ATTRS:"vb-textFilterAttributes",SENSITIVITY_ACCENT:"accent"}})),define("oj-sp/smart-search/strategies/BossSearchAggregations",["require","exports","./BossSearchFilterBuilder","oj-sp/common-util/common-util","./BossSearchCommons"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeLovDefaultValuesAggregations=t.buildLovDefaultValuesAggregations=t.computeBigRangeFilterDefaultValuesAggregations=t.computeRangeFilterDefaultValuesAggregations=t.buildRangeFilterDefaultValuesAggregations=t.applyFilterCountAggregations=t.buildFilterCountAggregations=void 0,t.buildFilterCountAggregations=function(e,t){const{jetFilterCriterion:o,name:a}=e;if(o){const e={autocomplete:[],keywords:[]},n={type:"filter",target:{filter:(0,i.buildFilterExpression)(o,{},e)}};let{keywords:r}=t.requestBody;Array.isArray(e.keywords)&&e.keywords.length>0&&(r=[...r,...e.keywords],t.requestBody.keywords=r),(0,s.setValueForPath)("aggregations."+a,n,t.requestBody)}},t.applyFilterCountAggregations=function(e,t){const{name:i,ghost:o}=e,a=(0,s.valueForPath)(i+".items",t.responseBody);let n;Array.isArray(a)&&a.length>0&&(n=a[0].aggregation),o.count=isNaN(n)?void 0:n};const a=e=>e.replace("[*]","");function n(e){const t=e.split("."),i=[];let o=!1,s={};for(let e=t.length-1;e>-1;e--){const r=t[e];if(!o&&(n=r,new RegExp("[[*]]$").test(n))){const n=a(t[e]);s.accessor={},s.accessor[n]={field:i.join(".")},i.length=0,o=!0}else if(o){const i=s;s={accessor:{}};const o=a(t[e]);s.accessor[o]=i}else i.splice(0,0,r)}var n;return i.length>0&&(s.field=a(i.join("."))),s}t.buildRangeFilterDefaultValuesAggregations=function(e,t,i){const o={type:"statistics",target:n(t)};(0,s.setValueForPath)("aggregations."+e,o,i.requestBody)},t.computeRangeFilterDefaultValuesAggregations=function(e,t,i){function a(e){return(0,o.isString)(e)?e.split("T")[0]:null}const n={data:{start:null,end:null},options:{max:null,min:null,field:t}},{options:r,data:l}=n,d=(0,s.valueForPath)(e+".items",i.responseBody);if(Array.isArray(d)){for(const{key:e,aggregation:t}of d){switch(e){case"min":(0,o.isString)(t)?r.min=a(new Date(Number(t)).toISOString()):r.min=t;break;case"max":(0,o.isString)(t)?r.max=a(new Date(Number(t)).toISOString()):r.max=t}l.start=r.min,l.end=r.max}return n}},t.computeBigRangeFilterDefaultValuesAggregations=function(e,t,i){const o={data:{start:null,end:null}},{data:a}=o,n=(0,s.valueForPath)(e+".items",i.responseBody);if(Array.isArray(n)){for(const{key:e,aggregation:t}of n)switch(e){case"min":a.start=String(Number(t));break;case"max":a.end=String(Number(t))}return o}},t.buildLovDefaultValuesAggregations=function(e,t,i){const o={type:"terms",target:n(t),options:{limit:1}};(0,s.setValueForPath)("aggregations."+e,o,i.requestBody)},t.computeLovDefaultValuesAggregations=function(e,t,i){const o=(0,s.valueForPath)(e+".items",i.responseBody);let a;return Array.isArray(o)&&o.length>0&&(a=o[0].key),a}})),define("oj-sp/smart-search/strategies/BossSearchStrategy",["require","exports","../common/enums","oj-sp/common-util/common-util","ojs/ojlogger","./BossSearchCommons","./BossSearchAggregations","./../common/FilterUtils","./BossSearchFilterBuilder","./../common/ConfigResolver","vb/helpers/rest"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BossSearchStrategy=void 0;function p(e,t,i){const o="$search.filters."+`${e}.${t}`;return(0,a.valueForPath)(o,i)}function u(e,t,i,o,s){const n=""+t,r=`$search.filters.${e}.${n}`,l=`[[ ${r} ]]`;(0,a.setValueForPath)(n,l,o),(0,a.setValueForPath)(r,i,s)}function h(e){let t=e["x-sp-filter"];if((0,o.isObject)(t)){t=new d.ConfigResolver({$search:{}}).evaluateMetadata(t)}return t}function m(e){var t;return null!==(t=e["x-searchable"])&&void 0!==t&&t}function g(e){const{extension:t}=e;return null==t?void 0:t.default}function y(e,t){return[...e,t]}function f(e){return e.replace(/\[\*\]/g,"_n_").replace(/\./g,"$")+"Filter"}function b(e){return e.join(".")}const v=[{predicate:function(e){if(!m(e))return!1;const{type:t=null,format:s=null}=e,a="string"===t&&("date"===s||"date-time"===s),n=h(e);return a&&!(0,o.isObject)(n)||a&&(null==n?void 0:n.type)===i.DEFAULT_FILTER_TYPES.DATE_RANGE_FILTER},builder:function(e,t,o,s){var a;const n=h(e),r=null!==(a=null==n?void 0:n.options)&&void 0!==a?a:{label:null,min:null,max:null,start:null,end:null},{format:l="date"}=e,{start:d,end:c}=r;let{label:p}=r;const{max:m,min:g}=r,v=b(y(t,o));p=null!=p?p:e.labelHint;const j=f(v);return{name:j,filter:function(e){const{field:t,label:o,start:s=null,end:a=null,min:n=null,max:r=null,name:l,searchContext:d,format:c="date"}=e,p={type:i.DEFAULT_FILTER_TYPES.DATE_RANGE_FILTER,data:{start:s,end:a}};return u(l,"label",o,p,d),u(l,"options",{field:t,min:n,max:r,format:c},p,d),p}({name:j,field:v,label:p,start:d,end:c,max:m,min:g,format:l,searchContext:s})}}},{predicate:function(e){if(!m(e))return!1;const{type:t=null,format:s=null}=e,a="number"===t||"integer"==t,n=h(e);return a&&!(0,o.isObject)(n)||a&&(null==n?void 0:n.type)===i.DEFAULT_FILTER_TYPES.NUMERIC_RANGE_FILTER},builder:function(e,t,o,s){var a;const n=h(e),r=null!==(a=null==n?void 0:n.options)&&void 0!==a?a:{label:null,min:null,max:null,start:null,end:null},{start:l,end:d}=r;let{label:c}=r;const{max:p,min:m}=r,g=b(y(t,o));c=null!=c?c:e.labelHint;const v=f(g);return{name:v,filter:function(e){const{field:t,label:o,start:s=null,end:a=null,min:n=null,max:r=null,name:l,searchContext:d}=e,c={type:i.DEFAULT_FILTER_TYPES.NUMERIC_RANGE_FILTER,data:{start:s,end:a}};return u(l,"label",o,c,d),u(l,"options",{field:t,min:n,max:r},c,d),c}({name:v,field:g,label:c,start:l,end:d,max:p,min:m,searchContext:s})}}},{predicate:function(e){var t;if(!m(e))return!1;const s=h(e),a=null!==(t=null==s?void 0:s.type)&&void 0!==t?t:null,n=null==s?void 0:s.options;return a===i.DEFAULT_FILTER_TYPES.TOGGLE_FILTER&&(0,o.isObject)(null==n?void 0:n.criteria)},builder:function(e,t,o,s){var a;const n=h(e),r=null!==(a=null==n?void 0:n.options)&&void 0!==a?a:{label:null,criteria:null},l=r.criteria;let{label:d}=r;d=null!=d?d:e.labelHint;const c=f(b(y(t,o)));return{name:c,filter:function(e){const{label:t,criteria:o,name:s,searchContext:a}=e,n={type:i.DEFAULT_FILTER_TYPES.TOGGLE_FILTER,data:{}};return u(s,"label",t,n,a),u(s,"options",{criteria:o},n,a),n}({name:c,label:d,criteria:l,searchContext:s})}}},{predicate:function(e){var t;if(!m(e))return!1;const o=h(e),s=null!==(t=null==o?void 0:o.type)&&void 0!==t?t:null;return s===i.DEFAULT_FILTER_TYPES.SELECT_MULTIPLE_FILTER&&e.dataProvider||!s&&e.dataProvider},builder:function(e,t,o,s){var a;const n=h(e),r=null!==(a=null==n?void 0:n.options)&&void 0!==a?a:{label:null,values:null};let{label:l,values:d}=r;const c=b(y(t,o));l=null!=l?l:e.labelHint;const p=e.dataProvider,m=e.optionsKeys;let v=g(e);v=v?[v]:null,d=null!=d?d:v;const j=f(c);return{name:j,filter:function(e){const{field:t,label:o,values:s,valueItems:a,optionsData:n,optionsSource:r="static",optionsKeys:l={value:"value",label:"label"},name:d,searchContext:c}=e,p={type:i.DEFAULT_FILTER_TYPES.SELECT_MULTIPLE_FILTER,label:o,options:{field:t,optionsData:n,optionsSource:r,optionsKeys:l},data:{values:s,valueItems:a}};return u(d,"label",o,p,c),u(d,"options",{field:t,optionsData:n,optionsSource:r,optionsKeys:l},p,c),p}({name:j,field:c,label:l,values:d,valueItems:null,optionsData:p,optionsSource:"static",optionsKeys:m,searchContext:s})}}},{predicate:function(e){if(!m(e))return!1;const t=h(e),o=null==t?void 0:t.type;return o===i.DEFAULT_FILTER_TYPES.SELECT_SINGLE_FILTER&&e.dataProvider||!o&&e.dataProvider},builder:function(e,t,o,s){var a;const n=h(e),r=null!==(a=null==n?void 0:n.options)&&void 0!==a?a:{};let{label:l=null,value:d=null}=r;const c=b(y(t,o));l=null!=l?l:e.labelHint;const p=e.dataProvider,m=e.optionsKeys;d=null!=d?d:g(e);const v=f(c);return{name:v,filter:function(e){const{field:t,label:o,value:s,valueItem:a,optionsData:n,optionsSource:r="static",optionsKeys:l={value:"value",label:"label"},name:d,searchContext:c}=e,p={type:i.DEFAULT_FILTER_TYPES.SELECT_SINGLE_FILTER,data:{value:s,valueItem:a}};return u(d,"label",o,p,c),u(d,"options",{field:t,optionsData:n,optionsSource:r,optionsKeys:l},p,c),p}({name:v,field:c,label:l,value:d,valueItem:null,optionsData:p,optionsSource:"static",optionsKeys:m,searchContext:s})}}},{predicate:function(e){if(!m(e))return!1;const{type:t=null,format:s=null}=e,a="string"===t&&("big-decimal"===s||"big-integer"===s),n=h(e);return a&&!(0,o.isObject)(n)||a&&(null==n?void 0:n.type)===i.DEFAULT_FILTER_TYPES.BIG_NUMERIC_RANGE_FILTER},builder:function(e,t,o,s){var a;const n=h(e),r=null!==(a=null==n?void 0:n.options)&&void 0!==a?a:{label:null,start:null,end:null},{start:l,end:d}=r;let{label:c}=r;const{converterOptions:p={}}=r,m=b(y(t,o));c=null!=c?c:e.labelHint;const g=f(m);return{name:g,filter:function(e){const{field:t,label:o,start:s=null,end:a=null,converterOptions:n,name:r,searchContext:l}=e,d={type:i.DEFAULT_FILTER_TYPES.BIG_NUMERIC_RANGE_FILTER,data:{start:s,end:a}};return u(r,"label",o,d,l),u(r,"options",{field:t,converterOptions:n},d,l),d}({name:g,field:m,label:c,start:l,end:d,converterOptions:p,searchContext:s})}}}],j=(e,t,i,a)=>{const{properties:n}=e;if(!(0,o.isObject)(n))return;Object.keys(n).forEach(e=>{const r=n[e];"object"===r.type?j(r,y(t,e),i,a):"array"===r.type&&j(r,y(t,e+"[*]"),i,a);for(const n of v)if(n.predicate(r)){try{const{name:s,filter:l}=n.builder(r,t,e,a);(0,o.isObject)(l)&&(i[s]=l)}catch(e){(0,s.error)(e)}break}})},A=new Map;A.set(i.DEFAULT_FILTER_TYPES.DATE_RANGE_FILTER,async e=>{const{aggregationContext:t,name:i,searchContext:o,filterConfig:s}=e;if(!t)return;const{field:a,max:r,min:l}=p(i,"options",o),{start:d,end:c}=s.data;if(r&&l&&d&&c)return;const{queryContext:h}=t;(0,n.buildRangeFilterDefaultValuesAggregations)(i,a,h),h.responseHandlers.push(e=>{let t=(0,n.computeRangeFilterDefaultValuesAggregations)(i,a,e);t=null!=t?t:{data:{start:null,end:null},options:{field:a,max:null,min:null}},d&&c||!t||u(i,"data",t.data,s,o),r&&l||!t||u(i,"options",t.options,s,o)})}),A.set(i.DEFAULT_FILTER_TYPES.NUMERIC_RANGE_FILTER,async e=>{const{aggregationContext:t,name:i,searchContext:s,filterConfig:a}=e;if(!t)return;const{field:r,max:l,min:d}=p(i,"options",s),{start:c,end:h}=a.data;if(!((0,o.isEmpty)(l)||(0,o.isEmpty)(d)||(0,o.isEmpty)(c)||(0,o.isEmpty)(h)))return;const{queryContext:m}=t;(0,n.buildRangeFilterDefaultValuesAggregations)(i,r,m),m.responseHandlers.push(e=>{let t;t=(0,n.computeRangeFilterDefaultValuesAggregations)(i,r,e),t=null!=t?t:{data:{start:null,end:null},options:{min:0,max:100,field:r}},((0,o.isEmpty)(c)||(0,o.isEmpty)(h))&&u(i,"data",t.data,a,s),((0,o.isEmpty)(l)||(0,o.isEmpty)(d))&&u(i,"options",t.options,a,s)})}),A.set(i.DEFAULT_FILTER_TYPES.TOGGLE_FILTER,async e=>{}),A.set(i.DEFAULT_FILTER_TYPES.SELECT_SINGLE_FILTER,async e=>{const t=async e=>{const t={keys:new Set([e])},{results:i}=await c.fetchByKeys(t),o=i.get(e);return Object.assign({key:e},o)},{aggregationContext:i,name:o,searchContext:s,filterConfig:a}=e;let{value:r,valueItem:l}=a.data;const{field:d,optionsData:c}=p(o,"options",s);if(!c)return;if(!i)return void(a.data.valueItem=await t(r));const{queryContext:h}=i;(0,n.buildLovDefaultValuesAggregations)(o,d,h),h.responseHandlers.push(async e=>{var i;r=null!==(i=(0,n.computeLovDefaultValuesAggregations)(o,d,e))&&void 0!==i?i:r,l=await t(r),u(o,"data.value",r,a,s),u(o,"data.valueItem",l,a,s)})}),A.set(i.DEFAULT_FILTER_TYPES.SELECT_MULTIPLE_FILTER,async e=>{const t=async e=>{const t=[],i={keys:new Set(e)},{results:o}=await c.fetchByKeys(i);return o.forEach((e,i)=>{t.push(Object.assign({key:i},e))}),t},{aggregationContext:i,name:o,searchContext:s,filterConfig:a}=e;let{values:r,valueItems:l}=a.data;const{field:d,optionsData:c}=p(o,"options",s);if(!c)return;if(!i)return void(a.data.valueItems=await t(r));const{queryContext:h}=i;(0,n.buildLovDefaultValuesAggregations)(o,d,h),h.responseHandlers.push(async e=>{const i=(0,n.computeLovDefaultValuesAggregations)(o,d,e);i&&(r=[i]),l=await t(r),u(o,"data.values",r,a,s),u(o,"data.valueItems",l,a,s)})}),A.set(i.DEFAULT_FILTER_TYPES.BIG_NUMERIC_RANGE_FILTER,async e=>{const{aggregationContext:t,name:i,searchContext:o,filterConfig:s}=e;if(!t)return;const{field:a,max:r,min:l}=p(i,"options",o),{start:d,end:c}=s.data;if(r&&l&&d&&c)return;const{queryContext:h}=t;(0,n.buildRangeFilterDefaultValuesAggregations)(i,a,h),h.responseHandlers.push(e=>{let t=(0,n.computeBigRangeFilterDefaultValuesAggregations)(i,a,e);t=null!=t?t:{data:{start:null,end:null}},null!==d&&null!==c||!t||u(i,"data",t.data,s,o)})});const C=async(e,t,i)=>{const{endpoint:o,vbContext:a}=e,r={requestBody:{aggregations:{},keywords:[...i.keywords]}};t.forEach(e=>{e.isKeywordFilter||(0,n.buildFilterCountAggregations)(e,r)});const l=Object.assign(Object.assign({},i),r.requestBody),d=e.restHelperResolver().get(o,a).initConfiguration({method:"POST",headers:{"content-type":"application/json"}}).body(JSON.stringify(l));try{const e=await d.fetch();if(200===e.response.status){const i={responseBody:e.body};t.forEach(e=>{e.isKeywordFilter||(0,n.applyFilterCountAggregations)(e,i)})}}catch(e){(0,s.error)(e)}},E=async(e,t)=>{const{suggestionsFilters:i,appliedFilters:a}=t;if(!(0,o.isObject)(e))return i;const n=[...i],d=(0,r.buildJetFilterCiterion)(null,a),c=[],p={autocomplete:[],keywords:c},u={collection:{filter:(0,l.buildFilterExpression)(d,{},p)},keywords:c};for(;n.length>0;){const t=n.splice(0,50),i=[];i.push(C(e,t,u)),3!==i.length&&0!==n.length||(await Promise.all(i),i.length=0)}return i.length>0&&(0,s.info)(`Smart Search compute suggestions filters counts on ${i.length} filter(s).`),i},T=async e=>{const{suggestionsFilters:t}=e,i=[];for(let e=t.length-1;e>-1;e--){const o=t[e];void 0!==o.count&&(0===o.count&&(i.push(o),t.splice(e,1)))}return i.length>0&&(0,s.info)(`Smart Search relevance ranking on suggestions filters. ${i.length} zero count filter(s) removed.`),{suggestionsFilters:t,excludedFilters:i}},_=async e=>{const{metadata:t,searchContext:i,aggregationContext:n,fields:r}=e;if(!(0,o.isObject)(t))return;const l={description:t.labelHint,filters:{}};(0,a.setValueForPath)("lifecycle.suggestionsFilters.computeCounts","[[ $search.lifecycle.suggestionsFilters.computeCounts ]]",l),(0,a.setValueForPath)("$search.lifecycle.suggestionsFilters.computeCounts",E.bind(this,n),i),(0,a.setValueForPath)("lifecycle.suggestionsFilters.relevanceRanking","[[ $search.lifecycle.suggestionsFilters.relevanceRanking ]]",l),(0,a.setValueForPath)("$search.lifecycle.suggestionsFilters.relevanceRanking",T.bind(this),i),j(t,[],l.filters,i);const d=null!=n?n:{endpoint:null,vbContext:null};d.queryContext={requestBody:{aggregations:{}},responseHandlers:[]};const{filters:c}=l,p=Object.keys(c);for(;p.length>0;){const e=p.splice(0,3),t=[];for(const a of e){if(Array.isArray(r)&&r.length>0&&!r.includes((u=a,u.replace(/Filter$/,"").replace(/_n_/g,"[*]").replace(/\$/g,".")))){delete c[a],delete i["$search.filters."+a];continue}const e=c[a],n=A.get(e.type);if((0,o.isFunction)(n))try{t.push(n({name:a,filterConfig:e,searchContext:i,aggregationContext:d}))}catch(e){(0,s.error)(e)}}try{await Promise.all(t)}catch(e){(0,s.error)(e)}}var u;const{endpoint:h,vbContext:m,queryContext:g}=d,{responseHandlers:y}=g;if(Array.isArray(y)&&y.length>0){let e={responseBody:{}};const{restHelperResolver:t}=d;if(t){const i=t().get(h,m).initConfiguration({method:"POST",headers:{"content-type":"application/json"}}).body(JSON.stringify(g.requestBody));try{const t=await i.fetch();if(200===t.response.status){const i=t.body;e={responseBody:i}}}catch(e){(0,s.error)(e)}}g.responseHandlers.forEach(t=>{t(e)})}return null==n||delete n.queryContext,l};class S{constructor(e){const{metadataProvider:t,aggregationContext:i,fields:o}=e;i&&!(null==i?void 0:i.restHelperResolver)&&(i.restHelperResolver=()=>c);const s=(new Date).getTime(),a=this._searchContext={$instance:s};this._searchConfigProvider={$instance:s,getConfig:()=>S._init({metadataProvider:t,searchContext:a,aggregationContext:i,fields:o})}}static async _init(e){const{metadataProvider:t,searchContext:i,aggregationContext:s,fields:a}=e,n=await(null==t?void 0:t.getMetadata());if((0,o.isObject)(n))return _({metadata:n,searchContext:i,aggregationContext:s,fields:a})}get searchConfig(){return this._searchConfigProvider}get searchContext(){return this._searchContext}}t.BossSearchStrategy=S})),define("oj-sp/smart-search/strategies/BossSearchStrategyFactory",["./BossSearchStrategy","vb/types/extendedType","./../common/ConfigResolver"],(e,t,i)=>class extends t{constructor(e){super(),this._strategy=void 0,this._options=e,this._vbContext=void 0,this._avaiableScopesResolver=()=>this._vbContext?this._vbContext.availableContexts:void 0,i.ConfigResolver.registerAvailableContextsResolver(this._avaiableScopesResolver),this._init(e)}get searchConfig(){if(this._strategy||!this._options||(this._init(),this._strategy))return this._strategy.searchConfig}get searchContext(){if(this._strategy||!this._options||(this._init(),this._strategy))return this._strategy.searchContext}isExtendedType(){return!0}getTypeDefinition(){return{type:{metadataProvider:"vb/DynamicLayoutMetadataProviderDescriptor",aggregationSearchEndpoint:"string",fields:"string[]"},resolved:!0}}init(e,t,i,o){this._options=i,this._vbContext=o,delete this._strategy}_init(){if(this._options){let t,{metadataProvider:i,aggregationSearchEndpoint:o,fields:s}=this._options;if("function"==typeof i&&(i=i()),o){t={endpoint:o,vbContext:this._vbContext}}this._strategy=new e.BossSearchStrategy({metadataProvider:i,aggregationContext:t,fields:s})}}handlePropertyVariableChangeEvent(e){this._options=e.value,delete this._strategy}hoistValueObjectProperties(){return!1}getWritableOptions(){return{propertiesWritable:"all"}}}),define("oj-sp/smart-search/strategies/JsonSearchConfigProvider",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonSearchConfigProvider=void 0;t.JsonSearchConfigProvider=class{constructor(e){this._options=e}async getConfig(){if(this._dataCache)return this._dataCache;const{url:e,fetchFrequency:t="one-time",fetchResolver:i=(()=>window.fetch)}=this._options;if(e){const o=i(),s=await o(e);if(200===s.status){const e=await s.json();return"one-time"===t&&(this._dataCache=e),e}}}}})),define("oj-sp/smart-search/strategies/JsonSearchConfigProviderFactory",["./JsonSearchConfigProvider","vb/types/extendedType","./../common/ConfigResolver"],(e,t,i)=>class extends t{constructor(e){super(),this._strategy=void 0,this._options=e,this._vbContext=void 0,this._avaiableScopesResolver=()=>this._vbContext?this._vbContext.availableContexts:void 0,i.ConfigResolver.registerAvailableContextsResolver(this._avaiableScopesResolver)}get provider(){return this._init(),this._strategy}isExtendedType(){return!0}getTypeDefinition(){return{type:{url:"string",fetchFrequency:"string"},resolved:!0}}init(e,t,i,o){this._options=i,this._vbContext=o}_init(){if(!this._strategy){if(this._options){if("function"==typeof this._options.url){const e=this._options.url();this._options.url=e}if("function"==typeof this._options.fetchFrequency){const e=this._options.fetchFrequency();this._options.fetchFrequency=e}}this._strategy=new e.JsonSearchConfigProvider(this._options)}}handlePropertyVariableChangeEvent(e){this._options=e.value,delete this._strategy,this._init()}hoistValueObjectProperties(){return!1}getWritableOptions(){return{propertiesWritable:"all"}}}),define("text!oj-sp/task-card/component.json",[],(function(){return'{"name":"task-card","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","displayName":"Task Card","description":"Task card presents a singular display of information to the user in a card format for taking action on one item, or task, at a time.","type":"composite","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-card-footer":"2404.0.0"},"properties":{"instruction":{"displayName":"Instruction","description":"Instruction for completing the task.","type":"string"},"taskLabel":{"displayName":"Label","description":"Label for the task being performed. Appears in card header.","type":"string","required":true},"taskTitle":{"displayName":"Title","description":"The task being performed. Appears in card header.","type":"string","required":true},"taskSubtitle":{"displayName":"Sub Title","description":"Subtitle related to the task. Appears in card header.","type":"string"},"caption":{"displayName":"Caption","description":"Caption related to the task.  Appears in the card header.","type":"string"},"image":{"displayName":"Image","description":"An image to display in the body of the card","type":"object|null","properties":{"src":{"type":"string","displayName":"Image source","description":"Path to where the image is stored."},"altText":{"displayName":"Alternative text","description":"A string to describe the image to screenreader, if not provided the image will be treated as decorative.","type":"string"}}},"badge":{"displayName":"Badge","description":"Status for the object about which the task is being performed.","type":"object|null","properties":{"text":{"displayName":"Text","description":"Badge text.","type":"string"},"status":{"displayName":"Status","description":"Status of the badge.","type":"string","status":[{"target":"propertyValue","type":"deprecated","since":"2104.0.0","description":"Enum value \'default\' is no longer supported, and will be removed in  a future release. Use \'neutral\' instead.","value":["default"]}],"value":"neutral","enumValues":["default","neutral","danger","warning","success","info"],"propertyEditorValues":{"default":{"description":"Default status.","displayName":"Default"},"neutral":{"description":"Neutral status.","displayName":"Neutral"},"danger":{"description":"Danger status.","displayName":"Danger"},"warning":{"description":"Warning status.","displayName":"Warning"},"success":{"description":"Success status.","displayName":"Success"},"info":{"description":"Info status.","displayName":"Info"}}},"style":{"displayName":"Style","description":"Style of the badge.","type":"string","value":"subtle","enumValues":["subtle","strong"],"propertyEditorValues":{"subtle":{"description":"Subtle style","displayName":"Subtle"},"strong":{"description":"Strong style","displayName":"Strong"}}}}},"primaryText":{"type":"string","displayName":"Primary Text","description":"Primary text naming the object for which the task is being performed.","required":true},"secondaryText":{"type":"string","displayName":"Secondary Text","description":"Secondary text describing the object for which the task is being performed."},"navigationAction":{"displayName":"Navigation Action","description":"Navigation link text that appears in the body region.","type":"object|null","properties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"footerText":{"displayName":"Readonly Text","description":"Additional information displayed by a value/label pair, can have leading visual of avatar or icon.","type":"object|null","properties":{"label":{"type":"string","displayName":"Label","description":"Optional label describing the field."},"value":{"type":"string","displayName":"Value","description":"Value of the field, required if a label is provided."}}},"avatar":{"displayName":"Avatar","description":"Avatar displayed as a leading visual for the footer text. Cannot be used at the same time as the icon.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image source","description":"Path to where the image is stored."},"initials":{"type":"string","displayName":"Initials","description":"Avatar initials, required if the source is provided for accessibility reasons."}}},"icon":{"displayName":"Icon","description":"Icon displayed as a leading visual for the footer text.  The icon is considered decorative so you must not have the icon convey information that is not also present in the footerText for accessibility reasons.  Cannot be used at the same time as the avatar.","type":"object|null","properties":{"src":{"type":"string","displayName":"Image source","description":"Icon class name.","status":[{"type":"deprecated","since":"2104.0.0","description":"Use the class property instead."}]},"class":{"type":"string","displayName":"Icon class","description":"Redwood icon gallery class."}}},"primaryActions":{"displayName":"Primary Actions","description":"Specifies primary actions in the footer.","type":"Array<object>|null","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}},"type":{"type":"string","displayName":"Action type","description":"The action type can be default, promoted, deemphasized or navigation","value":"promoted","enumValues":["default","promoted","deemphasized","navigation"],"propertyEditorValues":{"default":{"displayName":"Default","description":"The action type is default."},"promoted":{"displayName":"Promoted","description":"The action type is promoted."},"deemphasized":{"displayName":"Deemphasized","description":"The action type is deemphasized."},"navigation":{"displayName":"Navigation","description":"The action type is navigation."}}}}}}},"secondaryActions":{"displayName":"Secondary Actions","description":"Specifies secondary actions in the footer.","type":"Array<object>|null","extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"Action ID","description":"A unique ID by which to identify this action when triggered."},"label":{"type":"string","displayName":"Action label","description":"Action display label."},"icon":{"type":"string","displayName":"Action icon","description":"An icon font class name."},"display":{"type":"string","displayName":"Action display state","description":"The action can be on, off or disabled","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"Primary action event","description":"Dispatched when one of the primary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when one of the secondary actions is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}},"spNavigationAction":{"displayName":"Navigation action event","description":"Dispatched when the body navigation link is triggered.","bubbles":true,"cancelable":false,"detail":{"actionId":{"description":"The action id.","type":"string"}}}},"slots":{},"extension":{"catalog":{"category":"Redwood Layouts","tags":["Redwood"],"coverImage":"extension/catalog/images/ico-task-card.svg","docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Hierarchy%20Viewer&Test%20Adapter=docs/testAdapterAPI/classes/ojspectrataskcard.html"},"vbdt":{"pi":{"layouts":{"general":{"customizers":[{"type":"heading","title":"Header","subHeading":true,"underline":false},{"propertyName":"instruction"},{"propertyName":"taskLabel"},{"propertyName":"taskTitle"},{"propertyName":"taskSubtitle"},{"propertyName":"caption"},{"type":"heading","title":"Image","subHeading":true,"underline":false},{"propertyName":"image.src","displayName":"Image Src"},{"propertyName":"image.altText","displayName":"Alt Text"},{"type":"heading","title":"Body","subHeading":true,"underline":false},{"propertyName":"badge.text","displayName":"Badge Text"},{"propertyName":"badge.status","displayName":"Badge Status","type":"enumeration"},{"propertyName":"badge.style","displayName":"Badge Style","type":"enumeration"},{"propertyName":"primaryText"},{"propertyName":"secondaryText"},{"type":"heading","title":"Footer","subHeading":true,"underline":false},{"propertyName":"primaryActions","displayName":"Primary Actions","singleName":"Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"primaryactions"}},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{}},"drill":{"layout":"secondaryactions"}},{"propertyName":"footerText.label","displayName":"Footer Label"},{"propertyName":"footerText.value","displayName":"Footer Value"},{"propertyName":"avatar.src","displayName":"Footer Avatar Src"},{"propertyName":"avatar.initials","displayName":"Footer Avatar Initials"},{"propertyName":"icon.class","displayName":"Footer Icon"}],"noSlots":true},"primaryactions":{"customizers":[{"propertyName":"primaryActions.id","displayName":"ID"},{"propertyName":"primaryActions.label","displayName":"Label"},{"propertyName":"primaryActions.display","displayName":"Display","type":"enumeration"},{"propertyName":"primaryActions.icon","displayName":"Icon"},{"propertyName":"primaryActions.type","displayName":"Type","type":"enumeration"}]},"secondaryactions":{"customizers":[{"propertyName":"secondaryActions.id","displayName":"ID"},{"propertyName":"secondaryActions.label","displayName":"Label"},{"propertyName":"secondaryActions.display","displayName":"Display","type":"enumeration"},{"propertyName":"secondaryActions.icon","displayName":"Icon"}]}}}}},"icon":{"iconPath":"extension/catalog/images/ico-task-card.svg"}}'})),define("text!oj-sp/task-card/task-card-view.html",[],(function(){return'<html><head></head><body><div :class="[[\'oj-sp-task-card-container oj-panel oj-sm-padding-0\' + panelClasses()]]"role="group"data-oj-context=""><div class="oj-sp-task-card-nonfooter-container"><oj-bind-if test="[[ $properties.instruction ]]"><div :title="[[$properties.instruction]]"class="oj-sp-task-card-instruction-container oj-sm-padding-4x-horizontal oj-sm-padding-2x-vertical oj-typography-body-sm oj-typography-bold oj-text-color-primary oj-sp-task-card-text"><oj-bind-text value="[[ $properties.instruction ]]"></oj-bind-text></div></oj-bind-if><div :id="[[ uid + \'_header1\' ]]"class="oj-sp-task-card-header-container oj-sm-padding-4x"><div :id="[[ uid + \'_label1\' ]]"class="oj-typography-body-xs oj-text-color-primary oj-sp-task-card-text":title="[[$properties.taskLabel]]"><oj-bind-text value="[[$properties.taskLabel]]"></oj-bind-text></div><div :id="[[ uid + \'_title1\' ]]"class="oj-sm-padding-1x-top oj-sm-padding-2x-bottom oj-typography-heading-xs oj-text-color-primary oj-sp-task-card-text":title="[[$properties.taskTitle]]"><oj-bind-text value="[[$properties.taskTitle]]"></oj-bind-text></div><oj-bind-if test="[[ $properties.taskSubtitle ]]"><div :id="[[ uid + \'_subTitle1\' ]]"class="oj-typography-body-sm oj-text-color-primary oj-sp-task-card-text":title="[[$properties.taskSubtitle]]"><oj-bind-text value="[[$properties.taskSubtitle]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[ $properties.caption ]]"><div class="oj-typography-body-xs oj-text-color-secondary oj-sp-task-card-text":title="[[$properties.caption]]"><oj-bind-text value="[[$properties.caption]]"></oj-bind-text></div></oj-bind-if></div><oj-bind-if test="[[ hasImage() ]]"><div :id="[[ uid + \'_img-container1\' ]]"class="oj-sp-task-card-image-container oj-sm-margin-4x-horizontal"><img :id="[[ uid + \'_img1\' ]]"class="oj-sp-task-card-image":src="[[ $properties.image ? $properties.image.src : \'\' ]]":alt="[[ $properties.image &amp;&amp; $properties.image.altText ? $properties.image.altText : \'\' ]]"on-load="[[ onLoadImage ]]"on-error="[[onErrorImage]]"><div :id="[[ uid + \'_scrim1\' ]]"class="oj-sp-task-card-image-scrim"></div></div></oj-bind-if><oj-bind-if test="[[ !hasImage() ]]"><div :id="[[ uid + \'_no_img-container1\' ]]"class="oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center oj-sm-flex-direction-column oj-sp-task-card-no-image-container oj-sm-margin-4x-horizontal"><div class="oj-flex-item"><span :class="[[ hasErrorImage() ? \'oj-ux-ico-broken-image oj-ux-icon-size-18x\' : \'oj-ux-ico-file-image oj-ux-icon-size-18x\']]"></span></div></div></oj-bind-if><div class="oj-sp-task-card-body-container oj-sm-padding-4x-horizontal oj-flex oj-sm-flex-items-initial oj-sm-justify-content-center oj-sm-flex-direction-column oj-sm-flex-wrap-nowrap"><div :id="[[ uid + \'_body-region1\' ]]"class="oj-flex-item"><oj-bind-if test="[[hasBadge()]]"><div :class="[[badgeClass() + \' oj-sp-task-card-text oj-sm-margin-2x-top oj-sp-task-card-badge\']]":title="[[$properties.badge ? $properties.badge.text : \'\']]"><oj-bind-text value="[[$properties.badge ? $properties.badge.text : \'\']]"></oj-bind-text></div></oj-bind-if><div :id="[[ uid + \'_primaryText1\' ]]"class="oj-sm-padding-1x-top oj-typography-body-xl oj-typography-bold oj-text-color-primary oj-sp-task-card-text":title="[[$properties.primaryText]]"><oj-bind-text value="[[$properties.primaryText]]"></oj-bind-text></div><oj-bind-if test="[[ $properties.secondaryText ]]"><div :id="[[ uid + \'_secondaryText1\' ]]"class="oj-typography-body-xl oj-text-color-primary oj-sp-task-card-text":title="[[$properties.secondaryText]]"><oj-bind-text value="[[$properties.secondaryText]]"></oj-bind-text></div></oj-bind-if><oj-bind-if test="[[ hasLink() ]]"><a :class="[[\'oj-typography-body-md  oj-line-clamp-1\' + (isLinkDisabled() ? \' oj-disabled\' : \'\')]]":id="[[ uid + \'_navigationAction\']]"href="#"on-click="[[navigationActionHandler]]":title="[[$properties.navigationAction ? $properties.navigationAction.label : \'\']]"><oj-bind-text value="[[$properties.navigationAction ? $properties.navigationAction.label : \'\']]"></oj-bind-text></a></oj-bind-if></div></div></div><div class="oj-sp-task-card-footer-container"><oj-sp-card-footer :id="[[ uid + \'_footer\' ]]"emphasized="true"footer-text="[[ $properties.footerText ]]"primary-actions="[[ $properties.primaryActions ]]"secondary-actions="[[ $properties.secondaryActions ]]"avatar="[[ $properties.avatar ]]"icon="[[ icon ]]"on-sp-primary-action="[[ primaryActionHandler ]]"on-sp-secondary-action="[[ secondaryActionHandler ]]"></oj-sp-card-footer></div></div></body></html>'})),define("oj-sp/task-card/task-card-viewModel",["require","exports","knockout","oj-sp/common/EventDispatcher","oj-sp/common/badge","ojs/ojcontext","ojs/ojlogger","oj-sp/card-footer/loader","ojs/ojknockout"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCardViewModel=void 0;t.TaskCardViewModel=class{constructor(e){this.context=e,this.navigationActionHandler=e=>{if(this.properties&&this.properties.navigationAction&&"disabled"!==this.properties.navigationAction.display){const e={actionId:this.properties.navigationAction.id};o.EventDispatcher.dispatch(o.EventDispatcher.NAVIGATION_ACTION_EVENT_NAME,this.composite,e)}e.preventDefault()},this.primaryActionHandler=e=>{o.EventDispatcher.dispatch(o.EventDispatcher.PRIMARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()},this.secondaryActionHandler=e=>{o.EventDispatcher.dispatch(o.EventDispatcher.SECONDARY_ACTION_EVENT_NAME,this.composite,e.detail),e.stopPropagation()},this.onLoadImage=()=>{this.calculateImageAndBodyContainerHeight(),this.calculateImageContainerWidth()},this.calculateImageContainerWidth=()=>{const e=document.getElementById(this.uid+"_header1"),t=document.getElementById(this.uid+"_img-container1"),i=document.getElementById(this.uid+"_img1");if(e&&t&&i&&i.naturalHeight){const o=t.clientHeight?t.clientHeight:188,s=i.naturalWidth*o/i.naturalHeight,a=e.clientWidth?e.clientWidth-32:316;t.style.width=Math.min(a,s)+"px"}},this.onErrorImage=()=>{this.hasImage()&&(this.hasImage(!1),this.hasErrorImage(!0))},this.onResize=()=>{const e=a.getContext(this.composite).getBusyContext();this.busyResolve=e.addBusyState({description:"Web Component resize "}),this.calculatePanelClasses(),this.calculateImageAndBodyContainerHeight(),this.calculateImageContainerWidth(),this.busyResolve()},this.calculateImageAndBodyContainerHeight=()=>{const e=document.getElementById(this.uid+"_header1"),t=e.parentElement.getBoundingClientRect().top,i=window.innerHeight>t?window.innerHeight-t:0,o=e.getBoundingClientRect().bottom-e.getBoundingClientRect().top,s=document.getElementById(this.uid+"_body-region1"),a=s.getBoundingClientRect().bottom-s.getBoundingClientRect().top,n=document.getElementsByClassName("oj-sp-task-card-footer-container")[0].getBoundingClientRect().bottom-s.getBoundingClientRect().top,r=i-o-a-16-n;let l;if(window.innerWidth>400)l=188;else{l=r>=188?188:r<188&&r>=94?r:0;const e=i-o-n-l;document.getElementsByClassName("oj-sp-task-card-body-container")[0].style.height=e+"px"}if(this.hasImage()){document.getElementById(this.uid+"_img-container1").style.height=l+"px"}else{document.getElementById(this.uid+"_no_img-container1").style.height=l+"px"}},this.calculatePanelClasses=()=>{window.innerWidth<=400?this.panelClasses(" oj-panel-border-radius-0"):this.panelClasses(" oj-panel-shadow-md")};const t=a.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.hasImage=i.observable(!0),this.hasErrorImage=i.observable(!1),this.properties=e.properties;const s=this.properties.image?this.properties.image.src:null;this.hasImage(!!s),this.panelClasses=i.observable(" oj-panel-shadow-md"),this.icon=i.observable(),this.hasBadge=i.observable(!1),this.badgeClass=i.observable(""),this.setHeaderBadge(this.properties.badge),this.hasLink=i.observable(!1),this.isLinkDisabled=i.observable(!1),this.setBodyLink(this.properties.navigationAction),this.setFooterIcon(this.properties.icon),this.calculatePanelClasses(),this.busyResolve()}activated(e){n.log(`oj-sp-task-card ${this.uid} activated`)}connected(e){n.log(`oj-sp-task-card ${this.uid} connected`),window.addEventListener("resize",this.onResize)}bindingsApplied(e){n.log(`oj-sp-task-card ${this.uid} bindingsApplied`)}propertyChanged(e){if(n.log(`oj-sp-task-card ${this.uid} propertyChanged`),"image"===e.property){const t=e.value?e.value.src:null;this.hasImage(!!t),this.hasErrorImage(!1)}"badge"===e.property&&this.setHeaderBadge(e.value),"icon"===e.property&&this.setFooterIcon(e.value),"navigationAction"===e.property&&this.setBodyLink(e.value)}disconnected(e){n.log(`oj-sp-task-card ${this.uid} disconnected`),window.removeEventListener("resize",this.onResize)}setHeaderBadge(e){if(this.hasBadge(e&&null!=e.text),this.hasBadge()){let t="oj-badge";switch(e.status){case"danger":t+=" oj-badge-danger";break;case"warning":t+=" oj-badge-warning";break;case"success":t+=" oj-badge-success";break;case"info":t+=" oj-badge-info"}e.style&&e.style===s.BadgeStyle.strong||(t+=" oj-badge-subtle"),this.badgeClass(t)}}setBodyLink(e){this.hasLink(!1),this.isLinkDisabled(!1),e&&(e.label&&e.id||"off"===e.display?"off"!==e.display&&(this.hasLink(!0),"disabled"===e.display&&this.isLinkDisabled(!0)):n.error("Navigation link must have an id and a label unless the display is set to off"))}setFooterIcon(e){if(e)if(e.class)this.icon(e);else if(e.src){const t={};t.class=e.src,this.icon(t)}else this.icon(void 0);else this.icon(void 0)}}})),define("css!oj-sp/task-card/task-card-styles",[],(function(){})),define("oj-sp/task-card/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./task-card-view.html","./task-card-viewModel","css!./task-card-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-task-card",{metadata:JSON.parse(o),view:s,viewModel:a.TaskCardViewModel})})),define("css!oj-sp/timeline-event-template/timeline-event-template-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/timeline-event-template/timeline-event-template",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","css!./timeline-event-template-styles","ojs/ojbutton","ojs/ojmenu","ojs/ojoption"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineEventTemplate=void 0;let a=class extends o.Component{constructor(e){var t;super(e),this.renderPrimaryActions=()=>(0,o.h)("oj-menu-button",{id:this.uniqueId+"_primaryActions",chroming:"borderless",display:"icons","aria-label":this.props.primaryText+" "+this.props.secondaryText+" "+this.res.actions},(0,o.h)("oj-menu",{id:this.uniqueId+"_more-actions-menu",slot:"menu",onojMenuAction:this.primaryActionHandler,"aria-label":this.res.actions},this.props.primaryActions.map(e=>"off"!==e.display&&(0,o.h)("oj-option",{id:this.uniqueId+"_"+e.id,disabled:"disabled"===e.display,value:e.id},e.label)))),this.primaryActionHandler=e=>{var t,i;const o=e.detail.selectedValue;null===(i=(t=this.props).onSpPrimaryAction)||void 0===i||i.call(t,{actionId:o})},this.clickEventHandler=e=>{e.stopPropagation()},this.res=Object.assign({},s),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)()}render(){var e;return(0,o.h)("div",{class:"oj-sp-timeline-event-main-container oj-flex oj-sm-align-items-center oj-sm-padding-2x-vertical oj-sm-flex-wrap-nowrap"},(0,o.h)("div",{class:"oj-sp-timeline-event-overflow-container oj-flex-item oj-sm-align-items-center oj-sm-padding-3x-horizontal"},(0,o.h)("div",{tabIndex:0,class:"oj-sp-timeline-event-template-primary-text oj-typography-semi-bold oj-typography-body-sm oj-sm-padding-1x-bottom"},(0,o.h)("span",null,this.props.primaryText)),(0,o.h)("div",{tabIndex:0,class:"oj-sp-timeline-event-template-secondary-text oj-typography-body-sm"},(0,o.h)("span",null,this.props.secondaryText)),this.props.tertiaryText&&(0,o.h)("div",{tabIndex:0,class:"oj-sp-timeline-event-template-tertiary-text oj-typography-body-sm oj-sm-padding-1x-top"},(0,o.h)("span",null,this.props.tertiaryText))),(null===(e=this.props.primaryActions)||void 0===e?void 0:e.length)>0&&(0,o.h)("div",{class:"oj-flex oj-sm-flex-items-initial oj-sm-padding-2x-end oj-sm-justify-content-flex-end oj-sm-align-items-center",onClick:this.clickEventHandler},this.renderPrimaryActions()))}};a.defaultProps={},a._metadata={properties:{primaryText:{type:"string"},secondaryText:{type:"string"},tertiaryText:{type:"string"},primaryActions:{type:"Array<object>"}},events:{spPrimaryAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,i.customElement)("oj-sp-timeline-event-template"),__metadata("design:paramtypes",[Object])],a),t.TimelineEventTemplate=a})),define("oj-sp/timeline-event-template/loader",["require","exports","./timeline-event-template"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineEventTemplate=void 0,Object.defineProperty(t,"TimelineEventTemplate",{enumerable:!0,get:function(){return i.TimelineEventTemplate}})})),define("oj-sp/vertical-overview/components/HeaderGraphicContainer",["require","exports","preact","preact/hooks","oj-sp/common/EventDispatcher","ojs/ojlogger","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojbutton","ojs/ojavatar","ojs/ojmenu","ojs/ojtoolbar"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderGraphicContainer=void 0;const r=Object.assign({},n);t.HeaderGraphicContainer=e=>{const t=(0,o.useRef)(null),n=(0,o.useRef)(null);(0,o.useEffect)(()=>{l().catch(e=>{a.error(e)})},[e.displayOptions]);const l=async()=>{const e=n.current;e&&e.refresh()},d=e=>{e.preventDefault();const i=t.current;i&&i.load()},c=e=>{e.preventDefault()},p=t=>{const i=t.target.id.substring(e.componentId.length+1);"edit"===i?s.EventDispatcher.dispatch(s.EventDispatcher.EDIT_ACTION_EVENT_NAME,e.compRefElement,void 0):"updateMedia"===i?s.EventDispatcher.dispatch(s.EventDispatcher.UPDATE_MEDIA_ACTION_EVENT_NAME,e.compRefElement,void 0):a.warn("Unsupported action:"+i)};return(0,i.h)("div",{class:"oj-flex oj-sm-flex-wrap-nowrap"},!e.displayAvatar&&!e.displayPhoto&&!e.displayVideo&&(0,i.h)("div",{class:"oj-sp-vertical-overview-profile-skeleton oj-sm-margin-9x-bottom"}),e.displayAvatar&&(()=>{const t=e.avatar?e.avatar.initials:"",o=e.avatar&&e.avatar.src?e.avatar.src:"";return(0,i.h)("div",{class:"oj-sp-vertical-overview-avatar-container oj-sm-padding-9x-bottom"},(0,i.h)("oj-avatar",{role:"img",size:e.isSmallScreen?"xl":"2xl","aria-label":e.itemTitle,class:"oj-sp-vertical-overview-avatar",initials:""+t,src:""+o}))})(),e.displayPhoto&&!e.displayAvatar&&(0,i.h)("img",{src:e.photo.src,class:"oj-sp-vertical-overview-image4x3 oj-sm-margin-9x-bottom",alt:e.itemTitle}),e.displayVideo&&!e.displayAvatar&&!e.displayPhoto&&(()=>{var o;const s=[];return null===(o=e.video.tracks)||void 0===o||o.forEach((e,t)=>s.push((0,i.h)("track",{src:e.src,label:e.label,kind:e.kind,srcLang:e.srclang,default:0===t}))),(0,i.h)("div",{"aria-label":e.itemTitle},(0,i.h)("video",{id:e.componentId+"_video1",ref:t,controlsList:"nodownload",disablePictureInPicture:!0,controls:!0,playsInline:!0,class:"oj-sp-vertical-overview-video oj-sm-margin-9x-bottom","on-ended":d,onClick:c,poster:e.video.poster},(0,i.h)("source",{src:e.video.src,type:"video/mp4"}),s))})(),(e.editVisible||e.updateMediaVisible)&&(0,i.h)("div",{class:"oj-flex-item oj-sm-align-self-flex-end"},(0,i.h)("div",{class:"oj-sp-vertical-overview-toolbar-container oj-sm-margin-2x-start oj-sm-margin-9x-bottom"},(0,i.h)("oj-toolbar",{"aria-label":r.actions,ref:n,class:"oj-sp-vertical-overview-toolbar oj-sm-flex-direction-column",chroming:"borderless"},e.editVisible&&(0,i.h)("oj-button",{display:"icons",id:e.componentId+"_edit",disabled:e.editDisabled,class:"oj-button-sm",chroming:"borderless",onojAction:p},(0,i.h)("div",{slot:"startIcon",class:"oj-ux-ico-edit"}),r.editProfile),e.updateMediaVisible&&(0,i.h)("oj-button",{display:"icons",id:e.componentId+"_updateMedia",disabled:e.updateMediaDisabled,class:"oj-button-sm",chroming:"borderless",onojAction:p},(0,i.h)("div",{slot:"startIcon",class:"oj-ux-ico-camera"}),r.updateMedia)))))}})),define("css!oj-sp/vertical-overview/vertical-overview-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/vertical-overview/vertical-overview",["require","exports","ojs/ojvcomponent","preact","oj-sp/common-util/common-util","oj-sp/common/EventDispatcher","./components/HeaderGraphicContainer","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojresponsiveutils","css!./vertical-overview-styles"],(function(e,t,i,o,s,a,n,r,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalOverview=void 0;let p=class extends o.Component{constructor(e){var t;super(e),this.state={isViewMoreVisible:!1},this.voContainerRef=(0,o.createRef)(),this.voDetailContainer=(0,o.createRef)(),this.voInnerContent=(0,o.createRef)(),this.footerRef=(0,o.createRef)(),this.SM_ONLY=d.createMediaQueryObservable(c.getFrameworkQuery(c.FRAMEWORK_QUERY_KEY.SM_ONLY)),this.expandActionHandler=e=>{e.preventDefault()},this.viewMoreHandler=e=>{e.preventDefault(),this.accMoreContentDisplayed=this.res.accMoreContentDisplayed,this.currentMaxColumnCount+=2,this.resizeOverflowPanel().catch(e=>{l.error(e)})},this.evaluateHeaderBackgroundMode=()=>{let e="Redwood"===(0,s.getBaseSeededTheme)()?this.props.displayMode:"mixed";e=e&&e.match(/^(light|mixed)$/)?e:void 0;const t={bubbles:!0};t.detail={mode:e},a.EventDispatcher.dispatch(a.EventDispatcher.OVERRIDE_THEME_CONFIG,this.compRefElement,t.detail,t.bubbles);return e||(""===(0,s.computedStyleOnElement)(this.compRefElement,"--oj-sp-theme-page-container-bkgd")?"light":"mixed")},this.processDisplayOptions=e=>{e?(this.editVisible=e.edit&&("on"===e.edit||"disabled"===e.edit),this.editDisabled=e.edit&&"disabled"===e.edit,this.updateMediaVisible=e.updateMedia&&("on"===e.updateMedia||"disabled"===e.updateMedia),this.updateMediaDisabled=e.updateMedia&&"disabled"===e.updateMedia):(this.editVisible=!1,this.updateMediaVisible=!1)},this.calcDisplayAvatar=async e=>{e&&(e.src||e.initials)?(this.displayAvatar=!0,e.src&&!e.initials?(this.avatarWorkaround(e),this.compRefElement.classList.add("oj-sp-vertical-overview-avatar-special")):e.initials&&this.compRefElement.classList.remove("oj-sp-vertical-overview-avatar-special")):this.displayAvatar=!1},this.resizeOverflowPanel=async()=>{const e=this.voDetailContainer.current,t=this.voContainerRef.current;if(!e||!t)return;if(this.setBodyPaddingBottom(),this.SM_ONLY())return e.style.width="100%",e.style.columnCount="initial",e.style.columnWidth="initial",t.style.width="100%",this.setState({isViewMoreVisible:!1}),this.viewMoreInitialized=!1,void(this.isViewmoreBackgroundSet=!1);const i=this.voInnerContent.current;let o=0;if(i)for(let e=0;e<i.getClientRects().length;e++)o+=i.getClientRects()[e].height;if(e.style.width="252px",e.style.columnCount="unset",o>e.clientHeight){const t=Math.ceil(o/e.clientHeight),i=Math.min(t,this.currentMaxColumnCount);e.style.width=252*i+96*(i-1)+"px",e.style.columnCount=String(i),e.style.columnGap="96px",e.style.columnWidth="252px"}let a=Math.ceil(o/e.clientHeight);const n=Math.min(a,this.currentMaxColumnCount);if(i.getClientRects().length>1&&i.getClientRects().length!==n){a=i.getClientRects().length;const t=Math.min(a,this.currentMaxColumnCount);e.style.width=252*t+96*(t-1)+"px",e.style.columnCount=String(t)}this.setState({isViewMoreVisible:a>this.currentMaxColumnCount}),this.state.isViewMoreVisible&&(this.viewMoreInitialized=!0),!this.isViewmoreBackgroundSet&&this.state.isViewMoreVisible&&this.updateViewMoreLinkBackground(),t.style.width=`calc(${e.style.width} + (2 * 48px))`,(0,s.removeOverflowFocus)(e,i)},this.updateViewMoreLinkBackground=()=>{const e=this.voContainerRef.current;let t;if(this.compRefElement){const e=getComputedStyle(this.compRefElement).getPropertyValue("background-color");0===e.indexOf("rgb(")?(t=e.split("(")[1].split(")")[0],this.isViewmoreBackgroundSet=!0):l.warn("Not able to retrieve background-color:"+e)}else t="255,255,255",this.isViewmoreBackgroundSet=!0;e&&t&&e.style.setProperty("--oj-sp-vertical-overview-bg-color",t)},this.calculateMinHeightForSmallScreen=()=>{let e=0;if(this.compRefElement){const t=this.compRefElement.getBoundingClientRect();e=window.pageYOffset+t.top,this.compRefElement.style.setProperty("--oj-sp-vertical-overview-top-position",e+"px")}},this.ref=(0,o.createRef)(),this.res=Object.assign({},r),this.uniqueId=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.background="mixed",this.displayAvatar=!1,this.displayPhoto=!1,this.displayVideo=!1,this.editVisible=!1,this.editDisabled=!1,this.updateMediaDisabled=!1,this.updateMediaVisible=!1,this.currentMaxColumnCount=2,this.viewMoreInitialized=!1,this.isViewmoreBackgroundSet=!1,this.accMoreContentDisplayed=""}componentDidMount(){this.compRefElement=this.ref.current,this.background=this.evaluateHeaderBackgroundMode(),this.initContentSizeHelpers(),this.calculateMinHeightForSmallScreen(),this.calcDisplayAvatar(this.props.avatar).catch(e=>{l.error(e)})}componentDidUpdate(e){this.props.avatar!==e.avatar&&this.calcDisplayAvatar(this.props.avatar).catch(e=>{l.error(e)})}render(e){const t="mixed"===this.background?"oj-color-invert oj-sp-color-invert-bg":"oj-bg-neutral-0";let i="oj-sp-vertical-overview-background-image oj-sp-vertical-overview-mobile-min-height ";return i+=(0,s.isAskOracleEnabled)()?"oj-sm-padding-12x-bottom":"oj-sm-padding-6x-bottom",(0,o.h)("div",{class:""+t,"data-oj-context":!0,ref:this.ref},(0,o.h)("div",{id:this.uniqueId+"_container1",ref:this.voContainerRef,class:"oj-sp-vertical-overview-container oj-flex oj-sm-flex-wrap-nowrap oj-sm-flex-direction-column oj-sm-padding-4x-horizontal oj-md-padding-12x-horizontal "+i,role:"group","aria-labelledby":this.uniqueId+"_title1"},this.renderPlaceHolderForHeaderNavigation(),(0,o.h)("div",{class:"oj-sp-vertical-overview-detail-container oj-flex-item",ref:this.voDetailContainer},(0,o.h)("div",{class:"oj-sp-vertical-overview-content-inner oj-flex-item",ref:this.voInnerContent},this.renderVOHeader(e),this.renderVOBodyAndFooter()))))}renderPlaceHolderForHeaderNavigation(){return(0,o.h)("div",{class:"oj-sp-vertical-overview-header-placeholder oj-sm-flex-wrap-nowrap oj-sp-vertical-overview-fadeable oj-sm-padding-4x-bottom"})}renderVOHeader(e){return(0,o.h)("div",{id:this.uniqueId+"_header1",class:"oj-flex-item oj-flex"},(0,o.h)("div",{onClick:this.expandActionHandler},this.renderHeaderGraphicObject(e),this.renderHeaderText()))}renderHeaderGraphicObject(e){return this.displayPhoto=!(!e.photo||!e.photo.src),this.displayVideo=!(!e.video||!e.video.src),this.processDisplayOptions(e.displayOptions),(0,o.h)(n.HeaderGraphicContainer,{componentId:this.uniqueId,compRefElement:this.compRefElement,itemTitle:e.itemTitle,isSmallScreen:this.SM_ONLY(),displayAvatar:this.displayAvatar,displayPhoto:this.displayPhoto,displayVideo:this.displayVideo,avatar:e.avatar,photo:e.photo,video:e.video,displayOptions:e.displayOptions,editVisible:this.editVisible,editDisabled:this.editDisabled,updateMediaVisible:this.updateMediaVisible,updateMediaDisabled:this.updateMediaDisabled})}renderHeaderText(){return(0,o.h)("div",{class:"oj-sp-vertical-overview-break-inside-avoid oj-sp-vertical-overview-fadeable"},(0,o.h)("h1",{id:this.uniqueId+"_title1",title:this.props.itemTitle,class:"oj-text-color-primary oj-sm-padding-0 oj-sm-margin-0 oj-helper-overflow-wrap-anywhere oj-typography-title-4 oj-line-clamp-2"},this.props.itemTitle),this.props.itemSubtitle?this.renderSubtitle():null)}renderSubtitle(){return(0,o.h)("div",{id:this.uniqueId+"_subtitle1",title:this.props.itemSubtitle,class:"oj-typography-body-xs oj-text-color-primary oj-helper-overflow-wrap-anywhere oj-line-clamp-2"},this.props.itemSubtitle)}renderVOBodyAndFooter(){return(0,o.h)("div",{class:"oj-flex-item oj-sp-vertical-overview-fadeable"},(0,o.h)("div",{class:"oj-sm-margin-6x-top oj-sp-vertical-overview-body"},this.props.body),this.state.isViewMoreVisible&&this.renderViewMoreLinkRelated(),!this.state.isViewMoreVisible&&this.renderFooterSlot())}renderViewMoreLinkRelated(){const e=[];return e.push((0,o.h)("div",{class:"oj-sp-vertical-overview-viewmore-container oj-md-padding-10x-top oj-md-padding-3x-bottom"},(0,o.h)("a",{title:this.res.viewMore,href:"#",class:"oj-link-standalone",onClick:this.viewMoreHandler},this.res.viewMore))),this.viewMoreInitialized&&e.push((0,o.h)("div",{id:this.uniqueId+"_accMoreContentDisplayedMessage",role:"status","aria-live":"assertive",class:"oj-helper-hidden-accessible"},(0,o.h)("span",null,this.accMoreContentDisplayed))),e.push((0,o.h)("div",{class:"oj-flex-item oj-sm-flex-wrap-nowrap"})),e}renderFooterSlot(){return(0,o.h)("div",{id:this.uniqueId+"_footer1",class:"oj-sp-vertical-overview-footer-sticky-bottom",ref:this.footerRef},this.props.footer)}avatarWorkaround(e){const t=this.compRefElement,i=e.src?`url('${e.src}')`:void 0;t.style.setProperty("--oj-sp-vertical-overview-avatar-src",i)}initContentSizeHelpers(){const e=this.voContainerRef.current;e&&e.style.setProperty("--oj-sp-vertical-overview-column-width","252px"),this.setBodyPaddingBottom(),this.resizeOverflowPanel().catch(e=>{l.error(e)}),this.observeElements(()=>this.resizeOverflowPanel(),[this.ref.current,this.voDetailContainer.current]);const t=this.voInnerContent.current;new MutationObserver(()=>this.resizeOverflowPanel()).observe(t,{attributes:!1,childList:!0,subtree:!0}),this.SM_ONLY.subscribe(()=>this.resizeOverflowPanel())}setBodyPaddingBottom(){const e=this.footerRef.current;e&&this.compRefElement&&this.compRefElement.style.setProperty("--oj-sp-vertical-overview-footer-height",e.clientHeight+"px")}observeElements(e,t){if("undefined"!=typeof ResizeObserver&&this.compRefElement&&!this.compRefElement.classList.contains("oj-sp-vertical-overview-disable-resize-observer")){const i=new ResizeObserver(()=>requestAnimationFrame(e));for(const e of t)i.observe(e)}else l.warn("Resize helper not supported")}};p.defaultProps={displayOptions:{edit:"off",updateMedia:"off"},displayMode:"mixed"},p._metadata={properties:{itemTitle:{type:"string"},itemSubtitle:{type:"string"},avatar:{type:"object",properties:{src:{type:"string"},initials:{type:"string"}}},photo:{type:"object",properties:{src:{type:"string"}}},video:{type:"object",properties:{src:{type:"string"},poster:{type:"string"},tracks:{type:"Array<object>"}}},displayOptions:{type:"object",properties:{edit:{type:"string",enumValues:["disabled","on","off"]},updateMedia:{type:"string",enumValues:["disabled","on","off"]}}},displayMode:{type:"string",enumValues:["mixed","light"]}},slots:{body:{},footer:{}},events:{spEdit:{},spUpdateMedia:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},p=__decorate([(0,i.customElement)("oj-sp-vertical-overview"),__metadata("design:paramtypes",[Object])],p),t.VerticalOverview=p})),define("oj-sp/vertical-overview/loader",["require","exports","./vertical-overview"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalOverview=void 0,Object.defineProperty(t,"VerticalOverview",{enumerable:!0,get:function(){return i.VerticalOverview}})})),define("text!oj-sp/welcome-page/component.json",[],(function(){return'{"name":"welcome-page","version":"2404.0.0","pack":"oj-sp","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","jetVersion":"^15.0.0","dependencies":{"oj-sp-common":"2404.0.0","oj-sp-header-welcome-banner":"2404.0.0"},"implements":["SpWelcomePageElement"],"displayName":"Welcome Page Template","description":"Provide a friendly introduction to a flow and highlight the most important information.","type":"composite","subcomponentType":"patternImpl","properties":{"displayOptions":{"displayName":"Display options","description":"Configure display options of header welcome banner.","type":"object|null","properties":{"imageStretch":{"type":"string","displayName":"Image Stretch","description":"Specifies the background image stretching","value":"none","enumValues":["none","full"],"propertyEditorValues":{"none":{"displayName":"None","description":"Stretched to the edge"},"full":{"displayName":"Full","description":"Full bleed image"}}},"mobileImage":{"type":"string","description":"Specify if image is displayed in mobile view.","displayName":"Display Mobile Image","value":"on","enumValues":["on","off"],"propertyEditorValues":{"on":{"displayName":"On","description":"Image is displayed in mobile view."},"off":{"displayName":"Off","description":"Image is not displayed in mobile view."}}},"inFlowBack":{"description":"Defines whether In-flow Back action is visible","type":"boolean","value":false},"responsivePadding":{"type":"string","description":"Specify if responsive padding should be on or off","displayName":"Responsive Padding","enumValues":["on","off"],"status":[{"target":"propertyValue","type":"deprecated","since":"2307.0.0","description":"Enum value \'off\' is no longer supported, and will be removed in a future release. Use \'on\' instead.","value":["off"]}],"propertyEditorValues":{"on":{"displayName":"On","description":"Responsive padding is on."},"off":{"displayName":"Off","description":"Responsive padding is off."}}}}},"translations":{"description":"Instance Overrides of Strings","type":"object","properties":{"inFlowBack":{"type":"string","value":"Back"}}},"pageTitle":{"displayName":"Page Title","description":"Page title or a personalized message of the page.","translatable":true,"type":"string","required":true,"extension":{"vbdt":{"placeholderValue":"Page Title"}}},"overlineText":{"displayName":"Overline","description":"Overline is used to introduce a headline at the top of page title.","translatable":true,"type":"string","required":false,"extension":{"vbdt":{"placeholderValue":"Overline Text"}}},"descriptionText":{"displayName":"Description","description":"Additional supporting information to the page title.","translatable":true,"type":"string","required":false,"extension":{"vbdt":{"placeholderValue":"Description Text"}}},"backgroundColor":{"type":"string","displayName":"Background Color","description":"The background color can be one of the predefined colors or an option to use the dominant color of the illustration","value":"dark-ocean","enumValues":["dark-ocean","dark-pine","dark-lilac","dark-teal","dark-rose","dark-pebble","dark-slate","dark-plum","dark-sienna","auto"],"propertyEditorValues":{"dark-ocean":{"displayName":"Dark Ocean","description":"Dark Ocean Background Color (NetSuite)"},"dark-pine":{"displayName":"Dark Pine","description":"Dark Pine Background Color (OCI)"},"dark-lilac":{"displayName":"Dark Lilac","description":"Dark Lilac Background Color (GBUs)"},"dark-teal":{"displayName":"Dark Teal","description":"Dark Teal Background Color (Finance)"},"dark-rose":{"displayName":"Dark Rose","description":"Dark Rose Background Color (HCM)"},"dark-pebble":{"displayName":"Dark Pebble","description":"Dark Pebble Background Color (Dev Tools)"},"dark-slate":{"displayName":"Dark Slate","description":"Dark Slate Background Color (Database)"},"dark-plum":{"displayName":"Dark Plum","description":"Dark Plum Background Color (CX)"},"dark-sienna":{"displayName":"Dark Sienna","description":"Dark Sienna Background Color (SCM)"},"dominant-color":{"displayName":"Auto","description":"Use Dominant Color of Illustration"}}},"illustrationBackground":{"displayName":"Illustration background source URL","description":"The source URL for the illustration background image, together with the background color to form the background image layer.","type":"string","required":false},"illustrationForeground":{"displayName":"Illustration foreground source URL","description":"The source URL for the illustration foreground image.","type":"string","required":false},"primaryAction":{"displayName":"Primary Action","description":"Primary Action","type":"object|null","properties":{"label":{"type":"string","displayName":"Label","description":"Label describing the action."},"icon":{"type":"string","displayName":"Icon","description":"Optional icon for the action."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","value":"on","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"secondaryAction":{"displayName":"Secondary Action","description":"Secondary Action","type":"object|null","status":[{"type":"deprecated","since":"2401.0.0","description":"The secondaryAction property is deprecated. Use secondaryActions instead."}],"properties":{"label":{"type":"string","displayName":"Label","description":"Label describing the action."},"icon":{"type":"string","displayName":"Icon","description":"Optional icon for the action."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled."},"off":{"displayName":"Off","description":"The action is not visible."},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled."}}}}},"secondaryActions":{"displayName":"Secondary Actions","description":"A list of secondary actions of the page. This supports up to 6 actions. Each action has [id, label, icon, display].","type":"Array<object>|null","required":false,"extension":{"vbdt":{"itemProperties":{"id":{"type":"string","displayName":"ID","description":"This is a unique id associated with the secondary action. When the user clicks on the secondary action, this id is passed as a payload with the secondary action event."},"label":{"type":"string","displayName":"Label","translatable":true,"description":"Label describing the action."},"icon":{"type":"string","displayName":"Icon","description":"Optional icon for the action."},"display":{"type":"string","displayName":"Action display state","description":"Use \'on\' to make visible and enabled, \'off\' to be not visible, and \'disabled\' to be visible but disabled.","enumValues":["on","off","disabled"],"propertyEditorValues":{"on":{"displayName":"On","description":"The action is visible and enabled"},"off":{"displayName":"Off","description":"The action is not visible"},"disabled":{"displayName":"Disabled","description":"The action is visible and disabled"}}}}}}}},"methods":{},"events":{"spPrimaryAction":{"displayName":"Primary action event","description":"Dispatched when the primary actions is triggered.","bubbles":false,"cancelable":false,"eventGroup":"common"},"spSecondaryAction":{"displayName":"Secondary action event","description":"Dispatched when the secondary actions is triggered.","bubbles":false,"cancelable":false,"eventGroup":"common","detail":{"actionId":{"description":"The ID of the secondary action clicked.","type":"string"}}},"spInFlowBack":{"displayName":"spInFlowBack event","description":"Triggered when the In-flow Back action is clicked","bubbles":false,"cancelable":false,"eventGroup":"common"}},"slots":{"":{"description":"Content of the welcome page.","displayName":"Default slot","implicitBusyContext":true,"minItems":1,"extension":{"vbdt":{"placeholderTemplates":[{"defaultPlaceholder":true}]}}},"search":{"description":"Slot for adding a component implementing search functionality.","displayName":"Search slot","maxItems":1,"preferredContent":["InputSearchElement"]}},"extension":{"catalog":{"category":"Redwood Page Templates","tags":["Redwood"],"docUrl":"https://static.oracle.com/cdn/spectra-ui/oj-sp/2404.0.0/component.html?name=Welcome%20Page%20&Test%20Adapter%20=docs/testAdapterAPI/classes/ojspectrawelcomepage.html","coverImage":"extension/catalog/images/ico-welcome-page-template-48.svg"},"vbdt":{"componentPalette":{"visibility":"never"},"pi":{"layouts":{"general":{"customizers":[{"propertyName":"pageTitle"},{"propertyName":"overlineText"},{"propertyName":"descriptionText"},{"propertyName":"backgroundColor","type":"enumeration"},{"propertyName":"illustrationBackground"},{"propertyName":"illustrationForeground"},{"type":"heading","displayName":"Display Options"},{"propertyName":"displayOptions.imageStretch","displayName":"Image stretch","type":"enumeration"},{"propertyName":"displayOptions.mobileImage","displayName":"Mobile image","type":"enumeration"},{"propertyName":"displayOptions.inFlowBack","displayName":"In Flow Back"},{"type":"heading","title":"Primary Action"},{"propertyName":"primaryAction.label","displayName":"Label","translatable":true},{"propertyName":"primaryAction.display","displayName":"Display","type":"enumeration"},{"propertyName":"primaryAction.icon","displayName":"Icon"},{"propertyName":"secondaryActions","displayName":"Secondary Actions","singleName":"Secondary Action","type":"array","addOrRemove":true,"reorder":true,"arrayType":{"id":{},"label":{},"display":{}},"drill":{"layout":"secondaryActionsPanel"}}]},"secondaryActionsPanel":{"customizers":[{"propertyName":"secondaryActions.id","displayName":"ID"},{"propertyName":"secondaryActions.label","displayName":"Label"},{"propertyName":"secondaryActions.display","displayName":"Display","type":"enumeration"}]}},"events":{"suggestions":[{"name":"spPrimaryAction","type":"component"},{"name":"spSecondaryAction","type":"component","mappings":[{"variableName":"actionId","expression":"{{$event.detail.secondaryItem}}","type":"string"}]},{"name":"spInFlowBack","type":"component"}]}}}},"icon":{"iconPath":"extension/catalog/images/ico-welcome-page-template-48.svg"}}'})),define("text!oj-sp/welcome-page/welcome-page-view.html",[],(function(){return'<html><head></head><body><div class="oj-sp-welcome-page-container oj-sp-public-primary-content-container"><oj-sp-header-welcome-banner data-otel-hero="headerWelcomeBanner"data-oj-context="":id="[[uid+\'_hwb\']]"page-title="[[$properties.pageTitle]]"overline-text="[[ $properties.overlineText ]]"description-text="[[ $properties.descriptionText ]]"background-color="[[ $properties.backgroundColor ]]"illustration-background="[[ $properties.illustrationBackground ]]"illustration-foreground="[[ $properties.illustrationForeground ]]"primary-action.label="[[ $properties.primaryAction.label ]]"primary-action.icon="[[ $properties.primaryAction.icon ]]"primary-action.display="[[ $properties.primaryAction.display ]]"secondary-actions="[[ secondaryActions() ]]"display-options.image-stretch="[[ $properties.displayOptions.imageStretch ]]"display-options.mobile-image="[[ $properties.displayOptions.mobileImage ]]"display-options.in-flow-back="[[$properties.displayOptions.inFlowBack]]"translations.in-flow-back="[[$properties.translations.inFlowBack]]"display-options.responsive-padding="[[ $properties.displayOptions.responsivePadding ]]"on-sp-primary-action="[[ composite.onSpPrimaryAction ]]"on-sp-secondary-action="[[ composite.onSpSecondaryAction ]]"><oj-bind-if test="[[ slotCounts &amp;&amp; slotCounts[\'search\'] > 0 ]]"><div slot="search"><oj-bind-slot name="search"></oj-bind-slot></div></oj-bind-if></oj-sp-header-welcome-banner><div id="main-slot-wrapper"data-otel-hero="oj-sp-welcome-page.default":class="[[{\'oj-sm-margin-6x-top oj-md-margin-4x-top oj-md-padding-4x-top\': true,\n  \'oj-sm-only-padding-4x-horizontal oj-md-only-padding-6x-horizontal oj-lg-padding-12x-horizontal\' : !enableResponsivePadding()}]]"data-oj-context=""><oj-bind-slot></oj-bind-slot></div></div></body></html>'})),define("oj-sp/welcome-page/welcome-page-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojresponsiveknockoututils","ojs/ojknockout","ojs/ojmenu","ojs/ojtoolbar","oj-sp/header-welcome-banner/loader"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModel=void 0;const n="background: #222; color: #bada55";t.ViewModel=class{constructor(e){var t;this.responsivePaddingsHandler=()=>{this.composite&&(this.enableResponsivePadding()?this.composite.classList.add("oj-sp-responsive-paddings-on"):this.composite.classList.remove("oj-sp-responsive-paddings-on"))},this.processActions=(e,t)=>{let i=[];e&&!t&&i.push(e),t&&(i=[...t]),e&&t&&s.warn("[oj-sp-welcome-page] Both secondaryActions and secondaryAction have been configured. ","Only one them must be configured"),this.secondaryActions(i)},this.properties=e.properties,this.slotCounts=e.slotCounts;const n=o.getContext(e.element).getBusyContext();this.busyResolve=n.addBusyState({description:"Web Component Startup - Waiting for data"}),this.composite=e.element,this.uid=e.uniqueId,this.secondaryActions=i.observableArray(),this.screenRange=a.createScreenRangeObservable(),this.enableResponsivePadding=i.observable(!!(null===(t=this.properties)||void 0===t?void 0:t.displayOptions)&&"on"===this.properties.displayOptions.responsivePadding),this.busyResolve()}activated(e){s.log(`%c CCA ${this.uid} activated`,n)}connected(e){s.log(`%c CCA ${this.uid} connected`,n)}bindingsApplied(e){s.log(`%c CCA ${this.uid} bindingsApplied`,n),this.responsivePaddingsHandler(),this.processActions(this.properties.secondaryAction,this.properties.secondaryActions)}async propertyChanged(e){s.log(`%c CCA ${this.uid} '${e.property}' property changed: ${JSON.stringify(e.previousValue)} ====> ${JSON.stringify(e.value)}`,n),"displayOptions"===e.property&&e.value&&e.value.responsivePadding&&(this.enableResponsivePadding("on"===e.value.responsivePadding),this.responsivePaddingsHandler()),"secondaryAction"===e.property&&this.processActions(e.value,this.properties.secondaryActions),"secondaryActions"===e.property&&this.processActions(this.properties.secondaryAction,e.value)}disconnected(e){s.log(`%c CCA ${this.uid} disconnectd`,n)}}})),define("css!oj-sp/welcome-page/welcome-page-styles",[],(function(){})),define("oj-sp/welcome-page/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./welcome-page-view.html","./welcome-page-viewModel","css!./welcome-page-styles","css!oj-sp/common/common-style.css"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-welcome-page",{metadata:JSON.parse(o),view:s,viewModel:a.ViewModel})})),define("text!oj-sp/flex-checkbox/component.json",[],(function(){return'{"name":"flex-checkbox","pack":"oj-sp","type":"composite","displayName":"Flex checkbox","license":"https://www.oracle.com/us/corporate/contracts/saas-online-csa-us-1894130.pdf","description":"Flex checkbox is an internal component which is used to render a checkbox for Descriptive FlexFields.","version":"2404.0.0","jetVersion":"^15.0.0","subcomponentType":"packPrivate","icon":{"iconPath":"extension/images/cca-checkbox-switch.svg"},"extension":{"catalog":{"tags":["Redwood"],"coverImage":"extension/images/cca-checkbox-switch.svg"}},"properties":{"metadata":{"displayName":"Metadata","description":"Metadata from Dynamic UI","type":"Object","writeback":false},"describedBy":{"displayName":"Described By","description":"It is used to establish a relationship between this component and another element. To facilitate correct screen reader behavior, the described-by attribute is copied to the aria-describedby attribute on the component\'s DOM element.","type":"string"},"help":{"displayName":"Help","description":"Component help information","type":"object","translatable":true,"properties":{"instruction":{"displayName":"Help instruction","description":"Represents advisory information for the component, such as would be appropriate for a tooltip. This information is appended to the basic formatting information supplied by the default hint","type":"string"}}},"helpHints":{"displayName":"Help Hints","description":"Represents hints for oj-form-layout element to render help information on the label of the component","type":"object","translatable":true,"properties":{"definition":{"displayName":"Help definition","description":"Hint for help definition text associated with the label","type":"string"},"source":{"displayName":"Help source","description":"Hint for help source number associated with the label.","type":"string"}}},"labelHint":{"displayName":"Label Text","description":"Represents a hint for oj-form-layout element to render a label on the editable component. This is used only if the editable component is added as a direct child to an oj-form-layout element.","type":"string","propertyGroup":"common","translatable":true},"readonly":{"displayName":"Readonly","description":"Whether the component is read-only. The element\'s readonly property is used as its initial value if it exists, when the attribute is not explicitly set. When neither is set, readonly defaults to false.","type":"boolean","value":false,"propertyGroup":"common","binding":{"consume":{"name":"readonly"}}},"value":{"displayName":"Value","description":"The state of the flex-checkbox component (checked/unchecked).","type":"string","writeback":true,"propertyGroup":"data"},"userAssistanceDensity":{"description":"Specifies the density of the form component\'s user assistance presentation.","type":"string","displayName":"User Assistance Density","value":"reflow","enumValues":["compact","efficient","reflow"],"propertyEditorValues":{"compact":{"description":"Messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required.","displayName":"Compact"},"efficient":{"description":"Messages, help, hints, and required are all shown inline under the field with reserved space.","displayName":"Efficient"},"reflow":{"description":"Messages, help, hints, and required are all shown inline under the field with no reserved space.","displayName":"Reflow"}},"binding":{"consume":{"name":"userAssistanceDensity"}},"extension":{"themes":{"unsupportedThemes":["Alta"]}}},"labelEdge":{"description":"Defines how the label of a component is created.","type":"string","displayName":"Label Edge","enumValues":["inside","none","provided"],"propertyEditorValues":{"inside":{"description":"The component creates the label using the label-hint attribute.","displayName":"Inside"},"none":{"description":"The component will not have a label, regardless of whether it\'s in an oj-form-layout or not.","displayName":"None"},"provided":{"description":"Label is provided by the parent if the parent is an oj-form-layout.","displayName":"Provided"}},"binding":{"consume":{"name":"labelEdge"}}},"labelledBy":{"displayName":"Labelled By","description":"The oj-label sets the labelledBy property programmatically on the form component to make it easy for the form component to find its oj-label component","type":"string","writeback":false},"messagesCustom":{"displayName":"Messages Custom","description":"List of messages an app would add to the component when it has business/custom validation errors that it wants the component to show","type":"Array","writeback":true},"disabled":{"displayName":"Disable Flex Checkbox","description":"Disable Flex Checkbox.","type":"boolean","value":false,"writeback":false},"required":{"displayName":"Required","description":"Component required true or not","type":"boolean","value":false,"writeback":false}}}'})),define("text!oj-sp/flex-checkbox/flex-checkbox-view.html",[],(function(){return'<html><head></head><body><div><oj-checkboxset :id="[[$uniqueId + \'_checkbox\']]"described-by="[[$properties.describedBy]]"labelled-by="[[$properties.labelledBy]]"label-hint="[[$properties.labelHint]]"disabled="[[$properties.disabled]]"readonly="[[$properties.readonly]]"help.instruction="[[$properties.help?.instruction ? $properties.help.instruction : \'\']]"value="{{currentValue}}"help-hints.definition="[[$properties.helpHints?.definition ? $properties.helpHints.definition : \'\']]"help-hints.source="[[$properties.helpHints?.source ? $properties.helpHints.source : \'\']]"user-assistance-density="[[$properties.userAssistanceDensity]]"label-edge="[[$properties.labelEdge]]"on-value-changed="[[valueChanged]]"messages-custom="[[$properties.messagesCustom]]"required="[[$properties.required]]":title="[[$properties.value]]"><oj-option value="true":aria-label="[[$properties.value]]"></oj-option><oj-bind-if test="[[$properties.readonly]]"><span><oj-bind-text value="[[$properties.value]]"></oj-bind-text></span></oj-bind-if></oj-checkboxset></div></body></html>'})),define("oj-sp/flex-checkbox/flex-checkbox-viewModel",["require","exports","knockout","ojs/ojcontext","ojs/ojlogger","ojs/ojcheckboxset","ojs/ojknockout","ojs/ojlabel"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexCheckboxViewModel=void 0;t.FlexCheckboxViewModel=class{constructor(e){this.currentValue=i.observableArray(),this.readOnly=i.observable(!1),this.valueChanged=e=>{"internal"===e.detail.updatedFrom&&(0===e.detail.value.length?this.properties.value=this.unCheckedValue:this.properties.value=this.checkedValue)};const t=o.getContext(e.element).getBusyContext();this.busyResolve=t.addBusyState({description:"Web Component Startup - Waiting for data"});const s=e.properties;this.composite=e.element,this.properties=e.properties,this.uid=e.uniqueId,s.labelHint&&(this.labelHint=s.labelHint),s.metadata.extension&&("C"===s.metadata.extension.FND_ACFF_DVT&&(this.defaultValue=s.metadata.extension.FND_ACFF_DV),this.checkedValue=s.metadata.extension.FND_ACFF_CheckboxCheckedValue,this.unCheckedValue=s.metadata.extension.FND_ACFF_CheckboxUncheckedValue,!s.value&&this.defaultValue?this.properties.value=this.defaultValue:s.value===this.checkedValue?this.currentValue(["true"]):this.currentValue([]),"true"===s.metadata.extension.FND_ACFF_IsReadOnly?this.readOnly(!0):"false"===s.metadata.extension.FND_ACFF_IsReadOnly?this.readOnly(!1):this.readOnly(s.readonly)),this.busyResolve()}activated(e){s.log("activated")}connected(e){s.log("connected")}bindingsApplied(e){s.log("bindings applied")}propertyChanged(e){"external"===e.updatedFrom&&("value"===e.property?e.value===this.checkedValue?this.currentValue(["true"]):this.currentValue([]):"readonly"===e.property&&this.readOnly(e.value))}}})),define("css!oj-sp/flex-checkbox/flex-checkbox-styles",[],(function(){})),define("oj-sp/flex-checkbox/loader",["require","exports","ojs/ojcomposite","text!./component.json","text!./flex-checkbox-view.html","./flex-checkbox-viewModel","css!./flex-checkbox-styles"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.register("oj-sp-flex-checkbox",{metadata:JSON.parse(o),view:s,viewModel:a.FlexCheckboxViewModel})})),define("oj-sp/vertical-anchor-navigator/components/navigator/NavigatorListItem",["require","exports","preact","preact/hooks","preact/compat","ojs/ojtranslation"],(function(e,t,i,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigatorListItem=void 0,t.NavigatorListItem=(0,s.forwardRef)((e,t)=>{const{id:n,sectionTitle:r,tabIndex:l,selected:d,onClickHandler:c,onKeyDownHandler:p}=e,u=d?"anchor-item-selected":"",h=(0,s.useRef)(null);return(0,o.useImperativeHandle)(t,()=>({focusSection:()=>{var e;null===(e=h.current)||void 0===e||e.focus()},getElement:()=>null==h?void 0:h.current}),[]),(0,i.h)("li",{id:n,ref:h,class:"oj-sp-navigator-list-item oj-flex oj-sm-flex-direction-row oj-sm-justify-content-flex-start oj-sm-align-items-center oj-sm-flex-wrap-nowrap "+u,title:r,"aria-selected":d,"aria-label":a.applyParameters(e.translatedStrings.sectionPanelContext,{sectionTitle:r}),tabIndex:l,onClick:c,onKeyDown:p},(0,i.h)("div",{class:"selected-anchor-item-icon oj-ux-ico-triangle-right-alt-s"}),(0,i.h)("span",{class:"oj-line-clamp-3 oj-sm-padding-4x-start"},r))})})),define("oj-sp/vertical-anchor-navigator/vertical-anchor-navigator-types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEYBOARD_EVENT=void 0,function(e){e.arrowDown="ArrowDown",e.arrowUp="ArrowUp",e.enter="Enter",e.tab="Tab"}(t.KEYBOARD_EVENT||(t.KEYBOARD_EVENT={}))})),define("css!oj-sp/vertical-anchor-navigator/components/navigator/Navigator",[],(function(){})),define("oj-sp/vertical-anchor-navigator/components/navigator/NavigatorList",["require","exports","preact","preact/hooks","preact/compat","oj-sp/common-util/common-util","./NavigatorListItem","../../vertical-anchor-navigator-types","css!./Navigator"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigatorList=void 0,t.NavigatorList=(0,s.forwardRef)((e,t)=>{const{sections:s,id:l,selectedSection:d}=e,c=(0,o.useRef)(null),p=new Map(s.map(e=>[e.sectionName,(0,o.useRef)(e)]));(0,o.useImperativeHandle)(t,()=>({focusNavigator:()=>{var e,t,i,o;p.size>0&&(null===(o=null===(i=null===(t=null===(e=p.values())||void 0===e?void 0:e.next())||void 0===t?void 0:t.value)||void 0===i?void 0:i.current)||void 0===o||o.focusSection())}}),[]);const u=(t,i)=>{e.onSelectedSectionChangeHandler({event:t,selectedSection:i})},h=e=>{var t,i;if(p.has(e))return null===(i=null===(t=p.get(e))||void 0===t?void 0:t.current)||void 0===i?void 0:i.getElement()};return(0,i.h)("nav",null,(0,i.h)("ul",{ref:c,class:(0,a.getDirectionality)()==a.DIRECTIONALITY.RIGHT_TO_LEFT?"rtl-mode":"ltr-mode"},null==s?void 0:s.map((t,o)=>{const s=t.sectionName,a=t.getPropertyValue("labelHint");return(0,i.h)(n.NavigatorListItem,{translatedStrings:e.translatedStrings,id:`${l}_${s}`,ref:p.get(s),sectionTitle:a,selected:s===d,tabIndex:0===o?0:-1,onClickHandler:e=>((e,t)=>{u(e,t)})(e,s),onKeyDownHandler:t=>((t,i)=>{var o,s,a,n;switch(t.key){case r.KEYBOARD_EVENT.arrowDown:t.preventDefault(),null===(s=null===(o=h(i))||void 0===o?void 0:o.nextElementSibling)||void 0===s||s.focus();break;case r.KEYBOARD_EVENT.arrowUp:t.preventDefault(),null===(n=null===(a=h(i))||void 0===a?void 0:a.previousElementSibling)||void 0===n||n.focus();break;case r.KEYBOARD_EVENT.enter:t.preventDefault(),u(t,i);break;case r.KEYBOARD_EVENT.tab:e.onFocusChangeHandler(t)}})(t,s)})})))})})),define("oj-sp/vertical-anchor-navigator/components/navigator/Navigator",["require","exports","preact","ojs/ojtracer","preact/hooks","ojs/ojcontext","ojs/ojresponsiveutils","oj-sp/common/positionUtility","./NavigatorList","css!./Navigator","ojs/ojmenu","ojs/ojbutton","ojs/ojoption","ojs/ojpopup","oj-sp/common/position-helper"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Navigator=void 0;const d=Symbol.for("trigger");t.Navigator=e=>{const{screenSize:t,sections:c}=e,p=(0,s.useRef)(null),u=(0,s.useRef)(null),h=(0,s.useRef)(null),m=(0,s.useRef)(null);let g=0,y=!0;const f=(0,s.useRef)(t);f.current=t;(0,s.useEffect)(()=>{const e=t===n.SCREEN_RANGE.LG?"lg-up":"md-down",i=()=>{f.current===n.SCREEN_RANGE.MD&&T()};return window.addEventListener("scroll",i),O(e),()=>{window.removeEventListener("scroll",i),w(e)}},[]),(0,s.useEffect)(()=>{t!==n.SCREEN_RANGE.MD&&t!==n.SCREEN_RANGE.SM||T()},[t]);const b=(0,s.useMemo)(()=>(0,o.getTracerProvider)().getTracer("oj-sp.vertical-anchor-navigator"),[]),v=(0,s.useMemo)(()=>new Map,[]),[j]=(0,s.useState)({getValue:e=>v.get(e),setValue(e,t){return v.set(e,t),this},deleteValue(e){return v.delete(e),this}}),A=(t,i)=>{((e,t)=>{if(j&&b)j.setValue(d,e),b.startActiveSpan("componentEvent",{},j,t)})(i,o=>{o.setAttribute("oj-sp.vertical-anchor-navigator.navigator_selected",t),((t,i)=>{const o=i instanceof KeyboardEvent;e.onSelectedSectionChanged(t),e.handleFocusOnSelectedSection({isFocusOnSelectedSection:o})})(t,i),o.end()})},C=e=>{if(e.event.preventDefault(),t===n.SCREEN_RANGE.LG)A(e.selectedSection,e.event);else if(t!==n.SCREEN_RANGE.LG){T();a.getContext(p.current).getBusyContext().whenReady().then(()=>{A(e.selectedSection,e.event)})}},E=()=>{var e;null===(e=p.current)||void 0===e||e.open("#jumpToBtn"),h.current.focusNavigator()},T=()=>{if(p&&(null==p?void 0:p.current)){a.getContext(p.current).getBusyContext().whenReady().then(()=>{var e,t;p&&(null===(e=null==p?void 0:p.current)||void 0===e?void 0:e.isOpen())&&(null===(t=p.current)||void 0===t||t.close())})}},_=e=>(0,i.h)("oj-sp-position-helper",{onspConnected:t=>S(t,e),onspDisconnected:t=>x(t,e)}),S=(e,t)=>{O(t)},x=(e,t)=>{w(t)},O=t=>{const i="lg-up"===t?u.current:m.current,o=e.id+t;if(i&&!r.PositionUtility.isComponentSubscribed(o)){const e={componentName:o,component:i,offsetCalculationSubscription:{offsetOptions:{position:"top",level:r.PositionUtility.LEVEL_MAP.headerNavigation,isStandaloneComponent:!0},onOffsetChange:e=>{g=Math.round(e.top),I(i)}},stickinessSubscription:{stickinessOptions:{isStandaloneComponent:!0},onStickinessChange:e=>{y=e.isSticky,I(i)}}};r.PositionUtility.subscribe(e)}},w=t=>{const i=e.id+t;r.PositionUtility.isComponentSubscribed(i)&&r.PositionUtility.unsubscribe({componentName:i})},I=t=>{const i=y?g:0;t.style.top=i+"px",e.onTopOffsetChanged({topOffset:i})},D=e=>{t===n.SCREEN_RANGE.MD&&(T(),e.shiftKey&&e.preventDefault())},N=()=>(0,i.h)(l.NavigatorList,{id:e.id,sections:c,translatedStrings:e.translatedStrings,ref:h,onSelectedSectionChangeHandler:C,onFocusChangeHandler:D,selectedSection:e.selectedSection});if(c&&c.length>1){if(t===n.SCREEN_RANGE.LG)return(0,i.h)(i.Fragment,null,_("lg-up"),(0,i.h)("div",{ref:u,class:"oj-sp-vertical-anchor-navigator-section oj-sp-vertical-anchor-navigator-sticky-list"},N()));if(t!==n.SCREEN_RANGE.LG)return(0,i.h)(i.Fragment,null,_("md-down"),(0,i.h)("div",{ref:m,class:"oj-sp-vertical-anchor-navigator-section oj-sp-vertical-anchor-navigator-md-header-bar"},(0,i.h)("oj-button",{id:"jumpToBtn",class:"oj-button-sm",chroming:"solid",onojAction:E,"aria-label":e.translatedStrings.sectionsPanelAcc},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-bullets"})),(0,i.h)("div",null,(()=>{const o=t===n.SCREEN_RANGE.SM?"van-mobile-screen-mode-popup":"";return(0,i.h)("oj-popup",{id:"oj-sp-vertical-anchor-navigator-popup",position:t===n.SCREEN_RANGE.SM?{at:{horizontal:"start",vertical:"top"},my:{horizontal:"start",vertical:"top"},of:{x:0,y:0},collision:"flipfit"}:{collision:"flipfit",of:"#jumpToBtn"},class:`oj-sp-vertical-anchor-navigator-popup ${o} ${t}`,ref:p,modality:t===n.SCREEN_RANGE.SM?"modal":"modeless",autoDismiss:t===n.SCREEN_RANGE.SM?"none":"focusLoss"},(0,i.h)("div",{class:"oj-sm-flex-items-initial oj-sm-justify-content-center"},(0,i.h)("div",{class:"oj-flex oj-sm-align-items-center"},(0,i.h)("div",{class:"oj-sm-flex-1","aria-label":e.translatedStrings.sectionsPanel},e.translatedStrings.sectionsPanel),t===n.SCREEN_RANGE.SM?(0,i.h)("oj-button",{class:"oj-button-sm",chroming:"borderless",title:e.translatedStrings.close,"aria-label":e.translatedStrings.close,onojAction:T},(0,i.h)("span",{slot:"startIcon",class:"oj-ux-ico-close"})):null),N()))})())))}return null}})),define("oj-sp/vertical-anchor-navigator/components/navigation-container/NavigationSection",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationSection=void 0;t.NavigationSection=e=>{const{getNodes:t}=e,o=t();return(0,i.h)("div",null,o)}})),define("css!oj-sp/vertical-anchor-navigator/components/navigation-container/NavigationContainer",[],(function(){})),define("oj-sp/vertical-anchor-navigator/components/navigation-container/NavigationContainer",["require","exports","preact","preact/hooks","ojs/ojcontext","oj-sp/common-util/common-util","./NavigationSection","css!./NavigationContainer"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationContainer=void 0;t.NavigationContainer=e=>{const t=(0,o.useRef)(null),[r,l]=(0,o.useState)(),d=(0,o.useRef)(!0),c=(0,o.useRef)(e.navigatorTop);c.current=e.navigatorTop;const p=(0,o.useRef)(e.selectedSection);p.current=e.selectedSection;const u=new Map(e.sectionLayouts.map(e=>[e.sectionName,(0,o.useRef)(e)]));(0,o.useEffect)(()=>(window.addEventListener("scroll",j),window.addEventListener("scroll",C),()=>{window.removeEventListener("scroll",j),window.removeEventListener("scroll",C)}),[]),(0,o.useEffect)(()=>{l(E())},[e.sectionLayouts]),(0,o.useEffect)(()=>{e.selectedSection?g():v()},[r,e.selectedSection]),(0,o.useEffect)(()=>{!1===d.current&&g()},[e.navigatorTop]);const h=e=>{const{top:t,bottom:i}=e.getBoundingClientRect(),o=c.current+48;return Math.round(t)<=o&&Math.floor(i)>c.current},m=e=>{var t,i;if(u.has(e))return null===(i=null===(t=u.get(e))||void 0===t?void 0:t.current)||void 0===i?void 0:i.base},g=()=>{if(e.selectedSection){const t=m(e.selectedSection);if(t){s.getContext(t).getBusyContext().whenReady().then(()=>{h(t)||(e.focusOnSelectedSection&&f(e.selectedSection),y(t))})}}},y=e=>{d.current=!1;const t=null==e?void 0:e.getBoundingClientRect().top,i=window.scrollY+t-c.current;window.scrollTo({top:i,behavior:"smooth"})},f=e=>{var t;const i=m(e),o=b(i);o&&o.length>0&&(null===(t=o[0])||void 0===t||t.focus({preventScroll:!0}))},b=e=>null==e?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),v=()=>{const[t]=null==u?void 0:u.keys();t&&e.onSelectedSectionChanged(t)},j=(0,a.debounce)(()=>A(),60),A=()=>{if(d.current&&t.current){const t=[];if(null==u||u.forEach((i,o)=>{var s,a;t.push(h(null===(s=null==i?void 0:i.current)||void 0===s?void 0:s.base)),o!==p.current&&h(null===(a=null==i?void 0:i.current)||void 0===a?void 0:a.base)&&e.onSelectedSectionChanged(o)}),t.length===u.size){!0===t.every(e=>!1===e)&&v()}}},C=(0,a.debounce)(()=>{d.current=!0},130),E=()=>{var t;return null===(t=e.sectionLayouts)||void 0===t?void 0:t.map(e=>(0,i.h)(n.NavigationSection,{ref:u.get(e.sectionName),sectionName:e.sectionName,getNodes:e.getNodes}))};return(0,i.h)("div",{ref:t},r)}})),define("css!oj-sp/vertical-anchor-navigator/vertical-anchor-navigator-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/vertical-anchor-navigator/vertical-anchor-navigator",["require","exports","ojs/ojvcomponent","preact","./components/navigator/Navigator","./components/navigation-container/NavigationContainer","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojlogger","ojs/ojresponsiveutils","css!./vertical-anchor-navigator-styles"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalAnchorNavigator=void 0;let d=class extends o.Component{constructor(e){var t;super(e),this.layoutHandler=e=>{const t=this.generateSectionLayouts(e);this.setState({renderedLayout:e,sectionLayouts:t})},this.smMediaQueryChangeListener=e=>{e.matches&&this.setState({screenSize:"sm"})},this.mdMediaQueryChangeListener=e=>{e.matches&&this.setState({screenSize:"md"})},this.lgUpMediaQueryChangeListener=e=>{e.matches&&this.setState({screenSize:"lg"})},this.onNavigatorTopChanged=e=>{e.topOffset!==this.state.navigatorTopOffset&&this.setState({navigatorTopOffset:e.topOffset})},this.handleFocusOnSelectedSection=e=>{e.isFocusOnSelectedSection!==this.state.focusOnSelectedSection&&this.setState({focusOnSelectedSection:e.isFocusOnSelectedSection})},this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.componentStrings=Object.assign({},n),this.componentId=this.uid+"_vertical_anchor_navigator";const o=l.getFrameworkQuery(l.FRAMEWORK_QUERY_KEY.SM_ONLY),s=l.getFrameworkQuery(l.FRAMEWORK_QUERY_KEY.MD_ONLY),a=l.getFrameworkQuery(l.FRAMEWORK_QUERY_KEY.LG_UP);this.smMediaQuery=window.matchMedia(o),this.mdMediaQuery=window.matchMedia(s),this.lgUpMediaQuery=window.matchMedia(a),this.state={navigatorTopOffset:0,screenSize:this.smMediaQuery.matches?"sm":this.mdMediaQuery.matches?"md":"lg"}}componentDidMount(){this.createRenderedLayout(),this.handleLayoutResponsiveness()}createRenderedLayout(){const{layoutProvider:e,layout:t}=this.props;e.observeLayout(t,this.layoutHandler)}updateRenderedLayout(e,t){const{layout:i,layoutProvider:o}=this.props;null==t||t.unobserveLayout(e,this.layoutHandler),null==o||o.observeLayout(i,this.layoutHandler)}generateSectionLayouts(e){const t=[],i=e.displayProperties;return null==i||i.forEach((e,i)=>{t.push(this.createSectionLayout(e))}),t}createSectionLayout(e){const t=Object.keys(e)[0],i=e[t];return{sectionName:t,getPropertyValue:e=>"labelHint"===e?i.labelHint:null,getNodes:()=>i.getNodes(this.base.parentElement)}}handleLayoutResponsiveness(){this.smMediaQuery.addEventListener("change",this.smMediaQueryChangeListener),this.mdMediaQuery.addEventListener("change",this.mdMediaQueryChangeListener),this.lgUpMediaQuery.addEventListener("change",this.lgUpMediaQueryChangeListener)}render(e){const{selectedSection:t}=e,{sectionLayouts:i}=this.state,n={sectionsPanel:this.componentStrings.sectionsPanel,sectionsPanelAcc:this.componentStrings.sectionsPanelAcc,close:this.componentStrings.close,sectionPanelContext:this.componentStrings.sectionPanelContext},r=i&&(null==i?void 0:i.length)>1,d={[l.SCREEN_RANGE.LG]:"oj-md-9",[l.SCREEN_RANGE.MD]:"oj-md-10",[l.SCREEN_RANGE.SM]:"oj-sm-10",[l.SCREEN_RANGE.XL]:"oj-lg-9",[l.SCREEN_RANGE.XXL]:"oj-lg-9"};let c="",p="";return r?(c=d[this.state.screenSize],p=this.state.screenSize===l.SCREEN_RANGE.SM||this.state.screenSize===l.SCREEN_RANGE.MD?"oj-sm-2 oj-sm-text-align-end":"oj-sm-3"):c="oj-md-12",(0,o.h)("div",{id:this.componentId,class:"oj-flex oj-sp-vertical-anchor-navigator-container oj-sm-padding-12x-bottom oj-sp-template-wrapper-padding-end"},(0,o.h)("div",{class:c},i&&(null==i?void 0:i.length)>0&&(0,o.h)(a.NavigationContainer,{id:this.componentId+"_navigationContent",sectionLayouts:i,selectedSection:this.props.selectedSection,navigatorTop:this.state.navigatorTopOffset,focusOnSelectedSection:this.state.focusOnSelectedSection,onSelectedSectionChanged:e.onSelectedSectionChanged})),r&&(0,o.h)("div",{class:p},(0,o.h)(s.Navigator,{id:this.componentId+"_navigationItem",sections:i,selectedSection:t,screenSize:this.state.screenSize,translatedStrings:n,onTopOffsetChanged:this.onNavigatorTopChanged,onSelectedSectionChanged:e.onSelectedSectionChanged,handleFocusOnSelectedSection:this.handleFocusOnSelectedSection})))}componentWillUnmount(){r.log("Vertical Anchor Navigator component will be unmounted",this.componentId);const e=this.props.layoutProvider,t=this.props.layout;null==e||e.unobserveLayout(t,this.layoutHandler)}};d.defaultProps={},d._metadata={properties:{layout:{type:"string"},layoutProvider:{type:"object"},selectedSection:{type:"string",writeback:!0}},extension:{_WRITEBACK_PROPS:["selectedSection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},d=__decorate([(0,i.customElement)("oj-sp-vertical-anchor-navigator"),__metadata("design:paramtypes",[Object])],d),t.VerticalAnchorNavigator=d})),define("oj-sp/vertical-anchor-navigator/loader",["require","exports","./vertical-anchor-navigator"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalAnchorNavigator=void 0,Object.defineProperty(t,"VerticalAnchorNavigator",{enumerable:!0,get:function(){return i.VerticalAnchorNavigator}})})),define("oj-sp/section/section-util",["require","exports","oj-sp/common-util/common-util"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextFocusableElement=t.resetSectionElementsTabindex=t.defocusSectionElements=t.isCurrentSectionInFocus=void 0;t.isCurrentSectionInFocus=e=>{const t=(0,i.findAllFocusableElements)(e);let o=!1;return t.forEach(e=>{document.activeElement!=e||(o=!0)}),o};t.defocusSectionElements=e=>{const t=new Map;return e.forEach((e,i)=>{t.set(i,e.getAttribute("tabindex")),e!=document.activeElement&&e.setAttribute("tabindex","-1")}),t};t.resetSectionElementsTabindex=(e,t)=>{e.forEach((e,i)=>{const o=t.get(i);o?e.setAttribute("tabindex",o):e.removeAttribute("tabindex")})};t.getNextFocusableElement=()=>{const e=(0,i.findAllFocusableElements)(document.body);let t=-1;return e.forEach((i,o)=>{i!=document.activeElement||(t=(o+1)%e.length)}),-1!==t?e[t]:null}})),define("css!oj-sp/section/section-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/section/section",["require","exports","ojs/ojvcomponent","preact","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings","ojs/ojtranslation","oj-sp/common/positionUtility","oj-sp/common-util/common-util","./section-util","css!./section-styles","oj-sp/common/position-helper","ojs/ojtoolbar","ojs/ojbutton"],(function(e,t,i,o,s,a,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;let d=class extends o.Component{constructor(e){var t;super(e),this.headerRef=(0,o.createRef)(),this.sectionRef=(0,o.createRef)(),this.tabIndicesMap=new Map,this.isMouseClicked=!1,this.isMouseDownorKeyDownEventTriggered=!1,this.keyUpHandler=e=>{if(this.state.isInputActive){(0,l.isCurrentSectionInFocus)(this.sectionRef.current)||this.showOrHideSkipSectionToolbar(!1)}},this.keyDownHandler=e=>{this.isMouseClicked=!1,this.isMouseDownorKeyDownEventTriggered=!0},this.mouseUpHandler=e=>{this.state.isInputActive&&requestAnimationFrame(()=>{this.showOrHideSkipSectionToolbar(!1)})},this.mouseDownHandler=e=>{this.isMouseClicked=!0,this.isMouseDownorKeyDownEventTriggered=!0},this.focusInHandler=e=>{this.isMouseDownorKeyDownEventTriggered&&!this.isMouseClicked&&(0,l.isCurrentSectionInFocus)(this.sectionRef.current)&&this.showOrHideSkipSectionToolbar(!0)},this.handleConnected=e=>{this.subscribeToPositionUtil()},this.handleDisconnected=e=>{this.unsubscribeFromPositionUtil()},this.setTitleFocus=()=>{requestAnimationFrame(()=>{const e=document.getElementById(this.uid+"_sectionTitle"),t=(null==e?void 0:e.clientHeight)<(null==e?void 0:e.scrollHeight);this.setState({showTitleTooltip:t})})},this.editActionHandler=e=>{var t,i;e.preventDefault(),null===(i=(t=this.props).onSpEditAction)||void 0===i||i.call(t)},this.viewMoreActionHandler=e=>{var t,i;e.preventDefault(),null===(i=(t=this.props).onSpViewMoreAction)||void 0===i||i.call(t)},this.skipSectionHandler=e=>{const t=(0,r.findAllFocusableElements)(this.sectionRef.current);this.tabIndicesMap=(0,l.defocusSectionElements)(t);const i=(0,l.getNextFocusableElement)();i&&i.focus(),(0,l.resetSectionElementsTabindex)(t,this.tabIndicesMap)},this.pageActionsHandler=e=>{var t;null===(t=this.focusableActionableElements[0])||void 0===t||t.focus()},this.getActionableElement=()=>document.querySelector(".oj-sp-transactional-page-actions"),this.renderSkipSectionToolbar=()=>(this.actionableElement=this.getActionableElement(),this.focusableActionableElements=this.actionableElement?(0,r.findAllFocusableElements)(this.actionableElement):[],(0,o.h)("oj-toolbar",{class:"oj-sp-section-skip-section oj-sm-padding-2x "+(this.state.isSectionWidthRangeSmall?"oj-sm-margin-2x-top":"oj-sm-margin-4x-start"),"aria-label":"Skip Section toolbar"},(0,o.h)("oj-button",{id:this.uid+"_skipSection",class:"oj-button-sm skip-section-button",chroming:"solid",onojAction:this.skipSectionHandler},this.res.skipSection),this.actionableElement&&this.focusableActionableElements.length>0&&(0,o.h)("oj-button",{id:this.uid+"_pageActions",class:"oj-button-sm oj-sm-margin-0-start page-actions-button",chroming:"solid",onojAction:this.pageActionsHandler},this.res.pageActions))),this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.res=Object.assign({},s),this.state={isSectionWidthRangeSmall:!1,headerSticky:!0,isInputActive:!1,showTitleTooltip:!1}}componentDidMount(){this.resizeObserver=new ResizeObserver(e=>this.resizeObserverHandler(e));const e=this.sectionRef.current;e&&this.resizeObserver.observe(e),document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler),document.addEventListener("mousedown",this.mouseDownHandler),document.addEventListener("mouseup",this.mouseUpHandler),this.setTitleFocus(),this.subscribeToPositionUtil()}componentDidUpdate(e,t,i){e.sectionTitle===this.props.sectionTitle&&t.isSectionWidthRangeSmall===this.state.isSectionWidthRangeSmall&&t.isInputActive===this.state.isInputActive||this.setTitleFocus()}componentWillUnmount(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect(),document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler),document.removeEventListener("mousedown",this.mouseDownHandler),document.removeEventListener("mouseup",this.mouseUpHandler)}subscribeToPositionUtil(){const e=this.uid+"_sectionHeader";if(this.headerRef.current&&!n.PositionUtility.isComponentSubscribed(e)){const t={componentName:e,component:this.headerRef.current,offsetCalculationSubscription:{offsetOptions:{position:"top",level:n.PositionUtility.LEVEL_MAP.headerNavigation},onOffsetChange:e=>{this.headerRef.current.style.top=e.top+"px"}},stickinessSubscription:{onStickinessChange:e=>{const t=e.isSticky;this.setState({headerSticky:t})}}};n.PositionUtility.subscribe(t)}}unsubscribeFromPositionUtil(){const e=this.uid+"_sectionHeader";n.PositionUtility.isComponentSubscribed(e)&&n.PositionUtility.unsubscribe({componentName:e})}resizeObserverHandler(e){requestAnimationFrame(()=>{const t=e[0].contentRect.width,i=!(Math.round(t)>599);this.setState({isSectionWidthRangeSmall:i})})}renderPositionHelper(){return(0,o.h)("oj-sp-position-helper",{onspConnected:this.handleConnected,onspDisconnected:this.handleDisconnected})}showOrHideSkipSectionToolbar(e){this.setState({isInputActive:e})}render(e,t){const{children:i,sectionTitle:s,displayOptions:n}=e,r=t.headerSticky?"oj-sp-section-sticky":"";return(0,o.h)("div",{id:this.uid+"_section",ref:this.sectionRef,onfocusin:this.focusInHandler},this.renderPositionHelper(),(0,o.h)("div",{ref:this.headerRef,class:`oj-sp-section-header oj-sp-template-wrapper oj-sm-padding-2x-top ${r} ${t.isSectionWidthRangeSmall?"oj-sm-padding-3x-bottom":"oj-sm-padding-4x-bottom"}`},(0,o.h)("div",{class:"oj-flex"},(0,o.h)("div",{class:"oj-flex oj-sm-flex-direction-column oj-sp-section-title-and-edit-wrapper"},(0,o.h)("div",{class:"oj-flex oj-sp-section-title-wrapper "+(t.isSectionWidthRangeSmall?"oj-sm-margin-1x-bottom oj-sp-section-title-and-edit-wrapper-sm-margin":"oj-sm-margin-2x-top oj-sp-section-title-and-edit-wrapper-sm-up-margin")},(0,o.h)("h2",{id:this.uid+"_sectionTitle",title:t.showTitleTooltip?s:"",class:`oj-flex-bar-start oj-sp-section-title oj-line-clamp-2 ${"off"!==(null==n?void 0:n.edit)?t.isSectionWidthRangeSmall?"oj-sm-margin-4x-end":"oj-sm-margin-8x-end":""} ${t.isSectionWidthRangeSmall?"oj-typography-subheading-xs oj-sp-section-title-sm-margin":"oj-typography-subheading-md oj-sp-section-title-sm-up-margin"}`,tabIndex:t.showTitleTooltip?0:-1},s||"Section Title"),"off"!==n.edit&&(0,o.h)("oj-button",{id:this.uid+"_editSection",display:"icons",class:"oj-button-sm oj-flex-bar-end","aria-label":a.applyParameters(this.res.accEditSection,{sectionTitle:s}),chroming:"borderless",label:this.res.edit,onojAction:this.editActionHandler,disabled:"disabled"===n.edit},(0,o.h)("span",{slot:"startIcon",class:"oj-ux-ico-edit"}))),(0,o.h)("div",{class:"oj-sp-section-title-marker"})),t.isInputActive&&!t.isSectionWidthRangeSmall&&(0,o.h)("div",null,this.renderSkipSectionToolbar())),t.isInputActive&&t.isSectionWidthRangeSmall&&(0,o.h)("div",{class:"oj-flex oj-sm-justify-content-flex-end skip-section-sm-wrapper"},this.renderSkipSectionToolbar())),(0,o.h)("div",{class:"oj-lg-padding-0-top"},i),(0,o.h)("div",{class:"oj-sm-margin-8x-bottom oj-sp-template-wrapper "+("on"===n.viewMore?"oj-sm-margin-5x-top":"")},"on"===n.viewMore&&(0,o.h)("a",{href:"#",id:this.uid+"_viewMore","aria-label":a.applyParameters(this.res.accMoreInSection,{sectionTitle:s}),class:"oj-link-standalone oj-typography-semi-bold",onClick:this.viewMoreActionHandler},this.res.moreItems)))}};d.defaultProps={displayOptions:{edit:"off",viewMore:"off"}},d._metadata={slots:{"":{}},properties:{sectionTitle:{type:"string"},displayOptions:{type:"object",properties:{edit:{type:"string",enumValues:["disabled","on","off"]},viewMore:{type:"string",enumValues:["on","off"]}}}},events:{spEditAction:{},spViewMoreAction:{}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},d=__decorate([(0,i.customElement)("oj-sp-section"),__metadata("design:paramtypes",[Object])],d),t.Section=d})),define("oj-sp/section/loader",["require","exports","./section"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0,Object.defineProperty(t,"Section",{enumerable:!0,get:function(){return i.Section}})})),define("oj-sp/common/flex/converters/FlexUpperCaseConverter",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlexUpperCaseConverter=void 0;t.FlexUpperCaseConverter=class{format(e){if(e&&e.length>0)return e.toUpperCase()}parse(e){if(e&&e.length>0)return e.toUpperCase()}}})),define("oj-sp/information-organizer/utils/data-provider-utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataProviderFetchByKey=t.dataProviderFetchFirstKey=t.dataProviderToValue=t.dataProviderContainsKey=void 0;t.dataProviderContainsKey=async(e,t)=>{if(!e||!t)return!1;const i=new Set([t]),o={keys:e.createOptimizedKeySet(i)};return!!(await e.containsKeys(o)).results.has(t)};t.dataProviderToValue=async(e,t)=>{const i=[],o=[],s=e.fetchFirst(t)[Symbol.asyncIterator]();let a=!1;do{const e=await s.next(),{data:t,metadata:n}=e.value;Array.isArray(t)&&i.push(...t),Array.isArray(n)&&o.push(...n),a=e.done}while(!a);return{data:i,metadata:o}};t.dataProviderFetchFirstKey=async e=>{if(!e)return"";const t=(await(null==e?void 0:e.fetchByOffset({size:1,offset:0}))).results.map((function(e){return e.metadata.key}));return(null==t?void 0:t.length)>0?t[0]:""};t.dataProviderFetchByKey=async(e,t)=>{var i,o;if(!t||!e)return null;let s=null;const a=new Set([e]),n=await t.fetchByKeys({keys:a});return s=null===(o=null===(i=null==n?void 0:n.results)||void 0===i?void 0:i.get(e))||void 0===o?void 0:o.data,s}})),define("oj-sp/information-organizer/tabList/tab-list",["require","exports","preact","preact/hooks","ojL10n!oj-sp/common-strings/resources/nls/common-component-strings"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabList=void 0;t.TabList=e=>{const{context:t,id:a}=e,n=(0,o.useMemo)(()=>Object.assign({},s),[]),r=t.data.metadata?`${t.data.label} ${t.data.metadata}`:void 0,l=t.data.error?""+t.data.label:void 0;return(0,i.h)("li",null,(0,i.h)("a",{href:"#","aria-labelledby":l,"aria-describedby":r},(0,i.h)("span",null,t.data.label),t.data.error?(0,i.h)("span",{id:`${a}_error_${t.index}`,class:"oj-tabbar-item-end oj-ux-icon-size-5x oj-icon-color-danger oj-ux-ico-error-s",role:"img","aria-label":n.containsErrors}):t.data.metadata&&(0,i.h)("span",{id:`${a}_metadata_${t.index}`,class:"oj-tabbar-item-end","aria-label":""+t.data.metadata},"(",t.data.metadata,")")))}})),define("oj-sp/information-organizer/tabBar/tab-bar",["require","exports","preact","../tabList/tab-list"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabBar=void 0;t.TabBar=e=>(0,i.h)("oj-tab-bar",Object.assign({},e,e.tabOptions),(0,i.h)("template",{"data-oj-as":"item",slot:"itemTemplate",render:t=>(0,i.h)(o.TabList,{context:t,id:e.id})}))})),define("oj-sp/information-organizer/tabBarContainer/tab-bar-container",["require","exports","preact","../tabBar/tab-bar","oj-sp/messages-banner/messages-banner","oj-sp/messages-banner/loader"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabBarContainer=void 0;const a={layout:"condense",edge:"top",display:"all"},n=Object.assign(Object.assign({},a),{overflow:"popup"});t.TabBarContainer=e=>{const{id:t,primaryADP:r,secondaryADP:l,primarySelected:d,secondarySelected:c,onselectionChanged:p,errorDP:u,closeMessageBanner:h}=e;return(0,i.h)(i.Fragment,null,(0,i.h)("div",{class:"oj-flex"},(0,i.h)("div",{class:"oj-flex-item oj-divider-bottom oj-sm-12"},(0,i.h)("div",{class:"oj-sp-template-wrapper"},(0,i.h)("oj-conveyor-belt",{id:"oj-sp-io-conveyor-belt","arrow-visibility":"visible"},(0,i.h)(o.TabBar,{id:t+"_primary",selection:d,data:r,onselectionChanged:p,tabOptions:a})))),l&&(0,i.h)("div",{class:"oj-flex-item oj-divider-bottom oj-sm-12"},(0,i.h)("div",{class:"oj-sp-template-wrapper"},(0,i.h)(o.TabBar,{id:t+"_secondary",selection:c,data:l,onselectionChanged:p,tabOptions:n})))),u&&(0,i.h)(s.MessagesBanner,{id:t+"_message_banner",data:u,onSpClose:h}))}})),define("css!oj-sp/information-organizer/information-organizer-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/information-organizer/information-organizer",["require","exports","ojs/ojvcomponent","preact","ojs/ojarraydataprovider","./utils/data-provider-utils","./tabBarContainer/tab-bar-container","oj-sp/common-util/common-util","ojs/ojnavigationlist","ojs/ojconveyorbelt","oj-sp/messages-banner/loader","css!./information-organizer-styles.css"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InformationOrganizer=void 0;var l;!function(e){e.NO="no",e.ERROR="error",e.CHANGE_SELECTION="change selection",e.COMPONENT_UPDATE="component update"}(l||(l={}));let d=class extends o.Component{constructor(e){var t;super(e),this.refIoContainer=e=>{this.ioContainer=e},this.updateSelection=async(e,t)=>{if(!this.state.primaryADP)return;this.ioContainerBusyResolve&&(this.ioContainerBusyResolve(),this.ioContainerBusyResolve=null),this.ioContainerBusyResolve=(0,r.setBusyResolve)(this.ioContainer,{description:"Information Organizer - on selection changed"});let i=null;const o=await(0,a.dataProviderContainsKey)(this.props.data,e);e&&o||(e=await(0,a.dataProviderFetchFirstKey)(this.state.primaryADP));const s=await(0,a.dataProviderContainsKey)(this.state.primaryADP,e);let n=this.state.primarySelected.key,d="";if(s){const t=this.childrenKeyMap.get(e);t&&(d=await(0,a.dataProviderFetchFirstKey)(t)),d?d&&(i=await this.updateErrorDP(d,t)):i=await this.updateErrorDP(e,this.state.primaryADP),this.setState({primarySelected:{key:e},secondarySelected:{key:d},secondaryADP:t,errorDP:i},()=>{this.ioContainerBusyResolve&&(this.ioContainerBusyResolve(),this.ioContainerBusyResolve=null)})}else if(t===l.COMPONENT_UPDATE){if(!!this.state.secondaryADP&&await(0,a.dataProviderContainsKey)(this.state.secondaryADP,e))i=await this.updateErrorDP(e,this.state.secondaryADP);else{const{metadata:t}=this.state.primaryADP?await(0,a.dataProviderToValue)(this.state.primaryADP,{size:100}):{metadata:[]};await Promise.all(t.map(async t=>{const{key:i}=t;let o=!1;this.childrenKeyMap.has(i)&&(o=await(0,a.dataProviderContainsKey)(this.childrenKeyMap.get(i),e)),o&&(d=e,n=i)})),i=await this.updateErrorDP(e,this.childrenKeyMap.get(n))}this.setState({primarySelected:{key:n},secondaryADP:this.childrenKeyMap.get(n),secondarySelected:{key:e},errorDP:i},()=>{this.ioContainerBusyResolve&&(this.ioContainerBusyResolve(),this.ioContainerBusyResolve=null)})}else i=await this.updateErrorDP(e,this.state.secondaryADP),this.setState({secondarySelected:{key:e},errorDP:i},()=>{this.ioContainerBusyResolve&&(this.ioContainerBusyResolve(),this.ioContainerBusyResolve=null)});const c=d||e;this.props.onSelectionChanged({key:c}),this.props.onSpSelectionChanged({selectionId:c})},this.onselectionChanged=async e=>{const{value:t,updatedFrom:i,previousValue:o}=e.detail;"external"!==i&&(this.userSelection=!0,this.updateSelection(t,l.CHANGE_SELECTION))},this.updateErrorDP=async(e,t)=>{var i,o,n,r;const d=await(0,a.dataProviderFetchByKey)(e,t);if((null===(i=null==d?void 0:d.error)||void 0===i?void 0:i.primaryText)&&(null===(o=null==d?void 0:d.error)||void 0===o?void 0:o.primaryText)!==l.ERROR){const e={id:d.id,messageType:"general-error",primaryText:null===(n=d.error)||void 0===n?void 0:n.primaryText,secondaryText:null===(r=d.error)||void 0===r?void 0:r.secondaryText};return new s([e],{keyAttributes:"id"})}return null},this.closeMessageBanner=async e=>{let{data:t}=await(0,a.dataProviderToValue)(this.state.errorDP,{size:100});t=t.filter(t=>t.id!==e.messageId),this.setState({errorDP:new s(t,{keyAttributes:"id"})})};const o=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)();this.componentId=o+"_information_organizer",this.state={primaryADP:null,secondaryADP:null,primarySelected:{key:""},secondarySelected:{key:""},errorDP:null},this.ioContainerBusyResolve=(0,r.setBusyResolve)(this.ioContainer,{description:"Information Organizer - render"})}componentDidMount(){this.fetchData()}componentDidUpdate(e,t){var i,o,s;e.data!==this.props.data?(this.ioContainerBusyResolve=(0,r.setBusyResolve)(this.ioContainer,{description:"Information Organizer - Update"}),this.fetchData()):(null===(i=e.selection)||void 0===i?void 0:i.key)!==(null===(o=this.props.selection)||void 0===o?void 0:o.key)&&(this.userSelection?this.userSelection=!1:this.updateSelection(null===(s=this.props.selection)||void 0===s?void 0:s.key,l.COMPONENT_UPDATE))}async fetchData(){const{selection:e}=this.props,t=this.props.data,{key:i}=(0,r.isEmpty)(e)?{key:""}:e,o=await(0,a.dataProviderContainsKey)(t,i);if(!t)return void(this.ioContainerBusyResolve&&(this.ioContainerBusyResolve(),this.ioContainerBusyResolve=null));const{data:n,metadata:d}=await(0,a.dataProviderToValue)(t,{size:100});this.childrenKeyMap=t.createOptimizedKeyMap(),this.memoParent={};const c=d.map((e,t)=>{const i={id:e.key,label:n[t].label,metadata:n[t].metadata,error:n[t].error};return this.memoParent[e.key]=i,i});let p="",u="";const h=-1!==d.findIndex(e=>e.key===i);p=i&&o?h?i:"":await(0,a.dataProviderFetchFirstKey)(t),await Promise.all(d.map(async e=>{const{key:o}=e,n=t.getChildDataProvider(o);if((null==n?void 0:n.isEmpty())===l.NO){const{data:e}=await(0,a.dataProviderToValue)(n,{size:100}),t=new s(e,{keyAttributes:"id"});this.childrenKeyMap.set(o,t);e.filter(e=>!(0,r.isEmpty)(e.error)).length>0&&(this.memoParent[o].error={primaryText:l.ERROR});const d=e.filter(e=>e.metadata);if(d.length>0){let e=0;d.forEach(t=>{e+=t.metadata}),this.memoParent[o].metadata=e}if(h&&o===i)u=await(0,a.dataProviderFetchFirstKey)(n);else{await(0,a.dataProviderContainsKey)(this.childrenKeyMap.get(o),i)&&(u=i,p=o)}}}));const m=u||p;this.props.onSelectionChanged({key:m});const g=new s(c,{keyAttributes:"id"});let y=null;u?u&&(y=await this.updateErrorDP(u,this.childrenKeyMap.get(p))):y=await this.updateErrorDP(p,g),this.setState({primaryADP:g,secondaryADP:this.childrenKeyMap.get(p),primarySelected:{key:p},secondarySelected:{key:u},errorDP:y},()=>{this.ioContainerBusyResolve&&(this.ioContainerBusyResolve(),this.ioContainerBusyResolve=null)})}render(){const{primaryADP:e,secondaryADP:t,primarySelected:i,secondarySelected:s,errorDP:a}=this.state;return(0,o.h)("div",{ref:this.refIoContainer,id:this.componentId},(0,o.h)(n.TabBarContainer,{id:this.componentId,primaryADP:e,secondaryADP:t,primarySelected:i.key,secondarySelected:s.key,onselectionChanged:this.onselectionChanged,errorDP:a,closeMessageBanner:this.closeMessageBanner}),(0,o.h)("div",null,this.props.content))}};d._metadata={properties:{data:{type:"TreeDataProvider"},selection:{type:"object",properties:{key:{type:"string"}},writeback:!0}},events:{spSelectionChanged:{}},slots:{content:{}},extension:{_WRITEBACK_PROPS:["selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["id"]}},d=__decorate([(0,i.customElement)("oj-sp-information-organizer"),__metadata("design:paramtypes",[Object])],d),t.InformationOrganizer=d})),define("oj-sp/information-organizer/loader",["require","exports","./information-organizer"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InformationOrganizer=void 0,Object.defineProperty(t,"InformationOrganizer",{enumerable:!0,get:function(){return i.InformationOrganizer}})})),define("oj-sp/internal-resources/components/expandable-panel/expandable-panel-constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MORE_THAN_99=t.MAXIMUM_NAVIGATION_TABS=void 0,t.MAXIMUM_NAVIGATION_TABS=20,t.MORE_THAN_99="99+"})),define("oj-sp/internal-resources/components/expandable-panel/expandable-panel-hooks",["require","exports","preact/hooks","ojs/ojmutablearraydataprovider"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNavigationData=void 0,t.useNavigationData=function(e){const t=(0,i.useMemo)(()=>new o(e,{keyAttributes:"id"}),[]);return(0,i.useEffect)(()=>{t.data=e},[e]),t}})),define("oj-sp/internal-resources/components/expandable-panel/NavigationPanel",["require","exports","preact","./expandable-panel-constants","./expandable-panel-hooks","ojs/ojnavigationlist"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationPanel=void 0;t.NavigationPanel=e=>{const t=(0,s.useNavigationData)(e.navigationData);return(0,i.h)("div",{class:"oj-sp-expandable-panel-navigation-panel"},(0,i.h)("oj-navigation-list",{class:"oj-sp-expandable-panel-navigation-list","aria-label":"Choose a navigation item",data:t,selection:e.selection,display:"icons",onojSelectionAction:t=>{const i={value:t.detail.value,previousValue:t.detail.previousValue};e.spSelectionAction(i)}},(0,i.h)("template",{slot:"itemTemplate",render:e=>{const t=e.data;let s;return t.notificationCount&&t.notificationCount>0&&(s=t.notificationCount>=100?o.MORE_THAN_99:""+t.notificationCount),(0,i.h)("li",{id:"expandable_panel_navigation_item_"+t.id},(0,i.h)("a",{href:"#"},(0,i.h)("span",{class:"oj-navigationlist-item-icon "+t.icon,title:t.label}),(0,i.h)("span",{class:"oj-navigationlist-item-label"},t.label),s&&(0,i.h)("span",{class:"oj-navigationlist-item-end"},(0,i.h)("span",{class:"oj-badge oj-badge-sm oj-badge-danger"},s))))}})))}})),define("oj-sp/internal-resources/components/expandable-panel/ContentPanel",["require","exports","preact"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentPanel=void 0;t.ContentPanel=e=>(0,i.h)("div",{class:"oj-sp-expandable-panel-content-panel"},(0,i.h)("div",{title:e.contentTitle,class:"oj-sp-expandable-panel-content-panel-title oj-typography-subheading-xs oj-sm-only-padding-4x-horizontal oj-md-padding-6x-horizontal oj-sm-only-padding-4x-vertical oj-md-padding-3x-vertical"},e.contentTitle),e.children&&(0,i.h)("div",{class:"oj-sp-expandable-panel-content-panel-slot oj-sm-only-padding-4x-horizontal oj-md-padding-6x-horizontal oj-sm-padding-4x-vertical"},e.children))})),define("oj-sp/internal-resources/components/expandable-panel/expandable-panel-utils",["require","exports","./expandable-panel-constants"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedNavigationItem=t.getValidNavigationItems=void 0;t.getValidNavigationItems=e=>e?e.data.filter(e=>e.id&&e.label&&e.icon).slice(0,i.MAXIMUM_NAVIGATION_TABS):[];t.getSelectedNavigationItem=(e,t)=>e.length>0&&t?e.find(e=>e.id===t):null})),define("css!oj-sp/internal-resources/components/expandable-panel/expandable-panel-styles",[],(function(){})),define("oj-sp/internal-resources/components/expandable-panel/ExpandablePanel",["require","exports","preact","preact/hooks","./NavigationPanel","./ContentPanel","./expandable-panel-utils","css!./expandable-panel-styles.css"],(function(e,t,i,o,s,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandablePanel=void 0;t.ExpandablePanel=e=>{const[t,r]=(0,o.useState)((0,n.getValidNavigationItems)(e.navigationData)),[l,d]=(0,o.useState)((0,n.getSelectedNavigationItem)(t,e.selection)),[c,p]=(0,o.useState)(!!l),u=(0,o.useRef)(!1);(0,o.useEffect)(()=>{if(u.current&&(null===l||e.selection!==l.id)){const i=(0,n.getSelectedNavigationItem)(t,e.selection);d(i),p(!!i)}u.current=!0},[e.selection]),(0,o.useEffect)(()=>{if(e.navigationData)return e.navigationData.addEventListener("mutate",h),()=>{e.navigationData.removeEventListener("mutate",h)}},[]);const h=()=>{r((0,n.getValidNavigationItems)(e.navigationData))};let m="oj-sp-expandable-panel "+(c?"oj-sp-expandable-panel-expanded":"");return m+=""+("end"===e.navigationPanelAlignment?" oj-sp-expandable-panel-end-align":""),(0,i.h)("div",{class:m},(0,i.h)(s.NavigationPanel,{navigationData:t,selection:null==l?void 0:l.id,spSelectionAction:i=>{if(i.value===i.previousValue)p(!c);else{e.onSelectionChanged(i.value);const o=(0,n.getSelectedNavigationItem)(t,i.value);d(o),p(!!o)}}}),c&&(0,i.h)(a.ContentPanel,{contentTitle:l.label,children:e.children}))}})),define("oj-sp/internal-resources/components/expandable-panel/loader",["require","exports","./ExpandablePanel"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandablePanel=void 0,Object.defineProperty(t,"ExpandablePanel",{enumerable:!0,get:function(){return i.ExpandablePanel}})})),define("css!oj-sp/output-rich-text/output-rich-text-styles",[],(function(){}));__decorate=this&&this.__decorate||function(e,t,i,o){var s,a=arguments.length,n=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(n=(a<3?s(n):a>3?s(t,i,n):s(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("oj-sp/output-rich-text/output-rich-text",["require","exports","ojs/ojvcomponent","oj-fa-dom-purify/purify.min","preact","css!./output-rich-text-styles.css"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputRichText=void 0;let a=class extends s.Component{constructor(e){var t;super(e),this.uid=null!==(t=this.props.id)&&void 0!==t?t:(0,i.getUniqueId)(),this.componentId=this.uid+"_output_rich_text"}render(e){const{value:t}=e;if(t){const e=o.sanitize(t,{USE_PROFILES:{html:!0}});return(0,s.h)("div",{id:this.componentId+"_container",role:"presentation",tabIndex:0,className:"output-rich-text-container",dangerouslySetInnerHTML:{__html:e}})}return null}};a._metadata={properties:{value:{type:"string"}},extension:{_OBSERVED_GLOBAL_PROPS:["id"]}},a=__decorate([(0,i.customElement)("oj-sp-output-rich-text"),__metadata("design:paramtypes",[Object])],a),t.OutputRichText=a})),define("oj-sp/output-rich-text/loader",["require","exports","./output-rich-text"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputRichText=void 0,Object.defineProperty(t,"OutputRichText",{enumerable:!0,get:function(){return i.OutputRichText}})})),define("build/bundle-defs/oj-sp-component-bundle-def",["oj-sp/summarizing-collection/loader","oj-sp/advanced-create-edit/loader","oj-sp/analytics-canvas/loader","oj-sp/attachments-common/private/AttachmentManager","oj-sp/attachments-common/private/ComponentUtils","oj-sp/attachments-common/public/AttachmentPublic","oj-sp/attachments-simple/loader","oj-sp/attachments/loader","oj-sp/attachments-viewer/loader","oj-sp/attachments-2/loader","oj-sp/attachments-2-actions/actions/AttachmentActions","oj-sp/attachments-2-actions/view/BossAttachmentsView","oj-sp/attachments-2-actions/view/BossAttachmentsViewType","oj-sp/attachments-2-actions/public/BossPublicAttachmentActions","oj-sp/attachments-2-actions/public/BossPublicAttachmentsView","oj-sp/attachments-2-actions/public/BossPublicDeferredAttachmentActions","oj-sp/attachments-2-actions/transaction/BossDeferredAttachmentTransactionType","oj-sp/bottom-drawer-template/loader","oj-sp/calendar/loader","oj-sp/canvas-page/loader","oj-sp/card/loader","oj-sp/card-footer/loader","oj-sp/collection-container/loader","oj-sp/collection-container-advanced/loader","oj-sp/collection-detail-page/loader","oj-sp/collection-toolbar/loader","oj-sp/common-strings/resources/nls/common-component-strings","oj-sp/common-util/flex-util","oj-sp/common/action","oj-sp/common/activitystreamutils","oj-sp/common/avatarinfo","oj-sp/common/badge","oj-sp/common/contextualinfo","oj-sp/common/EventDispatcher","oj-sp/common/footertext","oj-sp/common/flex/util/kffpartialutils","oj-sp/common/snapping","oj-sp/common/touch-velocity","oj-sp/common/iconinfo","oj-sp/common/imageinfo","oj-sp/common/positionmanager","oj-sp/common/PreviousNextIterator","oj-sp/common/timelineEventTemplateUtils","oj-sp/common/collectionDetailPageUtils","oj-sp/converters/phone/E164Converter","oj-sp/common-util/select-smart-dyn-forms-helper","oj-sp/create-edit-drawer-template/loader","oj-sp/dashboard-grid/loader","oj-sp/dashboard-landing-page/loader","oj-sp/dashboard-panel/loader","oj-sp/data-switcher/loader","oj-sp/data-management-page/loader","oj-sp/data-provider/AggregateSearchDataProvider","oj-sp/data-provider/AggregateSearchOpenApiTransforms","oj-sp/data-provider/AggregateSearchTransforms","oj-sp/data-provider/AutocompleteSearchTransforms","oj-sp/data-provider/BaseKeysHash","oj-sp/data-provider/CompareUtils","oj-sp/data-provider/DataProviderBindingContext","oj-sp/data-provider/DataProviderUtils","oj-sp/data-provider/KeysHashMap","oj-sp/data-provider/KeysHashSet","oj-sp/data-provider/RecentSearchesTransforms","oj-sp/data-provider/SmartSearchAndFilterDataProvider","oj-sp/data-provider/SmartSearchAndFilterTransforms","oj-sp/data-provider/SmartSuggestionChipsDataProvider","oj-sp/data-provider/SuggestionFiltersDataProvider","oj-sp/data-provider/SuggestionFiltersTransforms","oj-sp/detail-panel/loader","oj-sp/diagram-builder/loader","oj-sp/diagram-node/loader","oj-sp/dynamic-foldout-page/loader","oj-sp/diagram-node/diagram-node-utils","oj-sp/dynamic-dashboard-grid/loader","oj-sp/dynamic-scoreboard/loader","oj-sp/email-address-chip/loader","oj-sp/emo-button/loader","oj-sp/empty-state/loader","oj-sp/expandable-list-item/loader","oj-sp/expanded-hover-card/loader","oj-sp/filter-chip/loader","oj-sp/flex-filter-chip/loader","oj-sp/flex-switch/loader","oj-sp/foldout-layout/loader","oj-sp/foldout-panel/loader","oj-sp/foldout-panel-overflow/loader","oj-sp/foldout-panel-summarizing/loader","oj-sp/general-drawer-template/loader","oj-sp/general-overview-page/loader","oj-sp/guided-process/loader","oj-sp/guided-process-drawer-template/loader","oj-sp/completion-panel/loader","oj-sp/header-create-edit-2/loader","oj-sp/header-create-edit/loader","oj-sp/header-general-overview-2/loader","oj-sp/header-general-overview/loader","oj-sp/header-navigation/loader","oj-sp/header-welcome-banner/loader","oj-sp/hierarchy-card/loader","oj-sp/hierarchy-card-info/loader","oj-sp/hierarchy-viewer/loader","oj-sp/horizontal-overview/loader","oj-sp/image/loader","oj-sp/image-card/loader","oj-sp/in-app-navigation/loader","oj-sp/input-address/loader","oj-sp/input-currency/loader","oj-sp/input-currency-conversion-rate/loader","oj-sp/input-email/loader","oj-sp/input-key-flex-field/loader","oj-sp/input-phone-number/loader","oj-sp/input-url/loader","oj-sp/item-gauge/loader","oj-sp/item-overview-page/loader","oj-sp/item-overview/loader","oj-sp/list-item-template/loader","oj-sp/list-section/loader","oj-sp/message-dialog-destructive/loader","oj-sp/messages-toast/loader","oj-sp/message-banner-unsaved-changes/loader","oj-sp/metric-card/loader","oj-sp/mini-card/loader","oj-sp/object-card/loader","oj-sp/overflow/loader","oj-sp/preview-card/loader","oj-sp/primary-action-feedback/loader","oj-sp/profile-card/loader","oj-sp/recommendation-card/loader","oj-sp/scoreboard/loader","oj-sp/scoreboard-metric-card/loader","oj-sp/selection-chart-card/loader","oj-sp/select-single-currency/loader","oj-sp/select-single-item-template/loader","oj-sp/simple-create-edit/loader","oj-sp/skill-chip/loader","oj-sp/smart-filter-search/loader","oj-sp/smart-search-page/loader","oj-sp/smart-search/loader","oj-sp/smart-search/default-filters/KeywordFilter","oj-sp/smart-search/default-filters/ToggleFilter","oj-sp/smart-search/default-filters/NumericRangeFilter","oj-sp/smart-search/default-filters/DateRangeFilter","oj-sp/smart-search/default-filters/SelectSingleFilter","oj-sp/smart-search/default-filters/SelectMultipleFilter","oj-sp/smart-search/default-filters/BigNumericRangeFilter","oj-sp/smart-search/strategies/BossSearchStrategyFactory","oj-sp/smart-search/strategies/JsonSearchConfigProviderFactory","oj-sp/smart-filters/loader","oj-sp/smart-select-single/loader","oj-sp/task-card/loader","oj-sp/timeline-event-template/loader","oj-sp/thumbnail/loader","oj-sp/vertical-overview/loader","oj-sp/welcome-page/loader","oj-sp/timestamp/loader","oj-sp/skill-chip/loader","oj-sp/flex-checkbox/loader","oj-sp/vertical-anchor-navigator/loader","oj-sp/section/loader","oj-sp/common/flex/converters/FlexUpperCaseConverter","oj-sp/information-organizer/loader","oj-sp/internal-resources/components/collection-toolbars/loader","oj-sp/internal-resources/components/color-thief/color-thief","oj-sp/internal-resources/components/expandable-panel/loader","oj-sp/output-rich-text/loader"],(function(){}));