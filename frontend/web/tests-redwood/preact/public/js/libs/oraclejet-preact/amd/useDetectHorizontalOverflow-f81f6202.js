define(['exports', 'preact/hooks', './useResizeObserver-25032462', './tabBarUtils-6cb47f4d'], (function(e,t,n,r){"use strict";const s=(e,t,n)=>{if(null==e)return!0;if(e&&t&&n){const r=[...e,...t];return r.length!==n.length||JSON.stringify(n)!==JSON.stringify(r)}return!1},c=(e,t)=>{if(null!=e&&null!=t){let n=0,r=e.length-1,s=null,c=null;for(;n<=r&&n<e.length&&r>-1;){const i=Math.floor((n+r)/2),l=e[i];if(l===t)return{closestEntry:l,closestIndex:i};l<t?(s=l,c=i,n=i+1):r=i-1,c=s&&t>s?Math.abs(t-s)>102&&i+1<=e.length-2?i+1:Math.abs(t-s)>48?i:i-1>=0?i-1:0:i-1>=0?i-1:0}return{closestEntry:s,closestIndex:c}}return{closestEntry:null,closestIndex:null}};e.useDetectHorizontalOverflow=function({rootRef:e,keysArray:i,isTruncationDisabled:l=!0}){const[u,o]=t.useState(),[a,f]=t.useState(),h=t.useRef(new Map),[d,y]=t.useState(),[m,b]=t.useState(0),v=t.useRef(!1),g=t.useRef(!1),p=t.useRef();t.useLayoutEffect((()=>{const t=e?.current?.clientWidth,n=e?.current?.scrollWidth;if(e.current&&i&&i.length>0&&t&&t>0&&(m!==t&&b(t),void 0===d)){if(t>0&&t<n)if(v.current)p.current=p.current?.map((e=>({...e})));else{const n=r.getTabWidths(e.current,h,l,t,v?.current,i);n.every((e=>e.hasReachedLimit))&&(v.current=!0),p.current=n}else y((e=>e));if(!l){const e=new Map(p.current?.map((e=>[e.key,e.maxWidth+"px"])));y(e)}if(t<n){const n=p.current?.map((e=>e.cumulativeWidth)),s=n.length-1;if(n&&t<n[s]){const{closestEntry:u,closestIndex:a}=c(n,t);if(u&&null!=a){const n=a<s-1?a+1:a;if(o(i.slice(0,n)),f(i?.slice(n)),a>0&&!g.current&&!l){const n=r.getTabWidths(e.current,h,l,t,v?.current),s=new Map(n.map((e=>[e.key,e.maxWidth+"px"])));g.current=!0,y(s)}}}}}}),[i,e,m,d,l]);const x=t.useCallback((t=>{const n=Math.ceil(t.contentRect.width);Math.abs(m-t.contentRect.width)>1&&(b(t.contentRect.width),void 0===d||v.current||y(void 0),n>=e.current?.scrollWidth&&(o(i),f([])),g.current=!1)}),[m,d,e,i]);return n.useResizeObserver(e,x),s(u,a,i)?{visibleItemKeys:i,overflowItemKeys:a,maxWidths:d}:{visibleItemKeys:u,overflowItemKeys:a,maxWidths:d}}}));
//# sourceMappingURL=useDetectHorizontalOverflow-f81f6202.js.map
