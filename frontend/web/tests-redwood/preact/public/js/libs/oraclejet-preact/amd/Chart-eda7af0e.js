define(['exports', 'preact/jsx-runtime', './PRIVATE_Chart/themes/ChartStyles.css', './TrackResizeContainer-a4999df9', './useTextDimensions-f254e8f5', './useCssVars-d782da3d', 'preact/hooks', './Gridlines-545ae30a', './useId-c9578d26', './Axis-3b37075a', './useChartViewport-167a8e6b', './utils-8ccd1b88', './useChartNav-a162c821', './mergeProps-bcfa6a92', './ScrollBar-fae26188', './useSelectDrill-d58a7229', './useUser-988f7da2', './useTestId-a2e433c2', './cssUtils-1609d0af', './useChartContextMenu-59688a67', './useChartDnd-e1facca9', './eventsUtils-5fb81c3e', './accUtils-acd70e81', './layoutUtils-641af87a', './useTooltip-e14d62f1', './logger-0f873e29', './LayerHost-7d4aa6d3', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', './useChartMarquee-84054198', './useVisTouchResponse-88a7bb09', './stringUtils-4ffd9d59', './useOverviewContext-dd00c487', './scale-2f3251e1', './OverviewSlidingWindow-366528eb', './PRIVATE_VisOverview/themes/VisOverview.css', './useTranslationBundle-27bf6340', './useChartDatatip-cdfc4089'], (function(e,t,o,r,i,a,n,s,l,d,c,u,x,p,g,h,v,f,I,m,y,w,S,A,C,b,D,P,T,j,M,R,G,k,F,O,L,V,B,N,z){"use strict";function E(e,t,o,r){if(1===e[t][o].path.length)return{levelIndex:t,groupIndex:o};let i=Math.max(0,t-1);const a=e[t][o],{start:n,end:s}=a;for(;i>=0;){for(let t=0;t<e[i].length;t++){const{start:o,end:a}=e[i][t];if(o<=n&&s<=a&&r(i,t))return{groupIndex:t,levelIndex:i}}i-=1}return{levelIndex:t,groupIndex:o}}function U(e,t,o,r){if(t===e.length-1)return{levelIndex:t,groupIndex:o};const i=Math.min(e.length-1,t+1),a=e[t][o],{start:n,end:s}=a;for(;i<=e.length-1;)for(let t=0;t<e[i].length;t++){const{start:o,end:a}=e[i][t];if(n<=o&&a<=s&&r(i,t))return{groupIndex:t,levelIndex:i}}return{levelIndex:t,groupIndex:o}}function W(e,t,o){const r=t.groupIndex+1,i=t.levelIndex;if(!(r>e[i].length-1))return o(i,r)?{groupIndex:r,levelIndex:i}:W(e,{groupIndex:r,levelIndex:i},o)}function H(e,t){const o=e.groupIndex-1,r=e.levelIndex;if(!(o<0))return t(r,o)?{groupIndex:o,levelIndex:r}:H({groupIndex:o,levelIndex:r},t)}function X({x:e,width:o,height:r,y:i,windowX:a,windowHeight:n,windowWidth:s,windowY:l}){return t.jsxs(t.Fragment,{children:[t.jsx("rect",{x:e,y:i,width:Math.max(0,a-e),height:r,class:B.styles.overviewBackground}),t.jsx("rect",{x:a+s,width:Math.max(0,e+o-a-s),y:i,height:r,class:B.styles.overviewBackground}),t.jsx("rect",{x:a,y:i,height:Math.max(0,l-i),width:s,class:B.styles.overviewBackground}),t.jsx("rect",{x:a,y:l+n,width:s,class:B.styles.overviewBackground,height:Math.max(i+r-l-n,0)})]})}const q=I.getChartVars();function Y({width:e,height:r,selectedIds:I,hiddenIds:S,hideAndShowBehavior:b="none",orientation:D="vertical",xAxis:P,yAxis:T,y2Axis:j,plotArea:M,dragMode:R="user",series:B,groups:Y,isStacked:Z=!1,getDataItem:$,selectionMode:_="none",drilling:J="off",dataCursorPosition:K,onSelectionChange:Q,isDataCursorEnabled:ee,dataCursorStyle:te,onViewportChange:oe,onDataCursorPositionChange:re,onItemDrill:ie,onGroupDrill:ae,onItemHover:ne,onItemFocus:se,datatip:le,zoomAndScroll:de="off",getNavUtil:ce,getDataItemPos:ue,getGapRatio:xe,valueFormats:pe,findNearest:ge,getMarkerInfo:he,isRtl:ve,children:fe,testId:Ie,renderGridLinesInFront:me,isDataXAxis:ye,contextMenuConfig:we,overview:Se="off",getStartAndEndAxesOffset:Ae,defaultOverviewContentRenderer:Ce,isOverview:be,yAxisSize:De,overviewRenderer:Pe,...Te}){const je=f.useTestId(Ie),Me=n.useRef(null),Re=void 0!==je["data-testid"],Ge="horizontal"===D,{xAxisPosition:ke,yAxisPosition:Fe,y2AxisPosition:Oe}=u.getAxesPosition(T,j,Ge,ve),{resolvedVars:Le,cssContent:Ve}=a.useCssVars(q),Be=Array.from(Array(12)).map(((e,t)=>Le[`color${t+1}`])),{textMeasureContent:Ne,getTextDimensions:ze}=i.useTextDimensions();let Ee=u.getAvailSpace(e,r);if(be&&De){const e=Ee.width-De,t=u.getOuterGaps(e,r);Ee.width-=De-2*t.width,Ee.x+=De-t.width}const Ue=null!=P?.timeAxisType,We=u.getScrollBarSpace(Ue,Ee,de,ke,Se);let He=We.scrollDims;Ee=We.availSpace;const{locale:Xe}=v.useUser(),{x:qe,y:Ye,width:Ze,height:$e}=Ee,_e=Le.labelFontSize,Je=j?.split??"off",Ke="off"!==Je,Qe="off"!==Je?Je:.5,et=n.useMemo((()=>{const e=new Set(S);return u.getLayoutInfo(B,Y,$,P,T,j,{x:qe,y:Ye,width:Ze,height:$e},e,b,Ge,ve,Z,_e,Ae,Xe,Ke,Qe,ze,Re,ye)}),[qe,Ye,Ze,$e,$,ze,Y,S,b,ye,Ge,ve,Z,Re,Xe,Ae,_e,B,P,T,j,Qe,Ke]),{getGroupFromPath:tt,levelsArray:ot,xAxisInfo:rt,xProps:it,xScale:at,yProps:nt,y2Props:st,yScale:lt,y2Scale:dt,yMaxDim:ct,yAxisInfo:ut,plotAreaSpace:xt,xSpace:pt,ySpace:gt,y2Space:ht,idToDataMap:vt,y2AxisInfo:ft}=et,It=ot.length>0?ot[ot.length-1]:[];He=u.updateScrollBarSpace(He,"bottom"===ke,ve,ct);const mt=xe(rt.startIndex,rt.endIndex),yt=ce(rt.startIndex,rt.endIndex),{getNextNavGroup:wt,getDefaultNavGroup:St}=function(e,t,o,r,i){const a=(o,r)=>{const a=e[o][r].item,n=a.name||a.id,s=a.drilling;return!!i?.(o,r)&&null!=n&&("on"===t||"groupsOnly"===t)&&"off"!=s};return{getNextNavGroup:(t,i)=>{let n;return"ArrowRight"===i?n=r?o?E(e,t.levelIndex,t.groupIndex,a):U(e,t.levelIndex,t.groupIndex,a):o?H(t,a):W(e,t,a):"ArrowLeft"===i?n=r?o?U(e,t.levelIndex,t.groupIndex,a):E(e,t.levelIndex,t.groupIndex,a):o?W(e,t,a):H(t,a):"ArrowDown"===i?n=r?W(e,t,a):E(e,t.levelIndex,t.groupIndex,a):"ArrowUp"===i&&(n=r?H(t,a):U(e,t.levelIndex,t.groupIndex,a)),n||t},getDefaultNavGroup:()=>{for(let t=0;t<e.length;t++){const o=e[t].length;for(let e=0;e<o;e++)if(a(t,e))return{groupIndex:e,levelIndex:t}}return{groupIndex:0,levelIndex:0}}}}(ot,J,ve,Ge,it.isGroupLabelRendered),{ignoreSelectPointerUp:At,cursor:Ct,yAxisCursor:bt,marqueeProps:Dt,marqueeContent:Pt,toggleButtonContent:Tt,isPointInsideMarquee:jt,dragMode:Mt}=G.useChartMarquee({rootRef:Me,plotAreaSpace:xt,xSpace:pt,ySpace:gt,dragMode:R,chartWidth:e,isMultiSelection:"multiple"===_,onViewportChange:oe,isZoomScroll:"live"===de,xScale:at,selectedIds:I,getDataById:e=>vt.get(e),onSelectionChange:Q,isRtl:ve,xAxisInfo:rt}),{touchResponse:Rt,touchResponseStyle:Gt}=k.useVisTouchResponse({type:"auto",supportsTouchDragGestures:"off"!==Mt,rootRef:Me}),{activeId:kt,focusedItemInfo:Ft,hoveredItemInfo:Ot,focusedGroupInfo:Lt,navProps:Vt,onFocusUpdate:Bt}=x.useChartNav({rootRef:Me,getNextChartItem:yt,getNextNavGroup:wt,getDefaultNavGroup:St,touchResponse:Rt,onItemHover:ne,onItemFocus:se,drilling:J,xAxisInfo:rt}),Nt=N.useTranslationBundle("@oracle/oraclejet-preact"),{tooltipContent:zt,tooltipProps:Et}=function({getTextAndBounds:e,width:t,isRtl:o}){const[r,i]=n.useState(),a=n.useRef(),{tooltipContent:s,tooltipProps:l}=C.useTooltip({text:r,position:"top-start",offset:A.calculateOffset(o,t,a.current)});return{tooltipContent:s,tooltipProps:p.mergeProps({onPointerMove:t=>{const o=e(t.target);o?(a.current=o.bounds,i(o.text)):i(void 0)}},l)}}({getTextAndBounds:e=>{if(e!=Me.current){const t=w.getElementData(Me,e),o=t?.ojPrivateText;if(!o)return;if(o===P?.title)return{text:o,bounds:it.titleProps?.dims};if(o===T?.title)return{text:o,bounds:nt.titleProps?.dims};if(o===j?.title)return{text:o,bounds:st.titleProps?.dims};if(t?.ojPrivateGroupIndex&&t?.ojPrivateLevelIndex)return{bounds:it.tickLabels.find((({dataProps:e})=>e["data-oj-private-level-index"]===t.ojPrivateLevelIndex&&e["data-oj-private-group-index"]===t.ojPrivateGroupIndex)).dims,text:o}}if(e===Me.current&&Lt.isFocusVisible){const e=Y[Lt.groupIndex||0];return{bounds:it.tickLabels[Lt?.groupIndex||0].dims,text:e.name||e.id}}},width:e,isRtl:ve}),Ut=c.useChartViewport({rootRef:Me,width:e,height:r,xAxisInfo:rt,yAxisInfo:ut,y2AxisInfo:ft,xScale:at,yScale:lt,y2Scale:dt,plotAreaSpace:xt,isRtl:ve,isHoriz:Ge,zoomAndScroll:de,onViewportChange:oe}),{selectDrillProps:Wt,selectionContent:Ht}=h.useSelectDrill({selectionMode:_,selection:[...I],onChange:Q,rootRef:Me,drilling:J,onItemDrill:ie,onGroupDrill:ae,focusedGroupInfo:Lt,focusedItemInfo:Ft,levelsArray:ot,getDataItem:$,getDataById:e=>vt.get(e),ignoreAsTrigger:e=>{if(!e)return!1;const t=w.getElementData(Me,e);return!((!t||"marquee"!==t.ojPrivateObject&&"dragModeControls"!==t.ojPrivateObject&&"scrollBar"!==t.ojPrivateObject)&&!At)}}),Xt=ge(at,lt,dt,it.axisStepWidth,it.averageGroupZ,mt),qt=ue(at,lt,dt,it.axisStepWidth,it.averageGroupZ,mt),[Yt,Zt]=n.useState(!1),$t=z.getAriaLabelGenerator(B,Nt,pe,It,P,!!ye,tt,it.defaultLabelFormatter,nt.defaultLabelFormatter,st.defaultLabelFormatter),{datatipContent:_t,dataCursorContent:Jt,datatipProps:{"aria-describedby":Kt,...Qt}}=h.useChartDatatipAndCursor({series:B,leafGroupsInfo:It,width:e,height:r,findNearest:Xt,plotAreaSpace:xt,onDataCursorPositionChange:re,isDataCursorEnabled:ee,dataCursorPosition:K,dataCursorStyle:te,hoveredItemInfo:Ot,focusedItemInfo:Ft,getDataItem:$,getMarkerInfo:he,getDataItemPos:qt,datatip:le,valueFormats:pe,isHoriz:Ge,touchResponse:Rt,isDisabled:Yt,xScale:at,yScale:lt,y2Scale:dt,timeAxisType:P?.timeAxisType,defaultXFormatter:it.defaultLabelFormatter,defaultYFormatter:nt.defaultLabelFormatter,defaultY2Formatter:st.defaultLabelFormatter,hasXYValues:ye,getGroupFromPath:tt,translations:Nt}),eo=l.useId(),to=t.jsx(s.Gridlines,{plotArea:M,availSpace:xt,xAxisPosition:ke,isRtl:ve,yMinorTicks:ut.minorTicks,xMinorTicks:rt.minorTicks,xScale:at,yScale:lt,y2Scale:dt,isLog:"log"===T?.scale,yAxisPosition:Fe,isDataXAxis:ye,xAxis:P,yAxis:T,y2Axis:j,hasAxisLine:!be,y2MinorTicks:ft?.minorTicks,y2Ticks:ft.ticks,yTicks:ut.ticks,xTicks:rt.ticks,isSplitDualY:Ke}),oo=B.length>0&&Y.length>0,{contextMenuContent:ro,contextMenuProps:io}=m.useChartContextMenu({isRtl:ve,width:e,height:r,getDataItemPosition:qt,series:B,levelsArray:ot,focusedGroupInfo:Lt,getDataItem:$,focusedItemInfo:Ft,rootRef:Me,xAxisTitle:P?.title,yAxisTitle:T?.title,contextMenuConfig:oo?we:void 0,onContextMenuDismissed:e=>{"keyboard"===e&&Bt()}}),[ao,no]=n.useState({accepted:void 0,type:""}),{draggable:so,dndProps:lo,dndContent:co}=y.useChartDnd({onDrag:Te.onDrag,onDragStart:Te.onDragStart,onDragEnd:Te.onDragEnd,onDragEnter:Te.onDragEnter,onDragLeave:Te.onDragLeave,onDragOver:Te.onDragOver,onDrop:Te.onDrop,itemsDraggable:Te.itemsDraggable,groupDraggable:Te.groupDraggable,rootRef:Me,levelsArray:ot,series:B,selectedIds:I,getDataItem:$,xSpace:pt,ySpace:gt,plotAreaSpace:xt,setDragOver:no,setDatatipDisabled:Zt,onSelectionChange:Q}),uo=p.mergeProps(Vt,Wt,Ut,Qt,Dt,Et,io,lo),xo="off"==Se||"on"!==Se&&Se.renderer?void 0:Ce,{background:po,slidingWindow:go}=Pe(xt);return t.jsxs(t.Fragment,{children:[ze&&null!=Le.labelFontSize&&t.jsxs("div",{tabIndex:be?void 0:0,draggable:so,ref:Me,"aria-activedescendant":kt,"aria-label":Te["aria-label"],"aria-labelledby":Te["aria-labelledby"],"aria-describedby":F.l([Te["aria-describedby"],Kt]),style:{...Gt},role:be?void 0:"application",className:o.styles.baseChartStyle,"data-oj-private-selection-mode":Re?_:void 0,...je,...be?{}:uo,children:[t.jsxs("svg",{width:"100%",height:0!=He.height&&"off"!=Se?Math.ceil(100*(We.availSpace.height+10))/r+"%":"100%",children:[t.jsx("clipPath",{id:`${eo}`,children:t.jsx("rect",{...xt})}),po,t.jsx(s.PlotArea,{color:M?.color,dragOverStyle:"plotArea"!==ao.type?"none":ao.accepted?"accept":"reject",cursor:Ct,availSpace:xt}),!me&&to,t.jsx(d.Axis,{...nt,axisPosition:Fe,isRtl:ve,cursor:bt,availSpace:gt,dragOverStyle:"yAxis"!==ao.type?"none":ao.accepted?"accept":"reject"}),t.jsx(d.Axis,{...st,axisPosition:Oe,isRtl:ve,cursor:bt,availSpace:ht,dragOverStyle:"y2Axis"!==ao.type?"none":ao.accepted?"accept":"reject"}),t.jsx(d.Axis,{...it,isRtl:ve,axisPosition:ke,isTextInteractive:e=>{if(null!=P?.timeAxisType)return!1;const t=Y[e]?.drilling;return"on"===t||"off"!=t&&("on"===J||"groupsOnly"===J)},activeId:kt,cursor:Ct,focusedGroupIndex:Lt.isFocusVisible?Lt.groupIndex:void 0,focusedGroupLevelIndex:Lt.isFocusVisible?Lt.levelIndex:void 0,availSpace:pt,dragOverStyle:"xAxis"!==ao.type?"none":ao.accepted?"accept":"reject",separatorColor:P?.groupSeparators?.color}),t.jsxs("g",{children:[fe({xStartIndex:rt.startIndex,xEndIndex:rt.endIndex,getItemAriaLabel:$t,groupsInfo:It,colors:Be,xScale:at,yScale:lt,y2Scale:dt,isPointInsideMarquee:jt,defaultFontSize:Le.labelFontSize,gapRatio:mt,activeId:kt,focusedItemInfo:Ft,hoveredItemInfo:Ot,getTextDimensions:ze,axisStepWidth:it.axisStepWidth,averageGroupZ:it.averageGroupZ,plotAreaClipPathId:eo}),me&&to,Jt]}),go,"live"===de&&!be&&t.jsx(g.ScrollBar,{availSpace:He,isRtl:ve,viewport:rt,axisExtent:rt,isHoriz:"bottom"===ke}),Pt]}),t.jsx(O.OverviewContext.Provider,{value:{yAxisSize:gt.width,isOverview:!0,width:e,height:He.height,overviewRenderer:e=>{const{xScale:o,...r}=function(e,t,o,r,i,a){const n=[o.min,o.max],s=e?[a.x+a.width,a.x]:[a.x,a.x+a.width],l=new L.ScaleLinear(n,s),d=[i.min,i.max],c=[a.y+a.height,a.y],u=new L.ScaleLinear(d,c),x=l.transform(t.viewportMin),p=Math.abs(l.transform(t.viewportMax)-l.transform(t.viewportMin));return{windowX:e?x-p:x,windowWidth:p,windowY:u.transform(r.viewportMax),windowHeight:Math.abs(u.transform(r.viewportMax)-u.transform(r.viewportMin)),xScale:l,yScale:u}}(ve,rt,rt,ut,ut,e);return function(e,o,r,i,a,n,s){return{slidingWindow:t.jsx(V.OverviewSlidingWindow,{...i,...a,hasHandles:n,onWindowDimsChange:t=>{u.updateViewportFromOverview(e,o,a.windowX,a.windowWidth,t.deltaX,t.deltaWidth,r,s)}}),background:t.jsx(X,{...i,...a})}}(rt,ve,o,e,r,!0,oe)}},children:!be&&"off"!==Se&&xo&&t.jsx("div",{style:{width:e,height:He.height},children:xo()})}),Tt,_t,zt,ro,Ht,co]}),Ne,Ve]})}e.Chart=function({width:e,height:i,...a}){const{isOverview:n,overviewRenderer:s,yAxisSize:l,width:d,height:c}=O.useOverviewContext();let u=e,x=i;return void 0===u&&n&&void 0!==d&&(u=`${d}px`),void 0===x&&n&&void 0!==c&&(x=`${c}px`),t.jsx(r.TrackResizeContainer,{width:u,height:x,class:o.dimensionStyle,children:(e,o)=>e||o?t.jsx(Y,{width:e,height:o,...a,yAxisSize:l,isOverview:n,overviewRenderer:s}):void 0})}}));
//# sourceMappingURL=Chart-eda7af0e.js.map
