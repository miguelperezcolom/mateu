define(['exports', 'preact/hooks', './keys-4755c121', './textSelectionUtils-06c7855d'], (function(e,t,n,r){"use strict";const i=(e,t,r,i,l,o,s,c,u,a)=>{if(void 0!==i){if(void 0!==l&&l!==o){let a=t;const f=s(i),y=s(o),d=s(l);if(-1===f||-1===y||-1===d)return;const p=Math.min(f,y),v=Math.max(f,y),k=c(p,v+1);if(a=n.addKeys(a,k),d<p||d>v){const e=d<p?c(d,p):c(v+1,d+1);a=n.removeKeys(a,e,r)}t!=a&&u&&(u({value:a,target:e.target}),"click"===e.type&&e.stopPropagation())}else a?.({value:{start:i,end:o},eventType:"click"===e.type?"shiftClick":"shiftArrowKeys"});return o}},l=(e,t,r,i,l,o)=>{let s=t;s=n.containsKey(s,l)?n.removeKey(s,l,i):"single"===r?{all:!1,keys:new Set([l])}:n.addKey(s,l),t!=s&&o&&(o({value:s,target:e.target}),"click"===e.type&&e.stopPropagation())};e.useAdditiveSelection=function(e,n,o,s,c,u,a,f,y,d,p=!0){const v=t.useRef(),k=t.useRef(),g=e=>{v.current=e,k.current=void 0},K=t.useCallback((t=>{if(r.getIsSelectionPending())return;const a=e(t.target);if(null!=a)if("single"===o)l(t,n,o,s,a,y);else if("multiple"===o)if(t.shiftKey&&void 0!==v.current){void 0!==i(t,n,s,v.current,k.current,a,c,u,y,d)&&(k.current=a)}else g(a),l(t,n,o,s,a,y)}),[e,n,o,s,c,u,y,d]),h=t.useCallback((e=>{if(" "!==e.key){if("multiple"===o){if("ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;const t=a(f,"ArrowUp"===e.key)();if(null==t)return;if(e.shiftKey){e.preventDefault(),void 0===v.current&&(v.current=f);const r=i(e,n,s,v.current,k.current,t,c,u,y,d);void 0!==r&&(k.current=r)}else g(t)}}else e.preventDefault()}),[a,f,n,o,s,c,u,y,d]),w=t.useCallback((t=>{if(" "===t.key||p&&"Enter"===t.key){const r=e(t.target);if(null==r)return;l(t,n,o,s,r,y)}}),[e,p,n,o,s,y]),m=t.useCallback((e=>{void 0!==v.current&&e.shiftKey&&"multiple"===o&&e.preventDefault()}),[o]);return{eventProps:"none"===o||null==y?{}:{onClick:K,onKeyDown:h,onKeyUp:w,onPointerDown:m},setAdditiveSelectionACKey:g}}}));
//# sourceMappingURL=useAdditiveSelection-9135c06c.js.map
