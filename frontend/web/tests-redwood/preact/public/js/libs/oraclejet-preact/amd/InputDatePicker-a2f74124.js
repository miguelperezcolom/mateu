define(['exports', 'preact/jsx-runtime', 'preact/compat', 'preact/hooks', './Calendar-47e39e3e', './HiddenAccessible-037ef42d', './IconButton-b4b83d00', './clientHints-6d361eaa', './FormFieldContext-a024b891', './logger-0f873e29', './TabbableModeContext-a9c97640', './useTranslationBundle-27bf6340', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-b485c235', './Flex-4bc3a394', 'css!./MessageBannerStyles.styles.css', 'module', './UNSAFE_MessageBanner/themes/redwood/MessageBannerVariants.css', 'preact', './LayerHost-7d4aa6d3', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', 'css!./MessageStyles.styles.css', './MessageFormattingUtils-ea0be23e', './TransitionGroup-3b9d81b6', './MessagesContext-602a69a2', 'css!./HiddenAccessibleStyles.styles.css', 'css!./ComponentMessageStyles.styles.css', 'module', './UNSAFE_ComponentMessage/themes/redwood/ComponentMessageVariants.css', './Popup-062b66ff', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './InputGroupContext-372087af', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './UNSAFE_InputDatePicker/themes/InputDatePickerDropdownStyles.css', './Sheet-fdd314ac', './DatePicker-26834e69', './SectionedContent-bae8af88', './stringUtils-4ffd9d59', './FormContext-6b0879a0', './useFormContext-b8cbbb21', './useId-c9578d26', './getFormatParse-7ea0c25b', './maskUtils-8e7a7701', './useHiddenTestMethod-2f1d2e7e', './calendarDateUtils-dd5b75ee', './useTestId-a2e433c2', './InputDateMask-81cd129f'], (function(e,s,t,a,n,o,r,i,l,d,c,u,m,p,h,y,f,b,C,D,v,S,k,x,A,T,g,F,I,V,P,R,w,M,U,_,j,H,B,E,N,L,O,Y,Z,W,z,G,q,J,K,Q,X,$,ee,se,te){"use strict";const ae=({anchorRef:e,assistiveText:t,dayFormatter:n,daysOutsideMonth:o,helpSourceLink:r,helpSourceText:i,isDisabled:d,isOpen:c,isReadonly:m,label:p,onClose:h,onCommit:f,max:b,messages:C,min:D,monthAndYearPicker:v,testId:S,todayButton:k,todayTimeZone:x,userAssistanceDensity:A,value:T,weekDisplay:g})=>{const[F,I]=a.useState(!1),[V,P]=a.useState(c),R=a.useCallback((e=>{I(e.placement.startsWith("top"))}),[]);V!==c&&(P(c),c||I(!1));const w=ne(),{datePicker_label:M}=u.useTranslationBundle("@oracle/oraclejet-preact"),U=M(),_=s.jsx(W.DatePicker,{dayFormatter:n,daysOutsideMonth:o,height:w?void 0:"auto",onCommit:f,max:b,min:D,maxWidth:w?"100%":void 0,width:"100%",monthAndYearPicker:v,testId:S,todayTimeZone:x,todayButton:k,value:T,weekDisplay:g}),j=!c||F&&!w||d||m||!(t||r||C&&C.length>0)||"efficient"!==A&&"reflow"!==A?void 0:s.jsx(l.FormFieldContext.Provider,{value:{isFocused:!0},children:s.jsx("div",{class:Y.userAssistanceStyles,children:s.jsx(y.InlineUserAssistance,{assistiveText:t,fieldLabel:p,helpSourceLink:r,helpSourceText:i,messages:C,userAssistanceDensity:A})})}),H=S?S+(w?"_sheet":"_dropdown"):void 0,B=s.jsx("div",{class:Y.dropdownStyles,children:s.jsx(z.SectionedContent,{"aria-label":U,footer:j,hasFocusTrap:!0,main:_,role:"dialog",testId:H})});return w?s.jsx(Z.Sheet,{initialFocus:"firstFocusable",isOpen:c,onClose:h,children:s.jsx(z.SectionedContent,{"aria-label":U,footer:j,hasFocusTrap:!0,main:_,role:"dialog",testId:H})}):s.jsx(z.StickyPositioningDropdown,{anchorRef:e,initialFocus:"firstFocusable",isOpen:c,onClose:h,onPosition:R,sizeOptions:{isMaxWidthAdjusted:!1,isMaxHeightAdjusted:!0},children:B})},ne=()=>"phone"===i.getClientHints().deviceType,oe=e=>e&&ee.isCompleteCalendarDate(e)?e:void 0,re=(e,s)=>{switch(s.type){case"dateChanged":return{...e,dateValue:s.data,completeDateValue:oe(s.data)};case"dateSelected":return{...e,dateValue:s.data,completeDateValue:s.data};case"reset":return{completeDateValue:oe(s.data),dateValue:s.data};default:return e}},ie=({isDisabled:e,isReadonly:s,onCommit:t,onInput:n,rootRef:o,value:r})=>{const[i,l]=a.useState(!1),d=a.useRef(null),c=a.useRef(null),u=a.useRef(!1),m=a.useRef(),p=a.useRef(r),h=a.useRef(r),y=a.useRef(r),f=a.useRef(!1),{state:b,dispatch:C}=(({value:e})=>{const[s,t]=a.useReducer(re,{completeDateValue:oe(e),dateValue:e});return{state:s,dispatch:t}})({value:r});X.calendarDatesAreDifferent(y.current,r)&&(y.current=r,X.calendarDatesAreDifferent(r,b.dateValue)&&(C({type:"reset",data:r}),h.current=r,p.current=r)),a.useEffect((()=>{X.calendarDatesAreDifferent(b.dateValue,h.current)&&(n({previousValue:h.current,value:b.dateValue}),h.current=b.dateValue),f.current&&X.calendarDatesAreDifferent(b.dateValue,p.current)&&(t?.({previousValue:p.current,value:b.dateValue}),p.current=b.dateValue,f.current=!1)}),[t,n,b.dateValue]);const D=a.useCallback((e=>{C({type:"dateChanged",data:e.value})}),[C]),v=a.useCallback((e=>{X.calendarDatesAreDifferent(p.current,e.value)&&(t?.({value:e.value,previousValue:p.current}),p.current=e.value)}),[t]),S=a.useCallback((()=>{u.current||l((e=>!e)),u.current=!1}),[]),k=a.useCallback((e=>{"outsideMousedown"===e.reason?(u.current=!0,clearTimeout(m.current),m.current=setTimeout((()=>{u.current=!1}),200)):"dismissed"!==e.reason&&"keyboardDismissed"!==e.reason||d.current?.focus(),l(!1)}),[]),x=a.useCallback((e=>{d.current?.focus(),f.current=!0,C({type:"dateSelected",data:e.value}),l(!1)}),[C]),A=a.useCallback((a=>s||e?Promise.reject("Component is readonly or disabled"):(n({value:a,previousValue:r}),t?.({value:a,previousValue:r}),Promise.resolve())),[r,e,s,t,n]);return $.useHiddenTestMethod({elementRef:o,method:A,name:"_changeValue"}),{calendarIconActionHandler:S,datePickerCommitHandler:x,dropdownCloseHandler:k,completeDateValue:b.completeDateValue,dateValue:b.dateValue,iconRef:d,isOpen:i,maskCommitHandler:v,maskInputHandler:D,maskRef:c}},le=t.forwardRef((({"aria-describedby":e,assistiveText:t,dayFormatter:i,daysOutsideMonth:l,helpSourceLink:d,helpSourceText:c,isDisabled:m,isReadonly:p,label:h,max:y,messages:f,min:b,monthAndYearPicker:C,todayTimeZone:D,todayButton:v,value:S,onCommit:k,onInput:x,testId:A,userAssistanceDensity:T,weekDisplay:g,...F},I)=>{const V=se.useTestId(A),P=a.useRef(null),{calendarIconActionHandler:R,datePickerCommitHandler:w,completeDateValue:M,dateValue:U,dropdownCloseHandler:_,iconRef:j,isOpen:H,maskCommitHandler:B,maskInputHandler:E,maskRef:N}=ie({isDisabled:m,isReadonly:p,onCommit:k,onInput:x,rootRef:P,value:S}),L=a.useRef(null),{inputDatePicker_selectDate:O,inputDatePicker_instruction:Y}=u.useTranslationBundle("@oracle/oraclejet-preact"),Z=O(),{userAssistanceDensity:W}=J.useFormContext(),z=T??W;a.useImperativeHandle(I,(()=>({focus:()=>{N.current?.focus()},blur:()=>{N.current?.blur()}})));const q=K.useId(),Q=Y(),X=m||p?void 0:s.jsx(o.HiddenAccessible,{id:q,isHidden:!0,children:Q}),$=m||p?e:G.l([e,q]),ee=s.jsx(r.IconButton,{"aria-haspopup":"dialog","aria-label":Z,isDisabled:m,ref:j,size:"sm",testId:A?A+"_calendarIcon":void 0,variant:"ghost",onAction:R,children:s.jsx(n.SvgCalendar,{})}),ne=H;return s.jsxs("div",{...V,ref:P,children:[s.jsx(te.InputDateMaskContext.Provider,{value:{isDropdownOpen:H,isInputDatePickerParent:!0},children:s.jsx(te.InputDateMask,{"aria-describedby":$,assistiveText:t,endContent:ee,helpSourceLink:d,helpSourceText:c,isDisabled:m,isReadonly:p,label:h,onCommit:B,onInput:E,mainFieldRef:L,messages:f,testId:A?A+"_mask":void 0,ref:N,userAssistanceDensity:T,value:U,...F})}),X,ne&&s.jsx(ae,{anchorRef:L,assistiveText:t,dayFormatter:i,daysOutsideMonth:l,helpSourceLink:d,helpSourceText:c,isDisabled:m,isReadonly:p,isOpen:H,label:h,onClose:_,onCommit:w,max:y,messages:f,min:b,monthAndYearPicker:C,testId:A?A+"_datePicker":void 0,todayTimeZone:D,todayButton:v,userAssistanceDensity:z,value:M,weekDisplay:g})]})}));e.InputDatePicker=le}));
//# sourceMappingURL=InputDatePicker-a2f74124.js.map
