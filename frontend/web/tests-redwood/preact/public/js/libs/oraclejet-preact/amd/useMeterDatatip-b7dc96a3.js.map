{"version":3,"file":"useMeterDatatip-b7dc96a3.js","sources":["../../src/hooks/PRIVATE_useVisMeterEvents/useMeterDatatip.tsx","../../src/hooks/PRIVATE_useVisMeterEvents/usePointerEvents.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { MutableRef } from 'preact/hooks';\nimport { useDatatip } from '#hooks/PRIVATE_useDatatip';\n\nexport function useMeterDatatip(\n  value: number,\n  isPointerActiveRef: MutableRef<boolean>,\n  datatip?: string | null,\n  ariaDescribedBy?: string\n) {\n  const datatipText = datatip === undefined ? `${value}` : datatip;\n  const { datatipContent, datatipProps } = useDatatip({\n    content: datatipText,\n    anchor: isPointerActiveRef.current ? 'pointer' : 'element',\n    offset: {\n      mainAxis: 8,\n      crossAxis: 0\n    },\n    placement: 'top',\n    touchResponse: 'touchStart'\n  });\n\n  datatipProps['aria-describedby'] =\n    [ariaDescribedBy, datatipProps['aria-describedby']].filter(Boolean).join(' ') || undefined;\n\n  return { datatipContent, datatipProps };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport type { RefObject } from 'preact';\nimport { MutableRef, useRef } from 'preact/hooks';\nimport { handleInput } from './events';\nimport { CommitDetail, InputDetail } from '#utils/UNSAFE_meterUtils';\n\ntype getValueFromEvent = (event: PointerEvent) => number | undefined;\n\nexport function usePointerEvents(\n  value: number | undefined,\n  getValue: getValueFromEvent,\n  targetRef: RefObject<HTMLDivElement>,\n  currentInputRef: MutableRef<number | undefined>,\n  isPointerActiveRef: MutableRef<boolean | undefined>,\n  onCommit?: (detail: CommitDetail) => void,\n  onInput?: (detail: InputDetail) => void\n) {\n  const isPointerDown = useRef<boolean>(false);\n\n  const onPointerUp = (event: PointerEvent) => {\n    isPointerDown.current = false;\n    const val = getValue(event);\n    if (val !== undefined) {\n      onCommit?.({ value: val } as CommitDetail);\n    }\n    isPointerActiveRef.current = true;\n  };\n\n  const onPointerMove = (event: PointerEvent) => {\n    if (isPointerDown.current) {\n      const val = getValue(event);\n      if (val !== undefined && val != currentInputRef.current) {\n        handleInput(val, currentInputRef, onInput);\n      }\n    }\n    isPointerActiveRef.current = true;\n  };\n\n  const onPointerDown = (event: PointerEvent) => {\n    isPointerDown.current = true;\n    targetRef.current?.setPointerCapture(event.pointerId);\n    const val = getValue(event);\n    if (val !== undefined && val != currentInputRef.current) {\n      handleInput(val, currentInputRef, onInput);\n    }\n    isPointerActiveRef.current = true;\n  };\n\n  const onBlur = () => {\n    isPointerDown.current = false;\n    onCommit?.({ value: value } as CommitDetail);\n    isPointerActiveRef.current = false;\n  };\n\n  const onPointerLeave = () => {\n    isPointerActiveRef.current = false;\n  };\n\n  const onPointerEnter = () => {\n    isPointerActiveRef.current = true;\n  };\n\n  return {\n    onPointerUp,\n    onBlur,\n    onPointerMove,\n    onPointerDown,\n    onPointerLeave,\n    onPointerEnter\n  };\n}\n"],"names":["value","isPointerActiveRef","datatip","ariaDescribedBy","datatipText","undefined","datatipContent","datatipProps","useDatatip","content","anchor","current","offset","mainAxis","crossAxis","placement","touchResponse","filter","Boolean","join","getValue","targetRef","currentInputRef","onCommit","onInput","isPointerDown","useRef","onPointerUp","event","val","onBlur","onPointerMove","handleInput","onPointerDown","setPointerCapture","pointerId","onPointerLeave","onPointerEnter"],"mappings":"2IAUM,SACJA,EACAC,EACAC,EACAC,GAEA,MAAMC,OAA0BC,IAAZH,EAAwB,GAAGF,IAAUE,GACnDI,eAAEA,EAAcC,aAAEA,GAAiBC,aAAW,CAClDC,QAASL,EACTM,OAAQT,EAAmBU,QAAU,UAAY,UACjDC,OAAQ,CACNC,SAAU,EACVC,UAAW,GAEbC,UAAW,MACXC,cAAe,eAMjB,OAHAT,EAAa,oBACX,CAACJ,EAAiBI,EAAa,qBAAqBU,OAAOC,SAASC,KAAK,WAAQd,EAE5E,CAAEC,iBAAgBC,eAC3B,qBClBgB,SACdP,EACAoB,EACAC,EACAC,EACArB,EACAsB,EACAC,GAEA,MAAMC,EAAgBC,UAAgB,GA6CtC,MAAO,CACLC,YA5CmBC,IACnBH,EAAcd,SAAU,EACxB,MAAMkB,EAAMT,EAASQ,QACTvB,IAARwB,GACFN,IAAW,CAAEvB,MAAO6B,IAEtB5B,EAAmBU,SAAU,CAAI,EAuCjCmB,OAhBa,KACbL,EAAcd,SAAU,EACxBY,IAAW,CAAEvB,MAAOA,IACpBC,EAAmBU,SAAU,CAAK,EAclCoB,cArCqBH,IACrB,GAAIH,EAAcd,QAAS,CACzB,MAAMkB,EAAMT,EAASQ,QACTvB,IAARwB,GAAqBA,GAAOP,EAAgBX,SAC9CqB,EAAAA,YAAYH,EAAKP,EAAiBE,EAErC,CACDvB,EAAmBU,SAAU,CAAI,EA+BjCsB,cA5BqBL,IACrBH,EAAcd,SAAU,EACxBU,EAAUV,SAASuB,kBAAkBN,EAAMO,WAC3C,MAAMN,EAAMT,EAASQ,QACTvB,IAARwB,GAAqBA,GAAOP,EAAgBX,SAC9CqB,EAAAA,YAAYH,EAAKP,EAAiBE,GAEpCvB,EAAmBU,SAAU,CAAI,EAsBjCyB,eAbqB,KACrBnC,EAAmBU,SAAU,CAAK,EAalC0B,eAVqB,KACrBpC,EAAmBU,SAAU,CAAI,EAWrC"}