define(['exports', 'preact/jsx-runtime', 'preact/hooks', 'preact/compat', './useFloating-0df4b3d3', './refUtils-77e97004', './useOutsideClick-9c4ceb18', './useUser-988f7da2', './useComponentTheme-5aa41a8f', './classNames-08d99695', './utils-ad4761c9', './themeContract.css-2e4b066d', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', './vanilla-extract-dynamic.esm-6065bbd7', './UNSAFE_Floating/themes/FloatingContract.css', './useUnsafeDomElementRef-75afb461'], (function(t,e,n,i,s,o,r,a,l,c,u,f,d,m,g,h,x){"use strict";const p=i.forwardRef((({data:t,anchorRef:i,tail:s,isRtl:r,backgroundColor:a},m)=>{const{styles:g,baseTheme:h}=l.useComponentTheme(d.FloatingRedwoodTheme),x=n.useRef(null),[p,b]=n.useState({arrowStyle:{visibility:"hidden"},arrowInnerStyle:{visibility:"hidden"}});n.useLayoutEffect((()=>{if(null==x.current)return;const{isCornerVerticalPlacement:e,isCornerHorizontalPlacement:n}=function(t,e,n){if("simple"===e&&n&&n.arrow){const{centerOffset:e}=n.arrow,i=7;let s=0,o=0;const r=t.current,a=void 0===r?.x&&void 0===r?.y;a&&(s=Math.round(r.getBoundingClientRect().height),o=Math.round(t.current?.getBoundingClientRect().width));return{isCornerVerticalPlacement:a?Math.abs(e)>=s/2-i/2:["start-top-corner","start-bottom-corner","end-top-corner","end-bottom-corner"].includes(n.origPlacement),isCornerHorizontalPlacement:a?Math.abs(e)>=o/2-i/2:["top-start-corner","top-end-corner","bottom-start-corner","bottom-end-corner"].includes(n.origPlacement)}}return{isCornerVerticalPlacement:!1,isCornerHorizontalPlacement:!1}}(i,s,t);b(function(t,e,n,i,s,o){const r={visibility:"visible"},a={visibility:"visible"};if("simple"===t&&s&&s.arrow){const{x:l,y:c,centerOffset:d}=s.arrow,m=7,g=6,h=5,x=5,p=0===d,b=d>0;function y(t){const e=t?g:m;w({borderTop:`${R(e)} solid ${u.rgba(f.colorSchemeVars.palette.neutral[90],.1)}`,borderRight:S(e),borderLeft:S(e)},r);const n=t?x:h;C({borderTop:`${R(n)} solid ${o}`,borderRight:`${S(n)}`,borderLeft:`${S(n)}`},a)}function w(t,e){Object.assign(e,t)}function C(t,e){Object.assign(e,t)}function A(t){return`rotate(${45*t}deg)`}function R(t){return`${t}px`}function S(t){return`${R(t)} solid transparent`}y(n||i);switch(s.placement.split("-")[0]){case"top":v();break;case"end":e?E():j();break;case"bottom":k();break;case"start":e?j():E()}function v(){null!=l&&(i?(w({top:"",bottom:R(2-m),left:R(l+(b?5:-5)),transform:A(b?5:3)},r),F()):(w({top:"",bottom:R(-m),left:R(p?l:l+(b?1:-1)),transform:A(0)},r),M()))}function j(){null!=c&&(n?(w({top:R(c+(b?2:-2)),right:"",left:R(-m-1),transform:A(b?7:5)},r),F()):(w({top:R(p?c:c+(b?-2:2)),right:"",left:R(1.5*-m),transform:A(2)},r),M()))}function k(){null!=l&&(i?(w({top:R(3-m),bottom:"",left:R(l+(b?4:-4)),transform:A(b?2:6)},r),C({top:R(-h),left:R((b?1:-1)-h)},a)):(w({top:R(-m),bottom:"",left:R(p?l:l+(b?1:-1)),transform:A(4)},r),M()))}function E(){null!=c&&(n?(w({top:R(c+(b?2:-2)),right:R(-m-1),left:"",transform:A(b?1:3)},r),C({top:R(-h),left:R((b?-2:2)-h)},a)):(w({top:R(p?c:c+(b?-2:2)),right:R(1.5*-m),left:"",transform:A(6)},r),M()))}function F(){C({top:R(-h),left:R((b?2:-2)-h)},a)}function M(){C({top:R(-h-2),left:R(-h)},a)}}return{arrowStyle:r,arrowInnerStyle:a}}(s,r,e,n,t,a))}),[t,a,t?.placement,t?.x,t?.y,t?.offset,t?.arrow,s,r,i]);const y=n.useMemo((()=>o.mergeRefs(m,x)),[m,x]);return"simple"===s&&e.jsxs("div",{ref:y,class:c.classNames([h,g.floatingTailBaseStyle]),style:p.arrowStyle,children:[" ",e.jsx("div",{class:c.classNames([g.floatingTailBaseStyle]),style:p.arrowInnerStyle})," "]})}));const b=i.forwardRef((({children:t,backgroundColor:i,onClickOutside:u,placement:f="bottom",anchorRef:b,offsetValue:y,class:w,tail:C="none",flipOptions:A={mainAxis:!0,crossAxis:!1},shiftOptions:R={mainAxis:!0,crossAxis:!1},sizeOptions:S={isMaxHeightAdjusted:!1,isMaxWidthAdjusted:!1},boundaryOptions:v={padding:0},onPosition:j,strategy:k},E)=>{const F=n.useRef(null),[M,O]=n.useState(),P=x.useUnsafeDomElementRef(b),[T,$]=n.useState(null),{styles:H,baseTheme:U}=l.useComponentTheme(d.FloatingRedwoodTheme);n.useLayoutEffect((()=>{$(P.current)}),[P]),P.current!==T&&$(P.current);const{direction:V}=a.useUser(),B="rtl"===V,N=n.useCallback((t=>{O(t),j?.(t)}),[j]),W=[s.offset(y),s.flip({mainAxis:A.mainAxis,crossAxis:A.crossAxis,fallbackPlacements:A.fallbackPlacements?.map((t=>s.logicalSide(t,V))),padding:v.padding}),s.shift({mainAxis:R.mainAxis,crossAxis:R.crossAxis,limiter:s.limitShift({mainAxis:R.mainAxis,crossAxis:R.crossAxis})}),...F.current?[s.arrow({element:F.current})]:[]];(S.isMaxHeightAdjusted||S.isMaxWidthAdjusted)&&W.push(s.size({apply({availableWidth:t,availableHeight:e,elements:n}){S.isMaxHeightAdjusted&&parseInt(n.floating.style.maxHeight)!==e&&Object.assign(n.floating.style,{maxHeight:`${Math.min(e,S.maxHeightCeiling||e)}px`}),S.isMaxWidthAdjusted&&parseInt(n.floating.style.maxWidth)!==t&&Object.assign(n.floating.style,{maxWidth:`${Math.min(t,S.maxWidthCeiling||t)}px`})},padding:v.padding}));const{x:I,y:z,reference:L,floating:D,refs:_,update:q}=s.useFloating({placement:f,middleware:W,onPosition:N,strategy:k}),[G,J]=n.useState(!1);n.useEffect((()=>{if(_.reference.current&&_.floating.current&&!0===G)return s.autoUpdate(_.reference.current,_.floating.current,q)}),[_.floating,_.reference,q,G]),n.useEffect((()=>{null!=I&&null!=z&&J(!0)}),[I,z]),r.useOutsideClick({isDisabled:!1,ref:_.floating,handler:u}),n.useLayoutEffect((()=>{if(T instanceof Element){return void L(T)}const t=T;if(null!=t&&null!=t.contextElement){const e=function(t,e){let n=null,i=null,s=!1;return{contextElement:t||void 0,getBoundingClientRect(){const o=t?.getBoundingClientRect()||{width:0,height:0,x:0,y:0},r="x"===e.axis||"both"===e.axis,a="y"===e.axis||"both"===e.axis;let l=o.width,c=o.height,u=o.x,f=o.y;return null==n&&e.x&&r&&(n=o.x-e.x),null==i&&e.y&&a&&(i=o.y-e.y),u-=n||0,f-=i||0,l=0,c=0,s?s&&(c="x"===e.axis?o.height:c,l="y"===e.axis?o.width:l):(l="y"===e.axis?o.width:0,c="x"===e.axis?o.height:0,u=r&&null!=e.x?e.x:u,f=a&&null!=e.y?e.y:f),s=!0,{width:l,height:c,x:u,y:f,top:f,right:u+l,bottom:f+c,left:u}}}}(t.contextElement,{axis:"both",x:t.x,y:t.y});return void L(e)}const e={getBoundingClientRect:()=>({width:0,height:0,x:t.x,y:t.y,top:t.y,left:t.x,right:t.x,bottom:t.y})};t&&null!=t.x&&L(e)}),[T,L]);const K=n.useMemo((()=>o.mergeRefs(E,D)),[E,D]),Q={top:z,left:I};let X={};i&&(X=g.assignInlineVars({[h.floatingVars.backgroundColor]:i}));const Y=null==I&&null==z?m.floatingVisibilityStyles.hidden:m.floatingVisibilityStyles.visible,Z=c.classNames([w,U,H.baseStyle,Y]),tt=b&&b.current;return e.jsxs("div",{class:Z,ref:K,style:{...Q,...X},children:[t,tt&&e.jsx(p,{ref:F,backgroundColor:i,data:M,anchorRef:P,tail:C,isRtl:B})]})}));t.Floating=b}));
//# sourceMappingURL=Floating-366a30f8.js.map
