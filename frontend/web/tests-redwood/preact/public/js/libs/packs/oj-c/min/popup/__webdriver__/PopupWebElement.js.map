{"version":3,"file":"PopupWebElement.js","sourceRoot":"","sources":["PopupWebElement.ts"],"names":[],"mappings":";;;AAAA,+DAA4D;AAC5D,2DAA+F;AAE/F;;;;GAIG;AACH,MAAa,eAAgB,SAAQ,yCAAmB;IAC/C,KAAK,CAAC,WAAW;QACtB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;QACxC,IAAI,CAAC,OAAO;YAAE,OAAO,KAAK,CAAC;QAC3B,OAAO,OAAO,CAAC,WAAW,EAAE,CAAC;IAC/B,CAAC;IAEM,OAAO;QACZ,OAAO,IAAI,CAAC,UAAU,EAAE;aACrB,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;aACpC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACjF,CAAC;IAEM,OAAO;QACZ,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;IAChE,CAAC;IAEM,OAAO;QACZ,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;IAChE,CAAC;IAEM,WAAW,CAAC,OAAgB;QACjC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE;aACvB,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;aAC7B,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;QACnD,OAAO,IAAI,sCAAiB,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;IACpD,CAAC;IAEM,KAAK,CAAC,YAAY,CAAC,OAAgB;QACxC,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;QACxC,OAAO,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;IAEO,KAAK,CAAC,UAAU;QACtB,MAAM,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAClC,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC,aAAa,CAAa,CAAC,EAAO,EAAE,EAAE;YAC3E,MAAM,aAAa,GAAG,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;YACzD,OAAO,EAAE,CAAC,aAAa,CAAC,CAAC;QAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,OAAO,OAAO,CAAC;IACjB,CAAC;IAED;;OAEG;IACI,OAAO;QACZ,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC3C,CAAC;CACF;AAhDD,0CAgDC","sourcesContent":["import { PopupWebElementBase } from './PopupWebElementBase';\nimport { Locator, ISize, WebElementPromise, WebElement, IRectangle } from 'selenium-webdriver';\n\n/**\n * The component WebElement for [oj-c-popup](../../jsdocs/oj-c.Popup.html).\n * Do not instantiate this class directly, instead, use\n * [findPopup](../modules.html#findPopup).\n */\nexport class PopupWebElement extends PopupWebElementBase {\n  public async isDisplayed(): Promise<boolean> {\n    const content = await this.getContent();\n    if (!content) return false;\n    return content.isDisplayed();\n  }\n\n  public getSize(): Promise<ISize> {\n    return this.getContent()\n      .then((content) => content.getRect())\n      .then((rect) => Promise.resolve({ width: rect.width, height: rect.height }));\n  }\n\n  public getRect(): Promise<IRectangle> {\n    return this.getContent().then((content) => content.getRect());\n  }\n\n  public getText(): Promise<string> {\n    return this.getContent().then((content) => content.getText());\n  }\n\n  public findElement(locator: Locator): WebElementPromise {\n    const p = this.whenReady()\n      .then(() => this.getContent())\n      .then((content) => content.findElement(locator));\n    return new WebElementPromise(this.getDriver(), p);\n  }\n\n  public async findElements(locator: Locator): Promise<WebElement[]> {\n    const content = await this.getContent();\n    return content.findElements(locator);\n  }\n\n  private async getContent(): Promise<WebElement> {\n    await this.whenBusyContextReady();\n    const content = await this.getDriver().executeScript<WebElement>((el: any) => {\n      const LAYER_CONTENT = Symbol.for('__oj_c_layer_content');\n      return el[LAYER_CONTENT];\n    }, this);\n    return content;\n  }\n\n  /**\n   * Dismisses the popup.\n   */\n  public doClose(): Promise<void> {\n    return this.setProperty('opened', false);\n  }\n}\n"]}