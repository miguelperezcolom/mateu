/**
 * @license
 * Copyright (c) 2014, 2025, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojeventtarget","ojs/ojcachediteratorresultsdataprovider","ojs/ojcachedfetchbyoffsetresultsdataprovider","ojs/ojdedupdataprovider","ojs/ojmutateeventfilteringdataprovider"],function(e,t,a,i,r,n){"use strict";function o(e,t){const o=t?.fetchFirst,c=t?.fetchByOffset,s=t?.dedup,h=t?.eventFiltering,l=e.getCapability("fetchFirst")||e.getCapability("fetchCapability"),p=e.getCapability("fetchByOffset")||e.getCapability("fetchCapability"),y=e.getCapability("dedup"),f=e.getCapability("eventFiltering");let u=!1,v=!1,C=!1,g=!1,b=!1;const O=l?.caching,P=p?.caching;"visitedByCurrentIterator"===o?.caching&&("enabled"===o?.forceLocalCaching||"all"!==O&&"visitedByCurrentIterator"!==O)&&(u=!0);const E=l?.totalFilteredRowCount;"exact"===o?.totalFilteredRowCount&&"exact"!==E&&(C=!0),"visitedByOffset"===c?.caching&&"all"!==P&&"visitedByOffset"!==P&&(v=!0);const m=y?.type;"iterator"===s?.type&&"global"!==m&&"iterator"!==m&&(g=!0);const D=f?.type;"iterator"===h?.type&&"global"!==D&&"iterator"!==D&&(b=!0);let K=e;return(u||C)&&(K=new a(K,C?{includeFilteredRowCount:"enabled"}:void 0)),v&&(K=new i(K)),g&&(K=new r(K)),b&&(K=new n(K)),e.getChildDataProvider&&(K=new d(e,K,t)),K}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;class d{constructor(e,t,a){this.treeDataProvider=e,this.enhancedDataProvider=t,this.capabilityConfigurations=a,t.addEventListener(d._MUTATE,e=>{this.updateCache(e),this.dispatchEvent(e)}),t.addEventListener(d._REFRESH,e=>{this.flushCache(),this.dispatchEvent(e)}),t.createOptimizedKeyMap&&(this.createOptimizedKeyMap=e=>t.createOptimizedKeyMap(e)),t.createOptimizedKeySet&&(this.createOptimizedKeySet=e=>t.createOptimizedKeySet(e)),this._mapKeyToChild=new Map}getChildDataProvider(e){const t=this._mapKeyToChild.get(e);return t||this.cacheEnhancedDataProvider(e)}containsKeys(e){return this.enhancedDataProvider.containsKeys(e)}fetchByKeys(e){return this.enhancedDataProvider.fetchByKeys(e)}fetchByOffset(e){return this.enhancedDataProvider.fetchByOffset(e)}fetchFirst(e){return this.enhancedDataProvider.fetchFirst(e)}getCapability(e){return this.enhancedDataProvider.getCapability(e)}getTotalSize(){return this.enhancedDataProvider.getTotalSize()}isEmpty(){return this.enhancedDataProvider.isEmpty()}cacheEnhancedDataProvider(e){const t=this.treeDataProvider.getChildDataProvider(e);if(t){const a=o(t,this.capabilityConfigurations);return this._mapKeyToChild.set(e,a),a}return null}updateCache(e){const t=e.detail.remove,a=e.detail.update;let i;t&&(i=t.keys,i&&i.forEach(e=>{this._mapKeyToChild.delete(e)})),a&&(i=a.keys,i&&i.forEach(e=>{this._mapKeyToChild.delete(e)}))}flushCache(){this._mapKeyToChild.clear()}}d._REFRESH="refresh",d._MUTATE="mutate",t.EventTargetMixin.applyMixin(d),e.getEnhancedDataProvider=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdataproviderfactory.js.map