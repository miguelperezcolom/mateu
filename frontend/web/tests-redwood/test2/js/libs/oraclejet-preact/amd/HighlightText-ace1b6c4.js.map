{"version":3,"file":"HighlightText-ace1b6c4.js","sources":["../../src/UNSAFE_HighlightText/HighlightText.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { highlightStyles } from './HighlightTextStyles.css';\nimport { TestIdProps, useTestId } from '#hooks/UNSAFE_useTestId';\n\ntype Props = TestIdProps & {\n  /**\n   * The text string to apply highlighting to.\n   */\n  children?: string;\n  /**\n   * The text string to match.\n   */\n  matchText?: string;\n};\n\nconst HIGHLIGHT_TOKEN = '__@@__';\nconst HIGHLIGHT_PATTERN = `${HIGHLIGHT_TOKEN}$&${HIGHLIGHT_TOKEN}`;\n\n/**\n * Renders a text string with highlighting applied to the given text to match.\n */\nexport function HighlightText({ children = '', matchText = '', testId }: Props) {\n  const testIdProps = useTestId(testId);\n  if (matchText.length > 0 && children.length > 0) {\n    const escapedMatchText = escapeRegExp(matchText);\n    const highlightedText = children.replace(new RegExp(escapedMatchText, 'gi'), HIGHLIGHT_PATTERN);\n    const tokens = highlightedText.split(HIGHLIGHT_TOKEN);\n    const nodes = tokens.map((current, index) =>\n      index % 2 == 0 ? current : <span class={highlightStyles}>{current}</span>\n    );\n\n    return <span {...testIdProps}>{nodes}</span>;\n  }\n  return <span {...testIdProps}>{children}</span>;\n}\n\nfunction escapeRegExp(str: string) {\n  // copied from:\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n  return str.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n"],"names":["HIGHLIGHT_TOKEN","HIGHLIGHT_PATTERN","children","matchText","testId","testIdProps","useTestId","length","escapedMatchText","replace","nodes","RegExp","split","map","current","index","_jsx","jsx","class"],"mappings":"kIAsBA,MAAMA,EAAkB,SAClBC,EAAoB,GAAGD,MAAoBA,oBAKjC,UAAcE,SAAEA,EAAW,GAAEC,UAAEA,EAAY,GAAEC,OAAEA,IAC7D,MAAMC,EAAcC,YAAUF,GAC9B,GAAID,EAAUI,OAAS,GAAKL,EAASK,OAAS,EAAG,CAC/C,MAAMC,EAAgCL,EAe7BM,QAAQ,wBAAyB,QAZpCC,EAFkBR,EAASO,QAAQ,IAAIE,OAAOH,EAAkB,MAAOP,GAC9CW,MAAMZ,GAChBa,KAAI,CAACC,EAASC,IACjCA,EAAQ,GAAK,EAAID,EAAUE,EAAMC,IAAA,OAAA,CAAAC,qDAAsBhB,SAAGY,MAG5D,OAAOE,EAAAA,IAAU,OAAA,IAAAX,EAAcH,SAAAQ,GAChC,CACD,OAAOM,EAAAA,IAAU,OAAA,IAAAX,EAAcH,SAAAA,GACjC"}