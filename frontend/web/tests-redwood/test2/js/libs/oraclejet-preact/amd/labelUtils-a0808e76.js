define(['exports', './textUtils-ae0a246c', './accUtils-acd70e81', 'preact/jsx-runtime', './utils-cd60c9d4'], (function(t,i,e,s,n){"use strict";const h={titleGap:6,labelGap:6};function d(t,e,s,n,h,d,l){let o,a,x=l||0;const c=[e(t[0],0,n,h,d)],m=s?i.isWidthOverlap:i.isHeightOverlap;let r=0,g=x+1;for(;g<t.length;){const i=c[r]||e(t[r],r,n,h,d);o=i.dims,c[r]||(c[r]=i);const s=c[g]||e(t[g],g,n,h,d);a=s.dims,c[g]||(c[g]=s),m(o,a)?(x+=1,r=0,g=x+1):(r=g,g=r+x+1)}return{numOfSkips:x,labelsInfo:c}}t.AXIS_DEFAULTS=h,t.getDataAxisLabelsInfo=function(t,i,e){const{numOfSkips:s,labelsInfo:n}=d(t,i,e,!1,!1,!1,0),h=[];let l=0,o=0,a=!1;for(let i=0;i<t.length;i+=s+1)l=Math.max(l,n[i].dims.width),o=Math.max(o,n[i].dims.height),a=a||n[i].isTruncated,h.push({text:n[i].text,lines:n[i].lines,index:i,dims:n[i].dims,lineProps:n[i].lineProps});return{maxWidth:l,maxHeight:o,numOfSkips:s,isLabelTruncated:a,tickLabels:h}},t.getEnclosingRectDims=function(t,i,e){let s,n;const h="left"===i||"right"===i;"left"===i?(s=t.x-t.width,n=t.y-t.height/2):"right"===i?(s=t.x,n=t.y-t.height/2):(s=t.x-t.width/2,n=t.y-t.height/2);const d=t.width;return e&&h&&(s-=d),{x:s,y:n,width:d,height:t.height}},t.getGroupAxisLabelsInfo=function(t,i,e,s,n,h){let l=!1,{numOfSkips:o,labelsInfo:a}=d(t,i,e,!1,!1,!1,h);if(o>0&&n&&e){const s=d(t,i,e,!1,!1,!0,h);!s.labelsInfo.some((t=>t.isTruncated||t.didNotFit))&&s.numOfSkips<o&&(o=s.numOfSkips,a=s.labelsInfo)}if(o>0&&s){const s=d(t,i,e,!0,!0,!1,h);s.numOfSkips<o&&(o=s.numOfSkips,a=s.labelsInfo,l=!0)}const x=[];let c=0,m=0;for(let i=0;i<t.length;i+=o+1)c=Math.max(c,a[i].dims.width),m=Math.max(m,a[i].dims.height),x[a[i].indexAtLevel]={text:a[i].text,lines:a[i].lines,index:a[i].indexAtLevel,dims:a[i].dims,lineProps:a[i].lineProps,isRotated:l,isTruncated:a[i].isTruncated};return{maxWidth:c,maxHeight:m,isRotated:l,numOfSkips:o,tickLabels:x}},t.getTickLabelInfo=function(t,i,e,s,d,l,o,a,x,c,m,r){if(!r||!i||null==t)return{indexAtLevel:e,text:"",dims:{width:0,height:0,x:0,y:0},isTruncated:!1,lines:[],didNotFit:!1,lineProps:[]};const g=h.labelGap,f=l?c:o?x-g:x;let u,p,w,b=!1,y=[],k=[],L=!1;const O=o?c:1/0;if(a||o){const t=n.getTextInfo(i,s,f,O,o,1,r);u=t.width,p=t.height,y=t.lines,k=t.dims,b=t.isTruncated,w=t.lineHeight,L=t.didNotFit}else k=[r(i,s)],u=k[0].width,p=k[0].height,y=[i],b=!1,w=p;const I=l?p:u,S=l?u:p,T=d?I+g:I,P=d?S:S+g;return{indexAtLevel:e,text:i,lines:y,lineProps:k.map(((i,e)=>({x:d?t-i.width/2:m.x,width:l?i.height:i.width,height:l?i.width:i.height,y:d?m.y+w*e:t+i.height/2}))),isTruncated:b,didNotFit:L,dims:{x:d?t-T/2:m.x,width:T,height:P,y:d?m.y:t+P/2}}},t.skipLabelsGreedy=function(t,e,s,n){const h=s?i.isWidthOverlap:i.isHeightOverlap;let d=e(t[0],0,!1,!1,!!n);const l=[{text:d.text,lines:[d.text],index:0,lineProps:[d.dims],dims:d.dims}];let o=d.dims.width,a=d.dims.height;for(let i=1;i<t.length;i++){if(!t[i])continue;const s=e(t[i],i,!1,!1,!!n);h(d.dims,s.dims)||(d=s,l.push({text:s.text,lines:[s.text],index:i,dims:s.dims,lineProps:[s.dims]}),o=Math.max(o,s.dims.width),a=Math.max(a,s.dims.height))}return{tickLabels:l,maxWidth:o,maxHeight:a}},t.updateLabelsDims=function(t,i,e,s,n,h){e.forEach((e=>{e.lines.forEach(((d,l)=>{const o=e.lineProps[l];let a,x;"left"===h?(a=n.x+t,x=s(e.index)):"right"===h?(a=n.x+n.width-t,x=s(e.index)):"top"===h?(a=s(e.index),x=n.y+i-o.height/2):(a=s(e.index),x=n.y+n.height-i+o.height/2+o.height*l),o.x=a,o.y=x}));const d=e.dims;let l,o;"left"===h?(l=n.x+t,o=s(e.index)):"right"===h?(l=n.x+n.width-t,o=s(e.index)):"top"===h?(l=s(e.index),o=n.y+i-d.height/2):(l=s(e.index),o=n.y+n.height-i+d.height/2),d.x=l,d.y=o}))}}));
//# sourceMappingURL=labelUtils-a0808e76.js.map
