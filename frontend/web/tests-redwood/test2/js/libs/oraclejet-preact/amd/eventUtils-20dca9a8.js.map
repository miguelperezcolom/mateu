{"version":3,"file":"eventUtils-20dca9a8.js","sources":["../../src/utils/PRIVATE_visTestUtils/eventUtils.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\ninterface MouseEventDescriptors {\n  originalPageXDescriptor?: PropertyDescriptor;\n  originalPageYDescriptor?: PropertyDescriptor;\n  originalOffsetXDescriptor?: PropertyDescriptor;\n  originalOffsetYDescriptor?: PropertyDescriptor;\n}\n\n/**\n * Mocks the `pageX`, `pageY`, `offsetX`, and `offsetY` properties on the `MouseEvent.prototype`\n * for testing purposes (e.g. for when using userEvent.pointer)\n * See workaround in https://github.com/testing-library/user-event/issues/1037#issuecomment-1576780336\n * that this is based on.\n *\n * This function saves the original property descriptors, then redefines `pageX`, `pageY`, `offsetX`, and `offsetY`\n * to return the values of `clientX` and `clientY`. This allows tests to interact with these properties.\n * This function should be called in beforeEach of tests.\n *\n * @returns An object containing the original property descriptors, which should\n *          be used later to restore the original behavior.\n */\nexport function mockMouseEventPageXYOffsetXY() {\n  const originalPageXDescriptor = Object.getOwnPropertyDescriptor(MouseEvent.prototype, 'pageX');\n  const originalPageYDescriptor = Object.getOwnPropertyDescriptor(MouseEvent.prototype, 'pageY');\n  const originalOffsetXDescriptor = Object.getOwnPropertyDescriptor(\n    MouseEvent.prototype,\n    'offsetX'\n  );\n  const originalOffsetYDescriptor = Object.getOwnPropertyDescriptor(\n    MouseEvent.prototype,\n    'offsetY'\n  );\n\n  Object.defineProperties(MouseEvent.prototype, {\n    pageX: {\n      configurable: true,\n      get() {\n        return this.clientX;\n      }\n    },\n    pageY: {\n      configurable: true,\n      get() {\n        return this.clientY;\n      }\n    },\n    offsetX: {\n      configurable: true,\n      get() {\n        return this.clientX;\n      }\n    },\n    offsetY: {\n      configurable: true,\n      get() {\n        return this.clientY;\n      }\n    }\n  });\n\n  return {\n    originalPageXDescriptor,\n    originalPageYDescriptor,\n    originalOffsetXDescriptor,\n    originalOffsetYDescriptor\n  };\n}\n\n/**\n * Restores the original `pageX`, `pageY`, `offsetX`, and `offsetY` property descriptors on the `MouseEvent.prototype`.\n *\n * This function should be called afterEach of tests to ensure that the `MouseEvent.prototype` is returned to its\n * original state.\n *\n * @param descriptors The output of mockMouseEventPageXYOffsetXY\n */\nexport function restoreMouseEventPageXYOffsetXY(descriptors: MouseEventDescriptors) {\n  const {\n    originalPageXDescriptor,\n    originalPageYDescriptor,\n    originalOffsetXDescriptor,\n    originalOffsetYDescriptor\n  } = descriptors;\n  if (originalPageXDescriptor) {\n    Object.defineProperty(MouseEvent.prototype, 'pageX', originalPageXDescriptor);\n  }\n  if (originalPageYDescriptor) {\n    Object.defineProperty(MouseEvent.prototype, 'pageY', originalPageYDescriptor);\n  }\n  if (originalOffsetXDescriptor) {\n    Object.defineProperty(MouseEvent.prototype, 'offsetX', originalOffsetXDescriptor);\n  }\n  if (originalOffsetYDescriptor) {\n    Object.defineProperty(MouseEvent.prototype, 'offsetY', originalOffsetYDescriptor);\n  }\n}\n"],"names":["originalPageXDescriptor","Object","getOwnPropertyDescriptor","MouseEvent","prototype","originalPageYDescriptor","originalOffsetXDescriptor","originalOffsetYDescriptor","defineProperties","pageX","configurable","get","this","clientX","pageY","clientY","offsetX","offsetY","descriptors","defineProperty"],"mappings":"uFA6BE,MAAMA,EAA0BC,OAAOC,yBAAyBC,WAAWC,UAAW,SAChFC,EAA0BJ,OAAOC,yBAAyBC,WAAWC,UAAW,SAChFE,EAA4BL,OAAOC,yBACvCC,WAAWC,UACX,WAEIG,EAA4BN,OAAOC,yBACvCC,WAAWC,UACX,WA8BF,OA3BAH,OAAOO,iBAAiBL,WAAWC,UAAW,CAC5CK,MAAO,CACLC,cAAc,EACd,GAAAC,GACE,OAAOC,KAAKC,OACb,GAEHC,MAAO,CACLJ,cAAc,EACd,GAAAC,GACE,OAAOC,KAAKG,OACb,GAEHC,QAAS,CACPN,cAAc,EACd,GAAAC,GACE,OAAOC,KAAKC,OACb,GAEHI,QAAS,CACPP,cAAc,EACd,GAAAC,GACE,OAAOC,KAAKG,OACb,KAIE,CACLf,0BACAK,0BACAC,4BACAC,4BAEJ,oCAUM,SAA0CW,GAC9C,MAAMlB,wBACJA,EAAuBK,wBACvBA,EAAuBC,0BACvBA,EAAyBC,0BACzBA,GACEW,EACAlB,GACFC,OAAOkB,eAAehB,WAAWC,UAAW,QAASJ,GAEnDK,GACFJ,OAAOkB,eAAehB,WAAWC,UAAW,QAASC,GAEnDC,GACFL,OAAOkB,eAAehB,WAAWC,UAAW,UAAWE,GAErDC,GACFN,OAAOkB,eAAehB,WAAWC,UAAW,UAAWG,EAE3D"}