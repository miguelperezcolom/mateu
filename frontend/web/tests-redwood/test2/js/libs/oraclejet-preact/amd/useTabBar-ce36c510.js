define(['exports', 'preact/hooks', './mergeProps-bcfa6a92', './collectionUtils-26e6c87c', './useCollectionFocusRing-35d278f5', './useCurrentKey-2f1ca19e', './useId-c9578d26', './useReorderableContext-a5453bd7', './useContextMenuGesture-69b54d61', './TabBarContextMenu-cad0a362', './useUser-988f7da2', './useTranslationBundle-27bf6340'], (function(e,t,n,r,o,s,u,a,l,c,i,d){"use strict";const f='[role="tab"]',m="data-oj-removable",y={mouse:{initialFocus:"menu",placement:"bottom-start",offsetValue:0},keyboard:{initialFocus:"firstItem",placement:"bottom-start",offsetValue:0},touch:{initialFocus:"menu",placement:"end",offsetValue:40}},b={isOpen:!1,initialFocus:"menu",placement:"bottom-start",offsetValue:0,anchorRef:{current:null}};const g=(e,t,n)=>{const o=e.closest(t);if(o){if(o.hasAttribute(m)){const t=e.closest(n);if(t&&o?.contains(t))return null}return r.getKey(o)}return null},v=(e,t,n)=>{const r=n.indexOf(e);if(-1===r)return t[0];let o=0,s=!1;for(r===n.length-1?(o=r-1,s=!0):o=r+1;o!==r&&o>-1&&o<n.length;){const e=n[o];if(-1!==t.indexOf(e))return e;s?o--:o++}return t[0]},K=(e,t,n)=>{const o=r.findElementByKey(t,e,f);if(o){return o.hasAttribute(n)?o.getAttribute(n):null}},p=(e,t)=>{const n=r.findElementByKey(t,e,f);if(n)return n.innerText};e.REMOVABLE_ITEM_ATTRIBUTE=m,e.getItemAttribute=K,e.useTabBar=function(e){const{children:R,class:x,display:h,edge:A="top",selection:E,onSelect:M,onRemove:C,ref:k,size:B,contextMenuConfig:I}=e,{direction:S}=i.useUser(),P=d.useTranslationBundle("@oracle/oraclejet-preact"),T=t.useRef(null),F=k||T,_=u.useId(),[D,U]=t.useState(E),[V,L]=t.useState(!1),O=_+"_",w="contextMenu_"+u.useId(),j=P.tabbar_labelContextMenu(),q=t.useRef();t.useEffect((()=>{if(F.current){const e=Array.from(F.current.querySelectorAll(f)).map((e=>r.getKey(e)));null==D&&(null!=E&&e.includes(E)?U(E):e.length>0&&U(e[0])),D&&!e.includes(D)&&(q.current?U(v(D,e,q.current)):U(e[0])),q.current=e}}),[R,D,F,E]);const[H,z]=o.useCollectionFocusRing(F,["ArrowRight","ArrowLeft","Home","End"]),G=a.useReorderableContext(),{currentKeyProps:N}=s.useCurrentKey((e=>C?g(e,f,'[data-oj-tabbar-item-remove-icon="true"]'):r.keyExtractor(e,f)),!1,void 0,void 0,r.getPrevNextKeyUsingRef(F,D,!0,f),r.getPrevNextKeyUsingRef(F,D,!1,f),D,(e=>{const t=e.value;U(t),L(!1)}));t.useEffect((()=>{G&&(G.currentItemKey.current=D)}),[D,G]);const[J,Q]=t.useState(),[W,X]=t.useState(b),[Y,Z]=t.useState(),{triggerProps:$}=l.useContextMenuGesture((({gesture:e,anchor:t,target:n})=>{let o,s=t,u=D;if("keyboard"===e){const e=r.findElementByKey(F.current,D,f);s=e||t}else{const e=r.keyExtractor(n,f);u=null!=e?e:D}let a=!1;const l=null!=G?.onReorder;F.current&&(o=l?Array.from(F.current.querySelectorAll(f)).map((e=>r.getKey(e))):void 0,a=null!=K(u,F.current,m));const i=null!=C&&a,d=c.getDefaultContextMenu({isRemovable:i,handleRemove:C,handleReorder:l?G.onReorder:void 0,itemKey:u,tabKeys:o,direction:S,itemLabels:{labelRemove:i?P.tabbar_labelRemove():void 0,labelMoveLeft:l?P.tabbar_labelMoveLeft():void 0,labelMoveRight:l?P.tabbar_labelMoveRight():void 0},handleAccStatus:e=>{const t=p(e.removedKey,F.current),n=i&&e.removedKey?P.tabbar_accAnnounceRemovedKey({itemKey:t}):"",r=p(e.destinationKey,F.current),o=l&&e.destinationKey?P.accAnnounceMovedKey({itemKey:"",position:e.position,referenceKey:r}):"";Z(n+o)}});Q(d),X({...y[e],anchorRef:{current:s},isOpen:null!=I})}),{isDisabled:!I}),ee=t.useCallback((e=>{"dismissed"!==e.reason&&"itemAction"!==e.reason||(U(J?.itemKey),F.current?.focus()),X({...b})}),[F,J?.itemKey]),te=n.mergeProps({onKeyDown:e=>{if(F.current&&D){if("Home"===e.key||"End"===e.key){const t=Array.from(F.current.querySelectorAll(f),(e=>r.getKey(e)));e.preventDefault(),U?.(t["Home"===e.key?0:t.length-1])}if("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),M?.({value:D})),"Delete"===e.key){r.findElementByKey(F.current,D,f).hasAttribute(m)&&C?.({value:D})}"Escape"===e.key&&L(!0)}},onFocus:()=>{if(F.current&&void 0===D){const e=r.getFirstVisibleKey(F.current,f);e&&U(e)}}},$);return{rootProps:n.mergeProps({"aria-activedescendant":D?O+D:"","aria-multiselectable":!1,class:x,ref:F,role:"tablist",tabIndex:0},N,z,te),tabBarContext:{currentKey:D,display:h,isEdgeBottom:"bottom"===A,layout:"condense",onRemove:C,onSelect:M,showFocusRing:H,hideTooltip:V,selection:E,size:B,tabItemPrefix:O},menuProps:{...W,onClose:ee},contextMenuContext:J,contextMenuDescriptionId:w,contextMenuDescription:j,accStatusInfo:Y}}}));
//# sourceMappingURL=useTabBar-ce36c510.js.map
