{"version":3,"file":"useDetectTruncation-d9046081.js","sources":["../../src/hooks/PRIVATE_useDetectTruncation/useDetectTruncation.tsx"],"sourcesContent":["import { detectTruncation } from '#utils/PRIVATE_truncationUtils';\nimport { useResizeObserver } from '#hooks/UNSAFE_useResizeObserver';\nimport { useCallback, useRef, useState } from 'preact/hooks';\nimport { useTabbableMode } from '#hooks/UNSAFE_useTabbableMode';\n\nconst useDetectTruncation = (isDisabled = false) => {\n  const rootRef = useRef<HTMLElement>(null);\n  const [isTextTruncated, setIsTextTruncated] = useState<boolean>(false);\n  const { isTabbable } = useTabbableMode();\n  const [isHovered, setIsHovered] = useState(false);\n  const handleMouseEnter = () => setIsHovered(true);\n  const handleMouseLeave = () => setIsHovered(false);\n\n  const detectIfTruncated = useCallback(() => {\n    if (rootRef.current && !isDisabled) {\n      const element = rootRef.current;\n      element.addEventListener('mouseenter', handleMouseEnter);\n      element.addEventListener('mouseleave', handleMouseLeave);\n      if (isTabbable || isHovered) {\n        const isTruncated = detectTruncation(rootRef);\n        setIsTextTruncated(isTruncated);\n      }\n    }\n  }, [isDisabled, isHovered, isTabbable]);\n  useResizeObserver(rootRef, detectIfTruncated, { isDisabled: isDisabled });\n\n  const detectTruncationProps = {\n    ref: rootRef\n  };\n\n  return { detectTruncationProps, isTextTruncated };\n};\n\nexport { useDetectTruncation };\n"],"names":["isDisabled","rootRef","useRef","isTextTruncated","setIsTextTruncated","useState","isTabbable","useTabbableMode","isHovered","setIsHovered","handleMouseEnter","handleMouseLeave","detectIfTruncated","useCallback","current","element","addEventListener","isTruncated","detectTruncation","useResizeObserver","detectTruncationProps","ref"],"mappings":"sNAK4B,CAACA,GAAa,KACxC,MAAMC,EAAUC,SAAoB,OAC7BC,EAAiBC,GAAsBC,EAAQA,UAAU,IAC1DC,WAAEA,GAAeC,EAAAA,mBAChBC,EAAWC,GAAgBJ,EAAQA,UAAC,GACrCK,EAAmB,IAAMD,GAAa,GACtCE,EAAmB,IAAMF,GAAa,GAEtCG,EAAoBC,EAAAA,aAAY,KACpC,GAAIZ,EAAQa,UAAYd,EAAY,CAClC,MAAMe,EAAUd,EAAQa,QAGxB,GAFAC,EAAQC,iBAAiB,aAAcN,GACvCK,EAAQC,iBAAiB,aAAcL,GACnCL,GAAcE,EAAW,CAC3B,MAAMS,EAAcC,mBAAiBjB,GACrCG,EAAmBa,EACpB,CACF,IACA,CAACjB,EAAYQ,EAAWF,IAC3Ba,EAAiBA,kBAAClB,EAASW,EAAmB,CAAEZ,WAAYA,IAM5D,MAAO,CAAEoB,sBAJqB,CAC5BC,IAAKpB,GAGyBE,kBAAiB"}