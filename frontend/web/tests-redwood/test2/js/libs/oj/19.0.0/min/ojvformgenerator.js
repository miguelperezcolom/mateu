/**
 * @license
 * Copyright (c) 2014, 2025, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","preact/jsx-runtime","preact","ojs/ojthemeutils","ojs/ojlabel","ojs/ojcustomelement-utils","ojs/ojdomutils"],function(e,o,l,t,n,s,a){"use strict";function r(e){const n=function(e,o){let l=e;if(o>1){const n=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/,s=e.match(n),a=parseFloat(s[1]);switch(s[2]){case"vw":case"vmin":case"vmax":case"%":if(o>1){l="calc((("+e+" / "+o+") - (("+t.parseJSONFromFontFamily("oj-form-layout-option-defaults").columnGap+" * ("+(o-1)+") * "+a/o/100+")))"}}}return l}(e.labelWidth,e.colspan),s="calc(100% - "+n+")",a={flexGrow:"0",flexShrink:"0",flexBasis:n,width:n,maxWidth:n},r={flexGrow:"1",flexShrink:"1",flexBasis:s,width:s,maxWidth:s};return Array.isArray(e.children)||(e.children.props.labelEdge="provided"),o.jsxs(l.Fragment,{children:[o.jsx("div",{class:"oj-formlayout-inline-label",style:a,children:o.jsx("oj-label",{for:e.forid,children:e.labelText})}),o.jsx("div",{class:"oj-formlayout-inline-value",style:r,children:e.children})]})}function i(e){return Array.isArray(e.children)||(e.children.props.labelEdge="provided"),o.jsxs(l.Fragment,{children:[o.jsx("oj-label",{for:e.forid,children:e.labelText}),e.children]})}const c="nowrap",d="truncate",m="wrap",u="efficient",p="start",h="top";function f(e){let t,n=!1,a=e.children;if(a){const c=!Array.isArray(a);return c&&(t=s.ElementUtils.getUniqueId(a.props.id),String(a.props.children?.type).toLowerCase().startsWith("oj-c-")&&(n=!0,a=a.props.children)),e.labelEdge!==p||n?e.labelEdge!==h||n?(c&&("inside"===e.labelEdge||n?(a.props.labelEdge=e.labelEdge,a.props.labelHint=e.labelText):a.props.labelEdge="none"),o.jsx(l.Fragment,{children:e.children})):o.jsx(i,{forid:t,...e}):o.jsx(r,{forid:t,...e})}return null}const y=e=>"string"!=typeof e&&isNaN(e);class b extends l.Component{render(e){let t="oj-flex-item";const n=this._getFullFlexItemWidth(e.colspan,e.totalColumns);let s={flexGrow:"1",flexShrink:"1",flexBasis:n,width:n,maxWidth:n};e.labelEdge==p&&(s.display="flex"),"formLayout"===e.contentType&&(t+=" oj-formlayout-nested-formlayout");return l.toChildArray(e.children).forEach(o=>{if(y(o)){const t=l.toChildArray(o.props.children);if(1===t.length){const o=t[0];if(y(o)&&String(o.type).toLowerCase().startsWith("oj-c-")){const l=o;l.props.containerReadonly=e.containerReadonly,void 0===l.props.readonly&&void 0===l.props.READONLY&&(l.props.readonly=e.containerReadonly),void 0===l.props.labelWrapping&&void 0===l.props.LABELWRAPPING&&(l.props.labelWrapping=e.labelWrapping)}}}}),o.jsx("div",{class:t,style:s,children:o.jsx(f,{containerReadonly:e.containerReadonly,labelText:e.labelText,labelEdge:e.labelEdge,labelWidth:e.labelWidth,colspan:e.colspan,totalColumns:e.totalColumns,children:e.children})},e.cellKey)}_getFullFlexItemWidth(e,o){if(e===o)return"100%";let l=(t.parseJSONFromFontFamily("oj-form-layout-option-defaults")||{}).columnGap,n=(this.props.totalColumns,"calc(((100% / "+o+") - (("+l+" * ("+(o-1)+") / "+o+")))");return e>1&&(n+=" * "+e+" + ("+l+" * "+(e-1)+")"),n+=")",n}}b.defaultProps={colspan:1,totalColumns:1,labelEdge:"inside",labelWidth:"33%",labelWrapping:"wrap",labelText:""};class j extends l.Component{render(e){this._columns=e.columns>0?e.columns:e.maxColumns;const l="oj-form-layout oj-formlayout-max-cols-"+this._columns,t=this._getColumnFormContent(e.formControls,e.columns,e.readonly,e.labelWrapping);return o.jsx("div",{class:l,children:t})}_getColumnFormContent(e,l,n,s){let a,r,i,c=[];for(const l of e)r="function"==typeof l.content?l.content():l.content,i=l.labelEdge,i||(this._themeDefault||(this._themeDefault=t.parseJSONFromFontFamily("oj-form-layout-option-defaults")||{}),i=this._themeDefault.labelEdge),a=o.jsx(b,{containerReadonly:n,totalColumns:1,labelText:l.labelText,labelEdge:i,labelWidth:l.labelWidth,labelWrapping:s,contentType:l.contentType,cellKey:l.key,children:r}),c.push(o.jsx("div",{class:"oj-flex","data-oj-internal":!0,children:a}));const d=this._getColumnStyling(l);return o.jsx("div",{class:d.formClassName,style:d.formStyle,"data-oj-context":!0,"data-oj-internal":!0,children:c})}_getColumnStyling(e){let o="oj-form";return this.props.readonly||(o+=" oj-enabled"),this.props.userAssistanceDensity===u&&(o+=" oj-efficient"),this.props.labelWrapping===d&&(o+=" oj-formlayout-labels-nowrap"),e>0&&(o+=" oj-form-layout-no-min-column-width"),o+=" oj-form-cols",{formClassName:o,formStyle:{columnCount:this._columns,webkitColumnCount:this._columns,MozColumnCount:this._columns}}}}j.defaultProps={colspanWrap:"nowrap",formControls:[],labelWrapping:"wrap",columns:0,maxColumns:1,readonly:!1,userAssistanceDensity:"efficient"};class C extends l.Component{constructor(){super(...arguments),this.setFormDivRef=e=>{this.formDivRef=e},this.state={availableColumns:0},this._updateAvailableColumns=()=>{if(0===this._calculateColumns(0)){const e=this.formDivRef,o=e.class;e.class="oj-form-layout";const l=this._calculateAvailableColumns(e);e.class=o,this.state.availableColumns!==l&&this.setState({availableColumns:l})}}}render(e){const l="oj-form-layout oj-formlayout-max-cols-"+(e.columns>0?e.columns+" oj-form-layout-no-min-column-width":e.maxColumns),t=this._getRowFormContent(this.props.formControls,this.props.readonly,this.props.labelWrapping);return o.jsx("div",{class:l,ref:this.setFormDivRef,children:t})}componentDidMount(){this._updateAvailableColumns(),a.addResizeListener(this.formDivRef,this._updateAvailableColumns,25)}componentDidUpdate(){this._updateAvailableColumns()}componentWillUnmount(){a.removeResizeListener(this.formDivRef,this._updateAvailableColumns)}_calculateAvailableColumns(e){let o=Math.max(this.props.maxColumns,1),l=parseFloat(window.getComputedStyle(e.querySelector(".oj-form")).columnWidth);if(!isNaN(l)){let e=this.formDivRef.getBoundingClientRect().width;o=Math.max(Math.floor(e/l),1)}return o}_calculateColumns(e){let o=Math.max(this.props.maxColumns,1);const l=this.props.columns;return l>0?o=l:o>1&&e<o&&(o=e),o}_getRowFormContent(e,l,n){let s,a=[];const r=this._calculateColumns(this.state.availableColumns);0===r&&(e=[]);let i,c,d,m,u=0,p=!1;for(const h of e){if(i=1,c=r,d="function"==typeof h.content?h.content():h.content,u%r==0&&(s&&this._addRowToForm(a,s,u),s=[]),h.colspan&&h.colspan>1){const e=u%r;let o=r-e;i=Math.floor(h.colspan),"wrap"===this.props.colspanWrap&&o<i&&e>0&&(this._addRowToForm(a,s,u),u+=o,s=[],o=r),i=Math.min(i,o),p=r>1}m=h.labelEdge,m||(this._themeDefault||(this._themeDefault=t.parseJSONFromFontFamily("oj-form-layout-option-defaults")||{}),m=this._themeDefault.labelEdge),s.push(o.jsx(b,{colspan:i,containerReadonly:l,totalColumns:c,labelText:h.labelText,labelEdge:m,labelWidth:h.labelWidth,labelWrapping:n,contentType:h.contentType,cellKey:h.key,children:d})),u+=i,u%r!=0&&this._addColumnGutter(s)}this._addRowToForm(a,s,u);const h=this._getRowStyling(p);return o.jsx("div",{class:h.formClassName,style:h.formStyle,"data-oj-context":!0,"data-oj-internal":!0,children:a})}_addColumnGutter(e){e.push(o.jsx("div",{class:"oj-formlayout-column-gutter"}))}_addRowToForm(e,l,t){this._addPaddingCells(l,t),e.push(o.jsx("div",{class:"oj-flex","data-oj-internal":!0,children:l}))}_addPaddingCells(e,l){const t=this._calculateColumns(this.state.availableColumns)||this.props.maxColumns,n=l%t;if(e&&n>0)for(let l=n;l<t;l++)l!==n&&this._addColumnGutter(e),e.push(o.jsx(b,{colspan:1,totalColumns:t,labelEdge:"none"}))}_getRowStyling(e){let o="oj-form";this.props.readonly||(o+=" oj-enabled"),this.props.userAssistanceDensity===u&&(o+=" oj-efficient"),this.props.labelWrapping===d&&(o+=" oj-formlayout-labels-nowrap"),e&&(o+=" oj-form-control-full-width"),o+=" oj-form-cols";return o+=" oj-formlayout-form-across",{formClassName:o,formStyle:{columnCount:1,webkitColumnCount:1,MozColumnCount:1}}}}C.defaultProps={colspanWrap:c,formControls:[],labelWrapping:m,columns:0,maxColumns:1,readonly:!1,userAssistanceDensity:u};class x extends l.Component{render(e){const{direction:l,...t}=e;return"column"===l?o.jsx(j,{...t}):o.jsx(C,{...t})}}x.defaultProps={colspanWrap:c,direction:"row",formControls:[],labelWrapping:m,columns:0,maxColumns:1,readonly:!1,userAssistanceDensity:u},
/**
     * @license
     * Copyright (c) 2014, 2025, Oracle and/or its affiliates.
     * The Universal Permissive License (UPL), Version 1.0
     * @ignore
     */
e.VFormGenerator=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojvformgenerator.js.map