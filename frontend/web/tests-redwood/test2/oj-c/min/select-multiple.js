define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,t){"use strict";function a(e,t,a,s,r,n){const i="compact"!==n?a?.definition:void 0;return e?.instruction||("none"===r?.validatorHint?void 0:t)||i||("none"===r?.converterHint?void 0:s)}function s(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=function({addBusyState:e,converter:r,displayOptions:n,help:i,helpHints:o,userAssistanceDensity:l,validators:u}){const[d,c]=(0,t.useState)(u&&u.length?s(u):void 0),p=(0,t.useRef)();(0,t.useEffect)((()=>{if(!u||!u.length)return void c(void 0);c(s(u));const t=u.map((e=>e.hint)).filter(Boolean),a=p.current=Symbol(),r=e?.("resolving the async validator hints");Promise.allSettled(t).then((e=>{c((t=>{const s=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return a===p.current&&s.length?[t,...s].join("\n"):t})),r?.()}))}),[u]);const f="compact"!==l?o?.sourceText:o?.definition||o?.sourceText;return{assistiveText:a(i,d,o,r?.getHint?.()??void 0,n,l),helpSourceLink:o?.source,helpSourceText:f}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useMergedFormContext=function({propContainerReadonly:e,propLabelWrapping:a,propReadonly:s,propTextAlign:r,propUserAssistanceDensity:n}){const i=(0,t.useFormContext)(),o=n??i.userAssistanceDensity,l=s??i.isReadonly,{isFormLayout:u,isReadonly:d,labelWrapping:c,textAlign:p,...f}=i;return{containerProps:{...f,isFormLayout:void 0!==e||u,isReadonly:e??d,labelWrapping:a??c,textAlign:r??p},readonlyValue:l,uadValue:o}}})),define("oj-c/hooks/UNSAFE_useComponentMessages/useComponentMessages",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useComponentMessages=function({evMessages:e,messagesCustom:a,readonly:s,readonlyUserAssistanceShown:r}){return(0,t.useMemo)((()=>s?"confirmationAndInfoMessages"===r?a?.filter((e=>"confirmation"===e.severity||"info"===e.severity)):[]:e),[a,s,r,e])}})),define("oj-c/hooks/UNSAFE_useEditableValue/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.treatNull=e.normalizeValue=e.isShallowEqual=e.hasErrorMessages=e.getVirtualKeyboardHintFromConverter=e.createMessageFromError=void 0;e.createMessageFromError=e=>"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message};e.treatNull=(e,t)=>null===e?t:e;e.normalizeValue=e=>"string"==typeof e&&""===e?null:e;e.isShallowEqual=(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>e===t[a]));e.hasErrorMessages=e=>!!e&&e.some((e=>"error"===e.severity));e.getVirtualKeyboardHintFromConverter=e=>{let t;if(e&&e.resolvedOptions){const a=e.resolvedOptions();t=a?.virtualKeyboardHint??"text"}else t="text";return t}})),define("oj-c/hooks/UNSAFE_useEditableValue/converterUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=function(e,a,s){if(function(e){return null===e}(e))return{result:"success",value:a};try{return{result:"success",value:s.format(e)}}catch(e){return{result:"failure",error:(0,t.createMessageFromError)(e)}}},e.parse=function(e,a,s){if(void 0===e)return{result:"success",value:null};if(r=e,""===r||null===r)return{result:"success",value:e};var r;try{return{result:"success",value:a.parse(e)}}catch(e){return{result:"failure",error:s?.(e)??(0,t.createMessageFromError)(e)}}}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=function(){const e=(0,t.useRef)(new Map);return{setStaleIdentity:(0,t.useCallback)((t=>{const a=Symbol();return e.current.set(t,a),{isStale:()=>a!==e.current.get(t)}}),[])}}})),define("oj-c/hooks/UNSAFE_useEditableValue/reducer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=function(e,t){const a=e.customMessages??[],s=e.hiddenMessages,r=e.componentMessages,n=e.shownMessages;switch(t.type){case"ADD_COMPONENT_MESSAGE":return{...e,componentMessages:[...r,t.payload],shownMessages:[...n,t.payload]};case"ADD_HIDDEN_MESSAGE":return{...e,hiddenMessages:[...s,t.payload]};case"CLEAR_ALL_MESSAGES":return{...e,shownMessages:[],hiddenMessages:[],customMessages:[],componentMessages:[]};case"SHOW_HIDDEN_MESSAGES":return 0===s.length?e:{...e,hiddenMessages:[],shownMessages:[...a,...r,...s]};case"UPDATE_DISPLAY_VALUE":return{...e,displayValue:t.payload};case"UPDATE_VALID":return{...e,valid:t.payload};case"UPDATE_VALUE":return{...e,value:t.payload};case"UPDATE_TRANSIENT_VALUE":return{...e,transientValue:t.payload};case"UPDATE_PREVIOUS_CONVERTER":return{...e,previousConverter:t.payload};case"UPDATE_PREVIOUS_DEFERRED_VALIDATORS":return{...e,previousDeferredValidators:t.payload};case"UPDATE_PREVIOUS_DISABLED":return{...e,previousDisabled:t.payload};case"UPDATE_PREVIOUS_READONLY":return{...e,previousReadonly:t.payload};case"UPDATE_PREVIOUS_VALIDATORS":return{...e,previousValidators:t.payload};case"UPDATE_PREVIOUS_VALUE":return{...e,previousValue:t.payload};case"UPDATE_COMPONENT_MESSAGES":return{...e,componentMessages:t.payload,shownMessages:[...a,...t.payload]};case"UPDATE_HIDDEN_MESSAGES":return{...e,hiddenMessages:t.payload};case"UPDATE_CUSTOM_MESSAGES":return{...e,customMessages:t.payload,shownMessages:[...t.payload,...r]};default:return e}},e.addComponentMessage=function(e,t){e({type:"ADD_COMPONENT_MESSAGE",payload:t})},e.addHiddenMessage=function(e,t){e({type:"ADD_HIDDEN_MESSAGE",payload:t})},e.clearAllMessages=function(e,t,{onMessagesCustomChanged:a}){e({type:"CLEAR_ALL_MESSAGES"}),a?.([])},e.showHiddenMessages=function(e){e({type:"SHOW_HIDDEN_MESSAGES"})},e.updateComponentMessages=function(e,t){e({type:"UPDATE_COMPONENT_MESSAGES",payload:t})},e.updateCustomMessages=function(e,t){e({type:"UPDATE_CUSTOM_MESSAGES",payload:t})},e.updateDisplayValue=function(e,t,{onRawValueChanged:a}){e({type:"UPDATE_DISPLAY_VALUE",payload:t}),a?.(t)},e.updateHiddenMessages=function(e,t){e({type:"UPDATE_HIDDEN_MESSAGES",payload:t})},e.updatePreviousConverter=function(e,t){e({type:"UPDATE_PREVIOUS_CONVERTER",payload:t})},e.updatePreviousDeferredValidators=function(e,t){e({type:"UPDATE_PREVIOUS_DEFERRED_VALIDATORS",payload:t})},e.updatePreviousDisabled=function(e,t){e({type:"UPDATE_PREVIOUS_DISABLED",payload:t})},e.updatePreviousReadonly=function(e,t){e({type:"UPDATE_PREVIOUS_READONLY",payload:t})},e.updatePreviousValidators=function(e,t){e({type:"UPDATE_PREVIOUS_VALIDATORS",payload:t})},e.updatePreviousValue=function(e,t){e({type:"UPDATE_PREVIOUS_VALUE",payload:t})},e.updateTransientValue=function(e,t,{onTransientValueChanged:a}){e({type:"UPDATE_TRANSIENT_VALUE",payload:t}),a?.(t)},e.updateValidStatus=function(e,t,{onValidChanged:a}){e({type:"UPDATE_VALID",payload:t}),a?.(t)},e.updateValue=function(e,t,{onValueChanged:a}){e({type:"UPDATE_VALUE",payload:t}),a?.(t)}})),define("oj-c/hooks/UNSAFE_useEditableValue/validationUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAsync=function({validators:e,value:a}){const s=(e,a)=>{try{const s=e.validate(a);if(s instanceof Promise)return s.then((()=>{}),(e=>({message:(0,t.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy})))}catch(e){return{message:(0,t.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy}}},r=[],n=[];for(const t of e){const e=s(t,a);void 0!==e&&(e instanceof Promise?n.push(e):r.push(e))}return{errors:r,maybeErrorPromises:n}},e.validateSync=function({validators:e,value:a}){const s=[];for(const r of e)try{r.validate(a)}catch(e){s.push((0,t.createMessageFromError)(e))}if(s.length)return{result:"failure",errors:s};return{result:"success"}}})),define("oj-c/hooks/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","./converterUtils","./utils","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","./reducer","./validationUtils"],(function(require,e,t,a,s,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=function({addBusyState:e,ariaDescribedBy:o,converter:l,defaultDisplayValue:u,deferredValidators:d,disabled:c,displayOptions:p,messagesCustom:f,onDisplayValueChanged:y,onMessagesCustomChanged:m,onRawValueChanged:v,onTransientValueChanged:h,onValidChanged:g,onValueChanged:S,translateConverterParseError:E,readonly:b,validators:C,value:V}){const _=(0,t.useRef)(!0),{setStaleIdentity:A}=(0,r.useStaleIdentity)(),[D,P]=(0,t.useReducer)(n.reducer,{shownMessages:[],hiddenMessages:[],customMessages:f,componentMessages:[],value:V,valid:"pending"},(e=>{const t=l?(0,a.format)(V,u,l):{result:"success",value:(0,s.treatNull)(V,u)};return{...e,displayValue:"success"===t.result?t.value:u}})),M=(0,t.useRef)(),T=(0,t.useRef)(!1),w=(0,t.useCallback)((e=>{e!==M.current&&(M.current=e,g?.(e))}),[g]),k=(0,t.useCallback)(((e,t)=>(e(P,t,{onMessagesCustomChanged:m,onRawValueChanged:v,onTransientValueChanged:h,onValidChanged:w,onValueChanged:S}),!0)),[P,m,v,h,w,S]),j=(0,t.useCallback)((e=>{const t="string"==typeof e?e.trim():e;return(0,i.validateSync)({validators:d??[],value:t})}),[d]),x=(0,t.useCallback)((e=>{k(n.updateValue,e)}),[k]),R=(0,t.useCallback)((e=>{k(n.updateDisplayValue,e)}),[k]),F=(0,t.useCallback)((e=>{k(n.updateTransientValue,e)}),[k]),U=(0,t.useCallback)((e=>{let t;if(l){const r=(0,a.format)(e,u,l);"failure"===r.result?(k(n.updateComponentMessages,[r.error]),k(n.updateValidStatus,"invalidShown"),t=(0,s.treatNull)(e,u)):t=r.value}else t=(0,s.treatNull)(e,u);return t}),[l,u,k]),O=(0,t.useCallback)((e=>{const t=U(e);return k(n.updateDisplayValue,t),y?.(),!0}),[k,U,y]),I=(0,t.useCallback)((()=>"invalidShown"!==D.valid?{result:"success",value:D.value}:l?(0,a.parse)((0,s.normalizeValue)(D.displayValue),l,E):{result:"success",value:(0,s.normalizeValue)(D.displayValue)}),[l,D.displayValue,D.valid,D.value,E]),L=(0,t.useCallback)((e=>l?(0,a.parse)((0,s.normalizeValue)(e),l,E):{result:"success",value:(0,s.normalizeValue)(e)}),[l,E]),N=(0,t.useCallback)((e=>{const t=L(e);return"failure"===t.result&&(k(n.updateComponentMessages,[t.error]),k(n.updateValidStatus,"invalidShown")),t}),[k,L]),z=(0,t.useCallback)((async(t,a={})=>{const{doNotClearMessagesCustom:r=!1,forceHiddenMessagesToBeShown:o=!1}=a,l=r&&(0,s.hasErrorMessages)(f);if(r?(k(n.updateComponentMessages,[]),k(n.updateHiddenMessages,[])):k(n.clearAllMessages),!(C&&0!==C.length||d&&0!==d.length))return k(n.updateValidStatus,l?"invalidShown":"valid"),!0;const u=[],c=[],p=j(t);let y;"failure"===p.result&&u.push(...p.errors),null!=t&&(y=(0,i.validateAsync)({validators:C??[],value:t}),y.errors.forEach((({message:e,messageDisplayStrategy:t})=>{"displayOnBlur"!==t||T.current||o?u.push(e):c.push(e)})));const m=y?.maybeErrorPromises??[],v=0!==u.length||0!==c.length;if(!v&&!m.length)return k(n.updateValidStatus,l?"invalidShown":"valid"),!0;if(0!==u.length?(k(n.updateComponentMessages,u),k(n.updateValidStatus,"invalidShown")):0!==c.length&&(k(n.updateHiddenMessages,c),k(n.updateValidStatus,"invalidHidden")),!m.length)return!v;!v&&k(n.updateValidStatus,"pending");const h=e?.("running asynchronous validation"),{isStale:g}=A("useEditableValue-full-validate");let S=!1,E=!1;const b=[];for(const e of m){const t=e.then((e=>{if(e&&!g()){const{messageDisplayStrategy:t,message:a}=e;"displayOnBlur"!==t||T.current||o?(k(n.addComponentMessage,a),S=!0):(k(n.addHiddenMessage,a),E=!0)}}));b.push(t)}await Promise.all(b);const V=E||S,_=E||0!==c.length,D=S||0!==u.length;return g()||(v||V?D?k(n.updateValidStatus,"invalidShown"):_&&k(n.updateValidStatus,l?"invalidShown":"invalidHidden"):k(n.updateValidStatus,l?"invalidShown":"valid")),h?.(),!v&&!V}),[e,k,d,f,A,j,C]),q=async()=>{if(c||b)return;const e=I();if("failure"===e.result)return k(n.updateComponentMessages,[e.error]),void k(n.updateValidStatus,"invalidShown");const t=e.value;await K(t,{doNotClearMessagesCustom:!0})&&k(n.updateValue,t)&&O(t)},B=(0,t.useCallback)((e=>{k(n.clearAllMessages);const t=j(e);return"failure"===t.result&&k(n.updateHiddenMessages,t.errors),k(n.updateValidStatus,"failure"===t.result?"invalidHidden":"valid"),!0}),[k,j]),K=(0,t.useCallback)((async(t,a={})=>{const{isStale:s}=A("useEditableValue-validateValueOnInternalChange"),r=e?.("Running validateValueOnInternalChange"),n=await z(t,a);return r?.(),!s()&&n}),[e,z,A]),H=(0,t.useCallback)((async(e,t=!0)=>{const a=await K(e);return a&&t&&k(n.updateValue,e),a&&(T.current=!0),a}),[k,K]),W=(0,t.useCallback)((async({value:e})=>{const t=N(e);if("failure"===t.result)return!1;const a=t.value,s=await H(a);return s&&O(a),s}),[H,N,O]),G=(0,t.useCallback)((({value:e})=>{k(n.updateDisplayValue,e??u)}),[k,u]),$=(0,t.useCallback)((async()=>{if(b||c)return"valid";const t=N(D.displayValue);if("failure"===t.result)return"invalid";const a=t.value,s=e?.("Running component method validate"),r=await z(a,{forceHiddenMessagesToBeShown:!0});return s?.(),r?(a!==D.value&&(k(n.updateValue,a),O(a)),"valid"):"invalid"}),[e,c,k,z,N,b,O,D.displayValue,D.value]),Y=(0,t.useCallback)((()=>{B(D.value),O(D.value)}),[O,D.value,B]),X=(0,t.useCallback)((()=>{D.hiddenMessages&&D.hiddenMessages.length>0&&(k(n.showHiddenMessages),k(n.updateValidStatus,"invalidShown"))}),[k,D.hiddenMessages]),J=(0,t.useCallback)((()=>{T.current=!1}),[]),Q=(0,t.useCallback)((e=>{k(n.addComponentMessage,e)}),[k]);_.current||D.previousValue===V||(k(n.updatePreviousValue,V),V!==D.value&&(B(V),k(n.updateValue,V),O(V)));_.current||D.previousConverter===l||(k(n.updatePreviousConverter,l),"invalidShown"!==D.valid&&O(V),"invalidShown"===D.valid&&q());_.current||D.previousValidators===C||(k(n.updatePreviousValidators,C),"invalidShown"===D.valid&&q());if(!_.current&&(!D.customMessages&&f||D.customMessages&&!f||D.customMessages&&f&&!(0,s.isShallowEqual)(D.customMessages,f))){const e=D.componentMessages??[],t=D.hiddenMessages??[],a=f??[],r=(0,s.hasErrorMessages)(a),i=t.length>0,o=0===e.length&&0===t.length&&0===a.length;k(n.updateCustomMessages,a),r&&k(n.updateValidStatus,"invalidShown"),!r&&"pending"!==D.valid&&(o&&k(n.updateValidStatus,"valid")||i&&k(n.updateValidStatus,"invalidHidden"))}if(!_.current&&(D.previousDeferredValidators!==d||D.previousDisabled!==c||D.previousReadonly!==b)){const e=0===d?.length;if(D.previousDeferredValidators!==d&&k(n.updatePreviousDeferredValidators,d),D.previousDisabled!==c&&k(n.updatePreviousDisabled,c),D.previousReadonly!==b&&k(n.updatePreviousReadonly,b),e||!b&&!c)switch(D.valid){case"valid":{const e=I();if("failure"===e.result)k(n.updateComponentMessages,[e.error]),k(n.updateValidStatus,"invalidShown");else{const t=j(e.value);"failure"===t.result&&k(n.updateHiddenMessages,t.errors)&&k(n.updateValidStatus,"invalidHidden")}break}case"invalidHidden":0===d?.length&&(k(n.updateValidStatus,"valid"),k(n.updateHiddenMessages,[]));break;case"invalidShown":q()}}if(_.current)if(_.current=!1,k(n.updatePreviousValue,V),k(n.updatePreviousConverter,l),k(n.updatePreviousValidators,C),k(n.updatePreviousDeferredValidators,d),k(n.updatePreviousDisabled,c),k(n.updatePreviousReadonly,b),k(n.updateCustomMessages,f),k(n.updateTransientValue,V),c||b)k(n.updateValidStatus,"valid"),O(V);else{const e=j(V);"failure"===e.result&&k(n.updateHiddenMessages,e.errors)&&k(n.updateValidStatus,(0,s.hasErrorMessages)(f)?"invalidShown":"invalidHidden"),"success"===e.result&&k(n.updateValidStatus,(0,s.hasErrorMessages)(f)?"invalidShown":"valid")&&O(V)}return{value:D.value,addMessage:Q,clearInteractionFlags:J,displayValue:D.displayValue,formatValue:U,methods:{reset:Y,showMessages:X,validate:$},onCommitValue:H,parseValue:N,refreshDisplayValue:O,setDisplayValue:R,setTransientValue:F,setValue:x,textFieldProps:{"aria-describedby":o,messages:"none"!==p?.messages?D.shownMessages:void 0,onCommit:W,onInput:G,value:D.displayValue},validateValueOnExternalChange:B}}})),define("oj-c/hooks/UNSAFE_useEditableValue/index",["require","exports","./utils","./useEditableValue"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=e.treatNull=e.getVirtualKeyboardHintFromConverter=void 0,Object.defineProperty(e,"getVirtualKeyboardHintFromConverter",{enumerable:!0,get:function(){return t.getVirtualKeyboardHintFromConverter}}),Object.defineProperty(e,"treatNull",{enumerable:!0,get:function(){return t.treatNull}}),Object.defineProperty(e,"useEditableValue",{enumerable:!0,get:function(){return a.useEditableValue}})})),define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=function({labelHint:e,required:r,requiredMessageDetail:n}){const i=(0,s.useTranslationBundle)("@oracle/oraclejet-preact"),o=n||i.formControl_requiredMessageDetail(),l=(0,a.useMemo)((()=>r?new t({label:e,messageDetail:o}):null),[r]);return(0,a.useMemo)((()=>[l].filter(Boolean)),[l])}})),define("oj-c/select-common/utils/utils",["require","exports","ojs/ojdataprovider","@oracle/oraclejet-preact/utils/UNSAFE_logger"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_VALUE_ITEMS=e.DEFAULT_VALUE_ITEM=e.DEFAULT_VALUE=e.DEFAULT_ITEM_CONTEXT=void 0,e.isEmpty=function(e){return!e||(Array.isArray(e)?0===e.length:(e instanceof Set||e instanceof Map)&&0===e.size)},e.isSetEqual=function(e,t){if(e===t)return!0;if(e?.size!==t?.size)return!1;const a=Array.from(e),s=Array.from(t);return a.every(((e,t)=>e===s[t]))},e.getFilterCriterion=function(e,s,r){const n=s&&s.length>0;if(!n)return;const i=r,o=i&&i.length>0,l=e?.getCapability("filter"),u=l&&l.textFilter;e&&n&&!u&&(0,a.error)("Core Pack Select: DataProvider does not support text filter.  Filtering results in dropdown may not work correctly.");const d=e&&u&&n&&o?i.reduce(((e,t)=>{if(e)return e;if("unknown"===t)return t;if(t){if(l.textFilterMatching&&l.textFilterMatching.matchBy&&l.textFilterMatching.matchBy.indexOf(t)>-1)return t;(0,a.warn)(`Core Pack Select: DataProvider does not support text filter "${t}" matching.  Filtering results in dropdown may not work as expected.`)}}),null):void 0,c=d?{text:s,matchBy:d}:{text:s};return t.FilterFactory.getFilter({filterDef:c})},e.DEFAULT_ITEM_CONTEXT=null,e.DEFAULT_VALUE=null,e.DEFAULT_VALUE_ITEM=null,e.DEFAULT_VALUE_ITEMS=null})),define("oj-c/select-common/PRIVATE_useCache/useCache",["require","exports","preact/hooks","../utils/utils"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=function(){const e=(0,t.useRef)(new Map);return(0,t.useCallback)(((t,a,r)=>s(e.current,t,r)?(e.current.set(t,{value:a,deps:r}),a):e.current.get(t).value),[])};const s=(e,t,a)=>{if(!e.has(t))return!0;const s=e.get(t).deps;return s.length!==a.length||s.some(((e,t)=>!r(e,a[t])))},r=(e,t)=>e===t||(e instanceof Set&&t instanceof Set?(0,a.isSetEqual)(e,t):e===t)})),define("oj-c/select-common/PRIVATE_useCache/index",["require","exports","./useCache"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=void 0,Object.defineProperty(e,"useCache",{enumerable:!0,get:function(){return t.useCache}})})),define("oj-c/hooks/UNSAFE_useListData/useListData",["require","exports","ojs/ojabortreason","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEmptyState=e.useListData=void 0;const r=Object.freeze({status:"loading",data:null}),n={isInitialFetchDeferred:!1};e.useListData=(a,u=n)=>{const d=(0,s.useRef)(null),c=(0,s.useRef)(0),m=(0,s.useRef)(!1),v=(0,s.useRef)(null),h=(0,s.useRef)(null),g=u.fetchSize&&u.fetchSize>0?u.fetchSize:25,S=(0,s.useMemo)((()=>i(a)),[a]),[E,b]=(0,s.useReducer)(o,0===u.initialRowsFetched?(0,e.getEmptyState)("atLeast"):r),C=(0,s.useCallback)((async(e,t)=>{if(null==S)return;const a={attributes:u.attributes,sortCriteria:u.sortCriteria,filterCriterion:u.filterCriterion,offset:e.offset,size:e.count},s=!0===m.current?"exact":"atLeast";if(0!==e.count)try{const r=(await S.fetchByOffset(a)).results;t&&t(r),b({status:"success",data:{offset:e.offset,data:r,totalSize:c.current,sizePrecision:s}})}catch(e){b({status:"error",error:e})}else b({status:"success",data:{offset:e.offset,data:[],totalSize:c.current,sizePrecision:s}})}),[S,u.attributes,u.filterCriterion,u.sortCriteria]),V=(0,s.useCallback)((async()=>{if(null==S)return;"loading"===E.status&&h.current?.abort((0,t.getAbortReason)()),b({status:"loading",data:null});const e=new AbortController;h.current=e;const a=S.fetchFirst({attributes:u.attributes,sortCriteria:u.sortCriteria,filterCriterion:u.filterCriterion,size:g,signal:e.signal})[Symbol.asyncIterator]();v.current=a;try{const e=await a.next();if(a!==v.current)return;const t=e.value.fetchParameters;if(t.signal&&t.signal.aborted)return;c.current=e.value.data.length,void 0!==e.done&&(m.current=e.done);const s=u.initialRowsFetched&&u.initialRowsFetched>0?u.initialRowsFetched:g;C({offset:0,count:Math.min(c.current,s)})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;b({status:"error",error:e}),v.current=null}}),[S,C,g,u.attributes,u.filterCriterion,u.initialRowsFetched,u.sortCriteria,u.fetchSize]),_=(0,s.useCallback)((async e=>{if(null===v.current)V();else{const t=e.offset+e.count;if(t>c.current){if(null==d.current){const a=l(v,c.current,t);d.current=a;try{const t=await a;void 0!==t.done&&(m.current=t.done);const s=t.total;(s>0||0===s&&m.current)&&(c.current=s,C({offset:e.offset,count:Math.min(c.current-e.offset,e.count)})),d.current=null}catch(e){b({status:"error",error:e}),d.current=null}}}else C(e)}}),[V,C]),A=(0,s.useCallback)((()=>{v.current=null,d.current=null,c.current=0,m.current=!1,0===u.initialRowsFetched?b((0,e.getEmptyState)("atLeast")):u.isInitialFetchDeferred?b({status:"loading",data:null}):V()}),[V,u.isInitialFetchDeferred,u.initialRowsFetched]);(0,s.useEffect)((()=>{S&&A()}),[S,A]);const D=(0,s.useCallback)((e=>{if("success"===E.status&&E.data){const t=E.data;let a,s=t.data.length,r=!1;if(e.detail.add){const a=p(e.detail.add,t,u,!0);c.current=c.current+a,s+=a,r=a>0||"exact"===t.sizePrecision,a<e.detail.add.data.length&&(m.current=!1)}if(e.detail.remove){const a=p(e.detail.remove,t,u,!1);c.current=Math.max(0,c.current-a),s=Math.max(0,s-a),r=r||a>0}const n=e.detail.update;n&&(r=r||f(n,t,u),a=e=>{y(n,t,e)}),r&&C({offset:t.offset,count:s},a)}}),[E,u,C]),P=(0,s.useCallback)((e=>{let t=-1;const a=e.detail?.disregardAfterKey;if(a&&"success"===E.status){const e=E.data.data.findIndex((e=>e.metadata.key===a));if(e>-1&&(t=E.data.data.length-e-1),0===t&&E.data.data.length>=g)return}t>-1&&"success"===E.status?(c.current=c.current-t,_({offset:E.data.offset,count:Math.max(E.data.data.length,g)})):("loading"===E.status&&h.current?.abort(),A())}),[E,g,_,A]);if((0,s.useEffect)((()=>(S&&(S.addEventListener("refresh",P),S.addEventListener("mutate",D)),()=>{S&&(S.removeEventListener("refresh",P),S.removeEventListener("mutate",D))})),[S,A,D,P]),!a){return[(0,e.getEmptyState)("exact"),e=>Promise.resolve()]}return[E,_]};const i=e=>{if(null==e)return null;return(0,a.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator",forceLocalCaching:"enabled"}})},o=(e,t)=>e.status===t.status&&"loading"===t.status?e:t,l=async(e,t,a)=>await u(e,t,a),u=async(e,t,a)=>{const s=e.current;if(null===s)return{total:-1,done:void 0};const r=await s.next();return s===e.current?(t+=r.value.data.length)>=a||r.done?{total:t,done:r.done}:u(e,t,a):{total:-1,done:void 0}};e.getEmptyState=e=>"atLeast"===e?d:c;const d=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"atLeast"}}),c=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"exact"}}),p=(e,t,a,s)=>{let r=0;if(m(e,a)){const a=s?e.indexes?.sort(((e,t)=>e-t)):e.indexes;let n=t.totalSize-1;a?.forEach((e=>{e<=n&&(r=r+=1,s&&(n=n+=1))}))}else if(s);else{const a=t.data.map((e=>e.metadata.key));e.keys.forEach((e=>{a.includes(e)&&(r+=1)}))}return r},f=(e,t,a)=>{if(m(e,a)){const a=e.indexes?e.indexes:[],s=t.offset,r=s+t.data.length;for(let e=0;e<a.length;e++)if(a[e]>=s&&a[e]<r)return!0}else{const a=Array.from(e.keys),s=t.data.map((e=>e.metadata.key));for(let e=0;e<a.length;e++){const t=a[e];if(s.includes(t))return!0}}return!1},y=(e,t,a)=>{e.keys.forEach((e=>{const s=a.find((t=>t.metadata.key==e)),r=t.data.find((t=>t.metadata.key==e));r&&s&&r.data===s.data&&(s.data=new Proxy(s.data,{}))}))},m=(e,t)=>e.indexes&&null==t.sortCriteria&&null==t.filterCriterion})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/Debouncer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Debouncer=void 0;e.Debouncer=class{constructor(){this._responseTimes=[{time:900,count:0},{time:720,count:0},{time:600,count:0},{time:450,count:0},{time:360,count:0},{time:300,count:0}],this._requestTime={time:250,count:0},this._lastRequestTime=0}debounce(e,t){const a=this.GetDebounceTime(t);return(...t)=>{window.setTimeout((()=>{e(...t)}),a)}}recordResponseTime(e,t){const a=Math.min(t,5),s=this._responseTimes[a];0===s.count?s.time=e:s.time=(s.time*s.count+e)/(s.count+1),s.count+=1}recordRequestTime(){const e=Date.now(),t=this._lastRequestTime;if(this._lastRequestTime=e,0===t)return;const a=e-t;if(a>1e3)return;const s=this._requestTime;0===s.count?s.time=a:s.time=(s.time*s.count+a)/(s.count+1),s.count+=1}_getResponseTime(e){const t=Math.min(e,5);return this._responseTimes[t].time}_getRequestTime(){return this._requestTime.time}GetDebounceTime(e){const t=this._getResponseTime(e),a=1.2*this._getRequestTime();if(t<a)return 0;return(1+(t-a)/t)*a}}})),define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView",["require","exports","ojs/ojdataprovider","./Debouncer"],(function(require,e,t,a){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncingDataProviderView=void 0;class r{constructor(e,t,a){this._isFirstNext=!0,this.dataProvider=e,this.debouncer=t,this.params=a}next(){if(this._isFirstNext){this.debouncer.recordRequestTime(),this._isFirstNext=!1;const e=this.params?.filterCriterion?.text,a=(t,a)=>{if(this.params?.signal?.aborted)return void a(this.params?.signal?.reason);const s=this.dataProvider.fetchFirst(this.params);this._asyncIterator=s[Symbol.asyncIterator]();const r=Date.now();this._asyncIterator.next().then((a=>{const s=Date.now();this.debouncer.recordResponseTime(s-r,e?e.length:0),t(a)}),a)},s=(t,s)=>new Promise(((t,s)=>{this.debouncer.debounce(a,e?e.length:0)(t,s)})).then(t,s);return(0,t.wrapWithAbortHandling)(this.params?.signal,s,!1)}return this._asyncIterator.next()}}class n{constructor(e,t,a){this[s]=()=>new r(this.dataProvider,this.debouncer,this.params),this.dataProvider=e,this.debouncer=t,this.params=a}}s=Symbol.asyncIterator;e.DebouncingDataProviderView=class{constructor(e){this._debouncer=new a.Debouncer,this.dataProvider=e}fetchFirst(e){return new n(this.dataProvider,this._debouncer,e)}fetchByKeys(e){return this.dataProvider.fetchByKeys(e)}containsKeys(e){return this.dataProvider.containsKeys(e)}fetchByOffset(e){return this.dataProvider.fetchByOffset(e)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}getCapability(e){return this.dataProvider.getCapability(e)}addEventListener(e,t){this.dataProvider.addEventListener(e,t)}removeEventListener(e,t){this.dataProvider.removeEventListener(e,t)}dispatchEvent(e){return this.dataProvider.dispatchEvent(e)}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider",["require","exports","ojs/ojdataproviderfactory","preact/hooks","../PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=function(e){return(0,a.useMemo)((()=>{if(!e)return e;const a=(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}),r=a.getCapability("fetchFirst");return"immediate"===r?.iterationSpeed?a:new s.DebouncingDataProviderView(a)}),[e])}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/UNSAFE_useWrapDataProvider/index",["require","exports","./useWrapDataProvider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=void 0,Object.defineProperty(e,"useWrapDataProvider",{enumerable:!0,get:function(){return t.useWrapDataProvider}})})),define("oj-c/select-common/PRIVATE_useSelectData/CollectionTemplateDataProviderView",["require","exports","ojs/ojdataprovider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollectionTemplateDataProviderView=e.SELECT_INTERNALS=void 0,e.SELECT_INTERNALS=Symbol("__SELECT_INTERNALS__");e.CollectionTemplateDataProviderView=class{get currentDataProvider(){return this.overrideDataProvider??this.originalDataProvider}setFilterCriterion(a){const s=this.filterCriterion;if(this.filterCriterion=a,!this.compareFilter(s,a)){const a=new t.DataProviderRefreshEvent;Object.defineProperty(a,e.SELECT_INTERNALS,{value:{cause:"filterCriterionChanged"}}),this.dispatchEvent(a),this.options.onRefresh?.()}}setDataStateOverride(s){if(this.dataStateOverride!==s){this.dataStateOverride=s,this.overrideDataProvider="success"===this.dataStateOverride?.status?new a(this.dataStateOverride):void 0;const r=new t.DataProviderRefreshEvent;Object.defineProperty(r,e.SELECT_INTERNALS,{value:{cause:"dataOverrideChanged"}}),this.dispatchEvent(r),this.options.onRefresh?.()}}compareFilter(e,t){if(e===t)return!0;if(void 0===e||void 0===t)return!1;const a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((a=>s.includes(a)&&e[a]===t[a]))}constructor(e,t){this.originalDataProvider=e,this.options=t,e.createOptimizedKeyMap&&(this.createOptimizedKeyMap=t=>e.createOptimizedKeyMap(t)),e.createOptimizedKeySet&&(this.createOptimizedKeySet=t=>e.createOptimizedKeySet(t))}async fetchByOffset(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=await this.currentDataProvider.fetchByOffset(t);return this.options.onOffsetFetch?.({results:a}),a}fetchFirst(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=this.options;a.onInitializeFetch?.();const s=this.currentDataProvider.fetchFirst(t);return{[Symbol.asyncIterator](){let e=0;const t=s[Symbol.asyncIterator]();return{async next(){const s=await t.next(),{value:r,done:n=!1}=s;return a.onNextIteration?.({results:r,offset:e,done:n}),e+=r.data.length,s}}}}}addEventListener(e,t){return this.originalDataProvider.addEventListener(e,t)}containsKeys(e){return this.currentDataProvider.containsKeys(e)}dispatchEvent(e){return this.originalDataProvider.dispatchEvent(e)}fetchByKeys(e){return this.currentDataProvider.fetchByKeys(e)}getCapability(e){return this.originalDataProvider.getCapability(e)}getTotalSize(){return this.currentDataProvider.getTotalSize()}isEmpty(){return this.currentDataProvider.isEmpty()}removeEventListener(e,t){return this.originalDataProvider.removeEventListener(e,t)}};class a{constructor(e){this.dataState=e}containsKeys(e){const{keys:t}=e,{data:a}=this.dataState,s=new Set;return a.data.forEach((e=>{t.has(e.metadata.key)&&s.add(e.metadata.key)})),Promise.resolve({containsParameters:e,results:s})}fetchByKeys(e){const{keys:t}=e,{data:a}=this.dataState,s=new Map;return a.data.forEach((e=>{t.has(e.metadata.key)&&s.set(e.metadata.key,e)})),Promise.resolve({fetchParameters:e,results:s})}fetchByOffset(e){const{offset:t,size:a}=e,{data:s}=this.dataState,r={fetchParameters:e??{},results:s.data.slice(t,a).map((e=>({data:e.data,metadata:e.metadata}))),done:t+(a??0)>=s.totalSize};return Promise.resolve(r)}fetchFirst(e){const{data:t}=this.dataState;return{[Symbol.asyncIterator](){let a=0;const s=e?.size??25,r=t.totalSize;return{async next(){if(a<r){const n={...t.data.slice(a,s).reduce(((e,t)=>(e.data.push(t.data),e.metadata.push(t.metadata),e)),{data:[],metadata:[]}),fetchParameters:e??{},totalFilteredRowCount:t.totalSize},i=Math.min(s,r-a);return a+=a+i,{value:n,done:!1}}return{value:{data:[],metadata:[],fetchParameters:e??{},totalFilteredRowCount:t.totalSize},done:!0}}}}}}getCapability(){return null}getTotalSize(){return Promise.resolve(this.dataState.data.totalSize)}isEmpty(){return 0===this.dataState.data.totalSize?"yes":"no"}addEventListener(){}dispatchEvent(){return!1}removeEventListener(){}}})),define("oj-c/select-common/PRIVATE_useSelectData/useCollectionTemplateDataProviderView",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","./CollectionTemplateDataProviderView"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCollectionTemplateDataProviderView=function({dataProvider:e,options:{dataStateOverride:n,filterCriterion:i}}){const[o,l]=(0,a.useReducer)(r,{dataState:(0,t.getEmptyState)("atLeast")}),u=(0,a.useMemo)((()=>null==e?e:new s.CollectionTemplateDataProviderView(e,{onInitializeFetch(){l({type:"loading"})},onNextIteration({results:{data:e,metadata:t,fetchParameters:a},offset:s,done:r}){if(a.signal?.aborted)return;const n=e.map(((e,a)=>({data:e,metadata:t[a]})));l({type:"append",payload:{items:n,offset:s,done:r}})},onOffsetFetch({results:{results:e,done:t,fetchParameters:a}}){a.signal?.aborted||l({type:"update",payload:{items:e,done:t,offset:a.offset}})},onRefresh(){l({type:"loading"})}})),[e]),d=(0,a.useRef)();d.current!==i&&(d.current=i,u?.setFilterCriterion(i));const c=(0,a.useRef)();c.current!==n&&(c.current=n,u?.setDataStateOverride(n));return{dataState:o.dataState,dataProvider:u}};const r=(e,{type:t,payload:a})=>{switch(t){case"append":{const{dataState:t}=e,s="success"===t.status?t.data:null,{done:r,items:n}=a;return{...e,dataState:{status:"success",data:{data:[...s?.data??[],...n],offset:s?.offset??0,sizePrecision:r?"exact":"atLeast",totalSize:(s?.data.length??0)+n.length}}}}case"update":return{...e,dataState:{status:"success",data:{data:a.items,offset:a.offset,sizePrecision:a.done?"exact":"atLeast",totalSize:a.items.length}}};case"loading":return{...e,dataState:{status:"loading",data:null}};default:return e}}})),define("oj-c/select-common/PRIVATE_useSelectData/useSelectData",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","../UNSAFE_useWrapDataProvider/index","./useCollectionTemplateDataProviderView"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectData=void 0;const n=()=>{};e.useSelectData=({data:e,dataStateOverride:i,filterCriterion:o,hasCollectionTemplate:l})=>{const u=(0,s.useWrapDataProvider)(e),[d,c]=(0,t.useListData)(u??null,{filterCriterion:o,initialRowsFetched:0}),p=(0,a.useMemo)((()=>i?{status:"success",data:i}:void 0),[i]),{dataState:f,dataProvider:y}=(0,r.useCollectionTemplateDataProviderView)({dataProvider:u,options:{dataStateOverride:p,filterCriterion:o}});return{dataProvider:l?y:u,dataState:l?p??f:d,onLoadRange:l?n:c}}})),define("oj-c/select-common/PRIVATE_useSelectData/index",["require","exports","./useSelectData","./CollectionTemplateDataProviderView"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SELECT_INTERNALS=e.useSelectData=void 0,Object.defineProperty(e,"useSelectData",{enumerable:!0,get:function(){return t.useSelectData}}),Object.defineProperty(e,"SELECT_INTERNALS",{enumerable:!0,get:function(){return a.SELECT_INTERNALS}})})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","preact/hooks","../PRIVATE_useSelectData/index","../utils/utils"],(function(require,e,t,a,s,r){"use strict";function n(e){return e instanceof Set?new Set(e.values()):e}function i(e){return null!=e&&("object"==typeof e&&["key","data"].every((t=>t in e)))}function o(e,t){return e instanceof Set&&t instanceof Set||e instanceof Map&&t instanceof Map?e.size===t.size:i(e)&&i(t)?e.key===t.key:e===t}function l(e,t){return e instanceof Set?e.has(t):null!=e&&e===t}function u(e,t){return e instanceof Set||e instanceof Map?(e.delete(t),e):"number"==typeof e||"string"==typeof e?e===t?r.DEFAULT_VALUE:e:"object"==typeof e&&e.key===t?r.DEFAULT_VALUE_ITEMS:e}Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProviderListeners=function({dataProvider:e,setValue:s,setValueToSync:i,setValueItemsToSync:c,value:p,valueItems:f}){const y=p instanceof Set,m=(0,a.useCallback)((e=>{d(e)&&((0,r.isEmpty)(p)||(i(n(p)),c(r.DEFAULT_VALUE_ITEMS)))}),[c,i,p]),v=(0,a.useCallback)((e=>{if((0,r.isEmpty)(p))return;let a=n(p);if(null!=e.detail.remove){e.detail.remove.keys.forEach((e=>{l(a,e)&&(a=u(a,e),(0,t.warn)(`\n              ${y?"SelectMultiple":"SelectSingle"}: selected value removed from data provider: ${e}`))})),o(a,p)||(s((0,r.isEmpty)(a)?r.DEFAULT_VALUE:a),i((0,r.isEmpty)(a)?r.DEFAULT_VALUE:a))}var d;if(!(0,r.isEmpty)(a)&&null!=e.detail.update){const t=e.detail.update.keys;let s=(0,r.isEmpty)(f)?f:(d=f)instanceof Map?new Map(d.entries()):Object.assign({},d);t.forEach((e=>{l(a,e)&&(s=u(s,e))})),o(s,f)||(i(a),c((0,r.isEmpty)(s)?r.DEFAULT_VALUE_ITEMS:s))}}),[y,s,c,i,p,f]);(0,a.useEffect)((()=>(e?.addEventListener("refresh",m),e?.addEventListener("mutate",v),()=>{e?.removeEventListener("refresh",m),e?.removeEventListener("mutate",v)})),[e,v,m])};const d=e=>{if(s.SELECT_INTERNALS in e){const{cause:t=""}=e[s.SELECT_INTERNALS];return!["filterCriterionChanged","dataOverrideChanged"].includes(t)}return!0}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/utils/PRIVATE_keyUtils/keySetUtils",["require","exports","ojs/ojkeyset"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEqual=e.getFirstKey=e.isEmpty=e.keysToKeySet=e.keySetToKeys=void 0;e.keySetToKeys=e=>{if(!e)return{all:!1,keys:new Set};let t={};if(e.isAddAll()){t={all:!0,deletedKeys:new Set(e.deletedValues())}}else if(!e.isAddAll()){t={all:!1,keys:new Set(e.values())}}return t};e.keysToKeySet=e=>{let a;return e.all?(a=new t.AllKeySetImpl,a=a.delete(new Set(e.deletedKeys.values()))):e.all||(a=new t.KeySetImpl(new Set(e.keys.values()))),a};e.isEmpty=e=>!e.all&&0===e.keys.size;e.getFirstKey=(e,t)=>{if(!1===e.all&&e.keys.size>0){const[t]=e.keys;return t}return t.length>0?t[0]:null};e.isEqual=(e,t)=>{if(e===t)return!0;if(e.keys.all!==t.keys.all)return!1;const a=!0===e.keys.all?Array.from(e.keys.deletedKeys.values()):Array.from(e.keys.keys.values()),s=!0===t.keys.all?Array.from(t.keys.deletedKeys.values()):Array.from(t.keys.keys.values());if(a.length!==s.length)return!1;for(let e=0;e<a.length;e++)if(a[e]!==s[e])return!1;return!0}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-multiple/useSyncValueAndValueItems",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","oj-c/select-common/utils/utils","preact/hooks"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSyncValueAndValueItems=function({addBusyState:e,dataProvider:r,setDisplayValue:n,setIsLoading:i,setValue:o,setValueItems:l,value:u,valueItems:d,validateValueOnExternalChange:c}){const p=(0,s.useRef)(u),f=(0,s.useRef)(d),y=u&&u instanceof Set&&u.size>0,m=d&&d.size>0,v=(0,s.useRef)(null),h=(0,s.useCallback)((()=>{if(!y)return void(m&&l(a.DEFAULT_VALUE_ITEMS));const s=Array.from(u.keys()),n=s.reduce(((e,t)=>(m&&d.has(t)||e.push(t),e)),[]);if(0===n.length){const e=new Map;u.forEach((t=>{e.set(t,d.get(t))}));const t=Array.from(e.keys()),a=s.every(((e,a)=>e===t[a]));return void(d?.size===e.size&&a||l(e))}i(!0);const o=e("useSyncValueItems: calling fetchByKeys"),c={};v.current=c;const p=()=>{c===v.current&&i(!1),o()};r.fetchByKeys({keys:new Set(n)}).then((e=>{if(c===v.current){const t=function(e,t,a){const s=Array.from(e.keys());return s.reduce(((e,s)=>{if(t&&t.has(s))return e.set(s,t.get(s)),e;const r=a.get(s);if(!r)throw new Error(`oj-c-select-multiple: could not fetch data for key ${s}`);return e.set(s,{key:s,data:r.data,metadata:r.metadata?r.metadata:{key:s}}),e}),new Map)}(u,d,e.results);l(t)}p()}),(e=>{c===v.current&&(0,t.error)(`SelectMultiple: fetchByKeys promise rejected: ${e}`),p()}))}),[e,r,y,m,i,l,u,d]),g=(0,s.useCallback)((()=>{const e=e=>{c(e)&&(o(e),n(e))};if(!m)return void(y&&e(a.DEFAULT_VALUE));const t=Array.from(d.keys()),s=new Set(t);if(!(u&&u instanceof Set&&u.size===s.size))return void e(s);const r=Array.from(u.keys());t.some(((e,t)=>e!==r[t]))&&e(s)}),[y,m,n,o,c,u,d]);(0,s.useEffect)((()=>{y?h():m&&g()}),[]),(0,s.useEffect)((()=>{u!==p.current&&d!==f.current?(p.current=u,f.current=d,u?h():g()):u!==p.current?(p.current=u,h()):d!==f.current&&(f.current=d,g())}),[h,g,u,d])}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-multiple/useValueItems",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueItems=function(e,s){const[r,n]=(0,t.useUncontrolledState)(e,s),[i,o]=(0,a.useState)(e);i!==e&&r!==e&&n(e);const[l,u]=(0,a.useState)(r),[d,c]=(0,a.useState)(r?Array.from(r.values()):void 0);l!==r&&c(r?Array.from(r.values()):void 0);i!==e&&o(e);l!==r&&u(r);return{valueItems:r,setValueItems:n,preactValueItems:d}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-multiple/useSelectMultiplePreact",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","oj-c/hooks/UNSAFE_useComponentMessages/useComponentMessages","oj-c/hooks/UNSAFE_useEditableValue/index","oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators","oj-c/select-common/PRIVATE_useCache/index","oj-c/select-common/PRIVATE_useSelectData/index","oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners","oj-c/select-common/utils/utils","oj-c/utils/PRIVATE_keyUtils/keySetUtils","ojs/ojkeyset","preact/hooks","./useSyncValueAndValueItems","./useValueItems"],(function(require,e,t,a,s,r,n,i,o,l,u,d,c,p,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectMultiplePreact=function({collectionTemplate:e,data:y,disabled:m,displayOptions:v,itemTemplate:h,itemText:g,labelEdge:S,labelHint:E,labelStartWidth:b,matchBy:C,messagesCustom:V,placeholder:_,readonly:A,readonlyUserAssistanceShown:D,required:P,requiredMessageDetail:M,textAlign:T,userAssistanceDensity:w,value:k,valueItems:j,virtualKeyboard:x,onMessagesCustomChanged:R,onValidChanged:F,onValueChanged:U,onValueItemsChanged:O,...I},L){const[N,z]=(0,c.useState)(void 0),[q,B]=(0,c.useState)(null!=y&&null!=k&&k.size>0&&(null==j||0===j.size)),K=(0,c.useMemo)((()=>C&&C.length>0?[...C]:void 0),[C]),{valueItems:H,setValueItems:W,preactValueItems:G}=(0,f.useValueItems)(j,O),[$,Y]=(0,c.useState)(G),[X,J]=(0,c.useState)(G);$!==G&&X!==G&&J(G);const Q=(0,t.useTranslationBundle)("@oracle/oraclejet-preact"),Z=M||Q.select_requiredMessageDetail(),ee=(0,r.useDeferredValidators)({labelHint:E,required:P,requiredMessageDetail:Z}),te=(0,c.useCallback)((()=>{J(G)}),[G]),{methods:ae,onCommitValue:se,setDisplayValue:re,setValue:ne,textFieldProps:ie,value:oe,validateValueOnExternalChange:le}=(0,s.useEditableValue)({addBusyState:L,ariaDescribedBy:I["aria-describedby"],defaultDisplayValue:null,deferredValidators:ee,disabled:m,displayOptions:v,messagesCustom:V,onDisplayValueChanged:te,onMessagesCustomChanged:R,onValidChanged:F,onValueChanged:U,readonly:A,value:k}),{messages:ue,...de}=ie,ce=(0,a.useComponentMessages)({evMessages:ue,messagesCustom:V,readonly:A,readonlyUserAssistanceShown:D}),{"aria-describedby":pe}=de,fe=null===oe||oe instanceof Set&&0===oe.size,[ye,me]=(0,c.useState)(),{dataProvider:ve,dataState:he,onLoadRange:ge}=(0,i.useSelectData)({data:y,dataStateOverride:ye,filterCriterion:N,hasCollectionTemplate:void 0!==e}),[Se,Ee]=(0,c.useState)(oe),[be,Ce]=(0,c.useState)(H),[Ve,_e]=(0,c.useState)(oe),[Ae,De]=(0,c.useState)(H);Ve!==oe&&Ee(oe);Ae!==H&&Ce(H);(0,o.useDataProviderListeners)({dataProvider:ve,setValue:ne,setValueToSync:Ee,setValueItemsToSync:Ce,value:oe,valueItems:H}),(0,p.useSyncValueAndValueItems)({addBusyState:L,dataProvider:ve,setDisplayValue:re,setIsLoading:B,setValue:ne,setValueItems:W,value:Se,valueItems:be,validateValueOnExternalChange:le});const Pe=(0,c.useCallback)((async({value:e})=>{const t=e&&e.size>0?e:l.DEFAULT_VALUE;re(t);const a=await se(t);if(a){if(a&&e&&e.size>0&&G?.length===e.size){Array.from(e).every(((e,t)=>e===G?.[t].key))&&X!==G&&J(G)}}else J(void 0)}),[G,X,se,re]),Me=(0,c.useCallback)((({searchText:e})=>{const t=(0,l.getFilterCriterion)(ve,e,K);z(t)}),[ve,K]),Te=(0,c.useRef)((0,u.keysToKeySet)({all:!1,keys:new Set})),we=(0,c.useMemo)((()=>{if(h)return({data:e,metadata:t,searchText:a,selectedKeys:s,onSelectionChange:r})=>{const n=s??new Set,i=Te.current.keys.keys??new Set,o=(0,l.isSetEqual)(i,n)?Te.current:(0,u.keysToKeySet)({all:!1,keys:n});Te.current=o;return h({selectedKeys:o,onSelectedKeysChanged:e=>{const t=e instanceof CustomEvent?e.detail.value:e,a=t.keys.keys;Te.current!==t&&r({target:e instanceof CustomEvent?e.target:null,value:new Set(a?.values())})},item:{data:e,metadata:t},searchText:a})}}),[h]),ke=(0,c.useRef)(),je=(0,n.useCache)(),xe=(0,c.useMemo)((()=>{if(e)return({currentRowKeyOverride:t,onPersistCurrentRowKey:a,onSelectedChange:s,searchText:r,selected:n,selectedOnlyData:i})=>{ye!==i&&me(i);const o={currentRowOverride:je("currentRowOverride",t?{rowKey:t}:void 0,[t,r]),data:ve,onCurrentRowChanged:je("onCurrentRowChanged",(({rowKey:e})=>{a({value:e})}),[a]),onSelectedChanged:je("onSelectedChanged",(e=>{if(!1===e.value?.keys.all){const t=e.value.keys.keys,a=n??new Set,r=new Set(t.values());(0,l.isSetEqual)(a,r)||s({value:r})}}),[n,s]),searchText:r,selected:je("selected",new d.KeySetImpl([...n?.values()??[]]),[n])};return ke.current?Object.assign(ke.current,o):ke.current=o,e(ke.current)}}),[je,e,ve,ye]),Re=(0,c.useCallback)((async e=>Pe({value:e??void 0,previousValue:k??void 0})),[Pe,k]);$!==G&&Y(G);Ve!==oe&&_e(oe);Ae!==H&&De(H);return{methods:ae,selectMultipleProps:{"aria-describedby":pe,collectionRenderer:xe,data:"error"!==he.status?he.data:null,isDisabled:m,isLoading:q,isReadonly:A,isRequired:P,isRequiredShown:P&&("compact"===w||fe),itemRenderer:h?we:void 0,itemText:g,label:E,labelEdge:S,labelStartWidth:b,messages:ce,onCommit:Pe,onFilter:Me,onLoadRange:ge,placeholder:_,textAlign:T,userAssistanceDensity:w,valueItems:X,virtualKeyboard:x},_selectItemsByValue:Re}}})),define("oj-c/select-multiple/select-multiple",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/UNSAFE_SelectMultiple","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","@oracle/oraclejet-preact/utils/UNSAFE_classNames","@oracle/oraclejet-preact/utils/UNSAFE_styles/FormControl","@oracle/oraclejet-preact/utils/UNSAFE_styles/Layout","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext","ojs/ojvcomponent","preact/compat","preact/hooks","./useSelectMultiplePreact","ojs/ojcontext","@oracle/oraclejet-preact/UNSAFE_TextField","@oracle/oraclejet-preact/hooks/UNSAFE_useComponentTheme","css!oj-c/select-multiple/select-multiple-styles.css"],(function(require,e,t,a,s,r,n,i,o,l,u,d,c,p,f,y,m,v,h,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectMultiple=void 0;const S={messages:"display"},E={instruction:""},b={definition:"",source:""},C=[];const V=(0,p.registerCustomElement)("oj-c-select-multiple",(0,f.forwardRef)((function({columnSpan:e=1,containerReadonly:a,data:i=null,disabled:f=!1,displayOptions:V=S,help:_=E,helpHints:A=b,id:D,labelWrapping:P,matchBy:M=null,messagesCustom:T=C,readonly:w,readonlyUserAssistanceShown:k="none",required:j=!1,textAlign:x,userAssistanceDensity:R,value:F=null,valueItems:U=null,virtualKeyboard:O="auto",...I},L){const N=(0,y.useRef)(),z=(0,y.useRef)(),q=(0,y.useCallback)((e=>N.current?v.getContext(N.current).getBusyContext().addBusyState({description:`oj-c-select-multiple id=${D}: ${e}`}):()=>{}),[D]),{containerProps:B,uadValue:K,readonlyValue:H}=(0,c.useMergedFormContext)({propContainerReadonly:a,propLabelWrapping:P,propReadonly:w,propUserAssistanceDensity:R,propTextAlign:x}),{selectMultipleProps:W,methods:G,_selectItemsByValue:$}=(0,m.useSelectMultiplePreact)({data:i,disabled:f,displayOptions:V,matchBy:M,messagesCustom:T,readonly:H,readonlyUserAssistanceShown:k,required:j,userAssistanceDensity:K,value:F,valueItems:U,virtualKeyboard:O,...I},q);(0,y.useImperativeHandle)(L,(()=>({blur:()=>z.current?.blur(),focus:()=>z.current?.focus(),_selectItemsByValue:$,UNSAFE_focusAndOpenDropdown:()=>{if(N.current){const e=N.current,t=()=>e.firstElementChild?.dispatchEvent(new MouseEvent("mousedown"));v.getContext(e).getBusyContext().whenReady().then(t)}},...G})),[G,$]);const Y=(0,d.useAssistiveText)({displayOptions:V,help:_,helpHints:A,userAssistanceDensity:W.userAssistanceDensity}),X=(0,n.useFormVariantContext)(),{classes:J}=(0,g.useComponentTheme)(h.TextFieldRedwoodTheme,{maxWidth:"md"===I.maxWidth||"sm"===I.maxWidth?I.maxWidth:"none",width:"md"===I.width||"sm"===I.width?I.width:"none"}),Q=(0,o.classNames)([u.layoutSpanStyles.layoutSpanColumn[e],X&&["embedded","legacyEmbedded"].includes(X)&&l.formControlStyles.embeddedRoot,B.isFormLayout&&"in-form-layout",J]),Z={style:{width:"md"===I.width||"sm"===I.width?void 0:I.width,maxWidth:"md"===I.maxWidth||"sm"===I.maxWidth?void 0:I.maxWidth}};return(0,t.jsx)(p.Root,{id:D,ref:N,class:Q,...Z,"data-oj-renders-label":!0,children:(0,t.jsx)(r.FormContext.Provider,{value:B,children:(0,t.jsx)(s.SelectMultiple,{ref:z,...Y,...W,columnSpan:e,variant:X})})})})),"SelectMultiple",{slots:{collectionTemplate:{data:{}},itemTemplate:{data:{}}},properties:{columnSpan:{type:"number"},containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},data:{type:"DataProvider|null"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},itemText:{type:"string|number|function"},labelEdge:{type:"string",enumValues:["none","start","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"number|string",binding:{consume:{name:"labelWidth"}}},labelWrapping:{type:"string",enumValues:["truncate","wrap"],binding:{consume:{name:"labelWrapping"}}},matchBy:{type:"Array<string>|null"},maxWidth:{type:"number|string"},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},readonlyUserAssistanceShown:{type:"string",enumValues:["none","confirmationAndInfoMessages"]},required:{type:"boolean"},requiredMessageDetail:{type:"string"},textAlign:{type:"string",enumValues:["end","start","right"]},userAssistanceDensity:{type:"string",enumValues:["compact","reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},value:{type:"object|null",writeback:!0},valueItems:{type:"object|null",writeback:!0},virtualKeyboard:{type:"string",enumValues:["number","search","auto","url","text","email","tel"]},width:{type:"number|string"},valid:{type:"string",enumValues:["pending","valid","invalidHidden","invalidShown"],readOnly:!0,writeback:!0}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItems"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{blur:{},focus:{},showMessages:{},reset:{},validate:{},_selectItemsByValue:{},UNSAFE_focusAndOpenDropdown:{}}},{columnSpan:1,data:null,disabled:!1,displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:""},matchBy:null,messagesCustom:[],readonlyUserAssistanceShown:"none",required:!1,value:null,valueItems:null,virtualKeyboard:"auto"},{"@oracle/oraclejet-preact":a.default},{consume:[r.FormContext,n.FormVariantContext,i.TabbableModeContext]});e.SelectMultiple=V})),define("oj-c/select-multiple",["require","exports","oj-c/select-multiple/select-multiple"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectMultiple=void 0,Object.defineProperty(e,"SelectMultiple",{enumerable:!0,get:function(){return t.SelectMultiple}})}));
//# sourceMappingURL=select-multiple.js.map