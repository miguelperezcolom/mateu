/**
 * @license
 * Copyright (c) 2014, 2025, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojlogger","ojs/ojhtmlutils","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","preact","preact/jsx-runtime","ojs/ojcontext","ojs/ojvcomponent","ojs/ojdataproviderhandler","ojs/ojpreact-managetabstops","ojs/ojbindpropagation","ojs/ojconfig","ojs/ojmetadatautils","ojs/ojcspexpressionevaluator-internal","ojs/ojmonitoring","ojs/ojexpparser"],function(e,t,r,s,o,a,n,i,l,p,u,c,d,h,_,y,E){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;class v extends a.Component{constructor(e){super(e),this._resolveConfig=e=>{this._registerBusyState(),e.then(t=>{e===this.props.config&&this.setState({view:this._getFragment(t?.view??[]),data:t?.data})}).finally(()=>{e===this.props.config&&this._resolveBusyState()})},this._getFragment=e=>{const t=new DocumentFragment;return e.forEach(e=>{t.appendChild(e.cloneNode(this))}),t},this._registerBusyState=()=>{if(!this._resolveBusyStateCallback){const e=this._busyContextEl?.current?this._busyContextEl?.current:this.props.componentElement;e&&(this._resolveBusyStateCallback=i.getContext(e).getBusyContext().addBusyState({description:`oj-bind-dom is waiting on config Promise resolution on element ${e.tagName}#${e.id}`}))}},this._resolveBusyState=()=>{this._resolveBusyStateCallback&&(this._resolveBusyStateCallback(),this._resolveBusyStateCallback=null)},this.state={view:null,data:null},this._busyContextEl=null}componentDidMount(){this._resolveConfig(this.props.config)}componentDidUpdate(e,t){this.props.config!==e.config&&this._resolveConfig(this.props.config)}render(){return n.jsx(a.Fragment,{children:n.jsx(l.ReportBusyContext.Consumer,{children:e=>(this._busyContextEl=e,this.state.view&&this.props.executeFragment?this.props.executeFragment(null,this.state.view,this.state.data,this.forceUpdate.bind(this),this.props.bindingProvider):null)})})}}class f extends a.Component{constructor(e){super(e),this._addBusyState=e=>{const t=this._busyContextEl?.current?this._busyContextEl?.current:this.props.componentElement;return i.getContext(t).getBusyContext().addBusyState({description:e})},this.BindForEachWithDP=p.withDataProvider(m,"data")}render(e){return Array.isArray(e.data)?n.jsx(P,{data:e.data,itemRenderer:e.itemRenderer}):n.jsx(l.ReportBusyContext.Consumer,{children:t=>(this._busyContextEl=t,n.jsx(this.BindForEachWithDP,{addBusyState:this._addBusyState,data:e.data,itemRenderer:e.itemRenderer}))})}}class m extends a.Component{render(e){const t=e.data.map(e=>e.data);return n.jsx(P,{data:t,itemRenderer:e.itemRenderer})}}class P extends a.Component{render(){const e=this.props.data;return n.jsx(a.Fragment,{children:e?e.map((e,t)=>this.props.itemRenderer({data:e,index:t,observableIndex:()=>t})):[]})}}const g=Symbol(),b=Symbol(),x=Symbol(),C=Symbol(),R=Symbol(),A=Symbol(),T=Symbol(),N=function(e){return e},L="$provided",j=[{type:E.IDENTIFIER,name:"$context"}],O=new Map,I=e=>e?.[_.PROXY_SYMBOL]??e;class w{constructor(){this._templateAstCache=new WeakMap,this._cspEvaluator=d.getExpressionEvaluator()??new _.CspExpressionEvaluatorInternal,this._expressionPaths=[]}static cleanupTemplateCache(e){e&&e._cachedRows&&(e._cachedRows.forEach(e=>e.dispose()),e._cachedRows=[])}executeFragment(e,t,r,o,a){let n=a;return n||(n=e?s.CustomElementUtils.getElementState(e)?.getBindingProvider():null),!r?.$provided||r.$provided instanceof Map||(r.$provided=new Map(Object.entries(r.$provided))),this._execute({[g]:n,[b]:e,[x]:t,[A]:r},t,r,o)}execute(e,t,r,s,o){const a=t.getAttribute("data-oj-as"),n=this._getContext(s,e,t,r,null,a);return this._execute({[g]:s,[b]:e,[x]:t,[C]:a,[A]:n},t,n,o)}_execute(e,t,r,s){const o=this._getAstViaCache(e,t),n=e[g];if(n){t._cachedRows||Object.defineProperties(t,{_cachedRows:{writable:!0,value:[]}});const e=n.__KoComputed(()=>{if(n.__KoIsInitial())return this._cspEvaluator.evaluate(o,{$context:r,$h:a.h,BindDom:v});w.cleanupTemplateCache(t),s()});return t._cachedRows.push(e),e()}return this._cspEvaluator.evaluate(o,{$context:r,$h:a.h,BindDom:v})}_createProxyForCurrentObj(e){const t=e?function e(t,r="",s){return new Proxy(t,{get(o,a){if(a===_.PROXY_SYMBOL)return t;const n=Boolean(r)?`${r}.${a}`:`${a}`,i=o[a];return s(n,i),i&&"object"==typeof i&&function(e,t){const r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.configurable&&!r.writable)}(o,a)?e(i,n,s):i}})}(e,"",(e,t)=>{const r=this._expressionPaths[this._expressionPaths.length-1];r&&e.startsWith(`${r.identifier}.`)&&this._expressionPaths.pop(),this._expressionPaths.push({identifier:e,value:t})}):e;return t}_getContext(e,r,s,o,a,n){const i=o&&"object"==typeof o?this._createProxyForCurrentObj(o):o;if(e){let o=e.__ContextFor(s);return o||(t.info(`Binding context not found when processing template for element with id: ${r.id}. Using binding context for element instead.`),o=e.__ContextFor(r)),e.__ExtendBindingContext(o,i,a,n,r)}const l={$current:i};return n&&(l[n]=i),l}_getAstViaCache(e,t){let s=this._templateAstCache.get(t);if(!s){if(11===t.nodeType)s=this._createAst(e,Array.from(t.childNodes));else{const o=r.getTemplateContent(t)[0];s=this._createAst(e,Array.from(o.childNodes))}this._templateAstCache.set(t,s)}return s}_createAst(e,t){const r={type:E.ARRAY_EXP,elements:[]};return r.elements=Array.prototype.reduce.call(t,(t,r)=>{const s=this._processSpecialNodes(e,r);return s?t.push(s):3===r.nodeType?t.push({type:E.LITERAL,value:r.nodeValue}):1===r.nodeType&&t.push(this._createElementNode(e,r)),t},[]),r}_processSpecialNodes(e,t){if(1===t.nodeType)switch(t.tagName.toLowerCase()){case"oj-bind-text":return this._createExpressionNode(e,t.getAttribute("value"));case"oj-bind-if":return this._createIfExpressionNode(e,t);case"oj-bind-for-each":return this._createBindForEachExpressionNode(e,t);case"oj-bind-dom":return this._createBindDomExpressionNode(e,t);case"oj-bind-template-slot":return this._createBindTemplateNode(e,t);case"oj-defer":return this._createDeferNode(e,t);case"oj-if":return this._createIfNode(e,t);case"template":return this._createTemplateWithRenderCallback(e,t)}return null}_createBindTemplateNode(e,t){const r={type:E.OBJECT_EXP,properties:[]},s=t.getAttribute("name")||"";r.properties.push(this._getAttribute(e,"name",s));const o=t.getAttribute("data");o&&r.properties.push(this._getAttribute(e,"data",o));const n=t.getAttribute("as");return this._createCallNodeWithContext((r,s)=>{const o=s.data,i=s.name,l=e[A].__oj_slots[i];let p=l&&l[l.length-1],u=!1;if(!p)for(let e in t.childNodes)if("TEMPLATE"===t.childNodes[e].nodeName){p=t.childNodes[e],u=!0;break}if(p&&p.render)return p.render(o);if(p){const t=this._getAstViaCache(e,p),r=p.getAttribute("data-oj-as"),s=this._getContext(e[g],u?e[b]:e[A].__oj_composite,p,o,u?n:null,r);return this._cspEvaluator.evaluate(t,{$context:s,$h:a.h,BindDom:v})}},[r])}_createTemplateWithRenderCallback(e,t){const r=t.getAttribute("data-oj-as"),s=this._getAstViaCache.bind(this),o=this._cspEvaluator,n={type:E.PROPERTY,key:{type:E.LITERAL,value:"render"},value:{type:E.LITERAL,value:(n,i)=>{const l=Object.assign({},e[A],{$current:n});if(r&&(l[r]=n),l.$provided&&i){const e=new Map([...l.$provided,...i]);l.$provided=e}else i&&(l.$provided=i);const p={[A]:l,[g]:e[g],[b]:e[b],[R]:e[R]},u=s(p,t);return o.evaluate(u,{$context:l,$h:a.h})}}};let i=this._getElementProps(e,t);return i.push(n),e[g]&&i.push({type:E.PROPERTY,key:{type:E.LITERAL,value:"data-oj-use-ko"},value:{type:E.LITERAL,value:""}}),this._createHFunctionCallNode("template",[{type:E.OBJECT_EXP,properties:i}])}_createDeferContent(e,t,r){const s={view:t,data:r},o={config:Promise.resolve(s),bindingProvider:e[g],executeFragment:this.executeFragment.bind(this)};return a.h(v,o)}_createDeferNode(e,t){let r,s=this._createDeferContent(e,[],{});const o=[{type:E.PROPERTY,key:{type:E.LITERAL,value:"ref"},value:{type:E.LITERAL,value:e=>{e?(r=e,a.render(s,r)):a.render(null,r)}}},{type:E.PROPERTY,key:{type:E.LITERAL,value:"_activateSubtree"},value:this._createCallNodeWithContext(r=>o=>{s=this._createDeferContent(e,Array.from(t.childNodes),r),a.render(s,o)})}];let n=this._getElementProps(e,t);return n=n.concat(o),this._createHFunctionCallNode("oj-defer",[{type:E.OBJECT_EXP,properties:n}])}_createIfExpressionNode(e,t){if(!t.hasAttribute("test"))throw new Error("Missing the required 'test' attribute on <oj-bind-if>");return{type:E.UNARY_EXP,operator:"...",argument:this._createIfTestNode(e,t)}}_createIfNode(e,t){if(!t.hasAttribute("test"))throw new Error("Missing the required 'test' attribute on <oj-if>");const r=this._getElementProps(e,t);return r.push(this._createPropertyNode(e,"style","display:contents;")),this._createHFunctionCallNode("oj-if",[{type:E.OBJECT_EXP,properties:r},this._createIfTestNode(e,t)])}_createIfTestNode(e,t){return{type:E.CONDITIONAL_EXP,test:this._createExpressionNode(e,t.getAttribute("test")),consequent:this._createAst(e,Array.from(t.childNodes)),alternate:{type:E.LITERAL,value:[]}}}_createBindForEachExpressionNode(e,t){const r=t.getElementsByTagName("template")[0];if(!r)throw new Error("Template not found: oj-bind-for-each requires a single template element as its direct child");return this._createComponentNode(e,t,f,[{type:E.PROPERTY,key:{type:E.LITERAL,value:"itemRenderer"},value:this._createNestedTemplateRendererNode(e,r)},{type:E.PROPERTY,key:{type:E.LITERAL,value:"componentElement"},value:{type:E.LITERAL,value:e[b]}}])}_createNestedTemplateRendererNode(e,t){const r=t.getAttribute("data-oj-as"),s={[g]:e[g],[A]:e[A],[b]:e[b],[x]:e[x],[C]:e[C],[R]:(e,t)=>"function"!=typeof t||"$current.observableIndex"!==e&&e!==`${r}.observableIndex`?t:t()},o=this._getAstViaCache(s,t);return this._createCallNodeWithContext(e=>t=>{const s=this._createProxyForCurrentObj(t),n={$current:s};null!=r&&(n[r]=s);const i=Object.assign({},e,n);return this._cspEvaluator.evaluate(o,{$context:i,$h:a.h})})}_createElementNode(e,t){const r=this._getElementProps(e,t),s=t.tagName,a=s.toLowerCase(),n=o.getMetadata(s),i=this._createPossiblyProvidedAndConsumedProperties(a,e,n,r),l=this._createHFunctionCallNode(a,[this._reorderProps(i),this._createAst(e,Array.from(t.childNodes))]);return t.hasAttribute("data-oj-manage-tabs")?this._createComponentNode(e,null,u.ManageTabStops,[{type:E.PROPERTY,key:{type:E.LITERAL,value:"children"},value:l}]):l}_reorderProps(e){const t=e.type==E.OBJECT_EXP?[e]:void 0,r=e.type==E.CALL_EXP;return this._createCallNodeWithContext((t,s)=>(e=>{if(!e.__oj_private_identifier_to_prop)return e;const{__oj_private_identifier_to_prop:t,__oj_private_identifier_to_value:r,...s}=e;return{__oj_private_identifier_to_prop:t,__oj_private_identifier_to_value:r,...s}})(r?this._cspEvaluator.evaluate(e,{$context:t,$h:a.h,BindDom:v}):s),t)}_createPossiblyProvidedAndConsumedProperties(e,t,r,o){const a={type:E.OBJECT_EXP,properties:o},n=c.getPropagationMetadataViaCache(e,r);if(!n)return a;const i=new Set;o.reduce((e,t)=>e.add(t.key.value),i);const l=[],p=this._getUnwrapObservable(t);for(const[e,t]of n){const r=t[1];r&&(e===c.CONSUMED_CONTEXT?l.push({type:E.PROPERTY,key:{type:E.LITERAL,value:"__oj_provided_contexts"},value:this._createCallNodeWithContext(e=>{let t;const s=p(e)?.[L];return r.forEach(e=>{s?.has(e)&&(t||(t=new Map),t.set(e,p(s.get(e))))}),t})}):i.has(e)||i.has(s.AttributeUtils.propertyNameToAttribute(e).toUpperCase())||l.push({type:E.PROPERTY,key:{type:E.LITERAL,value:e},value:this._createCallNodeWithContext(e=>{const t=p(e)?.[L];if(t)return p(t.get(r.name))})}))}const u=0===l.length?a:{type:E.OBJECT_EXP,properties:a.properties.concat(l)},d=r.properties;return this._createCallNodeWithContext((t,r)=>{let o,a=new Map;for(const[t,[i]]of n)i&&i.forEach(n=>{let i,l=!0;if(t===c.STATIC_PROPAGATION)l=!1;else if(r.hasOwnProperty(t))i=r[t];else{const o=s.AttributeUtils.propertyNameToAttribute(t),a=o.toUpperCase();if(r.hasOwnProperty(a)){i=r[a];const n=d?.[t]?.type;n&&null!=i&&(i=s.AttributeUtils.parseAttributeValue(e,o,i,n))}else l=!1}const p="default";if(l){const e=n.transform;i=e&&e.hasOwnProperty(i)?e[i]:i}else n.hasOwnProperty(p)&&(i=n[p],l=!0);l&&(o=!0,a.set(n.name,i))});if(o){const e=t[L];void 0!==e&&(a=new Map([...e,...a])),t[L]=a}return r},[u])}_createBindDomExpressionNode(e,t){if(!t.hasAttribute("config"))throw new Error("Missing the required 'config' attribute on <oj-bind-dom>");const r=t.attributes.config.value,s=[this._createPropertyNode(e,"config",r,e=>Promise.resolve(e)),{type:E.PROPERTY,key:{type:E.LITERAL,value:"bindingProvider"},value:{type:E.LITERAL,value:e[g]}},{type:E.PROPERTY,key:{type:E.LITERAL,value:"componentElement"},value:{type:E.LITERAL,value:e[b]}},{type:E.PROPERTY,key:{type:E.LITERAL,value:"executeFragment"},value:{type:E.LITERAL,value:this.executeFragment.bind(this)}}];return this._createHFunctionCallNode(v,[{type:E.OBJECT_EXP,properties:s}])}_createComponentNode(e,t,r,s){let o=t?this._getElementProps(e,t):[];return o=s?o.concat(s):o,this._createHFunctionCallNode(r,[{type:E.OBJECT_EXP,properties:o}])}_createPropertyNode(e,t,r,s){return{type:E.PROPERTY,key:{type:E.LITERAL,value:t},value:this._createExpressionNode(e,r,s)}}_postprocessClassNameValue(e){let t;return t=Array.isArray(e)?e.join(" "):"string"!=typeof e?Object.keys(e).reduce((t,r)=>(e[r]&&t.push(r),t),[]).join(" "):e,t}_getElementProps(e,t){let r;const a=[],n=[],i=new Map,l=new Map,p=new Map;let u=!1;const c=Array.prototype.reduce.call(t.attributes,(c,d)=>{let _=d.name;const y=d.value;if(_.startsWith(":")){_=_.substring(1);const t=_.split(".");2===t.length&&"style"===t[0]?a.push({k:t[1],v:y}):"style"===_?r=y:"class"===_?c.push(this._createPropertyNode(e,"className",y,this._postprocessClassNameValue)):(_=s.AttributeUtils.isGlobalOrData(_)?s.AttributeUtils.getGlobalPropForAttr(_):s.AttributeUtils.attributeToPropertyName(_),c.push(this._createPropertyNode(e,_,y)))}else{const r=s.AttributeUtils.getExpressionInfo(y);if(s.AttributeUtils.isEventListenerAttr(_))_=s.AttributeUtils.eventAttrToPreactPropertyName(_),l.set(_,y);else if(s.AttributeUtils.isGlobalOrData(_))c.push(this._createPropertyNode(e,s.AttributeUtils.getGlobalPropForAttr(_),y));else{const a=s.AttributeUtils.attributeToPropertyName(_),l=a.split("."),d=this._keepIdentifiers(t,l[0]);if(u=u||d,r.expr){const s=h.getPropertyMetadata(l[0],o.getPropertiesForElementTag(t.tagName));if(!s?.readOnly)if(l.length>1)n.push({subProps:a,expr:r.expr});else{const t=d?e=>{p.set(a,e)}:null;c.push({type:E.PROPERTY,key:{type:E.LITERAL,value:a},value:this._createExpressionEvaluator(e,r.expr,null,t)})}if(!r.downstreamOnly&&s?.writeback){let e=l;const t=e.shift();let s=i.get(t);if(s){s=[...s,{expr:r.expr,subProps:e}]}else s=[{expr:r.expr,subProps:e}];i.set(t,s)}}else if("o"===_[0]&&"n"===_[1])c.push({type:E.PROPERTY,key:{type:E.LITERAL,value:_.toUpperCase()},value:{type:E.LITERAL,value:y}});else{const r=this._getLiteralValueViaCache(e,t,_,a,y);l.length>1?n.push({subProps:a,expr:{type:E.LITERAL,value:r}}):c.push({type:E.PROPERTY,key:{type:E.LITERAL,value:a},value:{type:E.LITERAL,value:r}})}}}return c},[]);if(null!=r){if(a.length>0)throw new Error("Binding the entire style attribute as well as the individual style properties on the same element is not supported");c.push(this._createPropertyNode(e,"style",r))}else a.length>0&&c.push({type:E.PROPERTY,key:{type:E.LITERAL,value:"style"},value:{type:E.OBJECT_EXP,properties:a.map(t=>this._createPropertyNode(e,s.AttributeUtils.attributeToPropertyName(t.k),t.v))}});return n.length>0&&c.push(this._createRefPropertyNodeForNestedProps(e,n)),i.forEach((t,r)=>{const o=`on${r}Changed`,a=l.get(o);a&&l.delete(o),c.push(this._createWritebackPropertyNode(e,r,o,t,s.AttributeUtils.getExpressionInfo(a)?.expr))}),l.forEach((t,r)=>{const o=s.AttributeUtils.getExpressionInfo(t);o.expr&&c.push(this._createEventListenerPropertyNode(e,r,o.expr))}),u&&this._populateIdentifierProps(e,c,p),c}_getLiteralValueViaCache(e,t,r,a,n){const i=h.getPropertyMetadata(a,o.getPropertiesForElementTag(t.tagName));if(!i)return n;const l=e[x]?.id,p=l?JSON.stringify([l,a,n]):null;let u=p?O.get(p):null;return u||(u=s.CustomElementUtils.parseAttrValue(t,r,a,n,i),p&&("object"==typeof u||Array.isArray(u))&&O.set(p,u)),u}_createRefPropertyNodeForNestedProps(e,t){const r=t.map(({subProps:t,expr:r})=>({type:E.OBJECT_EXP,properties:[{type:E.PROPERTY,key:{type:E.LITERAL,value:t},value:r.type===E.LITERAL?{type:E.LITERAL,value:r.value}:this._createExpressionEvaluator(e,r)}]})),s={type:E.ARRAY_EXP,elements:r},o=w._nestedPropsRefCallback;return{type:E.PROPERTY,key:{type:E.LITERAL,value:"ref"},value:this._createCallNodeWithContext(Function.prototype.bind.bind(o,e[g]),[s])}}static _nestedPropsRefCallback(e,t,r){if(r&&r.setProperties){const e=w._getPreviousNestedPropValues(r),s=t.filter(t=>{const r=Object.keys(t)[0],s=t[r];return e?.[r]!==s}),o=Object.assign({},...s);w._setUpdatedNestedPropValues(r,o),r.setProperties(o)}}static _getPreviousNestedPropValues(e){return e[T]}static _setUpdatedNestedPropValues(e,t){let r=e[T];r||(r={},e[T]=r),Object.assign(r,t)}_createWritebackPropertyNode(e,t,r,s,o){const a=[];let n;return{type:E.PROPERTY,key:{type:E.LITERAL,value:r},value:this._createCallNodeWithContext(r=>i=>{s.forEach((s,o)=>{let n=i.detail.value;var l=s.subProps,p=s.expr;l.length>0&&"object"==typeof n&&(n=l.reduce((e,t)=>e[t],n));let u=a[o];u||(u=this._cspEvaluator.createEvaluator(p).evaluate,a.push(u));const c=u([r,r.$data]);let d;if(e[g]&&e[g].__IsObservable(c))d=c;else{const e=this._getPropertyWriterExpression(p);if(null!==e){const t=this._cspEvaluator.createEvaluator(e).evaluate;d=this._getWriter(t([r.$data||{},r]))}}y.performMonitoredWriteback(t,d,i,n)}),o&&!n&&(n=this._cspEvaluator.createEvaluator(o).evaluate);const l=n?n([r,r.$data]):null;l&&l(i,I(r.$current)||r.$data,r)})}}_createEventListenerPropertyNode(e,t,r){let s;return{type:E.PROPERTY,key:{type:E.LITERAL,value:t},value:this._createCallNodeWithContext(t=>o=>{s||(s=this._cspEvaluator.createEvaluator(r).evaluate);const a=((e,t)=>{if(!e.$current)return e;const r=I(e.$current),s=Object.defineProperties({},Object.getOwnPropertyDescriptors(e));return s.$current=r,t&&(s[t]=r),s})(t,e[C]),n=s([a,a.$data]);n&&n(o,a.$current||a.$data,a)})}}_createExpressionNode(e,t,r){const o=s.AttributeUtils.getExpressionInfo(t);return o.expr?this._createExpressionEvaluator(e,o.expr,r):{type:E.LITERAL,value:t}}_createExpressionEvaluator(e,t,r,s){const o=this._cspEvaluator.createEvaluator(t).evaluate;return this._createCallNodeWithContext(a=>{this._expressionPaths=[];const n=this._getUnwrapObservable(e),i=n(a);let l=n(o([i,i.$data]));return e[R]&&(l=e[R](t,l)),s&&s(this._expressionPaths.map(e=>({identifier:`$current.${e.identifier}`,value:e.value}))),this._expressionPaths=null,r?r(l):l})}_keepIdentifiers(e,t){if(!o.isElementRegistered(e.tagName))return!1;const r=h.getPropertyMetadata(t,o.getPropertiesForElementTag(e.tagName));if(!r)return!1;const a=s.ElementUtils.getSupportedTypes(r.type);return!!(a.object||a.array||a.other||a.any)}_populateIdentifierProps(e,t,r){t.push({type:E.PROPERTY,key:{type:E.LITERAL,value:"__oj_private_identifier_to_prop"},value:this._createCallNodeWithContext(()=>Object.fromEntries(function(e){const t=new Map;return e.forEach((e,r)=>{e.forEach(({identifier:e})=>{t.has(e)||t.set(e,[]),t.get(e).push(r)})}),t}(r)))}),t.push({type:E.PROPERTY,key:{type:E.LITERAL,value:"__oj_private_identifier_to_value"},value:this._createCallNodeWithContext(t=>{const s={},o=new Set;return r.forEach(t=>{t.forEach(({identifier:t,value:r})=>{if(!o.has(t)){const a=this._getUnwrapObservable(e);s[t]=a(r),o.add(t)}})}),s})})}_getUnwrapObservable(e){const t=e[g];return t?t.__UnwrapObservable:N}_createCallNodeWithContext(e,t){return{type:E.CALL_EXP,callee:{type:E.LITERAL,value:e},arguments:t?j.concat(t):j}}_createHFunctionCallNode(e,t){return{type:E.CALL_EXP,callee:{type:E.IDENTIFIER,name:"$h"},arguments:[{type:E.LITERAL,value:e},...t]}}_getAttribute(e,t,r){const o=s.AttributeUtils.getExpressionInfo(r).expr;return{type:E.PROPERTY,key:{type:E.LITERAL,value:t},value:o?this._createExpressionEvaluator(e,o):{type:E.LITERAL,value:r}}}_getWriter(e){return e._ko_property_writers}_getPropertyWriterExpression(e){if(null==e||["true","false","null","undefined"].indexOf(e)>=0)return null;const t=(e=e.trim()).match(/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i);if(null===t)return null;return`{_ko_property_writers: function(v){${t[1]?`Object(${t[1]})${t[2]}`:e}=v;}}`}}const $=new w,k=$.executeFragment.bind($),B=$.execute.bind($),F=w.cleanupTemplateCache;e.cleanupTemplateCache=F,e.execute=B,e.executeFragment=k,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojvcomponent-template.js.map