define(['exports', 'preact/jsx-runtime', 'preact/hooks', './positionUtils-6e4daa31', './Floating-366a30f8', './Layer-dc3c1ac9', 'preact/compat', './LayerHost-7d4aa6d3', './tabbableUtils-9101c0e5', './clientHints-6d361eaa', './useAnimation-5a74955f', './animationUtils-716a9aa6', './useUser-988f7da2', './useTestId-a2e433c2', './useBreakpointValues-3a067093', './useResizeObserver-25032462', './useComponentTheme-5aa41a8f', './classNames-08d99695', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutTheme', './useFloating-0df4b3d3', './refUtils-77e97004', './useOutsideClick-9c4ceb18', './arrayUtils-6ee96a35', './useModal-536cb7ff', './utils-ad4761c9', './themeContract.css-2e4b066d', './colorUtils-b9dc1bd1', './_curry1-df649359', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', 'css!./FloatingStyles.styles.css', './UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingVariants.css', './vanilla-extract-recipes-createRuntimeFn.esm-d881c69a', './vanilla-extract-dynamic.esm-6065bbd7', './UNSAFE_Floating/themes/FloatingContract.css', './useUnsafeDomElementRef-75afb461', './unsafeDomAccess-602c5dde', './UNSAFE_Layer/themes/LayerStyles.css', 'css!./LayerStyles.styles.css', './useThemeInterpolations-1dff2f9d', './useColorScheme-f2a81610', './useScale-5d246769', './theme-a8f3d819', './Theme-d945adae', './mergeInterpolations-9ede4cf7', './mergeDeepWithKey-aaab9019', './_curry3-83878f86', './_curry2-86c52b86', './_isObject-42bafc94', './useDensity-bee3cef4', './index-f7ad24df', 'preact', './UNSAFE_Layer/themes/LayerHostStyles.css', 'css!./LayerHostStyles.styles.css', './head-9cb1a3da', './_arity-5a5f5f71', './_isArray-32602db6', './_isString-d0ada3cb', './useBreakpoints-52d11a72', './useAddBusyState-8ed5cc58', './BusyStateContext-ab2c549a', './useBusyStateContext-26bb2acb', './logger-0f873e29', './UNSAFE_DrawerLayout/themes/DrawerLayoutStyles.css', 'css!./DrawerLayoutStyles.styles.css', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutBaseTheme.css', 'module', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutVariants.css'], (function(e,t,s,r,a,n,c,o,i,l,u,d,f,h,m,y,p,b,w,g,A,D,R,S,v,E,L,O,x,C,k,N,U,F,_,T,H,I,B,j,z,G,V,W,X,M,P,Y,K,$,q,J,Q,Z,ee,te,se,re,ae,ne,ce,oe,ie,le,ue,de,fe,he,me,ye){"use strict";e.DrawerLayout=({children:e,startDrawer:c,endDrawer:o,bottomDrawer:g,isStartOpen:A=!1,isEndOpen:D=!1,isBottomOpen:R=!1,startDisplay:S,endDisplay:v,bottomDisplay:E,onClose:L,onTransitionEnd:O,testId:x})=>{const C="0px",k="start",N="end",U="bottom",F="initial",_="opening",T="closing",H="unmounted",I="full-overlay",B="overlay",j="reflow",z="hidden",G="visible",[V,W]=s.useState(A?F:H),[X,M]=s.useState(D?F:H),[P,Y]=s.useState(R?F:H),[K,$]=s.useState(z),[q,J]=s.useState(z),[Q,Z]=s.useState(z),[ee,te]=s.useState(),[se,re]=s.useState(),[ae,ne]=s.useState(),ce=m.useBreakpointValues({sm:I,md:B,lg:j}),[oe,ie]=s.useState(ce),[le,ue]=s.useState(ce),de=s.useRef(null),fe=s.useRef(null),he=s.useRef(null),me=s.useRef(null),ye=s.useRef(null),pe=s.useRef(null),be=s.useRef(null),we=s.useRef(null),ge=s.useRef(null),Ae=s.useRef(null),De=s.useRef(null),Re=s.useRef(null),[Se,ve]=s.useState(null),[Ee,Le]=s.useState(null),[Oe,xe]=s.useState(null),Ce=s.useCallback((e=>Me(e).current),[]),ke=s.useCallback((()=>{const e=Ce(k),t=Ce(N),s=Ce(U),r=i.getActiveElement();return e&&e.contains(r)?k:t&&t.contains(r)?N:s&&s.contains(r)?U:null}),[Ce]),Ne=s.useCallback((()=>{if(A||D||R){const e=ke();if(e){pe.current=e;const t=i.allTabbableElements(Me(pe.current).current,!0);be.current=t.indexOf(i.getActiveElement())}}}),[ke,A,R,D]),Ue=s.useCallback((e=>{let t=!1;switch(e){case k:t=A;break;case N:t=D;break;case U:t=R}return t}),[A,D,R]);s.useEffect((()=>{const e=pe.current;if(e){const t=Me(e);if(t.current&&Ue(e)){const e=i.allTabbableElements(t.current,!0);null!=be.current&&e.length>be.current?i.focusOn(e[be.current]):i.focusWithin(t.current),pe.current=null,be.current=null}}}),[Se,Ee,Oe,Ue]),s.useEffect((()=>{Ne(),setTimeout((()=>{ie(ce)}),0)}),[ce,Ne]);const Fe=e=>e?Math.round(e.offsetHeight):0,_e=s.useCallback((e=>`${Fe(e)}px`),[]),Te=s.useCallback((e=>e?Math.round(e.getBoundingClientRect().width):0),[]),He=s.useCallback((e=>`${Te(e)}px`),[Te]),{direction:Ie}=f.useUser(),Be="ltr"===Ie,je=s.useCallback((e=>r.normalizePosition(e,Ie)),[Ie]),ze=e=>[k,N].indexOf(e)>-1,Ge=e=>e===U,Ve=e=>[_,T].indexOf(e)>-1,We=e=>{switch(e){case k:return Ve(V);case N:return Ve(X);case U:return Ve(P)}},Xe=(e,t)=>{switch(e){case k:return $(t);case N:return J(t);case U:return Z(t)}},Me=e=>{switch(e){case k:return he;case N:return me;case U:return ye}},Pe=e=>{switch(e){case k:return tt;case N:return st;case U:return rt}},Ye=e=>{switch(e){case k:return V;case N:return X;case U:return P}},Ke=(e,t)=>{switch(e){case k:W(t);break;case N:M(t);break;case U:Y(t)}},$e=e=>{switch(e){case k:tt(null);break;case N:st(null);break;case U:rt(null)}},qe=s.useCallback((e=>{switch(e){case k:return S;case N:return v;case U:return E}}),[S,v,E]),Je=s.useCallback((e=>{const t=qe(e);return t||(ze(e)?oe:le)}),[qe,oe,le]),Qe=e=>({expandVertically:{from:{maxHeight:C},to:{maxHeight:"100%"},options:{duration:d.DURATION_LARGE}},collapseVertically:{from:{maxHeight:"100%"},to:{maxHeight:C},options:{duration:d.DURATION_LARGE}},expandHorizontally:()=>({from:{maxWidth:C},to:{maxWidth:He(e.current)},options:{duration:d.DURATION_LARGE}}),collapseHorizontally:()=>({from:{maxWidth:He(e.current)},to:{maxWidth:C},options:{duration:d.DURATION_LARGE}}),slideUp:{from:{translateY:"100%"},to:{translateY:C},options:{duration:d.DURATION_LARGE}},slideDown:{from:{translateY:C},to:{translateY:"100%"},options:{duration:d.DURATION_LARGE}},slideOpenLeft:{from:{translateX:"-100%"},to:{translateX:C},options:{duration:d.DURATION_LARGE}},slideCloseLeft:{from:{translateX:"0"},to:{translateX:"-100%"},options:{duration:d.DURATION_LARGE}},slideOpenRight:{from:{translateX:"100%"},to:{translateX:C},options:{duration:d.DURATION_LARGE}},slideCloseRight:{from:{translateX:"0"},to:{translateX:"100%"},options:{duration:d.DURATION_LARGE}}}),Ze=e=>{Me(e).current?.contains(Re.current)&&i.focusOnElementOrNearestAncestor((e=>{switch(e){case k:return ge;case N:return Ae;case U:return De}})(e).current)};function et(e,t){const s=Ue(e),r=Ye(e);return u.useAnimation((e=>{const t=Ge(e),s=Ye(e);return Je(e)===j?t?"opening"===s?"expandVertically":"closing"===s?"collapseVertically":"":"opening"===s?"expandHorizontally":"closing"===s?"collapseHorizontally":"":t?"opening"===s?"slideUp":"closing"===s?"slideDown":"":"opening"===s?"left"===je(e)?"slideOpenLeft":"slideOpenRight":"closing"===s?"left"===je(e)?"slideCloseLeft":"slideCloseRight":""})(e),{animationStates:Qe(t),isAnimatedOnMount:!0,onAnimationEnd:()=>{r===_?(yt(e)&&(e=>{const t=Me(e),s=i.getAutofocusFocusables(t.current);s.length>0?i.focusOn(s[0]):i.focusWithin(t.current)})(e),(e=>{Me(e).current.removeAttribute("style")})(e),$e(e),Ke(e,"open"),O?.({placement:e,value:!0})):s||(yt(e)&&Ze(e),$e(e),Xe(e,z),Ke(e,H),O?.({placement:e,value:!1}))}}).nodeRef}const tt=et(k,he),st=et(N,me),rt=et(U,ye),at=h.useTestId(x),nt=e=>{const t=i.getActiveElement();switch(e){case k:ge.current=t;break;case N:Ae.current=t;break;case U:De.current=t}};function ct(e){const t=Ue(e),r=Ye(e);s.useEffect((()=>{if(r!==H||t)if(r===H&&t)Ke(e,F);else{if(r===F&&t&&yt(e)){const t=Me(e);return Pe(e)(t.current),void Ke(e,_)}if(r===_&&t&&yt(e))return Xe(e,G),void nt(e);if(!t){const t=Me(e);Pe(e)(t.current),Re.current=i.getActiveElement(),Ke(e,T)}}}),[t,r,e]),s.useLayoutEffect((()=>{if(r===F&&t&&!yt(e)){const t=Me(e);return Pe(e)(t.current),void Ke(e,_)}if(r===_&&t&&!yt(e))return Xe(e,G),void nt(e)}),[r,t,e])}ct(k),ct(N),ct(U);const ot=e=>{ut(k,e)},it=e=>{ut(N,e)},lt=e=>{ut(U,e)},ut=(e,t)=>{"Escape"===t.code&&yt(e)&&L?.({placement:e,reason:"escapeKey"})},{classes:dt,styles:ft}=p.useComponentTheme(w.DrawerLayoutRedwoodTheme),ht=e=>e===z?ft.visibilityHidden:ft.visibilityVisible,mt=()=>ce===I,yt=s.useCallback((e=>[I,B].indexOf(Je(e))>-1),[Je]),pt=e=>Je(e)===I,bt=e=>{const t=(e=>{switch(e){case k:return K;case N:return q;case U:return Q}})(e),s=[ht(t)];yt(e)?(s.push(ft.overlayDrawer),ze(e)&&!pt(e)&&s.push(ft.overlaySideDrawerNonFullWidth),mt()&&ze(e)&&s.push(ft.stretchedOverlaySideDrawer)):s.push(ft.reflowDrawer),We(e)&&s.push(ft.animatedDrawer);return s.push((e=>{switch(e){case k:return yt(k)?Be?ft.overlayDrawerLeft:ft.overlayDrawerRight:Be?ft.reflowDrawerLeft:ft.reflowDrawerRight;case N:return yt(N)?Be?ft.overlayDrawerRight:ft.overlayDrawerLeft:Be?ft.reflowDrawerRight:ft.reflowDrawerLeft;case U:return yt(U)?ft.overlayDrawerBottom:ft.reflowDrawerBottom}})(e)),b.classNames(s)},wt=e=>{switch(e){case k:return c;case N:return o;case U:return g}},gt=e=>{switch(e){case k:return ot;case N:return it;case U:return lt}},At=e=>{if(mt()&&ze(e)){const s=[ft.stretchedOverlaySideDrawerClippingArea];switch(e){case k:s.push(Be?ft.stretchedOverlaySideDrawerClippingAreaLeft:ft.stretchedOverlaySideDrawerClippingAreaRight);break;case N:s.push(Be?ft.stretchedOverlaySideDrawerClippingAreaRight:ft.stretchedOverlaySideDrawerClippingAreaLeft)}return t.jsx("div",{ref:we,className:b.classNames(s),children:Dt(e)})}return Dt(e)},Dt=e=>t.jsx("div",{ref:Me(e),className:bt(e),tabIndex:yt(e)?-1:void 0,onKeyDown:gt(e),children:wt(e)}),Rt=l.getClientHints(),St=s.useCallback((()=>"ios"===Rt.platform?document.documentElement.clientHeight:window.innerHeight),[Rt.platform]),vt=e=>{setTimeout((()=>{e()}),0)},Et=s.useCallback((()=>{St()>=600?le!=j&&(Ne(),ue(j)):le!=B&&(Ne(),ue(B))}),[le,St,Ne]),Lt=s.useCallback((()=>{vt(Et)}),[Et]);s.useEffect((()=>{const e=new ResizeObserver((()=>{Lt()}));return e.observe(document.body),()=>{e.unobserve(document.body)}}),[Lt]);const Ot=e=>{switch(e){case k:return ee;case N:return se;case U:return ae}},xt=s.useCallback((e=>{const t=_e(fe.current),s=Me(e).current;s&&!mt()&&Ue(e)&&yt(e)&&(s.style.height=t)}),[_e,Ue,yt,mt]),Ct=s.useCallback((()=>{const e=ye.current;if(e&&Ue(U)&&yt(U)){const t=He(fe.current);e.style.width=t}}),[He,Ue,yt]);s.useEffect((()=>{["start","end"].forEach((e=>{if(Ue(e)&&mt()){Ce(e)?.style.removeProperty("height");const t=Ce(e)?.parentNode;t?.style.removeProperty("height")}}))}),[Ue,Ce,Te,mt]);const kt=e=>{ze(e)&&(xt(e),(e=>{const t=Me(e).current;if(t&&Ue(e)){const s=t.style;pt(e)?s.width=He(de.current):s.removeProperty("width")}})(e)),Ge(e)&&Ct()},Nt=s.useCallback((()=>{mt()||(xt(k),xt(N)),Ct()}),[xt,Ct,mt]);y.useResizeObserver(de,(()=>{vt(Nt)}));const Ut=e=>{if(yt(e)){const t=(e=>{const t=Ce(e);return t?ze(e)?-Te(t):-Fe(t):0})(e);switch(e){case k:te(mt()?0:t);break;case N:re(mt()?t-20:t);break;case U:ne(t)}}},Ft=()=>{Ut(k),Ct()};y.useResizeObserver(he,(()=>{vt(Ft)}));const _t=()=>{Ut(N),Ct()};y.useResizeObserver(me,(()=>{vt(_t)}));const Tt=()=>{Ut(U)};y.useResizeObserver(ye,(()=>{vt(Tt)}));const Ht=e=>{const t=Je(e);if((e=>{switch(e){case k:return Se;case N:return Ee;case U:return Oe}})(e)!=t){switch(e){case k:ve(t);break;case N:Le(t);break;case U:xe(t)}Ne()}},It=e=>Ye(e)!==H?(e=>{const s={mainAxis:!1,crossAxis:!1},r={mainAxis:!1,crossAxis:!1};return Ht(e),yt(e)?(kt(e),Ot(e)||Ut(e),t.jsx("div",{children:t.jsx(n.Layer,{children:t.jsx(a.Floating,{anchorRef:e===U?fe:de,placement:e,class:We(e)?ft.floating:"",strategy:mt()&&ze(e)?"fixed":"absolute",offsetValue:Ot(e),flipOptions:r,shiftOptions:s,children:At(e)})})})):Dt(e)})(e):null;return t.jsxs("div",{ref:de,className:dt,...at,children:[It(k),t.jsxs("div",{ref:fe,className:ft.centerSection,children:[t.jsx("div",{className:ft.mainContent,children:e}),It(U)]}),It(N)]})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_DrawerLayout.js.map
