{"version":3,"file":"RadioItem-e0bf1ae8.js","sources":["../../src/UNSAFE_RadioItem/RadioItem.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { createRef, useEffect, useRef } from 'preact/compat';\n\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { useFocus } from '../hooks/UNSAFE_useFocus';\nimport { useFormContext } from '../hooks/UNSAFE_useFormContext';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { useId } from '../hooks/UNSAFE_useId';\nimport { useTabbableMode } from '../hooks/UNSAFE_useTabbableMode';\nimport { useInteractionStyle } from '../hooks/UNSAFE_useInteractionStyle';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { useCheckboxRadioContext } from '../PRIVATE_CheckboxRadioField/CheckboxRadioContext';\nimport { CheckIcon } from '../PRIVATE_ThemedIcons/CheckIcon';\nimport { RadioOffIcon } from '../PRIVATE_ThemedIcons/RadioOffIcon';\nimport { RadioOnIcon } from '../PRIVATE_ThemedIcons/RadioOnIcon';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { useRadioSetContext } from '../UNSAFE_RadioSet/RadioSetContext';\nimport { BundleType } from '../resources/nls/bundle';\n\nimport { IconUserAssistance } from '../UNSAFE_UserAssistance';\nimport { radioIconVars } from './themes/RadioIconContract.css';\nimport { RadioIconRedwoodTheme } from './themes/redwood/RadioIconTheme';\nimport { RadioRedwoodTheme } from './themes/redwood/RadioTheme';\nimport { useRadioItemContext } from './RadioItemContext';\n\ntype Props = {\n  /**\n   * Text to provide guidance to help the user understand what data to enter.\n   */\n  assistiveText?: string;\n  /**\n   * Text that describes the radio button value.\n   */\n  children: string;\n  /**\n   * Help source URL associated with the component.\n   */\n  helpSourceLink?: string;\n  /**\n   * Custom text to be rendered for the `helpSourceLink`.\n   */\n  helpSourceText?: string;\n  /**\n   * Value of the radio button.\n   */\n  value: string | number;\n};\n/**\n * RadioItem is an input element of type radio.\n */\nexport const RadioItem = ({ value, children, ...assistanceProps }: Props) => {\n  const { isReadonly: isFormReadonly, isDisabled: isFormDisabled } = useFormContext();\n  const { isDisabled: isFieldDisabled, isReadonly: isFieldReadonly } = useFormFieldContext();\n  const { name, value: groupValue, onCommit } = useRadioSetContext();\n  const { isFocusRingShown } = useCheckboxRadioContext();\n  const { index } = useRadioItemContext();\n  const { isTabbable } = useTabbableMode();\n  const id = useId();\n  const { isFocus, focusProps } = useFocus();\n  const labelRef = createRef<HTMLLabelElement>();\n  const isSelected = groupValue === value;\n  const isDisabled = isFieldDisabled ?? isFormDisabled;\n  const isReadonly = isFieldReadonly ?? isFormReadonly;\n  const { interactionProps, applyActiveStyle } = useInteractionStyle();\n\n  const {\n    classes: radioClasses,\n    styles: { valueLabelStyle }\n  } = useComponentTheme(RadioRedwoodTheme, {\n    disabled: isDisabled ? 'isDisabled' : 'notDisabled',\n    focused: isFocus && isFocusRingShown ? 'isFocused' : ''\n  });\n\n  const { classes: radioIconClasses } = useComponentTheme(RadioIconRedwoodTheme, {\n    disabled: isDisabled ? 'isDisabled' : 'notDisabled',\n    selected: isSelected ? 'isSelected' : 'notSelected',\n    readonly: isReadonly ? 'isReadonly' : 'notReadonly',\n    active: applyActiveStyle ? 'isActive' : 'notActive'\n  });\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // JET-70100 - ensure radio button is scrolled into view when focused and focus ring is shown\n  useEffect(() => {\n    const isActiveElement = document.activeElement === inputRef?.current;\n    if (!isActiveElement && isFocus && isFocusRingShown) {\n      labelRef?.current?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [isFocus, isFocusRingShown, labelRef]);\n\n  const { assistiveText, helpSourceLink } = assistanceProps;\n  const hasUserAssistive = !isDisabled && !isReadonly && !!(assistiveText || helpSourceLink);\n  const helpAvailableId = hasUserAssistive ? `${id}-help-available` : undefined;\n  const uaId = hasUserAssistive ? `${id}-icon-ua` : undefined;\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const helpAvailableString = translations.formControl_helpAvailable();\n\n  const IconComp = isReadonly\n    ? isSelected\n      ? CheckIcon\n      : RadioOffIcon\n    : isSelected\n    ? RadioOnIcon\n    : RadioOffIcon;\n\n  const tabIndex = isTabbable !== false && ((index === 0 && !groupValue) || isSelected) ? 0 : -1;\n\n  return (\n    <div>\n      <label class={radioClasses} ref={labelRef}>\n        <HiddenAccessible>\n          <input\n            type=\"radio\"\n            name={name}\n            id={id}\n            ref={inputRef}\n            value={value}\n            {...(!isReadonly &&\n              !isDisabled && {\n                onChange: (e) => {\n                  e.stopPropagation();\n                  onCommit?.({ previousValue: groupValue, value });\n                }\n              })}\n            checked={isSelected}\n            disabled={isDisabled}\n            aria-describedby={helpAvailableId}\n            tabIndex={tabIndex}\n            {...focusProps}\n          />\n          {hasUserAssistive && (\n            <HiddenAccessible id={helpAvailableId} isHidden={true}>\n              {helpAvailableString}\n            </HiddenAccessible>\n          )}\n        </HiddenAccessible>\n        <span aria-hidden=\"true\" class={radioIconClasses} {...interactionProps}>\n          <IconComp size={radioIconVars.iconSize} color=\"currentColor\" />\n        </span>\n        <span class={valueLabelStyle}>\n          <span {...interactionProps}>{children}</span>\n          {hasUserAssistive && (\n            <IconUserAssistance\n              {...assistanceProps}\n              isTabbable={isTabbable && isFocus}\n              id={uaId as string}\n            />\n          )}\n        </span>\n      </label>\n    </div>\n  );\n};\n"],"names":["value","children","assistanceProps","isReadonly","isFormReadonly","isDisabled","isFormDisabled","useFormContext","isFieldDisabled","isFieldReadonly","useFormFieldContext","name","groupValue","onCommit","useRadioSetContext","isFocusRingShown","useCheckboxRadioContext","index","useRadioItemContext","isTabbable","useTabbableMode","id","useId","isFocus","focusProps","useFocus","labelRef","createRef","isSelected","interactionProps","applyActiveStyle","useInteractionStyle","classes","radioClasses","styles","valueLabelStyle","useComponentTheme","RadioRedwoodTheme","disabled","focused","radioIconClasses","RadioIconRedwoodTheme","selected","readonly","active","inputRef","useRef","useEffect","document","activeElement","current","scrollIntoView","block","assistiveText","helpSourceLink","hasUserAssistive","helpAvailableId","undefined","uaId","helpAvailableString","useTranslationBundle","formControl_helpAvailable","IconComp","CheckIcon","SvgCheck","RadioOffIcon","SvgRadioButtonOff","RadioOnIcon","SvgRadioButtonOn","tabIndex","_jsx","jsx","_jsxs","class","ref","HiddenAccessible","type","onChange","e","stopPropagation","previousValue","checked","isHidden","size","radioIconVars","iconSize","color","IconUserAssistance"],"mappings":"8jEAwDyB,EAAGA,QAAOC,cAAaC,MAC9C,MAAQC,WAAYC,EAAgBC,WAAYC,GAAmBC,EAAAA,kBAC3DF,WAAYG,EAAiBL,WAAYM,GAAoBC,EAAAA,uBAC/DC,KAAEA,EAAMX,MAAOY,EAAUC,SAAEA,GAAaC,EAAAA,sBACxCC,iBAAEA,GAAqBC,EAAAA,2BACvBC,MAAEA,GAAUC,EAAAA,uBACZC,WAAEA,GAAeC,EAAAA,kBACjBC,EAAKC,EAAAA,SACLC,QAAEA,EAAOC,WAAEA,GAAeC,EAAQA,WAClCC,EAAWC,EAAAA,YACXC,EAAahB,IAAeZ,EAC5BK,EAAaG,GAAmBF,EAChCH,EAAaM,GAAmBL,GAChCyB,iBAAEA,EAAgBC,iBAAEA,GAAqBC,EAAmBA,uBAGhEC,QAASC,EACTC,QAAQC,gBAAEA,IACRC,EAAiBA,kBAACC,oBAAmB,CACvCC,SAAUjC,EAAa,aAAe,cACtCkC,QAAShB,GAAWR,EAAmB,YAAc,MAG/CiB,QAASQ,GAAqBJ,EAAAA,kBAAkBK,EAAAA,sBAAuB,CAC7EH,SAAUjC,EAAa,aAAe,cACtCqC,SAAUd,EAAa,aAAe,cACtCe,SAAUxC,EAAa,aAAe,cACtCyC,OAAQd,EAAmB,WAAa,cAGpCe,EAAWC,SAAyB,MAG1CC,EAAAA,WAAU,OACgBC,SAASC,gBAAkBJ,GAAUK,UACrC3B,GAAWR,GACjCW,GAAUwB,SAASC,eAAe,CAAEC,MAAO,WAC5C,GACA,CAAC7B,EAASR,EAAkBW,IAE/B,MAAM2B,cAAEA,EAAaC,eAAEA,GAAmBpD,EACpCqD,IAAoBlD,GAAeF,IAAiBkD,IAAiBC,GACrEE,EAAkBD,EAAmB,GAAGlC,wBAAsBoC,EAC9DC,EAAOH,EAAmB,GAAGlC,iBAAeoC,EAE5CE,EADeC,uBAAiC,4BACbC,4BAEnCC,EAAW3D,EACbyB,EACEmC,EAASC,SACTC,EAAYC,kBACdtC,EACAuC,EAAWC,iBACXH,oBAEEI,GAA0B,IAAflD,IAAoC,IAAVF,IAAgBL,GAAegB,GAAc,GAAK,EAE7F,OACE0C,EACEC,IAAA,MAAA,CAAAtE,SAAAuE,EAAAA,KAAA,QAAA,CAAOC,MAAOxC,EAAcyC,IAAKhD,YAC/B8C,EAAAA,KAACG,EAAAA,iBACC,CAAA1E,SAAA,CAAAqE,EAAAA,IAAA,QAAA,CACEM,KAAK,QACLjE,KAAMA,EACNU,GAAIA,EACJqD,IAAK7B,EACL7C,MAAOA,MACDG,IACHE,GAAc,CACbwE,SAAWC,IACTA,EAAEC,kBACFlE,IAAW,CAAEmE,cAAepE,EAAYZ,SAAQ,GAGtDiF,QAASrD,EACTU,SAAUjC,EACQ,mBAAAmD,EAClBa,SAAUA,KACN7C,IAEL+B,GACCe,EAAAC,IAACI,EAAgBA,iBAAC,CAAAtD,GAAImC,EAAiB0B,UAAU,WAC9CvB,OAIPW,EAAAA,0BAAkB,OAAOG,MAAOjC,KAAsBX,EACpD5B,SAAAqE,EAAAA,IAACR,EAAS,CAAAqB,KAAMC,EAAAA,cAAcC,SAAUC,MAAM,mBAEhDd,OAAA,OAAA,CAAMC,MAAOtC,YACXmC,EAAUC,IAAA,OAAA,IAAA1C,EAAmB5B,SAAAA,IAC5BsD,GACCe,MAACiB,EAAkBA,mBAAA,IACbrF,EACJiB,WAAYA,GAAcI,EAC1BF,GAAIqC,WAMd"}