{"version":3,"file":"CompactUserAssistance-e2f42bce.js","sources":["../../src/UNSAFE_UserAssistance/CompactUserAssistance.tsx"],"sourcesContent":["import { RefObject } from 'preact/compat';\n\nimport { ComponentMessageContainer, ComponentMessageItem } from '../UNSAFE_ComponentMessage';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { Popup } from '../UNSAFE_Popup';\nimport { Coords } from '../UNSAFE_Floating';\nimport { Separator } from '../UNSAFE_Separator';\nimport { usePopupFocusWithin } from './usePopupFocusWithin';\nimport { assistiveStyles, dividerStyle } from './themes/UserAssistanceStyles.css';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { UserAssistanceRedwoodTheme } from './themes/redwood/UserAssistanceTheme';\n\ntype Props = {\n  anchorRef: RefObject<HTMLElement | Coords>;\n  assistiveText?: string;\n  fieldLabel?: string;\n  id?: string;\n  messages?: ComponentMessageItem[];\n};\n\nexport function CompactUserAssistance({\n  anchorRef,\n  assistiveText,\n  fieldLabel,\n  id,\n  messages = []\n}: Props) {\n  const { isInputFocused, isReadonly } = useFormFieldContext();\n  const flip = { mainAxis: true, crossAxis: false };\n  const { isFocused: isPopupFocused, popupProps } = usePopupFocusWithin();\n  const isOpen = isInputFocused === true || isPopupFocused === true;\n\n  const { baseTheme } = useComponentTheme(UserAssistanceRedwoodTheme);\n\n  const uaCompactContent =\n    isReadonly !== true && (messages.length > 0 || assistiveText) ? (\n      <Popup\n        {...popupProps}\n        placement=\"end-top-corner\"\n        isOpen={isOpen}\n        anchorRef={anchorRef}\n        flipOptions={flip}\n        tail=\"simple\"\n        role=\"tooltip\"\n        maxWidth={'296px'}>\n        <div id={id} class={baseTheme}>\n          {messages.length > 0 && (\n            <ComponentMessageContainer fieldLabel={fieldLabel} messages={messages} />\n          )}\n          {messages.length > 0 && assistiveText && (\n            <span class={dividerStyle}>\n              <Separator />\n            </span>\n          )}\n          {assistiveText && <span class={assistiveStyles}>{assistiveText}</span>}\n        </div>\n      </Popup>\n    ) : null;\n\n  return uaCompactContent;\n}\n"],"names":["anchorRef","assistiveText","fieldLabel","id","messages","isInputFocused","isReadonly","useFormFieldContext","isFocused","isPopupFocused","popupProps","usePopupFocusWithin","isOpen","baseTheme","useComponentTheme","UserAssistanceRedwoodTheme","length","_jsx","jsx","Popup","placement","flipOptions","mainAxis","crossAxis","tail","role","maxWidth","children","_jsxs","class","ComponentMessageContainer","dividerStyle","Separator","assistiveStyles"],"mappings":"u1CAoBgB,UAAsBA,UACpCA,EAASC,cACTA,EAAaC,WACbA,EAAUC,GACVA,EAAEC,SACFA,EAAW,KAEX,MAAMC,eAAEA,EAAcC,WAAEA,GAAeC,EAAmBA,uBAElDC,UAAWC,EAAcC,WAAEA,GAAeC,EAAmBA,sBAC/DC,GAA4B,IAAnBP,IAA8C,IAAnBI,GAEpCI,UAAEA,GAAcC,EAAiBA,kBAACC,EAA0BA,4BA2BlE,OAxBiB,IAAfT,IAAwBF,EAASY,OAAS,GAAKf,GAC7CgB,EAAAC,IAACC,EAAKA,MAAA,IACAT,EACJU,UAAU,iBACVR,OAAQA,EACRZ,UAAWA,EACXqB,YAbO,CAAEC,UAAU,EAAMC,WAAW,GAcpCC,KAAK,SACLC,KAAK,UACLC,SAAU,QAAOC,SACjBC,EAAAA,KAAK,MAAA,CAAAzB,GAAIA,EAAI0B,MAAOhB,EAASc,SAAA,CAC1BvB,EAASY,OAAS,GACjBC,EAAAC,IAACY,4BAAyB,CAAC5B,WAAYA,EAAYE,SAAUA,IAE9DA,EAASY,OAAS,GAAKf,GACtBgB,EAAAA,IAAA,OAAA,CAAMY,MAAOE,EAAYA,aAAAJ,SACvBV,EAACC,IAAAc,EAASA,UAAG,MAGhB/B,GAAiBgB,EAAAA,IAAM,OAAA,CAAAY,MAAOI,EAAAA,gBAAkBN,SAAA1B,SAGnD,IAGR"}