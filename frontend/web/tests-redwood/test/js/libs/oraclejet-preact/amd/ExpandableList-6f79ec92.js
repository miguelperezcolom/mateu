define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', 'preact/compat', './classNames-08d99695', './useId-c9578d26', './useTranslationBundle-27bf6340', './keys-4755c121', './Button-29507a64', './HiddenAccessible-037ef42d', './ChevronDown-1d01f028', './CollapseIcon-8d26ba2a', './LiveRegion-4b9317e5', './useUser-988f7da2', './collectionUtils-26e6c87c', './GroupLoadingIndicator-87f32efc', './useNavigation-a6a2218f', './List-5b5b3bd7'], (function(e,t,n,a,s,o,i,r,l,d,c,u,p,x,g,y,m,f,k){"use strict";const v=e=>{"Enter"!==e.key&&" "!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.preventDefault()},b=(e,t,n,a,s)=>{const o=a(t);if(s&&o){const t=l.containsKey(n,o);(e&&t||!e&&!t)&&s({value:o})}},h=(e,t,n)=>{const a=t(e.target);n&&a&&(n({value:a}),"click"===e.type&&e.stopPropagation())};const C={all:!1,keys:new Set},L=s.memo((e=>{const n=o.classNames(["oj-listview-expander"]);return t.jsx("span",{class:n,role:"presentation",children:t.jsx(d.Button,{onAction:()=>{e.onToggle({value:e.itemKey})},variant:"ghost",startIcon:e.expanded?t.jsx(u.SvgChevronDown,{size:"6x"}):t.jsx(p.CollapseIcon,{size:"6x"})})})}),((e,t)=>e.itemKey===t.itemKey&&e.expanded===t.expanded&&e.onToggle===t.onToggle));e.ExpandableList=function({children:e,data:s,onSelectionChange:o,onToggle:d,onPersistCurrentItem:u,...p}){const[j,I]=a.useState(""),K=r.useTranslationBundle("@oracle/oraclejet-preact"),T=a.useRef(),A=a.useCallback((e=>{T.current=e.value,u?.(e)}),[u]),R=a.useCallback((e=>{if(d?.(e),s){const t=l.containsKey(s?.expanded,e.value);I(t?K.expandableList_groupCollapse():K.expandableList_groupExpand()),setTimeout((()=>{I("")}),1e3)}}),[d,s,K]),w=function(e,t,n){const{direction:s}=g.useUser(),o=a.useCallback((t=>{h(t,e,n)}),[e,n]),i=a.useCallback((a=>{if("Enter"===a.key||" "===a.key)h(a,e,n);else if("ArrowLeft"===a.key||"ArrowRight"===a.key){const o="rtl"===s,i="ArrowLeft"===a.key&&!o;b(i,a.target,t,e,n),a.preventDefault(),a.stopPropagation()}}),[e,n,t,s]);return n?{onClick:o,onKeyDown:v,onKeyUp:i}:{}}((e=>"treegrid"===e.getAttribute("role")?void 0===T.current?null:T.current:y.keyExtractor(e,m.GROUP_SELECTOR)),null==s?C:s.expanded,d&&R),D=i.useId(),E=a.useRef(D),S=a.useCallback((e=>{if(o&&s){const t=f.excludeGroup(s,e.value);l.isSameKey(t,e.value)?o(e):t.keys&&t.keys.size>0&&o({...e,value:t})}}),[o,s]);return t.jsxs(n.Fragment,{children:[t.jsx(k.List,{data:s,role:"treegrid",loadingIndicator:t.jsx(m.GroupLoadingIndicator,{}),onSelectionChange:S,customItemRenderer:n=>{const a=n.listItemContext.metadata.key,o=s&&d?{expanded:l.containsKey(s.expanded,a),onToggle:d}:void 0,i=((e,n)=>{const a=void 0!==n?()=>t.jsx(L,{itemKey:e.metadata.key,expanded:n.expanded,onToggle:n.onToggle}):void 0;return{...e,parentKey:e.metadata.parentKey,leaf:e.metadata.isLeaf??!0,depth:e.metadata.treeDepth??1,expander:a}})(n.listItemContext,o);return i.leaf?n.defaultListItem(i,{itemDepth:i.depth+1}):t.jsx(m.ListGroupHeader,{ariaDescribedBy:E.current,itemKey:i.metadata.key,itemIndex:i.index,itemDepth:i.depth,isFocused:n.isFocused,isFocusRingVisible:n.isFocusRingVisible,isActive:n.isActive,isGridlineVisible:!1,isExpandable:!0,expandedKeys:null==s?C:s.expanded,onToggle:d,children:e(i)},i.metadata.key)},onPersistCurrentItem:A,...p,...w,children:t=>e(t)}),d&&t.jsxs(n.Fragment,{children:[t.jsx(x.LiveRegion,{children:j}),t.jsx("span",{id:E.current,children:t.jsx(c.HiddenAccessible,{children:K.expandableList_expandCollapseInstructionText()})})]})]})}}));
//# sourceMappingURL=ExpandableList-6f79ec92.js.map
