{"version":3,"file":"useAddBusyState-8ed5cc58.js","sources":["../../src/hooks/PRIVATE_useAddBusyState/useAddBusyState.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useBusyStateContext } from '#hooks/UNSAFE_useBusyStateContext';\nimport { useRef, useCallback, useLayoutEffect } from 'preact/hooks';\n\n/**\n * Provides way to add and resolve a busy state.\n */\nexport function useAddBusyState(description: string) {\n  const { addBusyState } = useBusyStateContext();\n  const resolverRef = useRef<() => void>();\n\n  const onBusyEnd = useCallback(() => {\n    resolverRef.current?.();\n    resolverRef.current = undefined;\n  }, []);\n\n  const onBusyStart = useCallback(() => {\n    // Resolve previous busy state if any\n    onBusyEnd();\n    resolverRef.current = addBusyState(description);\n  }, [description, onBusyEnd, addBusyState]);\n\n  // Resolve any pending busy state on unmount - return onBusyEnd callback itself (do not execute it)\n  useLayoutEffect(() => onBusyEnd, [onBusyEnd]);\n\n  return {\n    onBusyStart,\n    onBusyEnd\n  };\n}\n"],"names":["description","addBusyState","useBusyStateContext","resolverRef","useRef","onBusyEnd","useCallback","current","undefined","onBusyStart","useLayoutEffect"],"mappings":"mJAcM,SAA0BA,GAC9B,MAAMC,aAAEA,GAAiBC,EAAAA,sBACnBC,EAAcC,EAAAA,SAEdC,EAAYC,EAAAA,aAAY,KAC5BH,EAAYI,YACZJ,EAAYI,aAAUC,CAAS,GAC9B,IAEGC,EAAcH,EAAAA,aAAY,KAE9BD,IACAF,EAAYI,QAAUN,EAAaD,EAAY,GAC9C,CAACA,EAAaK,EAAWJ,IAK5B,OAFAS,EAAAA,iBAAgB,IAAML,GAAW,CAACA,IAE3B,CACLI,cACAJ,YAEJ"}