define(['exports', 'preact/jsx-runtime', 'preact/compat', './WindowOverlay-bd810e3b', './useTestId-a2e433c2', './useAnimation-5a74955f', 'preact/hooks', './refUtils-77e97004', './UNSAFE_Dialog/themes/redwood/DialogTheme', './FocusTrap-d06ac102', './Layer-dc3c1ac9', './LayerHost-7d4aa6d3', './Modal-8d647f76', './classNames-08d99695', './ImageVars.css-17386400', './useComponentTheme-5aa41a8f', './useId-c9578d26', './dimensions-f24f9a2b', './mergeInterpolations-9ede4cf7', './useResizeObserver-25032462', './useDraggable-7f591a3d', './Floating-366a30f8', './IconButton-b4b83d00', './Close-7a1f81d8', './Resizable-dc482666', './useBreakpoints-52d11a72', './useTranslationBundle-27bf6340', './animationUtils-716a9aa6', './tabbableUtils-9101c0e5', './unsafeDomAccess-602c5dde'], (function(e,n,o,t,s,a,r,i,l,c,d,u,m,f,g,h,b,p,R,y,v,D,x,S,E,z,j,A,I,C){"use strict";const O=({children:e,id:o,cancelBehavior:t,onClose:s,draggableProps:a,headerDecoration:r="on"})=>{const{styles:i}=h.useComponentTheme(l.DialogRedwoodTheme),c=f.classNames([i.dialogHeaderStyle,..."on"===r?[i.dialogHeaderDecorationStyle]:[]]),d="string"==typeof e?n.jsx("h1",{id:o,className:i.dialogTitleStyle,children:e}):n.jsx(n.Fragment,{children:e}),u=j.useTranslationBundle("@oracle/oraclejet-preact"),m="icon"===t?n.jsx("div",{children:n.jsx("div",{className:i.dialogHeaderCloseIconStyle,children:n.jsx(x.IconButton,{"aria-label":u.message_close(),size:"sm",variant:"ghost",onAction:()=>{s?.({reason:"icon"})},children:n.jsx(S.SvgClose,{})})})}):null;return n.jsxs("div",{className:c,...a,children:[d,m]})},B=o.forwardRef((({children:e,style:o},t)=>n.jsx("div",{ref:t,className:o,children:e}))),w=o.forwardRef((({children:e,header:o,footer:t,visibility:a,labelId:d,role:u,ariaLabelledBy:m,ariaDescribedBy:b,cancelBehavior:p,draggableProps:R,isResizable:v,headerDecoration:D,containerRef:x,onClose:S,onResizeStart:j,onResize:A,onResizeEnd:I,onKeyDown:C,testId:w,style:T,footerRef:F},N)=>{const k=r.useRef(null),L=i.mergeRefs(N,k),W=r.useRef(),[H,U]=r.useState(!1),_=!z.useBreakpoints().md,{classes:P,styles:M}=h.useComponentTheme(l.DialogRedwoodTheme),X=r.useCallback((()=>{if(k.current&&(k.current.clientHeight<400?U(!0):U(!1),k.current)){const e=window.getComputedStyle(k.current);W.current={minHeight:parseFloat(e.minHeight),maxHeight:parseFloat(e.maxHeight),minWidth:parseFloat(e.minWidth),maxWidth:parseFloat(e.maxWidth)}}}),[]);r.useEffect((()=>{X()}),[X]),y.useResizeObserver(k,X);const G=_?M.baseStyleSmallWidth:M.baseStyleDesktop,K=H?M.dialogContentStyleNoShrink:M.dialogContentStyle,Y="visible"===a?M.visibilityVisible:M.visibilityHidden,V=s.useTestId(w);return n.jsx(c.FocusTrap,{restoreFocusRef:!1,children:n.jsxs("div",{ref:L,tabIndex:-1,className:f.classNames([P,G,Y,g.globalImages]),style:T,onKeyDown:C,role:u,"aria-labelledby":m,"aria-describedby":b,...V,children:[n.jsxs("div",{className:M.dialogContainerStyle,children:[n.jsx(O,{id:d,onClose:S,headerDecoration:D,cancelBehavior:p,draggableProps:R,children:o}),n.jsx("div",{className:K,children:n.jsx("div",{className:M.dialogBodyStyle,children:e})}),n.jsx(B,{ref:F,style:M.dialogFooterStyle,children:t})]}),v&&n.jsx(E.Resizable,{onResizeStart:j,onResize:A,onResizeEnd:I,containerRef:x,constraints:W.current})]})})})),T=o.forwardRef((({children:e,isOpen:o,header:s="",footer:l,modality:c="modal",launcherRef:u,anchorRef:f,autoFocusRef:g,placement:h,offset:y=0,cancelBehavior:x="none",dragAffordance:S="none",resizeBehavior:E="none",headerDecoration:j="on",onDragStart:A,onDragMove:O,onDragEnd:B,onResizeStart:T,onResize:N,onResizeEnd:k,onFocusSet:L,onClose:W,onTransitionEnd:H,role:U="dialog","aria-labelledby":_,"aria-describedby":P,testId:M,...X},G)=>{const[K,Y]=r.useState(o?"initial":"unmounted"),V=r.useRef(o?"initial":"unmounted"),q=e=>{V.current=e,Y(e)},[J,Q]=r.useState("hidden"),Z=r.useRef("unmounted"),$=r.useRef(null),ee=r.useRef(null),ne=r.useRef(null),oe=r.useRef(null),te=!z.useBreakpoints().md,se=te?"bottom":h||"center",ae=te?"opening"===K?"slideUp":"slideDown":"opening"===K?"zoomIn":"zoomOut",re=b.useId(),ie=_||re,le=[...Object.values(p.dimensionInterpolations)],ce=R.mergeInterpolations(le),{...de}=ce(X),ue=r.useRef(!1),me=r.useCallback((()=>{g&&g.current?I.focusOn(g.current):oe.current&&I.allTabbableElements(oe.current).length>0?I.focusWithin(oe.current):I.focusWithin(ee.current),L?.()}),[g,L]),fe=r.useCallback((()=>{const e=ne.current;ue.current&&e&&(I.focusOn(e),ue.current=!1)}),[]),{nodeRef:ge}=a.useAnimation(ae,{animationStates:F,isAnimatedOnMount:!0,onAnimationEnd:()=>{o?H?.(!0):o||(ue.current=ee.current?.contains(I.getActiveElement())||!1,ge(null),Q("hidden"),q("unmounted"),H?.(!1))}}),he=r.useMemo((()=>i.mergeRefs(ee,G)),[ee,G]),be=r.useCallback((e=>{ne.current===I.getActiveElement()&&"F6"===e.code&&(e.preventDefault(),e.stopPropagation(),I.focusWithin(ee.current),L?.())}),[c]),{draggableProps:pe}=v.useDraggable({isDisabled:"none"===S,containerRef:$,onDragStart:A,onDragMove:O,onDragEnd:B});r.useEffect((()=>("unmounted"!==K||o?"unmounted"===K&&o?q("initial"):"initial"===K&&o?(ge(ee.current),q("opening")):"opening"===K&&o?Q("visible"):o||"unmounted"===V.current||q("closing"):K!==Z.current&&fe(),()=>{Z.current=K})),[o,K,ge,fe]),r.useEffect((()=>()=>{const e=ne.current;ee.current?.contains(I.getActiveElement())&&e&&setTimeout((()=>{I.focusOn(e)}),0)}),[]),r.useEffect((()=>(o&&(ne.current=function(e){const n=e?.current;if(n){const e=n instanceof Element?n:n[C.UNSAFE_DOM_ACCESS];if(document.body.contains(e))return e}return I.getActiveElement()}(u),"modeless"===c&&ne.current?.addEventListener("keydown",be)),()=>{"modeless"===c&&ne.current?.removeEventListener("keydown",be)})),[o,u,be,c]),r.useEffect((()=>{"visible"===J&&me()}),[J,me]);const Re=e=>{switch(e.code){case"Escape":W?.({reason:"escapeKey"});break;case"F6":ne.current&&"modeless"===c&&I.focusOn(ne.current),e.preventDefault(),e.stopPropagation()}},ye=()=>{ee.current?.focus()},ve=()=>n.jsx(w,{ref:he,labelId:ie,header:s,footer:l,role:U,ariaLabelledBy:ie,ariaDescribedBy:P,onKeyDown:Re,testId:M,style:de,visibility:J,cancelBehavior:x,draggableProps:pe,isResizable:"resizable"===E,headerDecoration:j,containerRef:$,onClose:W,onResizeStart:T,onResize:N,onResizeEnd:k,footerRef:oe,children:e}),De=()=>f&&f.current?n.jsx(D.Floating,{ref:$,anchorRef:f,placement:"bottom-start",flipOptions:{mainAxis:!1,crossAxis:!1},shiftOptions:{mainAxis:!1,crossAxis:!1},children:ve()}):n.jsx(t.WindowOverlay,{placement:se,offset:y,children:ve()});return"modal"===c?n.jsx(m.Modal,{isOpen:"unmounted"!==K,onBackdropClick:ye,children:De()}):"unmounted"!==K?n.jsx(d.Layer,{children:De()}):null}));const F={zoomIn:{from:{scaleX:.9,scaleY:.9,transformOrigin:"center",opacity:0},to:{scaleX:1,scaleY:1,opacity:1},options:{duration:200}},zoomOut:{from:{scaleX:1,scaleY:1,transformOrigin:"center",opacity:1},to:{scaleX:.9,scaleY:.9,opacity:0},options:{duration:200}},slideUp:{...A.SLIDE_UP_XLARGE,options:{duration:A.DURATION_LARGE}},slideDown:{...A.SLIDE_DOWN_XLARGE,options:{duration:A.DURATION_LARGE}}};e.Dialog=T}));
//# sourceMappingURL=Dialog-b6be33fd.js.map
