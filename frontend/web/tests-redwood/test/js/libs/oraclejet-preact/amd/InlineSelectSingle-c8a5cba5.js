define(['exports', 'preact/jsx-runtime', 'preact/compat', 'preact/hooks', './Flex-4bc3a394', './Label-46fd3625', './useDisplayValue-2d2e6206', './Separator-181f7541', './logger-0f873e29', './TabbableModeContext-a9c97640', './LayerHost-7d4aa6d3', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-b485c235', 'css!./MessageBannerStyles.styles.css', 'module', './UNSAFE_MessageBanner/themes/redwood/MessageBannerVariants.css', 'preact', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', './IconButton-b4b83d00', 'css!./MessageStyles.styles.css', './MessageFormattingUtils-ea0be23e', './TransitionGroup-3b9d81b6', './MessagesContext-602a69a2', 'css!./HiddenAccessibleStyles.styles.css', 'css!./ComponentMessageStyles.styles.css', 'module', './UNSAFE_ComponentMessage/themes/redwood/ComponentMessageVariants.css', './FormFieldContext-a024b891', './Popup-062b66ff', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './InputGroupContext-372087af', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './View-5520bcf5', './FormContext-6b0879a0', './useFormContext-b8cbbb21', './useLoadingIndicatorTimer-20a3bf5f', './useTextField-3ab0a23b', './useTranslationBundle-27bf6340', './keyboardUtils-fb6219eb', './tabbableUtils-9101c0e5', './unsafeDomAccess-602c5dde', './useSelectCommon-f04454d2'], (function(e,s,t,o,n,a,r,i,l,c,d,u,p,b,h,S,m,y,x,C,F,f,g,v,w,A,T,U,E,L,k,K,I,B,R,P,M,_,j,V,N,D,O,z,Y,$,G,H,W,q,Z){"use strict";const J={isTabbable:!1};const Q=t.forwardRef((function(e,t){const{data:l,itemRenderer:d,itemText:u,label:p,onLoadRange:b,testId:S,userAssistancePosition:m="belowList"}=e,{collectionRendererContext:y,formFieldContext:x,hasUserAssistance:C,isEmptyResults:F,isUserFiltering:f,labelProps:g,listContainerProps:v,selectSingleFieldProps:w,selectFieldInputProps:A,userAssistanceProps:T}=function({"aria-describedby":e,assistiveText:s,data:t,hasBackIcon:n="never",hasClearIcon:a="never",helpSourceLink:i,helpSourceText:l,isLoading:c,itemText:d,label:u,onBackIconAction:p,onCommit:b,onFilter:h,placeholder:S,textAlign:m,valueItem:y,virtualKeyboard:x},C){const F=o.useRef(null),{textAlign:f}=z.useFormContext(),g=m??f??"start",v=null!=t&&!Z.isBeforeDataFetch(t),w=v&&0===t?.totalSize,A=o.useRef(t),T=o.useRef(y),U=o.useRef(!0),[E,L]=o.useState(void 0===y?void 0:new Set([y.key])),k=Y.useLoadingIndicatorTimer(c??!1),K=r.useDisplayValue(d,y);o.useImperativeHandle(C,(()=>({focus:()=>F.current?.focus(),blur:()=>F.current?.blur(),[q.UNSAFE_DOM_ACCESS]:F.current})),[]);const{currentRowKeyRef:I,currentRowOverride:B,dropdownRef:R,isFocused:P,isUserFiltering:M,onCurrentKeyChange:_,searchText:j,setCurrentRowOverride:V,stopFiltering:N,updateFiltering:D,userInput:O}=Z.useSelectCommon({data:t,inputRef:F,isFocused:!0,onFilter:h}),{baseId:J,formFieldContext:Q,inputProps:X,labelProps:ee,userAssistanceProps:se}=$.useTextField({ariaDescribedBy:e,helpSourceLink:i,helpSourceText:l,isFocused:P,isLoading:k,value:void 0!==y||void 0}),te=`${J}-list`;Q.hasValue=c||Q.hasValue;const oe=G.useTranslationBundle("@oracle/oraclejet-preact"),ne=v?0===t?.totalSize?oe.select_noMatchesFound():1===t?.totalSize?oe.select_oneMatchFound():"exact"===t?.sizePrecision?oe.select_sizeMatchesFound({TOTAL_SIZE:`${t?.totalSize}`}):oe.select_sizeOrMoreMatchesFound({TOTAL_SIZE:`${t?.totalSize}`}):"";T.current!==y&&(T.current=y,L(void 0===y?void 0:new Set([y.key]))),A.current!==t&&(A.current=t,M&&null!=t&&0===t.offset&&t.data.length>0&&V({rowKey:Z.isSearchTextEmptyOrUndefined(j)?void 0:t.data[0].metadata.key})),U.current&&(U.current=!1,V({rowKey:[...E??[void 0]][0]}));const ae=o.useCallback(((e,s)=>{b?.({value:e,previousValue:void 0!==y?y.key:void 0,reason:s.reason})}),[b,y]),re=o.useCallback((e=>{L(new Set),ae(void 0,e)}),[ae]),ie=o.useCallback((()=>M&&""===O&&void 0!==y),[M,O,y]),le=o.useCallback((e=>{N();const s=e.context.key;L(new Set([s])),ae(s,{reason:"itemAction"})}),[ae,N]),ce=o.useCallback((({value:e})=>{D(e),h?.({searchText:e})}),[h,D]),de=o.useCallback((e=>{if(!H.isControlOrFunctionKey(e))switch(e.code){case H.KEYS.UP:case H.KEYS.DOWN:e.preventDefault();break;case H.KEYS.ENTER:case H.KEYS.TAB:{if(Z.isPhone())return;const s={reason:e.code===H.KEYS.TAB?"tabKey":"itemAction"};if(ie())return void re(s);if(null==t||0===t.data.length)return;if(N(),void 0!==I.current&&null!=t&&t.data.length>0)return L(new Set([I.current])),void ae(I.current,s);ae(y?.key??void 0,s);break}}}),[re,I,t,ie,ae,N,y]),ue=o.useCallback((e=>{if(!H.isControlOrFunctionKey(e))switch(e.code){case H.KEYS.UP:case H.KEYS.DOWN:if(null!=t&&R.current){const e=W.allTabbableElements(R.current,void 0,!0)[0];e?.focus(),void 0===B.rowKey&&V({rowKey:t.data[0]?.metadata?.key})}e.preventDefault()}}),[B,t,R,V]),pe=o.useCallback((e=>{e.code===H.KEYS.TAB&&void 0!==I.current&&null!=t&&t.data.length>0&&(L(new Set([I.current])),ae(I.current,{reason:"tabKey"}))}),[I,t,ae]),be=o.useCallback((()=>{N(),re({reason:"itemAction"}),F.current?.focus(),h?.({searchText:void 0})}),[re,h,N]),he=Z.useCollectionRenderer({currentKey:B.rowKey,searchText:j,selectedKeys:E,onCurrentKeyChange:_,onItemAction:le});return o.useEffect((()=>{const e=R.current?.querySelector('div[role="listbox"][tabindex="0"]');e?.setAttribute("tabindex","-1")})),{collectionRendererContext:he,formFieldContext:Q,hasUserAssistance:Boolean(s||i),isEmptyResults:w,isUserFiltering:M,labelProps:{...ee,children:u},listContainerProps:{id:te,dropdownListRef:R,onKeyDown:pe},selectSingleFieldProps:{contentVariant:"input",hasInsideLabel:!0,isBackButtonShown:"always"===n,isClearButtonShown:"conditionally"===a&&void 0!==y,onBackButtonClick:p,onClearButtonClick:be,styleVariant:"embedded"},selectFieldInputProps:{...X,"aria-controls":te,"aria-expanded":!0,displayValue:K,hasEmptyLabel:!1,hasInsideLabel:!0,inputRef:F,isAddToListShown:!1,isAdvancedSearchShown:!1,isRequired:!1,isUserFiltering:M,liveRegionText:ne,onInput:ce,onKeyDown:de,onKeyUp:ue,placeholder:S,textAlign:g,userInput:O,variant:"embedded",virtualKeyboard:x},userAssistanceProps:{...se,assistiveText:s,fieldLabel:u,helpSourceLink:i,helpSourceText:l}}}(e,t),U=o.useCallback((({onPersistCurrentRowKey:e,onRowAction:t,selected:o,searchText:n,currentRowKeyOverride:a})=>s.jsx(Z.DefaultList,{"aria-label":p,currentItemVariant:"highlight",currentKey:a,data:l,itemRenderer:d,itemText:u,onCurrentKeyChange:e,onItemAction:t,onLoadRange:b,searchText:f?n:void 0,selectedKeys:o,selectionMode:"single"})),[l,f,d,u,p,b]),E=s.jsx(D.View,{minWidth:"100%",padding:"2x",children:s.jsx(h.InlineUserAssistance,{testId:S&&`${S}_userAssistance`,...T})});return s.jsx(n.Flex,{direction:"column",gap:"2x",maxHeight:"100%",width:"100%",children:s.jsxs(B.FormFieldContext.Provider,{value:x,children:[s.jsxs(D.View,{flex:0,children:[s.jsx(r.SelectSingleField,{...w,label:s.jsx(a.Label,{...g}),testId:S&&`${S}_selectSingleField`,children:s.jsx(r.SelectSingleFieldInput,{...A})}),"aboveList"===m&&s.jsx(i.Separator,{}),"aboveList"===m&&C&&s.jsxs(s.Fragment,{children:[E,s.jsx(i.Separator,{})]})]}),"aboveList"!==m&&s.jsx(i.Separator,{}),s.jsx(Z.DropdownList,{...v,hasBottomGap:"aboveList"===m,hasTopGap:!1,children:s.jsx(c.TabbableModeContext.Provider,{value:J,children:F?s.jsx(Z.EmptyResults,{}):U(y)})}),"belowList"===m&&C&&s.jsxs("div",{children:[s.jsx(i.Separator,{}),E]})]})})}));e.InlineSelectSingle=Q}));
//# sourceMappingURL=InlineSelectSingle-c8a5cba5.js.map
