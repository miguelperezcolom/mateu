{"version":3,"file":"StyledCheckbox-7e4522ca.js","sources":["../../src/PRIVATE_StyledCheckbox/StyledCheckbox.tsx"],"sourcesContent":["import type { Ref, RefObject, JSX } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport { useEffect } from 'preact/hooks';\n\nimport { CheckIcon } from '../PRIVATE_ThemedIcons/CheckIcon';\nimport { CheckboxOffIcon } from '../PRIVATE_ThemedIcons/CheckboxOffIcon';\nimport { CheckboxOnIcon } from '../PRIVATE_ThemedIcons/CheckboxOnIcon';\nimport { CheckboxMixedIcon } from '../PRIVATE_ThemedIcons/CheckboxMixedIcon';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { checkboxIconVars } from '../UNSAFE_Checkbox/themes/CheckboxIconContract.css';\nimport { CheckboxIconRedwoodTheme } from '../UNSAFE_Checkbox/themes/redwood/CheckboxIconTheme';\nimport { useTabbableMode } from '../hooks/UNSAFE_useTabbableMode';\nimport {\n  CheckboxIconStyles,\n  CheckboxIconVariantOptions\n} from '../UNSAFE_Checkbox/themes/CheckboxIconStyles.css';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { hoverStyle } from './StyledCheckbox.css';\nimport { useCollectionInteractionContext } from '#hooks/UNSAFE_useCollectionInteractionContext';\n\ntype InputProps = UnpackSignals<JSX.IntrinsicElements['input']>;\n\ntype Props = Pick<\n  InputProps,\n  | 'name'\n  | 'value'\n  | 'aria-label'\n  | 'aria-labelledby'\n  | 'aria-describedby'\n  | 'onKeyUp'\n  | 'onKeyDown'\n  | 'onBlur'\n  | 'onChange'\n  | 'onFocus'\n  | 'id'\n> & {\n  /**\n   * Specifies if the checkbox is active.\n   */\n  isActive?: boolean;\n  /**\n   * Whether the element should be checked, unchecked, or in a partial state.\n   */\n  isChecked?: 'checked' | 'unchecked' | 'partial';\n  /**\n   * Specifies if the checkbox is disabled.\n   */\n  isDisabled?: boolean;\n  /**\n   * Specifies if the checkbox should display focus ring.\n   */\n  isFocusRingShown?: boolean;\n  /**\n   * Specifies if the checkbox is read-only.\n   */\n  isReadonly?: boolean;\n  /**\n   * Specifies whether the checkbox requires a selection to be made.\n   */\n  isRequired?: boolean;\n  /**\n   * Triggered when the checkbox icon is clicked. This would be potentially used if no label is supplied.\n   */\n  onClick?: UnpackSignals<JSX.IntrinsicElements['span']>['onClick'];\n  /**\n   * Specifies whether the checkbox is hover.\n   */\n  isHover?: boolean;\n};\n\n/**\n * StyledCheckbox is a controlled component that displays a stylized checkbox for 'checked',\n * 'unchecked', and 'partial'. It passes intrinsic props to the native input element. This should be used\n * in conjunction with a label and be passed an onChange handler. If used within a collection use\n * 'useCollectionFocusRing', or use 'useCheckboxRadioContext' within RadioSet/CheckboxSet, to determine if you\n * should display the focus ring using keyboard navigation.\n */\nconst StyledCheckbox = forwardRef(\n  (\n    {\n      onClick,\n      isActive,\n      isFocusRingShown,\n      isDisabled,\n      isReadonly,\n      isRequired,\n      isChecked: propIsChecked = 'unchecked',\n      // Remaining props should be intrinsic input props only. If you need additional input props exposed,\n      // add to the picked items from InputProps.\n      id,\n      name,\n      value,\n      onKeyUp,\n      onKeyDown,\n      onChange,\n      onFocus,\n      onBlur,\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledBy,\n      'aria-describedby': ariaDescribedBy,\n      isHover\n    }: Props,\n    ref: Ref<HTMLInputElement> = null\n  ) => {\n    const { isTabbable } = useTabbableMode();\n    const isPartial = propIsChecked === 'partial';\n    const isInputChecked = propIsChecked === 'checked';\n    const isChecked = isInputChecked || isPartial;\n    const ariaChecked = isChecked ? (isPartial ? 'mixed' : true) : false;\n\n    const { classes } = useComponentTheme<CheckboxIconVariantOptions, CheckboxIconStyles>(\n      CheckboxIconRedwoodTheme,\n      {\n        disabled: isDisabled ? 'isDisabled' : 'notDisabled',\n        checked: isChecked ? 'isChecked' : 'notChecked',\n        readonly: isReadonly ? 'isReadonly' : 'notReadonly',\n        active: isActive ? 'isActive' : 'notActive',\n        focus: isFocusRingShown ? 'isFocused' : 'notFocused',\n        iconSize: '4xUnits'\n      }\n    );\n\n    // JET-67417 We need to set 'indeterminate' via javascript\n    // as well as have aria-checked for AT voice over to read out properly\n    useEffect(() => {\n      const refObj = ref as RefObject<HTMLInputElement>;\n      if (refObj?.current) {\n        refObj.current.indeterminate = isPartial;\n      }\n    }, [ref, isPartial]);\n\n    const IconComp = isReadonly\n      ? isChecked\n        ? CheckIcon\n        : CheckboxOffIcon\n      : isChecked\n      ? isPartial\n        ? CheckboxMixedIcon\n        : CheckboxOnIcon\n      : CheckboxOffIcon;\n\n    const spanClass = isHover ? classes + ' ' + hoverStyle : classes;\n\n    // JET-65187 oatb: Interactive controls must not be nested\n    // For accessibility, we want aria-hidden to be true and disabled to be true when\n    // the checkbox is 'embedded' in a collection in the dropdown of a SelectMultiple component.\n    const isEmbedded = useCollectionInteractionContext() === 'embedded';\n    return (\n      <>\n        <HiddenAccessible>\n          <input\n            {...(isReadonly ? { 'aria-readonly': true } : {})}\n            aria-checked={ariaChecked}\n            {...(isEmbedded ? { 'aria-hidden': true } : {})}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledBy}\n            aria-describedby={ariaDescribedBy}\n            aria-required={isRequired}\n            ref={ref}\n            name={name}\n            value={value}\n            onKeyUp={onKeyUp}\n            onKeyDown={onKeyDown}\n            onBlur={onBlur}\n            onChange={onChange}\n            onFocus={onFocus}\n            id={id}\n            type=\"checkbox\"\n            disabled={isDisabled || isEmbedded}\n            checked={isInputChecked}\n            tabIndex={isTabbable ? 0 : -1}\n          />\n        </HiddenAccessible>\n        <span className={spanClass} aria-hidden=\"true\" onClick={onClick} role=\"img\">\n          <IconComp size={checkboxIconVars.iconSize} color=\"currentColor\" />\n        </span>\n      </>\n    );\n  }\n);\n\nexport { StyledCheckbox };\n"],"names":["StyledCheckbox","forwardRef","onClick","isActive","isFocusRingShown","isDisabled","isReadonly","isRequired","isChecked","propIsChecked","id","name","value","onKeyUp","onKeyDown","onChange","onFocus","onBlur","ariaLabel","ariaLabelledBy","ariaDescribedBy","isHover","ref","isTabbable","useTabbableMode","isPartial","isInputChecked","ariaChecked","classes","useComponentTheme","CheckboxIconRedwoodTheme","disabled","checked","readonly","active","focus","iconSize","useEffect","refObj","current","indeterminate","IconComp","CheckIcon","SvgCheck","CheckboxOffIcon","SvgCheckboxOff","CheckboxMixedIcon","SvgCheckboxMixed","CheckboxOnIcon","SvgCheckboxOn","spanClass","isEmbedded","useCollectionInteractionContext","_jsxs","jsxs","_Fragment","children","_jsx","jsx","HiddenAccessible","type","tabIndex","className","role","size","checkboxIconVars","color"],"mappings":"yjBA8EM,MAAAA,EAAiBC,EAAUA,YAC/B,EAEIC,UACAC,WACAC,mBACAC,aACAC,aACAC,aACAC,UAAWC,EAAgB,YAG3BC,KACAC,OACAC,QACAC,UACAC,YACAC,WACAC,UACAC,SACA,aAAcC,EACd,kBAAmBC,EACnB,mBAAoBC,EACpBC,WAEFC,EAA6B,QAE7B,MAAMC,WAAEA,GAAeC,EAAAA,kBACjBC,EAA8B,YAAlBhB,EACZiB,EAAmC,YAAlBjB,EACjBD,EAAYkB,GAAkBD,EAC9BE,IAAcnB,KAAaiB,GAAY,UAEvCG,QAAEA,GAAYC,EAAiBA,kBACnCC,2BACA,CACEC,SAAU1B,EAAa,aAAe,cACtC2B,QAASxB,EAAY,YAAc,aACnCyB,SAAU3B,EAAa,aAAe,cACtC4B,OAAQ/B,EAAW,WAAa,YAChCgC,MAAO/B,EAAmB,YAAc,aACxCgC,SAAU,YAMdC,EAAAA,WAAU,KACR,MAAMC,EAAShB,EACXgB,GAAQC,UACVD,EAAOC,QAAQC,cAAgBf,EAChC,GACA,CAACH,EAAKG,IAET,MAAMgB,EAAWnC,EACbE,EACEkC,EAASC,SACTC,EAAeC,eACjBrC,EACAiB,EACEqB,EAAiBC,iBACjBC,EAAcC,cAChBL,iBAEEM,EAAY7B,EAAUO,wCAA6BA,EAKnDuB,EAAmD,aAAtCC,oCACnB,OACEC,EAAAC,KAAAC,WAAA,CAAAC,SAAA,CACEC,EAACC,IAAAC,6BACCF,EAAAA,IACM,QAAA,IAACnD,EAAa,CAAE,iBAAiB,GAAS,CAAA,EAAG,eACnCqB,KACTwB,EAAa,CAAE,eAAe,GAAS,CAAA,EAChC,aAAAjC,oBACKC,EAAc,mBACbC,EAAe,gBAClBb,EACfe,IAAKA,EACLX,KAAMA,EACNC,MAAOA,EACPC,QAASA,EACTC,UAAWA,EACXG,OAAQA,EACRF,SAAUA,EACVC,QAASA,EACTN,GAAIA,EACJkD,KAAK,WACL7B,SAAU1B,GAAc8C,EACxBnB,QAASN,EACTmC,SAAUtC,EAAa,GAAK,MAGhCkC,EAAMC,IAAA,OAAA,CAAAI,UAAWZ,EAAS,cAAc,OAAOhD,QAASA,EAAS6D,KAAK,MACpEP,SAAAC,EAAAA,IAAChB,EAAQ,CAACuB,KAAMC,EAAgBA,iBAAC7B,SAAU8B,MAAM,qBAGrD"}