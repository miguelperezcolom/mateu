define(['exports', 'preact/jsx-runtime', 'preact/hooks', './classNames-08d99695', './PRIVATE_TimeComponent/themes/TimeComponentStyles.css', './UNSAFE_Gantt/themes/GanttStyles.css', './size-0127b66b', './useTestId-a2e433c2', './TrackResizeContainer-a4999df9', './Text-9e32c423', './accUtils-acd70e81', './TimeComponentCanvas2D-d563bdbb', './useUser-988f7da2', './Layer-dc3c1ac9', 'preact/compat', './LayerHost-7d4aa6d3', './Floating-366a30f8', './hooks/PRIVATE_useDatatip/themes/useDatatip.css', './useId-c9578d26', './datatipUtils-6846028e', './layoutUtils-641af87a', './mergeProps-bcfa6a92', './usePinch-fc8ed928', './useSelection-205a2bda', './VisTabularDatatip-ab3b0b91', './useTranslationBundle-27bf6340', './lineUtils-81206f70', './useCssVars-d782da3d', './useTextDimensions-f254e8f5', './themeContract.css-2e4b066d', './utils-ad4761c9', './eventsUtils-5fb81c3e'], (function(e,t,o,i,r,a,n,s,d,l,c,h,u,m,g,w,p,b,x,f,v,y,T,k,A,R,j,S,C,I,P,L){"use strict";function O({innerRef:e,width:o,height:d,testId:l,children:c,...h}){const u=s.useTestId(l);return t.jsx("div",{ref:e,tabIndex:0,...u,...h,class:i.classNames([r.styles.baseStyle,a.styles.baseStyle]),style:{width:o&&n.sizeToCSS(o),height:d&&n.sizeToCSS(d)},children:c})}function E({rowAxisTopGap:e="0",rowAxisBottomGap:o="0",resolvedRowAxisWidth:i,resolvedRowAxisMaxWidth:r,rowAxis:n,ganttView:s}){const l="%"===i.suffix,c="%"===r.suffix;return l||c?t.jsx(d.TrackResizeContainer,{width:"100%",height:"100%",children:(d,h)=>t.jsxs("div",{class:a.rowAxisLayoutStyles.base,style:{gridTemplateRows:`${e} minmax(0, 1fr) ${o}`},children:[t.jsx("div",{class:a.rowAxisLayoutStyles.rowAxis,children:n(l?d*(i.value/100):i.value,c?d*(r.value/100):r.value)}),t.jsx("div",{class:a.rowAxisLayoutStyles.ganttView,children:s})]})}):t.jsxs("div",{class:a.rowAxisLayoutStyles.base,style:{gridTemplateRows:`${e} minmax(0, 1fr) ${o}`},children:[t.jsx("div",{class:a.rowAxisLayoutStyles.rowAxis,children:n(i.value,r.value)}),t.jsx("div",{class:a.rowAxisLayoutStyles.ganttView,children:s})]})}const D=({maxWidth:e,maxHeight:o,data:{label:i="",labelStyle:r}})=>t.jsx("div",{style:{width:e>-1?e:void 0,height:o,display:"flex",alignItems:"center",...r},children:t.jsx(l.Text,{size:"md",variant:r?.color?"inherit":"primary",truncation:"ellipsis",children:i})}),M=(e,t,o)=>({maxWidth:o,maxHeight:e.height,data:t[e.index]});class V{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let o=this.length++;for(;o>0;){const e=o-1>>1,i=this.values[e];if(t>=i)break;this.ids[o]=this.ids[e],this.values[o]=i,o=e}this.ids[o]=e,this.values[o]=t}pop(){if(0===this.length)return;const e=this.ids[0];if(this.length--,this.length>0){const e=this.ids[0]=this.ids[this.length],t=this.values[0]=this.values[this.length],o=this.length>>1;let i=0;for(;i<o;){let e=1+(i<<1);const o=e+1;let r=this.ids[e],a=this.values[e];const n=this.values[o];if(o<this.length&&n<a&&(e=o,r=this.ids[o],a=n),a>=t)break;this.ids[i]=r,this.values[i]=a,i=e}this.ids[i]=e,this.values[i]=t}return e}peek(){if(0!==this.length)return this.ids[0]}peekValue(){if(0!==this.length)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const z=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class B{static from(e){if(!e||void 0===e.byteLength||e.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[t,o]=new Uint8Array(e,0,2);if(251!==t)throw new Error("Data does not appear to be in a Flatbush format.");const i=o>>4;if(3!==i)throw new Error(`Got v${i} data when expected v3.`);const r=z[15&o];if(!r)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[n]=new Uint32Array(e,4,1);return new B(n,a,r,void 0,e)}constructor(e,t=16,o=Float64Array,i=ArrayBuffer,r){if(void 0===e)throw new Error("Missing required argument: numItems.");if(isNaN(e)||e<=0)throw new Error(`Unexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535);let a=e,n=a;this._levelBounds=[4*a];do{a=Math.ceil(a/this.nodeSize),n+=a,this._levelBounds.push(4*n)}while(1!==a);this.ArrayType=o,this.IndexArrayType=n<16384?Uint16Array:Uint32Array;const s=z.indexOf(this.ArrayType),d=4*n*this.ArrayType.BYTES_PER_ELEMENT;if(s<0)throw new Error(`Unexpected typed array class: ${o}.`);r&&void 0!==r.byteLength&&!r.buffer?(this.data=r,this._boxes=new this.ArrayType(this.data,8,4*n),this._indices=new this.IndexArrayType(this.data,8+d,n),this._pos=4*n,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new i(8+d+n*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,4*n),this._indices=new this.IndexArrayType(this.data,8+d,n),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,48+s]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e),this._queue=new V}add(e,t,o,i){const r=this._pos>>2,a=this._boxes;return this._indices[r]=r,a[this._pos++]=e,a[this._pos++]=t,a[this._pos++]=o,a[this._pos++]=i,e<this.minX&&(this.minX=e),t<this.minY&&(this.minY=t),o>this.maxX&&(this.maxX=o),i>this.maxY&&(this.maxY=i),r}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const e=this._boxes;if(this.numItems<=this.nodeSize)return e[this._pos++]=this.minX,e[this._pos++]=this.minY,e[this._pos++]=this.maxX,void(e[this._pos++]=this.maxY);const t=this.maxX-this.minX||1,o=this.maxY-this.minY||1,i=new Uint32Array(this.numItems);for(let r=0,a=0;r<this.numItems;r++){const n=e[a++],s=e[a++],d=e[a++],l=e[a++],c=Math.floor(65535*((n+d)/2-this.minX)/t),h=Math.floor(65535*((s+l)/2-this.minY)/o);i[r]=W(c,h)}H(i,e,this._indices,0,this.numItems-1,this.nodeSize);for(let t=0,o=0;t<this._levelBounds.length-1;t++){const i=this._levelBounds[t];for(;o<i;){const t=o;let r=e[o++],a=e[o++],n=e[o++],s=e[o++];for(let t=1;t<this.nodeSize&&o<i;t++)r=Math.min(r,e[o++]),a=Math.min(a,e[o++]),n=Math.max(n,e[o++]),s=Math.max(s,e[o++]);this._indices[this._pos>>2]=t,e[this._pos++]=r,e[this._pos++]=a,e[this._pos++]=n,e[this._pos++]=s}}}search(e,t,o,i,r){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let a=this._boxes.length-4;const n=[],s=[];for(;void 0!==a;){const d=Math.min(a+4*this.nodeSize,F(a,this._levelBounds));for(let l=a;l<d;l+=4){if(o<this._boxes[l])continue;if(i<this._boxes[l+1])continue;if(e>this._boxes[l+2])continue;if(t>this._boxes[l+3])continue;const d=0|this._indices[l>>2];a>=4*this.numItems?n.push(d):(void 0===r||r(d))&&s.push(d)}a=n.pop()}return s}neighbors(e,t,o=1/0,i=1/0,r){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let a=this._boxes.length-4;const n=this._queue,s=[],d=i*i;e:for(;void 0!==a;){const i=Math.min(a+4*this.nodeSize,F(a,this._levelBounds));for(let o=a;o<i;o+=4){const i=0|this._indices[o>>2],s=_(e,this._boxes[o],this._boxes[o+2]),l=_(t,this._boxes[o+1],this._boxes[o+3]),c=s*s+l*l;c>d||(a>=4*this.numItems?n.push(i<<1,c):(void 0===r||r(i))&&n.push(1+(i<<1),c))}for(;n.length&&1&n.peek();){if(n.peekValue()>d)break e;if(s.push(n.pop()>>1),s.length===o)break e}a=n.length?n.pop()>>1:void 0}return n.clear(),s}}function _(e,t,o){return e<t?t-e:e<=o?0:e-o}function F(e,t){let o=0,i=t.length-1;for(;o<i;){const r=o+i>>1;t[r]>e?i=r:o=r+1}return t[o]}function H(e,t,o,i,r,a){if(Math.floor(i/a)>=Math.floor(r/a))return;const n=e[i+r>>1];let s=i-1,d=r+1;for(;;){do{s++}while(e[s]<n);do{d--}while(e[d]>n);if(s>=d)break;U(e,t,o,s,d)}H(e,t,o,i,d,a),H(e,t,o,d+1,r,a)}function U(e,t,o,i,r){const a=e[i];e[i]=e[r],e[r]=a;const n=4*i,s=4*r,d=t[n],l=t[n+1],c=t[n+2],h=t[n+3];t[n]=t[s],t[n+1]=t[s+1],t[n+2]=t[s+2],t[n+3]=t[s+3],t[s]=d,t[s+1]=l,t[s+2]=c,t[s+3]=h;const u=o[i];o[i]=o[r],o[r]=u}function W(e,t){let o=e^t,i=65535^o,r=65535^(e|t),a=e&(65535^t),n=o|i>>1,s=o>>1^o,d=r>>1^i&a>>1^r,l=o&r>>1^a>>1^a;o=n,i=s,r=d,a=l,n=o&o>>2^i&i>>2,s=o&i>>2^i&(o^i)>>2,d^=o&r>>2^i&a>>2,l^=i&r>>2^(o^i)&a>>2,o=n,i=s,r=d,a=l,n=o&o>>4^i&i>>4,s=o&i>>4^i&(o^i)>>4,d^=o&r>>4^i&a>>4,l^=i&r>>4^(o^i)&a>>4,o=n,i=s,r=d,a=l,d^=o&r>>8^i&a>>8,l^=i&r>>8^(o^i)&a>>8,o=d^d>>1,i=l^l>>1;let c=e^t,h=i|65535^(c|o);return c=16711935&(c|c<<8),c=252645135&(c|c<<4),c=858993459&(c|c<<2),c=1431655765&(c|c<<1),h=16711935&(h|h<<8),h=252645135&(h|h<<4),h=858993459&(h|h<<2),h=1431655765&(h|h<<1),(h<<1|c)>>>0}const Z=e=>{const t=e.map((e=>e.taskObjs.length)).reduce(((e,t)=>e+t),0),o=new B(t);return e.forEach((e=>e.taskObjs.forEach((({overallStartTime:e,overallEndTime:t,y:i,height:r})=>{o.add(e,i,t,i+r)})))),o.finish(),o},Y=(e,t,o,i,r=!0)=>r?e<=i&&o<=t:e<i&&o<t,X=(e,t)=>Y(e.overallStartTime,e.overallEndTime,t.overallStartTime,t.overallEndTime,!1),G=(e,t,o)=>{const i=((e,t,o)=>{if(0===e.length)return 0;let i=0,r=e.length;for(;i<r;){const o=Math.floor((i+r)/2);e[o]<t?i=o+1:r=o}if(i<e.length&&(e[i]===t||"successor"===o))return i;return i>0?i-1:0})(e,t,"predecessor");let r=i;for(let t=i;t<e.length&&e[t]<=o;t++)r=t;return{minRowInd:i,maxRowInd:r}},K=e=>({start:e.start?e.start:e.end,end:e.end?e.end:e.start}),N=e=>!(!e||"none"===e),$=(e,t,o,i)=>{const r=N(i.selectionMode),a=new Set(i.selectedIds);let n=0;const s=e.map(((i,s)=>{const d=i.tasks.map(((e,o)=>{const{start:i,end:n}=K(e),d=h.parseDate(i),l=h.parseDate(n);return{id:e.id,renderIndex:0,index:o,rowIndex:s,y:-1,startTime:d,endTime:l,overallStartTime:d,overallEndTime:l,rowLevel:0,height:void 0!==e.height?e.height:t.taskHeight,borderRadius:void 0!==e.borderRadius?e.borderRadius.toString():t.taskBorderRadius,fill:e.color?e.color:t.taskBgColor,stroke:t.taskBorderColor,strokeWidth:1,isSelectable:r,isSelected:a.has(e.id),selectionEffect:{stroke:t.taskEffectBorderColor,strokeWidth:2,padding:2},hoverEffect:{stroke:t.taskEffectBorderColor,strokeWidth:1,padding:0,shadow:{...t.taskEffectBoxShadow}},focusEffect:{stroke:t.taskEffectBorderColor,strokeWidth:1,padding:2}}}));d.sort(((e,t)=>e.startTime-t.startTime)),d.forEach(((e,t)=>e.renderIndex=t));const l=(({rowHeight:e,rowY:t,taskObjs:o,resolvedVars:i})=>{if(0===o.length)return(e=>e.rowPaddingTop+e.taskHeight+e.rowPaddingBottom)(i);o[0].rowLevel=0,o[0].y=0;const r=[[o[0]]],a=[o[0]];for(let e=1;e<o.length;e++){const t=o[e],i="stack",n=o[e-1];X(t,n)?r[r.length-1].push(t):r.push([t]);let s,d=0;switch(i){case"stack":{let e=!0;for(let o=0;o<a.length;o++){if(s=void 0,!X(t,a[o])){s=a[o],a[o]=t,e=!1;break}d+=1}e&&a.push(t),t.y=0,s&&(t.previousAdjacentTaskObj=s,s.nextAdjacentTaskObj=t);break}default:return i}t.rowLevel=d}const n=i.rowPaddingTop,s=i.rowPaddingBottom,d=a.map((()=>0));if(void 0===e){o.forEach((e=>{e.height>d[e.rowLevel]&&(d[e.rowLevel]=e.height)}));const e=d.map((e=>e+n+s)).reduce(((e,t,o)=>(e.push((e[o-1]||0)+t),e)),[]);o.forEach((t=>{t.y+=(e[t.rowLevel-1]||0)+n}))}const l=r.map((e=>{let t=0;return e.forEach((e=>{const o=e.y+e.height;o>t&&(t=o)})),t}));let c;return void 0===e?(c=l.reduce(((e,t)=>Math.max(e,t)))+n,r.forEach((e=>{e.forEach((e=>{const o=d[e.rowLevel];e.y+=(o-e.height)/2+t}))}))):(c=e,r.forEach(((e,o)=>{const i=l[o];let r=Number.MAX_VALUE;e.forEach((e=>{e.y+=Math.floor((c-e.height)/2),e.y<r&&(r=e.y)}));const a=Math.floor((c-i)/2)-r;e.forEach((e=>{e.y+=t+a}))}))),c})({rowHeight:i.height,rowY:n,taskObjs:d,resolvedVars:t});((e,t)=>{e.forEach((e=>{const{index:o,rowIndex:i}=e,r=t[i].tasks[o].label;r&&(e.labelObj={startTime:e.startTime,endTime:e.endTime,label:r,isInner:!0,position:"center"})}))})(d,e);const c={id:i.id,y:n,height:l,index:s,isSelected:d.some((e=>e.isSelected)),taskObjs:d},u="on"===o.horizontal?1:0;return n+=l+u,c})),d=s[s.length-1],l=d?d.y+d.height:0,c=new Map;s.forEach((e=>e.taskObjs.forEach((e=>c.set(e.id,e)))));const u=new Map;s.forEach((e=>u.set(e.id,e)));const m=(e=>({tasks:Z(e)}))(s);return{rowData:e,rowObjs:s,rowPadding:t.rowPaddingTop,totalRowsHeight:l,gridlines:o,spatialIndex:m,idRowObjMap:u,idTaskObjMap:c,getTaskDataById:t=>{const o=c.get(t);return o&&e[o.rowIndex].tasks[o.index]}}},q=(e,t,o,i,r,a)=>{const n=h.getTimePosition(e.startTime,t,o,i,a),s=h.getTimePosition(e.endTime,t,o,i,a);return{...e,x:a?s:n,y:e.y-r,width:a?n-s:s-n}},J=(e,t,o,i,r,a,n)=>{const s=i,d=i+a,l=e.rowObjs.map((e=>e.y)),{minRowInd:c,maxRowInd:u}=G(l,s,d),m=[];for(let a=c;a<=u;a++){const s=e.rowObjs[a],d=s.taskObjs.filter((({overallStartTime:e,overallEndTime:i})=>Y(e,i,t,o))).map((e=>q(e,t,o,r,i,n))),l={...s,y:s.y-i,taskObjs:d};m.push(l)}const g=[];m.forEach((i=>{i.taskObjs.forEach((({index:i,rowIndex:a,labelObj:s,y:d,height:l})=>{const c=((e,t,o,i,r,a,n,s)=>{if(!e)return;const d=h.getTimePosition(e.startTime,r,a,n,s),l=h.getTimePosition(e.endTime,r,a,n,s);let c;switch(e.position){case"center":c="center";break;case"start":c=s?"right":"left";break;case"end":c=s?"left":"right";break;default:return e.position}return{x:s?l:d,y:o,width:s?d-l:l-d,height:i,label:e.label,isInner:e.isInner,textAlign:c,labelStyle:t}})(s,e.rowData[a].tasks[i].labelStyle,d,l,t,o,r,n);c&&g.push(c)}))}));const w="on"===e.gridlines.horizontal?m.map((({y:e,height:t})=>e+t+.5)):void 0,p=new Map;return m.forEach((e=>e.taskObjs.forEach((e=>p.set(e.id,e))))),{spatialIndex:e.spatialIndex,gridlines:e.gridlines,horizontalGridlinesPos:w,rowData:e.rowData,allRowObjs:e.rowObjs,allIdTaskObjMap:e.idTaskObjMap,allIdRowObjMap:e.idRowObjMap,rowPadding:e.rowPadding,rowObjs:m,taskLabelObjs:g,idTaskObjMap:p,getTaskDataById:e.getTaskDataById}},Q=(e,t,o,i)=>{const r=t[e.rowIndex].tasks[e.index],a=void 0!==r.accessibleLabel?r.accessibleLabel:((e,t,o,i)=>{const r=t[e.rowIndex],a=r.tasks[e.index],{start:n,end:s}=K(a),d=n===s,l=[];if(r.label){const e=i.vis_labelAndValue({LABEL:i.gantt_labelRow(),VALUE:r.label});l.push(e)}if(d){const e=i.vis_labelAndValue({LABEL:i.gantt_labelDate(),VALUE:o(n)});l.push(e)}else{const e=i.vis_labelAndValue({LABEL:i.gantt_labelStart(),VALUE:o(n)}),t=i.vis_labelAndValue({LABEL:i.gantt_labelEnd(),VALUE:o(s)});l.push(e),l.push(t)}if(a.label){const e=i.vis_labelAndValue({LABEL:i.gantt_labelLabel(),VALUE:a.label});l.push(e)}return l.join("; ")})(e,t,o,i);return c.generateAriaLabel(i,a,{isSelected:e.isSelected})};function ee({rowObj:e,rowData:o,isRowSelected:r,isFocused:n,isHorizontalGridlinesVisible:s,ariaActive:d,children:l}){const c=((e,t)=>{const o=t[e.index];return o.accessibleLabel||o.label})(e,o);return t.jsx("div",{id:d?.dataId===e.id?d.ariaId:void 0,"data-oj-private-row-index":e.index,role:"row","aria-label":c,class:i.classNames([a.rowAxisStyles.labelContainer,r&&a.rowBackgroundStyles.selected,n&&a.rowAxisStyles.labelContainerFocused,s&&a.rowAxisStyles.withLabelSeparatorBottom]),children:t.jsx("div",{role:"rowheader",children:l})},e.id)}function te({content:e,placement:i="top-end-corner",offset:r,borderColor:a,anchor:n,targetFocusRef:s}){const d=o.useRef(x.useId()),[l,c]=o.useState({x:0,y:0}),h=r||{mainAxis:f.DATATIP_OFFSET,crossAxis:-1*f.DATATIP_OFFSET},u=o.useRef(null),g="element"===n?u:{current:l};return{datatipContent:null!=e?t.jsx(m.Layer,{children:t.jsx(p.Floating,{anchorRef:g,placement:i,offsetValue:h,flipOptions:{crossAxis:!0,mainAxis:!0},shiftOptions:{crossAxis:!1,mainAxis:!1},children:t.jsx("div",{id:d.current,className:b.styles.visDatatipStyle,style:{borderColor:a},children:e})})}):null,datatipProps:{"aria-describedby":d.current,onPointerEnter:e=>{e.eventPhase!==Event.AT_TARGET&&e.eventPhase!==Event.BUBBLING_PHASE||(u.current=e.currentTarget)},onPointerLeave:()=>{c({x:-1e4,y:-1e4})},onPointerMove:e=>{c({x:e.clientX,y:e.clientY})},onFocus:e=>{e.eventPhase!==Event.AT_TARGET&&e.eventPhase!==Event.BUBBLING_PHASE||(u.current=e.target)},onShowFocusDatatip:()=>{u.current=s.current}}}}const oe=({rowObjs:e,hoverProps:t})=>({onPointerMove:o=>{const i=(t=>{const{clientX:o,clientY:i}=t,r=document.elementsFromPoint(o,i);for(let t=0;t<r.length;t++){const o=r[t].dataset.ojRowIndex;if(o)return e[Number(o)].id}})(o);i!==t.hoveredRowLabelId&&t.onRowLabelHoverChange({id:i})}});function ie({innerRef:e,scrollPosition:o,resolvedWidth:r,resolvedMaxWidth:n,currentRowLabel:s,currentRowLabelInteraction:d,hoveredRowLabelId:l,onRowLabelHoverChange:c,layoutObj:{labelPaddingInlineStart:h,labelPaddingInlineEnd:m,rowData:g,rowObjs:w,idRowObjMap:p,isHorizontalGridlinesVisible:b},ariaActive:x,children:f}){const T=r!==1/0?r:void 0,k=n!==1/0?n:void 0,A=Math.min(r,n),R=A===1/0?-1:A-(h+m),j=oe({rowObjs:w,hoverProps:{hoveredRowLabelId:l,onRowLabelHoverChange:c}}),{datatipContent:S,datatipProps:C}=(({targetRef:e,rowData:t,hoveredRowObj:o,focusedRowObj:i,currentRowLabelInteraction:r,rowAxisRegion:a})=>{const{direction:n}=u.useUser(),s="rtl"===n,d={hover:{rowObj:o,anchor:"pointer"},focus:{rowObj:i,anchor:"element"},none:{rowObj:void 0,anchor:"pointer"}},{anchor:l,rowObj:c}=d[r],h=c?t[c.index].accessibleLabel:void 0,m=c&&"element"===l?{x:0,y:c.y+a.y,width:a.w,height:c.height}:void 0;return te({content:h,anchor:l,placement:"top-start",offset:v.calculateOffset(s,a.w,m),targetFocusRef:e})})({rowData:g,hoveredRowObj:l&&p.get(l),focusedRowObj:s?.isFocused?p.get(s.id):void 0,currentRowLabelInteraction:d,rowAxisRegion:{x:0,y:-o,w:2*(h+m),h:-1},targetRef:e});return t.jsxs("div",{ref:e,...y.mergeProps(j,C),class:i.classNames([a.rowAxisStyles.base,b&&a.rowAxisStyles.withSeparatorTop]),style:{width:T,maxWidth:k},children:[t.jsx("div",{role:"grid",class:a.rowAxisStyles.contentContainer,style:{top:-o},children:w.map((e=>t.jsx(ee,{ariaActive:x,rowObj:e,rowData:g,isRowSelected:e.isSelected,isFocused:!!s?.isFocused&&s.id===e.id,isHorizontalGridlinesVisible:b,children:f(M(e,g,R))})))}),S]})}const re=(e,t,o,i,r)=>{const a=((e,t,o)=>{const i=t.max-o.max,r=t.min-o.min,a=e*(t.max-t.min),n=Math.max(i,Math.min(a,r));return{min:Math.max(0,t.min-n),max:t.max-n}})(e,t,i),{min:n,max:s}=o,d=a.min!==n||a.max!==s;return d&&r(a),{newRange:a,isRangeChanged:d}},ae=({rowObjs:e})=>{if(0!==e.length&&0!==e[0].taskObjs.length)return{id:e[0].taskObjs[0].id,isFocused:!0}},ne=(e,{rowObjs:t,idTaskObjMap:o},i)=>{const r=o.get(e);if(!r)return;const a="next"===i?1:-1,{rowIndex:n,renderIndex:s}=r,d=t[n].taskObjs[s+a];if(d)return d.id;const l=t[n+a];if(l){const e="next"===i?l.taskObjs[0]:l.taskObjs[l.taskObjs.length-1];if(e)return e.id}},se=(e,{rowObjs:t,idTaskObjMap:o},i)=>{const r=o.get(e);if(!r)return;const a="down"===i?1:-1,{rowIndex:n}=r,s=t[n+a];if(!s)return;const d=s.taskObjs[0];return d?d.id:void 0},de=(e,t)=>ne(e,t,"next"),le=(e,t)=>ne(e,t,"prev"),ce=(e,{rowObjs:t,idRowObjMap:o},i)=>{const r=o.get(e);if(!r)return;const a="down"===i?1:-1,{index:n}=r,s=t[n+a];return s?s.id:void 0},he=(e,t,o,i="auto",r="auto",a=0)=>{const n=Math.min(e.x-t.x-a,0),s=Math.max(0,e.x+e.w-(t.x+t.w)+a),d=o?s:n,l=o?n:s;let c=0;switch(i){case"start":c=d;break;case"end":c=l;break;case"auto":c=(o?l<0:l>0)?l:d;break;default:return i}const h=Math.min(e.y-t.y-a,0),u=Math.max(0,e.y+e.h-(t.y+t.h)+a);let m=0;switch(r){case"top":m=h;break;case"bottom":m=u;break;case"auto":m=h<0?h:u;break;default:return r}return{dx:-c,dy:-m}},ue=({viewportLayout:e,dataBodyWidth:t,dataBodyHeight:i,viewportStartTime:r,viewportEndTime:a,scrollPosition:n,...s})=>{const{direction:d}=u.useUser(),l="rtl"===d,c=(({getRangeX:e,getRangeY:t,globalRangeX:i,globalRangeY:r,onRangeXChange:a,onRangeYChange:n,isDisabled:s=!1})=>{const d=o.useRef({min:0,max:0}),l=o.useRef({min:0,max:0});return s?{}:{onKbPanHorizontal:t=>{const{detail:{rangeRatio:o}}=t,{newRange:r}=re(o,e(),d.current,i,a);d.current=r},onKbPanVertical:e=>{const{detail:{rangeRatio:o}}=e,{newRange:i}=re(o,t(),l.current,r,n);l.current=i}}})(s),h=o.useRef({min:0,max:0}),m=o.useRef({min:0,max:0}),g=(e=0,o=0)=>{if(0!==e){const{newRange:o}=re(e/t,s.getRangeX(),h.current,s.globalRangeX,s.onRangeXChange);h.current=o}if(0!==o){const{newRange:e}=re(o/i,s.getRangeY(),m.current,s.globalRangeY,s.onRangeYChange);m.current=e}};return s.isDisabled?{}:{...c,onKbPanTaskIntoView:o=>{let s=e.idTaskObjMap.get(o.detail.id);if(!s){const i=e.allIdTaskObjMap.get(o.detail.id);if(!i)return;s=q(i,r,a,t,n,l)}const{x:d,y:c,width:h,height:u}=s,m={x:d,y:c,w:h,h:u},w={x:0,y:0,w:t,h:i},p=e.rowPadding,{dx:b,dy:x}=he(m,w,l,"auto","auto",p);g(b,x)},onKbPanRowIntoView:o=>{const r=e.allIdRowObjMap.get(o.detail.id);if(!r)return;const a={x:0,y:r.y-n,w:t,h:r.height},s={x:0,y:0,w:t,h:i},d=e.rowPadding,{dy:c}=he(a,s,l,"auto","auto",d);g(0,c)}}},me=({captureTargetRef:e,width:t,height:i,viewportStartTime:r,viewportEndTime:a,majorAxisScale:n,minorAxisScale:s,startTime:d,endTime:l,zoomParameters:c,scrollPosition:m,dataBodyHeight:g,totalRowsHeight:w,viewportLayout:p,onViewportChange:b,onScrollPositionChange:x,onCursorChange:f,isPanDisabled:v,isZoomDisabled:k})=>{const A={captureTargetRef:e,width:t,height:i,getRangeX:()=>({min:r,max:a}),getRangeY:()=>({min:m,max:m+g}),globalRangeX:{min:d,max:l},globalRangeY:{min:0,max:w},onRangeXChange:e=>{b?.({viewportStart:h.getISOString(e.min),viewportEnd:h.getISOString(e.max),majorAxisScale:n,minorAxisScale:s})},onRangeYChange:e=>{x?.({y:e.min})},isDisabled:v},{getZoomOrderViewDurationThresholds:R,...j}=c,S={captureTargetRef:e,width:t,...j,zoomOrderViewDurationThresholds:R(t),onViewportChange:b,isDisabled:k},C=(({captureTargetRef:e,width:t,height:i,getRangeX:r,getRangeY:a,globalRangeX:n,globalRangeY:s,onRangeXChange:d,onRangeYChange:l,onDragPanStart:c,onDragPanEnd:m,isDisabled:g=!1})=>{const{direction:w}=u.useUser(),p=o.useRef({min:0,max:0}),b=o.useRef({min:0,max:0}),x=o.useRef({min:0,max:0}),f=o.useRef({min:0,max:0}),v=o.useRef(!1),y=h.useDrag({captureTargetRef:e,onDragStart:()=>{x.current=r(),f.current=a(),c&&c()},onDragMove:({dx:e,dy:o})=>{v.current=!0;const{newRange:r}=re(("rtl"===w?-1:1)*e/t,x.current,p.current,n,d);p.current=r;const{newRange:a}=re(o/i,f.current,b.current,s,l);b.current=a},onDragEnd:({originalEvent:e})=>{v.current&&e.preventDefault(),v.current=!1,m&&m()},isDisabled:g});return g?{}:y})({...A,onDragPanStart:()=>f?.({cursor:"grabbing"}),onDragPanEnd:()=>f?.({cursor:"grabbingUnset"})}),I=(({width:e,height:t,getRangeX:i,getRangeY:r,globalRangeX:a,globalRangeY:n,onRangeXChange:s,onRangeYChange:d,isDisabled:l=!1})=>{const{direction:c}=u.useUser(),m=o.useRef({min:0,max:0}),g=o.useRef({min:0,max:0}),w=h.useWheel({onWheel:({deltaX:o,deltaY:l,ctrlKey:h})=>{if(h)return;const{newRange:u}=re(("rtl"===c?-1:1)*o/e,i(),m.current,a,s);m.current=u;const{newRange:w}=re(l/t,r(),g.current,n,d);g.current=w},isDisabled:l});return l?{}:w})(A),P=ue({...A,viewportLayout:p,dataBodyWidth:t,dataBodyHeight:g,viewportStartTime:r,viewportEndTime:a,scrollPosition:m}),L=(({captureTargetRef:e,width:t,startTime:o,endTime:i,viewportStartTime:r,viewportEndTime:a,majorAxisZoomOrder:n,majorAxisZoomOrderIndex:s,minorAxisZoomOrder:d,minorAxisZoomOrderIndex:l,zoomOrderViewDurationThresholds:c,minZoomViewportDuration:m,maxZoomViewportDuration:g,onViewportChange:w,isDisabled:p=!1})=>{const{direction:b}=u.useUser(),x="rtl"===b,f=T.usePinch({captureTargetRef:e,onPinchZoomChange:({origin:{x:e},delta:u})=>{const p=h.getPositionTime(e,r,a,t,x);h.zoomTime(p,r,a,o,i,h.getGestureZoomFactor(u),m,g,c,d,l,n,s,w)},isDisabled:p});return p?{}:f})(S),O=(({width:e,startTime:t,endTime:o,viewportStartTime:i,viewportEndTime:r,majorAxisZoomOrder:a,majorAxisZoomOrderIndex:n,minorAxisZoomOrder:s,minorAxisZoomOrderIndex:d,zoomOrderViewDurationThresholds:l,minZoomViewportDuration:c,maxZoomViewportDuration:m,onViewportChange:g,isDisabled:w=!1})=>{const{direction:p}=u.useUser(),b="rtl"===p,x=h.useWheel({onWheel:({x:u,deltaY:w,ctrlKey:p})=>{if(!p)return;const x=h.getPositionTime(u,i,r,e,b);h.zoomTime(x,i,r,t,o,h.getGestureZoomFactor(w),c,m,l,s,d,a,n,g)},isDisabled:w});return w?{}:x})(S),E=(({startTime:e,endTime:t,viewportStartTime:o,viewportEndTime:i,majorAxisZoomOrder:r,majorAxisZoomOrderIndex:a,minorAxisZoomOrder:n,minorAxisZoomOrderIndex:s,zoomOrderViewDurationThresholds:d,minZoomViewportDuration:l,maxZoomViewportDuration:c,onViewportChange:u,isDisabled:m=!1})=>m?{}:{onKbZoomIn:m=>{const g=o+(i-o)/2;h.zoomTime(g,o,i,e,t,m.detail.zoomFactor,l,c,d,n,s,r,a,u)},onKbZoomOut:m=>{const g=o+(i-o)/2;h.zoomTime(g,o,i,e,t,m.detail.zoomFactor,l,c,d,n,s,r,a,u)}})(S);return{gestureProps:y.mergeProps(C,I,P,L,O,E)}},ge=({targetRef:e,datatip:o,rowData:i,dateFormatter:r,hoveredTaskObj:a,focusedTaskObj:n,currentTaskInteraction:s,dataBodyRegion:d})=>{const{direction:l}=u.useUser(),c="rtl"===l,h=R.useTranslationBundle("@oracle/oraclejet-preact"),m={hover:{taskObj:a,anchor:"pointer"},focus:{taskObj:n,anchor:"element"},none:{taskObj:void 0,anchor:"pointer"}},{anchor:g,taskObj:w}=m[s],p=o??(e=>{const{translations:o,dateFormatter:i}=e;return({data:e,rowData:r})=>{if(void 0!==e.accessibleLabel)return{content:e.accessibleLabel};const{start:a,end:n}=K(e),s=a===n,d=[];return r.label&&d.push({key:o.gantt_labelRow(),value:r.label}),s?d.push({key:o.gantt_labelDate(),value:i(a)}):(d.push({key:o.gantt_labelStart(),value:i(a)}),d.push({key:o.gantt_labelEnd(),value:i(n)})),e.label&&d.push({key:o.gantt_labelLabel(),value:e.label}),{content:t.jsx(A.VisTabularDatatip,{tableData:d})}}})({translations:h,dateFormatter:r,isRTL:c}),{content:b,borderColor:x}=w?p(((e,t)=>{const{index:o,rowIndex:i}=t;return{data:e[i].tasks[o],rowData:e[i]}})(i,w)):{content:void 0,borderColor:void 0},f=w&&"element"===g?{x:w.x,y:w.y+d.y,width:w.width,height:w.height}:void 0;return te({content:b,anchor:g,placement:"top-start",offset:v.calculateOffset(c,d.w,f),borderColor:x,targetFocusRef:e})};function we({innerRef:e,isRTL:r,scrollPosition:n,onScrollPositionChange:s,isViewportDefined:l,onViewportChange:c,zoomParameters:u,zooming:m,selectedIds:g,selectionMode:w,onSelectionChange:p,hoveredTaskId:b,onTaskHoverChange:x,currentTask:f,onCurrentTaskChange:v,currentTaskInteraction:T,ariaActive:A,getTimeAxesLayout:R,getResolvedViewportLayout:j,rowDataLayout:S,rowAxisSeparator:C,datatip:I,majorAxis:P,minorAxis:L,dataBody:O}){return l?t.jsx(d.TrackResizeContainer,{width:"100%",height:"100%",children:function(d,l){const E=R(d),{position:D,majorAxis:M,minorAxis:V,viewportStartTime:z,viewportEndTime:B,startTime:_,endTime:F}=E,H=M&&M.zoomOrder[M.zoomOrderIndex],U=V.zoomOrder[V.zoomOrderIndex],W=M?M.height:0,{height:Z}=V,Y=l-(W+Z),X=j(S,z,B,n,d,Y,r),G=((e,t)=>{const o=e.selectionProps.selectedIds||[],i=[];o.forEach((e=>{const o=t.get(e);o&&i.push(o)}));const r=N(e.selectionProps.selectionMode)?e.hoverProps.hoveredTaskId:void 0,a=void 0!==r?t.get(r):void 0,n=e.currentProps.currentTask,s=!0===n?.isFocused,d=n?.id,l=s&&void 0!==d?t.get(d):void 0;return{selectedTaskObjs:i,hoveredTaskObj:a,focusedTaskObj:l}})({selectionProps:{selectedIds:g,selectionMode:w},hoverProps:{hoveredTaskId:b},currentProps:{currentTask:f}},X.idTaskObjMap),K=h.getDefaultDateFormatter(U,z),$=M&&P(M),q=L(V),J=O({width:d,height:Y,viewportLayout:X,minorAxisLayout:V,effectsLayout:G,dateFormatter:K,ariaActiveTask:A}),Q={top:{components:[$,q,J],dataBodyPos:l-Y},bottom:{components:[J,q,$],dataBodyPos:0}},[ee,te]=o.useState(),oe=e=>te((t=>void 0===t?e.cursor:"grabbing"===t&&"grabbingUnset"!==e.cursor?"grabbing":"grabbingUnset"!==e.cursor&&"pointerUnset"!==e.cursor?e.cursor:void 0)),{gestureProps:ie}=me({captureTargetRef:e,width:d,height:l,viewportStartTime:z,viewportEndTime:B,majorAxisScale:H,minorAxisScale:U,startTime:_,endTime:F,zoomParameters:u,scrollPosition:n,dataBodyHeight:Y,totalRowsHeight:S.totalRowsHeight,viewportLayout:X,onViewportChange:e=>{c&&(c(e),x({id:void 0}))},onScrollPositionChange:e=>{s&&(s(e),x({id:void 0}))},onCursorChange:oe,isPanDisabled:!1,isZoomDisabled:"off"===m}),re={x:0,y:Q[D].dataBodyPos,w:d,h:Y},{gestureProps:ae,selectionContent:ne}=(({viewportLayout:e,viewportYOffset:t,dataBodyRegion:o,viewportStartTime:i,viewportEndTime:r,width:a,isRTL:n,selectionProps:s,hoverProps:d,currentProps:l,onCursorChange:c})=>{const{x:u,y:m,w:g,h:w}=o,p=N(s.selectionMode),b=o=>{const s=e.allRowObjs,d=e.spatialIndex,{offsetX:l,offsetY:c}=o;if(l<u||l>u+g||c<m||c>m+w)return;const p={time:h.getPositionTime(l,i,r,a,n),y:c+t},b=((e,t,{time:o,y:i})=>{const r=t.search(o,i,o,i);if(0===r.length)return;let a=r[0];for(let t=0;t<e.length;t++){const o=e[t];for(let e=0;e<o.taskObjs.length;e++){if(0===a)return{rowIndex:t,taskIndex:e};a-=1}}})(s,d.tasks,p);if(!b)return;const{rowIndex:x,taskIndex:f}=b;return s[x].taskObjs[f].id},x={onPointerMove:e=>{const t=b(e);t!==d.hoveredTaskId&&d.onTaskHoverChange({id:t}),p&&c?.({cursor:void 0!==t?"pointer":"pointerUnset"})}},f={onPointerUp:e=>{const t=b(e);void 0!==t&&(p&&c?.({cursor:"pointer"}),t!==l?.currentTask?.id&&l.onCurrentTaskChange({id:t,isFocused:!1}))}},{selectionProps:{onKeyUp:v,...T},selectionContent:A}=k.useSelection({idExtracter:b,selection:s.selectedIds,selectionMode:s.selectionMode,onChange:s.onSelectionChange,getDataById:e.getTaskDataById});return{gestureProps:y.mergeProps(x,f,T),selectionContent:A}})({viewportLayout:X,viewportYOffset:n-Q[D].dataBodyPos,dataBodyRegion:re,viewportStartTime:z,viewportEndTime:B,width:d,isRTL:r,selectionProps:{selectedIds:g,selectionMode:w,onSelectionChange:p},hoverProps:{hoveredTaskId:b,onTaskHoverChange:x},currentProps:{currentTask:f,onCurrentTaskChange:v},onCursorChange:oe}),{datatipContent:se,datatipProps:de}=ge({datatip:I,rowData:X.rowData,dateFormatter:K,hoveredTaskObj:b&&X.idTaskObjMap.get(b),focusedTaskObj:G.focusedTaskObj,currentTaskInteraction:T,dataBodyRegion:re,targetRef:e}),le=y.mergeProps(ie,ae,de);return t.jsxs("div",{ref:e,...le,class:i.classNames([a.timeAxisDataBodyStyles.base,a.timeAxisDataBodyStyles.pannable,r?C&&a.timeAxisDataBodyStyles.withRowAxisSeparatorRight:C&&a.timeAxisDataBodyStyles.withRowAxisSeparatorLeft]),style:{cursor:ee},children:[Q[D].components,se,ne]})}}):t.jsx(d.TrackResizeContainer,{width:"100%",height:"100%",children:e=>{const t=R(e),{majorAxis:o,minorAxis:i,viewportStartTime:r,viewportEndTime:a}=t,n=o&&o.zoomOrder[o.zoomOrderIndex],s=i.zoomOrder[i.zoomOrderIndex];return c?.({viewportStart:h.getISOString(r),viewportEnd:h.getISOString(a),majorAxisScale:n,minorAxisScale:s}),null}})}function pe({width:e,height:o,positions:i}){const r=i.map((t=>`M0,${t} H${e}`)).join(" ");return t.jsx("svg",{width:e,height:o,children:t.jsx("path",{class:a.horizontalGridlinesStyles.base,d:r})})}function be({width:e,height:i,rowData:r,dateFormatter:a,ariaActiveId:n,ariaActiveTaskObj:s}){const d=R.useTranslationBundle("@oracle/oraclejet-preact"),l=o.useRef(0),c=o.useMemo((()=>{const e=0===l.current?[n,v.getRandomId()]:[v.getRandomId(),n];return l.current=Math.abs(l.current-1),e}),[n]),h=s&&Q(s,r,a,d);return t.jsxs("div",{style:{width:e,height:i},children:[t.jsx("div",{role:"img",id:c[0],"aria-label":h}),t.jsx("div",{role:"img",id:c[1],"aria-label":h})]})}function xe({width:e,height:o,rowData:i,dateFormatter:r,layoutObjs:n}){const s=R.useTranslationBundle("@oracle/oraclejet-preact"),d=[];return n.forEach((e=>{e.taskObjs.forEach((e=>{const o=Q(e,i,r,s);d.push(t.jsx("div",{role:"img","aria-label":o,class:a.taskMobileAccStyles.content,style:{width:e.width,height:e.height,top:e.y,left:e.x}}))}))})),t.jsx("div",{class:a.taskMobileAccStyles.base,style:{width:e,height:o},children:d})}function fe({width:e,height:o,rowData:i,dateFormatter:r,ariaActiveId:a,ariaActiveTaskObj:n,layoutObjs:s}){return c.supportsMobileScreenReader?t.jsx(xe,{width:e,height:o,layoutObjs:s,rowData:i,dateFormatter:r}):t.jsx(be,{width:e,height:o,rowData:i,dateFormatter:r,ariaActiveId:a,ariaActiveTaskObj:n})}function ve({width:e,height:o,layoutObjs:i}){const r=i.filter((e=>e.isSelected)),n=r.map((({y:t,height:o})=>`M1,${t} H${e-1} V${t+o} H1 Z`)).join(" ");return r.length>0?t.jsx("svg",{width:e,height:o,children:t.jsx("path",{class:a.rowBackgroundStyles.selected,d:n})}):null}const ye=(e,t)=>{const{x:o,y:i,width:r,height:a,borderRadius:n,stroke:s,strokeWidth:d,padding:l}=t,c=o-l,h=i-l,u=r+2*l,m=a+2*l,g=j.rectangleWithBorderRadius(c,h,u,m,n,Math.min(u,m),"0"),w=new Path2D(g);e.strokeStyle=s,e.lineWidth=d,e.stroke(w)},Te=(e,t,o)=>{const i="hovered"===o,{x:r,y:a,width:n,height:s,borderRadius:d,fill:l,stroke:c,strokeWidth:h}=t,u=j.rectangleWithBorderRadius(r,a,n,s,d,Math.min(n,s),"0"),m=new Path2D(u);switch(i&&((e,t)=>{e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.shadowBlur=t.shadowBlur})(e,t.hoverEffect.shadow),e.fillStyle="#ffffff",e.fill(m),i&&(e=>{e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0})(e),e.strokeStyle=c,e.fillStyle=l,e.lineWidth=h,e.fill(m),e.stroke(m),o){case"selected":ye(e,{x:r,y:a,width:n,height:s,borderRadius:d,...t.selectionEffect});break;case"hovered":ye(e,{x:r,y:a,width:n,height:s,borderRadius:d,...t.hoverEffect});break;case"focused":ye(e,{x:r,y:a,width:n,height:s,borderRadius:d,...t.focusEffect});break;case void 0:break;default:return o}};function ke({width:e,height:o,layoutObj:i}){return t.jsx(h.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i&&Te(e,i,"focused")}})}function Ae({width:e,height:o,layoutObj:i}){return t.jsx(h.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i&&Te(e,i,"hovered")}})}function Re({width:e,height:o,layoutObjs:i}){return t.jsx(h.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i.forEach((t=>Te(e,t,"selected")))}})}function je({width:e,height:o,layoutObjs:{selectedTaskObjs:i,hoveredTaskObj:r,focusedTaskObj:a}}){return t.jsxs(h.TimeComponentLayersStack,{width:`${e}px`,height:`${o}px`,children:[t.jsx(ke,{width:e,height:o,layoutObj:a}),t.jsx(Re,{width:e,height:o,layoutObjs:i}),t.jsx(Ae,{width:e,height:o,layoutObj:r})]})}function Se({x:e,y:o,width:r,height:n,label:s,isInner:d,textAlign:c,labelStyle:h}){return t.jsx("div",{"aria-hidden":"true",class:i.classNames([a.taskLabelLayerStyles.label,d&&a.taskLabelLayerStyles.innerLabel]),style:{left:e,top:o,width:r,height:n,textAlign:c,...h},children:t.jsx(l.Text,{variant:h?.color?"inherit":"primary",truncation:"ellipsis",size:"md",weight:"inherit",children:s})})}function Ce({width:e,height:o,layoutObjs:i}){return t.jsx("div",{class:a.taskLabelLayerStyles.base,style:{width:e,height:o},children:i.map((e=>t.jsx(Se,{...e})))})}function Ie({width:e,height:o,layoutObjs:i}){return t.jsx(h.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i.forEach((t=>{t.taskObjs.forEach((t=>Te(e,t)))}))}})}function Pe({width:e,height:o,minorAxisLayout:{minorGridTicksPos:i,majorGridTicksPos:r},viewportLayout:{gridlines:a,rowData:n,rowObjs:s,taskLabelObjs:d,horizontalGridlinesPos:l,idTaskObjMap:c},effectsLayout:u,dateFormatter:m,ariaActiveTask:g}){return t.jsxs(h.TimeComponentLayersStack,{width:`${e}px`,height:`${o}px`,children:[t.jsx(ve,{width:e,height:o,layoutObjs:s}),"on"===a.vertical&&t.jsx(h.TimeComponentVerticalGridlines,{width:e,height:o,positions:i,variant:"minor"}),"on"===a.vertical&&r&&t.jsx(h.TimeComponentVerticalGridlines,{width:e,height:o,positions:r,variant:"major"}),l&&t.jsx(pe,{width:e,height:o,positions:l}),t.jsx(fe,{width:e,height:o,layoutObjs:s,rowData:n,dateFormatter:m,ariaActiveId:g?.ariaId,ariaActiveTaskObj:g&&c.get(g.dataId)}),t.jsx(Ie,{width:e,height:o,layoutObjs:s}),t.jsx(je,{width:e,height:o,layoutObjs:u}),t.jsx(Ce,{width:e,height:o,layoutObjs:d})]})}function Le({visRef:e,overlayControlsContainerRef:o,panZoomLayout:i,getTimeAxesLayout:r,getHorizontalScrollbarLayout:a,onHorizontalScrollChange:n,getVerticalScrollbarLayout:s,onVerticalScrollChange:d,rowAxisSeparator:l=!1,zoomParameters:c,zooming:u="on",isViewportDefined:m,onViewportChange:g,getResolvedViewportLayout:w,datatip:p,rowDataLayout:b,isRTL:x,scrollPosition:f,onScrollPositionChange:v,selectedIds:y,selectionMode:T,onSelectionChange:k,hoveredTaskId:A,onTaskHoverChange:R,currentTask:j,onCurrentTaskChange:S,currentTaskInteraction:C,ariaActive:I,width:P,height:L}){return t.jsx(h.TimeComponentPanZoomLayout,{overlayControlsContainerRef:o,...i,width:P,height:L,overlayControls:"on"===u&&c&&m?t.jsx(h.TimeComponentZoomControls,{position:i.overlayControlsPosition,zoomParameters:c,onViewportChange:g}):void 0,verticalControl:t.jsx(h.TimeComponentVerticalScrollbarContainer,{getLayout:s,onRangeChange:d,children:e=>t.jsx(h.TimeComponentVerticalScrollbar,{...e})}),horizontalControl:t.jsx(h.TimeComponentHorizontalScrollbarContainer,{getLayout:a,onRangeChange:n,children:e=>t.jsx(h.TimeComponentHorizontalScrollbar,{...e})}),vis:t.jsx(we,{innerRef:e,isRTL:x,scrollPosition:f,onScrollPositionChange:v,isViewportDefined:m,onViewportChange:g,zoomParameters:c,zooming:u,rowAxisSeparator:l,selectedIds:y,selectionMode:T,onSelectionChange:k,hoveredTaskId:A,onTaskHoverChange:R,currentTask:j,onCurrentTaskChange:S,currentTaskInteraction:C,ariaActive:I,getTimeAxesLayout:r,getResolvedViewportLayout:w,rowDataLayout:b,datatip:p,majorAxis:e=>t.jsx(h.TimeComponentHorizontalTimeAxis,{...e}),minorAxis:e=>t.jsx(h.TimeComponentHorizontalTimeAxis,{...e}),dataBody:e=>t.jsx(Pe,{...e})})})}const Oe=(e,t,o)=>t.map((t=>e(t,o))),Ee=e=>void 0===e?"0px":void 0!==e.height?`${e.height}px`:r.bridgeValues.horizontalTimeAxisHeight,De=(e,t)=>{const o=((e,t)=>void 0===t?0:void 0!==t.height?t.height:e)(e,t),{scale:i,zoomOrder:r=[t.scale]}=t;return{height:o,zoomOrder:r,zoomOrderIndex:r.indexOf(i)}},Me=(e,t)=>Date.parse(e.getPreviousDate(new Date(t).toISOString())),Ve=(e,t)=>Date.parse(e.getNextDate(new Date(t).toISOString())),ze=(e,t,o)=>{const i=[Me(e,t)];for(;i[i.length-1]<o;)i.push(Ve(e,i[i.length-1]));return i},Be=(e,t)=>{const{type:o,params:i}=t;switch(o){case"exact":{const t=new Map,o=ze(e,i.startTime,i.endTime);for(let e=0;e<o.length-1;e++)t.set(o[e],o[e+1]);return{intervals:t,numIntervals:t.size}}case"approximate":{const{startTime:t,endTime:o,numSections:r,numIntervalsPerSection:a}=i,n=((e,t,o,i,r)=>{const a=new Map,n=Math.floor((o-t)/i);for(let s=0;s<i;s++){const i=t+n*s,d=Math.min(t+n*(s+1),o);let l=Me(e,i);for(let t=0;t<r&&!(l>=d);t++){const t=Ve(e,l);a.set(l,t),l=t}l=Me(e,d-1),a.set(l,Ve(e,l))}return a})(e,t,o,r,a),s=[...n.keys()],d=s.reduce(((e,t)=>e+(n.get(t)-Number(t))),0)/s.length;return{intervals:n,numIntervals:(o-t)/d}}default:return o}},_e=(e,t)=>e.formatter(new Date(t).toISOString()),Fe=(e,t,o)=>{const i=ze(e,t,o),r=i.slice(0,i.length-1).map((t=>_e(e,t)));return{ticks:i,labels:r}},He=(e,t,o,i,r="start",a,n,s,d,l,c,u,m,g)=>{const w=t+o,p=c,b=u,x=a.slice(0,a.length-1),f=n.map((e=>h.getTimePosition(e,p,b,m,g))),v=a.map((e=>h.getTimePosition(e,p,b,m,g))),y=v.slice(1).map(((e,t)=>g?v[t]-e:e-v[t])),T=a[0]<d;T&&(v[0]=0,y[0]=v[1]),a[a.length-1]>l&&(v[v.length-1]=g?0:m,y[y.length-1]=g?v[v.length-2]-v[v.length-1]:v[v.length-1]-v[v.length-2]);const k=v.slice(0,v.length-1).map(((e,t)=>g?e-y[t]:e)),A=Oe(e,s,i).map((({width:e},t)=>Math.floor(e)-Math.floor(y[t]-w)>0));return{font:i,labelPosition:r,labels:s,labelTicks:x,labelPositions:k,isLabelTruncated:A,isIntervalStartTruncated:T,intervalWidths:y,gridTicksPos:f,isRTL:g}},Ue=(e,t,o,i,r,a,n,s)=>{const{zoomOrderMinLengthFactor:d,maxNumIntervals:l}=((e,t,o,i,r,a,n)=>{const s=t+o,d=a.map((e=>Be(e,n))),l=Math.max(...d.map((({numIntervals:e})=>e)));return{zoomOrderMinLengthFactor:d.map((({intervals:t},o)=>{const n=a[o],d=[...t.keys()],l=d.map((e=>_e(n,t.get(e)))),c=d.map((e=>t.get(e)-e)),h=Oe(e,l,r),u=Math.min(...c.map(((e,t)=>e/Math.max(i,h[t].width+s))));return u})),maxNumIntervals:l}})(e,t,o,i,r,s,{type:"approximate",params:{numSections:4,numIntervalsPerSection:10,startTime:a,endTime:n}});return{getZoomOrderViewDurationThresholds:e=>d.map((t=>e*t)),minorAxisZoomOrder:s,minZoomViewportDuration:(n-a)/l,maxZoomViewportDuration:n-a,startTime:a,endTime:n}},We=(e,t,o,i,r,a,n,s,d,l,c,h,u,m)=>g=>{const{zoomOrder:w,zoomOrderIndex:p}=c,b=a(g),{viewportStartTime:x,viewportEndTime:f}=((e,t,o,i,r)=>void 0!==i&&void 0!==r?{viewportStartTime:i,viewportEndTime:r}:void 0!==i&&void 0===r?{viewportStartTime:i,viewportEndTime:Math.min(o,i+e)}:void 0===i&&void 0!==r?{viewportStartTime:Math.max(t,r-e),viewportEndTime:r}:{viewportStartTime:t,viewportEndTime:Math.min(o,t+e)})(b[p],s,d,u,m),{majorAxisLayout:v,minorAxisLayout:y}=((e,t,o,i,r,a,n,s,d,l,c,h,u)=>{const m=u?Fe(u,s,d):{ticks:[],labels:[]},g=Fe(h,s,d),{ticks:w,labels:p}=m,{ticks:b,labels:x}=g,f=new Set(w),v=new Set(b),y=0===w.filter((e=>e>s&&e<d&&!v.has(e))).length,T=y?b.filter((e=>!f.has(e))):b,k=u&&He(e,t,o,i,u.labelPosition,w,w,p,a,n,s,d,l,c),A=He(e,t,o,r,h.labelPosition,b,T,x,a,n,s,d,l,c);return{minorAxisLayout:{majorGridTicksPos:y&&k?k.gridTicksPos:void 0,minorGridTicksPos:A.gridTicksPos,variant:"minor",...A},majorAxisLayout:k&&{majorGridTicksPos:k.gridTicksPos,minorGridTicksPos:void 0,variant:"major",...k}}})(e,t,o,i,r,s,d,x,f,g,l,w[p],h&&h.zoomOrder[h.zoomOrderIndex]);return{position:n,startTime:s,endTime:d,viewportStartTime:x,viewportEndTime:f,width:g,majorAxis:v&&{width:g,...h,...v},minorAxis:{width:g,...c,...y}}},Ze=[{tokenVar:r.bridgeValues.horizontalTimeAxisHeight,key:"defaultTimeAxisHeight",cssProp:"height"},{tokenVar:r.bridgeValues.horizontalTimeAxisLabelPaddingInlineStart,key:"timeAxisLabelPaddingInlineStart",cssProp:"margin-inline-start"},{tokenVar:r.bridgeValues.horizontalTimeAxisLabelPaddingInlineEnd,key:"timeAxisLabelPaddingInlineEnd",cssProp:"margin-inline-end"},{tokenVar:P.xUnits(12.5),key:"timeAxisLabelMinWidth",cssProp:"min-width"},{tokenVar:I.typographyVars.body.md.fontSize,key:"majorAxisFontSize",cssProp:"font-size"},{tokenVar:I.typographyVars.body.sm.fontSize,key:"minorAxisFontSize",cssProp:"margin-block-start"},{tokenVar:I.typographyVars.body.md.fontWeight.semibold,key:"majorAxisFontWeight"},{tokenVar:I.typographyVars.body.sm.fontWeight.regular,key:"minorAxisFontWeight"}],Ye=e=>"0"===e?0:Number(e.substring(0,e.length-2)),Xe=[{tokenVar:a.bridgeValues.rowLabelPaddingInlineStart,key:"rowLabelPaddingInlineStart",cssProp:"padding-inline-start"},{tokenVar:a.bridgeValues.rowLabelPaddingInlineStart,key:"rowLabelPaddingInlineEnd",cssProp:"padding-inline-end"},{tokenVar:P.xUnits(3),key:"rowPaddingTop",cssProp:"padding-top"},{tokenVar:P.xUnits(3),key:"rowPaddingBottom",cssProp:"padding-bottom"},{tokenVar:P.xUnits(6),key:"taskHeight",cssProp:"min-height"},{tokenVar:P.xUnits(1),key:"taskBorderRadius",cssProp:"border-radius"},{tokenVar:a.bridgeValues.taskBgColor,key:"taskBgColor",cssProp:"background-color"},{tokenVar:a.bridgeValues.taskBorderColor,key:"taskBorderColor",cssProp:"border-color"},{tokenVar:a.bridgeValues.taskEffectBorderColor,key:"taskEffectBorderColor",cssProp:"outline-color"},{tokenVar:I.baseVars.boxShadow.md,key:"taskEffectBoxShadow",cssProp:"box-shadow"}],Ge=e=>{const[t,o,i,r,...a]=e.split(" ").reverse();return{shadowColor:a.reverse().join(" "),shadowOffsetX:Ye(r??"0"),shadowOffsetY:Ye(i??"0"),shadowBlur:Ye(o??"0")}},Ke=e=>e.endsWith("px")?{value:Number(e.substring(0,e.length-2)),suffix:"px"}:e.endsWith("%")?{value:Number(e.substring(0,e.length-1)),suffix:"%"}:{value:1/0,suffix:void 0},Ne=Ze.concat(Xe),$e=({rowAxis:e,gridlines:{horizontal:o="off",vertical:i="on"}={horizontal:"off",vertical:"on"},axisPosition:a="top",minorAxis:n,majorAxis:s,start:d,end:l,viewportStart:c,viewportEnd:m,onViewportChange:g,scrollPosition:{y:w=0}={y:0},onScrollPositionChange:p,rows:b,selectedIds:x,selectionMode:f="none"})=>{const{direction:v}=u.useUser(),{resolvedVars:y,cssContent:T}=S.useCssVars(Ne),{textMeasureContent:k,getTextDimensions:A}=C.useTextDimensions(),R="rtl"===v,j=t.jsxs(t.Fragment,{children:[k,T]}),{startTime:I,endTime:L,viewportStartTime:O,viewportEndTime:E,isValidTimeConfig:M}=((e,t,o,i)=>{const r=h.parseDate(e),a=h.parseDate(t),n=o?h.parseDate(o):void 0,s=i?h.parseDate(i):void 0,d=((e,t,o,i)=>t>e&&(void 0===o||void 0===i||i>o)&&(void 0===o||o>=e&&o<t)&&(void 0===i||i>e&&i<=t))(r,a,n,s);return{startTime:r,endTime:a,viewportStartTime:n,viewportEndTime:s,isValidTimeConfig:d}})(d,l,c,m);if(!A||0===Object.keys(y).length)return{isRTL:R,layoutContent:j,isValidConfig:M,isReady:!1};if(!M)return{isRTL:R,layoutContent:j,isValidConfig:M,isReady:!0};const V=void 0===e?"off":"on",z="on"===e?{}:e,B=z?.width??"max-content",_=z?.maxWidth??"none",F=z?.labelRenderer??D,H=((e,t,o)=>{const i=Ee(t);return{position:e,height:`calc(${Ee(o)} + ${i})`}})(a,n,s),U={top:{overlayControlsPosition:"topEnd",verticalControlTopGap:(W=H).height,verticalControlBottomGap:"0"},bottom:{overlayControlsPosition:"bottomEnd",verticalControlTopGap:"0",verticalControlBottomGap:W.height}}[W.position];var W;const Z="on"===V?((e,t)=>{const o=`${P.xUnits(1)} + ${r.bridgeValues.horizontalScrollbarHeight}`,i={top:{rowAxisTopGap:e.height,rowAxisBottomGap:`calc(${o})`},bottom:{rowAxisTopGap:"0",rowAxisBottomGap:`calc(${e.height} + ${o})`}},a=Ke(t.width),n=Ke(t.maxWidth);return{...i[e.position],resolvedRowAxisWidth:a,resolvedRowAxisMaxWidth:n,label:t.label}})(H,{width:B,maxWidth:_,label:F}):void 0,Y=(e=>({defaultTimeAxisHeight:Ye(e.defaultTimeAxisHeight),timeAxisLabelPaddingInlineStart:Ye(e.timeAxisLabelPaddingInlineStart),timeAxisLabelPaddingInlineEnd:Ye(e.timeAxisLabelPaddingInlineEnd),timeAxisLabelMinWidth:Ye(e.timeAxisLabelMinWidth),majorAxisFont:{fontSize:e.majorAxisFontSize,fontWeight:e.majorAxisFontWeight},minorAxisFont:{fontSize:e.minorAxisFontSize,fontWeight:e.minorAxisFontWeight}}))(y),X=s&&De(Y.defaultTimeAxisHeight,s),G=De(Y.defaultTimeAxisHeight,n),K=Ue(A,Y.timeAxisLabelPaddingInlineStart,Y.timeAxisLabelPaddingInlineEnd,Y.timeAxisLabelMinWidth,Y.minorAxisFont,I,L,G.zoomOrder),N=We(A,Y.timeAxisLabelPaddingInlineStart,Y.timeAxisLabelPaddingInlineEnd,Y.majorAxisFont,Y.minorAxisFont,K.getZoomOrderViewDurationThresholds,a,I,L,R,G,X,O,E),q=(e=>({rowPaddingTop:Ye(e.rowPaddingTop),rowPaddingBottom:Ye(e.rowPaddingBottom)}))(y),Q=(e=>({taskHeight:Ye(e.taskHeight),taskBorderRadius:e.taskBorderRadius,taskBgColor:e.taskBgColor,taskBorderColor:e.taskBorderColor,taskEffectBorderColor:e.taskEffectBorderColor,taskEffectBoxShadow:Ge(e.taskEffectBoxShadow)}))(y),ee=$(b,{...q,...Q},{horizontal:o,vertical:i},{selectedIds:x,selectionMode:f}),te=(e=>({rowLabelPaddingInlineStart:Ye(e.rowLabelPaddingInlineStart),rowLabelPaddingInlineEnd:Ye(e.rowLabelPaddingInlineEnd)}))(y),oe={labelPaddingInlineStart:te.rowLabelPaddingInlineStart,labelPaddingInlineEnd:te.rowLabelPaddingInlineEnd,rowData:ee.rowData,rowObjs:ee.rowObjs,idRowObjMap:ee.idRowObjMap,isHorizontalGridlinesVisible:"on"===o},ie=((e,t,o,i,r)=>a=>{const n=t-e,s=i-o,d=a*n/s,l=a*(e-o)/s,c=r?a-l-d:l;return{thumbWidth:d,thumbLeft:r?void 0:l,thumbRight:r?l:void 0,draggableRegion:{xMin:c,xMax:c+d,yMin:-1/0,yMax:1/0},getNewRange:e=>{const t=r?Math.max(0,a-e-d):e,l=Math.min(o+t/a*s,i-n);return{newMin:l,newMax:l+n}}}})(O??I,E??L,I,L,R),re=(ae=w,ne=void 0,se=0,de=ee.totalRowsHeight,e=>{const t=(ne??e+ae)-ae,o=de-se,i=Math.min(e,e*t/o),r=Math.max(0,e*(ae-se)/o);return{thumbHeight:i,thumbTop:r,draggableRegion:{xMin:-1/0,xMax:1/0,yMin:r,yMax:r+i},getNewRange:i=>{const r=Math.max(0,Math.min(se+i/e*o,de-t));return{newMin:r,newMax:r+t}}}});var ae,ne,se,de;return{scrollPosition:w,panZoomLayout:U,withRowAxisLayout:Z,getTimeAxesLayout:N,zoomParameters:void 0!==O&&void 0!==E?{viewportStartTime:O,viewportEndTime:E,minorAxisZoomOrderIndex:G.zoomOrderIndex,majorAxisZoomOrder:X?.zoomOrder,majorAxisZoomOrderIndex:X?.zoomOrderIndex,...K}:void 0,rowDataLayout:ee,rowAxisLayout:oe,getResolvedViewportLayout:J,getHorizontalScrollbarLayout:ie,onHorizontalScrollChange:(e,t)=>{g?.({viewportStart:h.getISOString(e),viewportEnd:h.getISOString(t),majorAxisScale:s?.scale,minorAxisScale:n.scale})},getVerticalScrollbarLayout:re,onVerticalScrollChange:e=>{p?.({y:e})},isRTL:R,layoutContent:j,isValidConfig:M,isReady:!0}},qe=({visRef:e,isDisabled:t=!1})=>t?{}:{onKeyDown:t=>{switch(t.key){case"=":case"+":{const o=new CustomEvent("KbZoomIn",{detail:{zoomFactor:h.DEFAULT_ZOOM_IN_FACTOR}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}case"-":case"_":{const o=new CustomEvent("KbZoomIn",{detail:{zoomFactor:h.DEFAULT_ZOOM_OUT_FACTOR}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}case"PageUp":{const o=t.shiftKey?new CustomEvent("KbPanHorizontal",{detail:{rangeRatio:.25}}):new CustomEvent("KbPanVertical",{detail:{rangeRatio:.25}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}case"PageDown":{const o=t.shiftKey?new CustomEvent("KbPanHorizontal",{detail:{rangeRatio:-.25}}):new CustomEvent("KbPanVertical",{detail:{rangeRatio:-.25}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}}}},Je=({rowDataLayout:e,currentTask:t,onCurrentTaskChange:o,isRTL:i,isDisabled:r=!1})=>r?{}:{onKeyDown:r=>{switch(r.key){case"ArrowRight":{const a=t&&(i?le(t.id,e):de(t.id,e));void 0!==a&&o({id:a,isFocused:!0}),L.cancelEvent(r);break}case"ArrowLeft":{const a=t&&(i?de(t.id,e):le(t.id,e));void 0!==a&&o({id:a,isFocused:!0}),L.cancelEvent(r);break}case"ArrowUp":{const i=t&&((e,t)=>se(e,t,"up"))(t.id,e);void 0!==i&&o({id:i,isFocused:!0}),L.cancelEvent(r);break}case"ArrowDown":{const i=t&&((e,t)=>se(e,t,"down"))(t.id,e);void 0!==i&&o({id:i,isFocused:!0}),L.cancelEvent(r);break}}}},Qe=({rowDataLayout:e,currentRowLabel:t,onCurrentRowLabelChange:o,isDisabled:i=!1})=>i?{}:{onKeyDown:i=>{switch(i.key){case"ArrowUp":{const r=t&&((e,t)=>ce(e,t,"up"))(t.id,e);void 0!==r&&o({id:r,isFocused:!0}),L.cancelEvent(i);break}case"ArrowDown":{const r=t&&((e,t)=>ce(e,t,"down"))(t.id,e);void 0!==r&&o({id:r,isFocused:!0}),L.cancelEvent(i);break}}}},et=({visRef:e,rowAxisRef:t,rowDataLayout:i,navigationModes:r,selectionProps:a,isRTL:n,isDisabled:s=!1})=>{const d=o.useRef("tasks"),{onKeyUp:l}=k.useSelection({idExtracter:e=>{if("tasks"===d.current&&"keyup"===e.type)return r.tasks.currentItem?.id},selection:a.selectedIds,selectionMode:a.selectionMode,onChange:a.onSelectionChange,getDataById:i?.getTaskDataById||(()=>{})}).selectionProps,c="tasks"===d.current?{onKeyUp:l}:{},h=qe({visRef:e,isDisabled:s}),u=Je({rowDataLayout:i,currentTask:r.tasks.currentItem,onCurrentTaskChange:r.tasks.onCurrentItemChange,isRTL:n}),m=Qe({rowDataLayout:i,currentRowLabel:r.rowLabels.currentItem,onCurrentRowLabelChange:r.rowLabels.onCurrentItemChange}),g={onFocus:()=>{const o=new Event("ShowFocusDatatip");e.current?.dispatchEvent(o),t.current?.dispatchEvent(o)}};return s?{}:y.mergeProps(h,g,{onKeyDown:e=>{let t=!1;const o=e=>{const{onCurrentItemChange:t}=r[e.type];t({id:e.id,isFocused:!0})},a=e=>{const{currentItem:t,onCurrentItemChange:o}=r[e];t&&o({id:t.id,isFocused:!1})},s=()=>{const n=((e,t)=>{const o=t.idTaskObjMap.get(e),{rowIndex:i}=o;return t.rowObjs[i].id})(r.tasks.currentItem.id,i);o({id:n,type:"rowLabels"}),a("tasks"),d.current="rowLabels",t=!0,L.cancelEvent(e)},l=()=>{const n=((e,t,o)=>{if(void 0!==o){const i=t.idTaskObjMap.get(o);if(i){const{rowIndex:r}=i;if(t.rowObjs[r].id===e)return o}}const i=t.idRowObjMap.get(e),r=i?.taskObjs[0];if(r)return r.id;const a=ae(t);return a?.id})(r.rowLabels.currentItem.id,i,r.tasks.currentItem?.id);void 0!==n&&o({id:n,type:"tasks"}),a("rowLabels"),d.current="tasks",t=!0,L.cancelEvent(e)};switch(e.key){case"Tab":a(d.current);break;case"ArrowLeft":e.altKey&&(n||"tasks"!==d.current?n&&"rowLabels"===d.current&&l():s());break;case"ArrowRight":e.altKey&&(n||"rowLabels"!==d.current?n&&"tasks"===d.current&&s():l())}if(!t)switch(d.current){case"tasks":u.onKeyDown?.(e);break;case"rowLabels":m.onKeyDown?.(e);break;default:return d.current}},onKeyUp:e=>{switch(e.key){case"Tab":{const{currentItem:t,onCurrentItemChange:o}=r[d.current],a=t||ae(i);a&&o({id:a.id,isFocused:!0}),L.cancelEvent(e);break}}}},c)};e.Gantt=function({width:e,height:i,testId:r,...a}){const n=o.useRef(null),{scrollPosition:s,panZoomLayout:d,withRowAxisLayout:l,getTimeAxesLayout:c,zoomParameters:h,rowDataLayout:u,rowAxisLayout:m,getResolvedViewportLayout:g,getHorizontalScrollbarLayout:w,onHorizontalScrollChange:p,getVerticalScrollbarLayout:b,onVerticalScrollChange:x,isRTL:f,layoutContent:T,isValidConfig:k,isReady:A}=$e(a),R={"aria-label":a["aria-label"],"aria-describedby":a["aria-describedby"],"aria-labelledby":a["aria-labelledby"],role:"application"},j=void 0!==a.viewportStart&&void 0!==a.viewportEnd,[S,C]=o.useState(),[I,P]=o.useState("none"),[L,D]=o.useState(),[M,V]=o.useState("none"),[z,B]=o.useState(),_=e=>{void 0!==e.id&&C({dataId:e.id,ariaId:v.getRandomId(),type:"rowLabel"}),V(void 0!==e.id?"hover":"none"),B(e.id)},[F,H]=o.useState(),U=e=>{if(e.isFocused){const t=new CustomEvent("KbPanTaskIntoView",{detail:{id:e.id}});Y.current?.dispatchEvent(t),C({dataId:e.id,ariaId:v.getRandomId(),type:"task"}),P("focus")}H(e)},[W,Z]=o.useState(),Y=o.useRef(null),X=o.useRef(null),G=o.useRef(null),K=(({rootRef:e,overlayControlsContainerRef:t,isDisabled:i=!1})=>{const r=o.useRef(!1),a=()=>{const e=new Event("ControlsShow");t.current?.dispatchEvent(e)},n=()=>{const e=new Event("ControlsHide");t.current?.dispatchEvent(e)};return i?{}:{onFocus:()=>{r.current=!0,a()},onBlur:t=>{t.relatedTarget&&e.current?.contains(t.relatedTarget)||(r.current=!1,n())},onPointerDown:t=>{"mouse"!==t.pointerType&&e.current?.focus()},onPointerOver:e=>{"mouse"===e.pointerType&&a()},onPointerOut:e=>{"mouse"===e.pointerType&&(r.current||n())}}})({rootRef:n,overlayControlsContainerRef:G,isDisabled:!j}),N=et({visRef:Y,rowAxisRef:X,navigationModes:{tasks:{currentItem:F,onCurrentItemChange:U},rowLabels:{currentItem:W,onCurrentItemChange:e=>{if(e.isFocused){const t=new CustomEvent("KbPanRowIntoView",{detail:{id:e.id}});Y.current?.dispatchEvent(t),C({dataId:e.id,ariaId:v.getRandomId(),type:"rowLabel"}),V("focus")}Z(e)}}},rowDataLayout:u,selectionProps:{selectedIds:a.selectedIds,selectionMode:a.selectionMode,onSelectionChange:a.onSelectionChange},isRTL:f,isDisabled:!j});if(!A||!k)return t.jsx(O,{innerRef:n,width:e,height:i,...R,children:T});const $=t.jsx(Le,{visRef:Y,overlayControlsContainerRef:G,isRTL:f,isViewportDefined:j,scrollPosition:s,onScrollPositionChange:a.onScrollPositionChange,onViewportChange:a.onViewportChange,rowAxisSeparator:!!l,zoomParameters:h,zooming:a.zooming,panZoomLayout:d,getTimeAxesLayout:c,getHorizontalScrollbarLayout:w,onHorizontalScrollChange:p,getVerticalScrollbarLayout:b,onVerticalScrollChange:x,getResolvedViewportLayout:g,rowDataLayout:u,datatip:a.datatip,selectedIds:a.selectedIds,selectionMode:a.selectionMode,onSelectionChange:a.onSelectionChange,hoveredTaskId:L,onTaskHoverChange:e=>{void 0!==e.id&&C({dataId:e.id,ariaId:v.getRandomId(),type:"task"}),P(void 0!==e.id?"hover":"none"),D(e.id)},currentTask:F,onCurrentTaskChange:U,currentTaskInteraction:I,ariaActive:"task"===S?.type?S:void 0}),q=l&&t.jsx(E,{...l,rowAxis:(e,o)=>t.jsx(ie,{innerRef:X,resolvedWidth:e,resolvedMaxWidth:o,currentRowLabel:W,hoveredRowLabelId:z,onRowLabelHoverChange:_,currentRowLabelInteraction:M,ariaActive:"rowLabel"===S?.type?S:void 0,layoutObj:m,scrollPosition:s,children:l.label}),ganttView:$});return t.jsxs(O,{innerRef:n,width:e,height:i,testId:r,...R,...y.mergeProps(N,K),"aria-activedescendant":S?.ariaId,children:[q||$,T]})}}));
//# sourceMappingURL=Gantt-844026a4.js.map
