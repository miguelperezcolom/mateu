define(['preact/jsx-runtime', '@testing-library/preact', '../../LayerHost-7d4aa6d3', '../../EnvironmentProvider-fb09fcfb', 'chai', 'sinon', 'preact/hooks', '@testing-library/user-event', '../../BaseButton-d2266b25', '../../Sheet-fdd314ac', '../../clientHints-6d361eaa', '../../Button-29507a64', '../../resources/nls/en/bundle', '../../index-f7ad24df', 'preact', 'preact/compat', '../../UNSAFE_Layer/themes/LayerHostStyles.css', 'css!./../../LayerHostStyles.styles.css', '../../LayerManager-4983f21c', '../../useHover-8b8a1496', '../../useToggle-a29f97af', '../../useActive-bb5dc069', '../../useColorScheme-f2a81610', '../../classNames-08d99695', '../../dimensions-f24f9a2b', '../../size-0127b66b', '../../utils-ad4761c9', '../../themeContract.css-2e4b066d', '../../colorUtils-b9dc1bd1', '../../_curry1-df649359', '../../mergeInterpolations-9ede4cf7', '../../mergeDeepWithKey-aaab9019', '../../_curry3-83878f86', '../../_curry2-86c52b86', '../../_isObject-42bafc94', '../../mergeProps-bcfa6a92', '../../UNSAFE_BaseButton/themes/redwood/BaseButtonTheme', '../../UNSAFE_BaseButton/themes/BaseButtonStyles.css', 'css!./../../BaseButtonStyles.styles.css', '../../UNSAFE_BaseButton/themes/redwood/BaseButtonVariants.css', '../../vanilla-extract-recipes-createRuntimeFn.esm-d881c69a', 'module', '../../useComponentTheme-5aa41a8f', '../../logger-0f873e29', '../../BareButton-6152c7c2', '../../useBareButton-98f047f8', '../../usePress-949a0d03', '../../usePressClick-b7b38da2', '../../TabbableModeContext-a9c97640', '../../useTabbableMode-df433329', '../../useId-c9578d26', '../../buttonUtils-cbbb0130', '../../id-c70ab33c', '../../useTestId-a2e433c2', '../../unsafeDomAccess-602c5dde', '../../Modal-8d647f76', '../../useModal-536cb7ff', '../../Layer-dc3c1ac9', '../../UNSAFE_Layer/themes/LayerStyles.css', 'css!./../../LayerStyles.styles.css', '../../useThemeInterpolations-1dff2f9d', '../../useScale-5d246769', '../../theme-a8f3d819', '../../Theme-d945adae', '../../useDensity-bee3cef4', '../../UNSAFE_Modal/themes/ModalStyles.css', 'css!./../../ModalStyles.styles.css', '../../tabbableUtils-9101c0e5', '../../head-9cb1a3da', '../../_arity-5a5f5f71', '../../_isArray-32602db6', '../../_isString-d0ada3cb', '../../popupUtils-e19b93b5', '../../WindowOverlay-bd810e3b', '../../vanilla-extract-dynamic.esm-6065bbd7', '../../UNSAFE_WindowOverlay/themes/WindowOverlayStyles.css', 'css!./../../WindowOverlayStyles.styles.css', '../../UNSAFE_WindowOverlay/themes/WindowOverlayContract.css', '../../useUser-988f7da2', '../../UNSAFE_WindowOverlay/themes/redwood/WindowOverlayTheme', '../../UNSAFE_WindowOverlay/themes/redwood/WindowOverlayBaseTheme.css', 'module', '../../UNSAFE_WindowOverlay/themes/redwood/WindowOverlayVariants.css', '../themes/SheetStyles.css', 'css!./../../SheetStyles.styles.css', '../../refUtils-77e97004', '../../useAnimationStatus-4b135f52', '../../useAnimation-5a74955f', '../../animationUtils-716a9aa6', '../../useTranslationBundle-27bf6340', '../../ButtonLabelLayout-9cc087dc', '../../Text-9e32c423', '../../UNSAFE_Text/themes/TextStyles.css', 'css!./../../TextStyles.styles.css', '../../useButtonLabelLayoutTheme-3237026f', '../../UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutTheme', '../../UNSAFE_ButtonLabelLayout/themes/ButtonLabelLayoutStyles.css', 'css!./../../ButtonLabelLayoutStyles.styles.css', '../../UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutBaseTheme.css', 'module', '../../UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutVariants.css', 'css!./../../ButtonLabelLayoutVariants.styles.css'], (function(e,t,s,n,a,o,c,r,l,i,d,u,y,b,f,h,m,p,S,B,x,w,L,v,E,T,g,F,j,U,_,A,N,O,C,W,k,I,M,D,H,P,R,K,V,q,X,Y,z,G,J,Q,Z,$,ee,te,se,ne,ae,oe,ce,re,le,ie,de,ue,ye,be,fe,he,me,pe,Se,Be,xe,we,Le,ve,Ee,Te,ge,Fe,je,Ue,_e,Ae,Ne,Oe,Ce,We,ke,Ie,Me,De,He,Pe,Re,Ke,Ve,qe,Xe,Ye){"use strict";function ze(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Ge=ze(r);function Je(e){return e.querySelector("#contentId")}function Qe(e){return e.querySelector("#contentId").parentElement}const Ze={translations:{"@oracle/oraclejet-preact":y.default},mode:"test"},$e=({onClose:t})=>{const s=c.useRef(null);return e.jsx(e.Fragment,{children:e.jsxs(n.RootEnvironmentProvider,{environment:Ze,children:[e.jsx(l.BaseButton,{ref:s,children:"Open"}),e.jsx(i.Sheet,{isOpen:!0,onClose:t,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",outlineStyle:"none"},id:"contentId",children:[e.jsx("h1",{children:"N1"}),e.jsx("h1",{children:"N2"}),e.jsx("h1",{children:"N3"}),e.jsx("h1",{children:"N4"})]})})]})})};function et(){const[t,s]=c.useState(!1),a=c.useRef(null),o=c.useCallback((()=>{s(!t)}),[t]);return e.jsx(n.RootEnvironmentProvider,{environment:Ze,children:e.jsxs("div",{style:{paddingTop:"90px",paddingBottom:"90px"},children:[e.jsx(i.Sheet,{isOpen:t,initialFocus:"firstFocusable",children:e.jsx("div",{style:{display:"flex",flexDirection:"column",outlineStyle:"none"},id:"contentId",children:e.jsx(u.Button,{"aria-label":"OK",label:"OK"})})}),e.jsx(u.Button,{ref:a,onAction:o,label:"Toggle"})]})})}describe("Test Sheet Component",(()=>{it("Sheet content render correctly",(async function(){const{container:s}=t.render(e.jsx($e,{})),n=Je(s);a.expect(n).not.null})),it("onClose called when Escape or Tab are pressed",(async function(){const s=o.spy(),{container:n}=t.render(e.jsx($e,{onClose:s})),c=Je(n),r=Qe(n);a.expect(c).not.null,t.fireEvent.keyDown(r,{code:"Tab"}),t.fireEvent.keyDown(r,{code:"Escape"}),a.expect(s.calledTwice).to.be.true})),it("onClose called when clicking scrim",(async function(){const s=o.spy(),{container:n}=t.render(e.jsx($e,{onClose:s})),c=Je(n),r=function(e){return e.parentElement?.parentElement?.parentElement?.firstElementChild}(Qe(n));a.expect(c).not.null,await Ge.default.click(r),a.expect(s.called).to.be.true})),it("onClose called when swipe is done (mobile)",(async function(){const s=o.spy(),{container:n}=t.render(e.jsx($e,{onClose:s})),c=Je(n),r=Qe(n);if(a.expect(c).not.null,"undefined"==typeof jest&&"primary"===d.getClientHints().touchSupport){const e=new Touch({target:r,identifier:0,pageX:386,pageY:224}),n=new Touch({target:r,identifier:0,pageX:389,pageY:397});r&&(t.fireEvent.touchStart(r,{timeStamp:10406,currentTarget:r,changedTouches:[e]}),t.fireEvent.touchEnd(r,{timeStamp:10472,currentTarget:r,changedTouches:[n]})),a.expect(s.called).to.be.true}})),it("Sheet correct focus when initialFocus set as firstFocusable",(async function(){const{container:s}=t.render(e.jsx(et,{})),n=t.screen.getByRole("button");a.expect(n,"anchor element found").not.null,n&&await Ge.default.click(n),await t.waitFor((()=>{const e=Je(s);a.expect(e).not.to.be.null}));const o=t.screen.getByLabelText("OK");a.expect(o).not.to.be.null,"undefined"==typeof jest&&await t.waitFor((()=>{a.expect(o.matches(":focus")).to.be.true}))}))}))}));
//# sourceMappingURL=Sheet.spec.js.map
