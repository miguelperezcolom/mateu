define(['exports', 'preact/hooks'], (function(t,n){"use strict";function e(t){if(!t)return{};const{translateX:n,translateY:e,translateZ:r,rotateX:c,rotateY:o,rotateZ:u,scaleX:s,scaleY:a,scaleZ:i,skewX:f,skewY:l,...$}=t,d=`${t.transform||""}${function(t,n,e){return`${t?` translateX(${t})`:""}${n?` translateY(${n})`:""}${e?` translateZ(${e})`:""}`}(n,e,r)}${function(t,n,e){return`${t?` rotateX(${t})`:""}${n?` rotateY(${n})`:""}${e?` rotateZ(${e})`:""}`}(c,o,u)}${function(t,n,e){return`${t||0===t?` scaleX(${t})`:""}${n||0===n?` scaleY(${n})`:""}${e||0===e?` scaleZ(${e})`:""}`}(s,a,i)}${function(t,n){return`${t?` skewX(${t})`:""}${n?` skewY(${n})`:""}`}(f,l)}`;return{...$,...d&&{transform:d}}}function r(t){if(!t)return{};const{offset:n,...r}=e(t);return{...r,...n&&{cssOffset:n}}}t.useAnimation=function(t,{animationStates:c,isAnimatedOnMount:o=!1,onAnimationEnd:u=()=>{}}){const s=n.useRef(!1),a=n.useRef(null),i=n.useRef(),f=n.useRef(),l=n.useRef(c);n.useEffect((()=>{if(i.current===t)return;const n=i.current;var c,$,d;i.current=t,"running"===f.current?.playState&&(c=f.current,$=a.current,d=$,(d?.offsetWidth||d?.offsetHeight||d?.getClientRects().length)&&c.commitStyles(),c.cancel());const m=a.current;if(!m)return;if(!s.current&&(s.current=!0,!o))return;const g=function(t,n,e,r){const c=t[`${r} => ${e}`]||t[e],o="function"==typeof c?c(n):c;return o&&Object.keys(o).length>0?o:null}(l.current,m,t,n);g&&(f.current=function(t,n,c,o){const{delay:u,duration:s,easing:a}=t.options||{};n.setAttribute("oj-animation-pending","true");const i={delay:u||0,duration:s||400,easing:a?"string"==typeof a?a:`cubic-bezier(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`:"ease"},f=n.animate([r(t.from),r(t.to)],{...i});return f.onfinish=()=>{n.removeAttribute("oj-animation-pending"),function(t,n,r){const c=n?{...e(r.to),...e(r.end)}:e(r.end);for(const n in c)t.style[n]=c[n]}(n,!0,t),o?.({animationState:c})},f}(g,m,t,u))}),[t,o,u]);const $=n.useCallback((()=>{const t=f.current;"running"===t?.playState&&t.cancel()}),[]);return{nodeRef:n.useCallback((t=>{t!=a.current&&(a.current&&(f.current?.cancel(),f.current=void 0),a.current=t)}),[]),controller:{cancel:$}}}}));
//# sourceMappingURL=useAnimation-5a74955f.js.map
