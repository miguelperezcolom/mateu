define(['exports', 'preact/jsx-runtime', './TrackResizeContainer-a4999df9', './UNSAFE_Diagram/themes/DiagramStyles.css', './useResizeObserver-25032462', 'preact/hooks', './accUtils-acd70e81', './classNames-08d99695', './useTranslationBundle-27bf6340', './useUser-988f7da2', './layoutUtils-641af87a', './useVisHover-28319fef', './mergeProps-bcfa6a92', './useDatatip-36aa820b', './useTextDimensions-f254e8f5', './clientUtils-df9caee0', './useVisDragModeControls-f3a420dc', './useSelection-205a2bda', './useVisTouchResponse-88a7bb09', './stringUtils-4ffd9d59', './useContextMenu-4bd1c23a', './Menu-45a26116', './MenuItem-ff1cd14d', 'preact', './logger-0f873e29', './LayerHost-7d4aa6d3', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Menu/themes/MenuItemStyles.css', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', 'css!./MenuStyles.styles.css'], (function(e,t,n,o,i,r,s,a,d,c,u,l,h,f,g,p,m,y,x,b,w,M,v,I,P,S,N,k,D,R,C,z,X,Y,T,L,Z,j,A){"use strict";function V(e){const t=new Map,n=new Map,o=new Map;for(let i=0;i<e.length;i++)t.set(e[i].id,e[i]),n.set(e[i].id,i),o.set(i,e[i].id);return{itemIdToDataMap:t,itemIdToIndexMap:n,itemIndexToIdMap:o}}function B(e,t){const n=[];if(e)for(let t=0;t<e.length;t++)n.push(e[t]);if(t)for(let e=0;e<t.length;e++)n.push(t[e]);return n}function E(e,t,n){const o=F(t,e,n);if(e.rotationAngle){const n=e.rotationPoint?e.rotationPoint:{x:t.width/2,y:t.height/2},i=e.rotationAngle,r=O({x:0,y:0},n),s=O({x:t.width,y:0},n),a=O({x:0,y:t.height},n),d=O({x:t.width,y:t.height},n);return function(e){let t=e[0].x,n=e[0].y,o=e[0].x,i=e[0].y;for(let r=1;r<e.length;r++){const s=e[r];s.x<t?t=s.x:s.x>o&&(o=s.x),s.y<n?n=s.y:s.y>i&&(i=s.y)}return{x:t,y:n,width:o-t,height:i-n}}([U(r,i),U(a,i),U(s,i),U(d,i)].map((e=>({x:e.x+o.x+n.x,y:e.y+o.y+n.y}))))}return{x:o.x,y:o.y,width:t.width,height:t.height}}function O(e,t){return{x:e.x-t.x,y:e.y-t.y}}function U(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}}function F(e,t,n){const o=t.position,i=t.hAlign?t.hAlign:n?"right":"left",r=t.vAlign;let s,a;return s="center"===i?o.x-e.width/2:"right"===i?o.x-e.width:o.x,a="middle"===r?o.y-e.height/2:"bottom"===r?o.y-e.height:"baseline"===r?o.y+e.y:o.y,{x:s,y:a}}function _(e,t,n,o,i){return{panX:o/2-e*n,panY:i/2-t*n}}function K(e,t){return e?.id===t?.id&&e?.isNode===t?.isNode}function G(e,t){let n,o=!1,i=e;for(;!n;)if(n=i.dataset.ojPrivateNode,n?o=!0:n=i.dataset.ojPrivateLink,!n){if(!i.parentElement||i.parentElement===t?.current)break;i=i.parentElement}return{id:n,isNode:o}}function $(e,t,n,o){return s.generateAriaLabel(e,o||"",{isSelected:t?n:void 0})}function W(e,t,n){const o=(e-40)/n.width,i=(t-40)/n.height;return Math.min(o,i)}function q(e,t,n){let o=Math.max(t,e);return o=Math.min(n,o),o}function H(e){const t={};return e?(e.fontFamily&&(t.fontFamily=e.fontFamily),e.fontSize&&(t.fontSize=e.fontSize),e.fontStyle&&(t.fontStyle=e.fontStyle),e.fontWeight&&(t.fontWeight=e.fontWeight),t):t}function J(e,t,n,o,i,r,s){let a;if(e.isNode){a=n[o.get(e.id)]}else{const i=t.get(e.id),r=n[o.get(i.startNode)],s=n[o.get(i.endNode)],d=Math.min(r.x,s.x),c=Math.min(r.y,s.y);a={x:d,y:c,width:Math.max(r.x+r.width,s.x+r.height)-d,height:Math.max(r.y+r.height,s.y+s.height)-c}}return function(e,t,n,o){const i=(n-40)/e.width,r=(o-40)/e.height,s=Math.min(i,r,t),a=e.width/2+e.x,d=e.height/2+e.y;return{centerX:a,centerY:d,zoom:s}}(a,s,i,r)}const Q=({id:e,state:n,previousState:s,position:c,activeId:u,nodeRenderer:l,onNodeSizeChanged:h,nodeIndex:f,data:g,accessibleLabel:p,isDimmed:m,supportsSelection:y})=>{const{nodeStyles:x,dimmedItemStyle:b}=o.itemStyles,w={state:n,previousState:s,data:g},M=d.useTranslationBundle("@oracle/oraclejet-preact"),v=r.useRef(null),I=r.useRef({box:"border-box"});return i.useResizeObserver(v,r.useCallback((e=>{const t=e.borderBoxSize,n=t[0].inlineSize,o=t[0].blockSize;h(n,o,f)}),[f,h]),I.current),t.jsx("div",{ref:v,class:a.classNames([x,m?b:void 0]),"data-oj-private-node":e,role:"img","aria-label":$(M,y,n.selected,p),style:{top:c.y,left:c.x},id:n.focused||n.hovered?u:void 0,children:l(w)},e)};function ee({nodes:e,states:n,previousStates:i,nodeRenderer:r,nodeBounds:s,onNodeSizeChanged:a,supportsSelection:d}){return t.jsx("div",{class:o.layerStyles,children:e.map(((e,o)=>{const c=s&&s[o]?{x:s[o].x,y:s[o].y}:{x:0,y:0},u={selected:n.selectedNodeIds.includes(e.id),focused:n.focusedId===e.id,hovered:n.hoveredId===e.id,zoom:n.zoom},l={selected:i.selectedNodeIds.includes(e.id),focused:i.focusedId===e.id,hovered:i.hoveredId===e.id,zoom:i.zoom};return t.jsx(Q,{id:e.id,position:c,state:u,previousState:l,isDimmed:0!==n.highlightedIds.length&&!n.highlightedIds.includes(e.id),activeId:n.activeId,nodeRenderer:r,onNodeSizeChanged:a,nodeIndex:o,accessibleLabel:e.accessibleLabel,data:e,supportsSelection:d})}))})}const te=({id:e,state:n,previousState:i,activeId:r,data:s,linkRenderer:c,accessibleLabel:u,isDimmed:l,supportsSelection:h,layoutOutput:f})=>{const g=d.useTranslationBundle("@oracle/oraclejet-preact"),{dimmedItemStyle:p,linkStyles:m}=o.itemStyles,y={state:n,previousState:i,data:s,layoutOutput:f};return t.jsx("g",{id:n.focused?r:void 0,"aria-label":$(g,h,n.selected,u),"data-oj-private-link":e,role:"img",class:a.classNames([m,l&&p]),children:c(y)},e)};function ne({links:e,states:n,previousStates:i,linkRenderer:r,width:s,height:a,supportsSelection:d,layoutOutput:c,combinedNodeBounds:u}){const l=W(s,a,u);return t.jsx("svg",{class:o.layerStyles,width:s/l,height:a/l,children:e.map((e=>{const o={selected:n.selectedLinkIds.includes(e.id),focused:n.focusedId===e.id,hovered:n.hoveredId===e.id,zoom:n.zoom},s={selected:i.selectedLinkIds.includes(e.id),focused:i.focusedId===e.id,hovered:i.hoveredId===e.id,zoom:i.zoom};return t.jsx(te,{id:e.id,label:e.label,state:o,previousState:s,isDimmed:0!==n.highlightedIds.length&&!n.highlightedIds.includes(e.id),activeId:n.activeId,accessibleLabel:e.accessibleLabel,data:e,linkRenderer:r,supportsSelection:d,layoutOutput:c})}))})}const oe=({text:e,position:n,styles:i,dimensions:r,isRTL:s})=>{const{labelStyle:d,labelBorderStyle:c}=o.labelStyles,u=F(r,n,s),l=function(e){const t=e.rotationAngle,n=e.rotationPoint,o={};t&&(o.transform=`rotate(${t}deg)`);n&&(o["transform-origin"]=`${n.x}px ${n.y}px`);return o}(n);return t.jsx("div",{class:a.classNames([d,i&&i.borderColor&&c]),style:{top:u.y,left:u.x,...i,...l},children:e})};function ie({labelPosition:e,itemProps:n,labelDimensions:i}){const{direction:r}=c.useUser();return t.jsx("div",{class:o.layerStyles,children:n.map(((n,o)=>{if(n.label&&e[o])return t.jsx(oe,{styles:n.labelStyle,text:n.label,position:e[o],dimensions:i.get(n.id),isRTL:"rtl"===r})}))})}function re({nodes:e,links:n,nodeRenderer:o,linkRenderer:i,states:r,previousStates:s,nodeBounds:a,onNodeSizeChanged:d,width:c,height:u,nodeLabelPositions:l,linkLabelPositions:h,labelDimensions:f,supportsSelection:g,layoutOutput:p,combinedNodeBounds:m}){return t.jsxs(t.Fragment,{children:[n.length>0&&p&&i&&c!==1/0&&m&&t.jsx(ne,{links:n,states:r,previousStates:s,linkRenderer:i,width:c,height:u,supportsSelection:g,layoutOutput:p,combinedNodeBounds:m}),t.jsx(ee,{nodes:e,nodeBounds:a,states:r,previousStates:s,nodeRenderer:o,onNodeSizeChanged:d,supportsSelection:g}),f?t.jsxs("div",{children:[l?t.jsx(ie,{labelPosition:l,itemProps:e,labelDimensions:f}):void 0,n&&h?t.jsx(ie,{labelPosition:h,itemProps:n,labelDimensions:f}):void 0]}):void 0]})}function se({centerX:e,centerY:n,children:i,zoom:r,width:s,height:a}){const d=_(e,n,r,s,a);return t.jsx("div",{class:o.panZoomStyles,style:{translate:`${d.panX}px ${d.panY}px`,transform:`scale(${r})`},children:i})}function ae(e,t){let n;for(let o=0;o<t.length;o++)if(n=t[o],e.id===n.id)return n}function de(e,t){const n=[];return t.forEach((t=>{const o=t.startNode,i=t.endNode;o!=e&&i!=e||n.push(t)})),n}function ce(e,t,n,o){let i,r=n[0],s=n[0];for(let e=0;e<n.length;e++)i=n[e],i.id===t.startNode?r=i:i.id===t.endNode&&(s=i);const a=e.id==r.id?s:r,d=he(e,o),c=he(a,o);let u=Math.atan2(c.y-d.y,c.x-d.x);return u=u<0?u+2*Math.PI:u,u}function ue(e,t,n){let o,i=t[0],r=t[0];for(let n=0;n<t.length;n++)o=t[n],o.id===e.startNode?i=o:o.id===e.endNode&&(r=o);const s=he(i,n),a=he(r,n);return Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))}function le(e,t){return t.endNode===e.id?1:0}function he(e,t){const n=t.get(e.id);return{x:n.x+n.width/2,y:n.y+n.height/2}}function fe(e,t,n){const o=15/180*Math.PI,i=40/180*Math.PI,r=e.x+e.width/2,s=e.y+e.height/2,a=t.x+t.width/2,d=t.y+t.height/2,c=Math.abs(r-a),u=Math.abs(s-d),l=Math.atan2(u,c);let h=Math.sqrt(c*c+u*u);return(l>o&&("right"==n||"left"==n)||l<Math.PI/2-o&&("up"==n||"down"==n))&&(l>i&&("right"==n||"left"==n)||l<Math.PI/2-i&&("up"==n||"down"==n)?h*=6:h*=2),h}function ge(e,t,n,o){if(o){const o=e.x+.5*e.width,i=t.x+.5*t.width,r=e.y+.5*e.height,s=t.y+.5*t.height;switch(n){case"up":return r<s;case"down":return e.y>s;case"right":return o>i;case"left":return o<i}return!0}switch(n){case"up":return e.y<t.y||xe(e.y,t.y);case"down":return e.y>t.y||xe(e.y,t.y);case"right":return e.x>t.x||xe(e.x,t.x);case"left":return e.x<t.x||xe(e.x,t.x)}return!0}function pe(e,t,n){switch(n){case"up":return me(e,t)&&(t.y<=e.y+e.height||xe(t.y,e.y+e.height));case"down":return me(e,t)&&(e.y<=t.y+t.height||xe(e.y,t.y+t.height));case"right":return ye(e,t)&&(e.x<=t.x+t.width||xe(e.x,t.x+t.width));case"left":return ye(e,t)&&(t.x<=e.x+e.width||xe(t.x,e.x+e.width))}return!1}function me(e,t){return e.x>=t.x&&e.x<=t.x+t.width||t.x>=e.x&&t.x<=e.x+e.width}function ye(e,t){return e.y>=t.y&&e.y<=t.y+t.height||t.y>=e.y&&t.y<=e.y+e.height}function xe(e,t){return Math.abs(e-t)<=1e-7}function be(e,t){let n=Math.abs(e-t)<=1e-7;return n||(n=Math.abs(2*Math.PI+Math.min(e,t)-Math.max(e,t))<=1e-7),n}function we(e,t,n,o){const i=r.useRef(),s=function(e,t){const n=new Map;for(let o=0;o<e.length;o++)n.set(e[o].id,t[o]);return n}(e,n);return{isNode:n=>{let o,i;for(let r=0;r<e.length;r++){if(o=e[r],i=t[r],n.id===o.id)return!0;if(n.id===i.id)return!0}return!1},getNextNavigableNode:function(e,t,n,o){if(!o)return n;if(!n)return o[0];const i=s.get(n.id);if(!i)return o[0];let r,a,d,c=n,u=Number.MAX_VALUE,l=!1,h=!1;for(let f=0;f<o.length;f++){if(r=o[f],r===n){h=!0;continue}const g=s.get(r.id);if(!g)continue;const p={x:g.x,y:g.y,width:g.width,height:g.height},m={x:i.x,y:i.y,width:i.width,height:i.height};ge(p,m,e,t)&&(a=pe(p,m,e),l&&!a||(d=fe(p,m,e),(0!=d||h)&&(!l&&a||d<u&&(l&&a||!l))&&(u=d,c=r,l=a)))}return c},getNextNavigableLink:function(e,t,n,o){if(!o)return n;if(!n)return o[0];const r=i.current,a=ae({id:r||n.startNode,isNode:!0},t);if(!a)return n;const d=function(e,t,n,o){let i,r,s;const a=[];for(let d=0;d<t.length;d++){const c=t[d];i=ce(e,c,n,o),r=ue(c,n,o),s=le(e,c),a.push({id:c.id,angle:i,distance:r,direction:s})}return a}(a,o=de(a.id,o),t,s);d.sort(((e,t)=>{const{angle:n,distance:o,direction:i}=e,{angle:r,distance:s,direction:a}=t;let d=-1;return!be(n,r)&&n>r?d=1:be(n,r)&&(o>s||s==o&&i>a?d=1:s==o&&i==a&&(d=0)),d}));const c="down"==e;let u=0;for(let e=0;e<d.length;e++){if(d[e].id===n.id){u=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}}return d[u]},navigateFromNodeToLink:function(e,t,n){if(!n)return;const o=de(n.id,e);if(o.length<1)return;let r=o[0];const a=s.get(n.id);let d,c,u,l;const h=a.x+a.width/2;i.current=n.id;for(let e=0;e<o.length;e++)if(d=o[e],c=d.startNode===n.id?d.endNode:d.startNode,u=s.get(c),l=u.x+u.width/2,t.altKey&&"Comma"===t.code&&l<=h||t.altKey&&"Period"===t.code&&l>=h){r=d;break}return{id:r.id,isNode:!1}},navigateFromLinkToNode:function(e,t){const n=t.key,i=o.get(e),r=s.get(i.startNode),a=s.get(i.endNode);if(!r||!a)return;const d=r.x+r.width/2,c=a.x+a.width/2;return{id:c>d&&"ArrowRight"===n||c<d&&"ArrowLeft"===n?i.endNode:i.startNode,isNode:!0}}}}function Me(e,t,n,o,i,s,a,d,c,f,g,p,m,y,x){const{getNextNavigableNode:b,getNextNavigableLink:w,navigateFromNodeToLink:M,navigateFromLinkToNode:v}=we(n,o,i,s),[I,P]=r.useState({id:t.id,isNode:!0}),[S,N]=r.useState(),k=r.useRef(),D=l.useVisHover((e=>{const t=G(e.target);t&&!K(t,S)&&(N({...t,isCurrent:!0}),k.current=u.getRandomId(),P({...I,isCurrent:!1}),t.isNode?p?.({id:t.id,type:"node",data:a.get(t.id)}):p?.({id:t.id,type:"link",data:s.get(t.id)}))}),void 0,(()=>{N(void 0),k.current=void 0,p?.({id:void 0,data:void 0})}),e);function R(e){e.isNode?m?.({id:e.id,type:"node",data:a.get(e.id)}):m?.({id:e.id,type:"link",data:s.get(e.id)}),k.current=u.getRandomId(),P(e)}function C(e){e&&(K(e,I)||(e.isCurrent=!0,e.isFocusVisible=!0,S&&N({...S,isCurrent:!1}),R(e)))}return{focusedItemInfo:I,hoveredItemInfo:S,activeId:k.current,onContextMenuDismissed:e=>{"keyboard"===e&&R({...I,isFocusVisible:!0,isCurrent:!0})},eventsProps:h.mergeProps(D,{onKeyUp:e=>{if("Tab"===e.code)R({...I,isCurrent:!0,isFocusVisible:!0})},onKeyDown:e=>{const t=e.key;let r=!1;if("TAB"!==t){if(function(e){const t=e.code;if(I.isNode&&e.altKey&&("Period"===t||"Comma"===t))return!0;if(!I.isNode&&("ArrowLeft"===t||"ArrowRight"===t))return!0;return!1}(e)){C(I.isNode?M(o,e,ae(I,n)):v(I.id,e)),r=!0}else if(function(e){switch(e){case"ArrowDown":case"ArrowUp":case"ArrowRight":case"ArrowLeft":return!0}return!1}(t)){const e=function(e){let t="down";switch(e){case"ArrowDown":t="down";break;case"ArrowUp":t="up";break;case"ArrowRight":t="right";break;case"ArrowLeft":t="left"}if(I.isNode){const e=b(t,!0,ae(I,n),n);return e?{id:e.id,isNode:!0}:I}{const e=function(e,t){let n;for(let o=0;o<t.length;o++)if(n=t[o],e.id===n.id)return n}(I,o),i=w(t,n,e,o);return i?{id:i.id}:{id:I.id}}}(t);C(e),r=!0}else switch(t){case"PageUp":y&&y({dPan:{dx:e.shiftKey?-15:0,dy:e.shiftKey?0:-15}}),r=!0;break;case"PageDown":y&&y({dPan:{dx:e.shiftKey?15:0,dy:e.shiftKey?0:15}}),r=!0,r=!0;break;case"+":case"=":x&&x({dZoom:.15}),r=!0;break;case"-":case"_":x&&x({dZoom:-.15}),r=!0;break;case"0":if(e.ctrlKey&&e.altKey){const{centerX:e,centerY:t,zoom:n}=J(I,s,i,d,c,f,g);x&&x({nZoom:n}),y&&y({nPan:{cx:e,cy:t}})}else x&&x({}),y&&y({center:!0});r=!0}r&&(e=>{e.preventDefault(),e.stopPropagation()})(e)}},onBlur:()=>{(null!=S||I.isCurrent)&&m?.({id:void 0,data:void 0});const e={...I,isCurrent:!1,isFocusVisible:!1};P(e)},onPointerUp:e=>{const t=G(e.target);null!=t.id&&(P(t),k.current=u.getRandomId())}})}}const ve=({captureTargetRef:e,numPointers:t=1,onPointerGestureDown:n,onPointerGestureMove:o,onPointerGestureEnd:i,onExtraneousPointerDown:s,isDisabled:a=!1})=>{const d=r.useRef([]);a&&(d.current=[]);const c=e=>{const n=d.current.findIndex((t=>t.pointerId===e.pointerId));-1!==n&&(d.current[n]=e,d.current.length===t&&i&&i({pointers:d.current}),d.current.splice(n,1))};return a?{}:{onPointerDown:e=>{d.current.push(e),d.current.length===t?n&&n({pointers:d.current}):d.current.length>t&&s&&s({pointers:d.current})},onPointerMove:n=>{if(0===d.current.length)return;const i=d.current.findIndex((e=>e.pointerId===n.pointerId));-1!==i&&(d.current[i]=n,d.current.length===t&&(d.current.forEach((t=>e.current.setPointerCapture(t.pointerId))),o&&o({pointers:d.current})))},onPointerUp:c,onPointerCancel:c,onPointerLeave:c}},Ie=(e,t,n,o,i,r,s,a)=>{if(!s)return{newPan:{panX:0,panY:0}};const d=((e,t,n,o)=>{const i="y"!==o?t.panX:e.panX,r="x"!==o?t.panY:e.panY;return{panX:i>n.maxX?n.maxX:i<n.minX?n.minX:i,panY:r>n.maxY?n.maxY:r<n.minY?n.minY:r}})(e,t,s,n),c=d.panX!==e.panX||d.panY!==e.panY,u=function(e,t,n,o,i){return{centerX:(o/2-e)/n,centerY:(i/2-t)/n}}(d.panX,d.panY,o,i,r);return c&&a&&a({centerX:u.centerX,centerY:u.centerY}),{newPan:d}},Pe=({panProps:e,captureTargetRef:t,panBounds:n,width:o,height:i,zoom:s,onDragPanStart:a,onDragPanEnd:d})=>{const c=r.useRef({panX:0,panY:0}),u=r.useRef({panX:0,panY:0}),l=(({captureTargetRef:e,draggableRegion:t,onDragStart:n,onDragMove:o,onDragEnd:i,isDisabled:s=!1})=>{const a={isDragging:!1,x0:-1,y0:-1,regionOffsetX:-1,regionOffsetY:-1},d=r.useRef(a),c=(e,t)=>{const{isDragging:n,x0:o,y0:i,regionOffsetX:r,regionOffsetY:s}=d.current;if(!n)return;const a=e.pageX,c=e.pageY;t&&t({x:a,y:c,dx:a-o,dy:c-i,regionOffsetX:r,regionOffsetY:s,originalEvent:e})},u=ve({captureTargetRef:e,numPointers:1,onExtraneousPointerDown:()=>{d.current=a},onPointerGestureDown:({pointers:[e]})=>{const o=e.pageX,i=e.pageY;if(0!==e.button||!((e,t,n)=>{if(!n)return!0;const{xMin:o,xMax:i,yMin:r,yMax:s}=n;return e>=o&&e<=i&&t>=r&&t<=s})(o,i,t))return;const{regionOffsetX:r,regionOffsetY:s}=((e,t,n)=>n?{regionOffsetX:e-n.xMin,regionOffsetY:t-n.yMin}:{regionOffsetX:e,regionOffsetY:t})(o,i,t);d.current={isDragging:!0,x0:o,y0:i,regionOffsetX:r,regionOffsetY:s},n&&n({x:o,y:i,regionOffsetX:r,regionOffsetY:s,originalEvent:e})},onPointerGestureMove:({pointers:[e]})=>{c(e,o)},onPointerGestureEnd:({pointers:[e]})=>{c(e,i),d.current=a}});return s?{}:u})({captureTargetRef:t,onDragStart:()=>{const t=_(e.centerX,e.centerY,s,o,i);u.current={panX:t.panX,panY:t.panY},a&&a()},onDragMove:({dx:t,dy:r})=>{const a={panX:u.current.panX+t,panY:u.current.panY+r},{newPan:d}=Ie(c.current,a,e.panDirection,s,o,i,n,e.onPan);c.current=d},onDragEnd:({originalEvent:e})=>{u.current.panX===c.current.panX&&u.current.panY===c.current.panY||e.preventDefault(),d&&d()},isDisabled:"off"===e.panning});return l},Se=(e,t,n,o,i)=>{const r=e>o||e<n?t:e;r!==t&&i&&i({zoomValue:r})},Ne=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-t.y)**2),ke=({captureTargetRef:e,zooming:t,minZoom:n,maxZoom:o,zoomValue:i,onZoom:s})=>{const a=(({captureTargetRef:e,onPinchZoomStart:t,onPinchZoomChange:n,onPinchZoomEnd:o,isDisabled:i=!1})=>{const s=r.useRef({x:-1,y:-1}),a=r.useRef(-1),d=()=>{s.current={x:-1,y:-1},a.current=-1};i&&d();const c=ve({captureTargetRef:e,numPointers:2,onPointerGestureDown:({pointers:[e,n]})=>{const o={x:e.offsetX,y:e.offsetY},i={x:n.offsetX,y:n.offsetY};s.current=((e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2}))(o,i),a.current=Ne(o,i),t&&t({origin:s.current,delta:0})},onPointerGestureMove:({pointers:[e,t]})=>{const o={x:e.offsetX,y:e.offsetY},i={x:t.offsetX,y:t.offsetY},r=Ne(o,i),d=r-a.current;a.current=r,n&&n({origin:s.current,delta:d})},onPointerGestureEnd:()=>{d(),o&&o()}});return i?{}:c})({captureTargetRef:e,onPinchZoomChange:({delta:e})=>{Se(i*(1+.05*e),i,n,o,s)},isDisabled:"off"===t});return a},De=({props:e,captureTargetRef:t,width:n,height:o,contentBounds:i,isRtl:s})=>{const[a,d]=r.useState(),c=function(e,t,n,o){const i=W(t,n,o),r=e.maxZoom||1,s=e.minZoom||Math.min(r,i),a=e.zoomValue?e.zoomValue:i;return{zooming:e.zooming?e.zooming:"off",minZoom:s,maxZoom:r,zoomValue:q(a,s,r),onZoom:e.onZoom}}(e,n,o,i),u=r.useRef(),l=r.useRef(),f=r.useRef(),g=r.useRef({zoom:e.zoomValue||0,centerX:e.centerX,centerY:e.centerY}),y=p.isTouch(),x={width:n,height:o,x:0,y:0},b=y?e.panning&&"off"!==e.panning:void 0,w={isZoomScroll:!0,plotAreaSpace:x,componentWidth:n,isRtl:s,showPanButton:b??!1,showZoomButton:!1,showSelectButton:!1,isDisabled:!y},{toggleButtonContent:M,userDragMode:v}=m.useVisDragModeControls(w),I=function(e,t,n,o){return{panning:o?"pan"===n&&e.panning?e.panning:"off":e.panning?e.panning:"off",panDirection:e.panDirection?e.panDirection:"any",centerX:void 0!==e.centerX?e.centerX:t.width/2+t.x,centerY:void 0!==e.centerY?e.centerY:t.height/2+t.y,onPan:e.onPan}}(e,i,v,y);i.width===1/0||c.zoomValue===l.current&&I.panning===f.current||(u.current=((e,t,n,o,i,r,s)=>{const{x:a,y:d,width:c,height:u}=n;let l,h,f,g;if("centerContent"===s)l=e/2-(c+a)*o,f=t/2-(u+d)*o,h=e/2-a*o,g=t/2-d*o;else{const n=o/i,r=(e-c*i)/2-a*i,s=(t-u*i)/2-d*i;l=e-c*n+r*n,f=t-u*n+s*n,h=r*n,g=s*n}const p=r.zoom,m=r.centerX,y=r.centerY;let x,b;if(m){const t=m*p-e/2;-t*p<l?(x=l-t*p,l-=x,h+=x):-t*p>h&&(x=-t*p-h,l-=x,h+=x)}if(y){const e=y*p-t/2;-e*p<f?(b=f-e*p,f-=b,g+=b):-e*p>g&&(b=-e*p-g,f-=b,g+=b)}return{minX:l,maxX:h,minY:f,maxY:g}})(n,o,i,c.zoomValue,c.minZoom,g.current,I.panning),l.current=c.zoomValue,f.current=I.panning);const P=Pe({panProps:I,captureTargetRef:t,panBounds:u.current,zoom:c.zoomValue,width:n,height:o,onDragPanStart:()=>d("grabbing"),onDragPanEnd:()=>d("auto")}),S=r.useRef({panX:0,panY:0}),N=(({zooming:e,minZoom:t,maxZoom:n,zoomValue:o,onZoom:i})=>(({onWheel:e,preventDefault:t=!0,isDisabled:n=!1})=>n?{}:{onWheel:n=>{const{deltaX:o,deltaY:i}=(e=>{const{deltaX:t,deltaY:n,deltaMode:o}=e;switch(o){case e.DOM_DELTA_PIXEL:return{deltaX:-t,deltaY:-n};case e.DOM_DELTA_LINE:return{deltaX:15*-t,deltaY:15*-n};case e.DOM_DELTA_PAGE:return{deltaX:40*-t,deltaY:40*-n};default:return{deltaX:-t,deltaY:-n}}})(n);t&&n.preventDefault(),e({x:n.offsetX,y:n.offsetY,deltaX:o,deltaY:i,ctrlKey:n.ctrlKey||n.metaKey})}})({onWheel:({deltaY:e})=>{Se(o*(1+.05*e),o,t,n,i)},isDisabled:"off"===e}))(c),k=ke({captureTargetRef:t,zooming:c.zooming,minZoom:c.minZoom,maxZoom:c.maxZoom,zoomValue:c.zoomValue,onZoom:c.onZoom});return{panZoomProps:h.mergeProps(P,N,k),panProps:I,zoomProps:c,toggleButtonContent:M,cursor:a,centerX:I.centerX,centerY:I.centerY,zoomValue:c.zoomValue,kbPanCallback:"off"!==I.panning?e=>{let t,r;e.center?(t=i.x+i.width/2,r=i.y+i.height/2):e.dPan?(t=I.centerX+e.dPan.dx,r=I.centerY+e.dPan.dy):(t=e.nPan.cx,r=e.nPan.cy);const s=_(t,r,c.zoomValue,n,o),{newPan:a}=Ie(S.current,s,I.panDirection,c.zoomValue,n,o,u.current,I.onPan);S.current=a}:void 0,kbZoomCallback:"off"!==c.zooming?e=>{const t=e.dZoom?c.zoomValue+e.dZoom:W(n,o,i);Se(e.nZoom?e.nZoom:t,c.zoomValue,c.minZoom,c.maxZoom,c.onZoom)}:void 0}};function Re({nodes:e=[],links:n=[],width:i,height:s,selectedIds:a={},selectionMode:d="none",layout:l,nodeRenderer:p,linkRenderer:m,onSelectionChange:M,onItemHover:v,onItemFocus:I,highlightedIds:P={},datatip:S,contextMenuConfig:N,...k}){const D=r.useRef(null),R=r.useRef(null),[C,z]=r.useState([]),[X,Y]=r.useState(),{direction:T}=c.useUser(),L="rtl"===T,Z=e,j=V(Z),A=j.itemIdToDataMap,O=function(e,t){const n=[];for(let o=0;o<e.length;o++){const i=e[o];t.get(i.startNode)&&t.get(i.endNode)&&n.push(i)}return n}(n,A),U=V(O),F=U.itemIdToDataMap,K=r.useRef(!1),$=function(e){const t=[];for(let n=0;n<e.length;n++)t.push({width:e[n].width,height:e[n].height});return t}(C),{textMeasureContent:W,getTextDimensions:q}=g.useTextDimensions(),J=r.useRef(new Map),Q=r.useRef([]),ee=r.useRef([]),te=r.useRef(),ne=function(e,t){if(0===e.length)return{x:0,width:1/0,y:0,height:1/0};let n,o=1/0,i=1/0,r=-1/0,s=-1/0;for(let t=0;t<e.length;t++)n=e[t],o=n.x<o?n.x:o,i=n.y<i?n.y:i,r=n.x+n.width>r?n.x+n.width:r,s=n.y+n.height>s?n.y+n.height:s;return t&&(o=t.x<o?t.x:o,i=t.y<i?t.y:i,r=t.x+t.width>r?t.x+t.width:r,s=t.y+t.height>s?t.y+t.height:s),{x:o,width:r-o,y:i,height:s-i}}(C,X),{panZoomProps:oe,panProps:ie,zoomProps:ae,toggleButtonContent:de,cursor:ce,centerX:ue,centerY:le,zoomValue:he,kbPanCallback:fe,kbZoomCallback:ge}=De({props:k,captureTargetRef:R,width:i,height:s,contentBounds:ne,isRtl:L}),{touchResponse:pe,touchResponseStyle:me}=x.useVisTouchResponse({type:"auto",supportsTouchDragGestures:"on"===ae.zooming||"off"!==ie.panning,rootRef:R}),{onContextMenuDismissed:ye,focusedItemInfo:xe,hoveredItemInfo:be,activeId:we,eventsProps:ve}=Me(pe,Z[0],Z,O,C,F,A,j.itemIdToIndexMap,i,s,k.maxZoom||1,v,I,fe,ge),{selectionProps:Ie,selectionContent:Pe}=function({selectedIds:e,selectionMode:t,nodeMap:n,linkMap:o,focusedItemInfo:i,onSelectionChange:r,rootRef:s}){const a=n.itemIdToIndexMap,d=n.itemIndexToIdMap,c=n.itemIdToDataMap,u=o.itemIdToIndexMap,l=o.itemIndexToIdMap,h=o.itemIdToDataMap,f=e=>`N_${a.get(e)}`,g=e=>d.get(Number(e.slice(2))),p=e=>`L_${u.get(e)}`,m=e=>l.get(Number(e.slice(2))),x=[...e.nodes?e.nodes.map(f):[],...e.links?e.links.map(p):[]],{selectionContent:b,selectionProps:w}=y.useSelection({selection:x,idExtracter:e=>{const t="keyup"===e.type?i:G(e.target,s);return void 0!==t.id?t.isNode?f(t.id):p(t.id):void 0},selectionMode:t,getDataById:e=>{let t;if("N"===e[0]){const o=g(e);t=n.itemIdToDataMap.get(o)}else if("L"===e[0]){const n=m(e);t=o.itemIdToDataMap.get(n)}return t},onChange:e=>{const t=e.ids.filter((e=>"N"===e[0])).map((e=>g(e))),n=e.ids.filter((e=>"L"===e[0])).map((e=>m(e))),o=t.filter((e=>"off"!==c.get(e)?.selectable)),i=n.filter((e=>"off"!==h.get(e)?.selectable)),s=o.map((e=>c.get(e))),a=i.map((e=>h.get(e)));return r&&r({nodes:o,links:i,nodeData:s,linkData:a})}});return{selectionContent:b,selectionProps:w}}({selectedIds:a,selectionMode:d,nodeMap:j,linkMap:U,focusedItemInfo:xe,onSelectionChange:M,rootRef:R});xe&&C.length>0&&(D.current=function(e,t,n,o,i){if(e.isNode)return t[o.get(e.id)||0];{const r=n[i.get(e.id)||0],s=t[o.get(r.startNode)||0],a=t[o.get(r.endNode)||0],d={x:s.x+s.width/2,y:s.y+s.height/2},c={x:a.x+a.width/2,y:a.y+a.height/2};return{x:Math.min(d.x,c.x),y:Math.min(d.y,c.y),width:Math.abs(d.x-c.x),height:Math.abs(d.y-c.y)}}}(xe,C,O,j.itemIdToIndexMap,U.itemIdToIndexMap));const{datatipContent:Se,datatipProps:{"aria-describedby":Ne,...ke}}=(({touchResponse:e,datatip:t,focusedItemBoundsRef:n,focusedItemInfo:o,panState:i,zoom:r,width:s,nodesMap:a,linksMap:d,hoveredItem:l})=>{const{direction:h}=c.useUser(),g="rtl"===h,p=function(e,t,n,o,i){let r;const s=o?.isCurrent;if(s&&null!=o.id&&(r=o),n&&n.isCurrent&&(r=n),r&&i)return i(r.isNode?{data:e.get(r.id),type:"node"}:{data:t.get(r.id),type:"link"});if(r){const n=(r.isNode?e.get(r.id):t.get(r.id))?.accessibleLabel;return{content:n}}}(a,d,o,l,t),m=n.current?{x:n.current.x*r+i.panX,y:n.current.y*r+i.panY,width:n.current.width*r,height:n.current.height*r}:void 0,y=o.isCurrent?u.calculateOffset(g,s,m):u.calculateOffset(g,s),{datatipContent:x,datatipProps:b}=f.useDatatip({content:p?.content,borderColor:p?.borderColor,placement:"top-start",offset:y,anchor:o?.isCurrent?"element":"pointer",touchResponse:e});return{datatipContent:x,datatipProps:b}})({touchResponse:pe,datatip:S,focusedItemInfo:xe,focusedItemBoundsRef:D,panState:_(ue,le,he,i,s),zoom:he,width:i,nodesMap:A,linksMap:F,hoveredItem:be}),Re={width:i,height:s,cursor:ce,...me},Ce=r.useRef(),ze=Ce.current?Ce.current:{selectedNodeIds:[],selectedLinkIds:[],focusedId:void 0,hoveredId:void 0,activeId:void 0,highlightedIds:[],zoom:0};Ce.current={selectedNodeIds:a.nodes??[],selectedLinkIds:a.links??[],focusedId:xe.isCurrent&&xe.isFocusVisible?xe.id:void 0,hoveredId:be?.isCurrent?be.id:void 0,activeId:we,highlightedIds:B(P.nodes,P.links),zoom:he};const{contextMenuContent:Xe,contextMenuProps:Ye}=(({focusedItemInfo:e,rootRef:t,contextMenuConfig:n,onContextMenuDismissed:o,nodesMap:i,linksMap:r})=>{const{contextMenuProps:s,contextMenuContent:a}=w.useContextMenu({onContextMenuHandler:({gesture:n,target:o})=>{let s,a="background";const d=o;"keyboard"===n?(s=e.id,e.isNode?a="node":void 0===s||e.isNode||(a="link")):d.closest("[data-oj-private-node]")?.dataset.ojPrivateNode?(s=d.closest("[data-oj-private-node]")?.dataset.ojPrivateNode,a="node"):d.closest("[data-oj-private-link]")?.dataset.ojPrivateLink&&(s=d.closest("[data-oj-private-link]")?.dataset.ojPrivateLink,a="link");const{context:c}=function(e,t,n,o){let i;return i="node"===n?{data:e.get(o),type:n}:"link"===n?{data:t.get(o),type:n}:{type:"background"},{context:i}}(i,r,a,s);if("keyboard"===n){let n;return n=e.isNode?t.current?.querySelector(`[data-oj-private-node="${s}"]`):t.current?.querySelector(`[data-oj-private-link="${s}"]`),{type:"element",context:c,elem:n||null}}return{type:"pointer",context:c}},contextMenuOptions:{isDisabled:!n},rootRef:t,contextMenuConfig:n,onContextMenuDismissed:o});return{contextMenuContent:a,contextMenuProps:s}})({focusedItemInfo:xe,rootRef:R,contextMenuConfig:e.length>0?N:void 0,onContextMenuDismissed:ye,nodesMap:A,linksMap:F}),Te=h.mergeProps(oe,ve,Ie,ke,Ye);return t.jsxs("div",{ref:R,class:o.outerStyles,...Te,style:Re,tabIndex:0,role:"application","aria-label":k["aria-label"],"aria-labelledby":k["aria-labelledby"],"aria-describedby":b.l([k["aria-describedby"],Ne]),"aria-activedescendant":we,children:[q?t.jsx(se,{centerX:ue,centerY:le,zoom:he,width:i,height:s,children:t.jsx(re,{nodes:Z,links:O,nodeRenderer:p,linkRenderer:m,width:i,height:s,nodeBounds:C,states:Ce.current,previousStates:ze,onNodeSizeChanged:(e,t,n)=>{$[n]={width:e,height:t},K.current||(K.current=!0,window.requestAnimationFrame((()=>{const{labelDims:e,layoutJSON:t}=function(e,t,n,o,i,r,s){const a=new Map,d=Array.from(t.keys());for(const e of d){const n=t.get(e);if(n&&s&&n.label){const t=n.label,o=H(n.labelStyle);a.set(e,s(t,o))}}const c=Array.from(n.keys());for(const e of c){const t=n.get(e);if(t&&s&&t.label){const n=t.label,o=H(t.labelStyle);a.set(e,s(n,o))}}return{layoutJSON:{getNodeDimensions:function(t){for(let n=0;n<e.length;n++)if(t.id===e[n].id)return o[n];return o[0]},getLabelDimensions:function(e){return a.get(e.id)},componentSize:{width:i,height:r}},labelDims:a}}(Z,A,F,$,i,s,q);J.current=e;const n=l(t),{nodeIds:o,nodePoints:r,nodeLabelPos:a,linkLabelPos:d}=function(e,t,n){const o=e.nodes,i=e.links,r=[],s=[],a=[],d=[];let c,u,l=!1,h=!1;for(let e=0;e<t.length;e++)c=o[t[e].id],r.push(c.position),d.push(t[e].id),c.label&&(l=!0),s.push(c.label);if(i)for(let e=0;e<n.length;e++)u=i[n[e].id],u.label&&(h=!0),a.push(u.label);return{nodeIds:d,nodePoints:r,nodeLabelPos:l?s:void 0,linkLabelPos:h?a:void 0}}(n,Z,O);Q.current=a,ee.current=d,te.current=n;const{newBounds:c}=function(e,t,n){const o=[],i=new Map;for(let r=0;r<e.length;r++){const s=t[r],a=e[r];i.set(n[r],{x:s.x,y:s.y,width:a.width,height:a.height}),o.push({x:s.x,y:s.y,width:a.width,height:a.height})}return{newBounds:o,newBoundsMap:i}}($,r,o);var u,h;h=C,(u=c).length===h.length&&u.every((({x:e,y:t,width:n,height:o},i)=>h[i].x===e&&h[i].y===t&&h[i].width===n&&h[i].width===o))||z(c);const f=function(e,t,n,o=[],i=[],r){if(0===o.length&&0===i.length)return;let s,a,d=1/0,c=1/0,u=-1/0,l=-1/0;for(let n=0;n<o.length;n++)a=o[n],a&&(s=E(a,e.get(t[n].id),r),d=s.x<d?s.x:d,c=s.y<c?s.y:c,u=s.x+s.width>u?s.x+s.width:u,l=s.y+s.height>l?s.y+s.height:l);for(let t=0;t<i.length;t++)a=i[t],a&&(s=E(a,e.get(n[t].id),r),d=s.x<d?s.x:d,c=s.y<c?s.y:c,u=s.x+s.width>u?s.x+s.width:u,l=s.y+s.height>l?s.y+s.height:l);return{x:d,width:u-d,y:c,height:l-c}}(e,Z,O,a,d,"rtl"===T);Y(f),K.current=!1})))},nodeLabelPositions:Q.current,linkLabelPositions:ee.current,labelDimensions:J.current,supportsSelection:"none"!==d||!!(a?.nodes&&a.nodes.length>0)||!!(a?.links&&a.links.length>0),layoutOutput:te.current,combinedNodeBounds:ne})}):void 0,W,Se,Xe,Pe,de]})}e.Diagram=function({width:e,height:i,...r}){return r.nodes&&r.nodes.length>0?t.jsx(n.TrackResizeContainer,{width:e,height:i,class:o.dimensionStyle,children:(e,n)=>t.jsx(Re,{width:e,height:n,...r})}):null}}));
//# sourceMappingURL=Diagram-c8ca8f7a.js.map
