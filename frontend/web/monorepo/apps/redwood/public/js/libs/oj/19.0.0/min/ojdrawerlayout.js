/**
 * @license
 * Copyright (c) 2014, 2025, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","preact/jsx-runtime","ojs/ojvcomponent","preact","jquery","ojs/ojanimation","ojs/ojdomutils","ojs/ojcore-base","ojs/ojpopup","ojs/ojpopupcore","ojs/ojdrawerutils","ojs/ojcontext"],function(e,t,r,s,a,n,i,o,l,d,h,w){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w;var D,p=function(e,t,r,s){var a,n=arguments.length,i=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(n<3?a(i):n>3?a(t,r,i):a(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};e.DrawerLayout=D=class extends s.Component{constructor(){super(...arguments),this.rootRef=s.createRef(),this.startWrapperRef=s.createRef(),this.startRef=s.createRef(),this.endWrapperRef=s.createRef(),this.endRef=s.createRef(),this.bottomWrapperRef=s.createRef(),this.bottomRef=s.createRef(),this.middleSectionRef=s.createRef(),this.mainSectionRef=s.createRef(),this.startClosedWithEsc=!1,this.endClosedWithEsc=!1,this.bottomClosedWithEsc=!1,this.startOverlayDrawerResizeHandler=null,this.endOverlayDrawerResizeHandler=null,this.bottomOverlayDrawerResizeHandler=null,this.startReflowDrawerResizeHandler=null,this.endReflowDrawerResizeHandler=null,this.drawerLayoutResizeHandler=null,this.windowResizeHandler=null,this.handleResize=!0,this.state={startOpened:this.props.startOpened,endOpened:this.props.endOpened,bottomOpened:this.props.bottomOpened,startDisplay:this.props.startDisplay,endDisplay:this.props.endDisplay,bottomDisplay:this.props.bottomDisplay,startShouldChangeDisplayMode:!1,endShouldChangeDisplayMode:!1,bottomShouldChangeDisplayMode:!1,startStateToChangeTo:null,endStateToChangeTo:null,bottomStateToChangeTo:null,viewportResolvedDisplayMode:this.getViewportResolvedDisplayMode(),viewportResolvedDisplayModeVertical:this.getViewportResolvedDisplayModeVertical(),lastlyOpenedDrawer:h.DrawerConstants.stringStart},this.handleKeyDown=(e,t)=>{if(t.defaultPrevented)return;const r=this.getDrawerResolvedDisplayMode(e);t.key!==h.DrawerConstants.keys.ESC||r!==h.DrawerConstants.stringOverlay&&r!==h.DrawerConstants.stringFullOverlay||(this[this.edgeToClosedWithEsc(e)]=!0,this.selfClose(e))},this.getRefToAnimate=e=>this.getDrawerResolvedDisplayMode(e)===h.DrawerConstants.stringReflow?this.getDrawerWrapperRef(e):this.getDrawerRef(e),this.overlayDrawerResizeCallback=e=>{a(this.getDrawerRef(e).current).position(this.getDrawerPosition(e))},this.reflowDrawerResizeCallback=()=>{this.setBottomOverlayDrawerWidth()},this.drawerLayoutResizeCallback=()=>{this.setStartEndOverlayDrawersHeight(),this.setBottomOverlayDrawerWidth()},this.lockResizeListener=()=>{this.handleResize&&(this.handleResize=!1,setTimeout(()=>{this.handleResize=!0;const e={};if(this.state.viewportResolvedDisplayMode!==this.getViewportResolvedDisplayMode()){const t=[h.DrawerConstants.stringStart,h.DrawerConstants.stringEnd];for(let r=0;r<t.length;r++){const s=t[r];this.isDrawerOpened(s)&&"auto"===this.state[this.edgeToDisplayName(s)]&&(e[this.edgeToShouldChangeDisplayMode(s)]=!0)}}this.state.viewportResolvedDisplayModeVertical!==this.getViewportResolvedDisplayModeVertical()&&this.isDrawerOpened(h.DrawerConstants.stringBottom)&&"auto"===this.state[this.edgeToDisplayName(h.DrawerConstants.stringBottom)]&&(e[this.edgeToShouldChangeDisplayMode(h.DrawerConstants.stringBottom)]=!0),Object.keys(e).length>0||(e.viewportResolvedDisplayMode=this.getViewportResolvedDisplayMode()),this.setState(e)},h.DrawerConstants.animationDuration+50))},this.refreshHandler=e=>{const t=a(this.getDrawerRef(e).current);t.position(this.getDrawerPosition(e)),[h.DrawerConstants.stringStart,h.DrawerConstants.stringEnd].indexOf(e)>-1&&this.setStartEndOverlayDrawersHeight(),this.setBottomOverlayDrawerWidth(),d.PopupService.getInstance().triggerOnDescendents(t,d.PopupService.EVENT.POPUP_REFRESH)},this.destroyHandler=e=>{const t=a(this.getDrawerRef(e).current);d.ZOrderUtils.getStatus(t)===d.ZOrderUtils.STATUS.OPEN&&d.ZOrderUtils.removeFromAncestorLayer(t)},this.windowResizeCallback=()=>{if(this.handleResize){const e=this.state.viewportResolvedDisplayMode,t=this.getViewportResolvedDisplayMode(),r=this.state.viewportResolvedDisplayModeVertical,s=this.getViewportResolvedDisplayModeVertical();this.setBottomOverlayDrawerWidth();let a=!1;const n={},i=()=>{this.isDrawerOpened(h.DrawerConstants.stringBottom)&&"auto"===this.state[this.edgeToDisplayName(h.DrawerConstants.stringBottom)]&&(a=!0,n[this.edgeToShouldChangeDisplayMode(h.DrawerConstants.stringBottom)]=!0)};if(e!==t){this.lockResizeListener();const r=[h.DrawerConstants.stringStart,h.DrawerConstants.stringEnd];for(let e=0;e<r.length;e++){const t=r[e];this.isDrawerOpened(t)&&"auto"===this.state[this.edgeToDisplayName(t)]&&(a=!0,n[this.edgeToShouldChangeDisplayMode(t)]=!0)}const s=[h.DrawerConstants.stringReflow,h.DrawerConstants.stringOverlay];s.indexOf(e)>-1&&s.indexOf(t)>-1&&i()}r!==s&&e===h.DrawerConstants.stringReflow&&i(),!1===a&&(n.viewportResolvedDisplayMode=t,n.viewportResolvedDisplayModeVertical=s),Object.keys(n).length>0&&this.setState(n)}},this.getDrawerPosition=e=>{const t=`${e===h.DrawerConstants.stringBottom?h.DrawerConstants.stringStart:e} ${e===h.DrawerConstants.stringBottom?h.DrawerConstants.stringBottom:h.DrawerConstants.stringTop}`;let r={my:t,at:t,of:this.mainSectionRef.current,collision:"none"};return d.PositionUtils.normalizeHorizontalAlignment(r,h.DrawerUtils.isRTL())}}static getDerivedStateFromProps(e,t){const r={};return t.startOpened&&e.startDisplay!==t.startDisplay?(r[`${h.DrawerConstants.stringStart}${h.DrawerConstants.stringStateToChangeTo}`]={startDisplay:e.startDisplay},r):t.endOpened&&e.endDisplay!==t.endDisplay?(r[`${h.DrawerConstants.stringEnd}${h.DrawerConstants.stringStateToChangeTo}`]={endDisplay:e.endDisplay},r):t.bottomOpened&&e.bottomDisplay!==t.bottomDisplay?(r[`${h.DrawerConstants.stringBottom}${h.DrawerConstants.stringStateToChangeTo}`]={bottomDisplay:e.bottomDisplay},r):(e.startOpened!==t.startOpened&&(r.startOpened=e.startOpened,e.startOpened&&(r.lastlyOpenedDrawer=h.DrawerConstants.stringStart)),e.endOpened!==t.endOpened&&(r.endOpened=e.endOpened,e.endOpened&&(r.lastlyOpenedDrawer=h.DrawerConstants.stringEnd)),e.bottomOpened!==t.bottomOpened&&(r.bottomOpened=e.bottomOpened,e.bottomOpened&&(r.lastlyOpenedDrawer=h.DrawerConstants.stringBottom)),e.startDisplay!==t.startDisplay&&(r.startDisplay=e.startDisplay),e.endDisplay!==t.endDisplay&&(r.endDisplay=e.endDisplay),e.bottomDisplay!==t.bottomDisplay&&(r.bottomDisplay=e.bottomDisplay),0===Object.keys(r).length?null:r)}render(e){let s=this.getDrawer(h.DrawerConstants.stringStart),a=this.getDrawer(h.DrawerConstants.stringEnd),n=this.getDrawer(h.DrawerConstants.stringBottom);return t.jsxs(r.Root,{ref:this.rootRef,children:[s,t.jsxs("div",{ref:this.middleSectionRef,class:h.DrawerConstants.middleSectionSelector,children:[t.jsx("div",{ref:this.mainSectionRef,class:h.DrawerConstants.mainContentSelector,children:e.children}),n]}),a]})}getDrawer(e){const r=this.getDrawerResolvedDisplayMode(e),s=r===h.DrawerConstants.stringOverlay||r===h.DrawerConstants.stringFullOverlay?-1:void 0;return this.isDrawerOpened(e)||this.wasDrawerOpenedInPrevState(e)||this.wasDrawerClosedWithEsc(e)?t.jsx("div",{ref:this.getDrawerWrapperRef(e),class:this.getDrawerWrapperStyleClasses(e),children:t.jsx("div",{ref:this.getDrawerRef(e),tabIndex:s,class:this.getDrawerStyleClasses(e),onKeyDown:t=>this.handleKeyDown(e,t),children:this.getDrawerContent(e)})}):null}isDrawerOpened(e){return this.state[this.edgeToStateOpenedName(e)]}wasDrawerOpenedInPrevState(e){return this[this.edgeToPrevStateOpenedName(e)]}wasDrawerClosedWithEsc(e){return this[this.edgeToClosedWithEsc(e)]}getDrawerWrapperRef(e){switch(e){case h.DrawerConstants.stringStart:return this.startWrapperRef;case h.DrawerConstants.stringEnd:return this.endWrapperRef;case h.DrawerConstants.stringBottom:return this.bottomWrapperRef}}getDrawerRef(e){switch(e){case h.DrawerConstants.stringStart:return this.startRef;case h.DrawerConstants.stringEnd:return this.endRef;case h.DrawerConstants.stringBottom:return this.bottomRef}}getDrawerContent(e){switch(e){case h.DrawerConstants.stringStart:return this.props.start;case h.DrawerConstants.stringEnd:return this.props.end;case h.DrawerConstants.stringBottom:return this.props.bottom}}getDrawerWrapperStyleClasses(e){return`${h.DrawerConstants.stringOjDrawer}${h.DrawerConstants.charDash}${h.DrawerConstants.stringReflow}-wrapper `+this.getDrawerStyleClasses(e)}getDrawerStyleClasses(e){let t;switch(this.getDrawerResolvedDisplayMode(e)){case h.DrawerConstants.stringReflow:t={[h.DrawerConstants.styleDisplayMode(h.DrawerConstants.stringReflow)]:!0};break;case h.DrawerConstants.stringOverlay:t={[h.DrawerConstants.styleDisplayMode(h.DrawerConstants.stringOverlay)]:!0};break;case h.DrawerConstants.stringFullOverlay:t={[h.DrawerConstants.styleDisplayMode(h.DrawerConstants.stringOverlay)]:!0,[h.DrawerConstants.styleDisplayMode(h.DrawerConstants.stringFullOverlay)]:!0}}return h.DrawerUtils.getStyleClassesMapAsString(Object.assign(t,h.DrawerUtils.getCommonStyleClasses(e)))}getDrawerResolvedDisplayMode(e){const t=this.edgeToDisplayName(e);if("auto"===this.state[t])return e===h.DrawerConstants.stringBottom?this.state.viewportResolvedDisplayModeVertical===h.DrawerConstants.stringFullOverlay||this.state.viewportResolvedDisplayMode===h.DrawerConstants.stringFullOverlay?h.DrawerConstants.stringFullOverlay:this.state.viewportResolvedDisplayModeVertical===h.DrawerConstants.stringOverlay||this.state.viewportResolvedDisplayMode===h.DrawerConstants.stringOverlay?h.DrawerConstants.stringOverlay:h.DrawerConstants.stringReflow:this.state.viewportResolvedDisplayMode;if(this.state[t]===h.DrawerConstants.stringReflow)return h.DrawerConstants.stringReflow;if(this.state[t]===h.DrawerConstants.stringOverlay){return(e===h.DrawerConstants.stringBottom?this.state.viewportResolvedDisplayModeVertical:this.state.viewportResolvedDisplayMode)===h.DrawerConstants.stringFullOverlay?h.DrawerConstants.stringFullOverlay:h.DrawerConstants.stringOverlay}}getViewportResolvedDisplayMode(){const e=h.DrawerUtils.getViewportWidth();return e>=h.DrawerConstants.displayTypeChangeThreshold?h.DrawerConstants.stringReflow:e<h.DrawerConstants.displayTypeChangeThreshold&&e>=h.DrawerConstants.fullWidthDrawerChangeThreshold?h.DrawerConstants.stringOverlay:h.DrawerConstants.stringFullOverlay}getViewportResolvedDisplayModeVertical(){return h.DrawerUtils.getViewportHeight()>=h.DrawerConstants.fullHeightDrawerChangeThreshold?h.DrawerConstants.stringReflow:h.DrawerConstants.stringFullOverlay}async selfClose(e){try{await(this.props.onOjBeforeClose?.({edge:e}))}catch(e){return}e===h.DrawerConstants.stringStart&&this.props.onStartOpenedChanged?.(!1),e===h.DrawerConstants.stringEnd&&this.props.onEndOpenedChanged?.(!1),e===h.DrawerConstants.stringBottom&&this.props.onBottomOpenedChanged?.(!1)}setDrawerFocus(e){const t=this.getDrawerRef(e),r=h.DrawerUtils.getAutofocusFocusables(t.current),{length:s,0:a}=r;if(s>0)return void a.focus({preventScroll:!0});const n=h.DrawerUtils.getFocusables(t.current);let i=t.current;n.length&&(i=n[0]),i.focus({preventScroll:!0})}componentDidUpdate(e,t){this.handleComponentUpdate(t)}componentDidMount(){if(this.startOpenedPrevState=this.props.startOpened,this.endOpenedPrevState=this.props.endOpened,this.bottomOpenedPrevState=this.props.bottomOpened,null===this.windowResizeHandler&&(this.windowResizeHandler=this.windowResizeCallback.bind(this)),window.addEventListener(h.DrawerConstants.stringResize,this.windowResizeHandler),D.defaultProps.startOpened!=this.props.startOpened||D.defaultProps.endOpened!=this.props.endOpened||D.defaultProps.bottomOpened!=this.props.bottomOpened){const e=Object.assign({},this.state);e.startOpened=!1,e.endOpened=!1,e.bottomOpened=!1,this.handleComponentUpdate(e)}}componentWillUnmount(){window.removeEventListener(h.DrawerConstants.stringResize,this.windowResizeHandler),this.windowResizeHandler=null,this.removeDrawerLayoutResizeListener()}removeDrawerLayoutResizeListener(){this.drawerLayoutResizeHandler&&(i.removeResizeListener(this.rootRef.current,this.drawerLayoutResizeHandler),this.drawerLayoutResizeHandler=null)}handleComponentUpdate(e){let t=[h.DrawerConstants.stringStart,h.DrawerConstants.stringEnd,h.DrawerConstants.stringBottom];t=t.filter(e=>e!=this.state.lastlyOpenedDrawer),this.openOrCloseDrawer(t[0],e),this.openOrCloseDrawer(t[1],e),this.openOrCloseDrawer(this.state.lastlyOpenedDrawer,e)}openOrCloseDrawer(e,t){const r=this.edgeToStateOpenedName(e);if(this.isDrawerOpened(e)!=t[r]||this.shouldDrawerChangeDisplayMode(e)||this.isDrawerOpened(e)&&t[r]){this.isDrawerOpened(e)!=t[r]&&(this[this.edgeToPrevStateOpenedName(e)]=this.isDrawerOpened(e));this.getDrawerResolvedDisplayMode(e)===h.DrawerConstants.stringReflow?this.openOrCloseReflowDrawer(e,t):this.openOrClosePopupDrawer(e,t)}}openOrCloseReflowDrawer(e,t){!1===this.isDrawerOpened(e)||this.shouldDrawerChangeDisplayMode(e)||this.getStateToChangeTo(e)?(this.elementWithFocusBeforeDrawerCloses=document.activeElement,this.animateClose(e).then(()=>{const t=this.getDrawerRef(e).current;if(t&&(e===h.DrawerConstants.stringStart?(i.removeResizeListener(t,this.startReflowDrawerResizeHandler),this.startReflowDrawerResizeHandler=null):e===h.DrawerConstants.stringEnd&&(i.removeResizeListener(t,this.endReflowDrawerResizeHandler),this.endReflowDrawerResizeHandler=null)),this.returnFocus(e),this.getStateToChangeTo(e)){const t={},r={};r[this.edgeToStateToChangeTo(e)]=null,Object.assign(t,this.getStateToChangeTo(e),r),this.setState(t)}else if(this.shouldDrawerChangeDisplayMode(e)){const t={};t[this.edgeToShouldChangeDisplayMode(e)]=!1,t.viewportResolvedDisplayMode=this.getViewportResolvedDisplayMode(),t.viewportResolvedDisplayModeVertical=this.getViewportResolvedDisplayModeVertical(),this.setState(t)}else this.wasDrawerOpenedInPrevState(e)||(this.addHiddenStyle(e),this.forceUpdate(),setTimeout(()=>{this.setBottomOverlayDrawerWidth()},0))}).then(()=>{this.setBottomOverlayDrawerWidth()})):this.isDrawerOpened(e)&&(!1===t[this.edgeToStateOpenedName(e)]||t[this.edgeToShouldChangeDisplayMode(e)]||t[this.edgeToDisplayName(e)]!=this.state[this.edgeToDisplayName(e)])&&(t[this.edgeToShouldChangeDisplayMode(e)]||(this.drawerOpener=document.activeElement),this.removeHiddenStyle(e),this.animateOpen(e).then(()=>{this.setBottomOverlayDrawerWidth();const t=this.getDrawerRef(e).current;t&&(e===h.DrawerConstants.stringStart&&null===this.startReflowDrawerResizeHandler?(this.startReflowDrawerResizeHandler=this.reflowDrawerResizeCallback.bind(this),i.addResizeListener(t,this.startReflowDrawerResizeHandler,50,!0)):e===h.DrawerConstants.stringEnd&&null===this.endReflowDrawerResizeHandler&&(this.endReflowDrawerResizeHandler=this.reflowDrawerResizeCallback.bind(this),i.addResizeListener(t,this.endReflowDrawerResizeHandler,50,!0)))}))}removeHiddenStyle(e){this.getDrawerWrapperRef(e).current?.classList.remove(h.DrawerConstants.styleDrawerHidden)}addHiddenStyle(e){this.getDrawerWrapperRef(e).current?.classList.add(h.DrawerConstants.styleDrawerHidden)}returnFocus(e){const t=this.getDrawerRef(e).current;t&&t.contains(this.elementWithFocusBeforeDrawerCloses)&&h.DrawerUtils.moveFocusToElementOrNearestAncestor(this.drawerOpener)}animateOpen(e){const t=w.getContext(this.rootRef.current).getBusyContext().addBusyState({description:"Animation in progress"});return this.getDrawerResolvedDisplayMode(e)===h.DrawerConstants.stringReflow?n.expand(this.getRefToAnimate(e).current,h.DrawerUtils.getAnimationOptions("expand",e)).then(t):n.slideIn(this.getRefToAnimate(e).current,h.DrawerUtils.getAnimationOptions(h.DrawerConstants.stringSlideIn,e)).then(()=>{h.DrawerUtils.unwrapDrawerClippingArea(this.getDrawerRef(e).current)}).then(t)}animateClose(e){const t=w.getContext(this.rootRef.current).getBusyContext().addBusyState({description:"Animation in progress"});if(this.getDrawerResolvedDisplayMode(e)===h.DrawerConstants.stringReflow)return n.collapse(this.getRefToAnimate(e).current,h.DrawerUtils.getAnimationOptions("collapse",e)).then(t);{const r=this.getDrawerRef(e).current;return n.slideOut(this.getRefToAnimate(e).current,h.DrawerUtils.getAnimationOptions(h.DrawerConstants.stringSlideOut,e)).then(()=>{h.DrawerUtils.unwrapDrawerClippingArea(r)}).then(t)}}edgeToStateOpenedName(e){return`${e}${h.DrawerUtils.capitalizeFirstChar(h.DrawerConstants.stringOpened)}`}edgeToPrevStateOpenedName(e){return`${e}${h.DrawerUtils.capitalizeFirstChar(h.DrawerConstants.stringOpened)}${h.DrawerConstants.stringPrevState}`}edgeToShouldChangeDisplayMode(e){return`${e}${h.DrawerConstants.stringShouldChangeDisplayMode}`}edgeToClosedWithEsc(e){return`${e}${h.DrawerConstants.stringClosedWithEsc}`}edgeToDisplayName(e){return`${e}${h.DrawerConstants.stringDisplay}`}edgeToStateToChangeTo(e){return`${e}${h.DrawerConstants.stringStateToChangeTo}`}openOrClosePopupDrawer(e,t){const r=a(this.getDrawerRef(e).current),s=d.PopupService.getInstance(),n=this.getPopupServiceOptions(e,t);!1===this.isDrawerOpened(e)||this.shouldDrawerChangeDisplayMode(e)||this.getStateToChangeTo(e)?d.ZOrderUtils.getStatus(r)===d.ZOrderUtils.STATUS.OPEN&&s.close(n):this.isDrawerOpened(e)&&[d.ZOrderUtils.STATUS.CLOSE,d.ZOrderUtils.STATUS.UNKNOWN].indexOf(d.ZOrderUtils.getStatus(r)>-1)&&(this.removeHiddenStyle(e),s.open(n))}shouldDrawerChangeDisplayMode(e){return this.state[this.edgeToShouldChangeDisplayMode(e)]}getStateToChangeTo(e){return this.state[this.edgeToStateToChangeTo(e)]}getPopupServiceOptions(e,t){const r=a(this.getDrawerRef(e).current),s={},n=d.PopupService.OPTION;s[n.POPUP]=r,s[n.LAUNCHER]=a(document.activeElement),s[n.LAYER_SELECTORS]=h.DrawerConstants.DrawerLayoutStyleSurrogate,s[n.LAYER_LEVEL]=d.PopupService.LAYER_LEVEL.TOP_LEVEL,s[n.POSITION]=this.getDrawerPosition(e),s[n.CUSTOM_ELEMENT]=!0;const i=d.PopupService.EVENT;return s[n.EVENTS]={[i.POPUP_BEFORE_OPEN]:()=>this.beforeOpenHandler(e,t),[i.POPUP_AFTER_OPEN]:()=>this.afterOpenHandler(e,t),[i.POPUP_BEFORE_CLOSE]:()=>this.beforeCloseHandler(e),[i.POPUP_AFTER_CLOSE]:()=>this.afterCloseHandler(e,t),[i.POPUP_REFRESH]:()=>this.refreshHandler(e),[i.POPUP_REMOVE]:()=>this.destroyHandler(e)},s}beforeOpenHandler(e,t){h.DrawerUtils.disableBodyOverflow(),t[this.edgeToShouldChangeDisplayMode(e)]||(this.drawerOpener=document.activeElement);const r=this.getDrawerRef(e).current,s=a(r),n=this.getDrawerPosition(e);return e===h.DrawerConstants.stringBottom&&this.setBottomOverlayDrawerWidth(),s.show(),s.position(n),this.setStartEndOverlayDrawersHeight(),h.DrawerUtils.wrapDrawerWithClippingArea(r,n),null===this.drawerLayoutResizeHandler&&(this.drawerLayoutResizeHandler=this.drawerLayoutResizeCallback.bind(this)),i.addResizeListener(this.rootRef.current,this.drawerLayoutResizeHandler,50,!0),this.animateOpen(e)}setBottomOverlayDrawerWidth(){if(this.isDrawerOpened(h.DrawerConstants.stringBottom)&&this.getDrawerResolvedDisplayMode(h.DrawerConstants.stringBottom)!=h.DrawerConstants.stringReflow){const e=this.middleSectionRef.current.getBoundingClientRect().width;this.bottomRef.current.style.width=`${e}px`}}afterOpenHandler(e,t){h.DrawerUtils.enableBodyOverflow(),this.handleFocus(t);const r=this.getDrawerRef(e).current,s=a(r),n=d.ZOrderUtils.getStatus(s);if(e===h.DrawerConstants.stringStart&&null===this.startOverlayDrawerResizeHandler?(this.startOverlayDrawerResizeHandler=this.overlayDrawerResizeCallback.bind(this,h.DrawerConstants.stringStart),i.addResizeListener(r,this.startOverlayDrawerResizeHandler,50,!0)):e===h.DrawerConstants.stringEnd&&null===this.endOverlayDrawerResizeHandler?(this.endOverlayDrawerResizeHandler=this.overlayDrawerResizeCallback.bind(this,h.DrawerConstants.stringEnd),i.addResizeListener(r,this.endOverlayDrawerResizeHandler,50,!0)):e===h.DrawerConstants.stringBottom&&null===this.bottomOverlayDrawerResizeHandler&&(this.bottomOverlayDrawerResizeHandler=this.overlayDrawerResizeCallback.bind(this,h.DrawerConstants.stringBottom),i.addResizeListener(r,this.bottomOverlayDrawerResizeHandler,50,!0)),n===d.ZOrderUtils.STATUS.OPEN&&!this.isDrawerOpened(e)){const r=d.PopupService.getInstance(),s=this.getPopupServiceOptions(e,t);r.close(s)}}handleFocus(e){this.state.startOpened&&e.startOpened!==this.state.startOpened&&this.setDrawerFocus(h.DrawerConstants.stringStart),this.state.endOpened&&e.endOpened!==this.state.endOpened&&this.setDrawerFocus(h.DrawerConstants.stringEnd),this.state.bottomOpened&&e.bottomOpened!==this.state.bottomOpened&&this.setDrawerFocus(h.DrawerConstants.stringBottom)}beforeCloseHandler(e){return h.DrawerUtils.disableBodyOverflow(),this.elementWithFocusBeforeDrawerCloses=document.activeElement,e===h.DrawerConstants.stringStart?(i.removeResizeListener(this.getDrawerRef(e).current,this.startOverlayDrawerResizeHandler),this.startOverlayDrawerResizeHandler=null):e===h.DrawerConstants.stringEnd?(i.removeResizeListener(this.getDrawerRef(e).current,this.endOverlayDrawerResizeHandler),this.endOverlayDrawerResizeHandler=null):e===h.DrawerConstants.stringBottom&&(i.removeResizeListener(this.getDrawerRef(e).current,this.bottomOverlayDrawerResizeHandler),this.bottomOverlayDrawerResizeHandler=null),this.removeDrawerLayoutResizeListener(),h.DrawerUtils.wrapDrawerWithClippingArea(this.getDrawerRef(e).current,this.getDrawerPosition(e)),this.animateClose(e)}afterCloseHandler(e,t){this[this.edgeToClosedWithEsc(e)]&&(this[this.edgeToClosedWithEsc(e)]=!1),h.DrawerUtils.enableBodyOverflow(),this.returnFocus(e);const r=a(this.getDrawerRef(e).current),s=d.ZOrderUtils.getStatus(r);if(this.getDrawerRef(e).current&&this.getDrawerRef(e).current.removeAttribute("style"),this.getStateToChangeTo(e)){const t={},r={};r[this.edgeToStateToChangeTo(e)]=null,Object.assign(t,this.getStateToChangeTo(e),r),this.setState(t)}else if(this.shouldDrawerChangeDisplayMode(e)){const t={};t[this.edgeToShouldChangeDisplayMode(e)]=!1,t.viewportResolvedDisplayMode=this.getViewportResolvedDisplayMode(),t.viewportResolvedDisplayModeVertical=this.getViewportResolvedDisplayModeVertical(),this.setState(t)}else if(s===d.ZOrderUtils.STATUS.CLOSE&&this.isDrawerOpened(e)){const r=d.PopupService.getInstance(),s=this.getPopupServiceOptions(e,t);r.open(s)}else this.wasDrawerOpenedInPrevState(e)||(this.addHiddenStyle(e),this.forceUpdate());this.props.onOjClose?.({edge:e})}setStartEndOverlayDrawersHeight(){const e=h.DrawerUtils.getElementHeight(this.middleSectionRef.current)+"px",t=this.startRef.current;t&&this.getDrawerResolvedDisplayMode(h.DrawerConstants.stringStart)!=h.DrawerConstants.stringReflow&&(t.style.height=e);const r=this.endRef.current;r&&this.getDrawerResolvedDisplayMode(h.DrawerConstants.stringEnd)!=h.DrawerConstants.stringReflow&&(r.style.height=e)}},e.DrawerLayout.defaultProps={startOpened:!1,endOpened:!1,bottomOpened:!1,startDisplay:"auto",endDisplay:"auto",bottomDisplay:"auto"},e.DrawerLayout._metadata={slots:{"":{},start:{},end:{},bottom:{}},properties:{startOpened:{type:"boolean",writeback:!0},endOpened:{type:"boolean",writeback:!0},bottomOpened:{type:"boolean",writeback:!0},startDisplay:{type:"string",enumValues:["auto","overlay","reflow"]},endDisplay:{type:"string",enumValues:["auto","overlay","reflow"]},bottomDisplay:{type:"string",enumValues:["auto","overlay","reflow"]}},events:{ojBeforeClose:{cancelable:!0},ojClose:{}},extension:{_WRITEBACK_PROPS:["startOpened","endOpened","bottomOpened"],_READ_ONLY_PROPS:[]}},e.DrawerLayout=D=p([r.customElement("oj-drawer-layout")],e.DrawerLayout),Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdrawerlayout.js.map