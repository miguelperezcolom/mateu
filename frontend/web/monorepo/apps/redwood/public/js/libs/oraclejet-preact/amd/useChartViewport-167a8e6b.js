define(['exports', './eventsUtils-5fb81c3e', './accUtils-acd70e81', 'preact/hooks', './usePinch-fc8ed928', './mergeProps-bcfa6a92'], (function(t,e,n,i,o,x){"use strict";function r(t,e,n,i,o,x,r,M,s,y,c,p,v,w,f,l,u){const{viewportMin:h,viewportMax:d}=t,{min:g,max:m}=e,{viewportMin:E,viewportMax:P}=n,{min:Y,max:D}=o,{viewportMin:X,viewportMax:A}=i,{min:S,max:b}=x,j=function(t,e,n,i,o,x,r,a){const M={};a?(M.xMin=n,M.xMax=i,M.yMin=r?e:t,M.yMax=r?t:e,M.y2Min=r?t:e,M.y2Max=r?e:t):(M.xMin=r?e:t,M.xMax=r?t:e,M.yMin=i,M.yMax=n,M.y2Min=x,M.y2Max=o);return M}(y,c,p,v,w,f,l,u);return{xExtents:a(h,d,g,m,r,j.xMin,j.xMax),yExtents:a(E,P,Y,D,M,j.yMin,j.yMax),y2Extents:a(X,A,S,b,s,j.y2Min,j.y2Max)}}function a(t,e,n,i,o,x,r){const a=o.invert(x)-o.invert(0),M=o.invert(r)-o.invert(0);let s=1;return x!=r&&e+M-(t+a)<1&&(s=(e-t-1)/(a-M)),(e+=M*s)-(t+=a*s)>=i-n?(t=n,e=i):t<n?(e+=n-t,t=n):e>i&&(t-=e-i,e=i),{viewportMin:t,viewportMax:e}}function M(t,e,n,i,o,x,r){const a=r?n.width-t:t-n.x,M=e-n.y,s=i.viewportMax-i.viewportMin,y=(x?M:a)*((o.max-o.min)/(x?n.height:n.width));let c=y-s/2,p=y+s/2;return c<o.min&&(c=o.min,p=c+s),p>o.max&&(c=o.max-s,p=o.max),{xMin:c,xMax:p}}t.useChartViewport=function({plotAreaSpace:t,yScale:n,y2Scale:a,xScale:s,onViewportChange:y,isHoriz:c,zoomAndScroll:p,isRtl:v,rootRef:w,xAxisInfo:f,yAxisInfo:l,y2AxisInfo:u}){const h=i.useRef(!1),d=(e,i)=>{const o=e*(i.x-t.x),x=-e*(t.x+t.width-i.x),M=e*(i.y-t.y),p=-e*(t.y+t.height-i.y),w=e*(i.y-t.y),h=-e*(t.y+t.height-i.y),d=r(f,f,l,u,l,u,s,n,a,o,x,M,p,w,h,v,c);y?.({xMin:d.xExtents.viewportMin,yMin:d.yExtents.viewportMin,xMax:d.xExtents.viewportMax,yMax:d.yExtents.viewportMax,y2Min:d.y2Extents.viewportMax,y2Max:d.y2Extents.viewportMax})},g=o.usePinch({captureTargetRef:w,onPinchZoomChange:({delta:t,origin:e})=>{d(-1*(c?1:-1)*t*.05,e)}});return g.onPointerOut=void 0,y&&"live"===p?x.mergeProps({onWheel:t=>{const e=(c?1:-1)*t.deltaY*.05;d(e,{x:t.offsetX,y:t.offsetY}),t.preventDefault()},onKeyDown:e=>{const i=e.key,o="+"===i||"="===i,x="-"===i||"_"===i,M="PageUp"===i;if(!(o||x||M||"PageDown"===i))return;const p=(1/(o?1.5:1/1.5)-1)/2;let w,h=0,d=0,g=0,m=0;o||x?(h=-1*p*t.width,d=p*t.width,g=-1*p*t.height,m=p*t.height):(w=function(t,e,n,i,o){const x=i?(e?-1:1)*n:0;return{deltaX:(i?0:(e?-1:1)*n)*t.width*(o?-1:1),deltaY:x*t.height}}(t,M,.25,c,v),w&&(h=w.deltaX,d=w.deltaX,g=w.deltaY,m=w.deltaY));const E=r(f,f,l,u,l,u,s,n,a,h,d,g,m,g,m,v,c);y?.({xMin:E.xExtents.viewportMin,yMin:E.yExtents.viewportMin,xMax:E.xExtents.viewportMax,yMax:E.yExtents.viewportMax,y2Min:E.y2Extents.viewportMax,y2Max:E.y2Extents.viewportMax})},onPointerMove:n=>{if(!h.current)return;const i=e.getElementData(w,n.target);if(i&&"scrollBar"===i.ojPrivateObject){const{xMin:e,xMax:i}=M(n.offsetX,n.offsetY,t,f,f,c,v);y?.({xMin:e,yMin:l.viewportMin,xMax:i,yMax:l.viewportMax})}},onPointerDown:n=>{h.current=!0;const i=e.getElementData(w,n.target);if(i&&"scrollBar"===i.ojPrivateObject){n.target.setPointerCapture(n.pointerId);const{xMin:e,xMax:i}=M(n.offsetX,n.offsetY,t,f,f,c,v);y?.({xMin:e,yMin:l.viewportMin,xMax:i,yMax:l.viewportMax})}},onPointerUp:()=>{h.current=!1}},g):{}}}));
//# sourceMappingURL=useChartViewport-167a8e6b.js.map
