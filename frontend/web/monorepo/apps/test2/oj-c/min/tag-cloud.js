define("oj-c/tag-cloud-item/tag-cloud-item",["require","exports","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloudItem=e.TagCloudItemDefaults=void 0,e.TagCloudItemDefaults={categories:[]},e.TagCloudItem=(0,a.registerCustomElement)("oj-c-tag-cloud-item",(({categories:t=e.TagCloudItemDefaults.categories,...a})=>null),"TagCloudItem",{properties:{categories:{type:"Array<string>"},color:{type:"string"},label:{type:"string"},value:{type:"number|null"},url:{type:"string"},shortDesc:{type:"string"}}},{categories:[]},{"@oracle/oraclejet-preact":t.default})})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/tag-cloud/utils",["require","exports","../tag-cloud-item/tag-cloud-item"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformItem=function(e){const a={...t.TagCloudItemDefaults,...e};return{color:a.color,accessibleLabel:a.shortDesc,value:a.value,label:a.label,id:null!=a.key?a?.key:a.id,role:a.url?"link":void 0}},e.executeLink=function(e){const t=window.open(e,"_blank");t&&t.focus()}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useVizCategories/useVizCategories",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useCategories"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVizCategories=function(e,a,n,o,i="any",s="all",r,u){const{ids:c,updateCategories:l}=(0,t.useCategories)({items:e,getCategoriesFromItem:a,initialCategories:n,matchCriteria:i,replace:!1,onCategoriesChange:r}),{ids:d,updateCategories:p}=(0,t.useCategories)({items:e,getCategoriesFromItem:a,initialCategories:o,matchCriteria:s,replace:!0,onCategoriesChange:u});return{hiddenIds:c,updateHidden:l,highlightedIds:d,updateHighlighted:p}}})),
/**
 * @license
 * Copyright (c) %FIRSTYEAR% %CURRENTYEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,a,n){const o=[...n];return e.forEach(((e,n)=>{const i={data:t[n],key:a[n]?.key,metadata:a[n]};e>=0?o.splice(e,0,i):o.push(i)})),o}async function a(e,t){const a=[],n=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(n.has(e)){const t=n.get(e);a.push({...t,key:e})}return a}function n(e,t){return e.has(t)?e.get(t):-1}function o(e,t){const a=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<a.length&&a.splice(e,1)})),a}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=async function(e,i,s){const{add:r,remove:u,update:c}=e??{},l=new Map;for(const[e,t]of i.entries())l.set(t.key,e);let d=[...i];u&&(d=function(e,t,a){const{indexes:i,keys:s}=e;let r=[...t];i?.length?r=o(i,r):s?.size&&(r=function(e,t,a){const i=[];return e.forEach((e=>{const t=n(a,e);-1!==t&&i.push(t)})),o(i,t)}(s,r,a));return r}(u,d,l));r&&(d=await async function(e,o,i,s){const{addBeforeKeys:r,data:u,indexes:c,keys:l,metadata:d}=e;let p=[...o],m=u||[],h=d||[];if(0===m.length&&l?.size){const e=await a(s,l)??[];m=e.map((e=>e.data)),h=e.map((e=>e.metadata))}0===h.length&&l?.size&&(h=[...l].map((e=>({key:e}))));m.length&&(p=c?.length?t(c,m,h,p):r?.length?function(e,a,o,i){const s=[],r=[];return e.forEach((e=>{s.push(n(i,e)),r.push({key:e})})),t(s,a,r,o)}(r,m,p,i):function(e,a,n){return t(new Array(e.length).fill(-1),e,a,n)}(m,h,p));return p}(r,d,l,s));c&&(d=await async function(e,t,o,i){const{data:s,indexes:r,keys:u,metadata:c}=e;let l=[...t],d=s||[],p=c||[];if(0===d.length&&u?.size){const e=await a(i,u)??[];d=e.map((e=>e.data)),p=e.map((e=>e.metadata))}0===p.length&&u?.size&&(p=[...u].map((e=>({key:e}))));d.length&&(r?.length?l=function(e,t,a,n){const o=[...n];return e.forEach(((e,n)=>{if(o[e]){const i={data:t[n],key:a[n]?.key,metadata:a[n]};o.splice(e,1,i)}})),o}(r,d,p,l):u?.size&&(l=function(e,t,a,o,i){const s=[...o];return e.forEach((e=>{const o=n(i,e),r={data:t[o],key:a[o]?.key,metadata:a[o]};o>=0&&s.splice(o,1,r)})),s}(u,d,p,l,o)));return l}(c,d,l,s));return d}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,a,n){this.handleMutateEvent=async e=>{const{detail:a}=e,n=this.addBusyState("updating data from mutation event"),o=await(0,t.getUpdatedItemsFromMutationDetail)(a,this.currentData,this.dataProvider);n?.(),this.currentData=o,this.callback?.onDataUpdated?.(o)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=a,this.callback=n,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const a of t){const t=a.data.map(((e,t)=>({data:e,key:a.metadata[t].key,metadata:a.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=function({addBusyState:e,data:n}){const[o,i]=(0,t.useState)([]),s=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==n&&(s.current=new a.DataProviderHandler(n,e,{onDataUpdated:i})),()=>{s.current?.destroy(),s.current=void 0})),[n,e]),{data:o}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/utils/UNSAFE_vizUtils/TemplateHandler",["require","exports","preact/compat"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processTemplate=e.processNodeTemplate=void 0;const a=e=>Object.keys(e).reduce(((t,a)=>{if("children"===a)return t;const{prop:n,value:o}=((e,t)=>"__oj_private_do_not_use_value"===e?{prop:"value",value:"symbol"!=typeof t?t:void 0}:"__oj_private_do_not_use_checked"===e?{prop:"checked",value:"symbol"!=typeof t?t:void 0}:{prop:e,value:t})(a,e[a]);return t[(e=>e[0].toLowerCase()!==e[0]?e.toLowerCase().replace(/-./g,(e=>e[1].toUpperCase())):e)(n)]=o,t}),{});e.processNodeTemplate=(e,n,o,i)=>{const s=n(o),r=t.Children.toArray(s).find((e=>{if(e&&e.props)return(e.props?.children?.type||e.type)===i})),u=r?.type===i?r.props:(r?.props?.children).props,c=e.key||e.metadata?.key;return u?{...a(u),key:c,id:c,_itemData:e.data}:{key:c,id:c,_itemData:e.data}};e.processTemplate=(t,a,n,o)=>t.map(((t,i)=>(0,e.processNodeTemplate)(t,a,n(t,i),o)))})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-item-icon",["require","exports","preact/jsx-runtime"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuItemIcon=function(e){return"img"===e.icon.type?(0,t.jsx)("img",{src:e.icon.src}):(0,t.jsx)("span",{class:e.icon.class})}})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-select-items",["require","exports","preact/jsx-runtime","./menu-item-icon","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuSelectItems=function(e){return(0,t.jsx)(t.Fragment,{children:e.items.map((e=>e&&(0,t.jsx)(n.SelectMenuItem,{label:e.label,isDisabled:e.disabled,endIcon:e.endIcon?(0,t.jsx)(a.MenuItemIcon,{icon:e.endIcon}):void 0,value:e.value})))})}})),define("oj-c/utils/PRIVATE_ItemsMenu/items-menu",["require","exports","preact/jsx-runtime","./menu-item-icon","./menu-select-items","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,a,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemsMenu=void 0;e.ItemsMenu=({items:i=[],selection:s={},onSelectionChanged:r,defaultItemsRenderer:u,onOjMenuAction:c,isSplitMenu:l=!1,onOjMenuSelection:d})=>{const p=e=>{const t=s[e];return t&&"string"==typeof t?t:void 0},m=e=>{const t=s[e];return Array.isArray(t)?t:[]};function h(e,t,a){return n=>{a?.({value:n.value,menuSelectionGroupKey:e}),d?.({value:n.value,menuSelectionGroupKey:e}),r?.(((e,t,a)=>{const n={...e};return Array.isArray(a)&&0===a.length?delete n[t]:n[t]=a,n})(t,e,n.value))}}return(0,t.jsx)(t.Fragment,{children:i.map((i=>{if("string"==typeof i){const e=u?.[i]?.();return null!=e?e:(0,t.jsx)(t.Fragment,{})}switch(i.type){case"divider":case"separator":return(0,t.jsx)(o.MenuSeparator,{});case"submenu":return i.items&&i.label&&!l?(0,t.jsx)(o.Submenu,{label:i.label,itemKey:i.key,children:(0,t.jsx)(e.ItemsMenu,{items:i.items,selection:s,onSelectionChanged:r,onOjMenuSelection:d,onOjMenuAction:c,defaultItemsRenderer:u})}):void 0;case"selectsingle":return i.items&&i.key&&!l?(0,t.jsx)(o.SelectSingleMenuGroup,{groupKey:i.key,value:i.selection||p(i.key),onCommit:h(i.key,s,i.onSelection),children:(0,t.jsx)(n.MenuSelectItems,{items:i.items})}):void 0;case"selectmultiple":return i.items&&i.key&&!l?(0,t.jsx)(o.SelectMultipleMenuGroup,{groupKey:i.key,value:i.selection||m(i.key),onCommit:h(i.key,s,i.onSelection),children:(0,t.jsx)(n.MenuSelectItems,{items:i.items})}):void 0;case void 0:case"item":return i.label?(0,t.jsx)(o.MenuItem,{itemKey:i.key,label:i.label,isDisabled:i.disabled,variant:l?void 0:i.variant,startIcon:!l&&i.startIcon&&(0,t.jsx)(a.MenuItemIcon,{icon:i.startIcon}),endIcon:!l&&i.endIcon&&(0,t.jsx)(a.MenuItemIcon,{icon:i.endIcon}),onAction:(g=i.key,y=i.onAction,()=>{y?.(),c?.({key:g})})}):void 0;default:return}var g,y}))})}})),define("oj-c/hooks/PRIVATE_useVisContextMenu/useVisContextMenu",["require","exports","preact/jsx-runtime","preact/hooks","../../utils/PRIVATE_ItemsMenu/items-menu"],(function(require,e,t,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVisContextMenu=function(e,o,i,s,r){const u=(0,a.useCallback)((a=>{let u=r?r(a):a;if(!r&&"item"===a.type){const t=a.data?.id,n=e.get(t);u={...a,itemData:n}}const c=o?.items(u);return(0,t.jsx)(n.ItemsMenu,{items:c,onOjMenuAction:({key:e})=>{i?.({menuItemKey:e,contextMenuContext:u})},onOjMenuSelection:({value:e,menuSelectionGroupKey:t})=>{s?.({value:e,contextMenuContext:u,menuSelectionGroupKey:t})}})}),[o?.items,i,s,e,r]);return{preactContextMenuConfig:(0,a.useMemo)((()=>({itemsRenderer:u,accessibleLabel:o?.accessibleLabel})),[o?.accessibleLabel,u])}}})),define("oj-c/tag-cloud/tag-cloud",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","preact/hooks","preact/compat","@oracle/oraclejet-preact/UNSAFE_TagCloud","@oracle/oraclejet-preact/hooks/UNSAFE_useBusyStateContext","./utils","@oracle/oraclejet-preact/UNSAFE_VisStatusMessage","../hooks/UNSAFE_useVizCategories/useVizCategories","ojs/ojvcomponent","./utils","../hooks/UNSAFE_useDataProvider/useDataProvider","../utils/UNSAFE_vizUtils/TemplateHandler","oj-c/hooks/PRIVATE_useVisContextMenu/useVisContextMenu","css!oj-c/tag-cloud/tag-cloud-styles.css"],(function(require,e,t,a,n,o,i,s,r,u,c,l,d,p,m,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloud=void 0;const g=[],y=[],f=[];const v=(0,l.registerCustomElement)("oj-c-tag-cloud",(function({hiddenCategories:e=f,data:a=null,highlightedCategories:v=g,hoverBehavior:b="none",layout:j="rectangular",selection:C=y,selectionMode:M="none",highlightMatch:_="all",contextMenuConfig:k,onOjContextMenuAction:x,onOjContextMenuSelection:I,...S}){const P=(0,n.useRef)(null),A=(0,n.useContext)(s.BusyStateContext),{data:D}=(0,p.useDataProvider)({data:a||void 0,addBusyState:A.addBusyState}),E="dim"===b,T=(0,n.useCallback)(((e,t)=>({data:e.data,key:e.key,index:t})),[]),O=new Map(D.map((e=>[e.key,e.data]))),V=(0,o.useMemo)((()=>S.itemTemplate?(0,m.processTemplate)(D,S.itemTemplate,T,"oj-c-tag-cloud-item"):D.map((e=>e.data))),[S.itemTemplate,D,T]),[F,w]=(0,o.useMemo)((()=>{const e=new Map,t=V.map((t=>(null==t.id&&null==t.key||e.set(t.id||t.key,t),(0,d.transformItem)(t))));return[e,t]}),[V]),[N,R]=(0,o.useMemo)((()=>{let e=!1;const t=V.map(((t,a)=>(e=e||null!=t.url,{id:w[a].id,categories:t.categories||[]})));return[e,t]}),[w,V]),{hiddenIds:U,highlightedIds:B,updateHighlighted:L}=(0,c.useVizCategories)(R,(e=>e.categories),e,v,"any",_,S.onHiddenCategoriesChanged,S.onHighlightedCategoriesChanged),z=e=>{E&&L(e.id)},q=null!=S.datatip?e=>({content:S.datatip?.({id:e.data.id}),borderColor:void 0}):void 0,{preactContextMenuConfig:H}=(0,h.useVisContextMenu)(O,k,x,I);return(0,t.jsx)(l.Root,{ref:P,children:a&&0!==V.length?(0,t.jsx)(i.TagCloud,{layout:j,datatip:q,highlightedIds:E?B:void 0,accessibleLabel:S["aria-label"],"aria-describedBy":S["aria-describedby"],"aria-labelledBy":S["aria-labelledby"],items:w.filter((e=>!U?.includes(e.id))),selectionMode:M,onSelectionChange:e=>{S.onSelectionChanged?.(e.ids)},onItemAction:N?e=>{const t=F.get(e.id);t?.url&&(0,r.executeLink)(t.url)}:void 0,onItemFocus:z,onItemHover:z,selectedIds:"none"===M?void 0:C,width:"100%",height:"100%",contextMenuConfig:k?H:void 0}):(0,t.jsx)(u.VisNoData,{"aria-label":S["aria-label"],"aria-describedby":S["aria-describedby"],"aria-labelledby":S["aria-labelledby"]})})}),"TagCloud",{properties:{data:{type:"DataProvider|null"},datatip:{type:"function"},hiddenCategories:{type:"Array<string>",writeback:!0},touchResponse:{type:"string",enumValues:["auto","touchStart"]},highlightMatch:{type:"string",enumValues:["all","any"]},highlightedCategories:{type:"Array<string>",writeback:!0},hoverBehavior:{type:"string",enumValues:["none","dim"]},layout:{type:"string",enumValues:["cloud","rectangular"]},selectionMode:{type:"string",enumValues:["none","multiple","single"]},selection:{type:"Array<string|number>",writeback:!0},contextMenuConfig:{type:"object",properties:{accessibleLabel:{type:"string"},items:{type:"function"}}}},slots:{itemTemplate:{data:{}}},events:{ojContextMenuAction:{bubbles:!0},ojContextMenuSelection:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["hiddenCategories","highlightedCategories","selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","aria-describedby","aria-labelledby"]}},{hiddenCategories:[],data:null,highlightedCategories:[],hoverBehavior:"none",layout:"rectangular",selection:[],selectionMode:"none",highlightMatch:"all"},{"@oracle/oraclejet-preact":a.default});e.TagCloud=v})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/tag-cloud",["require","exports","oj-c/tag-cloud/tag-cloud"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloud=void 0,Object.defineProperty(e,"TagCloud",{enumerable:!0,get:function(){return t.TagCloud}})}));
//# sourceMappingURL=tag-cloud.js.map