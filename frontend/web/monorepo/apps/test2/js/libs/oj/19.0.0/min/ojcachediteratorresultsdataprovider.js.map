{"version":3,"names":["define","oj","ojdataprovider","ojeventtarget","Object","prototype","hasOwnProperty","call","CachedIteratorResultsDataProvider","constructor","dataProvider","options","_a","_b","this","CacheAsyncIterable","_parent","dataProviderAsyncIterator","params","cache","CacheAsyncIterator","_clientId","Symbol","_mapClientIdToIteratorInfo","set","asyncIterator","_iteratorOffset","_needLocalRowCount","includeFilteredRowCount","_baseFetchFirstCapability","totalFilteredRowCount","_getIteratorOffset","clientId","get","_getStaleResult","result","value","data","length","CacheAsyncIteratorYieldResult","CacheAsyncIteratorReturnResult","metadata","fetchParameters","done","next","size","signal","wrapWithAbortHandling","resolve","_getResult","getSize","undefined","isDone","getDataList","Promise","_getFinalResult","fetchUntilDone","_checkCachedParamsAndIterate","then","_currentAsyncIterator","_fetchFromCacheAndIterate","_getSharedIteratorState","cachedFetchParams","sortCriteria","asyncIteratorFetchPromise","firstIteratorCachedFetchParams","firstIteratorCachedFetchOffset","fetchOffset","firstIteratorCachedFetchPromise","fetchPromise","_compareCachedFetchParameters","_createCachedFetchParams","addListResult","iteratorOffset","offset","count","fetchUntilOffset","finalResult","slice","resultObj","assign","_VALUE","_DONE","DataCache","Map","_lastFetchParams","_firstIteratorState","createOptimizedKeyMap","initialMap","createOptimizedKeySet","initialSet","handleMutationOffsetUpdate","mutationType","indexes","forEach","index","symbol","bind","addEventListener","_MUTATE","event","processMutations","detail","dispatchEvent","_REFRESH","reset","getCapability","containsKeys","finalResults","Set","neededKeys","cacheResults","getDataByKeys","keys","key","results","add","containsParameters","newParams","attributes","scope","containsKeysResults","fetchByKeys","item","fetchByKeysResults","fetchByOffset","_DEFAULT_SIZE","updatedParams","getDataByOffset","fetchFirst","aborted","_underlyingDPParams","capabilityName","capability","attributeFilter","caching","getTotalSize","filterDef","isEmpty","static","cachedParams","compareValues","filterCriterion","_getFilterDef","filter","property","EventTargetMixin","applyMixin","_registerLegacyNamespaceProp"],"sources":["../debug/ojcachediteratorresultsdataprovider.js"],"mappings":";;;;;;;AAOAA,OAAO,CAAC,kBAAmB,qBAAsB,qBAAsB,SAAUC,EAAIC,EAAgBC,GAAiB,aAElHF,EAAKA,GAAMG,OAAOC,UAAUC,eAAeC,KAAKN,EAAI,WAAaA,EAAY,QAAIA;;;;;;;;;;;;;;;;;;AAmJjF,MAAMO,EACFC,YAAYC,EAAcC,GACtB,IAAIC,EAAIC,EACRC,KAAKJ,aAAeA,EACpBI,KAAKH,QAAUA,EACfG,KAAKC,oBAAsBF,EAAK,MACxBJ,YAAYO,EAASC,EAA2BC,EAAQC,GACpDL,KAAKE,QAAUA,EACfF,KAAKG,0BAA4BA,EACjCH,KAAKI,OAASA,EACdJ,KAAKK,MAAQA,EACbL,KAAKF,GAAM,IACA,IAAIE,KAAKE,QAAQI,mBAAmBN,KAAKE,QAASF,KAAKG,0BAA2BH,KAAKI,OAAQJ,KAAKK,MAAOL,KAAKO,WAE3HP,KAAKO,UAAYC,SACjBR,KAAKE,QAAQO,2BAA2BC,IAAIV,KAAKO,UAAW,EAChE,GAEJT,EAAKU,OAAOG,cACZZ,GACJC,KAAKM,mBAAqB,MACtBX,YAAYO,EAASS,EAAeP,EAAQC,EAAOE,GAC/CP,KAAKE,QAAUA,EACfF,KAAKW,cAAgBA,EACrBX,KAAKI,OAASA,EACdJ,KAAKK,MAAQA,EACbL,KAAKO,UAAYA,EAEjBP,KAAKY,gBAAkB,EAIvBZ,KAAKa,mBAC4C,YAA7CX,EAAQL,SAASiB,yBACuB,YAApCV,GAAQU,yBACqD,UAA7DZ,EAAQa,2BAA2BC,qBAC/C,CACAC,mBAAmBC,GACf,OAAOlB,KAAKE,QAAQO,2BAA2BU,IAAID,EACvD,CAEAE,gBAAgBC,GAEZ,OAAiB,MAAVA,EACDA,EAAOC,MAAMC,MAAMC,OAAS,EACxB,IAAIxB,KAAKE,QAAQuB,8BAA8BJ,EAAOC,OAAQ,GAC9D,IAAItB,KAAKE,QAAQwB,+BAA+BL,EAAOC,OAAQ,GACnE,CACEA,MAAO,CACHC,KAAM,GACNI,SAAU,GACVC,gBAAiB5B,KAAKI,OACtBY,uBAAwB,GAE5Ba,MAAM,EAElB,CACAC,OACI,MAAM1B,EAASJ,KAAKI,QAAU,CAAC,EACzB2B,EAAO3B,EAAO2B,OAAS,EACvBC,EAAS5B,GAAQ4B,OAIvB,OAAO5C,EAAe6C,sBAAsBD,EAH1BE,GACPA,EAAQlC,KAAKmC,WAAW/B,EAAQ2B,EAAM/B,KAAKa,mBAAqBb,KAAKE,QAAQG,MAAM+B,eAAYC,KAE5C,EAClE,CACAF,WAAW/B,EAAQ2B,EAAMf,GAErB,IAAIK,EACJ,IAAc,IAAVU,GACC/B,KAAKa,oBAAkE,IAA5Cb,KAAKiB,mBAAmBjB,KAAKO,WAAmB,CAE5E,GAAIP,KAAKK,MAAMiC,SAIX,OAHAjB,EAASrB,KAAKK,MAAMkC,YAAYnC,EAAQJ,KAAKiB,mBAAmBjB,KAAKO,YAErEP,KAAKE,QAAQO,2BAA2BC,IAAIV,KAAKO,UAAWP,KAAKiB,mBAAmBjB,KAAKO,WAAac,EAAOE,KAAKC,QAC3GgB,QAAQN,QAAQlC,KAAKyC,gBAAgBpB,EAAQL,IAEnD,CACD,MAAM0B,EAAiB,IACZ1C,KAAK2C,6BAA6BvC,GAAS,GAAGwC,KAAMvB,GACnDrB,KAAKW,gBAAkBX,KAAKE,QAAQ2C,sBAC7B7C,KAAKoB,kBAEZC,EAAOQ,KACAW,QAAQN,QAAQlC,KAAKmC,WAAW/B,EAAQ2B,EAAM/B,KAAKE,QAAQG,MAAM+B,YAGjEM,KAInB,OAAOA,GACX,CACJ,CAEI,OAAO1C,KAAK8C,0BAA0B1C,EAAQ2B,EAAMf,EAE5D,CACAyB,gBAAgBpB,EAAQL,GAMpB,OALIhB,KAAKE,QAAQ6C,0BAA0BC,kBAAkBC,cACvD5B,EAAOO,iBAAoBP,EAAOO,gBAAgBqB,eACpD5B,EAAOO,gBAAgBqB,aACnBjD,KAAKE,QAAQ6C,0BAA0BC,kBAAkBC,cAE1D5B,GAAQE,MAAMC,OAAS,EACxB,IAAIxB,KAAKE,QAAQuB,8BAA8BJ,EAAQL,GACvD,IAAIhB,KAAKE,QAAQwB,+BAA+BL,EAAQL,EAClE,CACA2B,6BAA6BvC,EAAQ2B,GACjC,IAAImB,EACAC,EAAiCnD,KAAKE,QAAQ6C,0BAA0BC,kBACxEI,EAAiCpD,KAAKE,QAAQ6C,0BAA0BM,YACxEC,EAAkCtD,KAAKE,QAAQ6C,0BAA0BQ,aAiC7E,OAhCID,GACAtD,KAAKiB,mBAAmBjB,KAAKO,aAAe6C,GAC5C1D,EAAkC8D,8BAA8BpD,EAAQ+C,GACxED,EAA4BI,GAG5BtD,KAAKE,QAAQ6C,0BAA0BC,kBACnCtD,EAAkC+D,yBAAyBrD,GAC/DJ,KAAKE,QAAQ6C,0BAA0BQ,aAAevD,KAAKW,cACtDmB,OACAc,KAAMvB,GAGHrB,KAAKW,gBAAkBX,KAAKE,QAAQ2C,sBAC7B7C,KAAKoB,gBAAgBC,IAKxBA,EAAOC,MAAMM,iBAAiBqB,eAC9BjD,KAAKE,QAAQ6C,0BAA0BC,kBAAkBC,aACrD5B,EAAOC,MAAMM,iBAAiBqB,cAEtCjD,KAAKE,QAAQ6C,0BAA0BM,YACnCrD,KAAKE,QAAQ6C,0BAA0BM,YAAchC,EAAOC,MAAMC,KAAKC,OAC3ExB,KAAKE,QAAQ6C,0BAA0BQ,aAAe,KACtDvD,KAAKK,MAAMqD,cAAcrC,GAEtBA,IAEX6B,EAA4BlD,KAAKE,QAAQ6C,0BAA0BQ,cAEhEL,CACX,CACAJ,0BAA0B1C,EAAQ2B,EAAMf,GACpC,IAAIK,EAASrB,KAAKK,MAAMkC,YAAYnC,EAAQJ,KAAKiB,mBAAmBjB,KAAKO,YACzE,GAAIP,KAAKK,MAAM+B,WAAapC,KAAKiB,mBAAmBjB,KAAKO,WAAawB,GAClE/B,KAAKK,MAAMiC,SAAU,CACrB,IAAIqB,EAAiB3D,KAAKiB,mBAAmBjB,KAAKO,WAAac,EAAOE,KAAKC,OAE3E,OADAxB,KAAKE,QAAQO,2BAA2BC,IAAIV,KAAKO,UAAWoD,GACrDnB,QAAQN,QAAQlC,KAAKyC,gBAAgBpB,EAAQL,GACxD,CACK,CACD,IAAI4C,EAAS,EAETC,EAAQ9B,EAAOV,EAAOE,KAAKC,OAC/B,MAAMsC,EAAmB,IACd9D,KAAK2C,6BAA6BvC,EAAQ2B,GAAMa,KAAMmB,IACzD,GAAI/D,KAAKW,gBAAkBX,KAAKE,QAAQ2C,sBACpC,OAAO7C,KAAKoB,kBAEX,CACD,IAAIG,EAAOwC,EAAYzC,MAAMC,KAAKyC,MAAMJ,EAAQC,GAEhD,GADAA,GAAStC,EAAKC,OACA,IAAVqC,GAAe7D,KAAKK,MAAMiC,SAAU,CACpCjB,EAASrB,KAAKK,MAAMkC,YAAYnC,EAAQJ,KAAKiB,mBAAmBjB,KAAKO,YACrE,IAAIoD,EAAiB3D,KAAKiB,mBAAmBjB,KAAKO,WAAac,EAAOE,KAAKC,OAC3ExB,KAAKE,QAAQO,2BAA2BC,IAAIV,KAAKO,UAAWoD,GAC5D,IAAIM,EAAY3E,OAAO4E,OAAO,CAAC,EAAGH,GAGlC,OAFAE,EAAU3C,MAAMC,KAAOF,EAAOE,KAC9B0C,EAAU3C,MAAMK,SAAWN,EAAOM,SAC3Ba,QAAQN,QAAQlC,KAAKyC,gBAAgBwB,EAAU3C,MAAON,GACjE,CAEI,OAAO8C,GAEf,IAGR,OAAOA,GACX,CACJ,GAEJ9D,KAAKyB,8BAAgC,MACjC9B,YAAY2B,EAAON,GACfhB,KAAKsB,MAAQA,EAETtB,KAAKN,EAAkCyE,aADb9B,IAA1BrB,EACiD1B,OAAO4E,OAAO,CAAElD,yBAAyBM,GAGzCA,EAErDtB,KAAKN,EAAkC0E,QAAS,CACpD,GAEJpE,KAAK0B,+BAAiC,MAClC/B,YAAY2B,EAAON,GACfhB,KAAKsB,MAAQA,EAETtB,KAAKN,EAAkCyE,aADb9B,IAA1BrB,EACiD1B,OAAO4E,OAAO,CAAElD,yBAAyBM,GAGzCA,EAErDtB,KAAKN,EAAkC0E,QAAS,CACpD,GAEJpE,KAAKK,MAAQ,IAAIlB,EAAGkF,UACpBrE,KAAKS,2BAA6B,IAAI6D,IACtCtE,KAAKuE,iBAAmB,KACxBvE,KAAKwE,oBAAsB,KAEvB5E,EAAa6E,wBACbzE,KAAKyE,sBAAyBC,GACnB9E,EAAa6E,sBAAsBC,IAI9C9E,EAAa+E,wBACb3E,KAAK2E,sBAAyBC,GACnBhF,EAAa+E,sBAAsBC,IAGlD5E,KAAK6E,2BAA6B,SAAUC,EAAcC,GACtD,GAAqB,WAAjBD,EAA2B,CAC3B,IAAIjB,EAAQ,EACZkB,EAAQC,QAASC,IACbjF,KAAKS,2BAA2BuE,QAAQ,CAACpB,EAAQsB,KACzCD,EAAQrB,IACR5D,KAAKS,2BAA2BC,IAAIwE,EAAQtB,EAAS,GACrDC,GAAS,EACb,EACF,GAE2B,OAA7B7D,KAAKwE,sBACLxE,KAAKwE,oBAAoBnB,aAAeQ,EAEhD,CACA,GAAqB,QAAjBiB,EAAwB,CACxB,IAAIjB,EAAQ,EACZkB,EAAQC,QAASC,IACbjF,KAAKS,2BAA2BuE,QAAQ,CAACpB,EAAQsB,KACzCD,EAAQrB,IACR5D,KAAKS,2BAA2BC,IAAIwE,EAAQtB,EAAS,GACrDC,GAAS,EACb,EACF,GAE2B,OAA7B7D,KAAKwE,sBACLxE,KAAKwE,oBAAoBnB,aAAeQ,EAEhD,CACJ,EAAEsB,KAAKnF,MAEPJ,EAAawF,iBAAiB1F,EAAkC2F,QAAUC,IAEtEtF,KAAKK,MAAMkF,iBAAiBD,EAAME,OAAQxF,KAAK6E,4BAE/C7E,KAAKyF,cAAcH,EAAM,GAG7B1F,EAAawF,iBAAiB1F,EAAkCgG,SAAWJ,IAEvEtF,KAAKK,MAAMsF,QACX3F,KAAKuE,iBAAmB,KACxBvE,KAAKwE,oBAAsB,KAC3BxE,KAAKyF,cAAcH,EAAM,GAE7BtF,KAAKe,0BAA4BnB,EAAagG,cAAc,aAChE,CACAC,aAAazF,GACT,MAAM0F,EAAe,IAAIC,IACnBC,EAAa,IAAID,IAEjBE,EAAejG,KAAKK,MAAM6F,cAAc9F,GAU9C,GATAA,EAAO+F,KAAKnB,QAASoB,IACJH,EAAaI,QAAQlF,IAAIiF,GAElCN,EAAaQ,IAAIF,GAGjBJ,EAAWM,IAAIF,EACnB,GAEoB,IAApBJ,EAAWjE,KAEX,OAAOS,QAAQN,QAAQ,CAAEqE,mBAAoBnG,EAAQiG,QAASP,IAE7D,CAED,MAAMU,EAAY,CAAEC,WAAYrG,EAAOqG,WAAYN,KAAMH,EAAYU,MAAOtG,EAAOsG,OACnF,OAAO1G,KAAKJ,aAAaiG,aAAaW,GAAW5D,KAAM+D,IACnDA,EAAoBN,QAAQrB,QAASoB,IACjCN,EAAaQ,IAAIF,EAAI,GAElB,CAAEG,mBAAoBnG,EAAQiG,QAASP,IAEtD,CACJ,CACAc,YAAYxG,GACR,MAAM0F,EAAe,IAAIxB,IACnB0B,EAAa,IAAID,IACjB/D,EAAS5B,GAAQ4B,OAgCvB,OAAO5C,EAAe6C,sBAAsBD,EA/B1BE,IAEd,MAAM+D,EAAejG,KAAKK,MAAM6F,cAAc9F,GAU9C,GATAA,EAAO+F,KAAKnB,QAASoB,IACjB,MAAMS,EAAOZ,EAAaI,QAAQlF,IAAIiF,GAClCS,EACAf,EAAapF,IAAI0F,EAAKS,GAGtBb,EAAWM,IAAIF,EACnB,GAEoB,IAApBJ,EAAWjE,KAEX,OAAOG,EAAQ,CAAEN,gBAAiBxB,EAAQiG,QAASP,IAElD,CAED,MAAMU,EAAY,CACdC,WAAYrG,EAAOqG,WACnBN,KAAMH,EACNU,MAAOtG,EAAOsG,OAElB,OAAOxE,EAAQlC,KAAKJ,aAAagH,YAAYJ,GAAW5D,KAAMkE,IAC1DA,EAAmBT,QAAQrB,QAAQ,CAAC6B,EAAMT,KACtCN,EAAapF,IAAI0F,EAAKS,EAAK,GAExB,CAAEjF,gBAAiBxB,EAAQiG,QAASP,KAEnD,IAE0D,EAClE,CACAiB,cAAc3G,GAEV,MAAM2B,EAAO3B,EAAO2B,MAAQrC,EAAkCsH,cACxDhF,EAAS5B,GAAQ4B,OAevB,OAAO5C,EAAe6C,sBAAsBD,EAd1BE,IAGd,GAAIxC,EAAkC8D,8BAA8BpD,EAAQJ,KAAKuE,mBAC7EnE,EAAOwD,OAAS7B,GAAQ/B,KAAKK,MAAM+B,UAAW,CAC9C,IAAI6E,EAAgB,IAAK7G,GACzB6G,EAAclF,KAAOA,EACrB,MAAMsE,EAAUrG,KAAKK,MAAM6G,gBAAgBD,GAC3C,GAAIZ,EACA,OAAOnE,EAAQmE,EAEvB,CACA,OAAOnE,EAAQlC,KAAKJ,aAAamH,cAAc3G,GAAQ,GAEG,EAClE,CACA+G,WAAW/G,GACP,GAAIA,GAAQ4B,QAAQoF,QAAS,CAEzB,MACMzG,EADgBX,KAAKJ,aAAauH,WAAW/G,GACfI,OAAOG,iBAE3C,OADAX,KAAK6C,sBAAwBlC,EACtB,IAAIX,KAAKC,mBAAmBD,KAAMW,EAAe,KAAM,KAClE,CAEA,IAAKX,KAAK+C,4BACLrD,EAAkC8D,8BAA8BpD,EAAQA,GAAUJ,KAAK+C,0BAClF/C,KAAK+C,0BAA0BC,kBAC/BhD,KAAKuE,kBAAmB,CAC9BvE,KAAKK,MAAMsF,QAEX3F,KAAKuE,iBAAmB7E,EAAkC+D,yBAAyBrD,GACnF,IAAIiH,EAAsB,IAAKjH,GACe,YAA1CJ,KAAKH,SAASiB,yBACsB,YAApCV,GAAQU,yBACkD,UAA1Dd,KAAKe,2BAA2BC,wBAChCqG,EAAoBtF,MAAQ,GAEhC,MACMpB,EADgBX,KAAKJ,aAAauH,WAAWE,GACf7G,OAAOG,iBAC3CX,KAAKwE,oBAAsB,CACvBxB,kBAAmBhD,KAAKuE,iBACxBlB,YAAa,EACbE,aAAc,KACd5C,cAAeA,EAEvB,CAEA,OADAX,KAAK6C,sBAAwB7C,KAAK+C,0BAA0BpC,cACrD,IAAIX,KAAKC,mBAAmBD,KAAMA,KAAK+C,0BAA0BpC,cAAeP,EAAQJ,KAAKK,MACxG,CACAuF,cAAc0B,GACV,MAAMC,EAAavH,KAAKJ,aAAagG,cAAc0B,GACnD,MAAuB,oBAAnBA,GAA2D,eAAnBA,EACjC,CAAEE,gBAAiBD,GAAYC,gBAAiBC,QAAS,4BAE7DF,CACX,CACAG,eAEI,OAA6B,MAAzB1H,KAAKuE,mBAA6BvE,KAAKuE,iBAAiBoD,WAAa3H,KAAKK,MAAMiC,SACzEE,QAAQN,QAAQlC,KAAKK,MAAM+B,WAG/BpC,KAAKJ,aAAa8H,cAC7B,CACAE,UAEI,OAA6B,MAAzB5H,KAAKuE,mBAA6BvE,KAAKuE,iBAAiBoD,WAAa3H,KAAKK,MAAMiC,SAChD,IAAzBtC,KAAKK,MAAM+B,UAAkB,MAAQ,KAGzCpC,KAAKJ,aAAagI,SAC7B,CACA7E,0BACI,OAAO/C,KAAKwE,mBAChB,CACAqD,qCAAqCzH,EAAQ0H,GAMzC,OALA1H,EAASA,GAAU,CAAC,IAKA,MAAhB0H,GAAwBA,EAAa9F,QAAQoF,UAAYhH,EAAO4B,QAAQoF,WAIpD,MAAhBU,GACJ3I,EAAGG,OAAOyI,cAAcD,EAAarB,WAAYrG,EAAOqG,YAAc,OACtEtH,EAAGG,OAAOyI,cAAcD,EAAaH,UAAWvH,EAAO4H,gBACjDtI,EAAkCuI,cAAc7H,EAAO4H,iBACvD,OACN7I,EAAGG,OAAOyI,cAAcD,EAAa7E,aAAc7C,EAAO6C,cAAgB,MAClF,CACA4E,gCAAgCzH,GAC5BA,EAASA,GAAU,CAAC,EACpB,MAAM4C,EAAoB,CAAC,EAU3B,OATAA,EAAkBjB,KAAO3B,EAAO2B,KAChCiB,EAAkByD,WAAarG,EAAOqG,WAAanH,OAAO4E,OAAO,CAAC,EAAG9D,EAAOqG,YAAc,KAC1FzD,EAAkB2E,UAAYvH,EAAO4H,gBAC/BtI,EAAkCuI,cAAc7H,EAAO4H,iBACvD,KACNhF,EAAkBC,aAAe7C,EAAO6C,aAClC3D,OAAO4E,OAAO,GAAI9D,EAAO6C,cACzB,KACND,EAAkBhB,OAAS5B,EAAO4B,OAC3BgB,CACX,CACA6E,qBAAqBK,GACjB,IAAKA,EACD,OAAO,KAEX,MAAMP,EAAY,CAAC,EAMnB,OALArI,OAAO6G,KAAK+B,GAAQlD,QAASmD,IACR,WAAbA,IACAR,EAAUQ,GAAYD,EAAOC,GACjC,GAEGR,CACX;;;;;;;AAiBJ,OAfAjI,EAAkCgG,SAAW,UAC7ChG,EAAkC2F,QAAU,SAC5C3F,EAAkCyE,OAAS,QAC3CzE,EAAkC0E,MAAQ,OAC1C1E,EAAkCsH,cAAgB,GAClD3H,EAAc+I,iBAAiBC,WAAW3I,GAC1CP,EAAGmJ,6BAA6B,oCAAqC5I,GAS9DA,CAEX"}