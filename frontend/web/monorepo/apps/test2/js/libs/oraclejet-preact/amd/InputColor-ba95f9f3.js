define(['exports', 'preact/jsx-runtime', 'preact/compat', 'preact/hooks', './swatchData-ef8329c2', './clientHints-6d361eaa', './FormFieldContext-a024b891', './logger-0f873e29', './TabbableModeContext-a9c97640', './useTranslationBundle-27bf6340', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-b485c235', './Flex-4bc3a394', 'css!./MessageBannerStyles.styles.css', 'module', './UNSAFE_MessageBanner/themes/redwood/MessageBannerVariants.css', 'preact', './LayerHost-7d4aa6d3', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', './IconButton-b4b83d00', 'css!./MessageStyles.styles.css', './MessageFormattingUtils-ea0be23e', './TransitionGroup-3b9d81b6', './MessagesContext-602a69a2', 'css!./HiddenAccessibleStyles.styles.css', 'css!./ComponentMessageStyles.styles.css', 'module', './UNSAFE_ComponentMessage/themes/redwood/ComponentMessageVariants.css', './Popup-062b66ff', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './InputGroupContext-372087af', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './UNSAFE_InputColor/themes/InputColorPickerDropdownStyles.css', './Sheet-fdd314ac', './ColorPicker-31f8e75b', './SectionedContent-bae8af88', './ColorSwatch-393ad564', './useDownToggle-80b61b43', './useClearIcon-05225968', './useFocusableTextField-8b755b15', './FormContext-6b0879a0', './useFormContext-b8cbbb21', './useHover-8b8a1496', './useTextField-3ab0a23b', './Label-46fd3625', './keyboardUtils-fb6219eb', './TextFieldInput-eb40adaa', 'css!./ObfuscatedTextFieldInputStyles.styles.css', './ReadonlyTextFieldInput-e5723c48', './StyledTextField-5e554e5b', './TextField-51b63f5f', 'css!./LiveRegionStyles.styles.css', './UNSAFE_TextField/themes/TextFieldStyles.css', 'css!./SkeletonStyles.styles.css', 'css!./TextFieldLoadingStyles.styles.css', 'css!./TextFieldStyles.styles.css', 'module', './UNSAFE_TextField/themes/redwood/TextFieldVariants.css', './CompactUserAssistance-e2f42bce', './mergeProps-bcfa6a92', './ClearIcon-06fd3b05', './useCurrentValueReducer-faded381', './useSelectableTextField-900d2860'], (function(e,s,t,o,a,l,n,r,i,c,d,u,p,b,m,h,y,x,C,S,f,v,F,T,g,A,I,R,w,V,U,k,D,E,j,P,_,B,L,H,M,N,O,z,W,q,G,K,Z,$,J,Q,X,Y,ee,se,te,oe,ae,le,ne,re,ie,ce,de,ue,pe,be,me,he,ye,xe,Ce){"use strict";const Se=({anchorRef:e,assistiveText:t,swatchSize:a,palette:l,helpSourceLink:r,helpSourceText:i,isDisabled:d,isOpen:u,isReadonly:p,label:m,onClose:h,onCommit:y,messages:x,testId:C,userAssistanceDensity:S,value:f})=>{const[v,F]=o.useState(!1),[T,g]=o.useState(u),A=o.useCallback((e=>{F(e.placement.startsWith("top"))}),[]);T!==u&&(g(u),u||F(!1));const I=fe(),{colorPicker_label:R}=c.useTranslationBundle("@oracle/oraclejet-preact"),w=R(),V=s.jsx(W.ColorPicker,{height:I?void 0:"auto",onCommit:y,maxWidth:I?"100%":void 0,width:"100%",swatchSize:a,palette:l,testId:C,value:f}),U=!u||v&&!I||d||p||!(t||r||x&&x.length>0)||"efficient"!==S&&"reflow"!==S?void 0:s.jsx(n.FormFieldContext.Provider,{value:{isFocused:!0},children:s.jsx("div",{class:O.userAssistanceStyles,children:s.jsx(b.InlineUserAssistance,{assistiveText:t,fieldLabel:m,helpSourceLink:r,helpSourceText:i,messages:x,userAssistanceDensity:S})})}),k=C?C+(I?"_sheet":"_dropdown"):void 0,D=s.jsx("div",{class:O.dropdownStyles,children:s.jsx(q.SectionedContent,{paddingBlockEnd:"3.5x",paddingBlockStart:"3.5x",paddingInlineEnd:"3.5x",paddingInlineStart:"3.5x","aria-label":w,footer:U,hasFocusTrap:!0,main:V,role:"dialog",testId:k})});return I?s.jsx(z.Sheet,{isOpen:u,onClose:h,children:s.jsx(q.SectionedContent,{"aria-label":w,footer:U,hasFocusTrap:!0,main:V,role:"dialog",testId:k})}):s.jsx(q.StickyPositioningDropdown,{anchorRef:e,isOpen:u,onClose:h,onPosition:A,sizeOptions:{isMaxWidthAdjusted:!1,isMaxHeightAdjusted:!0},children:D})},fe=()=>"phone"===l.getClientHints().deviceType,ve=(e,s)=>{switch(s.type){case"colorChanged":case"colorSelected":return{...e,colorValue:s.data};case"reset":return{colorValue:s.data};default:return e}},Fe=({onCommit:e,onInput:s,value:t})=>{const[l,n]=o.useState(!1),r=o.useRef(null),i=o.useRef(null),c=o.useRef(!1),d=o.useRef(),u=o.useRef(t),p=o.useRef(t),b=o.useRef(t),m=o.useRef(!1),{state:h,dispatch:y}=(({value:e})=>{const[s,t]=o.useReducer(ve,{colorValue:e});return{state:s,dispatch:t}})({value:t});a.colorsAreDifferent(b.current,t)&&(b.current=t,a.colorsAreDifferent(t,h.colorValue)&&(y({type:"reset",data:t}),p.current=t,u.current=t)),o.useEffect((()=>{a.colorsAreDifferent(h.colorValue,p.current)&&(s({previousValue:p.current,value:h.colorValue}),p.current=h.colorValue),m.current&&a.colorsAreDifferent(h.colorValue,u.current)&&(e?.({previousValue:u.current,value:h.colorValue}),u.current=h.colorValue,m.current=!1)}),[e,s,h.colorValue]);const x=o.useCallback((e=>{y({type:"colorChanged",data:e.value})}),[y]),C=o.useCallback((()=>{a.colorsAreDifferent(u.current,h.colorValue)&&(e?.({value:h.colorValue,previousValue:u.current}),u.current=h.colorValue)}),[e,h.colorValue]),S=o.useCallback((()=>{c.current||n((e=>!e)),c.current=!1}),[]),f=o.useCallback((e=>{"outsideMousedown"===e.reason?(c.current=!0,clearTimeout(d.current),d.current=setTimeout((()=>{c.current=!1}),200)):"dismissed"!==e.reason&&"keyboardDismissed"!==e.reason||r.current?.focus(),n(!1)}),[]),v=o.useCallback((e=>{r.current?.focus(),m.current=!0,y({type:"colorSelected",data:e.value}),n(!1)}),[y]),F=o.useCallback((()=>{n(!0)}),[]),{triggerProps:T}=K.useDownToggle({isOpen:l,onToggle:F});return{colorIconActionHandler:S,colorPickerCommitHandler:v,dropdownCloseHandler:f,containerDropdownProps:T,colorValue:h.colorValue,iconRef:r,isOpen:l,colorCommitHandler:C,colorInputHandler:x,colorRef:i}},Te=t.forwardRef((({"aria-describedby":e,swatchSize:t,palette:l,value:r,isDisabled:i,isReadonly:d,labelEdge:u,labelStartWidth:p,isRequiredShown:m=!1,isRequired:h=!1,placeholder:y,hasClearIcon:x,columnSpan:C,textAlign:S,autoComplete:f,messages:v,assistiveText:F,helpSourceLink:T,helpSourceText:g,label:A,onCommit:I,onInput:R,testId:w,variant:V,userAssistanceDensity:U},k)=>{const{colorIconActionHandler:D,colorPickerCommitHandler:E,dropdownCloseHandler:j,colorValue:P,containerDropdownProps:_,iconRef:B,isOpen:L,colorCommitHandler:H,colorInputHandler:M,colorRef:N}=Fe({onCommit:I,onInput:R,value:r}),O=o.useRef(null),{inputColor_selectColor:z}=c.useTranslationBundle("@oracle/oraclejet-preact"),W=z(),{onKeyDown:q,...K}=_,{currentCommitValue:J,dispatch:se}=xe.useCurrentValueReducer({value:P}),oe=o.useCallback((e=>{se({type:"input",payload:e.value}),M?.(e)}),[M,se]),re=o.useCallback((e=>{se({type:"commit",payload:e.value}),H?.(e)}),[H,se]),{isDisabled:ie,isReadonly:ce,labelEdge:de,labelStartWidth:ue,textAlign:pe,userAssistanceDensity:be}=Q.useFormContext(),fe=i??ie,ve=d??ce,Te=u??de,Ae=p??ue,Ie=S??pe,Re=U??be,we=o.useRef(null),{focusProps:Ve,isFocused:Ue,methods:ke}=$.useFocusableTextField({isDisabled:fe,isReadonly:ve,enabledElementRef:N,readonlyElementRef:we}),{methods:De}=Ce.useSelectableTextField(N);o.useImperativeHandle(k,(()=>he.mergeProps(ke,De)),[ke,De]);const{hoverProps:Ee,isHover:je}=X.useHover({isDisabled:ve||fe||!1}),{formFieldContext:Pe,inputProps:_e,labelProps:Be,textFieldProps:Le,userAssistanceProps:He}=Y.useTextField({ariaDescribedBy:e,helpSourceLink:T,helpSourceText:g,isDisabled:fe,isFocused:Ue||L,isReadonly:ve,isRequiredShown:m,labelEdge:Te,messages:v,styleVariant:V,userAssistanceDensity:Re,value:P}),Me=o.useCallback((()=>{N.current?.focus(),oe?.({previousValue:P,value:void 0})}),[oe,P,N]),Ne=Z.useClearIcon({clearIcon:s.jsx(ye.ClearIcon,{onClick:Me,testId:`${w}_clearicon`}),display:x,hasValue:Pe.hasValue,isFocused:Ue,isEnabled:!ve&&!fe,isHover:je}),Oe=void 0!==A&&"inside"===Te,ze="none"!==Te?s.jsx(ee.Label,{...Be,children:A}):void 0,We={label:"none"!==Te?ze:void 0,labelEdge:"none"!==Te?Te:void 0,labelStartWidth:"none"!==Te?Ae:void 0},qe="none"===Te?A:void 0,Ge="efficient"===Re||"reflow"===Re?fe||ve?"efficient"!==Re?void 0:s.jsx(b.InlineUserAssistance,{userAssistanceDensity:Re,...He}):s.jsx(b.InlineUserAssistance,{assistiveText:F,fieldLabel:A,helpSourceLink:T,helpSourceText:g,messages:v,isRequiredShown:m,userAssistanceDensity:Re,...He}):void 0,Ke=o.useRef(null),Ze=O??Ke,$e="compact"===Re?s.jsx(me.CompactUserAssistance,{anchorRef:Ze,messages:v,assistiveText:F,...He}):void 0,Je=ve?s.jsx(ae.ReadonlyTextFieldInput,{"aria-describedby":_e["aria-describedby"],"aria-label":qe,"aria-labelledby":Be.id,as:"div",elementRef:we,textAlign:Ie,value:P,hasEmptyLabel:""===A&&"none"===Te,hasInsideLabel:Oe}):s.jsx(te.TextFieldInput,{"aria-labelledby":Be.id,"aria-label":qe,autoComplete:f,currentCommitValue:J,hasEmptyLabel:""===A&&"none"===Te,hasEndContent:!1,hasInsideLabel:void 0!==ze&&"inside"===Te,hasStartContent:!0,inputRef:N,isRequired:h,placeholder:y,textAlign:Ie,type:ge()?"text":void 0,value:P,onCommit:re,onInput:oe,onKeyDown:q,..._e});return s.jsxs(s.Fragment,{children:[s.jsx(n.FormFieldContext.Provider,{value:Pe,children:ve?s.jsx(le.ReadonlyTextField,{role:"presentation",columnSpan:C,compactUserAssistance:$e,inlineUserAssistance:Ge,onBlur:Ve.onFocusOut,onFocus:Ve.onFocusIn,ref:Ze,mainContent:Je,testId:w,...We}):s.jsx(ne.TextField,{endContent:Ne,columnSpan:C,compactUserAssistance:$e,inlineUserAssistance:Ge,mainContent:Je,onBlur:Ve.onFocusOut,onFocus:Ve.onFocusIn,startContent:s.jsx(G.ColorSwatch,{size:"xs","aria-haspopup":l?"grid":void 0,"aria-label":l?W:void 0,isDisabled:fe,isButton:!0,isTooltipDisabled:L,ref:B,testId:w?w+"_colorIcon":void 0,value:J,onToggle:fe||!l?void 0:D}),mainFieldRef:Ze,hasZeroStartMargin:!0,testId:w,...Le,...We,...Ee,...K})}),L&&!ve&&!fe&&s.jsx(Se,{anchorRef:O,assistiveText:F,helpSourceLink:T,helpSourceText:g,isDisabled:fe,isReadonly:ve,isOpen:L,label:A,onClose:j,onCommit:E,messages:v,testId:w?w+"_colorPicker":void 0,userAssistanceDensity:Re,value:P&&a.isValidColorValue(P)?P:void 0,palette:l,swatchSize:t})]})}));function ge(){const e=l.getClientHints().deviceType;return"phone"===e||"tablet"===e}Te.displayName="InputColor",e.InputColor=Te}));
//# sourceMappingURL=InputColor-ba95f9f3.js.map
