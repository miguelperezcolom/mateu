{"version":3,"file":"MenuButton-35e80b87.js","sources":["../../src/UNSAFE_MenuButton/MenuButton.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ButtonLabelLayout } from '../UNSAFE_ButtonLabelLayout';\nimport { MenuButtonDropdownIcon } from '../PRIVATE_ThemedIcons/MenuButtonDropdownIcon';\nimport { Menu } from '../UNSAFE_Menu';\nimport { useMenuAction, MenuToggleDetail } from '../hooks/UNSAFE_useMenuAction';\nimport { BaseButton } from '../UNSAFE_BaseButton';\n\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport type { DimensionProps } from '../utils/UNSAFE_interpolations/dimensions';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { TestIdProps } from '../hooks/UNSAFE_useTestId';\n\nimport { ComponentChildren, ComponentChild, Fragment, JSX } from 'preact';\nimport { forwardRef, ForwardedRef, ElementRef } from 'preact/compat';\nimport { useRef, useImperativeHandle } from 'preact/hooks';\n\ntype ButtonHandle = ElementRef<typeof BaseButton>;\n\ntype IntrinsicProps = Pick<\n  UnpackSignals<JSX.HTMLAttributes<HTMLElement>>,\n  | 'autofocus'\n  | 'onBlur'\n  | 'onFocus'\n  | 'onMouseEnter'\n  | 'onMouseLeave'\n  | 'onTouchEnd'\n  | 'onTouchStart'\n>;\n\ntype WidthInterpolationProps = Pick<DimensionProps, 'width'>;\n\nexport type Props = IntrinsicProps &\n  WidthInterpolationProps &\n  TestIdProps & {\n    /**\n     * children - One or more MenuItems, dividers, or Menu groups\n     */\n    children?: ComponentChildren;\n\n    /**\n     * The icon shown to the left of the label (or to the right of the\n     * label in right to left mode). Note that this is not the menu\n     * expand icon shown to the right of the label (or to the left of\n     * the label in right to left mode).\n     */\n    icon?: ComponentChild;\n\n    /**\n     * Specifies that the button element should be disabled.\n     */\n    isDisabled?: boolean;\n\n    /**\n     * Specifes the button type\n     */\n    type?: 'button' | 'submit';\n\n    /**\n     * The button label\n     */\n    label?: string;\n\n    /**\n     * Specifies if the menu is open\n     */\n    isMenuOpen?: boolean;\n\n    /**\n     * Property that triggers a callback immediately when toggle happens and value of expanded property should be updated\n     */\n    onToggleMenu?: (details: MenuToggleDetail) => void;\n\n    /**\n     * A suffix to the label that can be rendered differently.  Used to identify\n     * which child MenuItem is invoked.\n     */\n    suffix?: string;\n\n    /**\n     * Indicates in what states the button has chrome (background and border).\n     *     \"ghost\": \"Ghost buttons are the least prominent variant. Ghost buttons are\n     * useful for performing low-priority tasks, such as manipulating the UI.\",\n     *     \"borderless\"': \"Borderless buttons are a more prominent variation. Borderless\n     * buttons are useful for supplemental actions that require minimal emphasis.\",\n     *     \"outlined\"': \"Outlined buttons are salient, but lighter weight than\n     * solid buttons. Outlined buttons are useful for secondary actions.\",\n     *     \"solid\"': \"Solid buttons stand out, and direct the user's attention to the\n     *  most important actions in the UI.\"\n     */\n    variant?: 'ghost' | 'borderless' | 'outlined' | 'solid';\n\n    /**\n     * The size indicates how large the button is rendered: \"sm\", \"md\" (default), \"lg\".\n     */\n    size?: 'xs' | 'sm' | 'md' | 'lg';\n\n    /**\n     * The ID of an element (or space separated IDs of multiple elements) that\n     * describes the button.\n     */\n    'aria-describedby'?: string;\n  };\n\n/**\n * A MenuButton is a combined action and menu button.\n */\nexport const MenuButton = forwardRef(\n  (\n    {\n      children,\n      label,\n      suffix,\n      variant = 'outlined',\n      isDisabled = false,\n      isMenuOpen = false,\n      onToggleMenu,\n      size = 'md',\n      type: buttonType = 'button',\n      width,\n      icon,\n      testId,\n      'aria-describedby': ariaDescribedBy,\n      onBlur,\n      onFocus,\n      onMouseEnter,\n      onMouseLeave,\n      onTouchEnd,\n      onTouchStart\n    }: Props,\n    ref: ForwardedRef<ButtonHandle>\n  ) => {\n    const buttonRef = useRef<ButtonHandle>(null);\n    useImperativeHandle(ref!, () => buttonRef.current!, [buttonRef]);\n\n    const { triggerProps, menuProps } = useMenuAction({\n      isDisabled: isDisabled,\n      onToggleMenu: onToggleMenu,\n      isMenuOpen: isMenuOpen,\n      anchorRef: buttonRef\n    });\n\n    const elementDetails = {\n      type: 'button' as const,\n      buttonType: buttonType\n    };\n\n    const globalEventProps = {\n      onBlur,\n      onFocus,\n      onMouseEnter,\n      onMouseLeave,\n      onTouchEnd,\n      onTouchStart\n    };\n\n    const rootButton = (\n      <BaseButton\n        {...mergeProps(triggerProps, globalEventProps)}\n        styling={isMenuOpen ? ['min', 'active'] : ['min']}\n        elementDetails={elementDetails}\n        isDisabled={isDisabled}\n        variant={variant}\n        width={width}\n        size={size}\n        ref={buttonRef}\n        testId={testId}\n        aria-label={suffix ? `${label} ${suffix}` : label}\n        aria-describedby={ariaDescribedBy}>\n        <ButtonLabelLayout\n          display={'all'}\n          suffix={suffix}\n          startIcon={icon}\n          endIcon={<MenuButtonDropdownIcon />}\n          size={size}>\n          {label}\n        </ButtonLabelLayout>\n      </BaseButton>\n    );\n\n    /*TODO: Remove this hardcoded offsetValue so we have dropdown offset only set on one single place.\n     Could be done via menu props or having a dropdownMenu component. JET-60595*/\n\n    /*TODO: Once menu expose a prop to set min width we would need to calculate offset width of button\n      so we set the correct min width since dropdown menus are 200px but if triggered element width is\n      bigger should be that size. JET-60745 */\n\n    return isDisabled ? (\n      rootButton\n    ) : (\n      <Fragment>\n        {rootButton}\n        <Menu {...menuProps} aria-label={label} offsetValue={4}>\n          {children}\n        </Menu>\n      </Fragment>\n    );\n  }\n);\n\nMenuButton.displayName = 'MenuButton';\n"],"names":["MenuButton","forwardRef","children","label","suffix","variant","isDisabled","isMenuOpen","onToggleMenu","size","type","buttonType","width","icon","testId","ariaDescribedBy","onBlur","onFocus","onMouseEnter","onMouseLeave","onTouchEnd","onTouchStart","ref","buttonRef","useRef","useImperativeHandle","current","triggerProps","menuProps","useMenuAction","anchorRef","elementDetails","globalEventProps","rootButton","_jsx","jsx","BaseButton","mergeProps","styling","ButtonLabelLayout","display","startIcon","endIcon","MenuButtonDropdownIcon","_jsxs","Fragment","Menu","offsetValue","displayName"],"mappings":"k5BAgHO,MAAMA,EAAaC,EAAUA,YAClC,EAEIC,WACAC,QACAC,SACAC,UAAU,WACVC,cAAa,EACbC,cAAa,EACbC,eACAC,OAAO,KACPC,KAAMC,EAAa,SACnBC,QACAC,OACAC,SACA,mBAAoBC,EACpBC,SACAC,UACAC,eACAC,eACAC,aACAC,gBAEFC,KAEA,MAAMC,EAAYC,SAAqB,MACvCC,EAAmBA,oBAACH,GAAM,IAAMC,EAAUG,SAAU,CAACH,IAErD,MAAMI,aAAEA,EAAYC,UAAEA,GAAcC,gBAAc,CAChDvB,WAAYA,EACZE,aAAcA,EACdD,WAAYA,EACZuB,UAAWP,IAGPQ,EAAiB,CACrBrB,KAAM,SACNC,WAAYA,GAGRqB,EAAmB,CACvBhB,SACAC,UACAC,eACAC,eACAC,aACAC,gBAGIY,EACJC,EAAAC,IAACC,EAAUA,WACL,IAAAC,EAAUA,WAACV,EAAcK,GAC7BM,QAAS/B,EAAa,CAAC,MAAO,UAAY,CAAC,OAC3CwB,eAAgBA,EAChBzB,WAAYA,EACZD,QAASA,EACTO,MAAOA,EACPH,KAAMA,EACNa,IAAKC,EACLT,OAAQA,eACIV,EAAS,GAAGD,KAASC,IAAWD,qBAC1BY,EAAeb,SACjCgC,EAAAA,IAACK,EAAAA,kBACC,CAAAC,QAAS,MACTpC,OAAQA,EACRqC,UAAW5B,EACX6B,QAASR,EAAAA,IAACS,EAAAA,eAAsB,CAAA,GAChClC,KAAMA,WACLN,MAYP,OAAOG,EAAU,EAGfsC,EAAAA,KAACC,EAAQA,SACN,CAAA3C,SAAA,CAAA+B,EACDC,EAAAC,IAACW,OAAI,IAAKlB,EAAS,aAAczB,EAAO4C,YAAa,EAClD7C,SAAAA,MAGN,IAILF,EAAWgD,YAAc"}