{"version":3,"file":"usePrefixSuffix-66563417.js","sources":["../../src/hooks/UNSAFE_usePrefixSuffix/usePrefixSuffix.tsx"],"sourcesContent":["import { merge } from '@oracle/oraclejet-internal-utilities/stringUtils';\nimport { useUser } from '../UNSAFE_useUser';\n\ntype Props = {\n  baseId: string;\n  hasEndContent?: boolean;\n  hasInsideLabel?: boolean;\n  hasStartContent?: boolean;\n  hasValue?: boolean;\n  isDisabled?: boolean;\n  isFocused?: boolean;\n  labelId?: string;\n  prefix?: string;\n  suffix?: string;\n  value?: string;\n};\n\ntype PrefixSuffixVariant = 'prefix' | 'suffix';\n\n// returns the prefix and/or suffix components\n// if the condition in which they should be shown is met.\nexport const usePrefixSuffix = ({\n  baseId,\n  hasEndContent,\n  hasInsideLabel,\n  hasStartContent,\n  hasValue,\n  isDisabled,\n  isFocused,\n  labelId,\n  prefix,\n  suffix,\n  value\n}: Props) => {\n  const { direction } = useUser();\n  // for accessibility, if you have a prefix, then you must have a prefixId\n  const prefixId = `${baseId}-prefix`;\n  const suffixId = `${baseId}-suffix`;\n  const hasPrefixText = prefix !== undefined && prefix !== '';\n  const hasSuffixText = suffix !== undefined && suffix !== '';\n  const shouldRenderPrefix = hasPrefixText && !isDisabled && (hasValue || isFocused);\n  const shouldRenderSuffix = hasSuffixText && !isDisabled && (hasValue || isFocused);\n\n  // get value and prefix/suffix if available and return as plain text.\n  const valuePrefixSuffix =\n    hasPrefixText || hasSuffixText ? getText(direction, hasValue, prefix, suffix, value) : value;\n  // get aria-labelledby if there is a prefix or suffix text\n  const ariaLabelledBy =\n    hasPrefixText || hasSuffixText\n      ? merge([labelId, hasPrefixText ? prefixId : undefined, hasSuffixText ? suffixId : undefined])\n      : undefined;\n  const prefixProps = {\n    id: prefixId,\n    hasEndContent,\n    hasInsideLabel,\n    hasStartContent,\n    isDisabled,\n    isFocused,\n    text: prefix ?? '',\n    variant: 'prefix' as PrefixSuffixVariant\n  };\n  const suffixProps = {\n    id: suffixId,\n    hasInsideLabel,\n    isDisabled,\n    isFocused,\n    text: suffix ?? '',\n    variant: 'suffix' as PrefixSuffixVariant\n  };\n\n  return {\n    shouldRenderPrefix,\n    shouldRenderSuffix,\n    prefixProps,\n    suffixProps,\n    valuePrefixSuffix,\n    ariaLabelledBy\n  };\n};\n\n/**\n * Returns the value to render in plain text, taking into account the prefix and suffix\n * and reading direction. Do not add a prefix/suffix if the component doesn't have a value.\n * @returns string | undefined\n */\nfunction getText(\n  direction: 'ltr' | 'rtl',\n  hasValue?: boolean,\n  prefix?: string,\n  suffix?: string,\n  value?: string\n) {\n  // Do not add a prefix/suffix if the component doesn't have a value.\n  if (!hasValue) {\n    return value;\n  }\n  // TODO: direction is 'ltr' even though the storybook is rtl.\n  // Test this when the storybook bug is fixed. ?src=confmacro\n  const isLTR = direction === 'ltr';\n  const plainPrefix = prefix === undefined ? `` : isLTR ? `${prefix} ` : ` ${prefix}`;\n  const plainSuffix = suffix === undefined ? `` : isLTR ? ` ${suffix}` : `${suffix} `;\n\n  const ltrPlainText = `${plainPrefix}${value}${plainSuffix}`;\n  const rtlPlainText = `${plainSuffix}${value}${plainPrefix}`;\n  return isLTR ? ltrPlainText : rtlPlainText;\n}\n"],"names":["baseId","hasEndContent","hasInsideLabel","hasStartContent","hasValue","isDisabled","isFocused","labelId","prefix","suffix","value","direction","useUser","prefixId","suffixId","hasPrefixText","undefined","hasSuffixText","shouldRenderPrefix","shouldRenderSuffix","valuePrefixSuffix","isLTR","plainPrefix","plainSuffix","ltrPlainText","rtlPlainText","getText","prefixProps","id","text","variant","suffixProps","ariaLabelledBy","merge"],"mappings":"iHAqB+B,EAC7BA,SACAC,gBACAC,iBACAC,kBACAC,WACAC,aACAC,YACAC,UACAC,SACAC,SACAC,YAEA,MAAMC,UAAEA,GAAcC,EAAAA,UAEhBC,EAAW,GAAGb,WACdc,EAAW,GAAGd,WACde,OAA2BC,IAAXR,GAAmC,KAAXA,EACxCS,OAA2BD,IAAXP,GAAmC,KAAXA,EACxCS,EAAqBH,IAAkBV,IAAeD,GAAYE,GAClEa,EAAqBF,IAAkBZ,IAAeD,GAAYE,GAGlEc,EACJL,GAAiBE,EAwCrB,SACEN,EACAP,EACAI,EACAC,EACAC,GAGA,IAAKN,EACH,OAAOM,EAIT,MAAMW,EAAsB,QAAdV,EACRW,OAAyBN,IAAXR,EAAuB,GAAKa,EAAQ,GAAGb,KAAY,IAAIA,IACrEe,OAAyBP,IAAXP,EAAuB,GAAKY,EAAQ,IAAIZ,IAAW,GAAGA,KAEpEe,EAAe,GAAGF,IAAcZ,IAAQa,IACxCE,EAAe,GAAGF,IAAcb,IAAQY,IAC9C,OAAOD,EAAQG,EAAeC,CAChC,CA5DqCC,CAAQf,EAAWP,EAAUI,EAAQC,EAAQC,GAASA,EAyBzF,MAAO,CACLQ,qBACAC,qBACAQ,YAtBkB,CAClBC,GAAIf,EACJZ,gBACAC,iBACAC,kBACAE,aACAC,YACAuB,KAAMrB,GAAU,GAChBsB,QAAS,UAeTC,YAbkB,CAClBH,GAAId,EACJZ,iBACAG,aACAC,YACAuB,KAAMpB,GAAU,GAChBqB,QAAS,UAQTV,oBACAY,eA5BAjB,GAAiBE,EACbgB,IAAM,CAAC1B,EAASQ,EAAgBF,OAAWG,EAAWC,EAAgBH,OAAWE,SACjFA,EA2BL"}