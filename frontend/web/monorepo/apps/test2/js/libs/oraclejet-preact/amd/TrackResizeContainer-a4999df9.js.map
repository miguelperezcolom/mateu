{"version":3,"file":"TrackResizeContainer-a4999df9.js","sources":["../../src/UNSAFE_TrackResizeContainer/TrackResizeContainer.tsx"],"sourcesContent":["import type { ComponentChildren, JSX } from 'preact';\nimport { useRef } from 'preact/hooks';\nimport { useSize } from '#hooks/PRIVATE_useSize';\nimport type { UnpackSignals } from '@oracle/oraclejet-internal-utilities/attributeUtils';\nimport { Size, sizeToCSS } from '#utils/UNSAFE_size';\n\ntype Props = {\n  children: (width: number, height: number) => ComponentChildren;\n  width?: Size | 'initial';\n  height?: Size | 'initial';\n} & Pick<UnpackSignals<JSX.IntrinsicElements['div']>, 'class'>;\n\ntype TrackResizeContainerOnProps = Omit<Props, 'width' | 'height'> & {\n  width?: string;\n  height?: string;\n};\n\nconst TrackResizeContainer = ({ children, width: w, height: h, class: className }: Props) => {\n  const width = dimToCSS(w);\n  const height = dimToCSS(h);\n  const content =\n    width && height && isFixedLength(width) && isFixedLength(height) ? (\n      <div style={{ width, height }} class={className}>\n        {children(fixedLengthToNumber(width), fixedLengthToNumber(height))}\n      </div>\n    ) : (\n      <TrackResizeOnContainer width={width} height={height} class={className}>\n        {children}\n      </TrackResizeOnContainer>\n    );\n  return content;\n};\n\nconst TrackResizeOnContainer = ({\n  children,\n  width,\n  height,\n  class: className\n}: TrackResizeContainerOnProps) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const optionsRef = useRef({ box: 'border-box' as const });\n  const size = useSize(ref, optionsRef.current);\n  return (\n    <div ref={ref} style={{ width, height }} class={className}>\n      {size && children(size.width, size.height)}\n    </div>\n  );\n};\n\nconst isFixedLength = (length: string) => length.endsWith('px') || length === '0';\nconst fixedLengthToNumber = (length: string) =>\n  length === '0' ? 0 : Number(length.substring(0, length.length - 2));\n\nconst dimToCSS = (dim: Props['width']) =>\n  dim === 'initial' || dim === undefined ? dim : sizeToCSS(dim) || '0px';\nexport { TrackResizeContainer };\n"],"names":["TrackResizeOnContainer","children","width","height","class","className","ref","useRef","optionsRef","box","size","useSize","current","_jsx","jsx","style","isFixedLength","length","endsWith","fixedLengthToNumber","Number","substring","dimToCSS","dim","undefined","sizeToCSS","w","h"],"mappings":"gIAiBA,MAgBMA,EAAyB,EAC7BC,WACAC,QACAC,SACAC,MAAOC,MAEP,MAAMC,EAAMC,SAAuB,MAC7BC,EAAaD,EAAMA,OAAC,CAAEE,IAAK,eAC3BC,EAAOC,EAAOA,QAACL,EAAKE,EAAWI,SACrC,OACEC,EAAAC,IAAA,MAAA,CAAKR,IAAKA,EAAKS,MAAO,CAAEb,QAAOC,UAAUC,MAAOC,EAASJ,SACtDS,GAAQT,EAASS,EAAKR,MAAOQ,EAAKP,SAErC,EAGEa,EAAiBC,GAAmBA,EAAOC,SAAS,OAAoB,MAAXD,EAC7DE,EAAuBF,GAChB,MAAXA,EAAiB,EAAIG,OAAOH,EAAOI,UAAU,EAAGJ,EAAOA,OAAS,IAE5DK,EAAYC,GACR,YAARA,QAA6BC,IAARD,EAAoBA,EAAME,EAAAA,UAAUF,IAAQ,6BArCtC,EAAGtB,WAAUC,MAAOwB,EAAGvB,OAAQwB,EAAGvB,MAAOC,MACpE,MAAMH,EAAQoB,EAASI,GACjBvB,EAASmB,EAASK,GAWxB,OATEzB,GAASC,GAAUa,EAAcd,IAAUc,EAAcb,GACvDU,EAAAC,IAAA,MAAA,CAAKC,MAAO,CAAEb,QAAOC,UAAUC,MAAOC,WACnCJ,EAASkB,EAAoBjB,GAAQiB,EAAoBhB,MAG5DU,EAACC,IAAAd,EAAuB,CAAAE,MAAOA,EAAOC,OAAQA,EAAQC,MAAOC,EAASJ,SACnEA,GAGO"}