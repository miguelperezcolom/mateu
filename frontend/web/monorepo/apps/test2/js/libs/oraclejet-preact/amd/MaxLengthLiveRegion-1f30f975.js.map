{"version":3,"file":"MaxLengthLiveRegion-1f30f975.js","sources":["../../src/UNSAFE_TextField/MaxLengthLiveRegion.tsx"],"sourcesContent":["import { useDebounce } from '../hooks/UNSAFE_useDebounce';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { LiveRegion } from '../UNSAFE_LiveRegion';\nimport { TestIdProps } from '#hooks/UNSAFE_useTestId';\n\ntype Props = TestIdProps & {\n  isMaxLengthExceeded: boolean;\n  maxLength: number;\n  valueLength?: number;\n};\n\nconst MAX_LENGTH_UPDATE_DELAY = 500;\n\nexport function MaxLengthLiveRegion({\n  isMaxLengthExceeded,\n  maxLength,\n  testId,\n  valueLength = 0\n}: Props) {\n  // Comment copied from InputBase.js in Big JET:\n  // Only update the aria-live div when the user has paused for more than\n  // 500 milliseconds. That way, we avoid queued up aria-live messages which\n  // would be annoying and not helpful. The 500ms was agreed upon in the\n  // accessibility review meeting.\n  const debouncedRemainingChars = useDebounce(maxLength - valueLength, MAX_LENGTH_UPDATE_DELAY);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const maxLengthExceededTranslatedString = translations.formControl_maxLengthExceeded({\n    MAX_LENGTH: `${maxLength}`\n  });\n  const remainingCharsTranslatedString = translations.formControl_maxLengthRemaining({\n    CHARACTER_COUNT: `${debouncedRemainingChars}`\n  });\n\n  return (\n    <>\n      <LiveRegion testId={testId ? testId + '_remainingChars' : undefined}>\n        {remainingCharsTranslatedString}\n      </LiveRegion>\n      {isMaxLengthExceeded && (\n        <LiveRegion testId={testId ? testId + '_exceeded' : undefined} type=\"assertive\">\n          {maxLengthExceededTranslatedString}\n        </LiveRegion>\n      )}\n    </>\n  );\n}\n"],"names":["isMaxLengthExceeded","maxLength","testId","valueLength","debouncedRemainingChars","useDebounce","translations","useTranslationBundle","maxLengthExceededTranslatedString","formControl_maxLengthExceeded","MAX_LENGTH","remainingCharsTranslatedString","formControl_maxLengthRemaining","CHARACTER_COUNT","_jsxs","_jsx","LiveRegion","undefined","type","children"],"mappings":"mLAcgB,UAAoBA,oBAClCA,EAAmBC,UACnBA,EAASC,OACTA,EAAMC,YACNA,EAAc,IAOd,MAAMC,EAA0BC,EAAWA,YAACJ,EAAYE,EAb1B,KAcxBG,EAAeC,uBAAiC,4BAChDC,EAAoCF,EAAaG,8BAA8B,CACnFC,WAAY,GAAGT,MAEXU,EAAiCL,EAAaM,+BAA+B,CACjFC,gBAAiB,GAAGT,MAGtB,OACEU,EAAAA,2BACEC,EAAAA,IAACC,EAAAA,YAAWd,OAAQA,EAASA,EAAS,uBAAoBe,WACvDN,IAEFX,GACCe,MAACC,EAAUA,WAAA,CAACd,OAAQA,EAASA,EAAS,iBAAce,EAAWC,KAAK,YAAWC,SAC5EX,MAKX"}