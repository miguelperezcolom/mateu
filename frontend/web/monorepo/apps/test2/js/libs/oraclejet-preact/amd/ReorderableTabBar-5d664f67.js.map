{"version":3,"file":"ReorderableTabBar-5d664f67.js","sources":["../../src/UNSAFE_ReorderableTabBar/ReorderableTabBarItem.tsx","../../src/UNSAFE_ReorderableTabBar/ReorderableTabBar.tsx"],"sourcesContent":["import { useRef, useCallback } from 'preact/hooks';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { flexitemInterpolations } from '../utils/UNSAFE_interpolations/flexitem';\nimport type { FlexitemProps } from '../utils/UNSAFE_interpolations/flexitem';\nimport { getKey } from '../utils/PRIVATE_collectionUtils';\nimport { useReorderableItem } from '../hooks/PRIVATE_useReorderable';\nimport { ReorderableItemProps } from '../UNSAFE_Collection/Reorderable.types';\nimport { styles } from './themes/ReorderableTabBarItemStyles.css';\nimport { isKeyDefined } from '../utils/UNSAFE_keys';\n\nexport const ITEM_SELECTOR = '[role=\"tab\"]';\n\ntype ReorderableTabBarItem<K extends string | number> = ReorderableItemProps<K> & {\n  layout: 'stretch' | 'condense' | undefined;\n};\n\n/**\n * A private item that will be used by ReorderableTabBar, location TBD (could be moved to PRIVATE_TabBar)\n */\nexport function ReorderableTabBarItem<K extends string | number>({\n  children,\n  dragKey,\n  setDragKey,\n  onReorder,\n  layout,\n  rootRef\n}: ReorderableTabBarItem<K>) {\n  const tabBarItemRef = useRef<HTMLDivElement | null>(null);\n  const getItem = useCallback(\n    () => tabBarItemRef?.current?.querySelector(ITEM_SELECTOR) as HTMLElement,\n    []\n  );\n  const setTransferData = useCallback(\n    (event: DragEvent) => {\n      event.dataTransfer?.setData('text/tabbar-item-key', getKey(getItem()) + '');\n    },\n    [getItem]\n  );\n\n  const { rootProps, isDragged, overlayZoneBeforeProps, overlayZoneAfterProps } =\n    useReorderableItem({\n      isDisabled: onReorder ? false : true,\n      dragKey,\n      setDragKey,\n      onReorder,\n      rootRef,\n      ref: tabBarItemRef,\n      getItem,\n      setTransferData,\n      itemStyles: styles,\n      itemSelector: ITEM_SELECTOR\n    });\n\n  //instead of specifying flex: '1 0 auto' in style\n  const styleInterpolations = mergeInterpolations<FlexitemProps>([\n    ...Object.values(flexitemInterpolations)\n  ]);\n  const flexDimensions = styleInterpolations({\n    flex: layout === 'stretch' ? '1 0 auto' : '0 0 auto'\n  });\n\n  return (\n    <div {...rootProps} draggable={onReorder ? true : false} style={flexDimensions}>\n      {children}\n      {!isDragged && isKeyDefined(dragKey) && (\n        <>\n          <div {...overlayZoneBeforeProps}></div>\n          <div {...overlayZoneAfterProps}></div>\n        </>\n      )}\n    </div>\n  );\n}\n","import { toChildArray, Ref, ContextType } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport { useRef, useState } from 'preact/hooks';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { LiveRegion } from '../UNSAFE_LiveRegion';\nimport { TestIdProps } from '../hooks/UNSAFE_useTestId';\nimport { TabBar, TabBarProps } from '../UNSAFE_TabBar';\nimport { ReorderableTabBarItem, ITEM_SELECTOR } from './ReorderableTabBarItem';\nimport { ReorderableContext, useReorderable } from '../hooks/PRIVATE_useReorderable';\nimport { ReorderProps } from '../UNSAFE_Collection/Reorderable.types';\nimport { TabBarContextMenuConfig } from '../UNSAFE_TabBarCommon';\n\nexport type ReorderableTabBarProps<K extends string | number> = Omit<\n  TabBarProps<K>,\n  'aria-describedby'\n> &\n  ReorderProps<K> &\n  TestIdProps;\n\ntype TabBarReorderContextProps = ContextType<typeof ReorderableContext>;\n/**\n * A component that allows reordering of tabs within a TabBar.\n */\nexport const ReorderableTabBar = forwardRef(\n  <K extends string | number>(\n    {\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledby,\n      children,\n      layout = 'stretch',\n      display = 'standard',\n      size = 'md',\n      edge = 'top',\n      selection,\n      onSelect,\n      onRemove,\n      onReorder,\n      contextMenuConfig,\n      testId\n    }: ReorderableTabBarProps<K>,\n    ref: Ref<HTMLDivElement>\n  ) => {\n    const rootRef = useRef<HTMLDivElement>(null);\n    const [dragKey, setDragKey] = useState<K | undefined>(undefined);\n\n    const displayStackProps = {\n      display: display\n    };\n    const displayNonStackProps = {\n      display: display,\n      size: size\n    };\n    const displayProps = display === 'stacked' ? displayStackProps : displayNonStackProps;\n\n    const {\n      reorderProps,\n      reorderContext,\n      reorderInstructionsId,\n      reorderStatus,\n      reorderInstructions\n    } = useReorderable({\n      onReorder,\n      rootRef,\n      itemSelector: ITEM_SELECTOR\n    });\n\n    const tabBarReorderContext = {\n      currentItemKey: reorderContext.currentItemKey,\n      onReorder: onReorder as TabBarReorderContextProps['onReorder']\n    };\n\n    return (\n      <div ref={rootRef} {...reorderProps}>\n        <ReorderableContext.Provider value={tabBarReorderContext}>\n          <TabBar\n            ref={ref}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledby}\n            layout={layout}\n            edge={edge}\n            selection={selection}\n            onSelect={onSelect}\n            onRemove={onRemove}\n            testId={testId}\n            {...displayProps}\n            aria-describedby={reorderInstructionsId}\n            contextMenuConfig={contextMenuConfig as TabBarContextMenuConfig<string | number>}>\n            {toChildArray(children).map((child) => {\n              return (\n                <ReorderableTabBarItem\n                  dragKey={dragKey}\n                  setDragKey={setDragKey}\n                  onReorder={onReorder}\n                  layout={layout}\n                  rootRef={rootRef}>\n                  {child}\n                </ReorderableTabBarItem>\n              );\n            })}\n          </TabBar>\n        </ReorderableContext.Provider>\n        <span id={reorderInstructionsId}>\n          <HiddenAccessible>{reorderInstructions}</HiddenAccessible>\n        </span>\n        <LiveRegion>{reorderStatus}</LiveRegion>\n      </div>\n    );\n  }\n);\n"],"names":["ITEM_SELECTOR","ReorderableTabBarItem","children","dragKey","setDragKey","onReorder","layout","rootRef","tabBarItemRef","useRef","getItem","useCallback","current","querySelector","setTransferData","event","dataTransfer","setData","getKey","rootProps","isDragged","overlayZoneBeforeProps","overlayZoneAfterProps","useReorderableItem","isDisabled","ref","itemStyles","styles","itemSelector","flexDimensions","mergeInterpolations","Object","values","flexitemInterpolations","styleInterpolations","flex","_jsxs","draggable","style","isKeyDefined","jsxs","_Fragment","Fragment","_jsx","ReorderableTabBar","forwardRef","ariaLabel","ariaLabelledby","display","size","edge","selection","onSelect","onRemove","contextMenuConfig","testId","useState","undefined","displayProps","reorderProps","reorderContext","reorderInstructionsId","reorderStatus","reorderInstructions","useReorderable","tabBarReorderContext","currentItemKey","ReorderableContext","Provider","value","jsx","TabBar","toChildArray","map","child","id","HiddenAccessible","LiveRegion"],"mappings":"6hBAUO,MAAMA,EAAgB,eASb,SAAAC,GAAiDC,SAC/DA,EAAQC,QACRA,EAAOC,WACPA,EAAUC,UACVA,EAASC,OACTA,EAAMC,QACNA,IAEA,MAAMC,EAAgBC,SAA8B,MAC9CC,EAAUC,EAAWA,aACzB,IAAMH,GAAeI,SAASC,cAAcb,IAC5C,IAEIc,EAAkBH,eACrBI,IACCA,EAAMC,cAAcC,QAAQ,uBAAwBC,EAAMA,OAACR,KAAa,GAAG,GAE7E,CAACA,KAGGS,UAAEA,EAASC,UAAEA,EAASC,uBAAEA,EAAsBC,sBAAEA,GACpDC,EAAAA,mBAAmB,CACjBC,YAAYnB,EACZF,UACAC,aACAC,YACAE,UACAkB,IAAKjB,EACLE,UACAI,kBACAY,WAAYC,EAAMA,OAClBC,aAAc5B,IAOZ6B,EAHsBC,EAAAA,oBAAmC,IAC1DC,OAAOC,OAAOC,2BAEIC,CAAoB,CACzCC,KAAiB,YAAX7B,EAAuB,WAAa,aAG5C,OACE8B,EAAAA,KAAS,MAAA,IAAAjB,EAAWkB,YAAWhC,EAA0BiC,MAAOT,EAC7D3B,SAAA,CAAAA,GACCkB,GAAamB,EAAYA,aAACpC,IAC1BiC,EACEI,KAAAC,EAAAC,SAAA,CAAAxC,SAAA,CAAAyC,EAAAA,IAAA,MAAA,IAAStB,IACTsB,gBAASrB,SAKnB,CCjDa,MAAAsB,EAAoBC,EAAUA,YACzC,EAEI,aAAcC,EACd,kBAAmBC,EACnB7C,WACAI,SAAS,UACT0C,UAAU,WACVC,OAAO,KACPC,OAAO,MACPC,YACAC,WACAC,WACAhD,YACAiD,oBACAC,UAEF9B,KAEA,MAAMlB,EAAUE,SAAuB,OAChCN,EAASC,GAAcoD,EAAQA,cAAgBC,GAShDC,EAA2B,YAAZV,EAPK,CACxBA,QAASA,GAEkB,CAC3BA,QAASA,EACTC,KAAMA,IAIFU,aACJA,EAAYC,eACZA,EAAcC,sBACdA,EAAqBC,cACrBA,EAAaC,oBACbA,GACEC,iBAAe,CACjB3D,YACAE,UACAqB,aAAc5B,IAGViE,EAAuB,CAC3BC,eAAgBN,EAAeM,eAC/B7D,UAAWA,GAGb,OACE+B,OAAA,MAAA,CAAKX,IAAKlB,KAAaoD,EACrBzD,SAAA,CAAAyC,MAACwB,EAAAA,mBAAmBC,SAAQ,CAACC,MAAOJ,EAClC/D,SAAAyC,EAAA2B,IAACC,SAAM,CACL9C,IAAKA,EACO,aAAAqB,EACK,kBAAAC,EACjBzC,OAAQA,EACR4C,KAAMA,EACNC,UAAWA,EACXC,SAAUA,EACVC,SAAUA,EACVE,OAAQA,KACJG,EACc,mBAAAG,EAClBP,kBAAmBA,WAClBkB,EAAYA,aAACtE,GAAUuE,KAAKC,GAEzB/B,EAAAA,IAAC1C,EACC,CAAAE,QAASA,EACTC,WAAYA,EACZC,UAAWA,EACXC,OAAQA,EACRC,QAASA,EACRL,SAAAwE,UAMX/B,cAAMgC,GAAId,EAAqB3D,SAC7ByC,EAAAA,IAACiC,EAAgBA,2BAAEb,MAErBpB,MAACkC,EAAAA,qBAAYf,MAEf"}