define(['exports', 'preact/jsx-runtime', 'preact/compat', './DirectionalExpandArrowIcon-21d0b1d5', './useId-c9578d26', './MenuItem-ff1cd14d', './Menu-45a26116', './themeContract.css-2e4b066d', './useScale-5d246769', 'preact/hooks', './DirectionalCollapseArrowIcon-6777ae07'], (function(e,n,t,s,u,o,r,c,a,l,i){"use strict";const m=({label:e,children:l,startIcon:i,itemKey:m})=>{const f=u.useId(),I=u.useId(),y=t.useMemo((()=>`oj-menu-item-${I}`),[I]),{changeKey:x,currentKey:h}=o.useMenuContainerContext(),C=t.useRef(null),S=t.useRef(null),[k,j]=t.useState(!1),[M,A]=t.useState("none"),[g,w]=t.useState(p),E=a.useScale();t.useEffect((()=>{if(E&&c.scaleVars?.size?.units){const e=/\(([^)]+)\)/.exec(c.scaleVars.size.units)?.[1]||"",n=window.getComputedStyle(C.current).getPropertyValue(e);n.endsWith("px")?w(parseFloat(n)):n.endsWith("rem")?w(parseFloat(n)*b()):w(.25*b())}else w(.25*b())}),[E]),t.useEffect((()=>{y!==h&&j(!1)}),[h,y]);const R=t.useCallback((e=>{C.current?.focus(),j(!0),"keyup"===e.type?A("firstItem"):A("none")}),[]),v=t.useRef({recentClose:!1,pendingUnhover:!1});return n.jsxs(n.Fragment,{children:[n.jsx(o.BaseMenuItem,{itemKey:m,startIcon:i,id:y,submenuId:f,ref:C,label:e,endIcon:n.jsx(s.DirectionalExpandArrowIcon,{}),type:"submenu",role:"menuitem",onAction:R,hoverInfo:{hoverProps:{onMouseEnter:e=>{R(e)}},hoverStatus:v},openSubmenu:()=>{j(!0),A("firstItem")},submenuRef:S,isSubmenuOpen:k}),n.jsx(r.DropdownMenu,{isOpen:k,menuLevel:"sub",menuId:f,closeSubmenu:()=>{v.current.recentClose=!0,x({key:h,reason:"keyboard"}),setTimeout((()=>{v.current.recentClose=!1}),d),j(!1),C.current?.focus()},ref:S,anchorRef:C,defaultPlacement:"end-top",currentFocus:M,offsetValue:{mainAxis:-2*g,crossAxis:-(2*g+1)},flipOptions:{crossAxis:!0,mainAxis:!0,fallbackPlacements:["start-top","end-bottom","start-bottom"]},children:l})]})},d=100,p=4,b=()=>parseInt(window.getComputedStyle(document.documentElement).fontSize||"16px",10),f=({label:e,children:c,startIcon:a,itemKey:m})=>{const{isMobile:d}=o.useMenuContext(),p=u.useId(),b=u.useId(),f=u.useId(),I=l.useRef(null),[y,x]=l.useState(!1),[h,C]=l.useState("menu"),{menuContainerRef:S,changeKey:k}=o.useMenuContainerContext(),j=l.useCallback((()=>{g(),C("secondItem")}),[]),M=l.useCallback((e=>{g(),"keyup"===e.type?C("secondItem"):C(d?"secondItemDueToTouch":"menu")}),[]),A=l.useCallback((()=>{k({key:b,reason:"keyboard"}),I.current?.focus()}),[k,b,I]),g=()=>{S.current.style.display="none",x(!0)},w=()=>{x(!1),S.current&&(S.current.style.display="block")};return n.jsxs(n.Fragment,{children:[n.jsx(o.BaseMenuItem,{itemKey:m,startIcon:a,id:b,submenuId:p,ref:I,label:e,endIcon:n.jsx(s.DirectionalExpandArrowIcon,{}),type:"submenu",role:"menuitem",onAction:M,openSubmenu:j,isSubmenuOpen:y}),y?t.createPortal(n.jsxs(r.MenuContainer,{display:"sheet","aria-label":e,menuId:p,closeSubmenu:()=>{w(),A()},menuLevel:"sub",anchorRef:I,currentFocus:h,children:[n.jsx(o.BaseMenuItem,{id:f,menuItemLabelWeight:"bold",role:"menuitem",type:"submenu",startIcon:n.jsx(i.DirectionalCollapseArrowIcon,{}),onAction:e=>{w(),"keyup"===e.type?A():d?(k({key:b,reason:"touch"}),setTimeout((()=>{I.current?.focus()}),0)):(k({key:void 0,reason:"click"}),S.current?.focus())},label:e}),c]}),S.current?.parentElement):null]})};e.Submenu=e=>{const{isMobile:t}=o.useMenuContext();return n.jsx(n.Fragment,{children:t?n.jsx(f,{...e}):n.jsx(m,{...e})})}}));
//# sourceMappingURL=Submenu-d0c548f0.js.map
