{"version":3,"file":"CardFlexView-449e8af5.js","sources":["../../src/UNSAFE_CardFlexView/CardFlexView.tsx"],"sourcesContent":["import { useCallback, useRef, useState } from 'preact/hooks';\nimport { useResizeObserver } from '../hooks/UNSAFE_useResizeObserver';\nimport { BaseCardView, gutterSizeToPX, getColCount } from '../PRIVATE_BaseCardView';\nimport { BaseCardViewPublicProps as Props } from './BaseCardView.types';\n\ntype CardFlexViewProps<K extends string | number, D> = Props<K, D>;\ntype SizeInfo = {\n  cardWidth?: number;\n  cardHeight?: number;\n  containerWidth?: number;\n};\n\nexport function CardFlexView<K extends string | number, D>(props: CardFlexViewProps<K, D>) {\n  const rootRef = useRef<HTMLDivElement>(null);\n\n  const [size, setSize] = useState<SizeInfo>({});\n  const updateCardSize = (cardWidth: number, cardHeight: number) => {\n    setSize((size) => ({ ...size, cardWidth, cardHeight }));\n  };\n\n  const handleResize = useCallback(\n    (entry: ResizeObserverEntry) => {\n      const containerWidth = entry.contentRect.width;\n      if (size.containerWidth !== containerWidth) {\n        setSize((size) => ({ ...size, containerWidth }));\n      }\n    },\n    [size]\n  );\n  useResizeObserver(rootRef, handleResize);\n\n  const gutterSizePX = gutterSizeToPX[props.gutterSize || 'sm'];\n  const columns = getColCount(gutterSizePX, size.cardWidth, size.containerWidth);\n  const cardSize = { width: size.cardWidth, height: size.cardHeight };\n\n  return (\n    <BaseCardView\n      {...props}\n      ref={rootRef}\n      layout=\"flex\"\n      columns={columns}\n      cardSize={cardSize}\n      updateCardSize={updateCardSize}\n    />\n  );\n}\n"],"names":["props","rootRef","useRef","size","setSize","useState","handleResize","useCallback","entry","containerWidth","contentRect","width","useResizeObserver","gutterSizePX","gutterSizeToPX","gutterSize","columns","getColCount","cardWidth","cardSize","height","cardHeight","_jsx","BaseCardView","ref","layout","updateCardSize"],"mappings":"iKAYM,SAAqDA,GACzD,MAAMC,EAAUC,SAAuB,OAEhCC,EAAMC,GAAWC,EAAQA,SAAW,CAAE,GAKvCC,EAAeC,eAClBC,IACC,MAAMC,EAAiBD,EAAME,YAAYC,MACrCR,EAAKM,iBAAmBA,GAC1BL,GAASD,IAAU,IAAKA,EAAMM,oBAC/B,GAEH,CAACN,IAEHS,oBAAkBX,EAASK,GAE3B,MAAMO,EAAeC,EAAcA,eAACd,EAAMe,YAAc,MAClDC,EAAUC,EAAAA,YAAYJ,EAAcV,EAAKe,UAAWf,EAAKM,gBACzDU,EAAW,CAAER,MAAOR,EAAKe,UAAWE,OAAQjB,EAAKkB,YAEvD,OACEC,EAAAA,IAACC,EAAAA,aACK,IAAAvB,EACJwB,IAAKvB,EACLwB,OAAO,OACPT,QAASA,EACTG,SAAUA,EACVO,eA1BmB,CAACR,EAAmBG,KACzCjB,GAASD,QAAeA,EAAMe,YAAWG,gBAAc,GA4B3D"}