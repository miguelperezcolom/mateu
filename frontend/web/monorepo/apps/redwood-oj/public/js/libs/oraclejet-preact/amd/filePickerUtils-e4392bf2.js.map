{"version":3,"file":"filePickerUtils-e4392bf2.js","sources":["../../src/utils/UNSAFE_filePickerUtils/filePickerUtils.ts"],"sourcesContent":["// Contains utility functions intended to be used to pick files\n\nexport type FileOptions = {\n  accept?: Array<string>;\n  capture?: 'user' | 'environment' | 'implementation' | 'none';\n  selectionMode?: 'single' | 'multiple';\n};\n\nexport function pickFiles(\n  callback: (files: FileList) => void,\n  { accept = [], capture = 'none', selectionMode = 'single' }: FileOptions\n) {\n  const input = createInput({ accept, capture, selectionMode }) as any;\n\n  input.addEventListener(\n    'change',\n    () => {\n      // If this is a webdriver test, _pickerTestData will be populated and should use it\n      const files = input._pickerTestData ? input._pickerTestData : input.files;\n      callback(files as FileList);\n    },\n    { once: true }\n  );\n\n  input.click();\n}\n\nconst createInput = (fileOptions: Required<FileOptions>) => {\n  const input = document.createElement('input');\n  input.type = 'file';\n  if (fileOptions?.capture && fileOptions.capture != 'none') {\n    input.capture = fileOptions.capture;\n  }\n  input.accept = fileOptions.accept.join(',');\n  input.multiple = fileOptions.selectionMode === 'multiple';\n  input.style.display = 'none';\n  return input;\n};\n"],"names":["createInput","fileOptions","input","document","createElement","type","capture","accept","join","multiple","selectionMode","style","display","callback","addEventListener","files","_pickerTestData","once","click"],"mappings":"6CA2BA,MAAMA,EAAeC,IACnB,MAAMC,EAAQC,SAASC,cAAc,SAQrC,OAPAF,EAAMG,KAAO,OACTJ,GAAaK,SAAkC,QAAvBL,EAAYK,UACtCJ,EAAMI,QAAUL,EAAYK,SAE9BJ,EAAMK,OAASN,EAAYM,OAAOC,KAAK,KACvCN,EAAMO,SAAyC,aAA9BR,EAAYS,cAC7BR,EAAMS,MAAMC,QAAU,OACfV,CAAK,uBA3BZW,GACAN,OAAEA,EAAS,GAAED,QAAEA,EAAU,OAAMI,cAAEA,EAAgB,WAEjD,MAAMR,EAAQF,EAAY,CAAEO,SAAQD,UAASI,kBAE7CR,EAAMY,iBACJ,UACA,KAEE,MAAMC,EAAQb,EAAMc,gBAAkBd,EAAMc,gBAAkBd,EAAMa,MACpEF,EAASE,EAAkB,GAE7B,CAAEE,MAAM,IAGVf,EAAMgB,OACR"}