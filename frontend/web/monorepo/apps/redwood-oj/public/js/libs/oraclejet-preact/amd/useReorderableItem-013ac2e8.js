define(['exports', 'preact/hooks', './useId-c9578d26', './useUser-988f7da2', './useTranslationBundle-27bf6340', './clientHints-6d361eaa', './collectionUtils-26e6c87c', './classNames-08d99695', './mergeProps-bcfa6a92', './dndUtils-9d9ccdc5', './hooks/PRIVATE_useReorderable/themes/ReorderableItemStyles.css', './keys-4755c121'], (function(e,r,t,s,o,n,a,l,c,i,u,f){"use strict";const d=(e,r,t,s,o)=>{const n=t>0?t-1:0,a=t<s?t+1:s;switch(e){case"ArrowLeft":return r?a:n;case"ArrowRight":return r?n:a;case"ArrowUp":if(o)return t<o?t:t-o;case"ArrowDown":if(o)return t>s-o?t:t+o;default:return}};e.useReorderable=function(e){const{onReorder:l,rootRef:c,itemSelector:i,isDisabled:u,columns:f}=e,y=r.useRef(),{direction:m}=s.useUser(),g="rtl"===m,v=o.useTranslationBundle("@oracle/oraclejet-preact"),b="reorderable_"+t.useId(),{deviceType:D,platform:p}=n.getClientHints(),K="windows"===p?v.accControlKey():v.accCommandKey(),A="phone"===D||"tablet"===D?"":v.accReorderInstructions({keyPressed:K}),[R,w]=r.useState(""),I=r.useCallback((e=>{if((e.metaKey||e.ctrlKey)&&e.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)&&l&&c.current){e.metaKey&&e.preventDefault();const r=[...a.getItemKeysArray(c.current,i)],t=r.length-1,s=r.indexOf(y.current),o=d(e.key,g,s,t,f);if(void 0!==o&&s!==o){const t=r[o]?.toString();r.splice(s,1),r.splice(o,0,y.current),l?.({reorderedKeys:r,itemKeys:[y.current],referenceKey:0===o?null:r[o-1]});const n="ArrowLeft"===e.key||"ArrowUp"===e.key?v.accPositionBefore():v.accPositionAfter(),a=y?.current?.toString();t&&n&&a&&w(v.accAnnounceMovedKey({itemKey:a,position:n,referenceKey:t}))}}}),[y,l,f,g,i,c,v]);return{reorderProps:u?{}:{onKeyDown:I},reorderContext:{currentItemKey:y},reorderInstructionsId:b,reorderInstructions:A,reorderStatus:R}},e.useReorderableItem=function(e){const{isDisabled:t,dragKey:o,setDragKey:n,onReorder:d,ref:y,rootRef:m,itemStyles:g,getItem:v,setTransferData:b,itemSelector:D,isVertical:p}=e,K=v(),A=null!=K?a.getKey(K):void 0,[R,w]=r.useState(),I=r.useRef(),O=r.useRef(void 0),k=l.classNames([u.styles.itemDragger,g.itemDragger]),{direction:h}=s.useUser(),P="rtl"===h,S=r.useCallback((e=>{const r=v(),t=null!=r?a.getKey(r):void 0;if(y?.current&&n){O.current=i.createDragImage(y.current,k);const r=y.current.querySelector("[draggable=true]");null!=r?e?.dataTransfer?.setDragImage(O.current,r.offsetLeft+r.offsetWidth/2,r.offsetTop+r.offsetHeight/2):e?.dataTransfer?.setDragImage(O.current,0,0),b(e),n(t)}}),[v,b,k,y,n]),C=r.useCallback((e=>{f.isKeyDefined(o)&&e.preventDefault()}),[o]),T=r.useCallback((()=>{n?.(void 0),document.body.removeChild(O.current)}),[n]),U=r.useCallback((()=>{if(m?.current){const e=v(),r=null!=e?a.getKey(e):void 0,t=a.getItemKeysArray(m.current,D);let s;const l=[...t],c=l.indexOf(o);if(null!=r){const e=l.indexOf(r);null!=c&&null!=e&&c!=e&&(s=P?c<e?"before"===R?e:e-1:"before"===R?e+1:e:c<e?"before"===R?e-1:e:"before"===R?e:e+1)}if(void 0!==s&&c!==s){const e=t[c];l.splice(c,1),l.splice(s,0,e),d?.({reorderedKeys:l,itemKeys:[o],referenceKey:0===s?null:l[s-1]}),w(void 0),n(void 0)}}}),[o,R,v,P,D,d,m,n]);if(t)return{};const B=null!=A&&A===o,L=l.classNames([u.styles.itemDnd,B&&u.styles.itemDragged]),x=l.classNames([g.itemOverlayFront,p?u.styles.itemOverlayVertical:u.styles.itemOverlay,"before"===R&&u.styles.itemOverlayBefore,"before"===R&&P&&u.styles.itemOverlayBeforeRtl]),N=l.classNames([g.itemOverlayFront,g.itemOverlayRear,p?u.styles.itemOverlayVertical:u.styles.itemOverlay,"after"===R&&u.styles.itemOverlayAfter,"after"===R&&P&&u.styles.itemOverlayAfterRtl]);return{rootProps:c.mergeProps({ref:y,onDragStart:S,onDragEnd:T,onDragOver:C,onDrop:U,isDisabled:t,class:L}),isDragged:B,overlayZoneBeforeProps:c.mergeProps({onDragEnter:()=>{w("before"),I.current="before"},onDragLeave:()=>{"before"===I.current&&w(void 0)},class:x}),overlayZoneAfterProps:c.mergeProps({onDragEnter:()=>{w("after"),I.current="after"},onDragLeave:()=>{"after"===I.current&&w(void 0)},class:N})}}}));
//# sourceMappingURL=useReorderableItem-013ac2e8.js.map
