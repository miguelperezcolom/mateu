{"version":3,"names":["define","oj","$","DataCollectionUtils","Logger","Object","prototype","hasOwnProperty","call","DomScroller","element","dataprovider","options","this","_data","_asyncIterator","asyncIterator","_element","_contentElement","contentElement","_fetchSize","fetchSize","_maxCount","maxCount","_rowCount","initialRowCount","_controller","controller","_successCallback","success","_requestCallback","request","_errorCallback","error","_isOverflowCallback","isOverflow","_beforeFetchCallback","beforeFetch","_beforeScrollCallback","beforeScroll","_localKeyValidator","localKeyValidator","_registerDataSourceEventListeners","_fetchTrigger","fetchTrigger","isNaN","_initialScrollTop","scrollTop","_lastFetchTrigger","_isScrollTriggeredByMouseWheel","_checkViewportCount","_fetchThreshold","elem","getScrollEventElement","_scrollEventListener","_isScrollTrackingPaused","scrollerHeight","clientHeight","maxScrollTop","scrollHeight","_handleExternalScrollerScrollTop","_handleScrollerScrollTop","bind","addEventListener","_wheelEventListener","passive","_mouseDownEventListener","setAsyncIterator","pauseScrollTracking","resumeScrollTracking","setFetchTrigger","destroy","_unregisterDataSourceEventListeners","removeEventListener","checkViewport","forceFetch","offsetHeight","_isEndReached","CHECKVIEWPORT_THRESHOLD","warn","_fetchMoreRows","Promise","resolve","_doFetch","self","isMouseWheel","_fetchPromise","then","result","_nextFetchTrigger","undefined","reason","isAbort","signal","aborted","contentBounds","getBoundingClientRect","scrollerBottom","document","body","documentElement","bottom","height","_lastMaxScrollTop","Math","max","diff","AgentUtils","getAgentInfo","browser","BROWSER","EDGE","remainingCount","next","_result","value","dataLength","data","length","fetchParameters","size","slice","metadata","maxCountLimit","done","_handleDataRowMutateEvent","event","eventDetail","indexes","keys","detail","add","addBeforeKeys","afterKeys","_handleDataRowAddedOrRemoved","remove","callback","i","rowIdx","keyValidator","forEach","key","ev","_dataProviderEventHandlers","push","eventType","eventHandler"],"sources":["../debug/ojdomscroller.js"],"mappings":"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"}