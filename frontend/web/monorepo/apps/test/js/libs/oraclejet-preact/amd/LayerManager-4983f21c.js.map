{"version":3,"file":"LayerManager-4983f21c.js","sources":["../../src/UNSAFE_Layer/LayerManager.tsx"],"sourcesContent":["/**\n * The LayerManager wraps your application and creates two adjacent divs for\n * rendering your application and housing Layers.\n */\nimport { ComponentChildren } from 'preact';\nimport { useCallback, useState } from 'preact/compat';\nimport { LayerContext, LayerContextProps } from './LayerContext';\nimport LayerHost from './LayerHost';\n\ntype LayerManagerProps = {\n  children?: ComponentChildren;\n};\n\nexport function LayerManager({ children }: LayerManagerProps) {\n  const [defaultHost, setDefaultHost] = useState<Element>();\n  //const context = useContext(LayerContext);\n  const defaultHostRef = useCallback((el: Element | null) => {\n    // ref callbacks fire after the component has been unnmounted so we do not\n    // want to set state in this use-case\n    if (el !== null) {\n      setDefaultHost(el);\n    }\n  }, []);\n\n  return (\n    <LayerContext.Consumer>\n      {(value: LayerContextProps) => {\n        let defaultHostContext = {};\n        if (defaultHost) {\n          defaultHostContext = {\n            getRootLayerHost: () => {\n              return defaultHost;\n            },\n            getLayerHost: () => {\n              return defaultHost;\n            }\n          };\n        }\n        const layerContext = value.getLayerHost ? value : defaultHostContext;\n        return (\n          <LayerContext.Provider value={layerContext}>\n            {children}\n            {!value.getLayerHost && <LayerHost ref={defaultHostRef} />}\n          </LayerContext.Provider>\n        );\n      }}\n    </LayerContext.Consumer>\n  );\n}\n"],"names":["children","defaultHost","setDefaultHost","useState","defaultHostRef","useCallback","el","_jsx","LayerContext","Consumer","value","defaultHostContext","getRootLayerHost","getLayerHost","layerContext","_jsxs","Provider","jsx","LayerHost","ref"],"mappings":"8HAagB,UAAaA,SAAEA,IAC7B,MAAOC,EAAaC,GAAkBC,EAAQA,WAExCC,EAAiBC,eAAaC,IAGvB,OAAPA,GACFJ,EAAeI,EAChB,GACA,IAEH,OACEC,EAAAA,IAACC,EAAAA,aAAaC,SACX,CAAAT,SAACU,IACA,IAAIC,EAAqB,CAAA,EACrBV,IACFU,EAAqB,CACnBC,iBAAkB,IACTX,EAETY,aAAc,IACLZ,IAIb,MAAMa,EAAeJ,EAAMG,aAAeH,EAAQC,EAClD,OACEI,EAAAA,KAACP,EAAAA,aAAaQ,SAAS,CAAAN,MAAOI,EAC3Bd,SAAA,CAAAA,GACCU,EAAMG,cAAgBN,EAAAU,IAACC,YAAS,CAACC,IAAKf,MAE1C,GAIV"}