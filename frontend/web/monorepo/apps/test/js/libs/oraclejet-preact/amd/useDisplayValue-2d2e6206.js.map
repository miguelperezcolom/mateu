{"version":3,"file":"useDisplayValue-2d2e6206.js","sources":["../../src/UNSAFE_SelectSingle/SelectSingleField.tsx","../../src/UNSAFE_SelectSingle/SelectSingleFieldInput.tsx","../../src/UNSAFE_SelectSingle/useDisplayValue.ts"],"sourcesContent":["import { DropdownArrow } from '#PRIVATE_SelectCommon';\nimport { IconButton } from '#UNSAFE_IconButton';\nimport { CancelS } from '#UNSAFE_RedwoodIcons/CancelS';\nimport { NavLeft } from '#UNSAFE_RedwoodIcons/NavLeft';\nimport { TextField } from '#UNSAFE_TextField';\nimport { useFormFieldContext } from '#hooks/UNSAFE_useFormFieldContext';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport { ComponentProps } from 'preact';\n\ntype PickedTextFieldProps = Pick<\n  ComponentProps<typeof TextField>,\n  | 'columnSpan'\n  | 'compactUserAssistance'\n  | 'contentVariant'\n  | 'endContent'\n  | 'hasZeroStartMargin'\n  | 'id'\n  | 'inlineUserAssistance'\n  | 'label'\n  | 'labelEdge'\n  | 'labelStartWidth'\n  | 'mainFieldRef'\n  | 'onBlur'\n  | 'onFocus'\n  | 'onKeyDown'\n  | 'onMouseDown'\n  | 'onMouseEnter'\n  | 'onMouseLeave'\n  | 'resize'\n  | 'rootRef'\n  | 'startContent'\n  | 'statusVariant'\n  | 'styleVariant'\n  | 'testId'\n> & {\n  children: ComponentProps<typeof TextField>['mainContent'];\n};\n\ntype Props = PickedTextFieldProps & {\n  hasInsideLabel?: boolean;\n  isBackButtonShown?: boolean;\n  isClearButtonShown?: boolean;\n  isDropdownArrowShown?: boolean;\n  onBackButtonClick?: ComponentProps<typeof IconButton>['onAction'];\n  onClearButtonClick?: ComponentProps<typeof IconButton>['onAction'];\n  onDropdownArrowClick?: ComponentProps<typeof DropdownArrow>['onClick'];\n};\n\nexport function SelectSingleField({\n  children,\n  hasInsideLabel,\n  isBackButtonShown,\n  isClearButtonShown,\n  isDropdownArrowShown,\n  onBackButtonClick,\n  onClearButtonClick,\n  onDropdownArrowClick,\n  ...passThroughTextFieldProps\n}: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const { isDisabled, isLoading } = useFormFieldContext();\n\n  const startContent = isBackButtonShown ? (\n    <IconButton\n      aria-label={translations.selectMultiple_back()}\n      size=\"xs\"\n      variant=\"ghost\"\n      onAction={onBackButtonClick}>\n      <NavLeft />\n    </IconButton>\n  ) : null;\n\n  const endContent = isLoading ? undefined : (\n    <>\n      {isClearButtonShown && (\n        <IconButton\n          aria-label={translations.formControl_clear()}\n          size=\"sm\"\n          variant=\"ghost\"\n          onAction={onClearButtonClick}>\n          <CancelS />\n        </IconButton>\n      )}\n      {isDropdownArrowShown && (\n        <DropdownArrow\n          isDisabled={isDisabled}\n          onClick={onDropdownArrowClick}\n          testId={`${passThroughTextFieldProps.testId}_dropdownarrow`}\n        />\n      )}\n    </>\n  );\n\n  return (\n    <TextField\n      startContent={startContent}\n      mainContent={children}\n      endContent={endContent}\n      {...passThroughTextFieldProps}\n    />\n  );\n}\n","import { LiveRegion } from '#UNSAFE_LiveRegion';\nimport { TextFieldInput } from '#UNSAFE_TextField';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport { ComponentProps, Ref } from 'preact';\n\ntype PickedTextFieldInputProps = Pick<\n  ComponentProps<typeof TextFieldInput>,\n  | 'aria-controls'\n  | 'aria-describedby'\n  | 'aria-expanded'\n  | 'aria-invalid'\n  | 'aria-label'\n  | 'hasEmptyLabel'\n  | 'hasInsideLabel'\n  | 'id'\n  | 'isRequired'\n  | 'onBlur'\n  | 'onFocus'\n  | 'onInput'\n  | 'onKeyDown'\n  | 'onKeyUp'\n  | 'placeholder'\n  | 'textAlign'\n  | 'variant'\n> & {\n  inputRef?: Ref<HTMLInputElement>;\n};\n\ntype Props = PickedTextFieldInputProps & {\n  displayValue: string;\n  isAddToListShown: boolean;\n  isAdvancedSearchShown: boolean;\n  isUserFiltering: boolean;\n  liveRegionText?: string;\n  userInput?: string;\n  virtualKeyboard?: 'auto' | 'email' | 'number' | 'search' | 'tel' | 'text' | 'url';\n};\n\nexport function SelectSingleFieldInput({\n  displayValue,\n  isAddToListShown,\n  isAdvancedSearchShown,\n  isUserFiltering,\n  liveRegionText,\n  userInput,\n  virtualKeyboard,\n  ...passThroughTextFieldInputProps\n}: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const addToListAccText = translations.select_addToListAvailable();\n  const advancedSearchAccText = translations.select_moreSearchOptionsAvailable();\n\n  return (\n    <>\n      <TextFieldInput\n        {...passThroughTextFieldInputProps}\n        hasEndContent={true}\n        aria-autocomplete=\"list\"\n        autoComplete=\"off\"\n        role=\"combobox\"\n        spellcheck={false}\n        type={virtualKeyboard === 'auto' ? 'search' : virtualKeyboard}\n        value={isUserFiltering ? userInput : displayValue}\n      />\n      <LiveRegion>{liveRegionText}</LiveRegion>\n      {isAddToListShown ? <LiveRegion>{addToListAccText}</LiveRegion> : undefined}\n      {isAdvancedSearchShown ? <LiveRegion>{advancedSearchAccText}</LiveRegion> : undefined}\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useMemo } from 'preact/hooks';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { renderItemText } from '../PRIVATE_SelectCommon';\n\nexport function useDisplayValue<K, D>(\n  itemText: ItemTextType<K, D>,\n  valueItem?: Item<K, D>\n): string {\n  // create the text displayed in the field from the selected value\n  const displayValue = useMemo(() => {\n    return valueItem === undefined ? '' : renderItemText(valueItem, itemText) ?? '';\n  }, [valueItem, itemText]);\n\n  return displayValue;\n}\n"],"names":["children","hasInsideLabel","isBackButtonShown","isClearButtonShown","isDropdownArrowShown","onBackButtonClick","onClearButtonClick","onDropdownArrowClick","passThroughTextFieldProps","translations","useTranslationBundle","isDisabled","isLoading","useFormFieldContext","startContent","_jsx","IconButton","selectMultiple_back","size","variant","onAction","NavLeft","endContent","undefined","_jsxs","jsxs","_Fragment","Fragment","formControl_clear","CancelS","SvgCancelS","DropdownArrow","onClick","testId","TextField","mainContent","displayValue","isAddToListShown","isAdvancedSearchShown","isUserFiltering","liveRegionText","userInput","virtualKeyboard","passThroughTextFieldInputProps","addToListAccText","select_addToListAvailable","advancedSearchAccText","select_moreSearchOptionsAvailable","jsx","TextFieldInput","hasEndContent","autoComplete","role","spellcheck","type","value","LiveRegion","itemText","valueItem","useMemo","renderItemText"],"mappings":"+sDAiDM,UAA4BA,SAChCA,EAAQC,eACRA,EAAcC,kBACdA,EAAiBC,mBACjBA,EAAkBC,qBAClBA,EAAoBC,kBACpBA,EAAiBC,mBACjBA,EAAkBC,qBAClBA,KACGC,IAEH,MAAMC,EAAeC,uBAAiC,6BAChDC,WAAEA,EAAUC,UAAEA,GAAcC,EAAmBA,sBAE/CC,EAAeZ,EACnBa,EAAAA,IAACC,EAAUA,WAAA,CAAA,aACGP,EAAaQ,sBACzBC,KAAK,KACLC,QAAQ,QACRC,SAAUf,EACVL,SAAAe,MAACM,EAAAA,WAAO,CAAA,KAER,KAEEC,EAAaV,OAAYW,EAC7BC,EAAAC,KAAAC,EAAAC,SAAA,CAAA3B,SAAA,CACGG,GACCY,MAACC,EAAAA,WACa,CAAA,aAAAP,EAAamB,oBACzBV,KAAK,KACLC,QAAQ,QACRC,SAAUd,EAAkBN,SAC5Be,EAAAA,IAACc,EAAOC,WAAG,MAGd1B,GACCW,MAACgB,EAAAA,cAAa,CACZpB,WAAYA,EACZqB,QAASzB,EACT0B,OAAQ,GAAGzB,EAA0ByB,4BAM7C,OACElB,MAACmB,EAAAA,WACCpB,aAAcA,EACdqB,YAAanC,EACbsB,WAAYA,KACRd,GAGV,2BC/DM,UAAiC4B,aACrCA,EAAYC,iBACZA,EAAgBC,sBAChBA,EAAqBC,gBACrBA,EAAeC,eACfA,EAAcC,UACdA,EAASC,gBACTA,KACGC,IAEH,MAAMlC,EAAeC,uBAAiC,4BAChDkC,EAAmBnC,EAAaoC,4BAChCC,EAAwBrC,EAAasC,oCAE3C,OACEvB,OACEE,EAAAA,SAAA,CAAA1B,SAAA,CAAAe,EAAAiC,IAACC,iBACK,IAAAN,EACJO,eAAe,EAAI,oBACD,OAClBC,aAAa,MACbC,KAAK,WACLC,YAAY,EACZC,KAA0B,SAApBZ,EAA6B,SAAWA,EAC9Ca,MAAOhB,EAAkBE,EAAYL,IAEvCrB,EAACiC,IAAAQ,EAAUA,qBAAEhB,IACZH,EAAmBtB,EAAAiC,IAACQ,EAAUA,WAAE,CAAAxD,SAAA4C,SAAiCrB,EACjEe,EAAwBvB,EAAAiC,IAACQ,EAAUA,WAAE,CAAAxD,SAAA8C,SAAsCvB,IAGlF,oBCzDgB,SACdkC,EACAC,GAOA,OAJqBC,EAAAA,SAAQ,SACNpC,IAAdmC,EAA0B,GAAKE,EAAcA,eAACF,EAAWD,IAAa,IAC5E,CAACC,EAAWD,GAGjB"}