define(['exports', 'preact/jsx-runtime', './TrackResizeContainer-a4999df9', './PRIVATE_ContainerDiagram/themes/DiagramStyles.css', './useResizeObserver-25032462', 'preact/hooks', './accUtils-acd70e81', './classNames-08d99695', './useTranslationBundle-27bf6340', './useUser-988f7da2', './Minus-6ab20a15', './Plus-0108d400', './layoutUtils-641af87a', './useVisHover-28319fef', './mergeProps-bcfa6a92', './useDatatip-36aa820b', './useTextDimensions-f254e8f5', './clientUtils-df9caee0', './useVisDragModeControls-f3a420dc', './useSelection-205a2bda', './useVisTouchResponse-88a7bb09', './stringUtils-4ffd9d59', './useContextMenu-4bd1c23a', './Menu-45a26116', './MenuItem-ff1cd14d', 'preact', './logger-0f873e29', './LayerHost-7d4aa6d3', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Menu/themes/MenuItemStyles.css', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', 'css!./MenuStyles.styles.css', './useSize-165f7da4', './size-0127b66b', './utils-ad4761c9', './themeContract.css-2e4b066d', './colorUtils-b9dc1bd1', './_curry1-df649359', 'css!./DiagramStyles.styles.css', './useAddBusyState-8ed5cc58', './BusyStateContext-ab2c549a', './useBusyStateContext-26bb2acb', './unsafeDomAccess-602c5dde', './clientHints-6d361eaa', './Icon-865b3c78', './useTooltip-e14d62f1', './useTooltipControlled-f7e07ed4', './useId-c9578d26', './useHover-8b8a1496', './useToggle-a29f97af', './useFocus-4194fc59', './useTouch-37489bb5', './useAnimation-5a74955f', './useComponentTheme-5aa41a8f', './useTestId-a2e433c2', './useThemeInterpolations-1dff2f9d', './useColorScheme-f2a81610', './useScale-5d246769', './theme-a8f3d819', './Theme-d945adae', './mergeInterpolations-9ede4cf7', './mergeDeepWithKey-aaab9019', './_curry3-83878f86', './_curry2-86c52b86', './_isObject-42bafc94', './useDensity-bee3cef4', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './hooks/UNSAFE_useTooltip/themes/TooltipContentStyles.css', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentBaseTheme.css', 'css!./TooltipContentVariants.styles.css', './vanilla-extract-recipes-createRuntimeFn.esm-d881c69a', './UNSAFE_Icon/themes/IconStyle.css', './datatipUtils-6846028e', './Layer-dc3c1ac9', './UNSAFE_Layer/themes/LayerStyles.css', 'css!./LayerStyles.styles.css', './Floating-366a30f8', './useFloating-0df4b3d3', './positionUtils-6e4daa31', './refUtils-77e97004', './useOutsideClick-9c4ceb18', './arrayUtils-6ee96a35', './useModal-536cb7ff', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', 'css!./FloatingStyles.styles.css', './UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingVariants.css', './vanilla-extract-dynamic.esm-6065bbd7', './UNSAFE_Floating/themes/FloatingContract.css', './useUnsafeDomElementRef-75afb461', './hooks/PRIVATE_useDatatip/themes/useDatatip.css', 'css!./useDatatip.styles.css', './Button-c1b41673', './Move-37905d32', './hooks/PRIVATE_useVisDragModeControls/themes/useVisDragModeControls.css', 'css!./useVisDragModeControls.styles.css', './ZoomAlt-d983f1d7', './ButtonSetSingle-545b4bcf', './useButtonSetContext-dffdaea3', './ButtonSet-ce95318d', './dimensions-f24f9a2b', './UNSAFE_ButtonSet/themes/ButtonSetStyles.css', 'css!./ButtonSetStyles.styles.css', './ButtonSetPositionContext-fd98cc11', './toggleButtonUtils-0ebe4c56', './useRovingTabIndexContainer-b11a404b', './TabbableModeContext-a9c97640', './useTabbableMode-df433329', './buttonUtils-cbbb0130', './id-c70ab33c', './ButtonSetItem-1f7c8a9f', './ButtonSetButton-722af7d2', './BaseButton-d2266b25', './useActive-bb5dc069', './UNSAFE_BaseButton/themes/redwood/BaseButtonTheme', './UNSAFE_BaseButton/themes/BaseButtonStyles.css', 'css!./BaseButtonStyles.styles.css', './UNSAFE_BaseButton/themes/redwood/BaseButtonVariants.css', 'module', './BareButton-6152c7c2', './useBareButton-98f047f8', './usePress-949a0d03', './usePressClick-b7b38da2', './ToggleButtonLabel-03111248', './ButtonLabelLayout-9cc087dc', './Text-9e32c423', './UNSAFE_Text/themes/TextStyles.css', 'css!./TextStyles.styles.css', './useButtonLabelLayoutTheme-3237026f', './UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutTheme', './UNSAFE_ButtonLabelLayout/themes/ButtonLabelLayoutStyles.css', 'css!./ButtonLabelLayoutStyles.styles.css', './UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutBaseTheme.css', 'module', './UNSAFE_ButtonLabelLayout/themes/redwood/ButtonLabelLayoutVariants.css', 'css!./ButtonLabelLayoutVariants.styles.css', './HiddenAccessible-037ef42d', 'css!./HiddenAccessibleStyles.styles.css', './ButtonSetIconButton-e65f43db', './useButtonSetPositionContext-b8534679', './IconToggleButton-f6dc5222', './useToggleAction-59741954', './eventsUtils-5fb81c3e', './hooks/PRIVATE_useVisSelection/themes/ClearSelection.css', 'css!./ClearSelection.styles.css', './useContextMenuGesture-69b54d61', './textSelectionUtils-06c7855d', './Sheet-fdd314ac', './Modal-8d647f76', './UNSAFE_Modal/themes/ModalStyles.css', 'css!./ModalStyles.styles.css', './tabbableUtils-9101c0e5', './head-9cb1a3da', './_arity-5a5f5f71', './_isArray-32602db6', './_isString-d0ada3cb', './popupUtils-e19b93b5', './WindowOverlay-bd810e3b', './UNSAFE_WindowOverlay/themes/WindowOverlayStyles.css', 'css!./WindowOverlayStyles.styles.css', './UNSAFE_WindowOverlay/themes/WindowOverlayContract.css', './UNSAFE_WindowOverlay/themes/redwood/WindowOverlayTheme', './UNSAFE_WindowOverlay/themes/redwood/WindowOverlayBaseTheme.css', 'module', './UNSAFE_WindowOverlay/themes/redwood/WindowOverlayVariants.css', './UNSAFE_Sheet/themes/SheetStyles.css', 'css!./SheetStyles.styles.css', './useAnimationStatus-4b135f52', './animationUtils-716a9aa6', './Dropdown-9d52501e', './keyboardUtils-fb6219eb', './usePopupAnimation-9f80595b', './popupAnimationUtils-49b93365', './CollectionInteractionContext-0b4ed98b', './UNSAFE_Dropdown/themes/dropdownStyles.css', 'css!./dropdownStyles.styles.css', './useOutsideMousedown-b0021878', './UNSAFE_Menu/themes/MenuStyles.css', './UNSAFE_Menu/themes/DropdownMenuStyles.css', 'css!./DropdownMenuStyles.styles.css', './Flex-4bc3a394', './boxalignment-6cee1ef3', 'css!./boxalignment.styles.css', './vanilla-extract-sprinkles-createRuntimeSprinkles.esm-84d30764', './flexbox-8521f6aa', 'css!./flexbox.styles.css', './flexitem-5db48325', 'css!./flexitem.styles.css', 'css!./FlexStyles.styles.css', './Skeleton-a7e166a0', './borders-e15a6927', './UNSAFE_Skeleton/themes/redwood/SkeletonTheme', './UNSAFE_Skeleton/themes/SkeletonStyles.css', 'css!./SkeletonStyles.styles.css', './UNSAFE_Skeleton/themes/redwood/SkeletonBaseTheme.css', 'module', './UNSAFE_Skeleton/themes/redwood/SkeletonVariants.css', './UNSAFE_Menu/themes/MenuSkeletonStyles.css', 'css!./MenuSkeletonStyles.styles.css', './LiveRegion-4b9317e5', 'css!./LiveRegionStyles.styles.css', './UNSAFE_Menu/themes/redwood/MenuItemTheme', './UNSAFE_Menu/themes/redwood/MenuItemBaseTheme.css', 'module', './UNSAFE_Menu/themes/redwood/MenuItemVariants.css', 'css!./MenuItemStyles.styles.css', 'css!./MenuItemVariants.styles.css', './useInteractionStyle-15a2bdd0', './index-f7ad24df', './UNSAFE_Layer/themes/LayerHostStyles.css', 'css!./LayerHostStyles.styles.css', './EnvironmentProvider-fb09fcfb', './LayerManager-4983f21c', 'css!./SeparatorStyles.styles.css'], (function(e,t,n,o,i,s,r,d,a,l,c,u,h,p,f,g,m,y,x,b,S,k,w,M,v,I,L,P,N,T,C,D,R,B,z,E,A,F,U,_,X,Y,j,O,V,Z,W,$,K,q,G,H,J,Q,ee,te,ne,oe,ie,se,re,de,ae,le,ce,ue,he,pe,fe,ge,me,ye,xe,be,Se,ke,we,Me,ve,Ie,Le,Pe,Ne,Te,Ce,De,Re,Be,ze,Ee,Ae,Fe,Ue,_e,Xe,Ye,je,Oe,Ve,Ze,We,$e,Ke,qe,Ge,He,Je,Qe,et,tt,nt,ot,it,st,rt,dt,at,lt,ct,ut,ht,pt,ft,gt,mt,yt,xt,bt,St,kt,wt,Mt,vt,It,Lt,Pt,Nt,Tt,Ct,Dt,Rt,Bt,zt,Et,At,Ft,Ut,_t,Xt,Yt,jt,Ot,Vt,Zt,Wt,$t,Kt,qt,Gt,Ht,Jt,Qt,en,tn,nn,on,sn,rn,dn,an,ln,cn,un,hn,pn,fn,gn,mn,yn,xn,bn,Sn,kn,wn,Mn,vn,In,Ln,Pn,Nn,Tn,Cn,Dn,Rn,Bn,zn,En,An,Fn,Un,_n,Xn,Yn,jn,On,Vn,Zn,Wn,$n,Kn,qn,Gn,Hn,Jn,Qn,eo,to,no,oo,io,so,ro,ao,lo,co){"use strict";function uo(e,t,n,o,i,s,r,d,a,l,c,u){const h=new Map,p=Array.from(e.values()),f=Array.from(t.values());u&&function(e,t,n,o){e.forEach((e=>{if(e.children&&mo(e.children,n,o),e.label){const t=e.label,i=Co(e.labelStyle);n.set(e.id,o(t,i))}})),t.forEach((e=>{if(e.label){const t=e.label,i=Co(e.labelStyle);n.set(e.id,o(t,i))}}))}(p,f,h,u);const g=Array.from(t.keys());for(const e of g){const n=t.get(e);if(n&&u&&n.label){const t=n.label,o=Co(n.labelStyle);h.set(e,u(t,o))}}return{layoutJSON:{getNodeDimensions:function(e){return o.get(e.id)},getLabelDimensions:function(e){return h.get(e.id)},getContainerId:function(e,t){return Ro(e,t,a)},getNodeBounds:function(e){const t=e.id,n=l.get(t),o=r.get(t);if(n){if(c&&c.current){const e=c.current.querySelector(`[data-oj-child=${t}]`),o=c.current.querySelector(`[data-oj-private-node=${t}]`),i=r.get(t);if(e&&o&&i){const t=ho(e.getBoundingClientRect(),d),i=ho(o.getBoundingClientRect(),d),s=Math.max(t.x-i.x+(n.width+n.x)-i.width,0),r=Math.max(t.y-i.y+(n.height+n.y)-i.height,0);return{x:t.x-i.x+n.x,y:t.y-i.y+n.y,width:i.width+s,height:i.height+r}}}}else if(o)return{x:0,y:0,width:o.width,height:o.height}},getRelativeNodeBounds:function(e,t){const n=go(e,t,c),o=r.get(e);return n&&o?{x:n.x/d,y:n.y/d,width:o.width,height:o.height}:void 0},getPromotedLinks:function(){return n},componentSize:{width:i,height:s}},labelDims:h}}function ho(e,t){return{x:e.x/t,y:e.y/t,width:e.width/t,height:e.height/t}}function po(e,t,n,o,i){if(i&&i.current){const s=i.current.querySelector(`[data-oj-private-link=${e}]`);let r;t&&(r=i.current.querySelector(`[data-oj-private-node=${t}]`));const d=n.get(e);if(s&&r&&d){const e=ho(s.getBoundingClientRect(),o),t=ho(r.getBoundingClientRect(),o);return{x:e.x-t.x,y:e.y-t.y,width:d.width,height:d.height}}}return null}function fo(e,t,n,o,i,s,r,d){let a,l,c,u=1/0,h=1/0,p=-1/0,f=-1/0;for(let t=0;t<e.length;t++){a=e[t].id;const n=o.get(a);n&&(u>n.x&&(u=n.x,c=a),h>n.y&&(h=n.y,l=a),p<n.x+n.width&&(p=n.x+n.width),f<n.y+n.height&&(f=n.y+n.height))}const g=u,m=h;let y=1/0,x=1/0,b=-1/0,S=-1/0;for(let e=0;e<t.length;e++){a=t[e].id;const n=po(a,l,i,r,d),o=po(a,c,i,r,d);o&&(o.x<y&&(y=o.x),b<o.x+o.width&&(b=o.x+o.width)),n&&(n.y<x&&(x=n.y),S<n.y+n.height&&(S=n.y+n.height))}for(let e=0;e<n.length;e++){a=n[e].id;const t=po(a,l,s,r,d),o=po(a,c,s,r,d);o&&(o.x<y&&(y=o.x),b<o.x+o.width&&(b=o.x+o.width)),t&&(t.y<x&&(x=t.y),S<t.y+t.height&&(S=t.y+t.height))}return{minX:g,minY:m,contentWidth:p-u,contentHeight:f-h,linkBounds:y!==1/0?{x:y,y:x,width:b-y,height:S-x}:void 0}}function go(e,t,n){if(n&&n.current){const o=n.current.querySelector(`[data-oj-private-node=${e}]`);let i;if(i=t?n.current.querySelector(`[data-oj-child=${t}]`):n.current.querySelector("[data-node-container]"),o&&i){const e=o.getBoundingClientRect(),t=i.getBoundingClientRect();return{x:e.x-t.x,y:e.y-t.y}}}return null}function mo(e,t,n){e.forEach((e=>{if(e.children&&mo(e.children,t,n),e.label){const o=e.label,i=Co(e.labelStyle);t.set(e.id,n(o,i))}}))}function yo(e,t,n){const o=e.links,i=new Map,s=new Map,r=new Map;let d;if(xo(e,t,i,s),o)for(let e=0;e<n.length;e++)d=o[n[e].id],d&&d.label&&r.set(n[e].id,d.label);return{nodePoints:i,nodeLabelPos:s,linkLabelPos:r}}function xo(e,t,n,o){const i=e.nodes;let s;if(i)for(let r=0;r<t.length;r++){const d=t[r],a=d.id;d.children&&xo(e,d.children,n,o),s=i[a],s&&(n.set(a,s.position),s.label&&o.set(a,s.label))}}function bo(e,t,n,o,i,s,r){for(let d=0;d<e.length;d++){const a=e[d],l=`${r}_${d}`;t.set(a.id,a),n.set(a.id,l),o.set(l,a.id),i.set(a.id,s),a.children&&bo(a.children,t,n,o,i,a.id,l)}}function So(e,t=new Map,n){if(0===t.size)return;let o,i=1/0,s=1/0,r=-1/0,d=-1/0;return t.forEach(((t,a)=>{o=function(e,t,n){const o=Mo(t,e,n);if(e.rotationAngle){const n=e.rotationPoint?e.rotationPoint:{x:t.width/2,y:t.height/2},i=e.rotationAngle,s=ko({x:0,y:0},n),r=ko({x:t.width,y:0},n),d=ko({x:0,y:t.height},n),a=ko({x:t.width,y:t.height},n);return function(e){let t=e[0].x,n=e[0].y,o=e[0].x,i=e[0].y;for(let s=1;s<e.length;s++){const r=e[s];r.x<t?t=r.x:r.x>o&&(o=r.x),r.y<n?n=r.y:r.y>i&&(i=r.y)}return{x:t,y:n,width:o-t,height:i-n}}([wo(s,i),wo(d,i),wo(r,i),wo(a,i)].map((e=>({x:e.x+o.x+n.x,y:e.y+o.y+n.y}))))}return{x:o.x,y:o.y,width:t.width,height:t.height}}(t,e.get(a),n),i=o.x<i?o.x:i,s=o.y<s?o.y:s,r=o.x+o.width>r?o.x+o.width:r,d=o.y+o.height>d?o.y+o.height:d})),{x:i,width:r-i,y:s,height:d-s}}function ko(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wo(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}}function Mo(e,t,n){const o=t.position,i=t.hAlign?t.hAlign:n?"right":"left",s=t.vAlign;let r,d;return r="center"===i?o.x-e.width/2:"right"===i?o.x-e.width:o.x,d="middle"===s?o.y-e.height/2:"bottom"===s?o.y-e.height:"baseline"===s?o.y+e.y:o.y,{x:r,y:d}}function vo(e,t,n,o,i){return{panX:o/2-e*n,panY:i/2-t*n}}function Io(e,t){return e?.id===t?.id&&e?.type===t?.type}function Lo(e,t){let n,o,i=e;for(;!o;)if(o=i.dataset.ojPrivateNode,o?n="node":(o=i.dataset.ojPrivateLink,n="link"),!o){if(!i.parentElement||i.parentElement===t?.current)break;i=i.parentElement}return{id:o,type:n}}function Po(e,t,n,o){return r.generateAriaLabel(e,o||"",{isSelected:t?n:void 0})}function No(e,t,n){const o=(e-40)/n.width,i=(t-40)/n.height;return Math.min(o,i)}function To(e,t,n){let o=Math.max(t,e);return o=Math.min(n,o),o}function Co(e){const t={};return e?(e.fontFamily&&(t.fontFamily=e.fontFamily),e.fontSize&&(t.fontSize=e.fontSize),e.fontStyle&&(t.fontStyle=e.fontStyle),e.fontWeight&&(t.fontWeight=e.fontWeight),t):t}function Do(e,t,n,o,i,s){let r;if("node"===e.type)r=n.get(e.id);else{const o=t.get(e.id),i=n.get(o.startNode),s=n.get(o.endNode),d=Math.min(i.x,s.x),a=Math.min(i.y,s.y);r={x:d,y:a,width:Math.max(i.x+i.width,s.x+i.width)-d,height:Math.max(i.y+i.height,s.y+s.height)-a}}return function(e,t,n,o){const i=(n-40)/e.width,s=(o-40)/e.height,r=Math.min(i,s,t),d=e.width/2+e.x,a=e.height/2+e.y;return{centerX:d,centerY:a,zoom:r}}(r,s,o,i)}function Ro(e,t,n){const o=zo(e,n),i=zo(t,n);for(let e=0;e<o.length;e++)if(i.indexOf(o[e])>-1)return o[e]}function Bo(e,t,n,o){const i=[];for(let n=0;n<t.length;n++){const s=t[n];Ro(s.startNode,s.endNode,o)===e&&i.push(s)}const s=[];for(let t=0;t<n.length;t++){const i=n[t];Ro(i.startNode,i.endNode,o)===e&&s.push(i)}return{containerLinks:i,containerPromotedLinks:s}}function zo(e,t){const n=[];let o=t.get(e);for(;void 0!==o;)n.push(o),o=t.get(o);return n}function Eo(e,t){const n=t.nodes;for(let t=0;t<e.length;t++){const o=e[t];if(!n[o.startNode]||!n[o.endNode])return!1}return!0}function Ao(e,t){const n=t.indexOf(e);return-1===n?t.push(e):t.includes(e)&&t.splice(n,1),t}function Fo(e,t,n){return!(t.get(e.startNode)&&n.includes(t.get(e.startNode))||t.get(e.endNode)&&n.includes(t.get(e.endNode)))}function Uo(e,t,n){let o=e,i=t.get(e),s=e;for(;i;)n.includes(i)?o=s:(o=void 0,s=i),i=t.get(i);return o||s}const _o=({text:e,position:n,styles:i,dimensions:s,isRTL:r})=>{const{labelStyle:a,labelBorderStyle:l}=o.labelStyles,c=Mo(s,n,r),u=function(e){const t=e.rotationAngle,n=e.rotationPoint,o={};t&&(o.transform=`rotate(${t}deg)`);n&&(o["transform-origin"]=`${n.x}px ${n.y}px`);return o}(n);return t.jsx("div",{class:d.classNames([a,i&&i.borderColor&&l]),style:{top:c.y,left:c.x,...i,...u},children:e})};const Xo=({type:e,id:n})=>t.jsx("div",{"data-oj-button":n,class:o.buttonStyle,style:{top:0,left:0,width:"5x",height:"5x",border:"1px solid black"},children:"collapse"==e?t.jsx(u.SvgPlus,{size:"5x"}):t.jsx(c.SvgMinus,{size:"5x"})}),Yo=({id:e,state:n,previousState:r,position:c,activeId:u,nodeRenderer:h,onNodeSizeChanged:p,data:f,accessibleLabel:g,isDimmed:m,supportsSelection:y,content:x,labelPosition:b,labelDimensions:S})=>{const{nodeStyles:k,dimmedItemStyle:w}=o.itemStyles,M={state:n,previousState:r,data:f,content:x},v=a.useTranslationBundle("@oracle/oraclejet-preact"),I=s.useRef(null),L=s.useRef({box:"border-box"});i.useResizeObserver(I,s.useCallback((t=>{const n=t.borderBoxSize,o=n[0].inlineSize,i=n[0].blockSize;p(o,i,e)}),[e,p]),L.current);const P=c||{x:0,y:0},{direction:N}=l.useUser(),T=f.label&&b&&S;return t.jsxs("div",{ref:I,class:d.classNames([k,m?w:void 0]),"data-oj-private-node":e,role:"img","aria-label":Po(v,y,n.selected,g),style:{top:P.y,left:P.x},id:n.focused||n.hovered?u:void 0,children:[h(M),T?t.jsx("div",{class:o.layerStyles,children:t.jsx(_o,{styles:f.labelStyle,text:f.label,position:b,dimensions:S.get(e),isRTL:"rtl"===N})}):void 0,f.children&&"off"!==f.showDisclosure?t.jsx(Xo,{type:x?"expand":"collapse",isRTL:"rtl"===N,id:e}):void 0]},e)},jo=({id:e,state:n,previousState:r,activeId:l,data:c,linkRenderer:u,accessibleLabel:h,isDimmed:p,supportsSelection:f,layoutOutput:g,onLinkSizeChanged:m,isPromoted:y,promotedToLinkMap:x})=>{const b=a.useTranslationBundle("@oracle/oraclejet-preact"),{dimmedItemStyle:S,linkStyles:k}=o.itemStyles,w=y?{state:n,previousState:r,data:x.get(e),layoutOutput:g,startNode:c.startNode,endNode:c.endNode,type:"promotedLink"}:{state:n,previousState:r,data:c,layoutOutput:g,type:"link"},M=s.useRef(null),v=s.useRef({box:"border-box"});return i.useResizeObserver(M,s.useCallback((t=>{const n=t.borderBoxSize,o=n[0].inlineSize,i=n[0].blockSize;m(o,i,e)}),[e,m]),v.current),t.jsx("g",{ref:M,id:n.focused?l:void 0,"aria-label":Po(b,f,n.selected,h),"data-oj-private-link":e,role:"img",class:d.classNames([k,p&&S]),children:u(w)},e)};function Oo({labelPosition:e,itemProps:n,labelDimensions:i}){const{direction:s}=l.useUser();return t.jsx("div",{class:o.layerStyles,children:n.map((n=>{if(n.label&&e.get(n.id))return t.jsx(_o,{styles:n.labelStyle,text:n.label,position:e.get(n.id),dimensions:i.get(n.id),isRTL:"rtl"===s})}))})}function Vo({links:e,states:n,previousStates:i,linkRenderer:s,width:r,height:d,supportsSelection:a,onLinkSizeChanged:l,layoutOutput:c,combinedNodeBounds:u,linkLabelPositions:h,labelDimensions:p,isPromoted:f,promotedToLinkMap:g}){const m=No(r,d,u);return t.jsxs("div",{children:[t.jsx("svg",{width:r/m,height:d/m,class:o.layerStyles,overflow:"visible",children:e.map((e=>{const o={selected:f?n.selectedPromotedLinkIds.includes(e.id):n.selectedLinkIds.includes(e.id),focused:n.focusedId===e.id,hovered:n.hoveredId===e.id,zoom:n.zoom},r={selected:f?i.selectedPromotedLinkIds.includes(e.id):i.selectedLinkIds.includes(e.id),focused:i.focusedId===e.id,hovered:i.hoveredId===e.id,zoom:i.zoom};return t.jsx(jo,{id:e.id,label:e.label,state:o,previousState:r,isDimmed:0!==n.highlightedLinkIds.length&&!n.highlightedLinkIds.includes(e.id),activeId:n.activeId,accessibleLabel:e.accessibleLabel,data:e,linkRenderer:s,supportsSelection:a,layoutOutput:c,onLinkSizeChanged:l,promotedToLinkMap:g,isPromoted:f})}))}),p?t.jsx("div",{children:e&&h?t.jsx(Oo,{labelPosition:h,itemProps:e,labelDimensions:p}):void 0}):void 0]})}const Zo=({id:e,state:n,previousState:r,activeId:a,data:l,linkRenderer:c,isDimmed:u,layoutOutput:h,onLinkSizeChanged:p,promotedToLinkMap:f})=>{const{dimmedItemStyle:g,linkStyles:m}=o.itemStyles,y={state:n,previousState:r,data:f.get(e),layoutOutput:h,startNode:l.startNode,endNode:l.endNode,type:"promotedLink",id:e},x=s.useRef(null),b=s.useRef({box:"border-box"});return i.useResizeObserver(x,s.useCallback((t=>{const n=t.borderBoxSize,o=n[0].inlineSize,i=n[0].blockSize;p(o,i,e)}),[e,p]),b.current),t.jsx("g",{ref:x,id:n.focused?a:void 0,"data-oj-private-link":e,role:"img",class:d.classNames([m,u&&g]),children:c(y)},e)};function Wo({links:e,states:n,previousStates:i,linkRenderer:s,width:r,height:d,supportsSelection:a,onLinkSizeChanged:l,layoutOutput:c,combinedNodeBounds:u,promotedToLinkMap:h}){const p=No(r,d,u);return t.jsx("div",{children:t.jsx("svg",{width:r/p,height:d/p,class:o.layerStyles,overflow:"visible",children:e.map((e=>{const o={selected:n.selectedPromotedLinkIds.includes(e.id),focused:n.focusedId===e.id,hovered:n.hoveredId===e.id,zoom:n.zoom},r={selected:i.selectedPromotedLinkIds.includes(e.id),focused:i.focusedId===e.id,hovered:i.hoveredId===e.id,zoom:i.zoom};return t.jsx(Zo,{id:e.id,state:o,previousState:r,isDimmed:0!==n.highlightedPromotedLinkIds.length&&!n.highlightedPromotedLinkIds.includes(e.id),activeId:n.activeId,data:e,linkRenderer:s,supportsSelection:a,layoutOutput:c,onLinkSizeChanged:l,promotedToLinkMap:h,isPromoted:!0})}))})})}function $o({nodes:e,states:n,previousStates:i,nodeRenderer:s,linkRenderer:r,nodeBounds:d,width:a,height:l,onNodeSizeChanged:c,onLinkSizeChanged:u,onPromotedLinkSizeChanged:h,supportsSelection:p,nodeLabelPositions:f,linkLabelPositions:g,labelDimensions:m,minX:y=0,minY:x=0,parentId:b,links:S,promotedLinks:k,layoutOutput:w,zoom:M,nodeIdToParentMap:v,linkDimensions:I,promotedLinkDimensions:L,rootRef:P,combinedNodeBounds:N,nodeBoundsRef:T,promotedToLinkMap:C}){const{containerLinks:D,containerPromotedLinks:R}=Bo(b,S,k,v);return t.jsxs("div",{class:o.layerStyles,"data-node-container":!0,children:[e.map((e=>{const o=d&&d.get(e.id)?{x:d.get(e.id).x-y,y:d.get(e.id).y-x}:void 0,b={selected:n.selectedNodeIds.includes(e.id),focused:n.focusedId===e.id,hovered:n.hoveredId===e.id,zoom:n.zoom,expanded:n.expanded&&n.expanded.includes(e.id)},D={selected:i.selectedNodeIds.includes(e.id),focused:i.focusedId===e.id,hovered:i.hoveredId===e.id,zoom:i.zoom,expanded:i.expanded&&i.expanded.includes(e.id)},{containerLinks:R,containerPromotedLinks:B}=Bo(e.id,S,k,v);if(e.children&&n.expanded.includes(e.id)){if(d&&function(e,t,n,o,i,s){const r=e.children;for(let e=0;e<r?.length;e++){const n=r[e].id;if(!t.get(n))return!1}for(let e=0;e<n.length;e++){const t=n[e].id,o=i.get(t);if(!o||0===o.width||0===o.height)return!1}for(let e=0;e<o.length;e++){const t=o[e].id,n=s.get(t);if(!n||0===n.width||0===n.height)return!1}return!0}(e,d,R,B,I,L)){const y=Ko(e,n,i,s,c,u,h,p,S,k,v,a,l,M,e.id,d,I,L,N,T,f,g,m,C,r,w,P);return t.jsx(Yo,{id:e.id,position:o,state:b,previousState:D,isDimmed:0!==n.highlightedNodeIds.length&&!n.highlightedNodeIds.includes(e.id),activeId:n.activeId,nodeRenderer:s,onNodeSizeChanged:c,accessibleLabel:e.accessibleLabel,data:e,isExpanded:!0,supportsSelection:p,content:y,labelDimensions:m,labelPosition:f?.get(e.id)})}{const o=Ko(e,n,i,s,c,u,h,p,S,k,v,a,l,M,e.id,d,I,L,N,T,f,g,m,C,r,w,P);return t.jsx("div",{children:o.element})}}return t.jsx(Yo,{id:e.id,position:o,state:b,previousState:D,isDimmed:0!==n.highlightedNodeIds.length&&!n.highlightedNodeIds.includes(e.id),activeId:n.activeId,nodeRenderer:s,onNodeSizeChanged:c,accessibleLabel:e.accessibleLabel,data:e,isExpanded:!1,supportsSelection:p,labelDimensions:m,labelPosition:f?.get(e.id)})})),S.length>0&&w&&r&&a!==1/0&&D.length>0&&Eo(D,w)&&t.jsx(Vo,{links:D,states:n,previousStates:i,linkRenderer:r,width:a/M,height:l,supportsSelection:p,labelDimensions:m,layoutOutput:w,onLinkSizeChanged:u,linkLabelPositions:g,combinedNodeBounds:N,minX:y,minY:x,promotedToLinkMap:C}),k.length>0&&w&&r&&a!==1/0&&R.length>0&&Eo(R,w)&&t.jsx(Wo,{links:R,states:n,previousStates:i,linkRenderer:r,width:a/M,height:l,supportsSelection:p,layoutOutput:w,onLinkSizeChanged:h,combinedNodeBounds:N,minX:y,minY:x,promotedToLinkMap:C})]})}function Ko(e,n,o,i,s,r,d,a,l,c,u,h,p,f,g,m,y,x,b,S,k,w,M,v,I,L,P){const N=e.children,{containerLinks:T,containerPromotedLinks:C}=Bo(g,l,c,u),{minX:D,minY:R,contentWidth:B,contentHeight:z,linkBounds:E}=fo(N,T,C,m,y,x,f,P);if(E){const t=S.current;t?.set(e.id,E),S.current=t}return{element:t.jsx("div",{"data-oj-child":g,style:{position:"relative"},children:t.jsx($o,{nodes:N,nodeBounds:m,states:n,minX:m?D:void 0,minY:m?R:void 0,previousStates:o,nodeRenderer:i,onNodeSizeChanged:s,onLinkSizeChanged:r,onPromotedLinkSizeChanged:d,supportsSelection:a,nodeLabelPositions:k,linkLabelPositions:w,labelDimensions:M,links:l,promotedLinks:c,nodeIdToParentMap:u,linkRenderer:I,layoutOutput:L,width:h,height:p,zoom:f,parentId:g,linkDimensions:y,promotedLinkDimensions:x,rootRef:P,combinedNodeBounds:b,nodeBoundsRef:S,promotedToLinkMap:v})}),width:B||0,height:z?z-R:0,linkBounds:E}}function qo({nodes:e,links:n,promotedLinks:o,nodeRenderer:i,linkRenderer:s,states:r,previousStates:d,nodeBounds:a,width:l,height:c,onNodeSizeChanged:u,onLinkSizeChanged:h,onPromotedLinkSizeChanged:p,labelDimensions:f,nodeLabelPositions:g,linkLabelPositions:m,supportsSelection:y,layoutOutput:x,zoom:b,nodeIdToParentMap:S,linkDimensions:k,promotedLinkDimensions:w,rootRef:M,combinedNodeBounds:v,nodeBoundsRef:I,promotedToLinkMap:L}){const{containerLinks:P,containerPromotedLinks:N}=Bo(void 0,n,o,S),{minX:T,minY:C}=fo(e,P,N,a,k,w,b,M);return t.jsx(t.Fragment,{children:t.jsx($o,{nodes:e,nodeBounds:a,states:r,previousStates:d,nodeRenderer:i,onNodeSizeChanged:u,onLinkSizeChanged:h,onPromotedLinkSizeChanged:p,supportsSelection:y,nodeLabelPositions:g,linkLabelPositions:m,labelDimensions:f,linkDimensions:k,promotedLinkDimensions:w,rootRef:M,links:n,promotedLinks:o,nodeIdToParentMap:S,linkRenderer:s,layoutOutput:x,width:l,height:c,zoom:b,minX:a&&T!==1/0?T:void 0,minY:a&&C!==1/0?C:void 0,combinedNodeBounds:v,nodeBoundsRef:I,promotedToLinkMap:L})})}function Go({centerX:e,centerY:n,children:i,zoom:s,width:r,height:d}){const a=vo(e,n,s,r,d);return t.jsx("div",{class:o.panZoomStyles,style:{translate:`${a.panX}px ${a.panY}px`,transform:`scale(${s})`},children:i})}function Ho(e,t){let n;for(let o=0;o<t.length;o++)if(n=t[o],e.id===n.id)return n}function Jo(e,t){const n=[];return t.forEach((t=>{const o=t.startNode,i=t.endNode;o!=e&&i!=e||n.push(t)})),n}function Qo(e,t,n,o){let i,s=n[0],r=n[0];for(let e=0;e<n.length;e++)i=n[e],i.id===t.startNode?s=i:i.id===t.endNode&&(r=i);const d=e.id==s.id?r:s,a=ni(e,o),l=ni(d,o);let c=Math.atan2(l.y-a.y,l.x-a.x);return c=c<0?c+2*Math.PI:c,c}function ei(e,t,n){let o,i=t[0],s=t[0];for(let n=0;n<t.length;n++)o=t[n],o.id===e.startNode?i=o:o.id===e.endNode&&(s=o);const r=ni(i,n),d=ni(s,n);return Math.sqrt(Math.pow(d.x-r.x,2)+Math.pow(d.y-r.y,2))}function ti(e,t){return t.endNode===e.id?1:0}function ni(e,t){const n=t.get(e.id);return{x:n.x+n.width/2,y:n.y+n.height/2}}function oi(e,t,n){const o=15/180*Math.PI,i=40/180*Math.PI,s=e.x+e.width/2,r=e.y+e.height/2,d=t.x+t.width/2,a=t.y+t.height/2,l=Math.abs(s-d),c=Math.abs(r-a),u=Math.atan2(c,l);let h=Math.sqrt(l*l+c*c);return(u>o&&("right"==n||"left"==n)||u<Math.PI/2-o&&("up"==n||"down"==n))&&(u>i&&("right"==n||"left"==n)||u<Math.PI/2-i&&("up"==n||"down"==n)?h*=6:h*=2),h}function ii(e,t,n,o){if(o){const o=e.x+.5*e.width,i=t.x+.5*t.width,s=e.y+.5*e.height,r=t.y+.5*t.height;switch(n){case"up":return s<r;case"down":return e.y>r;case"right":return o>i;case"left":return o<i}return!0}switch(n){case"up":return e.y<t.y||ai(e.y,t.y);case"down":return e.y>t.y||ai(e.y,t.y);case"right":return e.x>t.x||ai(e.x,t.x);case"left":return e.x<t.x||ai(e.x,t.x)}return!0}function si(e,t,n){switch(n){case"up":return ri(e,t)&&(t.y<=e.y+e.height||ai(t.y,e.y+e.height));case"down":return ri(e,t)&&(e.y<=t.y+t.height||ai(e.y,t.y+t.height));case"right":return di(e,t)&&(e.x<=t.x+t.width||ai(e.x,t.x+t.width));case"left":return di(e,t)&&(t.x<=e.x+e.width||ai(t.x,e.x+e.width))}return!1}function ri(e,t){return e.x>=t.x&&e.x<=t.x+t.width||t.x>=e.x&&t.x<=e.x+e.width}function di(e,t){return e.y>=t.y&&e.y<=t.y+t.height||t.y>=e.y&&t.y<=e.y+e.height}function ai(e,t){return Math.abs(e-t)<=1e-7}function li(e,t){let n=Math.abs(e-t)<=1e-7;return n||(n=Math.abs(2*Math.PI+Math.min(e,t)-Math.max(e,t))<=1e-7),n}function ci(e,t,n,o){const i=s.useRef(),r=n;return{isNode:n=>{let o,i;for(let s=0;s<e.length;s++){if(o=e[s],i=t[s],n.id===o.id)return!0;if(n.id===i.id)return!0}return!1},getNextNavigableNode:function(e,t,n,o){if(!o)return n;if(!n)return o[0];const i=r.get(n.id);if(!i)return o[0];let s,d,a,l=n,c=Number.MAX_VALUE,u=!1,h=!1;for(let p=0;p<o.length;p++){if(s=o[p],s===n){h=!0;continue}const f=r.get(s.id);if(!f)continue;const g={x:f.x,y:f.y,width:f.width,height:f.height},m={x:i.x,y:i.y,width:i.width,height:i.height};ii(g,m,e,t)&&(d=si(g,m,e),u&&!d||(a=oi(g,m,e),(0!=a||h)&&(!u&&d||a<c&&(u&&d||!u))&&(c=a,l=s,u=d)))}return l},getNextNavigableLink:function(e,t,n,o){if(!o)return n;if(!n)return o[0];const s=i.current,d=Ho({id:s||n.startNode,type:"node"},t);if(!d)return n;const a=function(e,t,n,o){let i,s,r;const d=[];for(let a=0;a<t.length;a++){const l=t[a];i=Qo(e,l,n,o),s=ei(l,n,o),r=ti(e,l),d.push({id:l.id,angle:i,distance:s,direction:r})}return d}(d,o=Jo(d.id,o),t,r);a.sort(((e,t)=>{const{angle:n,distance:o,direction:i}=e,{angle:s,distance:r,direction:d}=t;let a=-1;return!li(n,s)&&n>s?a=1:li(n,s)&&(o>r||r==o&&i>d?a=1:r==o&&i==d&&(a=0)),a}));const l="down"==e;let c=0;for(let e=0;e<a.length;e++){if(a[e].id===n.id){c=l?e==a.length-1?0:e+1:0==e?a.length-1:e-1;break}}return a[c]},navigateFromNodeToLink:function(e,t,n){if(!n)return;const o=Jo(n.id,e);if(o.length<1)return;let s=o[0];const d=r.get(n.id);let a,l,c,u;const h=d.x+d.width/2;i.current=n.id;for(let e=0;e<o.length;e++)if(a=o[e],l=a.startNode===n.id?a.endNode:a.startNode,c=r.get(l),u=c.x+c.width/2,t.altKey&&"Comma"===t.code&&u<=h||t.altKey&&"Period"===t.code&&u>=h){s=a;break}return{id:s.id,type:"link"}},navigateFromLinkToNode:function(e,t){const n=t.key,i=o.get(e),s=r.get(i.startNode),d=r.get(i.endNode);if(!s||!d)return;const a=s.x+s.width/2,l=d.x+d.width/2;return{id:l>a&&"ArrowRight"===n||l<a&&"ArrowLeft"===n?i.endNode:i.startNode,type:"node"}}}}function ui(e,t,n,o,i,r,d,a,l,c,u,g,m,y,x,b,S,k){const{getNextNavigableNode:w,getNextNavigableLink:M,navigateFromNodeToLink:v,navigateFromLinkToNode:I}=ci(n,o,i,r),[L,P]=s.useState({id:t.id,type:"node"}),[N,T]=s.useState(),C=s.useRef(),D=e=>{const t=d.get(e)?.children;if(t&&t.length>0)return t[0]},R=p.useVisHover((e=>{const t=Lo(e.target);t&&!Io(t,N)&&(T({...t,isCurrent:!0}),C.current=h.getRandomId(),P({...L,isCurrent:!1}),"node"===t.type?y?.({id:t.id,type:"node",data:d.get(t.id)}):"link"===t.type?y?.({id:t.id,type:"link",data:r.get(t.id)}):"promotedLink"===t.type&&y?.({id:t.id,type:"promotedLink",data:a.get(t.id)}))}),void 0,(()=>{T(void 0),C.current=void 0,y?.({id:void 0,data:void 0})}),e);function B(e){"node"===e.type?x?.({id:e.id,type:"node",data:d.get(e.id)}):"link"===e.type?x?.({id:e.id,type:"link",data:r.get(e.id)}):"promotedLink"===e.type&&x?.({id:e.id,type:"promotedLink",data:a.get(e.id)}),C.current=h.getRandomId(),P(e)}function z(e){e&&(Io(e,L)||(e.isCurrent=!0,e.isFocusVisible=!0,N&&T({...N,isCurrent:!1}),B(e)))}return{focusedItemInfo:L,hoveredItemInfo:N,activeId:C.current,onContextMenuDismissed:e=>{"keyboard"===e&&B({...L,isFocusVisible:!0,isCurrent:!0})},eventsProps:f.mergeProps(R,{onKeyUp:e=>{if("Tab"===e.code)B({...L,isCurrent:!0,isFocusVisible:!0})},onKeyDown:e=>{const t=e.key;let s=!1;if("TAB"!==t){if(function(e){const t=e.code;if("node"===L.type&&e.altKey&&("Period"===t||"Comma"===t))return!0;if("node"!==L.type&&("ArrowLeft"===t||"ArrowRight"===t))return!0;return!1}(e)){z("node"===L.type?v(o,e,Ho(L,n)):I(L.id,e)),s=!0}else if(function(e){switch(e){case"ArrowDown":case"ArrowUp":case"ArrowRight":case"ArrowLeft":return!0}return!1}(t)){const e=function(e){let t="down";switch(e){case"ArrowDown":t="down";break;case"ArrowUp":t="up";break;case"ArrowRight":t="right";break;case"ArrowLeft":t="left"}if("node"===L.type){const e=m.get(L.id),o=e&&d.get(e)?d.get(e).children:n,i=w(t,!0,d.get(L.id),o);return i?{id:i.id,type:"node"}:L}{const e=function(e,t){let n;for(let o=0;o<t.length;o++)if(n=t[o],e.id===n.id)return n}(L,o),i=M(t,n,e,o);return i?{id:i.id,type:"link"}:{id:L.id,type:"link"}}}(t);z(e),s=!0}else switch(t){case"PageUp":b&&b({dPan:{dx:e.shiftKey?-15:0,dy:e.shiftKey?0:-15}}),s=!0;break;case"PageDown":b&&b({dPan:{dx:e.shiftKey?15:0,dy:e.shiftKey?0:15}}),s=!0,s=!0;break;case"+":case"=":S&&S({dZoom:.15}),s=!0;break;case"-":case"_":S&&S({dZoom:-.15}),s=!0;break;case"0":if(e.ctrlKey&&e.altKey){const{centerX:e,centerY:t,zoom:n}=Do(L,r,i,l,c,u);S&&S({nZoom:n}),b&&b({nPan:{cx:e,cy:t}})}else S&&S({}),b&&b({center:!0});s=!0;break;case" ":if(e.ctrlKey&&e.shiftKey&&"node"===L.type){const e=Ao(L.id,g),t=[];e.forEach((e=>{t.push(d.get(e))})),k&&k(e)}break;case"[":if("node"===L.type){const e=D(L.id);if(e){z({id:e.id,type:"node"})}}s=!0;break;case"]":if("node"===L.type){const e=m.get(L.id);if(e){z({id:e,type:"node"})}}s=!0}s&&(e=>{e.preventDefault(),e.stopPropagation()})(e)}},onBlur:()=>{(null!=N||L.isCurrent)&&x?.({id:void 0,data:void 0});const e={...L,isCurrent:!1,isFocusVisible:!1};P(e)},onPointerUp:e=>{const t=Lo(e.target);if(null!=t.id){let n;if("node"===t.type&&(n=function(e,t){let n,o=e;for(;!n;)if(n=o.dataset.ojButton,!n){if(!o.parentElement||o.parentElement.dataset.ojPrivateNode||o.parentElement===t?.current)break;o=o.parentElement}return n}(e.target),n)){console.log("button");const t=Ao(n,g),o=[];return t.forEach((e=>{o.push(d.get(e))})),k&&k(t),console.log(t),e.preventDefault(),void e.stopPropagation()}console.log(t),console.log(e.target),P(t),C.current=h.getRandomId()}}})}}const hi=({captureTargetRef:e,numPointers:t=1,onPointerGestureDown:n,onPointerGestureMove:o,onPointerGestureEnd:i,onExtraneousPointerDown:r,isDisabled:d=!1})=>{const a=s.useRef([]);d&&(a.current=[]);const l=e=>{const n=a.current.findIndex((t=>t.pointerId===e.pointerId));-1!==n&&(a.current[n]=e,a.current.length===t&&i&&i({pointers:a.current}),a.current.splice(n,1))};return d?{}:{onPointerDown:e=>{a.current.push(e),a.current.length===t?n&&n({pointers:a.current}):a.current.length>t&&r&&r({pointers:a.current})},onPointerMove:n=>{if(0===a.current.length)return;const i=a.current.findIndex((e=>e.pointerId===n.pointerId));-1!==i&&(a.current[i]=n,a.current.length===t&&(a.current.forEach((t=>e.current.setPointerCapture(t.pointerId))),o&&o({pointers:a.current})))},onPointerUp:l,onPointerCancel:l,onPointerLeave:l}},pi=(e,t,n,o,i,s,r,d)=>{if(!r)return{newPan:{panX:0,panY:0}};const a=((e,t,n,o)=>{const i="y"!==o?t.panX:e.panX,s="x"!==o?t.panY:e.panY;return{panX:i>n.maxX?n.maxX:i<n.minX?n.minX:i,panY:s>n.maxY?n.maxY:s<n.minY?n.minY:s}})(e,t,r,n),l=a.panX!==e.panX||a.panY!==e.panY,c=function(e,t,n,o,i){return{centerX:(o/2-e)/n,centerY:(i/2-t)/n}}(a.panX,a.panY,o,i,s);return l&&d&&d({centerX:c.centerX,centerY:c.centerY}),{newPan:a}},fi=({panProps:e,captureTargetRef:t,panBounds:n,width:o,height:i,zoom:r,onDragPanStart:d,onDragPanEnd:a})=>{const l=s.useRef({panX:0,panY:0}),c=s.useRef({panX:0,panY:0}),u=(({captureTargetRef:e,draggableRegion:t,onDragStart:n,onDragMove:o,onDragEnd:i,isDisabled:r=!1})=>{const d={isDragging:!1,x0:-1,y0:-1,regionOffsetX:-1,regionOffsetY:-1},a=s.useRef(d),l=(e,t)=>{const{isDragging:n,x0:o,y0:i,regionOffsetX:s,regionOffsetY:r}=a.current;if(!n)return;const d=e.pageX,l=e.pageY;t&&t({x:d,y:l,dx:d-o,dy:l-i,regionOffsetX:s,regionOffsetY:r,originalEvent:e})},c=hi({captureTargetRef:e,numPointers:1,onExtraneousPointerDown:()=>{a.current=d},onPointerGestureDown:({pointers:[e]})=>{const o=e.pageX,i=e.pageY;if(0!==e.button||!((e,t,n)=>{if(!n)return!0;const{xMin:o,xMax:i,yMin:s,yMax:r}=n;return e>=o&&e<=i&&t>=s&&t<=r})(o,i,t))return;const{regionOffsetX:s,regionOffsetY:r}=((e,t,n)=>n?{regionOffsetX:e-n.xMin,regionOffsetY:t-n.yMin}:{regionOffsetX:e,regionOffsetY:t})(o,i,t);a.current={isDragging:!0,x0:o,y0:i,regionOffsetX:s,regionOffsetY:r},n&&n({x:o,y:i,regionOffsetX:s,regionOffsetY:r,originalEvent:e})},onPointerGestureMove:({pointers:[e]})=>{l(e,o)},onPointerGestureEnd:({pointers:[e]})=>{l(e,i),a.current=d}});return r?{}:c})({captureTargetRef:t,onDragStart:()=>{const t=vo(e.centerX,e.centerY,r,o,i);c.current={panX:t.panX,panY:t.panY},d&&d()},onDragMove:({dx:t,dy:s})=>{const d={panX:c.current.panX+t,panY:c.current.panY+s},{newPan:a}=pi(l.current,d,e.panDirection,r,o,i,n,e.onPan);l.current=a},onDragEnd:({originalEvent:e})=>{c.current.panX===l.current.panX&&c.current.panY===l.current.panY||e.preventDefault(),a&&a()},isDisabled:"off"===e.panning});return u},gi=(e,t,n,o,i)=>{const s=e>o||e<n?t:e;s!==t&&i&&i({zoomValue:s})},mi=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-t.y)**2),yi=({captureTargetRef:e,zooming:t,minZoom:n,maxZoom:o,zoomValue:i,onZoom:r})=>{const d=(({captureTargetRef:e,onPinchZoomStart:t,onPinchZoomChange:n,onPinchZoomEnd:o,isDisabled:i=!1})=>{const r=s.useRef({x:-1,y:-1}),d=s.useRef(-1),a=()=>{r.current={x:-1,y:-1},d.current=-1};i&&a();const l=hi({captureTargetRef:e,numPointers:2,onPointerGestureDown:({pointers:[e,n]})=>{const o={x:e.offsetX,y:e.offsetY},i={x:n.offsetX,y:n.offsetY};r.current=((e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2}))(o,i),d.current=mi(o,i),t&&t({origin:r.current,delta:0})},onPointerGestureMove:({pointers:[e,t]})=>{const o={x:e.offsetX,y:e.offsetY},i={x:t.offsetX,y:t.offsetY},s=mi(o,i),a=s-d.current;d.current=s,n&&n({origin:r.current,delta:a})},onPointerGestureEnd:()=>{a(),o&&o()}});return i?{}:l})({captureTargetRef:e,onPinchZoomChange:({delta:e})=>{gi(i*(1+.05*e),i,n,o,r)},isDisabled:"off"===t});return d},xi=({props:e,captureTargetRef:t,width:n,height:o,contentBounds:i,isRtl:r})=>{const[d,a]=s.useState(),l=function(e,t,n,o){const i=No(t,n,o),s=e.maxZoom||1,r=e.minZoom||Math.min(s,i),d=e.zoomValue?e.zoomValue:i;return{zooming:e.zooming?e.zooming:"off",minZoom:r,maxZoom:s,zoomValue:To(d,r,s),onZoom:e.onZoom}}(e,n,o,i),c=s.useRef(),u=s.useRef(),h=s.useRef(),p=s.useRef({zoom:e.zoomValue||0,centerX:e.centerX,centerY:e.centerY}),g=y.isTouch(),m={width:n,height:o,x:0,y:0},b=g?e.panning&&"off"!==e.panning:void 0,S={isZoomScroll:!0,plotAreaSpace:m,componentWidth:n,isRtl:r,showPanButton:b??!1,showZoomButton:!1,showSelectButton:!1,isDisabled:!g},{toggleButtonContent:k,userDragMode:w}=x.useVisDragModeControls(S),M=function(e,t,n,o){return{panning:o?"pan"===n&&e.panning?e.panning:"off":e.panning?e.panning:"off",panDirection:e.panDirection?e.panDirection:"any",centerX:void 0!==e.centerX?e.centerX:t.width/2+t.x,centerY:void 0!==e.centerY?e.centerY:t.height/2+t.y,onPan:e.onPan}}(e,i,w,g);i.width===1/0||l.zoomValue===u.current&&M.panning===h.current||(c.current=((e,t,n,o,i,s,r)=>{const{x:d,y:a,width:l,height:c}=n;let u,h,p,f;if("centerContent"===r)u=e/2-(l+d)*o,p=t/2-(c+a)*o,h=e/2-d*o,f=t/2-a*o;else{const n=o/i,s=(e-l*i)/2-d*i,r=(t-c*i)/2-a*i;u=e-e*n+s*n,p=t-t*n+r*n,h=s*n,f=r*n}const g=s.zoom,m=s.centerX,y=s.centerY;let x,b;if(m){const t=m*g-e/2;-t*g<u?(x=u-t*g,u-=x,h+=x):-t*g>h&&(x=-t*g-h,u-=x,h+=x)}if(y){const e=y*g-t/2;-e*g<p?(b=p-e*g,p-=b,f+=b):-e*g>f&&(b=-e*g-f,p-=b,f+=b)}return{minX:u,maxX:h,minY:p,maxY:f}})(n,o,i,l.zoomValue,l.minZoom,p.current,M.panning),u.current=l.zoomValue,h.current=M.panning);const v=fi({panProps:M,captureTargetRef:t,panBounds:c.current,zoom:l.zoomValue,width:n,height:o,onDragPanStart:()=>a("grabbing"),onDragPanEnd:()=>a("auto")}),I=s.useRef({panX:0,panY:0}),L=(({zooming:e,minZoom:t,maxZoom:n,zoomValue:o,onZoom:i})=>(({onWheel:e,preventDefault:t=!0,isDisabled:n=!1})=>n?{}:{onWheel:n=>{const{deltaX:o,deltaY:i}=(e=>{const{deltaX:t,deltaY:n,deltaMode:o}=e;switch(o){case e.DOM_DELTA_PIXEL:return{deltaX:-t,deltaY:-n};case e.DOM_DELTA_LINE:return{deltaX:15*-t,deltaY:15*-n};case e.DOM_DELTA_PAGE:return{deltaX:40*-t,deltaY:40*-n};default:return{deltaX:-t,deltaY:-n}}})(n);t&&n.preventDefault(),e({x:n.offsetX,y:n.offsetY,deltaX:o,deltaY:i,ctrlKey:n.ctrlKey||n.metaKey})}})({onWheel:({deltaY:e})=>{gi(o*(1+.05*e),o,t,n,i)},isDisabled:"off"===e}))(l),P=yi({captureTargetRef:t,zooming:l.zooming,minZoom:l.minZoom,maxZoom:l.maxZoom,zoomValue:l.zoomValue,onZoom:l.onZoom});return{panZoomProps:f.mergeProps(v,L,P),panProps:M,zoomProps:l,toggleButtonContent:k,cursor:d,centerX:M.centerX,centerY:M.centerY,zoomValue:l.zoomValue,kbPanCallback:"off"!==M.panning?e=>{let t,s;e.center?(t=i.x+i.width/2,s=i.y+i.height/2):e.dPan?(t=M.centerX+e.dPan.dx,s=M.centerY+e.dPan.dy):(t=e.nPan.cx,s=e.nPan.cy);const r=vo(t,s,l.zoomValue,n,o),{newPan:d}=pi(I.current,r,M.panDirection,l.zoomValue,n,o,c.current,M.onPan);I.current=d}:void 0,kbZoomCallback:"off"!==l.zooming?e=>{const t=e.dZoom?l.zoomValue+e.dZoom:No(n,o,i);gi(e.nZoom?e.nZoom:t,l.zoomValue,l.minZoom,l.maxZoom,l.onZoom)}:void 0}};function bi({nodes:e=[],links:n=[],width:i,height:r,selectedIds:d={},selectionMode:a="none",layout:c,nodeRenderer:u,linkRenderer:p,onSelectionChange:y,onItemHover:x,onItemFocus:M,highlightedIds:v={},datatip:I,expanded:L=[],onExpandedChange:P,contextMenuConfig:N,...T}){const C=s.useRef(null),D=s.useRef(null),[R,B]=s.useState(new Map),z=s.useRef(new Map),E=s.useRef(new Map),[A,F]=s.useState(),{direction:U}=l.useUser(),_="rtl"===U,X=e,Y=function(e){const t=new Map,n=new Map,o=new Map,i=new Map;for(let s=0;s<e.length;s++){const r=e[s],d=String(s);t.set(r.id,r),n.set(r.id,d),o.set(d,r.id),r.children&&bo(r.children,t,n,o,i,r.id,String(s))}return{itemIdToDataMap:t,itemIdToIndexMap:n,itemIndexToIdMap:o,itemIdToParentMap:i}}(X),j=Y.itemIdToParentMap,O=Y.itemIdToDataMap,V=function(e,t){const n=[];for(let o=0;o<e.length;o++){const i=e[o];t.get(i.startNode)&&t.get(i.endNode)&&n.push(i)}return n}(n,O),Z=function(e){const t=new Map,n=new Map,o=new Map,i=new Map;for(let i=0;i<e.length;i++){const s=e[i];t.set(s.id,s),n.set(s.id,i),o.set(i,s.id)}return{itemIdToDataMap:t,itemIdToIndexMap:n,itemIndexToIdMap:o,itemIdToParentMap:i}}(V),W=Z.itemIdToDataMap,$=s.useRef(!1),K=function(e){const t=new Map;return e.forEach(((e,n)=>{t.set(n,{width:e.width,height:e.height})})),t}(R),{textMeasureContent:q,getTextDimensions:G}=m.useTextDimensions(),H=s.useRef(new Map),J=s.useRef(!1),Q=s.useRef(new Map),ee=s.useRef(new Map),[te,ne]=s.useState(),oe=s.useRef(new Map),{promotedLinks:ie,promotedToLinkMap:se}=function(e,t,n){const o=[],i=new Map,s=new Map;for(let r=0;r<t.length;r++){const d=t[r],a=d.id;if(!Fo(d,e,n))continue;const l=Uo(d.startNode,e,n),c=Uo(d.endNode,e,n),u=`${l}_${c}`;let h=s.get(u);if(h)h.push(d);else{const e={id:u,startNode:l,endNode:c};o.push(e),h=[d]}s.set(u,h),i.set(a,u)}return{promotedLinks:o,linkToPromotedMap:i,promotedToLinkMap:s}}(j,n,L),re=function(e){const t=new Map,n=new Map,o=new Map,i=new Map;for(let i=0;i<e.length;i++){const s=e[i];t.set(s.id,s),n.set(s.id,i),o.set(i,s.id)}return{itemIdToDataMap:t,itemIdToIndexMap:n,itemIndexToIdMap:o,itemIdToParentMap:i}}(ie),de=function(e,t){if(0===e.size)return{x:0,width:1/0,y:0,height:1/0};let n,o=1/0,i=1/0,s=-1/0,r=-1/0;return e.forEach((e=>{n=e,o=n.x<o?n.x:o,i=n.y<i?n.y:i,s=n.x+n.width>s?n.x+n.width:s,r=n.y+n.height>r?n.y+n.height:r})),t&&(o=t.x<o?t.x:o,i=t.y<i?t.y:i,s=t.x+t.width>s?t.x+t.width:s,r=t.y+t.height>r?t.y+t.height:r),{x:o,width:s-o,y:i,height:r-i}}(R,A),{panZoomProps:ae,panProps:le,zoomProps:ce,toggleButtonContent:ue,cursor:he,centerX:pe,centerY:fe,zoomValue:ge,kbPanCallback:me,kbZoomCallback:ye}=xi({props:T,captureTargetRef:D,width:i,height:r,contentBounds:de,isRtl:_}),{touchResponse:xe,touchResponseStyle:be}=S.useVisTouchResponse({type:"auto",supportsTouchDragGestures:"on"===ce.zooming||"off"!==le.panning,rootRef:D}),{onContextMenuDismissed:Se,focusedItemInfo:ke,hoveredItemInfo:we,activeId:Me,eventsProps:ve}=ui(xe,X[0],X,V,R,W,O,re.itemIdToDataMap,i,r,T.maxZoom||1,L,j,x,M,me,ye,P),{selectionProps:Ie,selectionContent:Le}=function({selectedIds:e,selectionMode:t,nodeMap:n,linkMap:o,promotedLinkMap:i,focusedItemInfo:s,onSelectionChange:r,rootRef:d}){const a=n.itemIdToIndexMap,l=n.itemIndexToIdMap,c=n.itemIdToDataMap,u=o.itemIdToIndexMap,h=o.itemIndexToIdMap,p=o.itemIdToDataMap,f=i.itemIdToIndexMap,g=i.itemIndexToIdMap,m=i.itemIdToDataMap,y=e=>`N_${a.get(e)}`,x=e=>l.get(e.slice(2)),S=e=>`L_${u.get(e)}`,k=e=>h.get(Number(e.slice(2))),w=e=>`P_${f.get(e)}`,M=e=>g.get(Number(e.slice(2))),v=[...e.nodes?e.nodes.map(y):[],...e.links?e.links.map(S):[],...e.promotedLinks?e.promotedLinks.map(w):[]],{selectionContent:I,selectionProps:L}=b.useSelection({selection:v,idExtracter:e=>{const t="keyup"===e.type?s:Lo(e.target,d);return void 0!==t.id?"node"===t.type?y(t.id):"link"===t.type?S(t.id):w(t.id):void 0},selectionMode:t,getDataById:e=>{let t;if("N"===e[0]){const o=x(e);t=n.itemIdToDataMap.get(o)}else if("L"===e[0]){const n=k(e);t=o.itemIdToDataMap.get(n)}else if("P"===e[0]){const n=M(e);t=i.itemIdToDataMap.get(n)}return t},onChange:e=>{const t=e.ids.filter((e=>"N"===e[0])).map((e=>x(e))),n=e.ids.filter((e=>"L"===e[0])).map((e=>k(e))),o=e.ids.filter((e=>"P"===e[0])).map((e=>M(e))),i=t.filter((e=>"off"!==c.get(e)?.selectable)),s=n.filter((e=>"off"!==p.get(e)?.selectable)),d=i.map((e=>c.get(e))),a=s.map((e=>p.get(e))),l=o.map((e=>m.get(e)));return r&&r({nodes:i,links:s,promotedLinks:o,nodeData:d,linkData:a,promotedLinkData:l})}});return{selectionContent:I,selectionProps:L}}({selectedIds:d,selectionMode:a,nodeMap:Y,linkMap:Z,promotedLinkMap:re,focusedItemInfo:ke,onSelectionChange:y,rootRef:D});ke&&R.size>0&&(C.current=function(e,t,n,o,i){if("node"===e.type){const n=go(e.id,void 0,i),o=t.get(e.id)||t.values().next().value;return{x:n?n.x:o.x,y:n?n.y:o.y,width:o.width,height:o.height}}{const s=n[o.get(e.id)||0],r=t.get(s.startNode)||t.values().next().value,d=t.get(s.endNode)||t.values().next().value,a=go(s.startNode,void 0,i),l=go(s.endNode,void 0,i),c={x:a.x+r.width/2,y:a.y+r.height/2},u={x:l.x+d.width/2,y:l.y+d.height/2};return{x:Math.min(c.x,u.x),y:Math.min(c.y,u.y),width:Math.abs(c.x-u.x),height:Math.abs(c.y-u.y)}}}(ke,R,V,Z.itemIdToIndexMap,D));const{datatipContent:Pe,datatipProps:{"aria-describedby":Ne,...Te}}=(({touchResponse:e,datatip:t,focusedItemBoundsRef:n,focusedItemInfo:o,panState:i,zoom:s,width:r,nodesMap:d,linksMap:a,hoveredItem:c})=>{const{direction:u}=l.useUser(),p="rtl"===u,f=function(e,t,n,o,i){let s;const r=o?.isCurrent;if(r&&null!=o.id&&(s=o),n&&n.isCurrent&&(s=n),s&&i)return i("node"===s.type?{data:e.get(s.id),type:"node"}:{data:t.get(s.id),type:"link"});if(s){const n=("node"===s.type?e.get(s.id):t.get(s.id))?.accessibleLabel;return{content:n}}}(d,a,o,c,t),m=n.current?{x:n.current.x*s+i.panX,y:n.current.y*s+i.panY,width:n.current.width*s,height:n.current.height*s}:void 0,y=o.isCurrent?h.calculateOffset(p,r,m):h.calculateOffset(p,r),{datatipContent:x,datatipProps:b}=g.useDatatip({content:f?.content,borderColor:f?.borderColor,placement:"top-start",offset:y,anchor:o?.isCurrent?"element":"pointer",touchResponse:e});return{datatipContent:x,datatipProps:b}})({touchResponse:xe,datatip:I,focusedItemInfo:ke,focusedItemBoundsRef:C,panState:vo(pe,fe,ge,i,r),zoom:ge,width:i,nodesMap:O,linksMap:W,hoveredItem:we}),[Ce,De]=s.useState("hidden"),Re={width:i,height:r,cursor:he,visibility:Ce,...be},Be=s.useRef(),ze=Be.current?Be.current:{selectedNodeIds:[],selectedLinkIds:[],selectedPromotedLinkIds:[],focusedId:void 0,hoveredId:void 0,activeId:void 0,highlightedNodeIds:[],highlightedLinkIds:[],highlightedPromotedLinkIds:[],zoom:0,expanded:[]};Be.current={selectedNodeIds:d.nodes??[],selectedLinkIds:d.links??[],selectedPromotedLinkIds:d.promotedLinks??[],focusedId:ke.isCurrent&&ke.isFocusVisible?ke.id:void 0,hoveredId:we?.isCurrent?we.id:void 0,activeId:Me,highlightedNodeIds:v.nodes??[],highlightedLinkIds:v.links??[],highlightedPromotedLinkIds:v.promotedLinks??[],zoom:ge,expanded:L||[]};const{contextMenuContent:Ee,contextMenuProps:Ae}=(({focusedItemInfo:e,rootRef:t,contextMenuConfig:n,onContextMenuDismissed:o,nodesMap:i,linksMap:s})=>{const{contextMenuProps:r,contextMenuContent:d}=w.useContextMenu({onContextMenuHandler:({gesture:n,target:o})=>{let r,d="background";const a=o;"keyboard"===n?(r=e.id,"node"===e.type?d="node":void 0!==r&&(d="link")):a.closest("[data-oj-private-node]")?.dataset.ojPrivateNode?(r=a.closest("[data-oj-private-node]")?.dataset.ojPrivateNode,d="node"):a.closest("[data-oj-private-link]")?.dataset.ojPrivateLink&&(r=a.closest("[data-oj-private-link]")?.dataset.ojPrivateLink,d="link");const{context:l}=function(e,t,n,o){let i;return i="node"===n?{data:e.get(o),type:n}:"link"===n?{data:t.get(o),type:n}:{type:"background"},{context:i}}(i,s,d,r);if("keyboard"===n){let n;return n="node"===e.type?t.current?.querySelector(`[data-oj-private-node="${r}"]`):t.current?.querySelector(`[data-oj-private-link="${r}"]`),{type:"element",context:l,elem:n||null}}return{type:"pointer",context:l}},contextMenuOptions:{isDisabled:!n},rootRef:t,contextMenuConfig:n,onContextMenuDismissed:o});return{contextMenuContent:d,contextMenuProps:r}})({focusedItemInfo:ke,rootRef:D,contextMenuConfig:e.length>0?N:void 0,onContextMenuDismissed:Se,nodesMap:O,linksMap:W}),Fe=f.mergeProps(ae,ve,Ie,Te,Ae);return t.jsxs("div",{ref:D,class:o.outerStyles,...Fe,style:Re,tabIndex:0,role:"application","aria-label":T["aria-label"],"aria-labelledby":T["aria-labelledby"],"aria-describedby":k.l([T["aria-describedby"],Ne]),"aria-activedescendant":Me,children:[G?t.jsx(Go,{centerX:pe,centerY:fe,zoom:ge,width:i,height:r,children:t.jsx(qo,{nodes:X,links:V,zoom:ge,nodeRenderer:u,linkRenderer:p,width:i,height:r,nodeBounds:R,linkDimensions:z.current,promotedLinkDimensions:E.current,states:Be.current,previousStates:ze,onNodeSizeChanged:(e,t,n)=>{K.set(n,{width:e,height:t}),$.current||($.current=!0,window.requestAnimationFrame((()=>{const{labelDims:e,layoutJSON:t}=uo(O,W,ie,K,i,r,R,ge,j,oe.current,D,G);H.current=e;const n=c(t),{nodePoints:o,nodeLabelPos:s,linkLabelPos:d}=yo(n,X,V);Q.current=s,ee.current=d;const a=function(e,t){const n=new Map;return e.forEach(((e,o)=>{const i=t.get(o);i&&n.set(o,{x:i.x,y:i.y,width:e.width,height:e.height})})),n}(K,o),l=So(e,s,"rtl"===U),u=function(e,t){if(e.size!==t.size)return!1;let n=!0;return e.forEach(((e,o)=>{const i=t.get(o);i?(Math.abs(e.x-i.x)>.5||Math.abs(e.y-i.y)>.5||Math.abs(e.width-i.width)>.5||Math.abs(e.height-i.height)>.5)&&(n=!1):n=!1})),n}(a,R);var h,p;!u||J.current||A&&l&&(p=l,(h=A).x!==p.x||h.y!==p.y||h.width!==p.width||h.height!==p.height)?(B(a),F(l),ne(n),J.current=!1,De("hidden")):"hidden"==Ce&&De("visible"),$.current=!1})))},onLinkSizeChanged:(e,t,n)=>{const o=z.current.get(n);(!o||o&&(Math.abs(e-o.width)>.5||Math.abs(t-o.height)>.5))&&(z.current.set(n,{width:e,height:t}),J.current=!0)},onPromotedLinkSizeChanged:(e,t,n)=>{const o=E.current.get(n);(!o||o&&(Math.abs(e-o.width)>.5||Math.abs(t-o.height)>.5))&&(E.current.set(n,{width:e,height:t}),J.current=!0)},nodeLabelPositions:Q.current,linkLabelPositions:ee.current,labelDimensions:H.current,supportsSelection:"none"!==a||!!(d?.nodes&&d.nodes.length>0)||!!(d?.links&&d.links.length>0),layoutOutput:te,nodeIdToParentMap:j,rootRef:D,combinedNodeBounds:de,nodeBoundsRef:oe,promotedLinks:ie,promotedToLinkMap:se})}):void 0,q,Pe,Ee,Le,ue]})}e.ContainerDiagram=function({width:e,height:i,...s}){return s.nodes&&s.nodes.length>0?t.jsx(n.TrackResizeContainer,{width:e,height:i,class:o.dimensionStyle,children:(e,n)=>t.jsx(bi,{width:e,height:n,...s})}):null},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=PRIVATE_ContainerDiagram.js.map
