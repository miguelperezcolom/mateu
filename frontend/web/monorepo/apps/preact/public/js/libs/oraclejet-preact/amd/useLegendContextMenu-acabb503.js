define(['exports', 'preact/jsx-runtime', './classNames-08d99695', 'preact/compat', './PRIVATE_BaseLegend/themes/LegendStyles.css', './useLegendDnd-daee983e', './SvgSymbol-b672024f', './Text-9e32c423', 'preact/hooks', './useUser-988f7da2', './datatipUtils-6846028e', './useDatatip-36aa820b', './useContextMenu-4bd1c23a', './Menu-45a26116', './MenuItem-ff1cd14d', 'preact', './logger-0f873e29', './LayerHost-7d4aa6d3', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3c8a0253', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Menu/themes/MenuItemStyles.css', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', 'css!./MenuStyles.styles.css'], (function(e,t,n,o,i,s,r,l,a,d,c,u,m,h,x,g,y,p,S,C,f,I,b,M,v,F,T,k,A,R){"use strict";function w(e){const{imageMarkerStyle:n}=i.styles;return t.jsx("img",{class:n,src:e.source,role:"none"})}const L=({markerColor:e="#a6acb1",lineColor:n="#a6acb1",markerShape:o="square",isHidden:s=!1,lineStyle:l="none",...a})=>{const{legendSymbolBaseStyle:d}=i.styles,c=!(null==a.width&&null==a.height)&&("rectangle"===o||"ellipse"===o),u="none"!=l&&"none"!=o?2:3;return t.jsx("div",{className:d,style:{width:a.width,height:a.height},children:a.source?t.jsx(w,{source:a.source}):t.jsx(r.SvgSymbol,{setAspectRatioNone:c,markerShape:s?"square":o,lineStyle:s?"none":l,lineColor:n,lineLength:a.lineLength,lineWidth:null!=a.lineWidth?a.lineWidth:u,markerColor:s?"transparent":e,borderColor:s?e||n:a.borderColor,setAbsolutePos:!0})})},W=({text:e,type:o="label",id:s,align:r="start",...a})=>{const{legendTextBaseStyle:d,legendTextTitle:c,legendTitleStartAlign:u,legendTitleCenterAlign:m,legendTitleEndAlign:h}=i.styles,x="title"===o;return t.jsx("div",{class:n.classNames([d,x?c:"",x&&"start"===r?u:"",x&&"center"===r?m:"",x&&"end"===r?h:""]),style:{...a},children:t.jsx(l.Text,{size:"inherit",variant:"inherit",weight:"inherit",truncation:"ellipsis",id:s,children:e})})},D=o.forwardRef((({id:e,text:o,sectionIdx:r,itemIdx:l,itemId:a,isHighlighted:d,symbolHeight:c,symbolWidth:u,isFocused:m,isCurrent:h,isHidden:x,actionable:g="inherit",hoverBehavior:y="none",hideAndShowBehavior:p="off",...S},C)=>{const f={fontFamily:S.textFontFamily,fontSize:S.textFontSize,color:S.textColor,fontStyle:S.textFontStyle,fontWeight:S.textFontWeight,textDecoration:S.textTextDecoration},I={lineStyle:S.lineStyle,lineWidth:S.lineWidth,markerShape:S.markerShape,markerColor:S.markerColor,source:S.source,borderColor:S.borderColor,lineColor:S.lineColor},b=d||null==d,{legendItemBaseStyle:M,legendItemOpacity:v,legendItemFocusRing:F}=i.styles;return t.jsxs("div",{class:n.classNames([M,s.getLegendCurrentItemStyle(h,d,p,y,x,g),b?"":v,m?F:"",S.class]),style:{gridRow:S.gridRow,gridColumn:S.gridCol,minWidth:void 0!==S.minWidth?`${S.minWidth}px`:void 0},id:e,ref:C,"data-oj-private-section":r,"data-oj-private-item":l,"data-oj-private-item-id":a,role:null!=x?"menuitemcheckbox":"img","aria-checked":null!=x?!x:void 0,"aria-label":S["aria-label"]||o,children:[t.jsx(L,{...I,isHidden:x,lineLength:u,width:null!=u?`${u}px`:void 0,height:null!=c?`${c}px`:void 0}),t.jsx(W,{...f,text:o,type:"label"})]})})),P=(e,t,n,o)=>{let i=0,s=c.DATATIP_OFFSET;if(e.current&&n.isCurrent&&t.current){const n=t.current,r=e.current.getBoundingClientRect();i=r.x+r.width/2-(n.x+n.width/2),i=o?-1*i:i,s+=n.y-r.y,s=Math.min(c.DATATIP_OFFSET,Math.max(s,r.height-n.height+c.DATATIP_OFFSET))}return{crossAxis:i,mainAxis:s}};e.BaseLegend=({orientation:e="horizontal",highlightedIds:o,hiddenIds:r,focusedItemInfo:l,hoveredItemInfo:a,sectionIdx:d,activeId:c,isReadOnly:u,items:m,symbolHeight:h,symbolWidth:x,hideAndShowBehavior:g="off",hoverBehavior:y="none",isTestEnv:p,...S})=>{const C="horizontal"===e,f=C?`repeat(${S.itemsPerRow}, ${S.itemWidth})`:void 0,{baseLegendStyles:I,baseLegendHorizontal:b,baseLegendVertical:M,baseLegendVerticalItem:v,baseLegendPaddingBottom:F,baseLegendPaddingTop:T,baseLegendPaddingEnd:k}=i.styles;return t.jsx("div",{className:n.classNames([I,C?b:M]),style:{gridTemplateColumns:f,maxWidth:"100%"},children:m.map(((e,i)=>{const{markerColor:f,markerShape:I,source:b,borderColor:M,lineColor:A,isCurrent:R,isFocused:w,isHidden:L,isHighlighted:W,key:P,actionable:j,text:B,lineStyle:H,lineWidth:E}=s.getItemProps(e,i,d,l,u,a,r,o),N=l.sectionIdx===d&&l.itemIdx===i,{gridRow:U,gridCol:_}=s.getGridCellIndices(m.length,i,S.itemsPerRow,S.itemsPerCol),O=null!=U&&U!=S.itemsPerCol,z=null!=U&&1!=U;return t.jsx(D,{ref:N?S.focusedItemRef:void 0,text:B,itemIdx:i,sectionIdx:d,itemId:p?e.id:void 0,symbolHeight:h,symbolWidth:x,markerColor:f,markerShape:I,lineStyle:H,lineWidth:E,source:b,borderColor:M,"aria-label":e["aria-label"],lineColor:A,isCurrent:R,isFocused:w,isHidden:L,isHighlighted:W,gridRow:U,gridCol:_,minWidth:S.itemWidth,id:R?c:"",textColor:S.textColor,textFontFamily:S.textFontFamily,textFontSize:S.textFontSize,textFontStyle:S.textFontStyle,textFontWeight:S.textFontWeight,textTextDecoration:S.textTextDecoration,class:n.classNames([C?"":v,z?T:"",O?F:"",k]),hideAndShowBehavior:g,hoverBehavior:y,actionable:j},P)}))})},e.LegendText=W,e.useLegendContextMenu=({rootRef:e,contextMenuConfig:t,focusedItemInfo:n,items:o,isReadOnly:i,onContextMenuDismissed:r})=>{const{contextMenuProps:l,contextMenuContent:a}=m.useContextMenu({onContextMenuHandler:({gesture:t,target:i})=>{if("keyboard"===t){const t=n.itemIdx,i=e.current?.querySelector(`[data-oj-private-item="${t}"]`)||null;return{type:"element",context:{type:"item",data:o[t]},elem:i}}const r=s.getItemInfo(i)?.itemIdx,l=void 0!==r?o[r]:null;return{type:"pointer",context:l?{type:"item",data:l}:{type:"background"}}},contextMenuOptions:{isDisabled:!t||i},rootRef:e,contextMenuConfig:t,onContextMenuDismissed:r});return{contextMenuContent:a,contextMenuProps:l}},e.useLegendDatatip=({text:e,rootDimsRef:t,focusedItemRef:n,focusedItemInfo:o,touchResponse:i,isDisabled:s})=>{const{direction:r}=d.useUser(),l="rtl"===r,[c,m]=a.useState(P(n,t,o,l));a.useLayoutEffect((()=>{m(P(n,t,o,l))}),[o,n,l,t]);const h=o?.isCurrent?"element":"pointer";return u.useDatatip({content:e,placement:"top",anchor:h,offset:c,touchResponse:i,isDisabled:s})},e.useSectionalLegendContextMenu=({rootRef:e,contextMenuConfig:t,focusedItemInfo:n,sections:o,isReadOnly:i,onContextMenuDismissed:r})=>{const{contextMenuProps:l,contextMenuContent:a}=m.useContextMenu({onContextMenuHandler:({gesture:t,target:i})=>{if("keyboard"===t){const t=n.itemIdx,i=n.sectionIdx,s=o[i]?.items[t];if(s){return{type:"element",context:{type:"item",itemIndexPath:[i,t],data:s},elem:e.current?.querySelector(`[data-oj-private-item="${t}"][data-oj-private-section="${i}"]`)||null}}}const r=s.getItemInfo(i)?.itemIdx,l=s.getItemInfo(i)?.sectionIdx,a=void 0!==l&&void 0!==r?o[l]?.items[r]:null;return{type:"pointer",context:a?{type:"item",data:a,itemIndexPath:[l,r]}:{type:"background"}}},contextMenuOptions:{isDisabled:!t||i},rootRef:e,contextMenuConfig:t,onContextMenuDismissed:r});return{contextMenuContent:a,contextMenuProps:l}}}));
//# sourceMappingURL=useLegendContextMenu-acabb503.js.map
