{"version":3,"file":"useVisDrill-b08ba7e5.js","sources":["../../src/hooks/PRIVATE_useVisDrill/useVisDrill.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useCallback } from 'preact/hooks';\nimport { useDoubleTap } from '#hooks/UNSAFE_useDoubleTap';\nimport { cancelEvent } from '#utils/UNSAFE_visUtils';\nimport { isMobile } from '#utils/UNSAFE_clientUtils';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\n\n/**\n * Returns the event handlers for drill gestures.\n */\nexport function useVisDrill(\n  selectionMode: 'none' | 'single' | 'multiple',\n  onDrill: (event: Event) => void,\n  isDisabled = false\n) {\n  const onPointerUp = useCallback(\n    (event: PointerEvent) => {\n      if (selectionMode === 'none') {\n        onDrill(event);\n      }\n    },\n    [selectionMode, onDrill]\n  );\n\n  const onDoubleTap = useCallback(\n    (event: Event) => {\n      if (selectionMode !== 'none') {\n        onDrill(event);\n      }\n    },\n    [selectionMode, onDrill]\n  );\n\n  // The thresholds values are from Toolkit.\n  // See DvtEventManager._onClick for double click detection timing,\n  // and in DvtTouchManager, there's a comment above this._doubleTapTimer that says:\n  // \"We are using 600 ms because 300ms is too fast in VoiceOver mode to recognize the second tap.\"\n  const doubleTapHandlers = useDoubleTap({ onDoubleTap, threshold: isMobile() ? 600 : 250 });\n\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onDrill(event);\n        cancelEvent(event);\n      }\n    },\n    [onDrill]\n  );\n\n  return isDisabled ? {} : mergeProps(doubleTapHandlers, { onPointerUp, onKeyDown });\n}\n"],"names":["selectionMode","onDrill","isDisabled","onPointerUp","useCallback","event","onDoubleTap","doubleTapHandlers","useDoubleTap","threshold","isMobile","onKeyDown","key","cancelEvent","mergeProps"],"mappings":"gNAiBM,SACJA,EACAC,EACAC,GAAa,GAEb,MAAMC,EAAcC,eACjBC,IACuB,SAAlBL,GACFC,EAAQI,EACT,GAEH,CAACL,EAAeC,IAGZK,EAAcF,eACjBC,IACuB,SAAlBL,GACFC,EAAQI,EACT,GAEH,CAACL,EAAeC,IAOZM,EAAoBC,eAAa,CAAEF,cAAaG,UAAWC,EAAAA,WAAa,IAAM,MAE9EC,EAAYP,eACfC,IACmB,UAAdA,EAAMO,MACRX,EAAQI,GACRQ,EAAWA,YAACR,GACb,GAEH,CAACJ,IAGH,OAAOC,EAAa,CAAA,EAAKY,EAAUA,WAACP,EAAmB,CAAEJ,cAAaQ,aACxE"}