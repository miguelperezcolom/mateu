define(['exports', 'preact', 'preact/hooks', '../useResizeObserver-25032462', '../useAddBusyState-8ed5cc58', '../BusyStateContext-ab2c549a', '../useBusyStateContext-26bb2acb', '../unsafeDomAccess-602c5dde'], (function(e,t,n,u,r,l,c,s){"use strict";e.useTableViewColumnResizing=function({columnOrder:e,columnWidths:r,onColumnWidthsChanging:l,onColumnWidthsChange:c,applyWidths:s="onResizing",minColumnWidth:a=16,resizeBehavior:o="redistribute"}){const i=n.useRef(r);i.current=r;const[d,h]=n.useState(),m=n.useRef(),C=n.useRef({}),[b,f]=n.useState({}),k={},y=[];if(null!=r){const e=Object.keys(r);for(const t of e)k[t]=r[t],y.push(t)}const W=Object.keys(b);for(const e of W)y.includes(e)||(k[e]=b[e]);const R=n.useRef(0),x=n.useCallback((e=>{const t=Object.keys(e),n={};for(const u of t)n[u]=e[u];return n}),[]),p=n.useCallback((t=>{null==m.current&&(m.current=t.allColumnWidths);const n=x(null!=i.current?i.current:{}),u=t.key,r=e[e.indexOf(u)+1],c=m.current[u],s=m.current[r],o=Math.min(Math.max(c+t.delta,a),c+s-a);n[u]=o;const d=s+c-o;n[r]=d,null!=l&&l(n),i.current=n,h({key:u,delta:0})}),[l,a,e,x]),z=n.useCallback((t=>{const n=t.key,u=e[e.indexOf(n)+1],r=t.allColumnWidths[n],l=t.allColumnWidths[u],c=Math.min(Math.max(r+t.delta,a),r+l-a);h({key:n,delta:c-r})}),[e,a]),M=n.useCallback((t=>{const n=null!=m.current?m.current:t.allColumnWidths,u=x(null!=i.current?i.current:{}),r=t.key,l=n[r];let s;if("absolute"===t.type)s=Math.max(t.newWidth,a),u[r]=s;else{const c=e[e.indexOf(r)+1],o=n[c];s=Math.min(Math.max(l+t.delta,a),l+o-a);const i=o+l-s;u[c]=i}u[r]=s,null!=c&&c(u),i.current=u,m.current=void 0,h(void 0)}),[c,a,e,x]),g=n.useCallback((e=>{R.current=e.paddingWidth,null==m.current&&(m.current=e.allColumnWidths);const t=x(null!=m.current?m.current:e.allColumnWidths),n=x(null!=i.current?i.current:{}),u=e.key,r=m.current[u],c=Math.max(r+e.delta,a);n[u]=c,t[u]=c,null!=l&&l(n),f(t),C.current=t,h({key:u,delta:0})}),[l,a,x]),O=n.useCallback((e=>{R.current=e.paddingWidth;const t=e.key,n=e.allColumnWidths[t],u=Math.max(n+e.delta,a);h({key:t,delta:u-n})}),[a]),v=n.useCallback((e=>{R.current=e.paddingWidth;const t=null!=m.current?m.current:e.allColumnWidths,n=x(null!=m.current?m.current:"absolute"===e.type?null!=i.current?i.current:{}:e.allColumnWidths),u=x(null!=i.current?i.current:{}),r=e.key,l=t[r],s="delta"===e.type?Math.max(l+e.delta,a):Math.max(e.newWidth,a);u[r]=s,n[r]=s,null!=c&&c(u),f(n),C.current=n,m.current=void 0,h(void 0)}),[c,a,x]),S="onResize"===s?"add"===o?O:z:"add"===o?g:p,j=n.useRef(),[B,w]=n.useState(t.createRef()),A=n.useCallback((e=>{w({current:e})}),[]);return u.useResizeObserver(B,n.useCallback((e=>{const t=e.contentBoxSize[0].inlineSize;if(null==j.current||j.current!==t){j.current=t;let e=0;const n=Object.keys(C.current);for(const t of n)e+=C.current[t];t>=e+R.current&&(f({}),C.current={})}}),[]),{isDisabled:"redistribute"===o}),{columnResizingProps:{onColumnResizing:S,onColumnResize:"add"===o?v:M,columnResizingIndicator:d,columnWidths:k,scrollerRef:A}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_useTableViewColumnResizing.js.map
