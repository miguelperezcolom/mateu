define(['exports', './useDatatip-36aa820b', './layoutUtils-641af87a', 'preact/jsx-runtime', './VisTabularDatatip-ab3b0b91', './accUtils-acd70e81', './colorUtils-7aaca9f1', './useUser-988f7da2'], (function(e,t,a,s,r,i,o,l){"use strict";function n(e,t,a,s,r,i,o,l,n){let u,d,p,c;const x=s.chart_labelSeries(),h=s.chart_labelGroup(),m=s.chart_labelValue(),f=s.chart_labelX(),g=s.chart_labelY(),y=s.chart_labelWidthWeight();if(n&&"y"in e){const t=e.x;d=r?.x?.format?r?.x?.format(t):o?.(t);const a=e.y;p=r?.y?.format?r?.y?.format(a):l?.(a)}else if("value"in e&&void 0!==e.value){const t=e.value;u=r?.value?.format?r?.value?.format?.(t):l?.(t)}if("widthWeight"in e&&void 0!==e.widthWeight){const t=e.widthWeight;c=r?.widthWeight?.format?r?.widthWeight?.format?.(t):l?.(t)}const b=[];if(0!=r?.series?.isDisplayed&&b.push({key:r?.series?.label||x,value:t}),0!=r?.group?.isDisplayed){const e=Array.isArray(r?.group?.label);if(i){const t=Array.isArray(a)?a[0]:a;b.push({key:(e?r?.group?.label?.[0]:r?.group?.label)||"Date",value:o?o?.(new Date(t).getTime()):t})}else{const t=e?r?.group?.label:[r?.group?.label||h];(Array.isArray(a)?a:[a]).forEach(((e,a)=>{b.push({key:t[a],value:e})}))}}return 0!=r?.value?.isDisplayed&&(n?(b.push({key:r?.value?.label||f,value:d}),b.push({key:r?.value?.label||g,value:p})):b.push({key:r?.value?.label||m,value:u})),0!=r?.widthWeight?.isDisplayed&&c&&b.push({key:r?.widthWeight?.label||y,value:c}),b}e.getAriaLabelGenerator=function(e,t,a,s,r,o,l,u,d,p){return(c,x,h,m,f,g)=>{let y=c.accessibleLabel;if(!y){const i=e[x],m="y2"===i.associatedYAxis,f=l(s[h].path),g="mixedFrequency"===r?.timeAxisType?c.x:"enabled"===r?.timeAxisType?f:void 0;y=n(c,i.name||i.id.toString(),g||f,t,a,null!=r?.timeAxisType,u,m?p:d,o).map((({key:e,value:t})=>`${e?e+":":""} ${t}`)).join(", ")}return i.generateAriaLabel(t,y,{isSelected:m?f:void 0,isDrillable:g})}},e.useChartDatatip=({isDataCursorEnabled:e,dataCursorPosition:i,isHoriz:u,datatip:d,xScale:p,getDataItem:c,getDataItemPos:x,hoveredItemInfo:h,focusedItemInfo:m,series:f,valueFormats:g,leafGroupsInfo:y,width:b,height:v,findNearest:I,timeAxisType:A,touchResponse:D,isDisabled:C,defaultXFormatter:F,defaultYFormatter:T,defaultY2Formatter:Y,hasXYValues:k,translations:w,getGroupFromPath:W})=>{let X=y.length>0&&f.length>0?C?void 0:m?.isCurrent?m:h?.isCurrent&&void 0!==h.seriesIndex&&void 0!==h.groupIndex?h:void 0:void 0;const P=m?.isCurrent||e?"element":"pointer",V=m?.isCurrent?x(m.seriesIndex,m.groupIndex):void 0,{direction:_}=l.useUser(),G="rtl"===_;let S,U,j="top-start",L=a.calculateOffset(G,b,V);if(e&&null!=i?.x&&(null!=i?.y||null!=i?.y2)){const e=I(i.x,i.y,i.y2);X=X||e;const t=p.transform(i.x);L={mainAxis:-1,crossAxis:-1},u?(j="end",L.mainAxis=-10,L.crossAxis=t-v/2):(j="top",L.crossAxis=G?b/2-t:t-b/2,L.mainAxis=-10)}if(null!=X?.seriesIndex&&null!=X?.groupIndex){U=c(X.seriesIndex,X.groupIndex,y[X.groupIndex].path);const e=U?{data:U,seriesIndex:X.seriesIndex,groupIndex:X.groupIndex,id:U.id,groupPath:y[X.groupIndex].path}:void 0;if(e){S=(d||function(e){const t="y2"===e.series.associatedYAxis,a="mixedFrequency"===e.timeAxisType,i="enabled"===e.timeAxisType||"skipGaps"===e.timeAxisType;return o=>{const l=e.groups,u=a?o.data.x:i?l:void 0;return{content:s.jsx(r.VisTabularDatatip,{tableData:n(o.data,e.series.name||e.series.id.toString(),u||e.groups,e.translations,e.valueFormats,null!=e.timeAxisType,e.defaultXFormatter,t?e.defaultY2Formatter:e.defaultYFormatter,e.hasXYValues)}),borderColor:o.data.color||e.series.color}}}({series:f[X.seriesIndex],groups:W(y[X.groupIndex].path),translations:w,valueFormats:g,timeAxisType:A,defaultXFormatter:F,defaultYFormatter:T,defaultY2Formatter:Y,hasXYValues:k}))(e)}}const R=o.getColorRamp(),q=S?.borderColor||X&&(f[X.seriesIndex]?.color||f[X.seriesIndex]?.lineColor||f[X.seriesIndex]?.areaColor)||X&&R[X.seriesIndex%R.length],{datatipContent:E,datatipProps:$}=t.useDatatip({content:S?.content,anchor:P,placement:j,offset:L,borderColor:q,touchResponse:D,isDisabled:C});return{datatipContent:E,datatipProps:$}}}));
//# sourceMappingURL=useChartDatatip-cdfc4089.js.map
