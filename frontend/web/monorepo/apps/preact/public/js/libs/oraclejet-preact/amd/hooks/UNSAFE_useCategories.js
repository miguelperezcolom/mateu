define(['exports', 'preact/hooks', '../eventsUtils-5fb81c3e'], (function(e,t,r){"use strict";const n=(e,t)=>{const r=new Set(e);return t.forEach((t=>{e.has(t)?r.delete(t):r.add(t)})),r};function a(e,t="any",r){return[...r].reduce(((r,n,a)=>{const o=e.get(n);return"any"===t?o?new Set([...r,...o]):r:a?new Set([...r].filter((e=>o.has(e)))):o}),new Set)}e.useCategories=({items:e,getCategoriesFromItem:o,initialCategories:c=[],matchCriteria:s="all",replace:u=!0,onCategoriesChange:i})=>{const l=t.useMemo((()=>function(e,t){const r=new Map,n=new Map;return e.forEach((e=>{const a=e.id,o=t(e);n.set(a,new Set(o)),o.forEach((e=>{r.has(e)?r.get(e)?.add(a):r.set(e,new Set([a]))}))})),{categoryToItem:r,itemToCategory:n}}(e,o)),[e,o]),g=new Set(c),d=a(l.categoryToItem,s,g),f=t.useRef(g),m=t.useRef(d);r.isEqual(d,m.current)||(m.current=d),r.isEqual(f.current,g)||(f.current=g,i?.([...g]));return{ids:[...m.current],updateCategories:e=>{let t=null!=e?l.itemToCategory.get(e):new Set([]),o=a(l.categoryToItem,s,t);u||(o=n(m.current,o),t=n(f.current,t)),r.isEqual(o,m.current)||(m.current=o),t&&!r.isEqual(t,f.current)&&(f.current=t,i?.([...t]))}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_useCategories.js.map
