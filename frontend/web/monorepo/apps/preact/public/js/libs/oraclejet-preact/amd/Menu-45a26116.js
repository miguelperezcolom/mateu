define(['exports', 'preact/jsx-runtime', 'preact/hooks', './Sheet-fdd314ac', 'preact/compat', './Dropdown-9d52501e', './mergeProps-bcfa6a92', './classNames-08d99695', './useUser-988f7da2', './MenuItem-ff1cd14d', './UNSAFE_Menu/themes/MenuStyles.css', './useTestId-a2e433c2', './UNSAFE_Menu/themes/DropdownMenuStyles.css', './Flex-4bc3a394', './Skeleton-a7e166a0', './UNSAFE_Menu/themes/MenuSkeletonStyles.css', './LiveRegion-4b9317e5', './useTranslationBundle-27bf6340', './useComponentTheme-5aa41a8f', './UNSAFE_Menu/themes/redwood/MenuItemTheme', './unsafeDomAccess-602c5dde'], (function(e,n,t,s,o,r,a,u,i,c,l,d,m,f,h,p,M,x,y,g,C){"use strict";const b=({children:e,"aria-label":s,currentFocus:o="menu",display:r,closeSubmenu:m,menuId:f,menuLevel:h,anchorRef:p})=>{const{onClose:M,testId:x}=c.useMenuContext(),{direction:y}=i.useUser(),g=t.useRef(null),C=t.useRef({wasMouseMoved:!1,lastMouseLeaveMenuItemdRelatedTarget:null,lastChangeKeyReason:void 0}),[b,v]=t.useState(),[S,k]=t.useState(!1),[j,E]=t.useState(!1),F=t.useCallback((e=>{C.current.lastChangeKeyReason=e.reason,v(e.key),"keyboard"===e.reason?k(!0):k(!1)}),[]),w=t.useCallback((()=>{const e=n=>{const t=c.keyElemExtractor(n.target),s=t?.key,o=t?.elem;if(s&&o){C.current.wasMouseMoved=!0;const n=new MouseEvent("mouseenter");o.dispatchEvent(n),g.current?.removeEventListener("mousemove",e)}};g.current?.addEventListener("mousemove",e)}),[]),{currentKeyProps:R}=function(e,n,s,o,r){const a=t.useMemo((()=>({ArrowDown:n,ArrowUp:e,Home:s,End:o})),[n,e,s,o]),u=t.useCallback((e=>{if(r){const n=a[e.key];if(n&&!e.shiftKey){const t=n();t&&r({key:t,reason:"keyboard"}),e.preventDefault()}}}),[r,a]);return{currentKeyProps:null==r?{}:{onKeyDown:u}}}(c.getPrevNext(g.current,!0,b),c.getPrevNext(g.current,!1,b),(()=>c.getNVisible(g.current,0)),(()=>c.getLastVisible(g.current)),F);t.useEffect((()=>{const e=g.current;if("none"!==o&&e)if("menu"===o){F({key:void 0,reason:"click"});const n=()=>{e.focus()};n()}else if("firstItem"===o){const e=c.getNVisible(g.current,0);e&&F({key:e,reason:"keyboard"})}else if("secondItem"===o){const e=c.getNVisible(g.current,1);e&&F({key:e,reason:"keyboard"})}else if("secondItemDueToTouch"===o){const e=c.getNVisible(g.current,1);e&&F({key:e,reason:"touch"})}return()=>{clearTimeout(undefined)}}),[F,o,h,r,p]),t.useEffect((()=>{w()}),[w]);const A=d.useTestId(x);return n.jsx("div",{...f&&{id:f},ref:g,tabIndex:b||"main"!==h&&"sheet"!==r?-1:0,role:"menu","aria-label":s,class:u.classNames([l.menuStyles.menuContainerStyle]),...a.mergeProps(R,c.getKeyboardCloseProps(M,h),c.getCloseSubmenuEvent(y,m),c.getMenuContainerFocusMethods((()=>{g.current?.contains(document.activeElement)||(k(!1),E(!1))}),(()=>{"touch"===C.current.lastChangeKeyReason?E(!1):E(!0)})),c.getMenuContainerMouseLeave((e=>{e.relatedTarget&&e.relatedTarget.isEqualNode(C.current.lastMouseLeaveMenuItemdRelatedTarget)||(F({key:void 0,reason:"mouseEnter"}),g.current?.focus())})),c.getMenuPointerDown()),...A,children:n.jsx(c.MenuContainerContext.Provider,{value:{menuContainerRef:g,currentKey:b,showFocusRing:S,changeKey:F,menuContainerGeneralInformation:C,isContainerFocused:j},children:e})})};function v({children:e}){const{baseTheme:t}=y.useComponentTheme(g.MenuItemRedwoodTheme),s=u.classNames([t,p.menuSkeletonStyles.container]);return n.jsx("div",{"oj-menu-skeleton":"true",class:s,role:"presentation",children:[...Array(4)].map(((n,t)=>e?.(t)))})}const S=()=>{t.useEffect((()=>{setTimeout((()=>{s(!0)}),k)}),[]);const[e,s]=t.useState(!1),o=x.useTranslationBundle("@oracle/oraclejet-preact");return n.jsxs(n.Fragment,{children:[e&&n.jsx(M.LiveRegion,{children:o.menu_stateLoading()}),n.jsx(v,{children:()=>n.jsx(f.Flex,{height:"11x",align:"center",children:e&&n.jsx(h.Skeleton,{height:"4x"})})})]})},k=50,j=o.forwardRef((({anchorRef:e,defaultPlacement:t,offsetValue:s,closeSubmenu:a,children:i,"aria-label":d,currentFocus:f,menuId:h,menuLevel:p,flipOptions:M,isOpen:x,isMenuLoading:y=!1,minWidth:g},v)=>{const{onClose:k}=c.useMenuContext(),j=o.useCallback((n=>{if("sub"!==p&&"outsideMousedown"===n.reason){const t=c.keyElemExtractor(n.target)?.key;if(!t){const t=e.current?.contains?.(n.target)||e.current?.[C.UNSAFE_DOM_ACCESS]?.contains(n.target);k?.({reason:t?"anchorClick":"outsideClick"})}}}),[k,p]);return n.jsx(r.Dropdown,{minWidth:g?Math.max(E,g):E,onClose:j,isOpen:x,placement:t,anchorRef:e,flipOptions:M,offset:s,shiftOptions:{mainAxis:!0,crossAxis:!0},sizeOptions:{isMaxWidthAdjusted:!0,isMaxHeightAdjusted:!0,maxWidthCeiling:460},children:n.jsx("div",{class:u.classNames([m.dropdownMenuStyles.base,l.menuStyles.dropdownMenuContainerStyle]),ref:v,children:y?n.jsx(S,{}):n.jsx(b,{menuLevel:p,closeSubmenu:a,"aria-label":d,currentFocus:f,menuId:h,display:"dropdown",anchorRef:e,children:i})})})})),E=140,F=c.getIsMobile();e.DropdownMenu=j,e.Menu=({onClose:e,isOpen:o,testId:r,initialFocus:a="menu",placement:i,offsetValue:d,minWidthBehavior:m,anchorRef:f,flipOptions:h,...p})=>{const M=t.useCallback((()=>{e?.({reason:"dismissed"})}),[e]),x=c.isMenuChildrenFalsy(p.children),y=x?"none":a,[g,v]=t.useState();return t.useEffect((()=>{if(o&&"basedOnAnchorWidth"===m){const e=f.current?.offsetWidth||f.current?.[C.UNSAFE_DOM_ACCESS]?.offsetWidth;g!==e&&v(e)}}),[o,m,g]),n.jsx(c.MenuContext.Provider,{value:{onClose:e,isMobile:F,testId:r},children:n.jsx(n.Fragment,{children:F?n.jsx(n.Fragment,{children:n.jsx(s.Sheet,{isOpen:o,onClose:M,children:n.jsx("div",{class:u.classNames([l.menuStyles.sheetMenuContainerStyle]),children:x?n.jsx(S,{}):n.jsx(b,{...p,anchorRef:f,currentFocus:y,menuLevel:"main",display:"sheet"})})})}):n.jsx(j,{...p,anchorRef:f,isMenuLoading:x,isOpen:o,currentFocus:y,menuLevel:"main",defaultPlacement:i,offsetValue:d,flipOptions:h||{crossAxis:!0,mainAxis:!0,fallbackPlacements:["bottom-start","bottom-end","top-start","top-end","end-top","start-top","end-bottom","start-bottom"]},minWidth:g})})})},e.MenuContainer=b}));
//# sourceMappingURL=Menu-45a26116.js.map
