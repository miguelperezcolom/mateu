define(['exports', 'preact/jsx-runtime', 'preact', './PRIVATE_Chart/themes/ChartStyles.css', './classNames-08d99695', './utils-8ccd1b88', './accUtils-acd70e81', './colorUtils-b9dc1bd1'], (function(e,t,i,s,a,r,l,o){"use strict";function n(e){return e.isSelected||e.isFocused?t.jsx(d,{...e}):t.jsx("rect",{x:e.x,y:e.y,"data-oj-private-series-index":e.seriesIndex,"data-oj-private-group-index":e.groupIndex,"data-oj-private-object":"bar","aria-label":e["aria-label"],role:e["aria-label"]?"img":void 0,id:e.activeId,style:{width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},class:a.classNames([e.isPointerEnabled?s.styles.cursorEnable:void 0,e.isDimmed?s.styles.dimmed:void 0])})}function d(e){const{x:i,y:r,width:l,height:o,fill:n,isSelected:d,isFocused:c}=e,u=d?2.5:1.5;return t.jsxs("g",{id:e.activeId,"data-oj-private-object":"bar","data-oj-private-series-index":e.seriesIndex,"data-oj-private-group-index":e.groupIndex,className:e.isDimmed?s.styles.dimmed:"",role:e["aria-label"]?"img":void 0,"aria-label":e["aria-label"],children:[t.jsx("rect",{x:i,y:r,class:a.classNames([d?s.styles.selectedBorder:""]),style:{width:l,height:o,fill:!d&&c?n:void 0}}),t.jsx("rect",{x:i+u,y:r+u,class:a.classNames([s.styles.contrastBorder,e.isPointerEnabled?s.styles.cursorEnable:void 0]),style:{width:l-2*u,height:o-2*u,fill:n}})]})}function c(e,t,i,s,a){let r,l,o,n,d=e,c=t,u=t-e;return u<1&&(d=Math.floor(d),c=d+1,u=1),a?(l=d,r=i>s?s:i,o=Math.abs(s-i),n=Math.abs(c-d)):(r=d,l=i>s?s:i,o=Math.abs(c-d),n=Math.abs(s-i)),{x:r,y:l,width:o,height:n}}function u(e,t,i,s,a,r,l){let o,n;return i?(o=t.transform(e<0?r:l),r+=e<0?e:0,l+=e>0?e:0,n=t.transform(e<0?r:l),o+=n>o?a:-a):(o=s?t.range()[0]:t.transform(0),n=t.transform(e)),{baselineCoord:o,endCoord:n}}function h(e,t,i,s,a,r){if(!r)return{};const l=function(e,t,i,s){return e?i&&!t||!i&&t?s.x:s.x+s.width:i?s.height+s.y:s.y}(e,t,i,s);return"insideBarEdge"===a?{y:e?s.y+s.height/2:l+(i?-1:1)*(r.height/2+2+2),x:e?l-(i&&!t||!i&&t?-1:1)*(r.width/2+2):s.x+s.width/2}:"outsideBarEdge"===a?{y:e?s.y+s.height/2:l-(i?-1:1)*(r.height/2+2),x:e?l+(i&&!t||!i&&t?-1:1)*(r.width/2+2):s.x+s.width/2}:{x:s.x+s.width/2,y:s.y+s.height/2}}const g=(e,t,i,s,a,r)=>({y:s?e:t-(i?-1:1)*(r.height/2+2),x:s?t+(i&&!a||!i&&a?-1:1)*(r.width/2+2):e});function x({groupCenter:e,getStackLabel:i,group:a,posValue:r,negValue:l,posItemsData:o,yScale:n,isHoriz:d,isRtl:c,negItemsData:u,defaultFontSize:h,labelStyle:x,getTextDimensions:f}){const m=i({group:a,value:r,data:o}),y={fontSize:h,fontWeight:"bold",...x},b=l<0?i?.({group:a,value:l,data:u}):"",p=g(e,n.transform(r),!1,d,c,f(m,y)),v=g(e,n.transform(l),!0,d,c,f(b,y));return t.jsxs(t.Fragment,{children:[t.jsx("text",{class:s.styles.stackLabelStyle,style:y,...p,children:m}),t.jsx("text",{class:s.styles.stackLabelStyle,style:y,...v,children:b})]})}function f({item:e,seriesColor:i,isStacked:a,defaultFontSize:r,barDim:l,isRtl:n,isHoriz:d,getTextDimensions:c}){let u=null;const g=!e.labelPosition||"outsideBarEdge"===e.labelPosition&&a?"center":e.labelPosition,x=e.label,f=e.color||i;if("none"!=g&&x&&c&&(!a||"outsideBarEdge"!==g)){const i={fontSize:r,fill:a||!("outsideBarEdge"===g)?o.getContrastingTextColor(f):void 0,...e.labelStyle},m=function(e,t,i,s){return e?!(t.height>i.height)&&("outsideBarEdge"==s||t.width<i.width):!(t.width>i.width)&&("outsideBarEdge"==s||t.height<i.height)}(d,c(x,i),l,g||"center");u=m?t.jsx("text",{class:s.styles.dataLabelStyle,style:i,...h(d,n,e.value<0,l,g||"center",c?.(x,i)),children:x}):null}return u}e.BarGroup=function({yScale:e,y2Scale:s,xScale:a,colors:o,series:d,groupIndex:h,hiddenIds:g,barGapRatio:m,dataItemGaps:y,axisStepWidth:b,averageGroupZ:p,highlightedIds:v,selectedIds:I,isPointInsideMarquee:S,orientation:C,isLog:j,activeId:w,getDataItem:D,isRtl:E,isStacked:F,isSelectionEnabled:k,focusedItemInfo:B,hoveredItemInfo:z,isDrillEnabled:A,group:G,timeAxisType:P,getTextDimensions:T,defaultFontSize:W,stacklabelStyle:L,getStackLabel:M,getItemAriaLabel:R,splitDualY:Y,seriesIndex:q,plotAreaClipPathId:V}){const N="horizontal"===C,H=[],U=d.filter((e=>"y2"!==e.associatedYAxis)),$=d.filter((e=>"y2"===e.associatedYAxis)),O=[],Z=U.length,_=d.length-Z;let J=j?e.domain()[0]:0,K=0;const Q=[],X=[];let ee=j?s.domain()[0]:0,te=0;const ie=[],se=[],ae=F&&!!M&&"mixedFrequency"!=P;let re,le="mixedFrequency"!=P?a.transform(null!=P?new Date(G.id).getTime():h):void 0;const oe=x=>{re="y2"===d[x].associatedYAxis;const C=D(x,h);if(!C||g?.has(C.id)||j&&C.value<=0)return;"mixedFrequency"===P&&(le=r.getMixedFreqGroupCenter(a,C));const G=B?.groupIndex===h&&B?.seriesIndex===x&&B?.isFocusVisible,L=z?.groupIndex===h&&z?.seriesIndex===x&&z?.isCurrent,M=!!G||!!L&&k,q=G&&B.isCurrent||L,V=void 0===v||0===v.size||v.has(C.id),oe="on"===C.drilling||"off"!=C.drilling&&A,{barWidth:ne,offset:de,itemsGaps:ce}=r.getBarGapsInfo(Y?(re?$:U).findIndex((e=>e.id===d[x].id)):x,h,d[x],b,p,D,m,Y?Z:d.length,Y?_:d.length,y,F,E,N),ue=le+de,he=ue+ne,{baselineCoord:ge,endCoord:xe}=u(C.value,re?s:e,F,j,ce,re?te:K,re?ee:J);re?(te+=C.value<0?C.value:0,ee+=C.value>0?C.value:0):(K+=C.value<0?C.value:0,J+=C.value>0?C.value:0),ae&&(C.value>=0?re?ie.push(C):Q.push(C):re?se.push(C):X.push(C));const fe=function(e,t,i){return{fill:e.color||t.color||i,stroke:e.borderColor||t.borderColor}}(C,d[x],o?.[x]),me=c(ue,he,xe,ge,N),ye=S?S?.(C.id,{x:me.x+me.width/2,y:me.y}):I?.has(C.id),be=l.supportsMobileScreenReader||q?R(C,x,h,k,!!ye,oe):"";H.push(i.createElement(n,{...me,...fe,seriesIndex:x,groupIndex:h,isFocused:M,activeId:q?w:"","aria-label":be,isDimmed:!V,isSelected:!!ye,isPointerEnabled:oe||k,key:`${h};${x}`})),O.push(t.jsx(f,{item:C,isRtl:E,seriesColor:o[x%12],isStacked:F,defaultFontSize:W,barDim:me,isHoriz:N,getTextDimensions:T}))};return void 0!==q?oe(q):d.forEach(((e,t)=>oe(t))),t.jsxs(t.Fragment,{children:[t.jsx("g",{"clip-path":V,children:H}),O,ae&&T&&t.jsx(x,{group:G,isRtl:E,yScale:re?s:e,getStackLabel:M,defaultFontSize:W,getTextDimensions:T,posItemsData:re?ie:Q,negItemsData:re?se:X,isHoriz:N,groupCenter:le,labelStyle:L,posValue:re?ee:J,negValue:re?te:K})]})},e.getBarCenterCoordinate=function(e,t,i,s,a,r,l){const{baselineCoord:o,endCoord:n}=u(e,t,i,s,a,r,l);return(o+n)/2},e.getBarPosition=function(e,t,i,s,a,l,o,n,d,h,g,x,f,m,y,b,p){const v=e.filter((e=>"y2"!==e.associatedYAxis)),I=e.filter((e=>"y2"===e.associatedYAxis)),S=v.length,C=I.length;return(j,w)=>{const D=e[j],E="y2"===D.associatedYAxis,F=e.length;let k=0,B=0,z=0,A=0;for(let G=0;G<F;G+=1){const F=i(G,w);let P=w;if(p){const e="mixedFrequency"===p?i(j,w)?.x:t[w].id;P=new Date(e).getTime()}if(!F||o?.has(F.id)||x&&F.value<=0)continue;const T=s.transform(P),W=(E?I:v).findIndex((e=>e.id===D.id)),{barWidth:L,offset:M,itemsGaps:R}=r.getBarGapsInfo(b?W:G,w,e[G],d,h,i,g,b?S:e.length,b?C:e.length,n,f,m,y),Y=T+M,q=Y+L,{baselineCoord:V,endCoord:N}=u(F.value,E?l:a,f,x,R,E?A:B,E?z:k);if(E?(A+=F.value<0?F.value:0,z+=F.value>0?F.value:0):(B+=F.value<0?F.value:0,k+=F.value>0?F.value:0),j===G)return c(Y,q,N,V,y)}}},e.getSeriesOffsetAndWidth=function(e,t,i,s,a,l,o,n,d){const c=i.filter((e=>"y2"!==e.associatedYAxis)).length,u=i.length-c;return(h,g)=>{const{offset:x,barWidth:f}=r.getBarGapsInfo(h,g,i[h],e,t,s,a,c,u,l,o,n,d);return{offset:x,dataWidth:f}}}}));
//# sourceMappingURL=BarGroup-c171e6cb.js.map
