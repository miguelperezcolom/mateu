define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,t){"use strict";function a(e,t,a,s,r,n){const i="compact"!==n?a?.definition:void 0;return e?.instruction||("none"===r?.validatorHint?void 0:t)||i||("none"===r?.converterHint?void 0:s)}function s(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=function({addBusyState:e,converter:r,displayOptions:n,help:i,helpHints:o,userAssistanceDensity:l,validators:u}){const[d,c]=(0,t.useState)(u&&u.length?s(u):void 0),p=(0,t.useRef)();(0,t.useEffect)((()=>{if(!u||!u.length)return void c(void 0);c(s(u));const t=u.map((e=>e.hint)).filter(Boolean),a=p.current=Symbol(),r=e?.("resolving the async validator hints");Promise.allSettled(t).then((e=>{c((t=>{const s=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return a===p.current&&s.length?[t,...s].join("\n"):t})),r?.()}))}),[u]);const f="compact"!==l?o?.sourceText:o?.definition||o?.sourceText;return{assistiveText:a(i,d,o,r?.getHint?.()??void 0,n,l),helpSourceLink:o?.source,helpSourceText:f}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useMergedFormContext=function({propContainerReadonly:e,propLabelWrapping:a,propReadonly:s,propTextAlign:r,propUserAssistanceDensity:n}){const i=(0,t.useFormContext)(),o=n??i.userAssistanceDensity,l=s??i.isReadonly,{isFormLayout:u,isReadonly:d,labelWrapping:c,textAlign:p,...f}=i;return{containerProps:{...f,isFormLayout:void 0!==e||u,isReadonly:e??d,labelWrapping:a??c,textAlign:r??p},readonlyValue:l,uadValue:o}}})),define("oj-c/hooks/UNSAFE_useEditableValue/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.treatNull=e.normalizeValue=e.isShallowEqual=e.hasErrorMessages=e.getVirtualKeyboardHintFromConverter=e.createMessageFromError=void 0;e.createMessageFromError=e=>"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message};e.treatNull=(e,t)=>null===e?t:e;e.normalizeValue=e=>"string"==typeof e&&""===e?null:e;e.isShallowEqual=(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>e===t[a]));e.hasErrorMessages=e=>!!e&&e.some((e=>"error"===e.severity));e.getVirtualKeyboardHintFromConverter=e=>{let t;if(e&&e.resolvedOptions){const a=e.resolvedOptions();t=a?.virtualKeyboardHint??"text"}else t="text";return t}})),define("oj-c/hooks/UNSAFE_useEditableValue/converterUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=function(e,a,s){if(function(e){return null===e}(e))return{result:"success",value:a};try{return{result:"success",value:s.format(e)}}catch(e){return{result:"failure",error:(0,t.createMessageFromError)(e)}}},e.parse=function(e,a,s){if(void 0===e)return{result:"success",value:null};if(r=e,""===r||null===r)return{result:"success",value:e};var r;try{return{result:"success",value:a.parse(e)}}catch(e){return{result:"failure",error:s?.(e)??(0,t.createMessageFromError)(e)}}}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=function(){const e=(0,t.useRef)(new Map);return{setStaleIdentity:(0,t.useCallback)((t=>{const a=Symbol();return e.current.set(t,a),{isStale:()=>a!==e.current.get(t)}}),[])}}})),define("oj-c/hooks/UNSAFE_useEditableValue/reducer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=function(e,t){const a=e.customMessages??[],s=e.hiddenMessages,r=e.componentMessages,n=e.shownMessages;switch(t.type){case"ADD_COMPONENT_MESSAGE":return{...e,componentMessages:[...r,t.payload],shownMessages:[...n,t.payload]};case"ADD_HIDDEN_MESSAGE":return{...e,hiddenMessages:[...s,t.payload]};case"CLEAR_ALL_MESSAGES":return{...e,shownMessages:[],hiddenMessages:[],customMessages:[],componentMessages:[]};case"SHOW_HIDDEN_MESSAGES":return 0===s.length?e:{...e,hiddenMessages:[],shownMessages:[...a,...r,...s]};case"UPDATE_DISPLAY_VALUE":return{...e,displayValue:t.payload};case"UPDATE_VALID":return{...e,valid:t.payload};case"UPDATE_VALUE":return{...e,value:t.payload};case"UPDATE_TRANSIENT_VALUE":return{...e,transientValue:t.payload};case"UPDATE_PREVIOUS_CONVERTER":return{...e,previousConverter:t.payload};case"UPDATE_PREVIOUS_DEFERRED_VALIDATORS":return{...e,previousDeferredValidators:t.payload};case"UPDATE_PREVIOUS_DISABLED":return{...e,previousDisabled:t.payload};case"UPDATE_PREVIOUS_READONLY":return{...e,previousReadonly:t.payload};case"UPDATE_PREVIOUS_VALIDATORS":return{...e,previousValidators:t.payload};case"UPDATE_PREVIOUS_VALUE":return{...e,previousValue:t.payload};case"UPDATE_COMPONENT_MESSAGES":return{...e,componentMessages:t.payload,shownMessages:[...a,...t.payload]};case"UPDATE_HIDDEN_MESSAGES":return{...e,hiddenMessages:t.payload};case"UPDATE_CUSTOM_MESSAGES":return{...e,customMessages:t.payload,shownMessages:[...t.payload,...r]};default:return e}},e.addComponentMessage=function(e,t){e({type:"ADD_COMPONENT_MESSAGE",payload:t})},e.addHiddenMessage=function(e,t){e({type:"ADD_HIDDEN_MESSAGE",payload:t})},e.clearAllMessages=function(e,t,{onMessagesCustomChanged:a}){e({type:"CLEAR_ALL_MESSAGES"}),a?.([])},e.showHiddenMessages=function(e){e({type:"SHOW_HIDDEN_MESSAGES"})},e.updateComponentMessages=function(e,t){e({type:"UPDATE_COMPONENT_MESSAGES",payload:t})},e.updateCustomMessages=function(e,t){e({type:"UPDATE_CUSTOM_MESSAGES",payload:t})},e.updateDisplayValue=function(e,t,{onRawValueChanged:a}){e({type:"UPDATE_DISPLAY_VALUE",payload:t}),a?.(t)},e.updateHiddenMessages=function(e,t){e({type:"UPDATE_HIDDEN_MESSAGES",payload:t})},e.updatePreviousConverter=function(e,t){e({type:"UPDATE_PREVIOUS_CONVERTER",payload:t})},e.updatePreviousDeferredValidators=function(e,t){e({type:"UPDATE_PREVIOUS_DEFERRED_VALIDATORS",payload:t})},e.updatePreviousDisabled=function(e,t){e({type:"UPDATE_PREVIOUS_DISABLED",payload:t})},e.updatePreviousReadonly=function(e,t){e({type:"UPDATE_PREVIOUS_READONLY",payload:t})},e.updatePreviousValidators=function(e,t){e({type:"UPDATE_PREVIOUS_VALIDATORS",payload:t})},e.updatePreviousValue=function(e,t){e({type:"UPDATE_PREVIOUS_VALUE",payload:t})},e.updateTransientValue=function(e,t,{onTransientValueChanged:a}){e({type:"UPDATE_TRANSIENT_VALUE",payload:t}),a?.(t)},e.updateValidStatus=function(e,t,{onValidChanged:a}){e({type:"UPDATE_VALID",payload:t}),a?.(t)},e.updateValue=function(e,t,{onValueChanged:a}){e({type:"UPDATE_VALUE",payload:t}),a?.(t)}})),define("oj-c/hooks/UNSAFE_useEditableValue/validationUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAsync=function({validators:e,value:a}){const s=(e,a)=>{try{const s=e.validate(a);if(s instanceof Promise)return s.then((()=>{}),(e=>({message:(0,t.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy})))}catch(e){return{message:(0,t.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy}}},r=[],n=[];for(const t of e){const e=s(t,a);void 0!==e&&(e instanceof Promise?n.push(e):r.push(e))}return{errors:r,maybeErrorPromises:n}},e.validateSync=function({validators:e,value:a}){const s=[];for(const r of e)try{r.validate(a)}catch(e){s.push((0,t.createMessageFromError)(e))}if(s.length)return{result:"failure",errors:s};return{result:"success"}}})),define("oj-c/hooks/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","./converterUtils","./utils","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","./reducer","./validationUtils"],(function(require,e,t,a,s,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=function({addBusyState:e,ariaDescribedBy:o,converter:l,defaultDisplayValue:u,deferredValidators:d,disabled:c,displayOptions:p,messagesCustom:f,onDisplayValueChanged:m,onMessagesCustomChanged:y,onRawValueChanged:v,onTransientValueChanged:h,onValidChanged:g,onValueChanged:S,translateConverterParseError:E,readonly:b,validators:V,value:_}){const A=(0,t.useRef)(!0),{setStaleIdentity:C}=(0,r.useStaleIdentity)(),[D,P]=(0,t.useReducer)(n.reducer,{shownMessages:[],hiddenMessages:[],customMessages:f,componentMessages:[],value:_,valid:"pending"},(e=>{const t=l?(0,a.format)(_,u,l):{result:"success",value:(0,s.treatNull)(_,u)};return{...e,displayValue:"success"===t.result?t.value:u}})),M=(0,t.useRef)(),T=(0,t.useRef)(!1),w=(0,t.useCallback)((e=>{e!==M.current&&(M.current=e,g?.(e))}),[g]),j=(0,t.useCallback)(((e,t)=>(e(P,t,{onMessagesCustomChanged:y,onRawValueChanged:v,onTransientValueChanged:h,onValidChanged:w,onValueChanged:S}),!0)),[P,y,v,h,w,S]),x=(0,t.useCallback)((e=>{const t="string"==typeof e?e.trim():e;return(0,i.validateSync)({validators:d??[],value:t})}),[d]),U=(0,t.useCallback)((e=>{j(n.updateValue,e)}),[j]),F=(0,t.useCallback)((e=>{j(n.updateDisplayValue,e)}),[j]),R=(0,t.useCallback)((e=>{j(n.updateTransientValue,e)}),[j]),L=(0,t.useCallback)((e=>{let t;if(l){const r=(0,a.format)(e,u,l);"failure"===r.result?(j(n.updateComponentMessages,[r.error]),j(n.updateValidStatus,"invalidShown"),t=(0,s.treatNull)(e,u)):t=r.value}else t=(0,s.treatNull)(e,u);return t}),[l,u,j]),O=(0,t.useCallback)((e=>{const t=L(e);return j(n.updateDisplayValue,t),m?.(),!0}),[j,L,m]),I=(0,t.useCallback)((()=>"invalidShown"!==D.valid?{result:"success",value:D.value}:l?(0,a.parse)((0,s.normalizeValue)(D.displayValue),l,E):{result:"success",value:(0,s.normalizeValue)(D.displayValue)}),[l,D.displayValue,D.valid,D.value,E]),k=(0,t.useCallback)((e=>l?(0,a.parse)((0,s.normalizeValue)(e),l,E):{result:"success",value:(0,s.normalizeValue)(e)}),[l,E]),N=(0,t.useCallback)((e=>{const t=k(e);return"failure"===t.result&&(j(n.updateComponentMessages,[t.error]),j(n.updateValidStatus,"invalidShown")),t}),[j,k]),q=(0,t.useCallback)((async(t,a={})=>{const{doNotClearMessagesCustom:r=!1,forceHiddenMessagesToBeShown:o=!1}=a,l=r&&(0,s.hasErrorMessages)(f);if(r?(j(n.updateComponentMessages,[]),j(n.updateHiddenMessages,[])):j(n.clearAllMessages),!(V&&0!==V.length||d&&0!==d.length))return j(n.updateValidStatus,l?"invalidShown":"valid"),!0;const u=[],c=[],p=x(t);let m;"failure"===p.result&&u.push(...p.errors),null!=t&&(m=(0,i.validateAsync)({validators:V??[],value:t}),m.errors.forEach((({message:e,messageDisplayStrategy:t})=>{"displayOnBlur"!==t||T.current||o?u.push(e):c.push(e)})));const y=m?.maybeErrorPromises??[],v=0!==u.length||0!==c.length;if(!v&&!y.length)return j(n.updateValidStatus,l?"invalidShown":"valid"),!0;if(0!==u.length?(j(n.updateComponentMessages,u),j(n.updateValidStatus,"invalidShown")):0!==c.length&&(j(n.updateHiddenMessages,c),j(n.updateValidStatus,"invalidHidden")),!y.length)return!v;!v&&j(n.updateValidStatus,"pending");const h=e?.("running asynchronous validation"),{isStale:g}=C("useEditableValue-full-validate");let S=!1,E=!1;const b=[];for(const e of y){const t=e.then((e=>{if(e&&!g()){const{messageDisplayStrategy:t,message:a}=e;"displayOnBlur"!==t||T.current||o?(j(n.addComponentMessage,a),S=!0):(j(n.addHiddenMessage,a),E=!0)}}));b.push(t)}await Promise.all(b);const _=E||S,A=E||0!==c.length,D=S||0!==u.length;return g()||(v||_?D?j(n.updateValidStatus,"invalidShown"):A&&j(n.updateValidStatus,l?"invalidShown":"invalidHidden"):j(n.updateValidStatus,l?"invalidShown":"valid")),h?.(),!v&&!_}),[e,j,d,f,C,x,V]),B=async()=>{if(c||b)return;const e=I();if("failure"===e.result)return j(n.updateComponentMessages,[e.error]),void j(n.updateValidStatus,"invalidShown");const t=e.value;await H(t,{doNotClearMessagesCustom:!0})&&j(n.updateValue,t)&&O(t)},z=(0,t.useCallback)((e=>{j(n.clearAllMessages);const t=x(e);return"failure"===t.result&&j(n.updateHiddenMessages,t.errors),j(n.updateValidStatus,"failure"===t.result?"invalidHidden":"valid"),!0}),[j,x]),H=(0,t.useCallback)((async(t,a={})=>{const{isStale:s}=C("useEditableValue-validateValueOnInternalChange"),r=e?.("Running validateValueOnInternalChange"),n=await q(t,a);return r?.(),!s()&&n}),[e,q,C]),K=(0,t.useCallback)((async(e,t=!0)=>{const a=await H(e);return a&&t&&j(n.updateValue,e),a&&(T.current=!0),a}),[j,H]),W=(0,t.useCallback)((async({value:e})=>{const t=N(e);if("failure"===t.result)return!1;const a=t.value,s=await K(a);return s&&O(a),s}),[K,N,O]),G=(0,t.useCallback)((({value:e})=>{j(n.updateDisplayValue,e??u)}),[j,u]),$=(0,t.useCallback)((async()=>{if(b||c)return"valid";const t=N(D.displayValue);if("failure"===t.result)return"invalid";const a=t.value,s=e?.("Running component method validate"),r=await q(a,{forceHiddenMessagesToBeShown:!0});return s?.(),r?(a!==D.value&&(j(n.updateValue,a),O(a)),"valid"):"invalid"}),[e,c,j,q,N,b,O,D.displayValue,D.value]),Y=(0,t.useCallback)((()=>{z(D.value),O(D.value)}),[O,D.value,z]),X=(0,t.useCallback)((()=>{D.hiddenMessages&&D.hiddenMessages.length>0&&(j(n.showHiddenMessages),j(n.updateValidStatus,"invalidShown"))}),[j,D.hiddenMessages]),J=(0,t.useCallback)((()=>{T.current=!1}),[]),Q=(0,t.useCallback)((e=>{j(n.addComponentMessage,e)}),[j]);A.current||D.previousValue===_||(j(n.updatePreviousValue,_),_!==D.value&&(z(_),j(n.updateValue,_),O(_)));A.current||D.previousConverter===l||(j(n.updatePreviousConverter,l),"invalidShown"!==D.valid&&O(_),"invalidShown"===D.valid&&B());A.current||D.previousValidators===V||(j(n.updatePreviousValidators,V),"invalidShown"===D.valid&&B());if(!A.current&&(!D.customMessages&&f||D.customMessages&&!f||D.customMessages&&f&&!(0,s.isShallowEqual)(D.customMessages,f))){const e=D.componentMessages??[],t=D.hiddenMessages??[],a=f??[],r=(0,s.hasErrorMessages)(a),i=t.length>0,o=0===e.length&&0===t.length&&0===a.length;j(n.updateCustomMessages,a),r&&j(n.updateValidStatus,"invalidShown"),!r&&"pending"!==D.valid&&(o&&j(n.updateValidStatus,"valid")||i&&j(n.updateValidStatus,"invalidHidden"))}if(!A.current&&(D.previousDeferredValidators!==d||D.previousDisabled!==c||D.previousReadonly!==b)){const e=0===d?.length;if(D.previousDeferredValidators!==d&&j(n.updatePreviousDeferredValidators,d),D.previousDisabled!==c&&j(n.updatePreviousDisabled,c),D.previousReadonly!==b&&j(n.updatePreviousReadonly,b),e||!b&&!c)switch(D.valid){case"valid":{const e=I();if("failure"===e.result)j(n.updateComponentMessages,[e.error]),j(n.updateValidStatus,"invalidShown");else{const t=x(e.value);"failure"===t.result&&j(n.updateHiddenMessages,t.errors)&&j(n.updateValidStatus,"invalidHidden")}break}case"invalidHidden":0===d?.length&&(j(n.updateValidStatus,"valid"),j(n.updateHiddenMessages,[]));break;case"invalidShown":B()}}if(A.current)if(A.current=!1,j(n.updatePreviousValue,_),j(n.updatePreviousConverter,l),j(n.updatePreviousValidators,V),j(n.updatePreviousDeferredValidators,d),j(n.updatePreviousDisabled,c),j(n.updatePreviousReadonly,b),j(n.updateCustomMessages,f),j(n.updateTransientValue,_),c||b)j(n.updateValidStatus,"valid"),O(_);else{const e=x(_);"failure"===e.result&&j(n.updateHiddenMessages,e.errors)&&j(n.updateValidStatus,(0,s.hasErrorMessages)(f)?"invalidShown":"invalidHidden"),"success"===e.result&&j(n.updateValidStatus,(0,s.hasErrorMessages)(f)?"invalidShown":"valid")&&O(_)}return{value:D.value,addMessage:Q,clearInteractionFlags:J,displayValue:D.displayValue,formatValue:L,methods:{reset:Y,showMessages:X,validate:$},onCommitValue:K,parseValue:N,refreshDisplayValue:O,setDisplayValue:F,setTransientValue:R,setValue:U,textFieldProps:{"aria-describedby":o,messages:"none"!==p?.messages?D.shownMessages:void 0,onCommit:W,onInput:G,value:D.displayValue},validateValueOnExternalChange:z}}})),define("oj-c/hooks/UNSAFE_useEditableValue/index",["require","exports","./utils","./useEditableValue"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=e.treatNull=e.getVirtualKeyboardHintFromConverter=void 0,Object.defineProperty(e,"getVirtualKeyboardHintFromConverter",{enumerable:!0,get:function(){return t.getVirtualKeyboardHintFromConverter}}),Object.defineProperty(e,"treatNull",{enumerable:!0,get:function(){return t.treatNull}}),Object.defineProperty(e,"useEditableValue",{enumerable:!0,get:function(){return a.useEditableValue}})})),define("oj-c/hooks/UNSAFE_useComponentMessages/useComponentMessages",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useComponentMessages=function({evMessages:e,messagesCustom:a,readonly:s,readonlyUserAssistanceShown:r}){return(0,t.useMemo)((()=>s?"confirmationAndInfoMessages"===r?a?.filter((e=>"confirmation"===e.severity||"info"===e.severity)):[]:e),[a,s,r,e])}})),define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=function({labelHint:e,required:r,requiredMessageDetail:n}){const i=(0,s.useTranslationBundle)("@oracle/oraclejet-preact"),o=n||i.formControl_requiredMessageDetail(),l=(0,a.useMemo)((()=>r?new t({label:e,messageDetail:o}):null),[r]);return(0,a.useMemo)((()=>[l].filter(Boolean)),[l])}})),define("oj-c/select-common/utils/utils",["require","exports","ojs/ojdataprovider","@oracle/oraclejet-preact/utils/UNSAFE_logger"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_VALUE_ITEMS=e.DEFAULT_VALUE_ITEM=e.DEFAULT_VALUE=e.DEFAULT_ITEM_CONTEXT=void 0,e.isEmpty=function(e){return!e||(Array.isArray(e)?0===e.length:(e instanceof Set||e instanceof Map)&&0===e.size)},e.isSetEqual=function(e,t){if(e===t)return!0;if(e?.size!==t?.size)return!1;const a=Array.from(e),s=Array.from(t);return a.every(((e,t)=>e===s[t]))},e.getFilterCriterion=function(e,s,r){const n=s&&s.length>0;if(!n)return;const i=r,o=i&&i.length>0,l=e?.getCapability("filter"),u=l&&l.textFilter;e&&n&&!u&&(0,a.error)("Core Pack Select: DataProvider does not support text filter.  Filtering results in dropdown may not work correctly.");const d=e&&u&&n&&o?i.reduce(((e,t)=>{if(e)return e;if("unknown"===t)return t;if(t){if(l.textFilterMatching&&l.textFilterMatching.matchBy&&l.textFilterMatching.matchBy.indexOf(t)>-1)return t;(0,a.warn)(`Core Pack Select: DataProvider does not support text filter "${t}" matching.  Filtering results in dropdown may not work as expected.`)}}),null):void 0,c=d?{text:s,matchBy:d}:{text:s};return t.FilterFactory.getFilter({filterDef:c})},e.DEFAULT_ITEM_CONTEXT=null,e.DEFAULT_VALUE=null,e.DEFAULT_VALUE_ITEM=null,e.DEFAULT_VALUE_ITEMS=null})),define("oj-c/select-common/PRIVATE_useCache/useCache",["require","exports","preact/hooks","../utils/utils"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=function(){const e=(0,t.useRef)(new Map);return(0,t.useCallback)(((t,a,r)=>s(e.current,t,r)?(e.current.set(t,{value:a,deps:r}),a):e.current.get(t).value),[])};const s=(e,t,a)=>{if(!e.has(t))return!0;const s=e.get(t).deps;return s.length!==a.length||s.some(((e,t)=>!r(e,a[t])))},r=(e,t)=>e===t||(e instanceof Set&&t instanceof Set?(0,a.isSetEqual)(e,t):e===t)})),define("oj-c/select-common/PRIVATE_useCache/index",["require","exports","./useCache"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=void 0,Object.defineProperty(e,"useCache",{enumerable:!0,get:function(){return t.useCache}})})),define("oj-c/hooks/UNSAFE_useListData/useListData",["require","exports","ojs/ojabortreason","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEmptyState=e.useListData=void 0;const r=Object.freeze({status:"loading",data:null}),n={isInitialFetchDeferred:!1};e.useListData=(a,u=n)=>{const d=(0,s.useRef)(null),c=(0,s.useRef)(0),y=(0,s.useRef)(!1),v=(0,s.useRef)(null),h=(0,s.useRef)(null),g=u.fetchSize&&u.fetchSize>0?u.fetchSize:25,S=(0,s.useMemo)((()=>i(a)),[a]),[E,b]=(0,s.useReducer)(o,0===u.initialRowsFetched?(0,e.getEmptyState)("atLeast"):r),V=(0,s.useCallback)((async(e,t)=>{if(null==S)return;const a={attributes:u.attributes,sortCriteria:u.sortCriteria,filterCriterion:u.filterCriterion,offset:e.offset,size:e.count},s=!0===y.current?"exact":"atLeast";if(0!==e.count)try{const r=(await S.fetchByOffset(a)).results;t&&t(r),b({status:"success",data:{offset:e.offset,data:r,totalSize:c.current,sizePrecision:s}})}catch(e){b({status:"error",error:e})}else b({status:"success",data:{offset:e.offset,data:[],totalSize:c.current,sizePrecision:s}})}),[S,u.attributes,u.filterCriterion,u.sortCriteria]),_=(0,s.useCallback)((async()=>{if(null==S)return;"loading"===E.status&&h.current?.abort((0,t.getAbortReason)()),b({status:"loading",data:null});const e=new AbortController;h.current=e;const a=S.fetchFirst({attributes:u.attributes,sortCriteria:u.sortCriteria,filterCriterion:u.filterCriterion,size:g,signal:e.signal})[Symbol.asyncIterator]();v.current=a;try{const e=await a.next();if(a!==v.current)return;const t=e.value.fetchParameters;if(t.signal&&t.signal.aborted)return;c.current=e.value.data.length,void 0!==e.done&&(y.current=e.done);const s=u.initialRowsFetched&&u.initialRowsFetched>0?u.initialRowsFetched:g;V({offset:0,count:Math.min(c.current,s)})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;b({status:"error",error:e}),v.current=null}}),[S,V,g,u.attributes,u.filterCriterion,u.initialRowsFetched,u.sortCriteria,u.fetchSize]),A=(0,s.useCallback)((async e=>{if(null===v.current)_();else{const t=e.offset+e.count;if(t>c.current){if(null==d.current){const a=l(v,c.current,t);d.current=a;try{const t=await a;void 0!==t.done&&(y.current=t.done);const s=t.total;(s>0||0===s&&y.current)&&(c.current=s,V({offset:e.offset,count:Math.min(c.current-e.offset,e.count)})),d.current=null}catch(e){b({status:"error",error:e}),d.current=null}}}else V(e)}}),[_,V]),C=(0,s.useCallback)((()=>{v.current=null,d.current=null,c.current=0,y.current=!1,0===u.initialRowsFetched?b((0,e.getEmptyState)("atLeast")):u.isInitialFetchDeferred?b({status:"loading",data:null}):_()}),[_,u.isInitialFetchDeferred,u.initialRowsFetched]);(0,s.useEffect)((()=>{S&&C()}),[S,C]);const D=(0,s.useCallback)((e=>{if("success"===E.status&&E.data){const t=E.data;let a,s=t.data.length,r=!1;if(e.detail.add){const a=p(e.detail.add,t,u,!0);c.current=c.current+a,s+=a,r=a>0||"exact"===t.sizePrecision,a<e.detail.add.data.length&&(y.current=!1)}if(e.detail.remove){const a=p(e.detail.remove,t,u,!1);c.current=Math.max(0,c.current-a),s=Math.max(0,s-a),r=r||a>0}const n=e.detail.update;n&&(r=r||f(n,t,u),a=e=>{m(n,t,e)}),r&&V({offset:t.offset,count:s},a)}}),[E,u,V]),P=(0,s.useCallback)((e=>{let t=-1;const a=e.detail?.disregardAfterKey;if(a&&"success"===E.status){const e=E.data.data.findIndex((e=>e.metadata.key===a));if(e>-1&&(t=E.data.data.length-e-1),0===t&&E.data.data.length>=g)return}t>-1&&"success"===E.status?(c.current=c.current-t,A({offset:E.data.offset,count:Math.max(E.data.data.length,g)})):("loading"===E.status&&h.current?.abort(),C())}),[E,g,A,C]);if((0,s.useEffect)((()=>(S&&(S.addEventListener("refresh",P),S.addEventListener("mutate",D)),()=>{S&&(S.removeEventListener("refresh",P),S.removeEventListener("mutate",D))})),[S,C,D,P]),!a){return[(0,e.getEmptyState)("exact"),e=>Promise.resolve()]}return[E,A]};const i=e=>{if(null==e)return null;return(0,a.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator",forceLocalCaching:"enabled"}})},o=(e,t)=>e.status===t.status&&"loading"===t.status?e:t,l=async(e,t,a)=>await u(e,t,a),u=async(e,t,a)=>{const s=e.current;if(null===s)return{total:-1,done:void 0};const r=await s.next();return s===e.current?(t+=r.value.data.length)>=a||r.done?{total:t,done:r.done}:u(e,t,a):{total:-1,done:void 0}};e.getEmptyState=e=>"atLeast"===e?d:c;const d=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"atLeast"}}),c=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"exact"}}),p=(e,t,a,s)=>{let r=0;if(y(e,a)){const a=s?e.indexes?.sort(((e,t)=>e-t)):e.indexes;let n=t.totalSize-1;a?.forEach((e=>{e<=n&&(r=r+=1,s&&(n=n+=1))}))}else if(s);else{const a=t.data.map((e=>e.metadata.key));e.keys.forEach((e=>{a.includes(e)&&(r+=1)}))}return r},f=(e,t,a)=>{if(y(e,a)){const a=e.indexes?e.indexes:[],s=t.offset,r=s+t.data.length;for(let e=0;e<a.length;e++)if(a[e]>=s&&a[e]<r)return!0}else{const a=Array.from(e.keys),s=t.data.map((e=>e.metadata.key));for(let e=0;e<a.length;e++){const t=a[e];if(s.includes(t))return!0}}return!1},m=(e,t,a)=>{e.keys.forEach((e=>{const s=a.find((t=>t.metadata.key==e)),r=t.data.find((t=>t.metadata.key==e));r&&s&&r.data===s.data&&(s.data=new Proxy(s.data,{}))}))},y=(e,t)=>e.indexes&&null==t.sortCriteria&&null==t.filterCriterion})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/Debouncer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Debouncer=void 0;e.Debouncer=class{constructor(){this._responseTimes=[{time:900,count:0},{time:720,count:0},{time:600,count:0},{time:450,count:0},{time:360,count:0},{time:300,count:0}],this._requestTime={time:250,count:0},this._lastRequestTime=0}debounce(e,t){const a=this.GetDebounceTime(t);return(...t)=>{window.setTimeout((()=>{e(...t)}),a)}}recordResponseTime(e,t){const a=Math.min(t,5),s=this._responseTimes[a];0===s.count?s.time=e:s.time=(s.time*s.count+e)/(s.count+1),s.count+=1}recordRequestTime(){const e=Date.now(),t=this._lastRequestTime;if(this._lastRequestTime=e,0===t)return;const a=e-t;if(a>1e3)return;const s=this._requestTime;0===s.count?s.time=a:s.time=(s.time*s.count+a)/(s.count+1),s.count+=1}_getResponseTime(e){const t=Math.min(e,5);return this._responseTimes[t].time}_getRequestTime(){return this._requestTime.time}GetDebounceTime(e){const t=this._getResponseTime(e),a=1.2*this._getRequestTime();if(t<a)return 0;return(1+(t-a)/t)*a}}})),define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView",["require","exports","ojs/ojdataprovider","./Debouncer"],(function(require,e,t,a){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncingDataProviderView=void 0;class r{constructor(e,t,a){this._isFirstNext=!0,this.dataProvider=e,this.debouncer=t,this.params=a}next(){if(this._isFirstNext){this.debouncer.recordRequestTime(),this._isFirstNext=!1;const e=this.params?.filterCriterion?.text,a=(t,a)=>{if(this.params?.signal?.aborted)return void a(this.params?.signal?.reason);const s=this.dataProvider.fetchFirst(this.params);this._asyncIterator=s[Symbol.asyncIterator]();const r=Date.now();this._asyncIterator.next().then((a=>{const s=Date.now();this.debouncer.recordResponseTime(s-r,e?e.length:0),t(a)}),a)},s=(t,s)=>new Promise(((t,s)=>{this.debouncer.debounce(a,e?e.length:0)(t,s)})).then(t,s);return(0,t.wrapWithAbortHandling)(this.params?.signal,s,!1)}return this._asyncIterator.next()}}class n{constructor(e,t,a){this[s]=()=>new r(this.dataProvider,this.debouncer,this.params),this.dataProvider=e,this.debouncer=t,this.params=a}}s=Symbol.asyncIterator;e.DebouncingDataProviderView=class{constructor(e){this._debouncer=new a.Debouncer,this.dataProvider=e}fetchFirst(e){return new n(this.dataProvider,this._debouncer,e)}fetchByKeys(e){return this.dataProvider.fetchByKeys(e)}containsKeys(e){return this.dataProvider.containsKeys(e)}fetchByOffset(e){return this.dataProvider.fetchByOffset(e)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}getCapability(e){return this.dataProvider.getCapability(e)}addEventListener(e,t){this.dataProvider.addEventListener(e,t)}removeEventListener(e,t){this.dataProvider.removeEventListener(e,t)}dispatchEvent(e){return this.dataProvider.dispatchEvent(e)}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider",["require","exports","ojs/ojdataproviderfactory","preact/hooks","../PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=function(e){return(0,a.useMemo)((()=>{if(!e)return e;const a=(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}),r=a.getCapability("fetchFirst");return"immediate"===r?.iterationSpeed?a:new s.DebouncingDataProviderView(a)}),[e])}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/UNSAFE_useWrapDataProvider/index",["require","exports","./useWrapDataProvider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=void 0,Object.defineProperty(e,"useWrapDataProvider",{enumerable:!0,get:function(){return t.useWrapDataProvider}})})),define("oj-c/select-common/PRIVATE_useSelectData/CollectionTemplateDataProviderView",["require","exports","ojs/ojdataprovider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollectionTemplateDataProviderView=e.SELECT_INTERNALS=void 0,e.SELECT_INTERNALS=Symbol("__SELECT_INTERNALS__");e.CollectionTemplateDataProviderView=class{get currentDataProvider(){return this.overrideDataProvider??this.originalDataProvider}setFilterCriterion(a){const s=this.filterCriterion;if(this.filterCriterion=a,!this.compareFilter(s,a)){const a=new t.DataProviderRefreshEvent;Object.defineProperty(a,e.SELECT_INTERNALS,{value:{cause:"filterCriterionChanged"}}),this.dispatchEvent(a),this.options.onRefresh?.()}}setDataStateOverride(s){if(this.dataStateOverride!==s){this.dataStateOverride=s,this.overrideDataProvider="success"===this.dataStateOverride?.status?new a(this.dataStateOverride):void 0;const r=new t.DataProviderRefreshEvent;Object.defineProperty(r,e.SELECT_INTERNALS,{value:{cause:"dataOverrideChanged"}}),this.dispatchEvent(r),this.options.onRefresh?.()}}compareFilter(e,t){if(e===t)return!0;if(void 0===e||void 0===t)return!1;const a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((a=>s.includes(a)&&e[a]===t[a]))}constructor(e,t){this.originalDataProvider=e,this.options=t,e.createOptimizedKeyMap&&(this.createOptimizedKeyMap=t=>e.createOptimizedKeyMap(t)),e.createOptimizedKeySet&&(this.createOptimizedKeySet=t=>e.createOptimizedKeySet(t))}async fetchByOffset(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=await this.currentDataProvider.fetchByOffset(t);return this.options.onOffsetFetch?.({results:a}),a}fetchFirst(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=this.options;a.onInitializeFetch?.();const s=this.currentDataProvider.fetchFirst(t);return{[Symbol.asyncIterator](){let e=0;const t=s[Symbol.asyncIterator]();return{async next(){const s=await t.next(),{value:r,done:n=!1}=s;return a.onNextIteration?.({results:r,offset:e,done:n}),e+=r.data.length,s}}}}}addEventListener(e,t){return this.originalDataProvider.addEventListener(e,t)}containsKeys(e){return this.currentDataProvider.containsKeys(e)}dispatchEvent(e){return this.originalDataProvider.dispatchEvent(e)}fetchByKeys(e){return this.currentDataProvider.fetchByKeys(e)}getCapability(e){return this.originalDataProvider.getCapability(e)}getTotalSize(){return this.currentDataProvider.getTotalSize()}isEmpty(){return this.currentDataProvider.isEmpty()}removeEventListener(e,t){return this.originalDataProvider.removeEventListener(e,t)}};class a{constructor(e){this.dataState=e}containsKeys(e){const{keys:t}=e,{data:a}=this.dataState,s=new Set;return a.data.forEach((e=>{t.has(e.metadata.key)&&s.add(e.metadata.key)})),Promise.resolve({containsParameters:e,results:s})}fetchByKeys(e){const{keys:t}=e,{data:a}=this.dataState,s=new Map;return a.data.forEach((e=>{t.has(e.metadata.key)&&s.set(e.metadata.key,e)})),Promise.resolve({fetchParameters:e,results:s})}fetchByOffset(e){const{offset:t,size:a}=e,{data:s}=this.dataState,r={fetchParameters:e??{},results:s.data.slice(t,a).map((e=>({data:e.data,metadata:e.metadata}))),done:t+(a??0)>=s.totalSize};return Promise.resolve(r)}fetchFirst(e){const{data:t}=this.dataState;return{[Symbol.asyncIterator](){let a=0;const s=e?.size??25,r=t.totalSize;return{async next(){if(a<r){const n={...t.data.slice(a,s).reduce(((e,t)=>(e.data.push(t.data),e.metadata.push(t.metadata),e)),{data:[],metadata:[]}),fetchParameters:e??{},totalFilteredRowCount:t.totalSize},i=Math.min(s,r-a);return a+=a+i,{value:n,done:!1}}return{value:{data:[],metadata:[],fetchParameters:e??{},totalFilteredRowCount:t.totalSize},done:!0}}}}}}getCapability(){return null}getTotalSize(){return Promise.resolve(this.dataState.data.totalSize)}isEmpty(){return 0===this.dataState.data.totalSize?"yes":"no"}addEventListener(){}dispatchEvent(){return!1}removeEventListener(){}}})),define("oj-c/select-common/PRIVATE_useSelectData/useCollectionTemplateDataProviderView",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","./CollectionTemplateDataProviderView"],(function(require,e,t,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCollectionTemplateDataProviderView=function({dataProvider:e,options:{dataStateOverride:n,filterCriterion:i}}){const[o,l]=(0,a.useReducer)(r,{dataState:(0,t.getEmptyState)("atLeast")}),u=(0,a.useMemo)((()=>null==e?e:new s.CollectionTemplateDataProviderView(e,{onInitializeFetch(){l({type:"loading"})},onNextIteration({results:{data:e,metadata:t,fetchParameters:a},offset:s,done:r}){if(a.signal?.aborted)return;const n=e.map(((e,a)=>({data:e,metadata:t[a]})));l({type:"append",payload:{items:n,offset:s,done:r}})},onOffsetFetch({results:{results:e,done:t,fetchParameters:a}}){a.signal?.aborted||l({type:"update",payload:{items:e,done:t,offset:a.offset}})},onRefresh(){l({type:"loading"})}})),[e]),d=(0,a.useRef)();d.current!==i&&(d.current=i,u?.setFilterCriterion(i));const c=(0,a.useRef)();c.current!==n&&(c.current=n,u?.setDataStateOverride(n));return{dataState:o.dataState,dataProvider:u}};const r=(e,{type:t,payload:a})=>{switch(t){case"append":{const{dataState:t}=e,s="success"===t.status?t.data:null,{done:r,items:n}=a;return{...e,dataState:{status:"success",data:{data:[...s?.data??[],...n],offset:s?.offset??0,sizePrecision:r?"exact":"atLeast",totalSize:(s?.data.length??0)+n.length}}}}case"update":return{...e,dataState:{status:"success",data:{data:a.items,offset:a.offset,sizePrecision:a.done?"exact":"atLeast",totalSize:a.items.length}}};case"loading":return{...e,dataState:{status:"loading",data:null}};default:return e}}})),define("oj-c/select-common/PRIVATE_useSelectData/useSelectData",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","../UNSAFE_useWrapDataProvider/index","./useCollectionTemplateDataProviderView"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectData=void 0;const n=()=>{};e.useSelectData=({data:e,dataStateOverride:i,filterCriterion:o,hasCollectionTemplate:l})=>{const u=(0,s.useWrapDataProvider)(e),[d,c]=(0,t.useListData)(u??null,{filterCriterion:o,initialRowsFetched:0}),p=(0,a.useMemo)((()=>i?{status:"success",data:i}:void 0),[i]),{dataState:f,dataProvider:m}=(0,r.useCollectionTemplateDataProviderView)({dataProvider:u,options:{dataStateOverride:p,filterCriterion:o}});return{dataProvider:l?m:u,dataState:l?p??f:d,onLoadRange:l?n:c}}})),define("oj-c/select-common/PRIVATE_useSelectData/index",["require","exports","./useSelectData","./CollectionTemplateDataProviderView"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SELECT_INTERNALS=e.useSelectData=void 0,Object.defineProperty(e,"useSelectData",{enumerable:!0,get:function(){return t.useSelectData}}),Object.defineProperty(e,"SELECT_INTERNALS",{enumerable:!0,get:function(){return a.SELECT_INTERNALS}})})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","preact/hooks","../PRIVATE_useSelectData/index","../utils/utils"],(function(require,e,t,a,s,r){"use strict";function n(e){return e instanceof Set?new Set(e.values()):e}function i(e){return null!=e&&("object"==typeof e&&["key","data"].every((t=>t in e)))}function o(e,t){return e instanceof Set&&t instanceof Set||e instanceof Map&&t instanceof Map?e.size===t.size:i(e)&&i(t)?e.key===t.key:e===t}function l(e,t){return e instanceof Set?e.has(t):null!=e&&e===t}function u(e,t){return e instanceof Set||e instanceof Map?(e.delete(t),e):"number"==typeof e||"string"==typeof e?e===t?r.DEFAULT_VALUE:e:"object"==typeof e&&e.key===t?r.DEFAULT_VALUE_ITEMS:e}Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProviderListeners=function({dataProvider:e,setValue:s,setValueToSync:i,setValueItemsToSync:c,value:p,valueItems:f}){const m=p instanceof Set,y=(0,a.useCallback)((e=>{d(e)&&((0,r.isEmpty)(p)||(i(n(p)),c(r.DEFAULT_VALUE_ITEMS)))}),[c,i,p]),v=(0,a.useCallback)((e=>{if((0,r.isEmpty)(p))return;let a=n(p);if(null!=e.detail.remove){e.detail.remove.keys.forEach((e=>{l(a,e)&&(a=u(a,e),(0,t.warn)(`\n              ${m?"SelectMultiple":"SelectSingle"}: selected value removed from data provider: ${e}`))})),o(a,p)||(s((0,r.isEmpty)(a)?r.DEFAULT_VALUE:a),i((0,r.isEmpty)(a)?r.DEFAULT_VALUE:a))}var d;if(!(0,r.isEmpty)(a)&&null!=e.detail.update){const t=e.detail.update.keys;let s=(0,r.isEmpty)(f)?f:(d=f)instanceof Map?new Map(d.entries()):Object.assign({},d);t.forEach((e=>{l(a,e)&&(s=u(s,e))})),o(s,f)||(i(a),c((0,r.isEmpty)(s)?r.DEFAULT_VALUE_ITEMS:s))}}),[m,s,c,i,p,f]);(0,a.useEffect)((()=>(e?.addEventListener("refresh",y),e?.addEventListener("mutate",v),()=>{e?.removeEventListener("refresh",y),e?.removeEventListener("mutate",v)})),[e,v,y])};const d=e=>{if(s.SELECT_INTERNALS in e){const{cause:t=""}=e[s.SELECT_INTERNALS];return!["filterCriterionChanged","dataOverrideChanged"].includes(t)}return!0}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-single/useSyncValueAndValueItem",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","oj-c/select-common/utils/utils","preact/hooks"],(function(require,e,t,a,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSyncValueAndValueItem=function({addBusyState:e,dataProvider:n,setDisplayValue:i,setIsLoading:o,setValue:l,setValueItem:u,value:d,valueItem:c,validateValueOnExternalChange:p}){const f=(0,r.useRef)(d),m=(0,r.useRef)(c),{setStaleIdentity:y}=(0,a.useStaleIdentity)(),v=null!=d,h=null!=c,g=(0,r.useCallback)((async()=>{if(!v)return void(h&&u(s.DEFAULT_VALUE_ITEM));if(null!=d&&null!=c&&c.key===d.value)return void u(Object.assign({},c));if(!n)return;o(!0);const a=e("useSyncValueItem: calling fetchByKeys"),{isStale:r}=y("useSyncValueItem:fetchByKeys");try{const e=await n.fetchByKeys({keys:new Set([d.value])});if(!r()){const t=function(e,t,a){if(t&&t.key===e)return t;const s=a.get(e);if(!s)throw new Error(`oj-c-select-single: could not fetch data for key ${e}`);return{key:e,data:s.data,metadata:s.metadata?s.metadata:{key:e}}}(d.value,c,e.results);u(t)}}catch(e){r()||(0,t.error)(`SelectMultiple: fetchByKeys promise rejected: ${e}`)}r()||o(!1),a()}),[e,n,v,h,o,y,u,d,c]),S=(0,r.useCallback)((()=>{const e=e=>{p(e)&&(l(e),i(e))};h?c.key===d?.value||e(c.key):v&&e(s.DEFAULT_VALUE)}),[v,h,i,l,p,d,c]);(0,r.useEffect)((()=>{v?g():h&&S()}),[]),(0,r.useEffect)((()=>{d!==f.current&&c!==m.current?(f.current=d,m.current=c,d?g():S()):d!==f.current?(f.current=d,g()):c!==m.current&&(m.current=c,S())}),[g,S,d,c])}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-single/useValueItem",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueItem=function(e,s){const[r,n]=(0,t.useUncontrolledState)(e,s);return(0,a.useEffect)((()=>{r!==e&&n(e)}),[e]),{valueItem:r,setValueItem:n}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/select-single/useSelectSinglePreact",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","oj-c/hooks/UNSAFE_useEditableValue/index","oj-c/hooks/UNSAFE_useComponentMessages/useComponentMessages","oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators","oj-c/select-common/PRIVATE_useCache/index","oj-c/select-common/PRIVATE_useSelectData/index","oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners","oj-c/select-common/utils/utils","ojs/ojkeyset","preact/hooks","./useSyncValueAndValueItem","./useValueItem"],(function(require,e,t,a,s,r,n,i,o,l,u,d,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectSinglePreact=function({advancedSearch:e,collectionTemplate:f,data:m,disabled:y,displayOptions:v,itemTemplate:h,itemText:g,labelEdge:S,labelHint:E,labelStartWidth:b,matchBy:V,messagesCustom:_,placeholder:A,readonly:C,readonlyUserAssistanceShown:D,requiredMessageDetail:P,required:M,textAlign:T,userAssistanceDensity:w,value:j,valueItem:x,virtualKeyboard:U,onMessagesCustomChanged:F,onOjAdvancedSearchAction:R,onOjValueAction:L,onValidChanged:O,onValueChanged:I,onValueItemChanged:k,...N},q){const[B,z]=(0,d.useState)(void 0),[H,K]=(0,d.useState)(null!=m&&null!=j&&null==x),W=(0,d.useMemo)((()=>V&&V.length>0?[...V]:void 0),[V]),{valueItem:G,setValueItem:$}=(0,p.useValueItem)(x,k),[Y,X]=(0,d.useState)(G);(0,d.useEffect)((()=>{X(G)}),[G]);const J=(0,t.useTranslationBundle)("@oracle/oraclejet-preact"),Q=P||J.select_requiredMessageDetail(),Z=(0,r.useDeferredValidators)({labelHint:E,required:M,requiredMessageDetail:Q}),ee=(0,d.useCallback)((()=>{X(G)}),[G]),{methods:te,onCommitValue:ae,setDisplayValue:se,setValue:re,textFieldProps:ne,value:ie,validateValueOnExternalChange:oe}=(0,a.useEditableValue)({addBusyState:q,ariaDescribedBy:N["aria-describedby"],defaultDisplayValue:null,deferredValidators:Z,disabled:y,displayOptions:v,messagesCustom:_,onDisplayValueChanged:ee,onMessagesCustomChanged:F,onValidChanged:O,onValueChanged:I,readonly:C,value:j}),{messages:le,...ue}=ne,de=(0,s.useComponentMessages)({evMessages:le,messagesCustom:_,readonly:C,readonlyUserAssistanceShown:D}),{"aria-describedby":ce}=ue,pe=null===ie,{dataProvider:fe,dataState:me,onLoadRange:ye}=(0,i.useSelectData)({data:m,filterCriterion:B,hasCollectionTemplate:void 0!==f}),[ve,he]=(0,d.useState)(null!=ie?{value:ie}:ie),ge=(0,d.useCallback)((e=>{he("function"!=typeof e?null!=e?{value:e}:e:t=>{const a=e(t?.value);return null!=a?{value:a}:a})}),[]),[Se,Ee]=(0,d.useState)(G);(0,d.useEffect)((()=>{ge(ie)}),[ie]),(0,d.useEffect)((()=>{Ee(G)}),[G]),(0,o.useDataProviderListeners)({dataProvider:fe,setValue:re,setValueToSync:ge,setValueItemsToSync:Ee,value:ie,valueItems:G}),(0,c.useSyncValueAndValueItem)({addBusyState:q,dataProvider:fe,setDisplayValue:se,setIsLoading:K,setValue:re,setValueItem:$,value:ve,valueItem:Se,validateValueOnExternalChange:oe});const be=(0,d.useCallback)((async({previousValue:e,value:t})=>{const a=null!=t?t:l.DEFAULT_VALUE;se(a);const s=await ae(a);if(s){if(s&&"success"===me.status)if(null==t)L?.({itemContext:l.DEFAULT_ITEM_CONTEXT,previousValue:e??l.DEFAULT_VALUE,value:l.DEFAULT_VALUE});else if(t===G?.key)L?.({itemContext:G,previousValue:e??l.DEFAULT_VALUE,value:t}),Y!==G&&X(G);else{let a=me.data.data.find((e=>e.metadata.key===t));if(void 0===a){a=(await fe.fetchByKeys({keys:new Set([t])})).results.get(t)}const s={data:a.data,key:a.metadata.key,metadata:a.metadata};L?.({itemContext:s,previousValue:e??l.DEFAULT_VALUE,value:t??l.DEFAULT_VALUE})}}else X(void 0)}),[fe,me,Y,G,ae,L,se]),Ve=(0,d.useCallback)((({searchText:e})=>{const t=(0,l.getFilterCriterion)(fe,e,W);z(t)}),[fe,W]),_e=(0,d.useMemo)((()=>{if(h)return({data:e,metadata:t,searchText:a})=>h({item:{data:e,metadata:t},searchText:a})}),[h]),Ae=(0,d.useRef)(),Ce=(0,n.useCache)(),De=(0,d.useMemo)((()=>{if(f)return({currentRowKeyOverride:e,searchText:t,selected:a,onPersistCurrentRowKey:s,onRowAction:r})=>{const n={currentRowOverride:Ce("currentRowOverride",e?{rowKey:e}:void 0,[e,t]),data:fe,onCurrentRowChanged:Ce("onCurrentRowChanged",(({rowKey:e})=>{s({value:e})}),[s]),onRowAction:Ce("onRowAction",(({item:e})=>{r({context:{data:e.data,key:e.metadata.key,metadata:e.metadata}})}),[r]),searchText:t,selected:Ce("selected",new u.KeySetImpl([...a?.values()??[]]),[a])};return Ae.current?Object.assign(Ae.current,n):Ae.current=n,f(Ae.current)}}),[Ce,f,fe]),Pe=(0,d.useCallback)((async e=>be({value:e??void 0,previousValue:j??void 0})),[be,j]),Me=(0,d.useCallback)((e=>{R?.(e)}),[R]),Te=(0,d.useCallback)((e=>{Me({searchText:e})}),[Me]);return{methods:te,selectSingleProps:{advancedSearch:e,"aria-describedby":ce,collectionRenderer:De,data:"error"!==me.status?me.data:null,isDisabled:y,isLoading:H,isReadonly:C,isRequired:M,isRequiredShown:M&&("compact"===w||pe),itemRenderer:_e,itemText:g,label:E,labelEdge:S,labelStartWidth:b,messages:de,onAdvancedSearchAction:Me,onCommit:be,onFilter:Ve,onLoadRange:ye,placeholder:A,textAlign:T,userAssistanceDensity:w,valueItem:(0,a.treatNull)(Y,void 0),virtualKeyboard:U},_doAdvancedSearchAction:Te,_selectItemByValue:Pe}}})),define("oj-c/select-single/select-single",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/UNSAFE_SelectSingle","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","@oracle/oraclejet-preact/utils/UNSAFE_classNames","@oracle/oraclejet-preact/utils/UNSAFE_styles/FormControl","@oracle/oraclejet-preact/utils/UNSAFE_styles/Layout","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext","ojs/ojvcomponent","preact/compat","preact/hooks","./useSelectSinglePreact","ojs/ojcontext","@oracle/oraclejet-preact/UNSAFE_TextField","@oracle/oraclejet-preact/hooks/UNSAFE_useComponentTheme","css!oj-c/select-single/select-single-styles.css"],(function(require,e,t,a,s,r,n,i,o,l,u,d,c,p,f,m,y,v,h,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0;const S={messages:"display"},E={instruction:""},b={definition:"",source:""},V=[];const _=(0,p.registerCustomElement)("oj-c-select-single",(0,f.forwardRef)((function({advancedSearch:e="off",columnSpan:a=1,containerReadonly:i,data:f=null,disabled:_=!1,displayOptions:A=S,help:C=E,helpHints:D=b,id:P,labelWrapping:M,matchBy:T=null,messagesCustom:w=V,readonly:j,readonlyUserAssistanceShown:x="none",required:U=!1,textAlign:F,userAssistanceDensity:R,value:L=null,valueItem:O=null,virtualKeyboard:I="auto",...k},N){const q=(0,m.useRef)(),B=(0,m.useRef)(),z=(0,m.useCallback)((e=>q.current?v.getContext(q.current).getBusyContext().addBusyState({description:`oj-c-select-single id=${P}: ${e}`}):()=>{}),[P]),{containerProps:H,uadValue:K,readonlyValue:W}=(0,c.useMergedFormContext)({propContainerReadonly:i,propLabelWrapping:M,propReadonly:j,propUserAssistanceDensity:R,propTextAlign:F}),{selectSingleProps:G,methods:$,_doAdvancedSearchAction:Y,_selectItemByValue:X}=(0,y.useSelectSinglePreact)({advancedSearch:e,data:f,disabled:_,displayOptions:A,matchBy:T,messagesCustom:w,readonly:W,readonlyUserAssistanceShown:x,required:U,userAssistanceDensity:K,value:L,valueItem:O,virtualKeyboard:I,...k},z);(0,m.useImperativeHandle)(N,(()=>({blur:()=>B.current?.blur(),focus:()=>B.current?.focus(),_doAdvancedSearchAction:Y,_selectItemByValue:X,UNSAFE_focusAndOpenDropdown:()=>{if(q.current){const e=q.current,t=()=>e.firstElementChild?.dispatchEvent(new MouseEvent("mousedown"));v.getContext(e).getBusyContext().whenReady().then(t)}},...$})),[$,Y,X]);const J=(0,d.useAssistiveText)({displayOptions:A,help:C,helpHints:D,userAssistanceDensity:G.userAssistanceDensity}),Q=(0,n.useFormVariantContext)(),{classes:Z}=(0,g.useComponentTheme)(h.TextFieldRedwoodTheme,{maxWidth:"md"===k.maxWidth||"sm"===k.maxWidth?k.maxWidth:"none",width:"md"===k.width||"sm"===k.width?k.width:"none"}),ee=(0,o.classNames)([u.layoutSpanStyles.layoutSpanColumn[a],Q&&["embedded","legacyEmbedded"].includes(Q)&&l.formControlStyles.embeddedRoot,H.isFormLayout&&"in-form-layout",Z]),te={style:{width:"md"===k.width||"sm"===k.width?void 0:k.width,maxWidth:"md"===k.maxWidth||"sm"===k.maxWidth?void 0:k.maxWidth}};return(0,t.jsx)(p.Root,{id:P,ref:q,class:ee,...te,"data-oj-renders-label":!0,children:(0,t.jsx)(r.FormContext.Provider,{value:H,children:(0,t.jsx)(s.SelectSingle,{ref:B,...J,...G,columnSpan:a,variant:Q})})})})),"SelectSingle",{properties:{advancedSearch:{type:"string",enumValues:["off","on"]},columnSpan:{type:"number"},containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},data:{type:"DataProvider|null"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},itemText:{type:"string|number|function"},labelEdge:{type:"string",enumValues:["none","start","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"number|string",binding:{consume:{name:"labelWidth"}}},labelWrapping:{type:"string",enumValues:["truncate","wrap"],binding:{consume:{name:"labelWrapping"}}},matchBy:{type:"Array<string>|null"},maxWidth:{type:"number|string"},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},readonlyUserAssistanceShown:{type:"string",enumValues:["none","confirmationAndInfoMessages"]},required:{type:"boolean"},requiredMessageDetail:{type:"string"},textAlign:{type:"string",enumValues:["end","start","right"]},userAssistanceDensity:{type:"string",enumValues:["compact","reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},value:{type:"string|number|null",writeback:!0},valueItem:{type:"object|null",properties:{data:{type:"any"},key:{type:"string|number"},metadata:{type:"object",properties:{indexFromParent:{type:"number"},isLeaf:{type:"boolean"},key:{type:"string|number"},message:{type:"object",properties:{detail:{type:"string"},severity:{type:"string|number"},summary:{type:"string"}}},parentKey:{type:"string|number"},suggestion:{type:"object"},treeDepth:{type:"number"}}}},writeback:!0},virtualKeyboard:{type:"string",enumValues:["number","search","auto","url","text","email","tel"]},width:{type:"number|string"},valid:{type:"string",enumValues:["pending","valid","invalidHidden","invalidShown"],readOnly:!0,writeback:!0}},slots:{collectionTemplate:{data:{}},itemTemplate:{data:{}}},events:{ojAdvancedSearchAction:{},ojValueAction:{}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItem"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{blur:{},focus:{},showMessages:{},reset:{},validate:{},_doAdvancedSearchAction:{},_selectItemByValue:{},UNSAFE_focusAndOpenDropdown:{}}},{advancedSearch:"off",columnSpan:1,data:null,disabled:!1,displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:""},matchBy:null,messagesCustom:[],readonlyUserAssistanceShown:"none",required:!1,value:null,valueItem:null,virtualKeyboard:"auto"},{"@oracle/oraclejet-preact":a.default},{consume:[r.FormContext,n.FormVariantContext,i.TabbableModeContext]});e.SelectSingle=_})),define("oj-c/select-single",["require","exports","oj-c/select-single/select-single"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0,Object.defineProperty(e,"SelectSingle",{enumerable:!0,get:function(){return t.SelectSingle}})}));
//# sourceMappingURL=select-single.js.map