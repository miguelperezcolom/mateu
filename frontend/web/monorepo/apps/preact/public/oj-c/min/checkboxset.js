/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useMergedFormContext=function({propContainerReadonly:e,propLabelWrapping:t,propReadonly:s,propTextAlign:r,propUserAssistanceDensity:n}){const o=(0,a.useFormContext)(),i=n??o.userAssistanceDensity,l=s??o.isReadonly,{isFormLayout:u,isReadonly:d,labelWrapping:c,textAlign:p,...y}=o;return{containerProps:{...y,isFormLayout:void 0!==e||u,isReadonly:e??d,labelWrapping:t??c,textAlign:r??p},readonlyValue:l,uadValue:i}}})),define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,a){"use strict";function t(e,a,t,s,r,n){const o="compact"!==n?t?.definition:void 0;return e?.instruction||("none"===r?.validatorHint?void 0:a)||o||("none"===r?.converterHint?void 0:s)}function s(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=function({addBusyState:e,converter:r,displayOptions:n,help:o,helpHints:i,userAssistanceDensity:l,validators:u}){const[d,c]=(0,a.useState)(u&&u.length?s(u):void 0),p=(0,a.useRef)();(0,a.useEffect)((()=>{if(!u||!u.length)return void c(void 0);c(s(u));const a=u.map((e=>e.hint)).filter(Boolean),t=p.current=Symbol(),r=e?.("resolving the async validator hints");Promise.allSettled(a).then((e=>{c((a=>{const s=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return t===p.current&&s.length?[a,...s].join("\n"):a})),r?.()}))}),[u]);const y="compact"!==l?i?.sourceText:i?.definition||i?.sourceText;return{assistiveText:t(o,d,i,r?.getHint?.()??void 0,n,l),helpSourceLink:i?.source,helpSourceText:y}}})),
/**
 * @license
 * Copyright (c) %FIRSTYEAR% %CURRENTYEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function a(e,a,t,s){const r=[...s];return e.forEach(((e,s)=>{const n={data:a[s],key:t[s]?.key,metadata:t[s]};e>=0?r.splice(e,0,n):r.push(n)})),r}async function t(e,a){const t=[],s=(await e.fetchByKeys({keys:a})).results;for(const e of a)if(s.has(e)){const a=s.get(e);t.push({...a,key:e})}return t}function s(e,a){return e.has(a)?e.get(a):-1}function r(e,a){const t=[...a];return e.sort(((e,a)=>a-e)),e.forEach((e=>{e<t.length&&t.splice(e,1)})),t}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=async function(e,n,o){const{add:i,remove:l,update:u}=e??{},d=new Map;for(const[e,a]of n.entries())d.set(a.key,e);let c=[...n];l&&(c=function(e,a,t){const{indexes:n,keys:o}=e;let i=[...a];n?.length?i=r(n,i):o?.size&&(i=function(e,a,t){const n=[];return e.forEach((e=>{const a=s(t,e);-1!==a&&n.push(a)})),r(n,a)}(o,i,t));return i}(l,c,d));i&&(c=await async function(e,r,n,o){const{addBeforeKeys:i,data:l,indexes:u,keys:d,metadata:c}=e;let p=[...r],y=l||[],h=c||[];if(0===y.length&&d?.size){const e=await t(o,d)??[];y=e.map((e=>e.data)),h=e.map((e=>e.metadata))}0===h.length&&d?.size&&(h=[...d].map((e=>({key:e}))));y.length&&(p=u?.length?a(u,y,h,p):i?.length?function(e,t,r,n){const o=[],i=[];return e.forEach((e=>{o.push(s(n,e)),i.push({key:e})})),a(o,t,i,r)}(i,y,p,n):function(e,t,s){return a(new Array(e.length).fill(-1),e,t,s)}(y,h,p));return p}(i,c,d,o));u&&(c=await async function(e,a,r,n){const{data:o,indexes:i,keys:l,metadata:u}=e;let d=[...a],c=o||[],p=u||[];if(0===c.length&&l?.size){const e=await t(n,l)??[];c=e.map((e=>e.data)),p=e.map((e=>e.metadata))}0===p.length&&l?.size&&(p=[...l].map((e=>({key:e}))));c.length&&(i?.length?d=function(e,a,t,s){const r=[...s];return e.forEach(((e,s)=>{if(r[e]){const n={data:a[s],key:t[s]?.key,metadata:t[s]};r.splice(e,1,n)}})),r}(i,c,p,d):l?.size&&(d=function(e,a,t,r,n){const o=[...r];return e.forEach((e=>{const r=s(n,e),i={data:a[r],key:t[r]?.key,metadata:t[r]};r>=0&&o.splice(r,1,i)})),o}(l,c,p,d,r)));return d}(u,c,d,o));return c}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,t,s){this.handleMutateEvent=async e=>{const{detail:t}=e,s=this.addBusyState("updating data from mutation event"),r=await(0,a.getUpdatedItemsFromMutationDetail)(t,this.currentData,this.dataProvider);s?.(),this.currentData=r,this.callback?.onDataUpdated?.(r)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=t,this.callback=s,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],a=this.dataProvider.fetchFirst({size:-1});for await(const t of a){const a=t.data.map(((e,a)=>({data:e,key:t.metadata[a].key,metadata:t.metadata[a]})));e.push(...a)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),a=await this._fetchData();this.callback?.onDataUpdated?.(a),e()}}})),
/**
 * @license
 * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,a,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=function({addBusyState:e,data:s}){const[r,n]=(0,a.useState)([]),o=(0,a.useRef)();return(0,a.useEffect)((()=>(void 0!==s&&(o.current=new t.DataProviderHandler(s,e,{onDataUpdated:n})),()=>{o.current?.destroy(),o.current=void 0})),[s,e]),{data:r}}})),define("oj-c/hooks/UNSAFE_useEditableValue/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.treatNull=e.normalizeValue=e.isShallowEqual=e.hasErrorMessages=e.getVirtualKeyboardHintFromConverter=e.createMessageFromError=void 0;e.createMessageFromError=e=>"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message};e.treatNull=(e,a)=>null===e?a:e;e.normalizeValue=e=>"string"==typeof e&&""===e?null:e;e.isShallowEqual=(e,a)=>e===a||e.length===a.length&&e.every(((e,t)=>e===a[t]));e.hasErrorMessages=e=>!!e&&e.some((e=>"error"===e.severity));e.getVirtualKeyboardHintFromConverter=e=>{let a;if(e&&e.resolvedOptions){const t=e.resolvedOptions();a=t?.virtualKeyboardHint??"text"}else a="text";return a}})),define("oj-c/hooks/UNSAFE_useEditableValue/converterUtils",["require","exports","./utils"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=function(e,t,s){if(function(e){return null===e}(e))return{result:"success",value:t};try{return{result:"success",value:s.format(e)}}catch(e){return{result:"failure",error:(0,a.createMessageFromError)(e)}}},e.parse=function(e,t,s){if(void 0===e)return{result:"success",value:null};if(r=e,""===r||null===r)return{result:"success",value:e};var r;try{return{result:"success",value:t.parse(e)}}catch(e){return{result:"failure",error:s?.(e)??(0,a.createMessageFromError)(e)}}}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=function(){const e=(0,a.useRef)(new Map);return{setStaleIdentity:(0,a.useCallback)((a=>{const t=Symbol();return e.current.set(a,t),{isStale:()=>t!==e.current.get(a)}}),[])}}})),define("oj-c/hooks/UNSAFE_useEditableValue/reducer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=function(e,a){const t=e.customMessages??[],s=e.hiddenMessages,r=e.componentMessages,n=e.shownMessages;switch(a.type){case"ADD_COMPONENT_MESSAGE":return{...e,componentMessages:[...r,a.payload],shownMessages:[...n,a.payload]};case"ADD_HIDDEN_MESSAGE":return{...e,hiddenMessages:[...s,a.payload]};case"CLEAR_ALL_MESSAGES":return{...e,shownMessages:[],hiddenMessages:[],customMessages:[],componentMessages:[]};case"SHOW_HIDDEN_MESSAGES":return 0===s.length?e:{...e,hiddenMessages:[],shownMessages:[...t,...r,...s]};case"UPDATE_DISPLAY_VALUE":return{...e,displayValue:a.payload};case"UPDATE_VALID":return{...e,valid:a.payload};case"UPDATE_VALUE":return{...e,value:a.payload};case"UPDATE_TRANSIENT_VALUE":return{...e,transientValue:a.payload};case"UPDATE_PREVIOUS_CONVERTER":return{...e,previousConverter:a.payload};case"UPDATE_PREVIOUS_DEFERRED_VALIDATORS":return{...e,previousDeferredValidators:a.payload};case"UPDATE_PREVIOUS_DISABLED":return{...e,previousDisabled:a.payload};case"UPDATE_PREVIOUS_READONLY":return{...e,previousReadonly:a.payload};case"UPDATE_PREVIOUS_VALIDATORS":return{...e,previousValidators:a.payload};case"UPDATE_PREVIOUS_VALUE":return{...e,previousValue:a.payload};case"UPDATE_COMPONENT_MESSAGES":return{...e,componentMessages:a.payload,shownMessages:[...t,...a.payload]};case"UPDATE_HIDDEN_MESSAGES":return{...e,hiddenMessages:a.payload};case"UPDATE_CUSTOM_MESSAGES":return{...e,customMessages:a.payload,shownMessages:[...a.payload,...r]};default:return e}},e.addComponentMessage=function(e,a){e({type:"ADD_COMPONENT_MESSAGE",payload:a})},e.addHiddenMessage=function(e,a){e({type:"ADD_HIDDEN_MESSAGE",payload:a})},e.clearAllMessages=function(e,a,{onMessagesCustomChanged:t}){e({type:"CLEAR_ALL_MESSAGES"}),t?.([])},e.showHiddenMessages=function(e){e({type:"SHOW_HIDDEN_MESSAGES"})},e.updateComponentMessages=function(e,a){e({type:"UPDATE_COMPONENT_MESSAGES",payload:a})},e.updateCustomMessages=function(e,a){e({type:"UPDATE_CUSTOM_MESSAGES",payload:a})},e.updateDisplayValue=function(e,a,{onRawValueChanged:t}){e({type:"UPDATE_DISPLAY_VALUE",payload:a}),t?.(a)},e.updateHiddenMessages=function(e,a){e({type:"UPDATE_HIDDEN_MESSAGES",payload:a})},e.updatePreviousConverter=function(e,a){e({type:"UPDATE_PREVIOUS_CONVERTER",payload:a})},e.updatePreviousDeferredValidators=function(e,a){e({type:"UPDATE_PREVIOUS_DEFERRED_VALIDATORS",payload:a})},e.updatePreviousDisabled=function(e,a){e({type:"UPDATE_PREVIOUS_DISABLED",payload:a})},e.updatePreviousReadonly=function(e,a){e({type:"UPDATE_PREVIOUS_READONLY",payload:a})},e.updatePreviousValidators=function(e,a){e({type:"UPDATE_PREVIOUS_VALIDATORS",payload:a})},e.updatePreviousValue=function(e,a){e({type:"UPDATE_PREVIOUS_VALUE",payload:a})},e.updateTransientValue=function(e,a,{onTransientValueChanged:t}){e({type:"UPDATE_TRANSIENT_VALUE",payload:a}),t?.(a)},e.updateValidStatus=function(e,a,{onValidChanged:t}){e({type:"UPDATE_VALID",payload:a}),t?.(a)},e.updateValue=function(e,a,{onValueChanged:t}){e({type:"UPDATE_VALUE",payload:a}),t?.(a)}})),define("oj-c/hooks/UNSAFE_useEditableValue/validationUtils",["require","exports","./utils"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAsync=function({validators:e,value:t}){const s=(e,t)=>{try{const s=e.validate(t);if(s instanceof Promise)return s.then((()=>{}),(e=>({message:(0,a.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy})))}catch(e){return{message:(0,a.createMessageFromError)(e),messageDisplayStrategy:e?.messageDisplayStrategy}}},r=[],n=[];for(const a of e){const e=s(a,t);void 0!==e&&(e instanceof Promise?n.push(e):r.push(e))}return{errors:r,maybeErrorPromises:n}},e.validateSync=function({validators:e,value:t}){const s=[];for(const r of e)try{r.validate(t)}catch(e){s.push((0,a.createMessageFromError)(e))}if(s.length)return{result:"failure",errors:s};return{result:"success"}}})),define("oj-c/hooks/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","./converterUtils","./utils","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","./reducer","./validationUtils"],(function(require,e,a,t,s,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=function({addBusyState:e,ariaDescribedBy:i,converter:l,defaultDisplayValue:u,deferredValidators:d,disabled:c,displayOptions:p,messagesCustom:y,onDisplayValueChanged:h,onMessagesCustomChanged:v,onRawValueChanged:g,onTransientValueChanged:f,onValidChanged:m,onValueChanged:S,translateConverterParseError:E,readonly:b,validators:V,value:M}){const A=(0,a.useRef)(!0),{setStaleIdentity:D}=(0,r.useStaleIdentity)(),[C,_]=(0,a.useReducer)(n.reducer,{shownMessages:[],hiddenMessages:[],customMessages:y,componentMessages:[],value:M,valid:"pending"},(e=>{const a=l?(0,t.format)(M,u,l):{result:"success",value:(0,s.treatNull)(M,u)};return{...e,displayValue:"success"===a.result?a.value:u}})),P=(0,a.useRef)(),k=(0,a.useRef)(!1),U=(0,a.useCallback)((e=>{e!==P.current&&(P.current=e,m?.(e))}),[m]),x=(0,a.useCallback)(((e,a)=>(e(_,a,{onMessagesCustomChanged:v,onRawValueChanged:g,onTransientValueChanged:f,onValidChanged:U,onValueChanged:S}),!0)),[_,v,g,f,U,S]),j=(0,a.useCallback)((e=>{const a="string"==typeof e?e.trim():e;return(0,o.validateSync)({validators:d??[],value:a})}),[d]),w=(0,a.useCallback)((e=>{x(n.updateValue,e)}),[x]),O=(0,a.useCallback)((e=>{x(n.updateDisplayValue,e)}),[x]),R=(0,a.useCallback)((e=>{x(n.updateTransientValue,e)}),[x]),T=(0,a.useCallback)((e=>{let a;if(l){const r=(0,t.format)(e,u,l);"failure"===r.result?(x(n.updateComponentMessages,[r.error]),x(n.updateValidStatus,"invalidShown"),a=(0,s.treatNull)(e,u)):a=r.value}else a=(0,s.treatNull)(e,u);return a}),[l,u,x]),N=(0,a.useCallback)((e=>{const a=T(e);return x(n.updateDisplayValue,a),h?.(),!0}),[x,T,h]),F=(0,a.useCallback)((()=>"invalidShown"!==C.valid?{result:"success",value:C.value}:l?(0,t.parse)((0,s.normalizeValue)(C.displayValue),l,E):{result:"success",value:(0,s.normalizeValue)(C.displayValue)}),[l,C.displayValue,C.valid,C.value,E]),H=(0,a.useCallback)((e=>l?(0,t.parse)((0,s.normalizeValue)(e),l,E):{result:"success",value:(0,s.normalizeValue)(e)}),[l,E]),I=(0,a.useCallback)((e=>{const a=H(e);return"failure"===a.result&&(x(n.updateComponentMessages,[a.error]),x(n.updateValidStatus,"invalidShown")),a}),[x,H]),L=(0,a.useCallback)((async(a,t={})=>{const{doNotClearMessagesCustom:r=!1,forceHiddenMessagesToBeShown:i=!1}=t,l=r&&(0,s.hasErrorMessages)(y);if(r?(x(n.updateComponentMessages,[]),x(n.updateHiddenMessages,[])):x(n.clearAllMessages),!(V&&0!==V.length||d&&0!==d.length))return x(n.updateValidStatus,l?"invalidShown":"valid"),!0;const u=[],c=[],p=j(a);let h;"failure"===p.result&&u.push(...p.errors),null!=a&&(h=(0,o.validateAsync)({validators:V??[],value:a}),h.errors.forEach((({message:e,messageDisplayStrategy:a})=>{"displayOnBlur"!==a||k.current||i?u.push(e):c.push(e)})));const v=h?.maybeErrorPromises??[],g=0!==u.length||0!==c.length;if(!g&&!v.length)return x(n.updateValidStatus,l?"invalidShown":"valid"),!0;if(0!==u.length?(x(n.updateComponentMessages,u),x(n.updateValidStatus,"invalidShown")):0!==c.length&&(x(n.updateHiddenMessages,c),x(n.updateValidStatus,"invalidHidden")),!v.length)return!g;!g&&x(n.updateValidStatus,"pending");const f=e?.("running asynchronous validation"),{isStale:m}=D("useEditableValue-full-validate");let S=!1,E=!1;const b=[];for(const e of v){const a=e.then((e=>{if(e&&!m()){const{messageDisplayStrategy:a,message:t}=e;"displayOnBlur"!==a||k.current||i?(x(n.addComponentMessage,t),S=!0):(x(n.addHiddenMessage,t),E=!0)}}));b.push(a)}await Promise.all(b);const M=E||S,A=E||0!==c.length,C=S||0!==u.length;return m()||(g||M?C?x(n.updateValidStatus,"invalidShown"):A&&x(n.updateValidStatus,l?"invalidShown":"invalidHidden"):x(n.updateValidStatus,l?"invalidShown":"valid")),f?.(),!g&&!M}),[e,x,d,y,D,j,V]),q=async()=>{if(c||b)return;const e=F();if("failure"===e.result)return x(n.updateComponentMessages,[e.error]),void x(n.updateValidStatus,"invalidShown");const a=e.value;await G(a,{doNotClearMessagesCustom:!0})&&x(n.updateValue,a)&&N(a)},B=(0,a.useCallback)((e=>{x(n.clearAllMessages);const a=j(e);return"failure"===a.result&&x(n.updateHiddenMessages,a.errors),x(n.updateValidStatus,"failure"===a.result?"invalidHidden":"valid"),!0}),[x,j]),G=(0,a.useCallback)((async(a,t={})=>{const{isStale:s}=D("useEditableValue-validateValueOnInternalChange"),r=e?.("Running validateValueOnInternalChange"),n=await L(a,t);return r?.(),!s()&&n}),[e,L,D]),W=(0,a.useCallback)((async(e,a=!0)=>{const t=await G(e);return t&&a&&x(n.updateValue,e),t&&(k.current=!0),t}),[x,G]),z=(0,a.useCallback)((async({value:e})=>{const a=I(e);if("failure"===a.result)return!1;const t=a.value,s=await W(t);return s&&N(t),s}),[W,I,N]),K=(0,a.useCallback)((({value:e})=>{x(n.updateDisplayValue,e??u)}),[x,u]),Y=(0,a.useCallback)((async()=>{if(b||c)return"valid";const a=I(C.displayValue);if("failure"===a.result)return"invalid";const t=a.value,s=e?.("Running component method validate"),r=await L(t,{forceHiddenMessagesToBeShown:!0});return s?.(),r?(t!==C.value&&(x(n.updateValue,t),N(t)),"valid"):"invalid"}),[e,c,x,L,I,b,N,C.displayValue,C.value]),J=(0,a.useCallback)((()=>{B(C.value),N(C.value)}),[N,C.value,B]),Q=(0,a.useCallback)((()=>{C.hiddenMessages&&C.hiddenMessages.length>0&&(x(n.showHiddenMessages),x(n.updateValidStatus,"invalidShown"))}),[x,C.hiddenMessages]),X=(0,a.useCallback)((()=>{k.current=!1}),[]),Z=(0,a.useCallback)((e=>{x(n.addComponentMessage,e)}),[x]);A.current||C.previousValue===M||(x(n.updatePreviousValue,M),M!==C.value&&(B(M),x(n.updateValue,M),N(M)));A.current||C.previousConverter===l||(x(n.updatePreviousConverter,l),"invalidShown"!==C.valid&&N(M),"invalidShown"===C.valid&&q());A.current||C.previousValidators===V||(x(n.updatePreviousValidators,V),"invalidShown"===C.valid&&q());if(!A.current&&(!C.customMessages&&y||C.customMessages&&!y||C.customMessages&&y&&!(0,s.isShallowEqual)(C.customMessages,y))){const e=C.componentMessages??[],a=C.hiddenMessages??[],t=y??[],r=(0,s.hasErrorMessages)(t),o=a.length>0,i=0===e.length&&0===a.length&&0===t.length;x(n.updateCustomMessages,t),r&&x(n.updateValidStatus,"invalidShown"),!r&&"pending"!==C.valid&&(i&&x(n.updateValidStatus,"valid")||o&&x(n.updateValidStatus,"invalidHidden"))}if(!A.current&&(C.previousDeferredValidators!==d||C.previousDisabled!==c||C.previousReadonly!==b)){const e=0===d?.length;if(C.previousDeferredValidators!==d&&x(n.updatePreviousDeferredValidators,d),C.previousDisabled!==c&&x(n.updatePreviousDisabled,c),C.previousReadonly!==b&&x(n.updatePreviousReadonly,b),e||!b&&!c)switch(C.valid){case"valid":{const e=F();if("failure"===e.result)x(n.updateComponentMessages,[e.error]),x(n.updateValidStatus,"invalidShown");else{const a=j(e.value);"failure"===a.result&&x(n.updateHiddenMessages,a.errors)&&x(n.updateValidStatus,"invalidHidden")}break}case"invalidHidden":0===d?.length&&(x(n.updateValidStatus,"valid"),x(n.updateHiddenMessages,[]));break;case"invalidShown":q()}}if(A.current)if(A.current=!1,x(n.updatePreviousValue,M),x(n.updatePreviousConverter,l),x(n.updatePreviousValidators,V),x(n.updatePreviousDeferredValidators,d),x(n.updatePreviousDisabled,c),x(n.updatePreviousReadonly,b),x(n.updateCustomMessages,y),x(n.updateTransientValue,M),c||b)x(n.updateValidStatus,"valid"),N(M);else{const e=j(M);"failure"===e.result&&x(n.updateHiddenMessages,e.errors)&&x(n.updateValidStatus,(0,s.hasErrorMessages)(y)?"invalidShown":"invalidHidden"),"success"===e.result&&x(n.updateValidStatus,(0,s.hasErrorMessages)(y)?"invalidShown":"valid")&&N(M)}return{value:C.value,addMessage:Z,clearInteractionFlags:X,displayValue:C.displayValue,formatValue:T,methods:{reset:J,showMessages:Q,validate:Y},onCommitValue:W,parseValue:I,refreshDisplayValue:N,setDisplayValue:O,setTransientValue:R,setValue:w,textFieldProps:{"aria-describedby":i,messages:"none"!==p?.messages?C.shownMessages:void 0,onCommit:z,onInput:K,value:C.displayValue},validateValueOnExternalChange:B}}})),define("oj-c/hooks/UNSAFE_useEditableValue/index",["require","exports","./utils","./useEditableValue"],(function(require,e,a,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=e.treatNull=e.getVirtualKeyboardHintFromConverter=void 0,Object.defineProperty(e,"getVirtualKeyboardHintFromConverter",{enumerable:!0,get:function(){return a.getVirtualKeyboardHintFromConverter}}),Object.defineProperty(e,"treatNull",{enumerable:!0,get:function(){return a.treatNull}}),Object.defineProperty(e,"useEditableValue",{enumerable:!0,get:function(){return t.useEditableValue}})})),define("oj-c/hooks/UNSAFE_useComponentMessages/useComponentMessages",["require","exports","preact/hooks"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useComponentMessages=function({evMessages:e,messagesCustom:t,readonly:s,readonlyUserAssistanceShown:r}){return(0,a.useMemo)((()=>s?"confirmationAndInfoMessages"===r?t?.filter((e=>"confirmation"===e.severity||"info"===e.severity)):[]:e),[t,s,r,e])}})),define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle"],(function(require,e,a,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=function({labelHint:e,required:r,requiredMessageDetail:n}){const o=(0,s.useTranslationBundle)("@oracle/oraclejet-preact"),i=n||o.formControl_requiredMessageDetail(),l=(0,t.useMemo)((()=>r?new a({label:e,messageDetail:i}):null),[r]);return(0,t.useMemo)((()=>[l].filter(Boolean)),[l])}})),define("oj-c/checkboxset/useCheckboxsetPreact",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","oj-c/hooks/UNSAFE_useEditableValue/index","oj-c/hooks/UNSAFE_useComponentMessages/useComponentMessages","preact/hooks","oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators"],(function(require,e,a,t,s,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCheckboxsetPreact=function({"aria-describedby":e,disabled:o,displayOptions:i,labelEdge:l,labelHint:u,labelStartWidth:d,messagesCustom:c,readonly:p,readonlyUserAssistanceShown:y,requiredMessageDetail:h,required:v,userAssistanceDensity:g,value:f,onMessagesCustomChanged:m,onValidChanged:S,onValueChanged:E},b){const V=(0,a.useTranslationBundle)("@oracle/oraclejet-preact"),M=h||V.checkboxSet_requiredMessageDetail(),A=(0,n.useDeferredValidators)({labelHint:u,required:v,requiredMessageDetail:M}),{methods:D,displayValue:C,onCommitValue:_,refreshDisplayValue:P,textFieldProps:k}=(0,t.useEditableValue)({addBusyState:b,ariaDescribedBy:e,defaultDisplayValue:null,deferredValidators:A,disabled:o,displayOptions:i,messagesCustom:c,onMessagesCustomChanged:m,onValidChanged:S,onValueChanged:E,readonly:p,value:f}),U=(0,s.useComponentMessages)({evMessages:k.messages,messagesCustom:c,readonly:p,readonlyUserAssistanceShown:y}),x=(0,r.useCallback)((async({value:e})=>{const a=e?Array.from(e):null,t=await _(a);P(t?a:null)}),[_,P]);return{methods:D,checkboxsetProps:{"aria-describedby":k["aria-describedby"],isRequired:v,isReadonly:p,isDisabled:o,label:u,labelEdge:l,labelStartWidth:d,messages:U,onCommit:x,userAssistanceDensity:g,value:C}}}})),define("oj-c/checkboxset/checkboxset",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","preact/hooks","preact/compat","ojs/ojcontext","@oracle/oraclejet-preact/utils/UNSAFE_styles/Layout","ojs/ojvcomponent","@oracle/oraclejet-preact/UNSAFE_CheckboxSet","@oracle/oraclejet-preact/UNSAFE_CheckboxItem","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","oj-c/hooks/UNSAFE_useDataProvider/useDataProvider","./useCheckboxsetPreact","@oracle/oraclejet-preact/utils/UNSAFE_classNames","css!oj-c/checkboxset/checkboxset-styles.css"],(function(require,e,a,t,s,r,n,o,i,l,u,d,c,p,y,h,v,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Checkboxset=void 0;const f={messages:"display"},m={instruction:""},S={definition:"",source:""},E=[],b=(0,r.forwardRef)((({id:e,options:t,containerReadonly:r,displayOptions:p=f,help:b=m,helpHints:V=S,disabled:M=!1,direction:A="column",labelWrapping:D,messagesCustom:C=E,columnSpan:_=1,readonly:P,readonlyUserAssistanceShown:k="none",userAssistanceDensity:U,required:x=!1,value:j=null,...w},O)=>{const R=(0,s.useRef)(),T=(0,s.useRef)(),N=(0,s.useCallback)(((e="Checkboxset: busyState")=>R.current?n.getContext(R.current).getBusyContext().addBusyState({description:e}):()=>{}),[]),F=function(e){return e&&"fetchFirst"in e}(t),{containerProps:H,uadValue:I,readonlyValue:L}=(0,c.useMergedFormContext)({propContainerReadonly:r,propLabelWrapping:D,propReadonly:P,propUserAssistanceDensity:U}),{checkboxsetProps:q,methods:B}=(0,v.useCheckboxsetPreact)({displayOptions:p,readonly:L,readonlyUserAssistanceShown:k,required:x,messagesCustom:C,disabled:M,value:j,userAssistanceDensity:I,...w},N),{value:G,...W}=q,{data:z}=(0,h.useDataProvider)({data:F?t:void 0,addBusyState:N}),K=(0,s.useMemo)((()=>{const e=!F&&t?[...t]:[];return F?Array.isArray(z)?z.map((e=>({value:e.key,...e.data}))):[]:e}),[z,F,t]);(0,s.useImperativeHandle)(O,(()=>({blur:()=>T.current?.blur(),focus:()=>T.current?.focus(),...B})),[B]);const Y=(0,y.useAssistiveText)({displayOptions:p,help:b,helpHints:V,userAssistanceDensity:I}),J=(0,s.useMemo)((()=>G?new Set(G):void 0),[G]),Q=(0,g.classNames)([o.layoutSpanStyles.layoutSpanColumn[_],H.isFormLayout&&"in-form-layout"]);return(0,a.jsx)(i.Root,{id:e,ref:R,class:Q,"data-oj-renders-label":!0,children:(0,a.jsx)(d.FormContext.Provider,{value:H,children:(0,a.jsx)(l.CheckboxSet,{ref:T,direction:A,...Y,...W,columnSpan:_,userAssistanceDensity:I,value:J,children:K.map((({assistiveText:e,helpSourceLink:t,helpSourceText:s,label:r,value:n})=>(0,a.jsx)(u.CheckboxItem,{assistiveText:e,helpSourceLink:t,helpSourceText:s,value:n,children:r},n)))})})})})),V=(0,i.registerCustomElement)("oj-c-checkboxset",b,"Checkboxset",{properties:{containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},columnSpan:{type:"number"},disabled:{type:"boolean"},direction:{type:"string",enumValues:["row","column"]},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},labelEdge:{type:"string",enumValues:["none","start","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"number|string",binding:{consume:{name:"labelWidth"}}},messagesCustom:{type:"Array<object>",writeback:!0},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},readonlyUserAssistanceShown:{type:"string",enumValues:["none","confirmationAndInfoMessages"]},required:{type:"boolean"},userAssistanceDensity:{type:"string",enumValues:["compact","reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},options:{type:"Array<object>|DataProvider"},labelWrapping:{type:"string",enumValues:["truncate","wrap"],binding:{consume:{name:"labelWrapping"}}},requiredMessageDetail:{type:"string"},valid:{type:"string",enumValues:["pending","valid","invalidHidden","invalidShown"],readOnly:!0,writeback:!0},value:{type:"Array<string|number>|null",writeback:!0}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{blur:{},focus:{},showMessages:{},reset:{},validate:{}}},{displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:""},disabled:!1,direction:"column",messagesCustom:[],columnSpan:1,readonlyUserAssistanceShown:"none",required:!1,value:null},{"@oracle/oraclejet-preact":t.default},{consume:[p.TabbableModeContext]});e.Checkboxset=V})),define("oj-c/checkboxset",["require","exports","oj-c/checkboxset/checkboxset"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Checkboxset=void 0,Object.defineProperty(e,"Checkboxset",{enumerable:!0,get:function(){return a.Checkboxset}})}));
//# sourceMappingURL=checkboxset.js.map